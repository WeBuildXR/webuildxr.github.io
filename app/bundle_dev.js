/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/ansi-html/index.js":
/*!*****************************************!*\
  !*** ./node_modules/ansi-html/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = ansiHTML

// Reference to https://github.com/sindresorhus/ansi-regex
var _regANSI = /(?:(?:\u001b\[)|\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\u001b[A-M]/

var _defColors = {
  reset: ['fff', '000'], // [FOREGROUD_COLOR, BACKGROUND_COLOR]
  black: '000',
  red: 'ff0000',
  green: '209805',
  yellow: 'e8bf03',
  blue: '0000ff',
  magenta: 'ff00ff',
  cyan: '00ffee',
  lightgrey: 'f0f0f0',
  darkgrey: '888'
}
var _styles = {
  30: 'black',
  31: 'red',
  32: 'green',
  33: 'yellow',
  34: 'blue',
  35: 'magenta',
  36: 'cyan',
  37: 'lightgrey'
}
var _openTags = {
  '1': 'font-weight:bold', // bold
  '2': 'opacity:0.5', // dim
  '3': '<i>', // italic
  '4': '<u>', // underscore
  '8': 'display:none', // hidden
  '9': '<del>' // delete
}
var _closeTags = {
  '23': '</i>', // reset italic
  '24': '</u>', // reset underscore
  '29': '</del>' // reset delete
}

;[0, 21, 22, 27, 28, 39, 49].forEach(function (n) {
  _closeTags[n] = '</span>'
})

/**
 * Converts text with ANSI color codes to HTML markup.
 * @param {String} text
 * @returns {*}
 */
function ansiHTML (text) {
  // Returns the text if the string has no ANSI escape code.
  if (!_regANSI.test(text)) {
    return text
  }

  // Cache opened sequence.
  var ansiCodes = []
  // Replace with markup.
  var ret = text.replace(/\033\[(\d+)*m/g, function (match, seq) {
    var ot = _openTags[seq]
    if (ot) {
      // If current sequence has been opened, close it.
      if (!!~ansiCodes.indexOf(seq)) { // eslint-disable-line no-extra-boolean-cast
        ansiCodes.pop()
        return '</span>'
      }
      // Open tag.
      ansiCodes.push(seq)
      return ot[0] === '<' ? ot : '<span style="' + ot + ';">'
    }

    var ct = _closeTags[seq]
    if (ct) {
      // Pop sequence
      ansiCodes.pop()
      return ct
    }
    return ''
  })

  // Make sure tags are closed.
  var l = ansiCodes.length
  ;(l > 0) && (ret += Array(l + 1).join('</span>'))

  return ret
}

/**
 * Customize colors.
 * @param {Object} colors reference to _defColors
 */
ansiHTML.setColors = function (colors) {
  if (typeof colors !== 'object') {
    throw new Error('`colors` parameter must be an Object.')
  }

  var _finalColors = {}
  for (var key in _defColors) {
    var hex = colors.hasOwnProperty(key) ? colors[key] : null
    if (!hex) {
      _finalColors[key] = _defColors[key]
      continue
    }
    if ('reset' === key) {
      if (typeof hex === 'string') {
        hex = [hex]
      }
      if (!Array.isArray(hex) || hex.length === 0 || hex.some(function (h) {
        return typeof h !== 'string'
      })) {
        throw new Error('The value of `' + key + '` property must be an Array and each item could only be a hex string, e.g.: FF0000')
      }
      var defHexColor = _defColors[key]
      if (!hex[0]) {
        hex[0] = defHexColor[0]
      }
      if (hex.length === 1 || !hex[1]) {
        hex = [hex[0]]
        hex.push(defHexColor[1])
      }

      hex = hex.slice(0, 2)
    } else if (typeof hex !== 'string') {
      throw new Error('The value of `' + key + '` property must be a hex string, e.g.: FF0000')
    }
    _finalColors[key] = hex
  }
  _setTags(_finalColors)
}

/**
 * Reset colors.
 */
ansiHTML.reset = function () {
  _setTags(_defColors)
}

/**
 * Expose tags, including open and close.
 * @type {Object}
 */
ansiHTML.tags = {}

if (Object.defineProperty) {
  Object.defineProperty(ansiHTML.tags, 'open', {
    get: function () { return _openTags }
  })
  Object.defineProperty(ansiHTML.tags, 'close', {
    get: function () { return _closeTags }
  })
} else {
  ansiHTML.tags.open = _openTags
  ansiHTML.tags.close = _closeTags
}

function _setTags (colors) {
  // reset all
  _openTags['0'] = 'font-weight:normal;opacity:1;color:#' + colors.reset[0] + ';background:#' + colors.reset[1]
  // inverse
  _openTags['7'] = 'color:#' + colors.reset[1] + ';background:#' + colors.reset[0]
  // dark grey
  _openTags['90'] = 'color:#' + colors.darkgrey

  for (var code in _styles) {
    var color = _styles[code]
    var oriColor = colors[color] || '000'
    _openTags[code] = 'color:#' + oriColor
    code = parseInt(code)
    _openTags[(code + 10).toString()] = 'background:#' + oriColor
  }
}

ansiHTML.reset()


/***/ }),

/***/ "./node_modules/babylonjs-gui/babylon.gui.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/babylonjs-gui/babylon.gui.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {!function(t,e){ true?module.exports=e(__webpack_require__(/*! babylonjs */ "babylonjs")):undefined}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}var s=i(0),a=function(){function t(e,i,r){void 0===i&&(i=t.UNITMODE_PIXEL),void 0===r&&(r=!0),this.unit=i,this.negativeValueAllowed=r,this._value=1,this.ignoreAdaptiveScaling=!1,this._value=e,this._originalUnit=i}return Object.defineProperty(t.prototype,"isPercentage",{get:function(){return this.unit===t.UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPixel",{get:function(){return this.unit===t.UNITMODE_PIXEL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"internalValue",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.getValueInPixel=function(t,e){return this.isPixel?this.getValue(t):this.getValue(t)*e},t.prototype.updateInPlace=function(e,i){return void 0===i&&(i=t.UNITMODE_PIXEL),this._value=e,this.unit=i,this},t.prototype.getValue=function(e){if(e&&!this.ignoreAdaptiveScaling&&this.unit!==t.UNITMODE_PERCENTAGE){var i=0,r=0;if(e.idealWidth&&(i=this._value*e.getSize().width/e.idealWidth),e.idealHeight&&(r=this._value*e.getSize().height/e.idealHeight),e.useSmallestIdeal&&e.idealWidth&&e.idealHeight)return window.innerWidth<window.innerHeight?i:r;if(e.idealWidth)return i;if(e.idealHeight)return r}return this._value},t.prototype.toString=function(e,i){switch(this.unit){case t.UNITMODE_PERCENTAGE:var r=100*this.getValue(e);return(i?r.toFixed(i):r)+"%";case t.UNITMODE_PIXEL:var n=this.getValue(e);return(i?n.toFixed(i):n)+"px"}return this.unit.toString()},t.prototype.fromString=function(e){var i=t._Regex.exec(e.toString());if(!i||0===i.length)return!1;var r=parseFloat(i[1]),n=this._originalUnit;if(this.negativeValueAllowed||r<0&&(r=0),4===i.length)switch(i[3]){case"px":n=t.UNITMODE_PIXEL;break;case"%":n=t.UNITMODE_PERCENTAGE,r/=100}return(r!==this._value||n!==this.unit)&&(this._value=r,this.unit=n,!0)},Object.defineProperty(t,"UNITMODE_PERCENTAGE",{get:function(){return t._UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UNITMODE_PIXEL",{get:function(){return t._UNITMODE_PIXEL},enumerable:!0,configurable:!0}),t._Regex=/(^-?\d*(\.\d+)?)(%|px)?/,t._UNITMODE_PERCENTAGE=0,t._UNITMODE_PIXEL=1,t}(),h=[new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0)],l=[new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0)],u=new s.Vector2(0,0),c=new s.Vector2(0,0),_=function(){function t(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r}return t.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r},t.CombineToRef=function(t,e,i){var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.left+t.width,e.left+e.width),s=Math.max(t.top+t.height,e.top+e.height);i.left=r,i.top=n,i.width=o-r,i.height=s-n},t.prototype.transformToRef=function(t,e){h[0].copyFromFloats(this.left,this.top),h[1].copyFromFloats(this.left+this.width,this.top),h[2].copyFromFloats(this.left+this.width,this.top+this.height),h[3].copyFromFloats(this.left,this.top+this.height),u.copyFromFloats(Number.MAX_VALUE,Number.MAX_VALUE),c.copyFromFloats(0,0);for(var i=0;i<4;i++)t.transformCoordinates(h[i].x,h[i].y,l[i]),u.x=Math.floor(Math.min(u.x,l[i].x)),u.y=Math.floor(Math.min(u.y,l[i].y)),c.x=Math.ceil(Math.max(c.x,l[i].x)),c.y=Math.ceil(Math.max(c.y,l[i].y));e.left=u.x,e.top=u.y,e.width=c.x-u.x,e.height=c.y-u.y},t.prototype.isEqualsTo=function(t){return this.left===t.left&&(this.top===t.top&&(this.width===t.width&&this.height===t.height))},t.Empty=function(){return new t(0,0,0,0)},t}(),d=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y)||this;return r.buttonIndex=i,r}return n(e,t),e}(s.Vector2),f=function(){function t(t,e,i,r,n,o){this.m=new Float32Array(6),this.fromValues(t,e,i,r,n,o)}return t.prototype.fromValues=function(t,e,i,r,n,o){return this.m[0]=t,this.m[1]=e,this.m[2]=i,this.m[3]=r,this.m[4]=n,this.m[5]=o,this},t.prototype.determinant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},t.prototype.invertToRef=function(t){var e=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],o=this.m[4],a=this.m[5],h=this.determinant();if(h<s.Epsilon*s.Epsilon)return t.m[0]=0,t.m[1]=0,t.m[2]=0,t.m[3]=0,t.m[4]=0,t.m[5]=0,this;var l=1/h,u=r*a-n*o,c=i*o-e*a;return t.m[0]=n*l,t.m[1]=-i*l,t.m[2]=-r*l,t.m[3]=e*l,t.m[4]=u*l,t.m[5]=c*l,this},t.prototype.multiplyToRef=function(t,e){var i=this.m[0],r=this.m[1],n=this.m[2],o=this.m[3],s=this.m[4],a=this.m[5],h=t.m[0],l=t.m[1],u=t.m[2],c=t.m[3],_=t.m[4],d=t.m[5];return e.m[0]=i*h+r*u,e.m[1]=i*l+r*c,e.m[2]=n*h+o*u,e.m[3]=n*l+o*c,e.m[4]=s*h+a*u+_,e.m[5]=s*l+a*c+d,this},t.prototype.transformCoordinates=function(t,e,i){return i.x=t*this.m[0]+e*this.m[2]+this.m[4],i.y=t*this.m[1]+e*this.m[3]+this.m[5],this},t.Identity=function(){return new t(1,0,0,1,0,0)},t.TranslationToRef=function(t,e,i){i.fromValues(1,0,0,1,t,e)},t.ScalingToRef=function(t,e,i){i.fromValues(t,0,0,e,0,0)},t.RotationToRef=function(t,e){var i=Math.sin(t),r=Math.cos(t);e.fromValues(r,i,-i,r,0,0)},t.ComposeToRef=function(e,i,r,n,o,s,a){t.TranslationToRef(e,i,t._TempPreTranslationMatrix),t.ScalingToRef(n,o,t._TempScalingMatrix),t.RotationToRef(r,t._TempRotationMatrix),t.TranslationToRef(-e,-i,t._TempPostTranslationMatrix),t._TempPreTranslationMatrix.multiplyToRef(t._TempScalingMatrix,t._TempCompose0),t._TempCompose0.multiplyToRef(t._TempRotationMatrix,t._TempCompose1),s?(t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,t._TempCompose2),t._TempCompose2.multiplyToRef(s,a)):t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,a)},t._TempPreTranslationMatrix=t.Identity(),t._TempPostTranslationMatrix=t.Identity(),t._TempRotationMatrix=t.Identity(),t._TempScalingMatrix=t.Identity(),t._TempCompose0=t.Identity(),t._TempCompose1=t.Identity(),t._TempCompose2=t.Identity(),t}(),p=function(){function t(e){this.name=e,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=_.Empty(),this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this._width=new a(1,a.UNITMODE_PERCENTAGE,!1),this._height=new a(1,a.UNITMODE_PERCENTAGE,!1),this._color="",this._style=null,this._horizontalAlignment=t.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=t.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=_.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=_.Empty(),this._cachedParentMeasure=_.Empty(),this._paddingLeft=new a(0),this._paddingRight=new a(0),this._paddingTop=new a(0),this._paddingBottom=new a(0),this._left=new a(0),this._top=new a(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=f.Identity(),this._invertTransformMatrix=f.Identity(),this._transformedPosition=s.Vector2.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._fontSet=!1,this._dummyVector2=s.Vector2.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._isEnabled=!0,this._disabledColor="#9a9a9a",this._disabledColorItem="#6a6a6a",this._rebuildLayout=!1,this._customData={},this._isClipped=!1,this._automaticSize=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this.clipChildren=!0,this.clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._shadowColor="black",this.hoverCursor="",this._linkOffsetX=new a(0),this._linkOffsetY=new a(0),this.onWheelObservable=new s.Observable,this.onPointerMoveObservable=new s.Observable,this.onPointerOutObservable=new s.Observable,this.onPointerDownObservable=new s.Observable,this.onPointerUpObservable=new s.Observable,this.onPointerClickObservable=new s.Observable,this.onPointerEnterObservable=new s.Observable,this.onDirtyObservable=new s.Observable,this.onBeforeDrawObservable=new s.Observable,this.onAfterDrawObservable=new s.Observable,this._tmpMeasureA=new _(0,0,0,0)}return Object.defineProperty(t.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur!==t&&(this._shadowBlur=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontOffset",{get:function(){return this._fontOffset},set:function(t){this._fontOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformCenterY",{get:function(){return this._transformCenterY},set:function(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformCenterX",{get:function(){return this._transformCenterX},set:function(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthInPixels",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.width=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightInPixels",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.height=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontSet?this._fontFamily:""},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){var e=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add(function(){e._markAsDirty(),e._resetFontCache()})),this._markAsDirty(),this._resetFontCache()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isFontSizeInPercentage",{get:function(){return this._fontSize.isPercentage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSizeInPixels",{get:function(){var t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.fontSize=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notRenderable",{get:function(){return this._doNotRender},set:function(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkedMesh",{get:function(){return this._linkedMesh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this._paddingLeft.toString(this._host)},set:function(t){this._paddingLeft.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeftInPixels",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingLeft=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this._paddingRight.toString(this._host)},set:function(t){this._paddingRight.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRightInPixels",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingRight=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this._paddingTop.toString(this._host)},set:function(t){this._paddingTop.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTopInPixels",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingTop=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottom",{get:function(){return this._paddingBottom.toString(this._host)},set:function(t){this._paddingBottom.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottomInPixels",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingBottom=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left.toString(this._host)},set:function(t){this._left.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftInPixels",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.left=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._top.toString(this._host)},set:function(t){this._top.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topInPixels",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.top=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetX",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetXInPixels",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.linkOffsetX=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetY",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetYInPixels",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.linkOffsetY=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabledColor",{get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabledColorItem",{get:function(){return this._disabledColorItem},set:function(t){this._disabledColorItem!==t&&(this._disabledColorItem=t,this._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype._getTypeName=function(){return"Control"},t.prototype.getAscendantOfClass=function(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null},t.prototype._resetFontCache=function(){this._fontSet=!0,this._markAsDirty()},t.prototype.isAscendant=function(t){return!!this.parent&&(this.parent===t||this.parent.isAscendant(t))},t.prototype.getLocalCoordinates=function(t){var e=s.Vector2.Zero();return this.getLocalCoordinatesToRef(t,e),e},t.prototype.getLocalCoordinatesToRef=function(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this},t.prototype.getParentLocalCoordinates=function(t){var e=s.Vector2.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e},t.prototype.moveToVector3=function(e,i){if(this._host&&this.parent===this._host._rootContainer){this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP;var r=this._host._getGlobalViewport(i),n=s.Vector3.Project(e,s.Matrix.Identity(),i.getTransformMatrix(),r);this._moveToProjectedPosition(n),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else s.Tools.Error("Cannot move a control to a vector3 if the control is not at root level")},t.prototype.getDescendantsToRef=function(t,e,i){void 0===e&&(e=!1)},t.prototype.getDescendants=function(t,e){var i=new Array;return this.getDescendantsToRef(i,t,e),i},t.prototype.linkWithMesh=function(e){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)e&&s.Tools.Error("Cannot link a control to a mesh if the control is not at root level");else{var i=this._host._linkedControls.indexOf(this);if(-1!==i)return this._linkedMesh=e,void(e||this._host._linkedControls.splice(i,1));e&&(this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=e,this._host._linkedControls.push(this))}},t.prototype._moveToProjectedPosition=function(t){var e=this._left.getValue(this._host),i=this._top.getValue(this._host),r=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,n=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(Math.abs(r-e)<.5&&(r=e),Math.abs(n-i)<.5&&(n=i)),this.left=r+"px",this.top=n+"px",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty()},t.prototype._offsetLeft=function(t){this._isDirty=!0,this._currentMeasure.left+=t},t.prototype._offsetTop=function(t){this._isDirty=!0,this._currentMeasure.top+=t},t.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()},t.prototype._flagDescendantsAsMatrixDirty=function(){},t.prototype._intersectsRect=function(t){return this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),!(this._tmpMeasureA.left>=t.left+t.width)&&(!(this._tmpMeasureA.top>=t.top+t.height)&&(!(this._tmpMeasureA.left+this._tmpMeasureA.width<=t.left)&&!(this._tmpMeasureA.top+this._tmpMeasureA.height<=t.top)))},t.prototype.invalidateRect=function(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization)if(this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),_.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA),this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var t=this.shadowOffsetX,e=this.shadowOffsetY,i=this.shadowBlur,r=Math.min(Math.min(t,0)-2*i,0),n=Math.max(Math.max(t,0)+2*i,0),o=Math.min(Math.min(e,0)-2*i,0),s=Math.max(Math.max(e,0)+2*i,0);this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+r),Math.floor(this._tmpMeasureA.top+o),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+n),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+s))}else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left),Math.floor(this._tmpMeasureA.top),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height))},t.prototype._markAsDirty=function(t){void 0===t&&(t=!1),(this._isVisible||t)&&(this._isDirty=!0,this._host&&this._host.markAsDirty())},t.prototype._markAllAsDirty=function(){this._markAsDirty(),this._font&&this._prepareFont()},t.prototype._link=function(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())},t.prototype._transform=function(t){if(this._isMatrixDirty||1!==this._scaleX||1!==this._scaleY||0!==this._rotation){var e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),f.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix))}},t.prototype._renderHighlight=function(t){this.isHighlighted&&(t.save(),t.strokeStyle="#4affff",t.lineWidth=2,this._renderHighlightSpecific(t),t.restore())},t.prototype._renderHighlightSpecific=function(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)},t.prototype._applyStates=function(e){this._isFontSizeInPercentage&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(e.font=this._font),this._color&&(e.fillStyle=this._color),t.AllowAlphaInheritance?e.globalAlpha*=this._alpha:this._alphaSet&&(e.globalAlpha=this.parent?this.parent.alpha*this._alpha:this._alpha)},t.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this.host._numLayoutCalls++,this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);var i=0;do{this._rebuildLayout=!1,this._processMeasures(t,e),i++}while(this._rebuildLayout&&i<3);i>=3&&s.Logger.Error("Layout cycle detected in GUI (Control name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0},t.prototype._processMeasures=function(t,e){this._currentMeasure.copyFrom(t),this._preMeasure(t,e),this._measure(),this._computeAlignment(t,e),this._currentMeasure.left=0|this._currentMeasure.left,this._currentMeasure.top=0|this._currentMeasure.top,this._currentMeasure.width=0|this._currentMeasure.width,this._currentMeasure.height=0|this._currentMeasure.height,this._additionalProcessing(t,e),this._cachedParentMeasure.copyFrom(t),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)},t.prototype._evaluateClippingState=function(t){if(this.parent&&this.parent.clipChildren){if(this._currentMeasure.left>t.left+t.width)return void(this._isClipped=!0);if(this._currentMeasure.left+this._currentMeasure.width<t.left)return void(this._isClipped=!0);if(this._currentMeasure.top>t.top+t.height)return void(this._isClipped=!0);if(this._currentMeasure.top+this._currentMeasure.height<t.top)return void(this._isClipped=!0)}this._isClipped=!1},t.prototype._measure=function(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host)},t.prototype._computeAlignment=function(e,i){var r=this._currentMeasure.width,n=this._currentMeasure.height,o=e.width,s=e.height,a=0,h=0;switch(this.horizontalAlignment){case t.HORIZONTAL_ALIGNMENT_LEFT:a=0;break;case t.HORIZONTAL_ALIGNMENT_RIGHT:a=o-r;break;case t.HORIZONTAL_ALIGNMENT_CENTER:a=(o-r)/2}switch(this.verticalAlignment){case t.VERTICAL_ALIGNMENT_TOP:h=0;break;case t.VERTICAL_ALIGNMENT_BOTTOM:h=s-n;break;case t.VERTICAL_ALIGNMENT_CENTER:h=(s-n)/2}this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=o*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=o*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=o*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=s*this._paddingTop.getValue(this._host),this._currentMeasure.height-=s*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=s*this._paddingBottom.getValue(this._host),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=o*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=s*this._top.getValue(this._host),this._currentMeasure.left+=a,this._currentMeasure.top+=h},t.prototype._preMeasure=function(t,e){},t.prototype._additionalProcessing=function(t,e){},t.prototype._clipForChildren=function(t){},t.prototype._clip=function(e,i){if(e.beginPath(),t._ClipMeasure.copyFrom(this._currentMeasure),i){i.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);var r=new _(0,0,0,0);r.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),r.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),r.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-r.left,r.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-r.top,t._ClipMeasure.copyFrom(r)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var n=this.shadowOffsetX,o=this.shadowOffsetY,s=this.shadowBlur,a=Math.min(Math.min(n,0)-2*s,0),h=Math.max(Math.max(n,0)+2*s,0),l=Math.min(Math.min(o,0)-2*s,0),u=Math.max(Math.max(o,0)+2*s,0);e.rect(t._ClipMeasure.left+a,t._ClipMeasure.top+l,t._ClipMeasure.width+h-a,t._ClipMeasure.height+u-l)}else e.rect(t._ClipMeasure.left,t._ClipMeasure.top,t._ClipMeasure.width,t._ClipMeasure.height);e.clip()},t.prototype._render=function(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(this.host._numRenderCalls++,t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)},t.prototype._draw=function(t,e){},t.prototype.contains=function(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,!(t<this._currentMeasure.left)&&(!(t>this._currentMeasure.left+this._currentMeasure.width)&&(!(e<this._currentMeasure.top)&&(!(e>this._currentMeasure.top+this._currentMeasure.height)&&(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),!0))))},t.prototype._processPicking=function(t,e,i,r,n,o,s){return!!this._isEnabled&&(!(!this.isHitTestVisible||!this.isVisible||this._doNotRender)&&(!!this.contains(t,e)&&(this._processObservables(i,t,e,r,n,o,s),!0)))},t.prototype._onPointerMove=function(t,e,i){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)&&null!=this.parent&&this.parent._onPointerMove(t,e,i)},t.prototype._onPointerEnter=function(t){return!!this._isEnabled&&(!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this)&&null!=this.parent&&this.parent._onPointerEnter(t),!0))},t.prototype._onPointerOut=function(t,e){if(void 0===e&&(e=!1),e||this._isEnabled&&t!==this){this._enterCount=0;var i=!0;t.isAscendant(this)||(i=this.onPointerOutObservable.notifyObservers(this,-1,t,this)),i&&null!=this.parent&&this.parent._onPointerOut(t,e)}},t.prototype._onPointerDown=function(t,e,i,r){return this._onPointerEnter(this),0===this._downCount&&(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new d(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerDown(t,e,i,r),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){if(this._isEnabled){this._downCount=0,delete this._downPointerIds[i];var o=n;n&&(this._enterCount>0||-1===this._enterCount)&&(o=this.onPointerClickObservable.notifyObservers(new d(e,r),-1,t,this)),this.onPointerUpObservable.notifyObservers(new d(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerUp(t,e,i,r,o)}},t.prototype._forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,s.Vector2.Zero(),t,0,!0);else for(var e in this._downPointerIds)this._onPointerUp(this,s.Vector2.Zero(),+e,0,!0)},t.prototype._onWheelScroll=function(t,e){this._isEnabled&&(this.onWheelObservable.notifyObservers(new s.Vector2(t,e))&&null!=this.parent&&this.parent._onWheelScroll(t,e))},t.prototype._processObservables=function(t,e,i,r,n,o,a){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===s.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,r);var h=this._host._lastControlOver[r];return h&&h!==this&&h._onPointerOut(this),h!==this&&this._onPointerEnter(this),this._host._lastControlOver[r]=this,!0}return t===s.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,r,n),this._host._registerLastControlDown(this,r),this._host._lastPickedControl=this,!0):t===s.PointerEventTypes.POINTERUP?(this._host._lastControlDown[r]&&this._host._lastControlDown[r]._onPointerUp(this,this._dummyVector2,r,n,!0),delete this._host._lastControlDown[r],!0):!(t!==s.PointerEventTypes.POINTERWHEEL||!this._host._lastControlOver[r])&&(this._host._lastControlOver[r]._onWheelScroll(o,a),!0)},t.prototype._prepareFont=function(){(this._font||this._fontSet)&&(this._style?this._font=this._style.fontStyle+" "+this._style.fontWeight+" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._font=this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=t._GetFontOffset(this._font))},t.prototype.dispose=function(){(this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this.onWheelObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host)&&(this._host._linkedControls.indexOf(this)>-1&&this.linkWithMesh(null))},Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_LEFT",{get:function(){return t._HORIZONTAL_ALIGNMENT_LEFT},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_RIGHT",{get:function(){return t._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_CENTER",{get:function(){return t._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_TOP",{get:function(){return t._VERTICAL_ALIGNMENT_TOP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_BOTTOM",{get:function(){return t._VERTICAL_ALIGNMENT_BOTTOM},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_CENTER",{get:function(){return t._VERTICAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),t._GetFontOffset=function(e){if(t._FontHeightSizes[e])return t._FontHeightSizes[e];var i=document.createElement("span");i.innerHTML="Hg",i.style.font=e;var r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="0px",r.style.verticalAlign="bottom";var n=document.createElement("div");n.appendChild(i),n.appendChild(r),document.body.appendChild(n);var o=0,s=0;try{s=r.getBoundingClientRect().top-i.getBoundingClientRect().top,r.style.verticalAlign="baseline",o=r.getBoundingClientRect().top-i.getBoundingClientRect().top}finally{document.body.removeChild(n)}var a={ascent:o,height:s,descent:s-o};return t._FontHeightSizes[e]=a,a},t.drawEllipse=function(t,e,i,r,n){n.translate(t,e),n.scale(i,r),n.beginPath(),n.arc(0,0,1,0,2*Math.PI),n.closePath(),n.scale(1/i,1/r),n.translate(-t,-e)},t.AllowAlphaInheritance=!1,t._ClipMeasure=new _(0,0,0,0),t._HORIZONTAL_ALIGNMENT_LEFT=0,t._HORIZONTAL_ALIGNMENT_RIGHT=1,t._HORIZONTAL_ALIGNMENT_CENTER=2,t._VERTICAL_ALIGNMENT_TOP=0,t._VERTICAL_ALIGNMENT_BOTTOM=1,t._VERTICAL_ALIGNMENT_CENTER=2,t._FontHeightSizes={},t.AddHeader=function(){},t}();s._TypeStore.RegisteredTypes["BABYLON.GUI.Control"]=p;var g=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._children=new Array,i._measureForChildren=_.Empty(),i._background="",i._adaptWidthToChildren=!1,i._adaptHeightToChildren=!1,i.logLayoutCycleErrors=!1,i.maxLayoutCycle=3,i}return n(e,t),Object.defineProperty(e.prototype,"adaptHeightToChildren",{get:function(){return this._adaptHeightToChildren},set:function(t){this._adaptHeightToChildren!==t&&(this._adaptHeightToChildren=t,t&&(this.height="100%"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptWidthToChildren",{get:function(){return this._adaptWidthToChildren},set:function(t){this._adaptWidthToChildren!==t&&(this._adaptWidthToChildren=t,t&&(this.width="100%"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Container"},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this.children;t<e.length;t++){e[t]._markMatrixAsDirty()}},e.prototype.getChildByName=function(t){for(var e=0,i=this.children;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},e.prototype.getChildByType=function(t,e){for(var i=0,r=this.children;i<r.length;i++){var n=r[i];if(n.typeName===e)return n}return null},e.prototype.containsControl=function(t){return-1!==this.children.indexOf(t)},e.prototype.addControl=function(t){return t?-1!==this._children.indexOf(t)?this:(t._link(this._host),t._markAllAsDirty(),this._reOrderControl(t),this._markAsDirty(),this):this},e.prototype.clearControls=function(){for(var t=0,e=this.children.slice();t<e.length;t++){var i=e[t];this.removeControl(i)}return this},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null),t.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(t),this._markAsDirty(),this},e.prototype._reOrderControl=function(t){this.removeControl(t);for(var e=!1,i=0;i<this._children.length;i++)if(this._children[i].zIndex>t.zIndex){this._children.splice(i,0,t),e=!0;break}e||this._children.push(t),t.parent=this,this._markAsDirty()},e.prototype._offsetLeft=function(e){t.prototype._offsetLeft.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetLeft(e)}},e.prototype._offsetTop=function(e){t.prototype._offsetTop.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetTop(e)}},e.prototype._markAllAsDirty=function(){t.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()},e.prototype._localDraw=function(t){this._background&&(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.restore())},e.prototype._link=function(e){t.prototype._link.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._link(e)}},e.prototype._beforeLayout=function(){},e.prototype._processMeasures=function(e,i){!this._isDirty&&this._cachedParentMeasure.isEqualsTo(e)||(t.prototype._processMeasures.call(this,e,i),this._evaluateClippingState(e))},e.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++,this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var i=0;e.save(),this._applyStates(e),this._beforeLayout();do{var r=-1,n=-1;if(this._rebuildLayout=!1,this._processMeasures(t,e),!this._isClipped){for(var o=0,a=this._children;o<a.length;o++){var h=a[o];h._tempParentMeasure.copyFrom(this._measureForChildren),h._layout(this._measureForChildren,e)&&(this.adaptWidthToChildren&&h._width.isPixel&&(r=Math.max(r,h._currentMeasure.width)),this.adaptHeightToChildren&&h._height.isPixel&&(n=Math.max(n,h._currentMeasure.height)))}this.adaptWidthToChildren&&r>=0&&this.width!==r+"px"&&(this.width=r+"px",this._rebuildLayout=!0),this.adaptHeightToChildren&&n>=0&&this.height!==n+"px"&&(this.height=n+"px",this._rebuildLayout=!0),this._postMeasure()}i++}while(this._rebuildLayout&&i<this.maxLayoutCycle);return i>=3&&this.logLayoutCycleErrors&&s.Logger.Error("Layout cycle detected in GUI (Container name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0},e.prototype._postMeasure=function(){},e.prototype._draw=function(t,e){this._localDraw(t),this.clipChildren&&this._clipForChildren(t);for(var i=0,r=this._children;i<r.length;i++){var n=r[i];e&&!n._intersectsRect(e)||n._render(t,e)}},e.prototype.getDescendantsToRef=function(t,e,i){if(void 0===e&&(e=!1),this.children)for(var r=0;r<this.children.length;r++){var n=this.children[r];i&&!i(n)||t.push(n),e||n.getDescendantsToRef(t,!1,i)}},e.prototype._processPicking=function(e,i,r,n,o,s,a){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;for(var h=this._children.length-1;h>=0;h--){var l=this._children[h];if(l._processPicking(e,i,r,n,o,s,a))return l.hoverCursor&&this._host._changeCursor(l.hoverCursor),!0}return!!this.isHitTestVisible&&this._processObservables(r,e,i,n,o,s,a)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(this._currentMeasure)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this.children.length-1;e>=0;e--)this.children[e].dispose()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Container"]=g;var b,m=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i._cornerRadius=0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){t<0&&(t=0),this._cornerRadius!==t&&(this._cornerRadius=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Rectangle"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._background&&(t.fillStyle=this._background,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.fill()):t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._thickness&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.stroke()):t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._drawRoundedRect=function(t,e){void 0===e&&(e=0);var i=this._currentMeasure.left+e,r=this._currentMeasure.top+e,n=this._currentMeasure.width-2*e,o=this._currentMeasure.height-2*e,s=Math.min(o/2-2,Math.min(n/2-2,this._cornerRadius));t.beginPath(),t.moveTo(i+s,r),t.lineTo(i+n-s,r),t.quadraticCurveTo(i+n,r,i+n,r+s),t.lineTo(i+n,r+o-s),t.quadraticCurveTo(i+n,r+o,i+n-s,r+o),t.lineTo(i+s,r+o),t.quadraticCurveTo(i,r+o,i,r+o-s),t.lineTo(i,r+s),t.quadraticCurveTo(i,r,i+s,r),t.closePath()},e.prototype._clipForChildren=function(t){this._cornerRadius&&(this._drawRoundedRect(t,this._thickness),t.clip())},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Rectangle"]=m,function(t){t[t.Clip=0]="Clip",t[t.WordWrap=1]="WordWrap",t[t.Ellipsis=2]="Ellipsis"}(b||(b={}));var y=function(t){function e(e,i){void 0===i&&(i="");var r=t.call(this,e)||this;return r.name=e,r._text="",r._textWrapping=b.Clip,r._textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,r._textVerticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,r._resizeToFit=!1,r._lineSpacing=new a(0),r._outlineWidth=0,r._outlineColor="white",r.onTextChangedObservable=new s.Observable,r.onLinesReadyObservable=new s.Observable,r.text=i,r}return n(e,t),Object.defineProperty(e.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeToFit",{get:function(){return this._resizeToFit},set:function(t){this._resizeToFit!==t&&(this._resizeToFit=t,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWrapping",{get:function(){return this._textWrapping},set:function(t){this._textWrapping!==t&&(this._textWrapping=+t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHorizontalAlignment",{get:function(){return this._textHorizontalAlignment},set:function(t){this._textHorizontalAlignment!==t&&(this._textHorizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textVerticalAlignment",{get:function(){return this._textVerticalAlignment},set:function(t){this._textVerticalAlignment!==t&&(this._textVerticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._lineSpacing.toString(this._host)},set:function(t){this._lineSpacing.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(t){this._outlineColor!==t&&(this._outlineColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"TextBlock"},e.prototype._processMeasures=function(e,i){this._fontOffset||(this._fontOffset=p._GetFontOffset(i.font)),t.prototype._processMeasures.call(this,e,i),this._lines=this._breakLines(this._currentMeasure.width,i),this.onLinesReadyObservable.notifyObservers(this);for(var r=0,n=0;n<this._lines.length;n++){var o=this._lines[n];o.width>r&&(r=o.width)}if(this._resizeToFit){if(this._textWrapping===b.Clip){var s=this.paddingLeftInPixels+this.paddingRightInPixels+r;s!==this._width.internalValue&&(this._width.updateInPlace(s,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}var h=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*this._lines.length;if(this._lines.length>0&&0!==this._lineSpacing.internalValue){var l=0;l=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),h+=(this._lines.length-1)*l}h!==this._height.internalValue&&(this._height.updateInPlace(h,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}},e.prototype._drawText=function(t,e,i,r){var n=this._currentMeasure.width,o=0;switch(this._textHorizontalAlignment){case p.HORIZONTAL_ALIGNMENT_LEFT:o=0;break;case p.HORIZONTAL_ALIGNMENT_RIGHT:o=n-e;break;case p.HORIZONTAL_ALIGNMENT_CENTER:o=(n-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&r.strokeText(t,this._currentMeasure.left+o,i),r.fillText(t,this._currentMeasure.left+o,i)},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._renderLines(t),t.restore()},e.prototype._applyStates=function(e){t.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor)},e.prototype._breakLines=function(t,e){var i=[],r=this.text.split("\n");if(this._textWrapping===b.Ellipsis)for(var n=0,o=r;n<o.length;n++){var s=o[n];i.push(this._parseLineEllipsis(s,t,e))}else if(this._textWrapping===b.WordWrap)for(var a=0,h=r;a<h.length;a++){s=h[a];i.push.apply(i,this._parseLineWordWrap(s,t,e))}else for(var l=0,u=r;l<u.length;l++){s=u[l];i.push(this._parseLine(s,e))}return i},e.prototype._parseLine=function(t,e){return void 0===t&&(t=""),{text:t,width:e.measureText(t).width}},e.prototype._parseLineEllipsis=function(t,e,i){void 0===t&&(t="");var r=i.measureText(t).width;for(r>e&&(t+="…");t.length>2&&r>e;)t=t.slice(0,-2)+"…",r=i.measureText(t).width;return{text:t,width:r}},e.prototype._parseLineWordWrap=function(t,e,i){void 0===t&&(t="");for(var r=[],n=t.split(" "),o=0,s=0;s<n.length;s++){var a=s>0?t+" "+n[s]:n[0],h=i.measureText(a).width;h>e&&s>0?(r.push({text:t,width:o}),t=n[s],o=i.measureText(t).width):(o=h,t=a)}return r.push({text:t,width:o}),r},e.prototype._renderLines=function(t){var e=this._currentMeasure.height,i=0;switch(this._textVerticalAlignment){case p.VERTICAL_ALIGNMENT_TOP:i=this._fontOffset.ascent;break;case p.VERTICAL_ALIGNMENT_BOTTOM:i=e-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case p.VERTICAL_ALIGNMENT_CENTER:i=this._fontOffset.ascent+(e-this._fontOffset.height*this._lines.length)/2}i+=this._currentMeasure.top;for(var r=0;r<this._lines.length;r++){var n=this._lines[r];0!==r&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?i+=this._lineSpacing.getValue(this._host):i+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(n.text,n.width,i,t),i+=this._fontOffset.height}},e.prototype.computeExpectedHeight=function(){if(this.text&&this.widthInPixels){var t=document.createElement("canvas").getContext("2d");if(t){this._applyStates(t),this._fontOffset||(this._fontOffset=p._GetFontOffset(t.font));var e=this._lines?this._lines:this._breakLines(this.widthInPixels-this.paddingLeftInPixels-this.paddingRightInPixels,t),i=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*e.length;if(e.length>0&&0!==this._lineSpacing.internalValue){var r=0;r=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),i+=(e.length-1)*r}return i}}return 0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onTextChangedObservable.clear()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.TextBlock"]=y;var v=function(t){function e(i,r){void 0===r&&(r=null);var n=t.call(this,i)||this;return n.name=i,n._workingCanvas=null,n._loaded=!1,n._stretch=e.STRETCH_FILL,n._autoScale=!1,n._sourceLeft=0,n._sourceTop=0,n._sourceWidth=0,n._sourceHeight=0,n._svgAttributesComputationCompleted=!1,n._isSVG=!1,n._cellWidth=0,n._cellHeight=0,n._cellId=-1,n._populateNinePatchSlicesFromImage=!1,n.onImageLoadedObservable=new s.Observable,n.onSVGAttributesComputedObservable=new s.Observable,n.source=r,n}return n(e,t),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"populateNinePatchSlicesFromImage",{get:function(){return this._populateNinePatchSlicesFromImage},set:function(t){this._populateNinePatchSlicesFromImage!==t&&(this._populateNinePatchSlicesFromImage=t,this._populateNinePatchSlicesFromImage&&this._loaded&&this._extractNinePatchSliceDataFromImage())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detectPointerOnOpaqueOnly",{get:function(){return this._detectPointerOnOpaqueOnly},set:function(t){this._detectPointerOnOpaqueOnly!==t&&(this._detectPointerOnOpaqueOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceLeft",{get:function(){return this._sliceLeft},set:function(t){this._sliceLeft!==t&&(this._sliceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceRight",{get:function(){return this._sliceRight},set:function(t){this._sliceRight!==t&&(this._sliceRight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceTop",{get:function(){return this._sliceTop},set:function(t){this._sliceTop!==t&&(this._sliceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceBottom",{get:function(){return this._sliceBottom},set:function(t){this._sliceBottom!==t&&(this._sliceBottom=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceLeft",{get:function(){return this._sourceLeft},set:function(t){this._sourceLeft!==t&&(this._sourceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceTop",{get:function(){return this._sourceTop},set:function(t){this._sourceTop!==t&&(this._sourceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceWidth",{get:function(){return this._sourceWidth},set:function(t){this._sourceWidth!==t&&(this._sourceWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceHeight",{get:function(){return this._sourceHeight},set:function(t){this._sourceHeight!==t&&(this._sourceHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSVG",{get:function(){return this._isSVG},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgAttributesComputationCompleted",{get:function(){return this._svgAttributesComputationCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScale",{get:function(){return this._autoScale},set:function(t){this._autoScale!==t&&(this._autoScale=t,t&&this._loaded&&this.synchronizeSizeWithContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stretch",{get:function(){return this._stretch},set:function(t){this._stretch!==t&&(this._stretch=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._rotate90=function(t,i){void 0===i&&(i=!1);var r=document.createElement("canvas"),n=r.getContext("2d"),o=this._domImage.width,s=this._domImage.height;r.width=s,r.height=o,n.translate(r.width/2,r.height/2),n.rotate(t*Math.PI/2),n.drawImage(this._domImage,0,0,o,s,-o/2,-s/2,o,s);var a=r.toDataURL("image/jpg"),h=new e(this.name+"rotated",a);return i&&(h._stretch=this._stretch,h._autoScale=this._autoScale,h._cellId=this._cellId,h._cellWidth=t%1?this._cellHeight:this._cellWidth,h._cellHeight=t%1?this._cellWidth:this._cellHeight),this._handleRotationForSVGImage(this,h,t),h},e.prototype._handleRotationForSVGImage=function(t,e,i){var r=this;t._isSVG&&(t._svgAttributesComputationCompleted?(this._rotate90SourceProperties(t,e,i),this._markAsDirty()):t.onSVGAttributesComputedObservable.addOnce(function(){r._rotate90SourceProperties(t,e,i),r._markAsDirty()}))},e.prototype._rotate90SourceProperties=function(t,e,i){var r,n,o=t.sourceLeft,s=t.sourceTop,a=t.domImage.width,h=t.domImage.height,l=o,u=s,c=t.sourceWidth,_=t.sourceHeight;if(0!=i){var d=i<0?-1:1;i%=4;for(var f=0;f<Math.abs(i);++f)l=-(s-h/2)*d+h/2,u=(o-a/2)*d+a/2,c=(r=[_,c])[0],_=r[1],i<0?u-=_:l-=c,o=l,s=u,a=(n=[h,a])[0],h=n[1]}e.sourceLeft=l,e.sourceTop=u,e.sourceWidth=c,e.sourceHeight=_},Object.defineProperty(e.prototype,"domImage",{get:function(){return this._domImage},set:function(t){var e=this;this._domImage=t,this._loaded=!1,this._domImage.width?this._onImageLoaded():this._domImage.onload=function(){e._onImageLoaded()}},enumerable:!0,configurable:!0}),e.prototype._onImageLoaded=function(){this._imageWidth=this._domImage.width,this._imageHeight=this._domImage.height,this._loaded=!0,this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage(),this._autoScale&&this.synchronizeSizeWithContent(),this.onImageLoadedObservable.notifyObservers(this),this._markAsDirty()},e.prototype._extractNinePatchSliceDataFromImage=function(){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var t=this._workingCanvas,e=t.getContext("2d"),i=this._domImage.width,r=this._domImage.height;t.width=i,t.height=r,e.drawImage(this._domImage,0,0,i,r);var n=e.getImageData(0,0,i,r);this._sliceLeft=-1,this._sliceRight=-1;for(var o=0;o<i;o++){if((a=n.data[4*o+3])>127&&-1===this._sliceLeft)this._sliceLeft=o;else if(a<127&&this._sliceLeft>-1){this._sliceRight=o;break}}this._sliceTop=-1,this._sliceBottom=-1;for(var s=0;s<r;s++){var a;if((a=n.data[s*i*4+3])>127&&-1===this._sliceTop)this._sliceTop=s;else if(a<127&&this._sliceTop>-1){this._sliceBottom=s;break}}},Object.defineProperty(e.prototype,"source",{set:function(t){var e=this;this._source!==t&&(this._loaded=!1,this._source=t,t&&(t=this._svgCheck(t)),this._domImage=document.createElement("img"),this._domImage.onload=function(){e._onImageLoaded()},t&&(s.Tools.SetCorsBehavior(t,this._domImage),this._domImage.src=t))},enumerable:!0,configurable:!0}),e.prototype._svgCheck=function(t){var e=this;if(window.SVGSVGElement&&-1!==t.search(/.svg#/gi)&&t.indexOf("#")===t.lastIndexOf("#")){this._isSVG=!0;var i=t.split("#")[0],r=t.split("#")[1],n=document.body.querySelector('object[data="'+i+'"]');if(n){var o=n.contentDocument;if(o&&o.documentElement){var s=o.documentElement.getAttribute("viewBox"),a=Number(o.documentElement.getAttribute("width")),h=Number(o.documentElement.getAttribute("height"));if(o.getElementById(r)&&s&&a&&h)return this._getSVGAttribs(n,r),t}n.addEventListener("load",function(){e._getSVGAttribs(n,r)})}else{var l=document.createElement("object");l.data=i,l.type="image/svg+xml",l.width="0%",l.height="0%",document.body.appendChild(l),l.onload=function(){var t=document.body.querySelector('object[data="'+i+'"]');t&&e._getSVGAttribs(t,r)}}return i}return t},e.prototype._getSVGAttribs=function(t,e){var i=t.contentDocument;if(i&&i.documentElement){var r=i.documentElement.getAttribute("viewBox"),n=Number(i.documentElement.getAttribute("width")),o=Number(i.documentElement.getAttribute("height")),s=i.getElementById(e);if(r&&n&&o&&s){var a=Number(r.split(" ")[2]),h=Number(r.split(" ")[3]),l=s.getBBox(),u=1,c=1,_=0,d=0;s.transform&&s.transform.baseVal.consolidate()&&(u=s.transform.baseVal.consolidate().matrix.a,c=s.transform.baseVal.consolidate().matrix.d,_=s.transform.baseVal.consolidate().matrix.e,d=s.transform.baseVal.consolidate().matrix.f),this.sourceLeft=(u*l.x+_)*n/a,this.sourceTop=(c*l.y+d)*o/h,this.sourceWidth=l.width*u*(n/a),this.sourceHeight=l.height*c*(o/h),this._svgAttributesComputationCompleted=!0,this.onSVGAttributesComputedObservable.notifyObservers(this)}}},Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){this._cellWidth!==t&&(this._cellWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(t){this._cellHeight!==t&&(this._cellHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellId",{get:function(){return this._cellId},set:function(t){this._cellId!==t&&(this._cellId=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.contains=function(e,i){if(!t.prototype.contains.call(this,e,i))return!1;if(!this._detectPointerOnOpaqueOnly||!this._workingCanvas)return!0;var r=this._workingCanvas.getContext("2d"),n=0|this._currentMeasure.width,o=0|this._currentMeasure.height;return r.getImageData(0,0,n,o).data[4*((e=e-this._currentMeasure.left|0)+(i=i-this._currentMeasure.top|0)*this._currentMeasure.width)+3]>0},e.prototype._getTypeName=function(){return"Image"},e.prototype.synchronizeSizeWithContent=function(){this._loaded&&(this.width=this._domImage.width+"px",this.height=this._domImage.height+"px")},e.prototype._processMeasures=function(i,r){if(this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:case e.STRETCH_UNIFORM:case e.STRETCH_NINE_PATCH:break;case e.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0)}t.prototype._processMeasures.call(this,i,r)},e.prototype._prepareWorkingCanvasForOpaqueDetection=function(){if(this._detectPointerOnOpaqueOnly){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var t=this._workingCanvas,e=this._currentMeasure.width,i=this._currentMeasure.height,r=t.getContext("2d");t.width=e,t.height=i,r.clearRect(0,0,e,i)}},e.prototype._drawImage=function(t,e,i,r,n,o,s,a,h){(t.drawImage(this._domImage,e,i,r,n,o,s,a,h),this._detectPointerOnOpaqueOnly)&&(t=this._workingCanvas.getContext("2d")).drawImage(this._domImage,e,i,r,n,o-this._currentMeasure.left,s-this._currentMeasure.top,a,h)},e.prototype._draw=function(t){var i,r,n,o;if(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),-1==this.cellId)i=this._sourceLeft,r=this._sourceTop,n=this._sourceWidth?this._sourceWidth:this._imageWidth,o=this._sourceHeight?this._sourceHeight:this._imageHeight;else{var s=this._domImage.naturalWidth/this.cellWidth,a=this.cellId/s>>0,h=this.cellId%s;i=this.cellWidth*h,r=this.cellHeight*a,n=this.cellWidth,o=this.cellHeight}if(this._prepareWorkingCanvasForOpaqueDetection(),this._applyStates(t),this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_UNIFORM:var l=this._currentMeasure.width/n,u=this._currentMeasure.height/o,c=Math.min(l,u),_=(this._currentMeasure.width-n*c)/2,d=(this._currentMeasure.height-o*c)/2;this._drawImage(t,i,r,n,o,this._currentMeasure.left+_,this._currentMeasure.top+d,n*c,o*c);break;case e.STRETCH_EXTEND:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_NINE_PATCH:this._renderNinePatch(t)}t.restore()},e.prototype._renderCornerPatch=function(t,e,i,r,n,o,s){this._drawImage(t,e,i,r,n,this._currentMeasure.left+o,this._currentMeasure.top+s,r,n)},e.prototype._renderNinePatch=function(t){var e=this._imageHeight,i=this._sliceLeft,r=this._sliceTop,n=this._imageHeight-this._sliceBottom,o=this._imageWidth-this._sliceRight,s=0,a=0;this._populateNinePatchSlicesFromImage&&(s=1,a=1,e-=2,i-=1,r-=1,n-=1,o-=1);var h=this._sliceRight-this._sliceLeft,l=this._currentMeasure.width-o-this.sliceLeft,u=this._currentMeasure.height-e+this._sliceBottom;this._renderCornerPatch(t,s,a,i,r,0,0),this._renderCornerPatch(t,s,this._sliceBottom,i,e-this._sliceBottom,0,u),this._renderCornerPatch(t,this._sliceRight,a,o,r,this._currentMeasure.width-o,0),this._renderCornerPatch(t,this._sliceRight,this._sliceBottom,o,e-this._sliceBottom,this._currentMeasure.width-o,u),this._drawImage(t,this._sliceLeft,this._sliceTop,h,this._sliceBottom-this._sliceTop,this._currentMeasure.left+i,this._currentMeasure.top+r,l,u-r),this._drawImage(t,s,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceRight,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left+this._currentMeasure.width-o,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceLeft,a,h,r,this._currentMeasure.left+i,this._currentMeasure.top,l,r),this._drawImage(t,this._sliceLeft,this._sliceBottom,h,n,this._currentMeasure.left+i,this._currentMeasure.top+u,l,n)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onImageLoadedObservable.clear(),this.onSVGAttributesComputedObservable.clear()},e.STRETCH_NONE=0,e.STRETCH_FILL=1,e.STRETCH_UNIFORM=2,e.STRETCH_EXTEND=3,e.STRETCH_NINE_PATCH=4,e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Image"]=v;var O=function(t){function e(e){var i=t.call(this,e)||this;i.name=e,i.delegatePickingToChildren=!1,i.thickness=1,i.isPointerBlocker=!0;var r=null;return i.pointerEnterAnimation=function(){r=i.alpha,i.alpha-=.1},i.pointerOutAnimation=function(){null!==r&&(i.alpha=r)},i.pointerDownAnimation=function(){i.scaleX-=.05,i.scaleY-=.05},i.pointerUpAnimation=function(){i.scaleX+=.05,i.scaleY+=.05},i}return n(e,t),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textBlock",{get:function(){return this._textBlock},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Button"},e.prototype._processPicking=function(e,i,r,n,o,s,a){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;if(this.delegatePickingToChildren){for(var h=!1,l=this._children.length-1;l>=0;l--){var u=this._children[l];if(u.isEnabled&&u.isHitTestVisible&&u.isVisible&&!u.notRenderable&&u.contains(e,i)){h=!0;break}}if(!h)return!1}return this._processObservables(r,e,i,n,o,s,a),!0},e.prototype._onPointerEnter=function(e){return!!t.prototype._onPointerEnter.call(this,e)&&(this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},e.prototype._onPointerOut=function(e,i){void 0===i&&(i=!1),this.pointerOutAnimation&&this.pointerOutAnimation(),t.prototype._onPointerOut.call(this,e,i)},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},e.prototype._onPointerUp=function(e,i,r,n,o){this.pointerUpAnimation&&this.pointerUpAnimation(),t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.CreateImageButton=function(t,i,r){var n=new e(t),o=new y(t+"_button",i);o.textWrapping=!0,o.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,o.paddingLeft="20%",n.addControl(o);var s=new v(t+"_icon",r);return s.width="20%",s.stretch=v.STRETCH_UNIFORM,s.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.addControl(s),n._image=s,n._textBlock=o,n},e.CreateImageOnlyButton=function(t,i){var r=new e(t),n=new v(t+"_icon",i);return n.stretch=v.STRETCH_FILL,n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r.addControl(n),r._image=n,r},e.CreateSimpleButton=function(t,i){var r=new e(t),n=new y(t+"_button",i);return n.textWrapping=!0,n.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,r.addControl(n),r._textBlock=n,r},e.CreateImageWithCenterTextButton=function(t,i,r){var n=new e(t),o=new v(t+"_icon",r);o.stretch=v.STRETCH_FILL,n.addControl(o);var s=new y(t+"_button",i);return s.textWrapping=!0,s.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,n.addControl(s),n._image=o,n._textBlock=s,n},e}(m);s._TypeStore.RegisteredTypes["BABYLON.GUI.Button"]=O;var C=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isVertical=!0,i._manualWidth=!1,i._manualHeight=!1,i._doNotTrackManualChanges=!1,i.ignoreLayoutWarnings=!1,i}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualWidth=!0),this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualHeight=!0),this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"StackPanel"},e.prototype._preMeasure=function(e,i){for(var r=0,n=this._children;r<n.length;r++){var o=n[r];this._isVertical?o.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP:o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT}t.prototype._preMeasure.call(this,e,i)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(e),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this.isVertical&&!this._manualWidth||(this._measureForChildren.width=this._currentMeasure.width),(this.isVertical||this._manualHeight)&&(this._measureForChildren.height=this._currentMeasure.height)},e.prototype._postMeasure=function(){for(var e=0,i=0,r=0,n=this._children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(this._isVertical?(o.top!==i+"px"&&(o.top=i+"px",this._rebuildLayout=!0,o._top.ignoreAdaptiveScaling=!0),o._height.isPercentage&&!o._automaticSize?this.ignoreLayoutWarnings||s.Tools.Warn("Control (Name:"+o.name+", UniqueId:"+o.uniqueId+") is using height in percentage mode inside a vertical StackPanel"):i+=o._currentMeasure.height+o.paddingTopInPixels+o.paddingBottomInPixels):(o.left!==e+"px"&&(o.left=e+"px",this._rebuildLayout=!0,o._left.ignoreAdaptiveScaling=!0),o._width.isPercentage&&!o._automaticSize?this.ignoreLayoutWarnings||s.Tools.Warn("Control (Name:"+o.name+", UniqueId:"+o.uniqueId+") is using width in percentage mode inside a horizontal StackPanel"):e+=o._currentMeasure.width+o.paddingLeftInPixels+o.paddingRightInPixels))}this._doNotTrackManualChanges=!0;var a=!1,h=!1;if(!this._manualHeight&&this._isVertical){var l=this.height;this.height=i+"px",h=l!==this.height||!this._height.ignoreAdaptiveScaling}if(!this._manualWidth&&!this._isVertical){var u=this.width;this.width=e+"px",a=u!==this.width||!this._width.ignoreAdaptiveScaling}h&&(this._height.ignoreAdaptiveScaling=!0),a&&(this._width.ignoreAdaptiveScaling=!0),this._doNotTrackManualChanges=!1,(a||h)&&(this._rebuildLayout=!0),t.prototype._postMeasure.call(this)},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.StackPanel"]=C;var w=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.onIsCheckedChangedObservable=new s.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){return this._isChecked},set:function(t){this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Checkbox"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t);var i=this._currentMeasure.width-this._thickness,r=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,r),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColorItem;var n=i*this._checkSizeRatio,o=r*this._checkSizeRatio;t.fillRect(this._currentMeasure.left+this._thickness/2+(i-n)/2,this._currentMeasure.top+this._thickness/2+(r-o)/2,n,o)}t.strokeStyle=this.color,t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,r),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked=!this.isChecked,!0)},e.AddCheckBoxWithHeader=function(t,i){var r=new C;r.isVertical=!1,r.height="30px";var n=new e;n.width="20px",n.height="20px",n.isChecked=!0,n.color="green",n.onIsCheckedChangedObservable.add(i),r.addControl(n);var o=new y;return o.text=t,o.width="180px",o.paddingLeft="5px",o.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.color="white",r.addControl(o),r},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Checkbox"]=w;var T=function(t){function e(e,i){void 0===i&&(i="");var r=t.call(this,e)||this;return r.name=e,r._text="",r._placeholderText="",r._background="#222222",r._focusedBackground="#000000",r._focusedColor="white",r._placeholderColor="gray",r._thickness=1,r._margin=new a(10,a.UNITMODE_PIXEL),r._autoStretchWidth=!0,r._maxWidth=new a(1,a.UNITMODE_PERCENTAGE,!1),r._isFocused=!1,r._blinkIsEven=!1,r._cursorOffset=0,r._deadKey=!1,r._addKey=!0,r._currentKey="",r._isTextHighlightOn=!1,r._textHighlightColor="#d5e0ff",r._highligherOpacity=.4,r._highlightedText="",r._startHighlightIndex=0,r._endHighlightIndex=0,r._cursorIndex=-1,r._onFocusSelectAll=!1,r._isPointerDown=!1,r.promptMessage="Please enter text:",r.disableMobilePrompt=!1,r.onTextChangedObservable=new s.Observable,r.onBeforeKeyAddObservable=new s.Observable,r.onFocusObservable=new s.Observable,r.onBlurObservable=new s.Observable,r.onTextHighlightObservable=new s.Observable,r.onTextCopyObservable=new s.Observable,r.onTextCutObservable=new s.Observable,r.onTextPasteObservable=new s.Observable,r.onKeyboardEventProcessedObservable=new s.Observable,r.text=i,r.isPointerBlocker=!0,r}return n(e,t),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth.toString(this._host)},set:function(t){this._maxWidth.toString(this._host)!==t&&this._maxWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthInPixels",{get:function(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highligherOpacity",{get:function(){return this._highligherOpacity},set:function(t){this._highligherOpacity!==t&&(this._highligherOpacity=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFocusSelectAll",{get:function(){return this._onFocusSelectAll},set:function(t){this._onFocusSelectAll!==t&&(this._onFocusSelectAll=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHighlightColor",{get:function(){return this._textHighlightColor},set:function(t){this._textHighlightColor!==t&&(this._textHighlightColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return this._margin.toString(this._host)},set:function(t){this._margin.toString(this._host)!==t&&this._margin.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginInPixels",{get:function(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoStretchWidth",{get:function(){return this._autoStretchWidth},set:function(t){this._autoStretchWidth!==t&&(this._autoStretchWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedBackground",{get:function(){return this._focusedBackground},set:function(t){this._focusedBackground!==t&&(this._focusedBackground=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedColor",{get:function(){return this._focusedColor},set:function(t){this._focusedColor!==t&&(this._focusedColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderColor",{get:function(){return this._placeholderColor},set:function(t){this._placeholderColor!==t&&(this._placeholderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderText",{get:function(){return this._placeholderText},set:function(t){this._placeholderText!==t&&(this._placeholderText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadKey",{get:function(){return this._deadKey},set:function(t){this._deadKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightedText",{get:function(){return this._highlightedText},set:function(t){this._highlightedText!==t&&(this._highlightedText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addKey",{get:function(){return this._addKey},set:function(t){this._addKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentKey",{get:function(){return this._currentKey},set:function(t){this._currentKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){var e=t.toString();this._text!==e&&(this._text=e,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&(this._width.fromString(t)&&this._markAsDirty(),this.autoStretchWidth=!1)},enumerable:!0,configurable:!0}),e.prototype.onBlur=function(){this._isFocused=!1,this._scrollLeft=null,this._cursorOffset=0,clearTimeout(this._blinkTimeout),this._markAsDirty(),this.onBlurObservable.notifyObservers(this),this._host.unRegisterClipboardEvents(),this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);var t=this._host.getScene();this._onPointerDblTapObserver&&t&&t.onPointerObservable.remove(this._onPointerDblTapObserver)},e.prototype.onFocus=function(){var t=this;if(this._isEnabled){if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),-1!==navigator.userAgent.indexOf("Mobile")&&!this.disableMobilePrompt){var e=prompt(this.promptMessage);return null!==e&&(this.text=e),void(this._host.focusedControl=null)}this._host.registerClipboardEvents(),this._onClipboardObserver=this._host.onClipboardObservable.add(function(e){switch(e.type){case s.ClipboardEventTypes.COPY:t._onCopyText(e.event),t.onTextCopyObservable.notifyObservers(t);break;case s.ClipboardEventTypes.CUT:t._onCutText(e.event),t.onTextCutObservable.notifyObservers(t);break;case s.ClipboardEventTypes.PASTE:t._onPasteText(e.event),t.onTextPasteObservable.notifyObservers(t);break;default:return}});var i=this._host.getScene();i&&(this._onPointerDblTapObserver=i.onPointerObservable.add(function(e){t._isFocused&&e.type===s.PointerEventTypes.POINTERDOUBLETAP&&t._processDblClick(e)})),this._onFocusSelectAll&&this._selectAllText()}},e.prototype._getTypeName=function(){return"InputText"},e.prototype.keepsFocusWith=function(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null},e.prototype.processKey=function(t,e,i){if(!i||!i.ctrlKey&&!i.metaKey||67!==t&&86!==t&&88!==t){if(i&&(i.ctrlKey||i.metaKey)&&65===t)return this._selectAllText(),void i.preventDefault();switch(t){case 32:e=" ";break;case 191:i&&i.preventDefault();break;case 8:if(this._text&&this._text.length>0){if(this._isTextHighlightOn)return this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,this._blinkIsEven=!1,void(i&&i.preventDefault());if(0===this._cursorOffset)this.text=this._text.substr(0,this._text.length-1);else(n=this._text.length-this._cursorOffset)>0&&(this.text=this._text.slice(0,n-1)+this._text.slice(n))}return void(i&&i.preventDefault());case 46:if(this._isTextHighlightOn){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex);for(var r=this._endHighlightIndex-this._startHighlightIndex;r>0&&this._cursorOffset>0;)this._cursorOffset--;return this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,void(i&&i.preventDefault())}if(this._text&&this._text.length>0&&this._cursorOffset>0){var n=this._text.length-this._cursorOffset;this.text=this._text.slice(0,n)+this._text.slice(n+1),this._cursorOffset--}return void(i&&i.preventDefault());case 13:return this._host.focusedControl=null,void(this._isTextHighlightOn=!1);case 35:return this._cursorOffset=0,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 36:return this._cursorOffset=this._text.length,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 37:if(this._cursorOffset++,this._cursorOffset>this._text.length&&(this._cursorOffset=this._text.length),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(this._text.length===this._cursorOffset)return;this._endHighlightIndex=this._text.length-this._cursorOffset+1}return this._startHighlightIndex=0,this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=this._text.length,this._isTextHighlightOn=!0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=0===this._startHighlightIndex?this._text.length:this._text.length-this._startHighlightIndex+1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._text.length?this._text.length:this._cursorOffset-1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._startHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=this.text.length,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 39:if(this._cursorOffset--,this._cursorOffset<0&&(this._cursorOffset=0),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(0===this._cursorOffset)return;this._startHighlightIndex=this._text.length-this._cursorOffset-1}return this._endHighlightIndex=this._text.length,this._isTextHighlightOn=!0,this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=this._text.length===this._endHighlightIndex?0:this._text.length-this._endHighlightIndex-1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset<=0?0:this._cursorOffset+1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._endHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=0,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 222:i&&i.preventDefault(),this._cursorIndex=-1,this.deadKey=!0}if(e&&(-1===t||32===t||t>47&&t<64||t>64&&t<91||t>159&&t<193||t>218&&t<223||t>95&&t<112)&&(this._currentKey=e,this.onBeforeKeyAddObservable.notifyObservers(this),e=this._currentKey,this._addKey))if(this._isTextHighlightOn)this.text=this._text.slice(0,this._startHighlightIndex)+e+this._text.slice(this._endHighlightIndex),this._cursorOffset=this.text.length-(this._startHighlightIndex+1),this._isTextHighlightOn=!1,this._blinkIsEven=!1,this._markAsDirty();else if(0===this._cursorOffset)this.text+=e;else{var o=this._text.length-this._cursorOffset;this.text=this._text.slice(0,o)+e+this._text.slice(o)}}},e.prototype._updateValueFromCursorIndex=function(t){if(this._blinkIsEven=!1,-1===this._cursorIndex)this._cursorIndex=t;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset;else{if(!(this._cursorIndex>this._cursorOffset))return this._isTextHighlightOn=!1,void this._markAsDirty();this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex}this._isTextHighlightOn=!0,this._markAsDirty()},e.prototype._processDblClick=function(t){this._startHighlightIndex=this._text.length-this._cursorOffset,this._endHighlightIndex=this._startHighlightIndex;var e,i,r=/\w+/g;do{i=this._endHighlightIndex<this._text.length&&-1!==this._text[this._endHighlightIndex].search(r)?++this._endHighlightIndex:0,e=this._startHighlightIndex>0&&-1!==this._text[this._startHighlightIndex-1].search(r)?--this._startHighlightIndex:0}while(e||i);this._cursorOffset=this.text.length-this._startHighlightIndex,this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=!0,this._clickedCoordinate=null,this._blinkIsEven=!0,this._cursorIndex=-1,this._markAsDirty()},e.prototype._selectAllText=function(){this._blinkIsEven=!0,this._isTextHighlightOn=!0,this._startHighlightIndex=0,this._endHighlightIndex=this._text.length,this._cursorOffset=this._text.length,this._cursorIndex=-1,this._markAsDirty()},e.prototype.processKeyboard=function(t){this.processKey(t.keyCode,t.key,t),this.onKeyboardEventProcessedObservable.notifyObservers(t)},e.prototype._onCopyText=function(t){this._isTextHighlightOn=!1;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText},e.prototype._onCutText=function(t){if(this._highlightedText){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText,this._highlightedText=""}},e.prototype._onPasteText=function(t){var e="";e=t.clipboardData&&-1!==t.clipboardData.types.indexOf("text/plain")?t.clipboardData.getData("text/plain"):this._host.clipboardData;var i=this._text.length-this._cursorOffset;this.text=this._text.slice(0,i)+e+this._text.slice(i)},e.prototype._draw=function(t,e){var i=this;t.save(),this._applyStates(t),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(t.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._fontOffset||(this._fontOffset=p._GetFontOffset(t.font));var r=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this.color&&(t.fillStyle=this.color);var n=this._beforeRenderText(this._text);this._isFocused||this._text||!this._placeholderText||(n=this._placeholderText,this._placeholderColor&&(t.fillStyle=this._placeholderColor)),this._textWidth=t.measureText(n).width;var o=2*this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+o)+"px");var s=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2,a=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-o;if(t.save(),t.beginPath(),t.rect(r,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,a+2,this._currentMeasure.height),t.clip(),this._isFocused&&this._textWidth>a){var h=r-this._textWidth+a;this._scrollLeft||(this._scrollLeft=h)}else this._scrollLeft=r;if(t.fillText(n,this._scrollLeft,this._currentMeasure.top+s),this._isFocused){if(this._clickedCoordinate){var l=this._scrollLeft+this._textWidth-this._clickedCoordinate,u=0;this._cursorOffset=0;var c=0;do{this._cursorOffset&&(c=Math.abs(l-u)),this._cursorOffset++,u=t.measureText(n.substr(n.length-this._cursorOffset,this._cursorOffset)).width}while(u<l&&n.length>=this._cursorOffset);Math.abs(l-u)>c&&this._cursorOffset--,this._blinkIsEven=!1,this._clickedCoordinate=null}if(!this._blinkIsEven){var _=this.text.substr(this._text.length-this._cursorOffset),d=t.measureText(_).width,f=this._scrollLeft+this._textWidth-d;f<r?(this._scrollLeft+=r-f,f=r,this._markAsDirty()):f>r+a&&(this._scrollLeft+=r+a-f,f=r+a,this._markAsDirty()),this._isTextHighlightOn||t.fillRect(f,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height)}if(clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout(function(){i._blinkIsEven=!i._blinkIsEven,i._markAsDirty()},500),this._isTextHighlightOn){clearTimeout(this._blinkTimeout);var g=t.measureText(this.text.substring(this._startHighlightIndex)).width,b=this._scrollLeft+this._textWidth-g;this._highlightedText=this.text.substring(this._startHighlightIndex,this._endHighlightIndex);var m=t.measureText(this.text.substring(this._startHighlightIndex,this._endHighlightIndex)).width;b<r&&((m-=r-b)||(m=t.measureText(this.text.charAt(this.text.length-this._cursorOffset)).width),b=r),t.globalAlpha=this._highligherOpacity,t.fillStyle=this._textHighlightColor,t.fillRect(b,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,m,this._fontOffset.height),t.globalAlpha=1}}t.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(t.strokeStyle=this.focusedColor):this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._clickedCoordinate=i.x,this._isTextHighlightOn=!1,this._highlightedText="",this._cursorIndex=-1,this._isPointerDown=!0,this._host._capturingControl[r]=this,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),!0):!!this._isEnabled&&(this._host.focusedControl=this,!0))},e.prototype._onPointerMove=function(e,i,r){this._host.focusedControl===this&&this._isPointerDown&&(this._clickedCoordinate=i.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset)),t.prototype._onPointerMove.call(this,e,i,r)},e.prototype._onPointerUp=function(e,i,r,n,o){this._isPointerDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.prototype._beforeRenderText=function(t){return t},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onTextChangedObservable.clear(),this.onTextCopyObservable.clear(),this.onTextCutObservable.clear(),this.onTextPasteObservable.clear(),this.onTextHighlightObservable.clear(),this.onKeyboardEventProcessedObservable.clear()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.InputText"]=T;var x=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._rowDefinitions=new Array,i._columnDefinitions=new Array,i._cells={},i._childControls=new Array,i}return n(e,t),Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._childControls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),e.prototype.getRowDefinition=function(t){return t<0||t>=this._rowDefinitions.length?null:this._rowDefinitions[t]},e.prototype.getColumnDefinition=function(t){return t<0||t>=this._columnDefinitions.length?null:this._columnDefinitions[t]},e.prototype.addRowDefinition=function(t,e){return void 0===e&&(e=!1),this._rowDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.addColumnDefinition=function(t,e){return void 0===e&&(e=!1),this._columnDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.setRowDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._rowDefinitions.length)return this;var r=this._rowDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._rowDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.setColumnDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._columnDefinitions.length)return this;var r=this._columnDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._columnDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.getChildrenAt=function(t,e){var i=this._cells[t+":"+e];return i?i.children:null},e.prototype.getChildCellInfo=function(t){return t._tag},e.prototype._removeCell=function(e,i){if(e){t.prototype.removeControl.call(this,e);for(var r=0,n=e.children;r<n.length;r++){var o=n[r],s=this._childControls.indexOf(o);-1!==s&&this._childControls.splice(s,1)}delete this._cells[i]}},e.prototype._offsetCell=function(t,e){if(this._cells[e]){this._cells[t]=this._cells[e];for(var i=0,r=this._cells[t].children;i<r.length;i++){r[i]._tag=t}delete this._cells[e]}},e.prototype.removeColumnDefinition=function(t){if(t<0||t>=this._columnDefinitions.length)return this;for(var e=0;e<this._rowDefinitions.length;e++){var i=e+":"+t,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._rowDefinitions.length;e++)for(var n=t+1;n<this._columnDefinitions.length;n++){var o=e+":"+(n-1);i=e+":"+n;this._offsetCell(o,i)}return this._columnDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.removeRowDefinition=function(t){if(t<0||t>=this._rowDefinitions.length)return this;for(var e=0;e<this._columnDefinitions.length;e++){var i=t+":"+e,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._columnDefinitions.length;e++)for(var n=t+1;n<this._rowDefinitions.length;n++){var o=n-1+":"+e;i=n+":"+e;this._offsetCell(o,i)}return this._rowDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.addControl=function(e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0===this._rowDefinitions.length&&this.addRowDefinition(1,!1),0===this._columnDefinitions.length&&this.addColumnDefinition(1,!1),-1!==this._childControls.indexOf(e))return s.Tools.Warn("Control (Name:"+e.name+", UniqueId:"+e.uniqueId+") is already associated with this grid. You must remove it before reattaching it"),this;var n=Math.min(i,this._rowDefinitions.length-1)+":"+Math.min(r,this._columnDefinitions.length-1),o=this._cells[n];return o||(o=new g(n),this._cells[n]=o,o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,t.prototype.addControl.call(this,o)),o.addControl(e),this._childControls.push(e),e._tag=n,e.parent=this,this._markAsDirty(),this},e.prototype.removeControl=function(t){var e=this._childControls.indexOf(t);-1!==e&&this._childControls.splice(e,1);var i=this._cells[t._tag];return i&&(i.removeControl(t),t._tag=null),this._markAsDirty(),this},e.prototype._getTypeName=function(){return"Grid"},e.prototype._getGridDefinitions=function(t){for(var e=[],i=[],r=[],n=[],o=this._currentMeasure.width,s=0,a=this._currentMeasure.height,h=0,l=0,u=0,c=this._rowDefinitions;u<c.length;u++){if((g=c[u]).isPixel)a-=p=g.getValue(this._host),i[l]=p;else h+=g.internalValue;l++}var _=0;l=0;for(var d=0,f=this._rowDefinitions;d<f.length;d++){var p,g=f[d];if(n.push(_),g.isPixel)_+=g.getValue(this._host);else _+=p=g.internalValue/h*a,i[l]=p;l++}l=0;for(var b=0,m=this._columnDefinitions;b<m.length;b++){if((g=m[b]).isPixel)o-=C=g.getValue(this._host),e[l]=C;else s+=g.internalValue;l++}var y=0;l=0;for(var v=0,O=this._columnDefinitions;v<O.length;v++){var C;g=O[v];if(r.push(y),g.isPixel)y+=g.getValue(this._host);else y+=C=g.internalValue/s*o,e[l]=C;l++}t(r,n,e,i)},e.prototype._additionalProcessing=function(e,i){var r=this;this._getGridDefinitions(function(t,e,i,n){for(var o in r._cells)if(r._cells.hasOwnProperty(o)){var s=o.split(":"),a=parseInt(s[0]),h=parseInt(s[1]),l=r._cells[o];l.left=t[h]+"px",l.top=e[a]+"px",l.width=i[h]+"px",l.height=n[a]+"px",l._left.ignoreAdaptiveScaling=!0,l._top.ignoreAdaptiveScaling=!0,l._width.ignoreAdaptiveScaling=!0,l._height.ignoreAdaptiveScaling=!0}}),t.prototype._additionalProcessing.call(this,e,i)},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t in this._cells){if(this._cells.hasOwnProperty(t))this._cells[t]._markMatrixAsDirty()}},e.prototype._renderHighlightSpecific=function(e){var i=this;t.prototype._renderHighlightSpecific.call(this,e),this._getGridDefinitions(function(t,r,n,o){for(var s=0;s<t.length;s++){var a=i._currentMeasure.left+t[s]+n[s];e.beginPath(),e.moveTo(a,i._currentMeasure.top),e.lineTo(a,i._currentMeasure.top+i._currentMeasure.height),e.stroke()}for(s=0;s<r.length;s++){var h=i._currentMeasure.top+r[s]+o[s];e.beginPath(),e.moveTo(i._currentMeasure.left,h),e.lineTo(i._currentMeasure.left+i._currentMeasure.width,h),e.stroke()}}),e.restore()},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0,i=this._childControls;e<i.length;e++){i[e].dispose()}this._childControls=[]},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Grid"]=x;var M=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._value=s.Color3.Red(),i._tmpColor=new s.Color3,i._pointerStartedOnSquare=!1,i._pointerStartedOnWheel=!1,i._squareLeft=0,i._squareTop=0,i._squareSize=0,i._h=360,i._s=1,i._v=1,i._lastPointerDownID=-1,i.onValueChangedObservable=new s.Observable,i._pointerIsDown=!1,i.value=new s.Color3(.88,.1,.1),i.size="200px",i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value.equals(t)||(this._value.copyFrom(t),this._value.toHSVToRef(this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1e-5),this._v=Math.max(this._tmpColor.b,1e-5),this._markAsDirty(),this._value.r<=e._Epsilon&&(this._value.r=0),this._value.g<=e._Epsilon&&(this._value.g=0),this._value.b<=e._Epsilon&&(this._value.b=0),this._value.r>=1-e._Epsilon&&(this._value.r=1),this._value.g>=1-e._Epsilon&&(this._value.g=1),this._value.b>=1-e._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&(this._height.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&(this._width.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ColorPicker"},e.prototype._preMeasure=function(t,e){t.width<t.height?this._currentMeasure.height=t.width:this._currentMeasure.width=t.height},e.prototype._updateSquareProps=function(){var t=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),e=2*(t-.2*t)/Math.sqrt(2),i=t-.5*e;this._squareLeft=this._currentMeasure.left+i,this._squareTop=this._currentMeasure.top+i,this._squareSize=e},e.prototype._drawGradientSquare=function(t,e,i,r,n,o){var s=o.createLinearGradient(e,i,r+e,i);s.addColorStop(0,"#fff"),s.addColorStop(1,"hsl("+t+", 100%, 50%)"),o.fillStyle=s,o.fillRect(e,i,r,n);var a=o.createLinearGradient(e,i,e,n+i);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"#000"),o.fillStyle=a,o.fillRect(e,i,r,n)},e.prototype._drawCircle=function(t,e,i,r){r.beginPath(),r.arc(t,e,i+1,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle="#333333",r.stroke(),r.beginPath(),r.arc(t,e,i,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle="#ffffff",r.stroke()},e.prototype._createColorWheelCanvas=function(t,e){var i=document.createElement("canvas");i.width=2*t,i.height=2*t;for(var r=i.getContext("2d"),n=r.getImageData(0,0,2*t,2*t),o=n.data,a=this._tmpColor,h=t*t,l=t-e,u=l*l,c=-t;c<t;c++)for(var _=-t;_<t;_++){var d=c*c+_*_;if(!(d>h||d<u)){var f=Math.sqrt(d),p=Math.atan2(_,c);s.Color3.HSVtoRGBToRef(180*p/Math.PI+180,f/t,1,a);var g=4*(c+t+2*(_+t)*t);o[g]=255*a.r,o[g+1]=255*a.g,o[g+2]=255*a.b;var b=.2;b=t<50?.2:t>150?.04:-.16*(t-50)/100+.2;var m=(f-l)/(t-l);o[g+3]=m<b?m/b*255:m>1-b?255*(1-(m-(1-b))/b):255}}return r.putImageData(n,0,0),i},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),i=.2*e,r=this._currentMeasure.left,n=this._currentMeasure.top;this._colorWheelCanvas&&this._colorWheelCanvas.width==2*e||(this._colorWheelCanvas=this._createColorWheelCanvas(e,i)),this._updateSquareProps(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.fillRect(this._squareLeft,this._squareTop,this._squareSize,this._squareSize)),t.drawImage(this._colorWheelCanvas,r,n),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,t);var o=this._squareLeft+this._squareSize*this._s,s=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(o,s,.04*e,t);var a=e-.5*i;o=r+e+Math.cos((this._h-180)*Math.PI/180)*a,s=n+e+Math.sin((this._h-180)*Math.PI/180)*a,this._drawCircle(o,s,.35*i,t),t.restore()},e.prototype._updateValueFromPointer=function(t,i){if(this._pointerStartedOnWheel){var r=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),n=r+this._currentMeasure.left,o=r+this._currentMeasure.top;this._h=180*Math.atan2(i-o,t-n)/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(t-this._squareLeft)/this._squareSize,this._v=1-(i-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),this._s=Math.max(this._s,e._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,e._Epsilon));s.Color3.HSVtoRGBToRef(this._h,this._s,this._v,this._tmpColor),this.value=this._tmpColor},e.prototype._isPointOnSquare=function(t,e){this._updateSquareProps();var i=this._squareLeft,r=this._squareTop,n=this._squareSize;return t>=i&&t<=i+n&&e>=r&&e<=r+n},e.prototype._isPointOnWheel=function(t,e){var i=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),r=i-.2*i,n=t-(i+this._currentMeasure.left),o=e-(i+this._currentMeasure.top),s=n*n+o*o;return s<=i*i&&s>=r*r},e.prototype._onPointerDown=function(e,i,r,n){if(!t.prototype._onPointerDown.call(this,e,i,r,n))return!1;this._pointerIsDown=!0,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var o=this._transformedPosition.x,s=this._transformedPosition.y;return this._isPointOnSquare(o,s)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(o,s)&&(this._pointerStartedOnWheel=!0),this._updateValueFromPointer(o,s),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0},e.prototype._onPointerMove=function(e,i,r){if(r==this._lastPointerDownID){this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var n=this._transformedPosition.x,o=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(n,o),t.prototype._onPointerMove.call(this,e,i,r)}},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.ShowPickerDialogAsync=function(t,i){return new Promise(function(r,n){i.pickerWidth=i.pickerWidth||"640px",i.pickerHeight=i.pickerHeight||"400px",i.headerHeight=i.headerHeight||"35px",i.lastColor=i.lastColor||"#000000",i.swatchLimit=i.swatchLimit||20,i.numSwatchesPerLine=i.numSwatchesPerLine||10;var o,a,h,l,u,c,_,d,f,g,b,v,C,w,M,P,k,I,A,S=i.swatchLimit/i.numSwatchesPerLine,E=parseFloat(i.pickerWidth)/i.numSwatchesPerLine,L=Math.floor(.25*E),R=L*(i.numSwatchesPerLine+1),D=Math.floor((parseFloat(i.pickerWidth)-R)/i.numSwatchesPerLine),B=D*S+L*(S+1),N=(parseInt(i.pickerHeight)+B+Math.floor(.25*D)).toString()+"px",V="#c0c0c0",H="#535353",F="#414141",j="515151",W="#555555",z="#454545",G=s.Color3.FromHexString("#dddddd"),X=G.r+G.g+G.b,Y="#aaaaaa",U="#ffffff",q=["R","G","B"],K=!1;function Z(t,e){A=e;var i=t.toHexString();if(k.background=i,g.name!=A&&(g.text=Math.floor(255*t.r).toString()),b.name!=A&&(b.text=Math.floor(255*t.g).toString()),v.name!=A&&(v.text=Math.floor(255*t.b).toString()),C.name!=A&&(C.text=t.r.toString()),w.name!=A&&(w.text=t.g.toString()),M.name!=A&&(M.text=t.b.toString()),P.name!=A){var r=i.split("#");P.text=r[1]}f.name!=A&&(f.value=t)}function J(t,e){var i=t.text;if(/[^0-9]/g.test(i))t.text=I;else if(""!=i&&(Math.floor(parseInt(i))<0?i="0":Math.floor(parseInt(i))>255?i="255":isNaN(parseInt(i))&&(i="0")),A==t.name&&(I=i),""!=i){i=parseInt(i).toString(),t.text=i;var r=s.Color3.FromHexString(k.background);A==t.name&&Z("r"==e?new s.Color3(parseInt(i)/255,r.g,r.b):"g"==e?new s.Color3(r.r,parseInt(i)/255,r.b):new s.Color3(r.r,r.g,parseInt(i)/255),t.name)}}function Q(t,e){var i=t.text;if(/[^0-9\.]/g.test(i))t.text=I;else{""!=i&&"."!=i&&0!=parseFloat(i)&&(parseFloat(i)<0?i="0.0":parseFloat(i)>1?i="1.0":isNaN(parseFloat(i))&&(i="0.0")),A==t.name&&(I=i),""!=i&&"."!=i&&0!=parseFloat(i)?(i=parseFloat(i).toString(),t.text=i):i="0.0";var r=s.Color3.FromHexString(k.background);A==t.name&&Z("r"==e?new s.Color3(parseFloat(i),r.g,r.b):"g"==e?new s.Color3(r.r,parseFloat(i),r.b):new s.Color3(r.r,r.g,parseFloat(i)),t.name)}}function $(){if(i.savedColors&&i.savedColors[_]){if(K)var t="b";else t="";var e=O.CreateSimpleButton("Swatch_"+_,t);e.fontFamily="BabylonJSglyphs";var r=s.Color3.FromHexString(i.savedColors[_]),n=r.r+r.g+r.b;e.color=n>X?Y:U,e.fontSize=Math.floor(.7*D),e.textBlock.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,e.height=e.width=D.toString()+"px",e.background=i.savedColors[_],e.thickness=2;var o=_;return e.pointerDownAnimation=function(){e.thickness=4},e.pointerUpAnimation=function(){e.thickness=3},e.pointerEnterAnimation=function(){e.thickness=3},e.pointerOutAnimation=function(){e.thickness=2},e.onPointerClickObservable.add(function(){var t;K?(t=o,i.savedColors&&i.savedColors.splice(t,1),i.savedColors&&0==i.savedColors.length&&(it(!1),K=!1),et("",Bt)):i.savedColors&&Z(s.Color3.FromHexString(i.savedColors[o]),e.name)}),e}return null}function tt(t){if(void 0!==t&&(K=t),K){for(var e=0;e<d.children.length;e++){d.children[e].textBlock.text="b"}void 0!==h&&(h.textBlock.text="Done")}else{for(e=0;e<d.children.length;e++){d.children[e].textBlock.text=""}void 0!==h&&(h.textBlock.text="Edit")}}function et(t,e){if(i.savedColors){""!=t&&i.savedColors.push(t),_=0,d.clearControls();var r=Math.ceil(i.savedColors.length/i.numSwatchesPerLine);if(0==r)var n=0;else n=r+1;if(d.rowCount!=r+n){for(var o=d.rowCount,s=0;s<o;s++)d.removeRowDefinition(0);for(s=0;s<r+n;s++)s%2?d.addRowDefinition(D,!0):d.addRowDefinition(L,!0)}d.height=(D*r+n*L).toString()+"px";for(var a=1,h=1;a<r+n;a+=2,h++){if(i.savedColors.length>h*i.numSwatchesPerLine)var l=i.numSwatchesPerLine;else l=i.savedColors.length-(h-1)*i.numSwatchesPerLine;for(var u=Math.min(Math.max(l,0),i.numSwatchesPerLine),c=0,f=1;c<u;c++)if(!(c>i.numSwatchesPerLine)){var p=$();null!=p&&(d.addControl(p,a,f),f+=2,_++)}}i.savedColors.length>=i.swatchLimit?rt(e,!0):rt(e,!1)}}function it(t){t?((h=O.CreateSimpleButton("butEdit","Edit")).width=l,h.height=u,h.left=Math.floor(.1*parseInt(l)).toString()+"px",h.top=(-1*parseFloat(h.left)).toString()+"px",h.verticalAlignment=p.VERTICAL_ALIGNMENT_BOTTOM,h.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,h.thickness=2,h.color=V,h.fontSize=a,h.background=H,h.onPointerEnterObservable.add(function(){h.background=F}),h.onPointerOutObservable.add(function(){h.background=H}),h.pointerDownAnimation=function(){h.background=j},h.pointerUpAnimation=function(){h.background=F},h.onPointerClickObservable.add(function(){K=!K,tt()}),mt.addControl(h,1,0)):mt.removeControl(h)}function rt(t,e){e?(t.color=W,t.background=z):(t.color=V,t.background=H)}function nt(e){i.savedColors&&i.savedColors.length>0?r({savedColors:i.savedColors,pickedColor:e}):r({pickedColor:e}),t.removeControl(ot)}var ot=new x;if(ot.name="Dialog Container",ot.width=i.pickerWidth,i.savedColors){ot.height=N;var st=parseInt(i.pickerHeight)/parseInt(N);ot.addRowDefinition(st,!1),ot.addRowDefinition(1-st,!1)}else ot.height=i.pickerHeight,ot.addRowDefinition(1,!1);if(t.addControl(ot),i.savedColors){(d=new x).name="Swatch Drawer",d.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,d.background=H,d.width=i.pickerWidth;var at=i.savedColors.length/i.numSwatchesPerLine;if(0==at)var ht=0;else ht=at+1;d.height=(D*at+ht*L).toString()+"px",d.top=Math.floor(.25*D).toString()+"px";for(var lt=0;lt<2*Math.ceil(i.savedColors.length/i.numSwatchesPerLine)+1;lt++)lt%2!=0?d.addRowDefinition(D,!0):d.addRowDefinition(L,!0);for(lt=0;lt<2*i.numSwatchesPerLine+1;lt++)lt%2!=0?d.addColumnDefinition(D,!0):d.addColumnDefinition(L,!0);ot.addControl(d,1,0)}var ut=new x;ut.name="Picker Panel",ut.height=i.pickerHeight;var ct=parseInt(i.headerHeight)/parseInt(i.pickerHeight),_t=[ct,1-ct];ut.addRowDefinition(_t[0],!1),ut.addRowDefinition(_t[1],!1),ot.addControl(ut,0,0);var dt=new m;dt.name="Dialogue Header Bar",dt.background="#cccccc",dt.thickness=0,ut.addControl(dt,0,0);var ft=O.CreateSimpleButton("closeButton","a");ft.fontFamily="BabylonJSglyphs";var pt=s.Color3.FromHexString(dt.background);o=new s.Color3(1-pt.r,1-pt.g,1-pt.b),ft.color=o.toHexString(),ft.fontSize=Math.floor(.6*parseInt(i.headerHeight)),ft.textBlock.textVerticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,ft.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_RIGHT,ft.height=ft.width=i.headerHeight,ft.background=dt.background,ft.thickness=0,ft.pointerDownAnimation=function(){},ft.pointerUpAnimation=function(){ft.background=dt.background},ft.pointerEnterAnimation=function(){ft.color=dt.background,ft.background="red"},ft.pointerOutAnimation=function(){ft.color=o.toHexString(),ft.background=dt.background},ft.onPointerClickObservable.add(function(){nt(At.background)}),ut.addControl(ft,0,0);var gt=new x;gt.name="Dialogue Body",gt.background=H;var bt=[.4375,.5625];gt.addRowDefinition(1,!1),gt.addColumnDefinition(bt[0],!1),gt.addColumnDefinition(bt[1],!1),ut.addControl(gt,1,0);var mt=new x;mt.name="Picker Grid",mt.addRowDefinition(.85,!1),mt.addRowDefinition(.15,!1),gt.addControl(mt,0,0),(f=new e).name="GUI Color Picker",i.pickerHeight<i.pickerWidth?f.width=.89:f.height=.89,f.value=s.Color3.FromHexString(i.lastColor),f.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,f.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,f.onPointerDownObservable.add(function(){A=f.name,I="",tt(!1)}),f.onValueChangedObservable.add(function(t){A==f.name&&Z(t,f.name)}),mt.addControl(f,0,0);var yt=new x;yt.name="Dialogue Right Half",yt.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT;var vt=[.514,.486];yt.addRowDefinition(vt[0],!1),yt.addRowDefinition(vt[1],!1),gt.addControl(yt,1,1);var Ot=new x;Ot.name="Swatches and Buttons";var Ct=[.417,.583];Ot.addRowDefinition(1,!1),Ot.addColumnDefinition(Ct[0],!1),Ot.addColumnDefinition(Ct[1],!1),yt.addControl(Ot,0,0);var wt=new x;wt.name="New and Current Swatches";var Tt=[.04,.16,.64,.16];wt.addRowDefinition(Tt[0],!1),wt.addRowDefinition(Tt[1],!1),wt.addRowDefinition(Tt[2],!1),wt.addRowDefinition(Tt[3],!1),Ot.addControl(wt,0,0);var xt=new x;xt.name="Active Swatches",xt.width=.67,xt.addRowDefinition(.5,!1),xt.addRowDefinition(.5,!1),wt.addControl(xt,2,0);var Mt=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[0]*.11),Pt=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*Tt[1]*.5);if(i.pickerWidth>i.pickerHeight)var kt=Pt;else kt=Mt;var It=new y;It.text="new",It.name="New Color Label",It.color=V,It.fontSize=kt,wt.addControl(It,1,0),(k=new m).name="New Color Swatch",k.background=i.lastColor,k.thickness=0,xt.addControl(k,0,0);var At=O.CreateSimpleButton("currentSwatch","");At.background=i.lastColor,At.thickness=0,At.onPointerClickObservable.add(function(){Z(s.Color3.FromHexString(At.background),At.name),tt(!1)}),At.pointerDownAnimation=function(){},At.pointerUpAnimation=function(){},At.pointerEnterAnimation=function(){},At.pointerOutAnimation=function(){},xt.addControl(At,1,0);var St=new m;St.name="Swatch Outline",St.width=.67,St.thickness=2,St.color="#404040",St.isHitTestVisible=!1,wt.addControl(St,2,0);var Et=new y;Et.name="Current Color Label",Et.text="current",Et.color=V,Et.fontSize=kt,wt.addControl(Et,3,0);var Lt=new x;Lt.name="Button Grid",Lt.height=.8;Lt.addRowDefinition(1/3,!1),Lt.addRowDefinition(1/3,!1),Lt.addRowDefinition(1/3,!1),Ot.addControl(Lt,0,1),l=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[1]*.67).toString()+"px",u=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*(parseFloat(Lt.height.toString())/100)*(1/3)*.7).toString()+"px",a=parseFloat(l)>parseFloat(u)?Math.floor(.45*parseFloat(u)):Math.floor(.11*parseFloat(l));var Rt=O.CreateSimpleButton("butOK","OK");Rt.width=l,Rt.height=u,Rt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Rt.thickness=2,Rt.color=V,Rt.fontSize=a,Rt.background=H,Rt.onPointerEnterObservable.add(function(){Rt.background=F}),Rt.onPointerOutObservable.add(function(){Rt.background=H}),Rt.pointerDownAnimation=function(){Rt.background=j},Rt.pointerUpAnimation=function(){Rt.background=F},Rt.onPointerClickObservable.add(function(){tt(!1),nt(k.background)}),Lt.addControl(Rt,0,0);var Dt=O.CreateSimpleButton("butCancel","Cancel");if(Dt.width=l,Dt.height=u,Dt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Dt.thickness=2,Dt.color=V,Dt.fontSize=a,Dt.background=H,Dt.onPointerEnterObservable.add(function(){Dt.background=F}),Dt.onPointerOutObservable.add(function(){Dt.background=H}),Dt.pointerDownAnimation=function(){Dt.background=j},Dt.pointerUpAnimation=function(){Dt.background=F},Dt.onPointerClickObservable.add(function(){tt(!1),nt(At.background)}),Lt.addControl(Dt,1,0),i.savedColors){var Bt=O.CreateSimpleButton("butSave","Save");Bt.width=l,Bt.height=u,Bt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Bt.thickness=2,Bt.fontSize=a,i.savedColors.length<i.swatchLimit?(Bt.color=V,Bt.background=H):rt(Bt,!0),Bt.onPointerEnterObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=F)}),Bt.onPointerOutObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=H)}),Bt.pointerDownAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=j)},Bt.pointerUpAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=F)},Bt.onPointerClickObservable.add(function(){i.savedColors&&(0==i.savedColors.length&&it(!0),i.savedColors.length<i.swatchLimit&&et(k.background,Bt),tt(!1))}),i.savedColors.length>0&&it(!0),Lt.addControl(Bt,2,0)}var Nt=new x;Nt.name="Dialog Lower Right",Nt.addRowDefinition(.02,!1),Nt.addRowDefinition(.63,!1),Nt.addRowDefinition(.21,!1),Nt.addRowDefinition(.14,!1),yt.addControl(Nt,1,0),c=s.Color3.FromHexString(i.lastColor);var Vt=new x;Vt.name="RGB Values",Vt.width=.82,Vt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Vt.addRowDefinition(1/3,!1),Vt.addRowDefinition(1/3,!1),Vt.addRowDefinition(1/3,!1),Vt.addColumnDefinition(.1,!1),Vt.addColumnDefinition(.2,!1),Vt.addColumnDefinition(.7,!1),Nt.addControl(Vt,1,0);for(lt=0;lt<q.length;lt++){(Ht=new y).text=q[lt],Ht.color=V,Ht.fontSize=a,Vt.addControl(Ht,lt,0)}(g=new T).width=.83,g.height=.72,g.name="rIntField",g.fontSize=a,g.text=(255*c.r).toString(),g.color="#f0f0f0",g.background="#454545",g.onFocusObservable.add(function(){A=g.name,I=g.text,tt(!1)}),g.onBlurObservable.add(function(){""==g.text&&(g.text="0"),J(g,"r"),A==g.name&&(A="")}),g.onTextChangedObservable.add(function(){A==g.name&&J(g,"r")}),Vt.addControl(g,0,1),(b=new T).width=.83,b.height=.72,b.name="gIntField",b.fontSize=a,b.text=(255*c.g).toString(),b.color="#f0f0f0",b.background="#454545",b.onFocusObservable.add(function(){A=b.name,I=b.text,tt(!1)}),b.onBlurObservable.add(function(){""==b.text&&(b.text="0"),J(b,"g"),A==b.name&&(A="")}),b.onTextChangedObservable.add(function(){A==b.name&&J(b,"g")}),Vt.addControl(b,1,1),(v=new T).width=.83,v.height=.72,v.name="bIntField",v.fontSize=a,v.text=(255*c.b).toString(),v.color="#f0f0f0",v.background="#454545",v.onFocusObservable.add(function(){A=v.name,I=v.text,tt(!1)}),v.onBlurObservable.add(function(){""==v.text&&(v.text="0"),J(v,"b"),A==v.name&&(A="")}),v.onTextChangedObservable.add(function(){A==v.name&&J(v,"b")}),Vt.addControl(v,2,1),(C=new T).width=.95,C.height=.72,C.name="rDecField",C.fontSize=a,C.text=c.r.toString(),C.color="#f0f0f0",C.background="#454545",C.onFocusObservable.add(function(){A=C.name,I=C.text,tt(!1)}),C.onBlurObservable.add(function(){0!=parseFloat(C.text)&&""!=C.text||(C.text="0",Q(C,"r")),A==C.name&&(A="")}),C.onTextChangedObservable.add(function(){A==C.name&&Q(C,"r")}),Vt.addControl(C,0,2),(w=new T).width=.95,w.height=.72,w.name="gDecField",w.fontSize=a,w.text=c.g.toString(),w.color="#f0f0f0",w.background="#454545",w.onFocusObservable.add(function(){A=w.name,I=w.text,tt(!1)}),w.onBlurObservable.add(function(){0!=parseFloat(w.text)&&""!=w.text||(w.text="0",Q(w,"g")),A==w.name&&(A="")}),w.onTextChangedObservable.add(function(){A==w.name&&Q(w,"g")}),Vt.addControl(w,1,2),(M=new T).width=.95,M.height=.72,M.name="bDecField",M.fontSize=a,M.text=c.b.toString(),M.color="#f0f0f0",M.background="#454545",M.onFocusObservable.add(function(){A=M.name,I=M.text,tt(!1)}),M.onBlurObservable.add(function(){0!=parseFloat(M.text)&&""!=M.text||(M.text="0",Q(M,"b")),A==M.name&&(A="")}),M.onTextChangedObservable.add(function(){A==M.name&&Q(M,"b")}),Vt.addControl(M,2,2);var Ht,Ft=new x;Ft.name="Hex Value",Ft.width=.82,Ft.addRowDefinition(1,!1),Ft.addColumnDefinition(.1,!1),Ft.addColumnDefinition(.9,!1),Nt.addControl(Ft,2,0),(Ht=new y).text="#",Ht.color=V,Ht.fontSize=a,Ft.addControl(Ht,0,0),(P=new T).width=.96,P.height=.72,P.name="hexField",P.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,P.fontSize=a;var jt=i.lastColor.split("#");P.text=jt[1],P.color="#f0f0f0",P.background="#454545",P.onFocusObservable.add(function(){A=P.name,I=P.text,tt(!1)}),P.onBlurObservable.add(function(){if(3==P.text.length){var t=P.text.split("");P.text=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}""==P.text&&(P.text="000000",Z(s.Color3.FromHexString(P.text),"b")),A==P.name&&(A="")}),P.onTextChangedObservable.add(function(){var t=P.text,e=/[^0-9A-F]/i.test(t);if((P.text.length>6||e)&&A==P.name)P.text=I;else{if(P.text.length<6)for(var i=6-P.text.length,r=0;r<i;r++)t="0"+t;if(3==P.text.length){var n=P.text.split("");t=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]}t="#"+t,A==P.name&&(I=P.text,Z(s.Color3.FromHexString(t),P.name))}}),Ft.addControl(P,0,1),i.savedColors&&i.savedColors.length>0&&et("",Bt)})},e._Epsilon=1e-6,e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.ColorPicker"]=M;var P=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Ellipse"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),this._background&&(t.fillStyle=this._background,t.fill()),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._thickness&&(this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.stroke()),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._clipForChildren=function(t){p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,t),t.clip()},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Ellipse"]=P;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._beforeRenderText=function(t){for(var e="",i=0;i<t.length;i++)e+="•";return e},e}(T);s._TypeStore.RegisteredTypes["BABYLON.GUI.InputPassword"]=k;var I=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i._x1=new a(0),i._y1=new a(0),i._x2=new a(0),i._y2=new a(0),i._dash=new Array,i._automaticSize=!0,i.isHitTestVisible=!1,i._horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,i}return n(e,t),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedControl",{get:function(){return this._connectedControl},set:function(t){var e=this;this._connectedControl!==t&&(this._connectedControlDirtyObserver&&this._connectedControl&&(this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver),this._connectedControlDirtyObserver=null),t&&(this._connectedControlDirtyObserver=t.onDirtyObservable.add(function(){return e._markAsDirty()})),this._connectedControl=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this._x1.toString(this._host)},set:function(t){this._x1.toString(this._host)!==t&&this._x1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this._y1.toString(this._host)},set:function(t){this._y1.toString(this._host)!==t&&this._y1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this._x2.toString(this._host)},set:function(t){this._x2.toString(this._host)!==t&&this._x2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this._y2.toString(this._host)},set:function(t){this._y2.toString(this._host)!==t&&this._y2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_effectiveX2",{get:function(){return(this._connectedControl?this._connectedControl.centerX:0)+this._x2.getValue(this._host)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_effectiveY2",{get:function(){return(this._connectedControl?this._connectedControl.centerY:0)+this._y2.getValue(this._host)},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Line"},e.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath(),t.moveTo(this._cachedParentMeasure.left+this._x1.getValue(this._host),this._cachedParentMeasure.top+this._y1.getValue(this._host)),t.lineTo(this._cachedParentMeasure.left+this._effectiveX2,this._cachedParentMeasure.top+this._effectiveY2),t.stroke(),t.restore()},e.prototype._measure=function(){this._currentMeasure.width=Math.abs(this._x1.getValue(this._host)-this._effectiveX2)+this._lineWidth,this._currentMeasure.height=Math.abs(this._y1.getValue(this._host)-this._effectiveY2)+this._lineWidth},e.prototype._computeAlignment=function(t,e){this._currentMeasure.left=t.left+Math.min(this._x1.getValue(this._host),this._effectiveX2)-this._lineWidth/2,this._currentMeasure.top=t.top+Math.min(this._y1.getValue(this._host),this._effectiveY2)-this._lineWidth/2},e.prototype.moveToVector3=function(t,e,i){if(void 0===i&&(i=!1),this._host&&this.parent===this._host._rootContainer){var r=this._host._getGlobalViewport(e),n=s.Vector3.Project(t,s.Matrix.Identity(),e.getTransformMatrix(),r);this._moveToProjectedPosition(n,i),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else s.Tools.Error("Cannot move a control to a vector3 if the control is not at root level")},e.prototype._moveToProjectedPosition=function(t,e){void 0===e&&(e=!1);var i=t.x+this._linkOffsetX.getValue(this._host)+"px",r=t.y+this._linkOffsetY.getValue(this._host)+"px";e?(this.x2=i,this.y2=r,this._x2.ignoreAdaptiveScaling=!0,this._y2.ignoreAdaptiveScaling=!0):(this.x1=i,this.y1=r,this._x1.ignoreAdaptiveScaling=!0,this._y1.ignoreAdaptiveScaling=!0)},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Line"]=I;var A=function(){function t(t){this._multiLine=t,this._x=new a(0),this._y=new a(0),this._point=new s.Vector2(0,0)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x.toString(this._multiLine._host)},set:function(t){this._x.toString(this._multiLine._host)!==t&&this._x.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y.toString(this._multiLine._host)},set:function(t){this._y.toString(this._multiLine._host)!==t&&this._y.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this._control},set:function(t){this._control!==t&&(this._control&&this._controlObserver&&(this._control.onDirtyObservable.remove(this._controlObserver),this._controlObserver=null),this._control=t,this._control&&(this._controlObserver=this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mesh",{get:function(){return this._mesh},set:function(t){this._mesh!==t&&(this._mesh&&this._meshObserver&&this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver),this._mesh=t,this._mesh&&(this._meshObserver=this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype.resetLinks=function(){this.control=null,this.mesh=null},t.prototype.translate=function(){return this._point=this._translatePoint(),this._point},t.prototype._translatePoint=function(){if(null!=this._mesh)return this._multiLine._host.getProjectedPosition(this._mesh.getBoundingInfo().boundingSphere.center,this._mesh.getWorldMatrix());if(null!=this._control)return new s.Vector2(this._control.centerX,this._control.centerY);var t=this._multiLine._host,e=this._x.getValueInPixel(t,Number(t._canvas.width)),i=this._y.getValueInPixel(t,Number(t._canvas.height));return new s.Vector2(e,i)},t.prototype.dispose=function(){this.resetLinks()},t}(),S=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i.onPointUpdate=function(){i._markAsDirty()},i._automaticSize=!0,i.isHitTestVisible=!1,i._horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,i._dash=[],i._points=[],i}return n(e,t),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.getAt=function(t){return this._points[t]||(this._points[t]=new A(this)),this._points[t]},e.prototype.add=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.map(function(e){return t.push(e)})},e.prototype.push=function(t){var e=this.getAt(this._points.length);return null==t?e:(t instanceof s.AbstractMesh?e.mesh=t:t instanceof p?e.control=t:null!=t.x&&null!=t.y&&(e.x=t.x,e.y=t.y),e)},e.prototype.remove=function(t){var e;if(t instanceof A){if(-1===(e=this._points.indexOf(t)))return}else e=t;var i=this._points[e];i&&(i.dispose(),this._points.splice(e,1))},e.prototype.reset=function(){for(;this._points.length>0;)this.remove(this._points.length-1)},e.prototype.resetLinks=function(){this._points.forEach(function(t){null!=t&&t.resetLinks()})},Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"MultiLine"},e.prototype._draw=function(t,e){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath();var i=!0;this._points.forEach(function(e){e&&(i?(t.moveTo(e._point.x,e._point.y),i=!1):t.lineTo(e._point.x,e._point.y))}),t.stroke(),t.restore()},e.prototype._additionalProcessing=function(t,e){var i=this;this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._points.forEach(function(t,e){t&&(t.translate(),(null==i._minX||t._point.x<i._minX)&&(i._minX=t._point.x),(null==i._minY||t._point.y<i._minY)&&(i._minY=t._point.y),(null==i._maxX||t._point.x>i._maxX)&&(i._maxX=t._point.x),(null==i._maxY||t._point.y>i._maxY)&&(i._maxY=t._point.y))}),null==this._minX&&(this._minX=0),null==this._minY&&(this._minY=0),null==this._maxX&&(this._maxX=0),null==this._maxY&&(this._maxY=0)},e.prototype._measure=function(){null!=this._minX&&null!=this._maxX&&null!=this._minY&&null!=this._maxY&&(this._currentMeasure.width=Math.abs(this._maxX-this._minX)+this._lineWidth,this._currentMeasure.height=Math.abs(this._maxY-this._minY)+this._lineWidth)},e.prototype._computeAlignment=function(t,e){null!=this._minX&&null!=this._minY&&(this._currentMeasure.left=this._minX-this._lineWidth/2,this._currentMeasure.top=this._minY-this._lineWidth/2)},e.prototype.dispose=function(){this.reset(),t.prototype.dispose.call(this)},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.MultiLine"]=S;var E=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.group="",i.onIsCheckedChangedObservable=new s.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){return this._isChecked},set:function(t){var e=this;this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t),this._isChecked&&this._host&&this._host.executeOnAllControls(function(t){if(t!==e&&void 0!==t.group){var i=t;i.group===e.group&&(i.isChecked=!1)}}))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"RadioButton"},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=this._currentMeasure.width-this._thickness,i=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this.color,t.lineWidth=this._thickness,t.stroke(),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColor;var r=e*this._checkSizeRatio,n=i*this._checkSizeRatio;p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,r/2-this._thickness/2,n/2-this._thickness/2,t),t.fill()}t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked||(this.isChecked=!0),!0)},e.AddRadioButtonWithHeader=function(t,i,r,n){var o=new C;o.isVertical=!1,o.height="30px";var s=new e;s.width="20px",s.height="20px",s.isChecked=r,s.color="green",s.group=i,s.onIsCheckedChangedObservable.add(function(t){return n(s,t)}),o.addControl(s);var a=new y;return a.text=t,a.width="180px",a.paddingLeft="5px",a.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,a.color="white",o.addControl(a),o},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.RadioButton"]=E;var L=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thumbWidth=new a(20,a.UNITMODE_PIXEL,!1),i._minimum=0,i._maximum=100,i._value=50,i._isVertical=!1,i._barOffset=new a(5,a.UNITMODE_PIXEL,!1),i._isThumbClamped=!1,i._displayThumb=!0,i._step=0,i._lastPointerDownID=-1,i._effectiveBarOffset=0,i.onValueChangedObservable=new s.Observable,i._pointerIsDown=!1,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayThumb",{get:function(){return this._displayThumb},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step!==t&&(this._step=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barOffset",{get:function(){return this._barOffset.toString(this._host)},set:function(t){this._barOffset.toString(this._host)!==t&&this._barOffset.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barOffsetInPixels",{get:function(){return this._barOffset.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbWidth",{get:function(){return this._thumbWidth.toString(this._host)},set:function(t){this._thumbWidth.toString(this._host)!==t&&this._thumbWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbWidthInPixels",{get:function(){return this._thumbWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._minimum!==t&&(this._minimum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum!==t&&(this._maximum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=Math.max(Math.min(t,this._maximum),this._minimum),this._value!==t&&(this._value=t,this._markAsDirty(),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isThumbClamped",{get:function(){return this._isThumbClamped},set:function(t){this._isThumbClamped!==t&&(this._isThumbClamped=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"BaseSlider"},e.prototype._getThumbPosition=function(){return this.isVertical?(this.maximum-this.value)/(this.maximum-this.minimum)*this._backgroundBoxLength:(this.value-this.minimum)/(this.maximum-this.minimum)*this._backgroundBoxLength},e.prototype._getThumbThickness=function(t){var e=0;switch(t){case"circle":e=this._thumbWidth.isPixel?Math.max(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host);break;case"rectangle":e=this._thumbWidth.isPixel?Math.min(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)}return e},e.prototype._prepareRenderingData=function(t){this._effectiveBarOffset=0,this._renderLeft=this._currentMeasure.left,this._renderTop=this._currentMeasure.top,this._renderWidth=this._currentMeasure.width,this._renderHeight=this._currentMeasure.height,this._backgroundBoxLength=Math.max(this._currentMeasure.width,this._currentMeasure.height),this._backgroundBoxThickness=Math.min(this._currentMeasure.width,this._currentMeasure.height),this._effectiveThumbThickness=this._getThumbThickness(t),this.displayThumb&&(this._backgroundBoxLength-=this._effectiveThumbThickness),this.isVertical&&this._currentMeasure.height<this._currentMeasure.width?console.error("Height should be greater than width"):(this._barOffset.isPixel?this._effectiveBarOffset=Math.min(this._barOffset.getValue(this._host),this._backgroundBoxThickness):this._effectiveBarOffset=this._backgroundBoxThickness*this._barOffset.getValue(this._host),this._backgroundBoxThickness-=2*this._effectiveBarOffset,this.isVertical?(this._renderLeft+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderTop+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxLength,this._renderWidth=this._backgroundBoxThickness):(this._renderTop+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderLeft+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxThickness,this._renderWidth=this._backgroundBoxLength))},e.prototype._updateValueFromPointer=function(t,e){var i;0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),i=this._isVertical?this._minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this._maximum-this._minimum):this._minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this._maximum-this._minimum);var r=1/this._step|0;this.value=this._step?(i*r|0)/r:i},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._pointerIsDown=!0,this._updateValueFromPointer(i.x,i.y),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0)},e.prototype._onPointerMove=function(e,i,r){r==this._lastPointerDownID&&(this._pointerIsDown&&this._updateValueFromPointer(i.x,i.y),t.prototype._onPointerMove.call(this,e,i,r))},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e}(p),R=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background="black",i._borderColor="white",i._isThumbCircle=!1,i._displayValueBar=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayValueBar",{get:function(){return this._displayValueBar},set:function(t){this._displayValueBar!==t&&(this._displayValueBar=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isThumbCircle",{get:function(){return this._isThumbCircle},set:function(t){this._isThumbCircle!==t&&(this._isThumbCircle=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Slider"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._prepareRenderingData(this.isThumbCircle?"circle":"rectangle");var i=this._renderLeft,r=this._renderTop,n=this._renderWidth,o=this._renderHeight,s=0;this.isThumbClamped&&this.isThumbCircle?(this.isVertical?r+=this._effectiveThumbThickness/2:i+=this._effectiveThumbThickness/2,s=this._backgroundBoxThickness/2):s=(this._effectiveThumbThickness-this._effectiveBarOffset)/2,(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY);var a=this._getThumbPosition();t.fillStyle=this._background,this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,r,s,Math.PI,2*Math.PI),t.fill(),t.fillRect(i,r,n,o)):t.fillRect(i,r,n,o+this._effectiveThumbThickness):t.fillRect(i,r,n,o):this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxLength,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),t.fillRect(i,r,n,o)):t.fillRect(i,r,n+this._effectiveThumbThickness,o):t.fillRect(i,r,n,o),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillStyle=this.color,this._displayValueBar&&(this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,r+this._backgroundBoxLength,s,0,2*Math.PI),t.fill(),t.fillRect(i,r+a,n,o-a)):t.fillRect(i,r+a,n,o-a+this._effectiveThumbThickness):t.fillRect(i,r+a,n,o-a):this.isThumbClamped&&this.isThumbCircle?(t.beginPath(),t.arc(i,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),t.fillRect(i,r,a,o)):t.fillRect(i,r,a,o)),this.displayThumb&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isThumbCircle?(t.beginPath(),this.isVertical?t.arc(i+this._backgroundBoxThickness/2,r+a,s,0,2*Math.PI):t.arc(i+a,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,t.stroke()):(this.isVertical?t.fillRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.fillRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,this.isVertical?t.strokeRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.strokeRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height))),t.restore()},e}(L);s._TypeStore.RegisteredTypes["BABYLON.GUI.Slider"]=R;var D=function(){function t(t){this.name=t,this._groupPanel=new C,this._selectors=new Array,this._groupPanel.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,this._groupPanel.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,this._groupHeader=this._addGroupHeader(t)}return Object.defineProperty(t.prototype,"groupPanel",{get:function(){return this._groupPanel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectors",{get:function(){return this._selectors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._groupHeader.text},set:function(t){"label"!==this._groupHeader.text&&(this._groupHeader.text=t)},enumerable:!0,configurable:!0}),t.prototype._addGroupHeader=function(t){var e=new y("groupHead",t);return e.width=.9,e.height="30px",e.textWrapping=!0,e.color="black",e.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.left="2px",this._groupPanel.addControl(e),e},t.prototype._getSelector=function(t){if(!(t<0||t>=this._selectors.length))return this._selectors[t]},t.prototype.removeSelector=function(t){t<0||t>=this._selectors.length||(this._groupPanel.removeControl(this._selectors[t]),this._selectors.splice(t,1))},t}(),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addCheckbox=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);i=i||!1;var r=new w;r.width="20px",r.height="20px",r.color="#364249",r.background="#CCCCCC",r.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r.onIsCheckedChangedObservable.add(function(t){e(t)});var n=p.AddHeader(r,t,"200px",{isHorizontal:!0,controlFirst:!0});n.height="30px",n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.left="4px",this.groupPanel.addControl(n),this.selectors.push(n),r.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(r.color=this.groupPanel.parent.parent.buttonColor,r.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(D),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectNb=0,e}return n(e,t),e.prototype.addRadio=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);var r=this._selectNb++,n=new E;n.name=t,n.width="20px",n.height="20px",n.color="#364249",n.background="#CCCCCC",n.group=this.name,n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.onIsCheckedChangedObservable.add(function(t){t&&e(r)});var o=p.AddHeader(n,t,"200px",{isHorizontal:!0,controlFirst:!0});o.height="30px",o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.left="4px",this.groupPanel.addControl(o),this.selectors.push(o),n.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(n.color=this.groupPanel.parent.parent.buttonColor,n.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(D),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addSlider=function(t,e,i,r,n,o,s){void 0===e&&(e=function(t){}),void 0===i&&(i="Units"),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=function(t){return 0|t});var a=new R;a.name=i,a.value=o,a.minimum=r,a.maximum=n,a.width=.9,a.height="20px",a.color="#364249",a.background="#CCCCCC",a.borderColor="black",a.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,a.left="4px",a.paddingBottom="4px",a.onValueChangedObservable.add(function(t){a.parent.children[0].text=a.parent.children[0].name+": "+s(t)+" "+a.name,e(t)});var h=p.AddHeader(a,t+": "+s(o)+" "+i,"30px",{isHorizontal:!1,controlFirst:!1});h.height="60px",h.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,h.left="4px",h.children[0].name=t,this.groupPanel.addControl(h),this.selectors.push(h),this.groupPanel.parent&&this.groupPanel.parent.parent&&(a.color=this.groupPanel.parent.parent.buttonColor,a.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[0].name=e,this.selectors[t].children[0].text=e+": "+this.selectors[t].children[1].value+" "+this.selectors[t].children[1].name},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[1].background=e},e}(D),H=function(t){function e(e,i){void 0===i&&(i=[]);var r=t.call(this,e)||this;if(r.name=e,r.groups=i,r._buttonColor="#364249",r._buttonBackground="#CCCCCC",r._headerColor="black",r._barColor="white",r._barHeight="2px",r._spacerHeight="20px",r._bars=new Array,r._groups=i,r.thickness=2,r._panel=new C,r._panel.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._panel.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._panel.top=5,r._panel.left=5,r._panel.width=.95,i.length>0){for(var n=0;n<i.length-1;n++)r._panel.addControl(i[n].groupPanel),r._addSpacer();r._panel.addControl(i[i.length-1].groupPanel)}return r.addControl(r._panel),r}return n(e,t),e.prototype._getTypeName=function(){return"SelectionPanel"},Object.defineProperty(e.prototype,"headerColor",{get:function(){return this._headerColor},set:function(t){this._headerColor!==t&&(this._headerColor=t,this._setHeaderColor())},enumerable:!0,configurable:!0}),e.prototype._setHeaderColor=function(){for(var t=0;t<this._groups.length;t++)this._groups[t].groupPanel.children[0].color=this._headerColor},Object.defineProperty(e.prototype,"buttonColor",{get:function(){return this._buttonColor},set:function(t){this._buttonColor!==t&&(this._buttonColor=t,this._setbuttonColor())},enumerable:!0,configurable:!0}),e.prototype._setbuttonColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonColor(e,this._buttonColor)},Object.defineProperty(e.prototype,"labelColor",{get:function(){return this._labelColor},set:function(t){this._labelColor!==t&&(this._labelColor=t,this._setLabelColor())},enumerable:!0,configurable:!0}),e.prototype._setLabelColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorLabelColor(e,this._labelColor)},Object.defineProperty(e.prototype,"buttonBackground",{get:function(){return this._buttonBackground},set:function(t){this._buttonBackground!==t&&(this._buttonBackground=t,this._setButtonBackground())},enumerable:!0,configurable:!0}),e.prototype._setButtonBackground=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonBackground(e,this._buttonBackground)},Object.defineProperty(e.prototype,"barColor",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._setBarColor())},enumerable:!0,configurable:!0}),e.prototype._setBarColor=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].background=this._barColor},Object.defineProperty(e.prototype,"barHeight",{get:function(){return this._barHeight},set:function(t){this._barHeight!==t&&(this._barHeight=t,this._setBarHeight())},enumerable:!0,configurable:!0}),e.prototype._setBarHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].height=this._barHeight},Object.defineProperty(e.prototype,"spacerHeight",{get:function(){return this._spacerHeight},set:function(t){this._spacerHeight!==t&&(this._spacerHeight=t,this._setSpacerHeight())},enumerable:!0,configurable:!0}),e.prototype._setSpacerHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].height=this._spacerHeight},e.prototype._addSpacer=function(){var t=new g;t.width=1,t.height=this._spacerHeight,t.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT;var e=new m;e.width=1,e.height=this._barHeight,e.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,e.background=this._barColor,e.color="transparent",t.addControl(e),this._panel.addControl(t),this._bars.push(t)},e.prototype.addGroup=function(t){this._groups.length>0&&this._addSpacer(),this._panel.addControl(t.groupPanel),this._groups.push(t),t.groupPanel.children[0].color=this._headerColor;for(var e=0;e<t.selectors.length;e++)t._setSelectorButtonColor(e,this._buttonColor),t._setSelectorButtonBackground(e,this._buttonBackground)},e.prototype.removeGroup=function(t){if(!(t<0||t>=this._groups.length)){var e=this._groups[t];this._panel.removeControl(e.groupPanel),this._groups.splice(t,1),t<this._bars.length&&(this._panel.removeControl(this._bars[t]),this._bars.splice(t,1))}},e.prototype.setHeaderName=function(t,e){e<0||e>=this._groups.length||(this._groups[e].groupPanel.children[0].text=t)},e.prototype.relabel=function(t,e,i){if(!(e<0||e>=this._groups.length)){var r=this._groups[e];i<0||i>=r.selectors.length||r._setSelectorLabel(i,t)}},e.prototype.removeFromGroupSelector=function(t,e){if(!(t<0||t>=this._groups.length)){var i=this._groups[t];e<0||e>=i.selectors.length||i.removeSelector(e)}},e.prototype.addToGroupCheckbox=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addCheckbox(e,i,r)},e.prototype.addToGroupRadio=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addRadio(e,i,r)},e.prototype.addToGroupSlider=function(t,e,i,r,n,o,s,a){(void 0===i&&(i=function(){}),void 0===r&&(r="Units"),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=function(t){return 0|t}),t<0||t>=this._groups.length)||this._groups[t].addSlider(e,i,r,n,o,s,a)},e}(m),F=function(t){function e(e){var i=t.call(this,e)||this;return i._freezeControls=!1,i._bucketWidth=0,i._bucketHeight=0,i._buckets={},i}return n(e,t),Object.defineProperty(e.prototype,"freezeControls",{get:function(){return this._freezeControls},set:function(t){if(this._freezeControls!==t){this._freezeControls=!1;var e=this.host.getSize(),i=e.width,r=e.height,n=this.host.getContext(),o=new _(0,0,i,r);this.host._numLayoutCalls=0,this.host._rootContainer._layout(o,n),t&&(this._updateMeasures(),this._useBuckets()&&this._makeBuckets()),this._freezeControls=t,this.host.markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketWidth",{get:function(){return this._bucketWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketHeight",{get:function(){return this._bucketHeight},enumerable:!0,configurable:!0}),e.prototype.setBucketSizes=function(t,e){this._bucketWidth=t,this._bucketHeight=e,this._useBuckets()?this._freezeControls&&this._makeBuckets():this._buckets={}},e.prototype._useBuckets=function(){return this._bucketWidth>0&&this._bucketHeight>0},e.prototype._makeBuckets=function(){this._buckets={},this._bucketLen=Math.ceil(this.widthInPixels/this._bucketWidth),this._dispatchInBuckets(this._children)},e.prototype._dispatchInBuckets=function(t){for(var e=0;e<t.length;++e){for(var i=t[e],r=Math.max(0,Math.floor((i._currentMeasure.left-this._currentMeasure.left)/this._bucketWidth)),n=Math.floor((i._currentMeasure.left-this._currentMeasure.left+i._currentMeasure.width-1)/this._bucketWidth),o=Math.max(0,Math.floor((i._currentMeasure.top-this._currentMeasure.top)/this._bucketHeight)),s=Math.floor((i._currentMeasure.top-this._currentMeasure.top+i._currentMeasure.height-1)/this._bucketHeight);o<=s;){for(var a=r;a<=n;++a){var h=o*this._bucketLen+a,l=this._buckets[h];l||(l=[],this._buckets[h]=l),l.push(i)}o++}i instanceof g&&i._children.length>0&&this._dispatchInBuckets(i._children)}},e.prototype._updateMeasures=function(){var t=0|this.leftInPixels,e=0|this.topInPixels;this._measureForChildren.left-=t,this._measureForChildren.top-=e,this._currentMeasure.left-=t,this._currentMeasure.top-=e,this._updateChildrenMeasures(this._children,t,e)},e.prototype._updateChildrenMeasures=function(t,e,i){for(var r=0;r<t.length;++r){var n=t[r];n._currentMeasure.left-=e,n._currentMeasure.top-=i,n._customData._origLeft=n._currentMeasure.left,n._customData._origTop=n._currentMeasure.top,n instanceof g&&n._children.length>0&&this._updateChildrenMeasures(n._children,e,i)}},e.prototype._getTypeName=function(){return"ScrollViewerWindow"},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._parentMeasure=e,this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this._measureForChildren.width=e.width,this._measureForChildren.height=e.height},e.prototype._layout=function(e,i){return this._freezeControls?(this.invalidateRect(),!1):t.prototype._layout.call(this,e,i)},e.prototype._scrollChildren=function(t,e,i){for(var r=0;r<t.length;++r){var n=t[r];n._currentMeasure.left=n._customData._origLeft+e,n._currentMeasure.top=n._customData._origTop+i,n._isClipped=!1,n instanceof g&&n._children.length>0&&this._scrollChildren(n._children,e,i)}},e.prototype._scrollChildrenWithBuckets=function(t,e,i,r){for(var n=Math.max(0,Math.floor(-t/this._bucketWidth)),o=Math.floor((-t+this._parentMeasure.width-1)/this._bucketWidth),s=Math.max(0,Math.floor(-e/this._bucketHeight)),a=Math.floor((-e+this._parentMeasure.height-1)/this._bucketHeight);s<=a;){for(var h=n;h<=o;++h){var l=s*this._bucketLen+h,u=this._buckets[l];if(u)for(var c=0;c<u.length;++c){var _=u[c];_._currentMeasure.left=_._customData._origLeft+i,_._currentMeasure.top=_._customData._origTop+r,_._isClipped=!1}}s++}},e.prototype._draw=function(e,i){if(this._freezeControls){this._localDraw(e),this.clipChildren&&this._clipForChildren(e);var r=this.leftInPixels,n=this.topInPixels;this._useBuckets()?(this._scrollChildrenWithBuckets(this._oldLeft,this._oldTop,r,n),this._scrollChildrenWithBuckets(r,n,r,n)):this._scrollChildren(this._children,r,n),this._oldLeft=r,this._oldTop=n;for(var o=0,s=this._children;o<s.length;o++){var a=s[o];a._intersectsRect(this._parentMeasure)&&a._render(e,this._parentMeasure)}}else t.prototype._draw.call(this,e,i)},e.prototype._postMeasure=function(){if(this._freezeControls)t.prototype._postMeasure.call(this);else{for(var e=this.parentClientWidth,i=this.parentClientHeight,r=0,n=this.children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(o.horizontalAlignment===p.HORIZONTAL_ALIGNMENT_CENTER&&o._offsetLeft(this._currentMeasure.left-o._currentMeasure.left),o.verticalAlignment===p.VERTICAL_ALIGNMENT_CENTER&&o._offsetTop(this._currentMeasure.top-o._currentMeasure.top),e=Math.max(e,o._currentMeasure.left-this._currentMeasure.left+o._currentMeasure.width),i=Math.max(i,o._currentMeasure.top-this._currentMeasure.top+o._currentMeasure.height))}this._currentMeasure.width!==e&&(this._width.updateInPlace(e,a.UNITMODE_PIXEL),this._currentMeasure.width=e,this._rebuildLayout=!0,this._isDirty=!0),this._currentMeasure.height!==i&&(this._height.updateInPlace(i,a.UNITMODE_PIXEL),this._currentMeasure.height=i,this._rebuildLayout=!0,this._isDirty=!0),t.prototype._postMeasure.call(this)}},e}(g),j=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background="black",i._borderColor="white",i._tempMeasure=new _(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Scrollbar"},e.prototype._getThumbThickness=function(){return this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._renderLeft,i=this._getThumbPosition();t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.fillStyle=this.color,this.isVertical?(this._tempMeasure.left=e-this._effectiveBarOffset,this._tempMeasure.top=this._currentMeasure.top+i,this._tempMeasure.width=this._currentMeasure.width,this._tempMeasure.height=this._effectiveThumbThickness):(this._tempMeasure.left=this._currentMeasure.left+i,this._tempMeasure.top=this._currentMeasure.top,this._tempMeasure.width=this._effectiveThumbThickness,this._tempMeasure.height=this._currentMeasure.height),t.fillRect(this._tempMeasure.left,this._tempMeasure.top,this._tempMeasure.width,this._tempMeasure.height),t.restore()},e.prototype._updateValueFromPointer=function(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e},e.prototype._onPointerDown=function(e,i,r,n){return this._first=!0,t.prototype._onPointerDown.call(this,e,i,r,n)},e}(L),W=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thumbLength=.5,i._thumbHeight=1,i._barImageHeight=1,i._tempMeasure=new _(0,0,0,0),i.num90RotationInVerticalMode=1,i}return n(e,t),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this._backgroundBaseImage},set:function(t){var e=this;this._backgroundBaseImage!==t&&(this._backgroundBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._backgroundImage=t._rotate90(this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(e.num90RotationInVerticalMode,!0);e._backgroundImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._thumbBaseImage},set:function(t){var e=this;this._thumbBaseImage!==t&&(this._thumbBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._thumbImage=t._rotate90(-this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(-e.num90RotationInVerticalMode,!0);e._thumbImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(t){this._thumbLength!==t&&(this._thumbLength=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(t){this._thumbLength!==t&&(this._thumbHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(t){this._barImageHeight!==t&&(this._barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ImageScrollBar"},e.prototype._getThumbThickness=function(){return this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._getThumbPosition(),i=this._renderLeft,r=this._renderTop,n=this._renderWidth,o=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(i,r,n,o),this.isVertical?(this._tempMeasure.copyFromFloats(i+n*(1-this._barImageHeight)*.5,this._currentMeasure.top,n*this._barImageHeight,o),this._tempMeasure.height+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)):(this._tempMeasure.copyFromFloats(this._currentMeasure.left,r+o*(1-this._barImageHeight)*.5,n,o*this._barImageHeight),this._tempMeasure.width+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)),this._backgroundImage._draw(t)),this.isVertical?this._tempMeasure.copyFromFloats(i-this._effectiveBarOffset+this._currentMeasure.width*(1-this._thumbHeight)*.5,this._currentMeasure.top+e,this._currentMeasure.width*this._thumbHeight,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+e,this._currentMeasure.top+this._currentMeasure.height*(1-this._thumbHeight)*.5,this._effectiveThumbThickness,this._currentMeasure.height*this._thumbHeight),this._thumbImage&&(this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},e.prototype._updateValueFromPointer=function(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e},e.prototype._onPointerDown=function(e,i,r,n){return this._first=!0,t.prototype._onPointerDown.call(this,e,i,r,n)},e}(L),z=function(t){function e(e,i){var r=t.call(this,e)||this;return r._barSize=20,r._pointerIsOver=!1,r._wheelPrecision=.05,r._thumbLength=.5,r._thumbHeight=1,r._barImageHeight=1,r._horizontalBarImageHeight=1,r._verticalBarImageHeight=1,r._forceHorizontalBar=!1,r._forceVerticalBar=!1,r._useImageBar=i||!1,r.onDirtyObservable.add(function(){r._horizontalBarSpace.color=r.color,r._verticalBarSpace.color=r.color,r._dragSpace.color=r.color}),r.onPointerEnterObservable.add(function(){r._pointerIsOver=!0}),r.onPointerOutObservable.add(function(){r._pointerIsOver=!1}),r._grid=new x,r._useImageBar?(r._horizontalBar=new W,r._verticalBar=new W):(r._horizontalBar=new j,r._verticalBar=new j),r._window=new F("scrollViewer_window"),r._window.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._window.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._grid.addColumnDefinition(1),r._grid.addColumnDefinition(0,!0),r._grid.addRowDefinition(1),r._grid.addRowDefinition(0,!0),t.prototype.addControl.call(r,r._grid),r._grid.addControl(r._window,0,0),r._verticalBarSpace=new m,r._verticalBarSpace.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._verticalBarSpace.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._verticalBarSpace.thickness=1,r._grid.addControl(r._verticalBarSpace,0,1),r._addBar(r._verticalBar,r._verticalBarSpace,!0,Math.PI),r._horizontalBarSpace=new m,r._horizontalBarSpace.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._horizontalBarSpace.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._horizontalBarSpace.thickness=1,r._grid.addControl(r._horizontalBarSpace,1,0),r._addBar(r._horizontalBar,r._horizontalBarSpace,!1,0),r._dragSpace=new m,r._dragSpace.thickness=1,r._grid.addControl(r._dragSpace,1,1),r._useImageBar||(r.barColor="grey",r.barBackground="transparent"),r}return n(e,t),Object.defineProperty(e.prototype,"horizontalBar",{get:function(){return this._horizontalBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBar",{get:function(){return this._verticalBar},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){return t?(this._window.addControl(t),this):this},e.prototype.removeControl=function(t){return this._window.removeControl(t),this},Object.defineProperty(e.prototype,"children",{get:function(){return this._window.children},enumerable:!0,configurable:!0}),e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this._children;t<e.length;t++){e[t]._markMatrixAsDirty()}},Object.defineProperty(e.prototype,"freezeControls",{get:function(){return this._window.freezeControls},set:function(t){this._window.freezeControls=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketWidth",{get:function(){return this._window.bucketWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketHeight",{get:function(){return this._window.bucketHeight},enumerable:!0,configurable:!0}),e.prototype.setBucketSizes=function(t,e){this._window.setBucketSizes(t,e)},Object.defineProperty(e.prototype,"forceHorizontalBar",{get:function(){return this._forceHorizontalBar},set:function(t){this._grid.setRowDefinition(1,t?this._barSize:0,!0),this._horizontalBar.isVisible=t,this._forceHorizontalBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceVerticalBar",{get:function(){return this._forceVerticalBar},set:function(t){this._grid.setColumnDefinition(1,t?this._barSize:0,!0),this._verticalBar.isVisible=t,this._forceVerticalBar=t},enumerable:!0,configurable:!0}),e.prototype.resetWindow=function(){this._window.width="100%",this._window.height="100%"},e.prototype._getTypeName=function(){return"ScrollViewer"},e.prototype._buildClientSizes=function(){var t=this.host.idealRatio;this._window.parentClientWidth=this._currentMeasure.width-(this._verticalBar.isVisible||this.forceVerticalBar?this._barSize*t:0)-2*this.thickness,this._window.parentClientHeight=this._currentMeasure.height-(this._horizontalBar.isVisible||this.forceHorizontalBar?this._barSize*t:0)-2*this.thickness,this._clientWidth=this._window.parentClientWidth,this._clientHeight=this._window.parentClientHeight},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._buildClientSizes()},e.prototype._postMeasure=function(){t.prototype._postMeasure.call(this),this._updateScroller()},Object.defineProperty(e.prototype,"wheelPrecision",{get:function(){return this._wheelPrecision},set:function(t){this._wheelPrecision!==t&&(t<0&&(t=0),t>1&&(t=1),this._wheelPrecision=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBackground",{get:function(){return this._horizontalBarSpace.background},set:function(t){this._horizontalBarSpace.background!==t&&(this._horizontalBarSpace.background=t,this._verticalBarSpace.background=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barColor",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._horizontalBar.color=t,this._verticalBar.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._barImage},set:function(t){if(this._barImage!==t){this._barImage=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbImage=t,i.thumbImage=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalThumbImage",{get:function(){return this._horizontalBarImage},set:function(t){this._horizontalBarImage!==t&&(this._horizontalBarImage=t,this._horizontalBar.thumbImage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalThumbImage",{get:function(){return this._verticalBarImage},set:function(t){this._verticalBarImage!==t&&(this._verticalBarImage=t,this._verticalBar.thumbImage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barSize",{get:function(){return this._barSize},set:function(t){this._barSize!==t&&(this._barSize=t,this._markAsDirty(),this._horizontalBar.isVisible&&this._grid.setRowDefinition(1,this._barSize,!0),this._verticalBar.isVisible&&this._grid.setColumnDefinition(1,this._barSize,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(t){if(this._thumbLength!==t){t<=0&&(t=.1),t>1&&(t=1),this._thumbLength=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbLength=t,i.thumbLength=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(t){if(this._thumbHeight!==t){t<=0&&(t=.1),t>1&&(t=1),this._thumbHeight=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbHeight=t,i.thumbHeight=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(t){if(this._barImageHeight!==t){t<=0&&(t=.1),t>1&&(t=1),this._barImageHeight=t;var e=this._horizontalBar,i=this._verticalBar;e.barImageHeight=t,i.barImageHeight=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalBarImageHeight",{get:function(){return this._horizontalBarImageHeight},set:function(t){this._horizontalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._horizontalBarImageHeight=t,this._horizontalBar.barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBarImageHeight",{get:function(){return this._verticalBarImageHeight},set:function(t){this._verticalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._verticalBarImageHeight=t,this._verticalBar.barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barBackground",{get:function(){return this._barBackground},set:function(t){if(this._barBackground!==t){this._barBackground=t;var e=this._horizontalBar,i=this._verticalBar;e.background=t,i.background=t,this._dragSpace.background=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImage",{get:function(){return this._barBackgroundImage},set:function(t){this._barBackgroundImage,this._barBackgroundImage=t;var e=this._horizontalBar,i=this._verticalBar;e.backgroundImage=t,i.backgroundImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalBarImage",{get:function(){return this._horizontalBarBackgroundImage},set:function(t){this._horizontalBarBackgroundImage,this._horizontalBarBackgroundImage=t,this._horizontalBar.backgroundImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBarImage",{get:function(){return this._verticalBarBackgroundImage},set:function(t){this._verticalBarBackgroundImage,this._verticalBarBackgroundImage=t,this._verticalBar.backgroundImage=t},enumerable:!0,configurable:!0}),e.prototype._setWindowPosition=function(){var t=this.host.idealRatio,e=this._window._currentMeasure.width,i=this._window._currentMeasure.height,r=this._clientWidth-e,n=this._clientHeight-i,o=this._horizontalBar.value/t*r+"px",s=this._verticalBar.value/t*n+"px";o!==this._window.left&&(this._window.left=o,this.freezeControls||(this._rebuildLayout=!0)),s!==this._window.top&&(this._window.top=s,this.freezeControls||(this._rebuildLayout=!0))},e.prototype._updateScroller=function(){var t=this._window._currentMeasure.width,e=this._window._currentMeasure.height;this._horizontalBar.isVisible&&t<=this._clientWidth&&!this.forceHorizontalBar?(this._grid.setRowDefinition(1,0,!0),this._horizontalBar.isVisible=!1,this._horizontalBar.value=0,this._rebuildLayout=!0):!this._horizontalBar.isVisible&&(t>this._clientWidth||this.forceHorizontalBar)&&(this._grid.setRowDefinition(1,this._barSize,!0),this._horizontalBar.isVisible=!0,this._rebuildLayout=!0),this._verticalBar.isVisible&&e<=this._clientHeight&&!this.forceVerticalBar?(this._grid.setColumnDefinition(1,0,!0),this._verticalBar.isVisible=!1,this._verticalBar.value=0,this._rebuildLayout=!0):!this._verticalBar.isVisible&&(e>this._clientHeight||this.forceVerticalBar)&&(this._grid.setColumnDefinition(1,this._barSize,!0),this._verticalBar.isVisible=!0,this._rebuildLayout=!0),this._buildClientSizes();var i=this.host.idealRatio;this._horizontalBar.thumbWidth=.9*this._thumbLength*(this._clientWidth/i)+"px",this._verticalBar.thumbWidth=.9*this._thumbLength*(this._clientHeight/i)+"px"},e.prototype._link=function(e){t.prototype._link.call(this,e),this._attachWheel()},e.prototype._addBar=function(t,e,i,r){var n=this;t.paddingLeft=0,t.width="100%",t.height="100%",t.barOffset=0,t.value=0,t.maximum=1,t.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,t.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,t.isVertical=i,t.rotation=r,t.isVisible=!1,e.addControl(t),t.onValueChangedObservable.add(function(t){n._setWindowPosition()})},e.prototype._attachWheel=function(){var t=this;this._host&&!this._onWheelObserver&&(this._onWheelObserver=this.onWheelObservable.add(function(e){t._pointerIsOver&&(1==t._verticalBar.isVisible&&(e.y<0&&t._verticalBar.value>0?t._verticalBar.value-=t._wheelPrecision:e.y>0&&t._verticalBar.value<t._verticalBar.maximum&&(t._verticalBar.value+=t._wheelPrecision)),1==t._horizontalBar.isVisible&&(e.x<0&&t._horizontalBar.value<t._horizontalBar.maximum?t._horizontalBar.value+=t._wheelPrecision:e.x>0&&t._horizontalBar.value>0&&(t._horizontalBar.value-=t._wheelPrecision)))}))},e.prototype._renderHighlightSpecific=function(e){this.isHighlighted&&(t.prototype._renderHighlightSpecific.call(this,e),this._grid._renderHighlightSpecific(e),e.restore())},e.prototype.dispose=function(){this.onWheelObservable.remove(this._onWheelObserver),this._onWheelObserver=null,t.prototype.dispose.call(this)},e}(m);s._TypeStore.RegisteredTypes["BABYLON.GUI.ScrollViewer"]=z;var G=function(){},X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onKeyPressObservable=new s.Observable,e.defaultButtonWidth="40px",e.defaultButtonHeight="40px",e.defaultButtonPaddingLeft="2px",e.defaultButtonPaddingRight="2px",e.defaultButtonPaddingTop="2px",e.defaultButtonPaddingBottom="2px",e.defaultButtonColor="#DDD",e.defaultButtonBackground="#070707",e.shiftButtonColor="#7799FF",e.selectedShiftThickness=1,e.shiftState=0,e._currentlyConnectedInputText=null,e._connectedInputTexts=[],e._onKeyPressObserver=null,e}return n(e,t),e.prototype._getTypeName=function(){return"VirtualKeyboard"},e.prototype._createKey=function(t,e){var i=this,r=O.CreateSimpleButton(t,t);return r.width=e&&e.width?e.width:this.defaultButtonWidth,r.height=e&&e.height?e.height:this.defaultButtonHeight,r.color=e&&e.color?e.color:this.defaultButtonColor,r.background=e&&e.background?e.background:this.defaultButtonBackground,r.paddingLeft=e&&e.paddingLeft?e.paddingLeft:this.defaultButtonPaddingLeft,r.paddingRight=e&&e.paddingRight?e.paddingRight:this.defaultButtonPaddingRight,r.paddingTop=e&&e.paddingTop?e.paddingTop:this.defaultButtonPaddingTop,r.paddingBottom=e&&e.paddingBottom?e.paddingBottom:this.defaultButtonPaddingBottom,r.thickness=0,r.isFocusInvisible=!0,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.onPointerUpObservable.add(function(){i.onKeyPressObservable.notifyObservers(t)}),r},e.prototype.addKeysRow=function(t,e){var i=new C;i.isVertical=!1,i.isFocusInvisible=!0;for(var r=null,n=0;n<t.length;n++){var o=null;e&&e.length===t.length&&(o=e[n]);var s=this._createKey(t[n],o);(!r||s.heightInPixels>r.heightInPixels)&&(r=s),i.addControl(s)}i.height=r?r.height:this.defaultButtonHeight,this.addControl(i)},e.prototype.applyShiftState=function(t){if(this.children)for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i&&i.children)for(var r=i,n=0;n<r.children.length;n++){var o=r.children[n];if(o&&o.children[0]){var s=o.children[0];"⇧"===s.text&&(o.color=t?this.shiftButtonColor:this.defaultButtonColor,o.thickness=t>1?this.selectedShiftThickness:0),s.text=t>0?s.text.toUpperCase():s.text.toLowerCase()}}}},Object.defineProperty(e.prototype,"connectedInputText",{get:function(){return this._currentlyConnectedInputText},enumerable:!0,configurable:!0}),e.prototype.connect=function(t){var e=this;if(!this._connectedInputTexts.some(function(e){return e.input===t})){null===this._onKeyPressObserver&&(this._onKeyPressObserver=this.onKeyPressObservable.add(function(t){if(e._currentlyConnectedInputText){switch(e._currentlyConnectedInputText._host.focusedControl=e._currentlyConnectedInputText,t){case"⇧":return e.shiftState++,e.shiftState>2&&(e.shiftState=0),void e.applyShiftState(e.shiftState);case"←":return void e._currentlyConnectedInputText.processKey(8);case"↵":return void e._currentlyConnectedInputText.processKey(13)}e._currentlyConnectedInputText.processKey(-1,e.shiftState?t.toUpperCase():t),1===e.shiftState&&(e.shiftState=0,e.applyShiftState(e.shiftState))}})),this.isVisible=!1,this._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=this;var i=t.onFocusObservable.add(function(){e._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=e,e.isVisible=!0}),r=t.onBlurObservable.add(function(){t._connectedVirtualKeyboard=null,e._currentlyConnectedInputText=null,e.isVisible=!1});this._connectedInputTexts.push({input:t,onBlurObserver:r,onFocusObserver:i})}},e.prototype.disconnect=function(t){var e=this;if(t){var i=this._connectedInputTexts.filter(function(e){return e.input===t});1===i.length&&(this._removeConnectedInputObservables(i[0]),this._connectedInputTexts=this._connectedInputTexts.filter(function(e){return e.input!==t}),this._currentlyConnectedInputText===t&&(this._currentlyConnectedInputText=null))}else this._connectedInputTexts.forEach(function(t){e._removeConnectedInputObservables(t)}),this._connectedInputTexts=[];0===this._connectedInputTexts.length&&(this._currentlyConnectedInputText=null,this.onKeyPressObservable.remove(this._onKeyPressObserver),this._onKeyPressObserver=null)},e.prototype._removeConnectedInputObservables=function(t){t.input._connectedVirtualKeyboard=null,t.input.onFocusObservable.remove(t.onFocusObserver),t.input.onBlurObservable.remove(t.onBlurObserver)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disconnect()},e.CreateDefaultLayout=function(t){var i=new e(t);return i.addKeysRow(["1","2","3","4","5","6","7","8","9","0","←"]),i.addKeysRow(["q","w","e","r","t","y","u","i","o","p"]),i.addKeysRow(["a","s","d","f","g","h","j","k","l",";","'","↵"]),i.addKeysRow(["⇧","z","x","c","v","b","n","m",",",".","/"]),i.addKeysRow([" "],[{width:"200px"}]),i},e}(C);s._TypeStore.RegisteredTypes["BABYLON.GUI.VirtualKeyboard"]=X;var Y=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._cellWidth=20,i._cellHeight=20,i._minorLineTickness=1,i._minorLineColor="DarkGray",i._majorLineTickness=2,i._majorLineColor="White",i._majorLineFrequency=5,i._background="Black",i._displayMajorLines=!0,i._displayMinorLines=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayMinorLines",{get:function(){return this._displayMinorLines},set:function(t){this._displayMinorLines!==t&&(this._displayMinorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMajorLines",{get:function(){return this._displayMajorLines},set:function(t){this._displayMajorLines!==t&&(this._displayMajorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){this._cellWidth=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(t){this._cellHeight=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorLineTickness",{get:function(){return this._minorLineTickness},set:function(t){this._minorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorLineColor",{get:function(){return this._minorLineColor},set:function(t){this._minorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineTickness",{get:function(){return this._majorLineTickness},set:function(t){this._majorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineColor",{get:function(){return this._majorLineColor},set:function(t){this._majorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineFrequency",{get:function(){return this._majorLineFrequency},set:function(t){this._majorLineFrequency=t,this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._draw=function(t,e){if(t.save(),this._applyStates(t),this._isEnabled){this._background&&(t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));var i=this._currentMeasure.width/this._cellWidth,r=this._currentMeasure.height/this._cellHeight,n=this._currentMeasure.left+this._currentMeasure.width/2,o=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){t.strokeStyle=this._minorLineColor,t.lineWidth=this._minorLineTickness;for(var s=-i/2;s<i/2;s++){var a=n+s*this.cellWidth;t.beginPath(),t.moveTo(a,this._currentMeasure.top),t.lineTo(a,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(var h=-r/2;h<r/2;h++){var l=o+h*this.cellHeight;t.beginPath(),t.moveTo(this._currentMeasure.left,l),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,l),t.stroke()}}if(this._displayMajorLines){t.strokeStyle=this._majorLineColor,t.lineWidth=this._majorLineTickness;for(s=-i/2+this._majorLineFrequency;s<i/2;s+=this._majorLineFrequency){a=n+s*this.cellWidth;t.beginPath(),t.moveTo(a,this._currentMeasure.top),t.lineTo(a,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(h=-r/2+this._majorLineFrequency;h<r/2;h+=this._majorLineFrequency){l=o+h*this.cellHeight;t.moveTo(this._currentMeasure.left,l),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,l),t.closePath(),t.stroke()}}}t.restore()},e.prototype._getTypeName=function(){return"DisplayGrid"},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.DisplayGrid"]=Y;var U=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._tempMeasure=new _(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,"displayThumb",{get:function(){return this._displayThumb&&null!=this.thumbImage},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(t){var e=this;this._backgroundImage!==t&&(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueBarImage",{get:function(){return this._valueBarImage},set:function(t){var e=this;this._valueBarImage!==t&&(this._valueBarImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._thumbImage},set:function(t){var e=this;this._thumbImage!==t&&(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ImageBasedSlider"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var i=this._getThumbPosition(),r=this._renderLeft,n=this._renderTop,o=this._renderWidth,s=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(r,n,o,s),this.isThumbClamped&&this.displayThumb&&(this.isVertical?this._tempMeasure.height+=this._effectiveThumbThickness:this._tempMeasure.width+=this._effectiveThumbThickness),this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure),this._backgroundImage._draw(t)),this._valueBarImage&&(this.isVertical?this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(r,n+i,o,s-i+this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(r,n+i,o,s-i):this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(r,n,i+this._effectiveThumbThickness/2,s):this._tempMeasure.copyFromFloats(r,n,i,s),this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure),this._valueBarImage._draw(t)),this.displayThumb&&(this.isVertical?this._tempMeasure.copyFromFloats(r-this._effectiveBarOffset,this._currentMeasure.top+i,this._currentMeasure.width,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+i,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},e}(L);s._TypeStore.RegisteredTypes["BABYLON.GUI.ImageBasedSlider"]=U;p.AddHeader=function(t,e,i,r){var n=new C("panel"),o=!r||r.isHorizontal,s=!r||r.controlFirst;n.isVertical=!o;var a=new y("header");return a.text=e,a.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o?a.width=i:a.height=i,s?(n.addControl(t),n.addControl(a),a.paddingLeft="5px"):(n.addControl(a),n.addControl(t),a.paddingRight="5px"),a.shadowBlur=t.shadowBlur,a.shadowColor=t.shadowColor,a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,n};var q=function(){function t(t){this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this.onChangedObservable=new s.Observable,this._host=t}return Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&this.onChangedObservable.notifyObservers(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.onChangedObservable.clear()},t}(),K=function(t){function e(e,i,r,n,o,a){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=s.Texture.NEAREST_SAMPLINGMODE);var h=t.call(this,e,{width:i,height:r},n,o,a,s.Constants.TEXTUREFORMAT_RGBA)||this;return h._isDirty=!1,h._rootContainer=new g("root"),h._lastControlOver={},h._lastControlDown={},h._capturingControl={},h._linkedControls=new Array,h._isFullscreen=!1,h._fullscreenViewport=new s.Viewport(0,0,1,1),h._idealWidth=0,h._idealHeight=0,h._useSmallestIdeal=!1,h._renderAtIdealSize=!1,h._blockNextFocusCheck=!1,h._renderScale=1,h._cursorChanged=!1,h._defaultMousePointerId=0,h._numLayoutCalls=0,h._numRenderCalls=0,h._clipboardData="",h.onClipboardObservable=new s.Observable,h.onControlPickedObservable=new s.Observable,h.onBeginLayoutObservable=new s.Observable,h.onEndLayoutObservable=new s.Observable,h.onBeginRenderObservable=new s.Observable,h.onEndRenderObservable=new s.Observable,h.premulAlpha=!1,h._useInvalidateRectOptimization=!0,h._invalidatedRectangle=null,h._clearMeasure=new _(0,0,0,0),h.onClipboardCopy=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.COPY,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},h.onClipboardCut=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.CUT,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},h.onClipboardPaste=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.PASTE,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},(n=h.getScene())&&h._texture?(h._rootElement=n.getEngine().getInputElement(),h._renderObserver=n.onBeforeCameraRenderObservable.add(function(t){return h._checkUpdate(t)}),h._preKeyboardObserver=n.onPreKeyboardObservable.add(function(t){h._focusedControl&&(t.type===s.KeyboardEventTypes.KEYDOWN&&h._focusedControl.processKeyboard(t.event),t.skipOnPointerObservable=!0)}),h._rootContainer._link(h),h.hasAlpha=!0,i&&r||(h._resizeObserver=n.getEngine().onResizeObservable.add(function(){return h._onResize()}),h._onResize()),h._texture.isReady=!0,h):h}return n(e,t),Object.defineProperty(e.prototype,"numLayoutCalls",{get:function(){return this._numLayoutCalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numRenderCalls",{get:function(){return this._numRenderCalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderScale",{get:function(){return this._renderScale},set:function(t){t!==this._renderScale&&(this._renderScale=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this.markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealWidth",{get:function(){return this._idealWidth},set:function(t){this._idealWidth!==t&&(this._idealWidth=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealHeight",{get:function(){return this._idealHeight},set:function(t){this._idealHeight!==t&&(this._idealHeight=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useSmallestIdeal",{get:function(){return this._useSmallestIdeal},set:function(t){this._useSmallestIdeal!==t&&(this._useSmallestIdeal=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderAtIdealSize",{get:function(){return this._renderAtIdealSize},set:function(t){this._renderAtIdealSize!==t&&(this._renderAtIdealSize=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealRatio",{get:function(){var t=0,e=0;return this._idealWidth&&(t=this.getSize().width/this._idealWidth),this._idealHeight&&(e=this.getSize().height/this._idealHeight),this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?t:e:this._idealWidth?t:this._idealHeight?e:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layerToDispose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),e.prototype.getChildren=function(){return[this._rootContainer]},e.prototype.getDescendants=function(t,e){return this._rootContainer.getDescendants(t,e)},Object.defineProperty(e.prototype,"focusedControl",{get:function(){return this._focusedControl},set:function(t){this._focusedControl!=t&&(this._focusedControl&&this._focusedControl.onBlur(),t&&t.onFocus(),this._focusedControl=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isForeground",{get:function(){return!this.layer||!this.layer.isBackground},set:function(t){this.layer&&this.layer.isBackground!==!t&&(this.layer.isBackground=!t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipboardData",{get:function(){return this._clipboardData},set:function(t){this._clipboardData=t},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"AdvancedDynamicTexture"},e.prototype.executeOnAllControls=function(t,e){e||(e=this._rootContainer),t(e);for(var i=0,r=e.children;i<r.length;i++){var n=r[i];n.children?this.executeOnAllControls(t,n):t(n)}},Object.defineProperty(e.prototype,"useInvalidateRectOptimization",{get:function(){return this._useInvalidateRectOptimization},set:function(t){this._useInvalidateRectOptimization=t},enumerable:!0,configurable:!0}),e.prototype.invalidateRect=function(t,e,i,r){if(this._useInvalidateRectOptimization)if(this._invalidatedRectangle){var n=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,i)),o=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,r));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,t)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,e)),this._invalidatedRectangle.width=n-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=o-this._invalidatedRectangle.top+1}else this._invalidatedRectangle=new _(t,e,i-t+1,r-e+1)},e.prototype.markAsDirty=function(){this._isDirty=!0},e.prototype.createStyle=function(){return new q(this)},e.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},e.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},e.prototype.dispose=function(){var e=this.getScene();e&&(this._rootElement=null,e.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&e.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&e.onPrePointerObservable.remove(this._pointerMoveObserver),this._pointerObserver&&e.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&e.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&e.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),t.prototype.dispose.call(this))},e.prototype._onResize=function(){var t=this.getScene();if(t){var e=t.getEngine(),i=this.getSize(),r=e.getRenderWidth()*this._renderScale,n=e.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(n=n*this._idealWidth/r,r=this._idealWidth):this._idealHeight&&(r=r*this._idealHeight/n,n=this._idealHeight)),i.width===r&&i.height===n||(this.scaleTo(r,n),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,i.width-1,i.height-1)}},e.prototype._getGlobalViewport=function(t){var e=t.getEngine();return this._fullscreenViewport.toGlobal(e.getRenderWidth(),e.getRenderHeight())},e.prototype.getProjectedPosition=function(t,e){var i=this.getScene();if(!i)return s.Vector2.Zero();var r=this._getGlobalViewport(i),n=s.Vector3.Project(t,e,i.getTransformMatrix(),r);return n.scaleInPlace(this.renderScale),new s.Vector2(n.x,n.y)},e.prototype._checkUpdate=function(t){if(!this._layerToDispose||0!=(t.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){var e=this.getScene();if(!e)return;for(var i=this._getGlobalViewport(e),r=0,n=this._linkedControls;r<n.length;r++){var o=n[r];if(o.isVisible){var a=o._linkedMesh;if(a&&!a.isDisposed()){var h=a.getBoundingInfo?a.getBoundingInfo().boundingSphere.center:s.Vector3.ZeroReadOnly,l=s.Vector3.Project(h,a.getWorldMatrix(),e.getTransformMatrix(),i);l.z<0||l.z>1?o.notRenderable=!0:(o.notRenderable=!1,l.scaleInPlace(this.renderScale),o._moveToProjectedPosition(l))}else s.Tools.SetImmediate(function(){o.linkWithMesh(null)})}}}(this._isDirty||this._rootContainer.isDirty)&&(this._isDirty=!1,this._render(),this.update(!0,this.premulAlpha))}},e.prototype._render=function(){var t=this.getSize(),e=t.width,i=t.height,r=this.getContext();r.font="18px Arial",r.strokeStyle="white",this.onBeginLayoutObservable.notifyObservers(this);var n=new _(0,0,e,i);this._numLayoutCalls=0,this._rootContainer._layout(n,r),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,e,i),r.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(r.save(),r.fillStyle=this._background,r.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),r.restore()),this.onBeginRenderObservable.notifyObservers(this),this._numRenderCalls=0,this._rootContainer._render(r,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null},e.prototype._changeCursor=function(t){this._rootElement&&(this._rootElement.style.cursor=t,this._cursorChanged=!0)},e.prototype._registerLastControlDown=function(t,e){this._lastControlDown[e]=t,this.onControlPickedObservable.notifyObservers(t)},e.prototype._doPicking=function(t,e,i,r,n,o,a){var h=this.getScene();if(h){var l=h.getEngine(),u=this.getSize();if(this._isFullscreen){var c=(h.cameraToUseForPointers||h.activeCamera).viewport;t*=u.width/(l.getRenderWidth()*c.width),e*=u.height/(l.getRenderHeight()*c.height)}this._capturingControl[r]?this._capturingControl[r]._processObservables(i,t,e,r,n):(this._cursorChanged=!1,this._rootContainer._processPicking(t,e,i,r,n,o,a)||(this._changeCursor(""),i===s.PointerEventTypes.POINTERMOVE&&this._lastControlOver[r]&&(this._lastControlOver[r]._onPointerOut(this._lastControlOver[r]),delete this._lastControlOver[r])),this._cursorChanged||this._changeCursor(""),this._manageFocus())}},e.prototype._cleanControlAfterRemovalFromList=function(t,e){for(var i in t){if(t.hasOwnProperty(i))t[i]===e&&delete t[i]}},e.prototype._cleanControlAfterRemoval=function(t){this._cleanControlAfterRemovalFromList(this._lastControlDown,t),this._cleanControlAfterRemovalFromList(this._lastControlOver,t)},e.prototype.attach=function(){var t=this,e=this.getScene();if(e){var i=new s.Viewport(0,0,0,0);this._pointerMoveObserver=e.onPrePointerObservable.add(function(r,n){if(!e.isPointerCaptured(r.event.pointerId)&&(r.type===s.PointerEventTypes.POINTERMOVE||r.type===s.PointerEventTypes.POINTERUP||r.type===s.PointerEventTypes.POINTERDOWN||r.type===s.PointerEventTypes.POINTERWHEEL)&&e){r.type===s.PointerEventTypes.POINTERMOVE&&r.event.pointerId&&(t._defaultMousePointerId=r.event.pointerId);var o=e.cameraToUseForPointers||e.activeCamera,a=e.getEngine();o?o.viewport.toGlobalToRef(a.getRenderWidth(),a.getRenderHeight(),i):(i.x=0,i.y=0,i.width=a.getRenderWidth(),i.height=a.getRenderHeight());var h=e.pointerX/a.getHardwareScalingLevel()-i.x,l=e.pointerY/a.getHardwareScalingLevel()-(a.getRenderHeight()-i.y-i.height);t._shouldBlockPointer=!1;var u=r.event.pointerId||t._defaultMousePointerId;t._doPicking(h,l,r.type,u,r.event.button,r.event.deltaX,r.event.deltaY),t._shouldBlockPointer&&(r.skipOnPointerObservable=t._shouldBlockPointer)}}),this._attachToOnPointerOut(e)}},e.prototype.registerClipboardEvents=function(){self.addEventListener("copy",this.onClipboardCopy,!1),self.addEventListener("cut",this.onClipboardCut,!1),self.addEventListener("paste",this.onClipboardPaste,!1)},e.prototype.unRegisterClipboardEvents=function(){self.removeEventListener("copy",this.onClipboardCopy),self.removeEventListener("cut",this.onClipboardCut),self.removeEventListener("paste",this.onClipboardPaste)},e.prototype.attachToMesh=function(t,e){var i=this;void 0===e&&(e=!0);var r=this.getScene();r&&(this._pointerObserver=r.onPointerObservable.add(function(e,r){if(e.type===s.PointerEventTypes.POINTERMOVE||e.type===s.PointerEventTypes.POINTERUP||e.type===s.PointerEventTypes.POINTERDOWN){var n=e.event.pointerId||i._defaultMousePointerId;if(e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh===t){var o=e.pickInfo.getTextureCoordinates();if(o){var a=i.getSize();i._doPicking(o.x*a.width,(1-o.y)*a.height,e.type,n,e.event.button)}}else if(e.type===s.PointerEventTypes.POINTERUP){if(i._lastControlDown[n]&&i._lastControlDown[n]._forcePointerUp(n),delete i._lastControlDown[n],i.focusedControl){var h=i.focusedControl.keepsFocusWith(),l=!0;if(h)for(var u=0,c=h;u<c.length;u++){var _=c[u];if(i!==_._host){var d=_._host;if(d._lastControlOver[n]&&d._lastControlOver[n].isAscendant(_)){l=!1;break}}}l&&(i.focusedControl=null)}}else e.type===s.PointerEventTypes.POINTERMOVE&&(i._lastControlOver[n]&&i._lastControlOver[n]._onPointerOut(i._lastControlOver[n],!0),delete i._lastControlOver[n])}}),t.enablePointerMoveEvents=e,this._attachToOnPointerOut(r))},e.prototype.moveFocusToControl=function(t){this.focusedControl=t,this._lastPickedControl=t,this._blockNextFocusCheck=!0},e.prototype._manageFocus=function(){if(this._blockNextFocusCheck)return this._blockNextFocusCheck=!1,void(this._lastPickedControl=this._focusedControl);if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}},e.prototype._attachToOnPointerOut=function(t){var e=this;this._canvasPointerOutObserver=t.getEngine().onCanvasPointerOutObservable.add(function(t){e._lastControlOver[t.pointerId]&&e._lastControlOver[t.pointerId]._onPointerOut(e._lastControlOver[t.pointerId]),delete e._lastControlOver[t.pointerId],e._lastControlDown[t.pointerId]&&e._lastControlDown[t.pointerId]!==e._capturingControl[t.pointerId]&&(e._lastControlDown[t.pointerId]._forcePointerUp(),delete e._lastControlDown[t.pointerId])})},e.CreateForMesh=function(t,i,r,n,o){void 0===i&&(i=1024),void 0===r&&(r=1024),void 0===n&&(n=!0),void 0===o&&(o=!1);var a=new e(t.name+" AdvancedDynamicTexture",i,r,t.getScene(),!0,s.Texture.TRILINEAR_SAMPLINGMODE),h=new s.StandardMaterial("AdvancedDynamicTextureMaterial",t.getScene());return h.backFaceCulling=!1,h.diffuseColor=s.Color3.Black(),h.specularColor=s.Color3.Black(),o?(h.diffuseTexture=a,h.emissiveTexture=a,a.hasAlpha=!0):(h.emissiveTexture=a,h.opacityTexture=a),t.material=h,a.attachToMesh(t,n),a},e.CreateFullscreenUI=function(t,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===n&&(n=s.Texture.BILINEAR_SAMPLINGMODE);var o=new e(t,0,0,r,!1,n),a=new s.Layer(t+"_layer",null,r,!i);return a.texture=o,o._layerToDispose=a,o._isFullscreen=!0,o.attach(),o},e}(s.DynamicTexture),Z=function(){function t(t){this.texture=t,this._captureRenderTime=!1,this._renderTime=new s.PerfCounter,this._captureLayoutTime=!1,this._layoutTime=new s.PerfCounter,this._onBeginRenderObserver=null,this._onEndRenderObserver=null,this._onBeginLayoutObserver=null,this._onEndLayoutObserver=null}return Object.defineProperty(t.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutTimeCounter",{get:function(){return this._layoutTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(t){var e=this;t!==this._captureRenderTime&&(this._captureRenderTime=t,t?(this._onBeginRenderObserver=this.texture.onBeginRenderObservable.add(function(){e._renderTime.beginMonitoring()}),this._onEndRenderObserver=this.texture.onEndRenderObservable.add(function(){e._renderTime.endMonitoring(!0)})):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"captureLayoutTime",{get:function(){return this._captureLayoutTime},set:function(t){var e=this;t!==this._captureLayoutTime&&(this._captureLayoutTime=t,t?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add(function(){e._layoutTime.beginMonitoring()}),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add(function(){e._layoutTime.endMonitoring(!0)})):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null,this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null,this.texture=null},t}(),J=function(){function t(t){void 0===t&&(t=null),this._nodes={},this._nodeTypes={element:1,attribute:2,text:3},this._isLoaded=!1,this._objectAttributes={textHorizontalAlignment:1,textVerticalAlignment:2,horizontalAlignment:3,verticalAlignment:4,stretch:5},t&&(this._parentClass=t)}return t.prototype._getChainElement=function(t){var e=window;this._parentClass&&(e=this._parentClass);var i=t;i=i.split(".");for(var r=0;r<i.length;r++)e=e[i[r]];return e},t.prototype._getClassAttribute=function(t){var e=t.split(".");return s._TypeStore.GetClass("BABYLON.GUI."+e[0])[e[1]]},t.prototype._createGuiElement=function(t,e,i){void 0===i&&(i=!0);try{var r=new(s._TypeStore.GetClass("BABYLON.GUI."+t.nodeName));e&&i&&e.addControl(r);for(var n=0;n<t.attributes.length;n++)if(!t.attributes[n].name.toLowerCase().includes("datasource"))if(t.attributes[n].name.toLowerCase().includes("observable")){var o=this._getChainElement(t.attributes[n].value);r[t.attributes[n].name].add(o)}else if("linkWithMesh"==t.attributes[n].name)this._parentClass?r.linkWithMesh(this._parentClass[t.attributes[n].value]):r.linkWithMesh(window[t.attributes[n].value]);else if(t.attributes[n].value.startsWith("{{")&&t.attributes[n].value.endsWith("}}")){o=this._getChainElement(t.attributes[n].value.substring(2,t.attributes[n].value.length-2));r[t.attributes[n].name]=o}else this._objectAttributes[t.attributes[n].name]?r[t.attributes[n].name]=this._getClassAttribute(t.attributes[n].value):"true"==t.attributes[n].value||"false"==t.attributes[n].value?r[t.attributes[n].name]="true"==t.attributes[n].value:r[t.attributes[n].name]=isNaN(Number(t.attributes[n].value))?t.attributes[n].value:Number(t.attributes[n].value);if(!t.attributes.getNamedItem("id"))return this._nodes[t.nodeName+Object.keys(this._nodes).length+"_gen"]=r,r;var a=t.attributes.getNamedItem("id").value;if(a.startsWith("{{")&&a.endsWith("}}")&&(a=this._getChainElement(a.substring(2,a.length-2))),this._nodes[a])throw"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute";return this._nodes[a]=r,r}catch(e){throw"XmlLoader Exception : Error parsing Control "+t.nodeName+","+e+"."}},t.prototype._parseGrid=function(t,e,i){for(var r,n,o,s,a,h=t.children,l=!1,u=-1,c=-1,_=0,d=0;d<h.length;d++)if(h[d].nodeType==this._nodeTypes.element){if("Row"!=h[d].nodeName)throw"XmlLoader Exception : Expecting Row node, received "+h[d].nodeName;if(u+=1,o=h[d].children,!h[d].attributes.getNamedItem("height"))throw"XmlLoader Exception : Height must be defined for grid rows";n=Number(h[d].attributes.getNamedItem("height").nodeValue),l=!!h[d].attributes.getNamedItem("isPixel")&&JSON.parse(h[d].attributes.getNamedItem("isPixel").nodeValue),e.addRowDefinition(n,l);for(var f=0;f<o.length;f++)if(o[f].nodeType==this._nodeTypes.element){if("Column"!=o[f].nodeName)throw"XmlLoader Exception : Expecting Column node, received "+o[f].nodeName;if(c+=1,u>0&&c>_)throw"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.";if(0==u){if(!o[f].attributes.getNamedItem("width"))throw"XmlLoader Exception : Width must be defined for all the grid columns in the first row";r=Number(o[f].attributes.getNamedItem("width").nodeValue),l=!!o[f].attributes.getNamedItem("isPixel")&&JSON.parse(o[f].attributes.getNamedItem("isPixel").nodeValue),e.addColumnDefinition(r,l)}s=o[f].children;for(var p=0;p<s.length;p++)s[p].nodeType==this._nodeTypes.element&&(a=this._createGuiElement(s[p],e,!1),e.addControl(a,u,c),s[p].firstChild&&this._parseXml(s[p].firstChild,a))}0==u&&(_=c),c=-1}t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._parseElement=function(t,e,i){t.firstChild&&this._parseXml(t.firstChild,e),t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._prepareSourceElement=function(t,e,i,r,n){this._parentClass?this._parentClass[i]=r[n]:window[i]=r[n],t.firstChild&&this._parseXml(t.firstChild,e,!0)},t.prototype._parseElementsFromSource=function(t,e,i){var r=t.attributes.getNamedItem("dataSource").value;if(!r.includes(" in "))throw"XmlLoader Exception : Malformed XML, Data Source must include an in";var n=!0,o=r.split(" in ");if(o.length<2)throw"XmlLoader Exception : Malformed XML, Data Source must an iterator and a source";var s=o[1];if(s.startsWith("{")&&s.endsWith("}")&&(n=!1),(!n||s.startsWith("[")&&s.endsWith("]"))&&(s=s.substring(1,s.length-1)),s=this._parentClass?this._parentClass[s]:window[s],n)for(var a=0;a<s.length;a++)this._prepareSourceElement(t,e,o[0],s,a);else for(var a in s)this._prepareSourceElement(t,e,o[0],s,a);t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._parseXml=function(t,e,i){if(void 0===i&&(i=!1),t.nodeType==this._nodeTypes.element){i&&t.setAttribute("id",e.id+(e._children.length+1));var r=this._createGuiElement(t,e);"Grid"==t.nodeName?this._parseGrid(t,r,e):t.attributes.getNamedItem("dataSource")?this._parseElementsFromSource(t,r,e):this._parseElement(t,r,e)}else t.nextSibling&&this._parseXml(t.nextSibling,e,i)},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.getNodeById=function(t){return this._nodes[t]},t.prototype.getNodes=function(){return this._nodes},t.prototype.loadLayout=function(t,e,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){if(!r.responseXML)throw"XmlLoader Exception : XML file is malformed or corrupted.";var t=r.responseXML.documentElement;this._parseXml(t.firstChild,e),this._isLoaded=!0,i&&i()}}.bind(this),r.open("GET",t,!0),r.send()},t}(),Q=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y,e.z)||this;return r.buttonIndex=i,r}return n(e,t),e}(s.Vector3),$=function(){function t(t){this.name=t,this._downCount=0,this._enterCount=-1,this._downPointerIds={},this._isVisible=!0,this.onPointerMoveObservable=new s.Observable,this.onPointerOutObservable=new s.Observable,this.onPointerDownObservable=new s.Observable,this.onPointerUpObservable=new s.Observable,this.onPointerClickObservable=new s.Observable,this.onPointerEnterObservable=new s.Observable,this._behaviors=new Array}return Object.defineProperty(t.prototype,"position",{get:function(){return this._node?this._node.position:s.Vector3.Zero()},set:function(t){this._node&&(this._node.position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaling",{get:function(){return this._node?this._node.scaling:new s.Vector3(1,1,1)},set:function(t){this._node&&(this._node.scaling=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),t.prototype.addBehavior=function(t){var e=this;if(-1!==this._behaviors.indexOf(t))return this;t.init();var i=this._host.scene;return i.isLoading?i.onDataLoadedObservable.addOnce(function(){t.attach(e)}):t.attach(this),this._behaviors.push(t),this},t.prototype.removeBehavior=function(t){var e=this._behaviors.indexOf(t);return-1===e?this:(this._behaviors[e].detach(),this._behaviors.splice(e,1),this)},t.prototype.getBehaviorByName=function(t){for(var e=0,i=this._behaviors;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){if(this._isVisible!==t){this._isVisible=t;var e=this.mesh;e&&e.setEnabled(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},t.prototype._getTypeName=function(){return"Control3D"},Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mesh",{get:function(){return this._node instanceof s.AbstractMesh?this._node:null},enumerable:!0,configurable:!0}),t.prototype.linkToTransformNode=function(t){return this._node&&(this._node.parent=t),this},t.prototype._prepareNode=function(t){if(!this._node){if(this._node=this._createNode(t),!this.node)return;this._node.metadata=this,this._node.position=this.position,this._node.scaling=this.scaling;var e=this.mesh;e&&(e.isPickable=!0,this._affectMaterial(e))}},t.prototype._createNode=function(t){return null},t.prototype._affectMaterial=function(t){t.material=null},t.prototype._onPointerMove=function(t,e){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)},t.prototype._onPointerEnter=function(t){return!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this),this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},t.prototype._onPointerOut=function(t){this._enterCount=0,this.onPointerOutObservable.notifyObservers(this,-1,t,this),this.pointerOutAnimation&&this.pointerOutAnimation()},t.prototype._onPointerDown=function(t,e,i,r){return 0!==this._downCount?(this._downCount++,!1):(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new Q(e,r),-1,t,this),this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){this._downCount--,delete this._downPointerIds[i],this._downCount<0?this._downCount=0:0==this._downCount&&(n&&(this._enterCount>0||-1===this._enterCount)&&this.onPointerClickObservable.notifyObservers(new Q(e,r),-1,t,this),this.onPointerUpObservable.notifyObservers(new Q(e,r),-1,t,this),this.pointerUpAnimation&&this.pointerUpAnimation())},t.prototype.forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,s.Vector3.Zero(),t,0,!0);else{for(var e in this._downPointerIds)this._onPointerUp(this,s.Vector3.Zero(),+e,0,!0);this._downCount>0&&(this._downCount=1,this._onPointerUp(this,s.Vector3.Zero(),0,0,!0))}},t.prototype._processObservables=function(t,e,i,r){if(t===s.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,e);var n=this._host._lastControlOver[i];return n&&n!==this&&n._onPointerOut(this),n!==this&&this._onPointerEnter(this),this._host._lastControlOver[i]=this,!0}return t===s.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,e,i,r),this._host._lastControlDown[i]=this,this._host._lastPickedControl=this,!0):t===s.PointerEventTypes.POINTERUP&&(this._host._lastControlDown[i]&&this._host._lastControlDown[i]._onPointerUp(this,e,i,r,!0),delete this._host._lastControlDown[i],!0)},t.prototype._disposeNode=function(){this._node&&(this._node.dispose(),this._node=null)},t.prototype.dispose=function(){this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._disposeNode();for(var t=0,e=this._behaviors;t<e.length;t++){e[t].detach()}},t}(),tt=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._getTypeName=function(){return"AbstractButton3D"},e.prototype._createNode=function(t){return new s.TransformNode("button"+this.name)},e}($),et=function(t){function e(e){var i=t.call(this,e)||this;return i._contentResolution=512,i._contentScaleRatio=2,i.pointerEnterAnimation=function(){i.mesh&&(i._currentMaterial.emissiveColor=s.Color3.Red())},i.pointerOutAnimation=function(){i._currentMaterial.emissiveColor=s.Color3.Black()},i.pointerDownAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(.95)},i.pointerUpAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(1/.95)},i}return n(e,t),Object.defineProperty(e.prototype,"contentResolution",{get:function(){return this._contentResolution},set:function(t){this._contentResolution!==t&&(this._contentResolution=t,this._resetContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentScaleRatio",{get:function(){return this._contentScaleRatio},set:function(t){this._contentScaleRatio!==t&&(this._contentScaleRatio=t,this._resetContent())},enumerable:!0,configurable:!0}),e.prototype._disposeFacadeTexture=function(){this._facadeTexture&&(this._facadeTexture.dispose(),this._facadeTexture=null)},e.prototype._resetContent=function(){this._disposeFacadeTexture(),this.content=this._content},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this._host&&this._host.utilityLayer&&(this._facadeTexture?this._facadeTexture.rootContainer.clearControls():(this._facadeTexture=new K("Facade",this._contentResolution,this._contentResolution,this._host.utilityLayer.utilityLayerScene,!0,s.Texture.TRILINEAR_SAMPLINGMODE),this._facadeTexture.rootContainer.scaleX=this._contentScaleRatio,this._facadeTexture.rootContainer.scaleY=this._contentScaleRatio,this._facadeTexture.premulAlpha=!0),this._facadeTexture.addControl(t),this._applyFacade(this._facadeTexture))},enumerable:!0,configurable:!0}),e.prototype._applyFacade=function(t){this._currentMaterial.emissiveTexture=t},e.prototype._getTypeName=function(){return"Button3D"},e.prototype._createNode=function(t){for(var e=new Array(6),i=0;i<6;i++)e[i]=new s.Vector4(0,0,0,0);return e[1]=new s.Vector4(0,0,1,1),s.BoxBuilder.CreateBox(this.name+"_rootMesh",{width:1,height:1,depth:.08,faceUV:e},t)},e.prototype._affectMaterial=function(t){var e=new s.StandardMaterial(this.name+"Material",t.getScene());e.specularColor=s.Color3.Black(),t.material=e,this._currentMaterial=e,this._resetContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeFacadeTexture(),this._currentMaterial&&this._currentMaterial.dispose()},e}(tt),it=function(t){function e(e){var i=t.call(this,e)||this;return i._blockLayout=!1,i._children=new Array,i}return n(e,t),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockLayout",{get:function(){return this._blockLayout},set:function(t){this._blockLayout!==t&&(this._blockLayout=t,this._blockLayout||this._arrangeChildren())},enumerable:!0,configurable:!0}),e.prototype.updateLayout=function(){return this._arrangeChildren(),this},e.prototype.containsControl=function(t){return-1!==this._children.indexOf(t)},e.prototype.addControl=function(t){return-1!==this._children.indexOf(t)?this:(t.parent=this,t._host=this._host,this._children.push(t),this._host.utilityLayer&&(t._prepareNode(this._host.utilityLayer.utilityLayerScene),t.node&&(t.node.parent=this.node),this.blockLayout||this._arrangeChildren()),this)},e.prototype._arrangeChildren=function(){},e.prototype._createNode=function(t){return new s.TransformNode("ContainerNode",t)},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null,t._disposeNode()),this},e.prototype._getTypeName=function(){return"Container3D"},e.prototype.dispose=function(){for(var e=0,i=this._children;e<i.length;e++){i[e].dispose()}this._children=[],t.prototype.dispose.call(this)},e.UNSET_ORIENTATION=0,e.FACEORIGIN_ORIENTATION=1,e.FACEORIGINREVERSED_ORIENTATION=2,e.FACEFORWARD_ORIENTATION=3,e.FACEFORWARDREVERSED_ORIENTATION=4,e}($),rt=function(t){function e(){var e=t.call(this)||this;return e._columns=10,e._rows=0,e._rowThenColum=!0,e._orientation=it.FACEORIGIN_ORIENTATION,e.margin=0,e}return n(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){var e=this;this._orientation!==t&&(this._orientation=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},set:function(t){var e=this;this._columns!==t&&(this._columns=t,this._rowThenColum=!0,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},set:function(t){var e=this;this._rows!==t&&(this._rows=t,this._rowThenColum=!1,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){this._cellWidth=0,this._cellHeight=0;for(var t=0,e=0,i=0,r=s.Matrix.Invert(this.node.computeWorldMatrix(!0)),n=0,o=this._children;n<o.length;n++){if((m=o[n]).mesh){i++,m.mesh.computeWorldMatrix(!0);var a=m.mesh.getHierarchyBoundingVectors(),h=s.TmpVectors.Vector3[0],l=s.TmpVectors.Vector3[1];a.max.subtractToRef(a.min,l),l.scaleInPlace(.5),s.Vector3.TransformNormalToRef(l,r,h),this._cellWidth=Math.max(this._cellWidth,2*h.x),this._cellHeight=Math.max(this._cellHeight,2*h.y)}}this._cellWidth+=2*this.margin,this._cellHeight+=2*this.margin,this._rowThenColum?(e=this._columns,t=Math.ceil(i/this._columns)):(t=this._rows,e=Math.ceil(i/this._rows));var u=.5*e*this._cellWidth,c=.5*t*this._cellHeight,_=[],d=0;if(this._rowThenColum)for(var f=0;f<t;f++)for(var p=0;p<e&&(_.push(new s.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));p++);else for(p=0;p<e;p++)for(f=0;f<t&&(_.push(new s.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));f++);d=0;for(var g=0,b=this._children;g<b.length;g++){var m;(m=b[g]).mesh&&(this._mapGridNode(m,_[d]),d++)}this._finalProcessing()},e.prototype._finalProcessing=function(){},e}(it),nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._cylindricalMapping(e);switch(t.position=r,this.orientation){case it.FACEORIGIN_ORIENTATION:i.lookAt(new s.Vector3(2*r.x,r.y,2*r.z));break;case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(-r.x,r.y,-r.z));break;case it.FACEFORWARD_ORIENTATION:break;case it.FACEFORWARDREVERSED_ORIENTATION:i.rotate(s.Axis.Y,Math.PI,s.Space.LOCAL)}}},e.prototype._cylindricalMapping=function(t){var e=new s.Vector3(0,t.y,this._radius),i=t.x/this._radius;return s.Matrix.RotationYawPitchRollToRef(i,0,0,s.TmpVectors.Matrix[0]),s.Vector3.TransformNormal(e,s.TmpVectors.Matrix[0])},e}(rt),ot="precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 world;\nuniform mat4 viewProjection;\nvarying vec2 vUV;\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float borderWidth;\nuniform vec3 scaleFactor;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\n#endif\nvoid main(void) {\nvUV=uv;\n#ifdef BORDER\nvec3 scale=scaleFactor;\nfloat minScale=min(min(scale.x,scale.y),scale.z);\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\nfloat areaYZ=scale.y*scale.z;\nfloat areaXZ=scale.x*scale.z;\nfloat areaXY=scale.x*scale.y;\nfloat scaledBorderWidth=borderWidth;\nif (abs(normal.x) == 1.0)\n{\nscale.x=scale.y;\nscale.y=scale.z;\nif (areaYZ>areaXZ && areaYZ>areaXY)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse if (abs(normal.y) == 1.0)\n{\nscale.x=scale.z;\nif (areaXZ>areaXY && areaXZ>areaYZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse\n{\nif (areaXY>areaYZ && areaXY>areaXZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\nif (scale.x>scale.y)\n{\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\nscaleInfo.y=1.0-scaledBorderWidth;\n}\nelse\n{\nscaleInfo.x=1.0-scaledBorderWidth;\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\n}\n#endif\nvec4 worldPos=world*vec4(position,1.0);\n#ifdef HOVERLIGHT\nworldPosition=worldPos.xyz;\n#endif\ngl_Position=viewProjection*worldPos;\n}\n";s.Effect.ShadersStore.fluentVertexShader=ot;var st="precision highp float;\nvarying vec2 vUV;\nuniform vec4 albedoColor;\n#ifdef INNERGLOW\nuniform vec4 innerGlowColor;\n#endif\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float edgeSmoothingValue;\nuniform float borderMinValue;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\nuniform vec3 hoverPosition;\nuniform vec4 hoverColor;\nuniform float hoverRadius;\n#endif\n#ifdef TEXTURE\nuniform sampler2D albedoSampler;\n#endif\nvoid main(void) {\nvec3 albedo=albedoColor.rgb;\nfloat alpha=albedoColor.a;\n#ifdef TEXTURE\nalbedo=texture2D(albedoSampler,vUV).rgb;\n#endif\n#ifdef HOVERLIGHT\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\n#else\nfloat pointToHover=1.0;\n#endif\n#ifdef BORDER\nfloat borderPower=10.0;\nfloat inverseBorderPower=1.0/borderPower;\nvec3 borderColor=albedo*borderPower;\nvec2 distanceToEdge;\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover);\nalbedo+=borderColor;\nalpha=max(alpha,borderValue);\n#endif\n#ifdef INNERGLOW\n\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\nuvGlow=uvGlow*uvGlow;\nuvGlow=uvGlow*uvGlow;\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y);\n#endif\ngl_FragColor=vec4(albedo,alpha);\n}";s.Effect.ShadersStore.fluentPixelShader=st;var at=function(t){function e(){var e=t.call(this)||this;return e.INNERGLOW=!1,e.BORDER=!1,e.HOVERLIGHT=!1,e.TEXTURE=!1,e.rebuild(),e}return n(e,t),e}(s.MaterialDefines),ht=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.innerGlowColorIntensity=.5,r.innerGlowColor=new s.Color3(1,1,1),r.alpha=1,r.albedoColor=new s.Color3(.3,.35,.4),r.renderBorders=!1,r.borderWidth=.5,r.edgeSmoothingValue=.02,r.borderMinValue=.1,r.renderHoverLight=!1,r.hoverRadius=1,r.hoverColor=new s.Color4(.3,.3,.3,1),r.hoverPosition=s.Vector3.Zero(),r}return n(e,t),e.prototype.needAlphaBlending=function(){return 1!==this.alpha},e.prototype.needAlphaTesting=function(){return!1},e.prototype.getAlphaTestTexture=function(){return null},e.prototype.isReadyForSubMesh=function(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e._materialDefines||(e._materialDefines=new at);var r=this.getScene(),n=e._materialDefines;if(!this.checkReadyOnEveryCall&&e.effect&&n._renderId===r.getRenderId())return!0;if(n._areTexturesDirty)if(n.INNERGLOW=this.innerGlowColorIntensity>0,n.BORDER=this.renderBorders,n.HOVERLIGHT=this.renderHoverLight,this._albedoTexture){if(!this._albedoTexture.isReadyOrNotBlocking())return!1;n.TEXTURE=!0}else n.TEXTURE=!1;var o=r.getEngine();if(n.isDirty){n.markAsProcessed(),r.resetCachedMaterial();var a=[s.VertexBuffer.PositionKind];a.push(s.VertexBuffer.NormalKind),a.push(s.VertexBuffer.UVKind);var h=["world","viewProjection","innerGlowColor","albedoColor","borderWidth","edgeSmoothingValue","scaleFactor","borderMinValue","hoverColor","hoverPosition","hoverRadius"],l=["albedoSampler"],u=new Array;s.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:h,uniformBuffersNames:u,samplers:l,defines:n,maxSimultaneousLights:4});var c=n.toString();e.setEffect(r.getEngine().createEffect("fluent",{attributes:a,uniformsNames:h,uniformBuffersNames:u,samplers:l,defines:c,fallbacks:null,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},o))}return!(!e.effect||!e.effect.isReady())&&(n._renderId=r.getRenderId(),e.effect._wasPreviouslyReady=!0,!0)},e.prototype.bindForSubMesh=function(t,e,i){var r=this.getScene(),n=i._materialDefines;if(n){var o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),this._mustRebind(r,o)&&(this._activeEffect.setColor4("albedoColor",this.albedoColor,this.alpha),n.INNERGLOW&&this._activeEffect.setColor4("innerGlowColor",this.innerGlowColor,this.innerGlowColorIntensity),n.BORDER&&(this._activeEffect.setFloat("borderWidth",this.borderWidth),this._activeEffect.setFloat("edgeSmoothingValue",this.edgeSmoothingValue),this._activeEffect.setFloat("borderMinValue",this.borderMinValue),e.getBoundingInfo().boundingBox.extendSize.multiplyToRef(e.scaling,s.TmpVectors.Vector3[0]),this._activeEffect.setVector3("scaleFactor",s.TmpVectors.Vector3[0])),n.HOVERLIGHT&&(this._activeEffect.setDirectColor4("hoverColor",this.hoverColor),this._activeEffect.setFloat("hoverRadius",this.hoverRadius),this._activeEffect.setVector3("hoverPosition",this.hoverPosition)),n.TEXTURE&&this._activeEffect.setTexture("albedoSampler",this._albedoTexture)),this._afterBind(e,this._activeEffect))}},e.prototype.getActiveTextures=function(){return t.prototype.getActiveTextures.call(this)},e.prototype.hasTexture=function(e){return!!t.prototype.hasTexture.call(this,e)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e)},e.prototype.clone=function(t){var i=this;return s.SerializationHelper.Clone(function(){return new e(t,i.getScene())},this)},e.prototype.serialize=function(){var t=s.SerializationHelper.Serialize(this);return t.customType="BABYLON.GUI.FluentMaterial",t},e.prototype.getClassName=function(){return"FluentMaterial"},e.Parse=function(t,i,r){return s.SerializationHelper.Parse(function(){return new e(t.name,i)},t,i,r)},o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"innerGlowColorIntensity",void 0),o([Object(s.serializeAsColor3)()],e.prototype,"innerGlowColor",void 0),o([Object(s.serialize)()],e.prototype,"alpha",void 0),o([Object(s.serializeAsColor3)()],e.prototype,"albedoColor",void 0),o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"renderBorders",void 0),o([Object(s.serialize)()],e.prototype,"borderWidth",void 0),o([Object(s.serialize)()],e.prototype,"edgeSmoothingValue",void 0),o([Object(s.serialize)()],e.prototype,"borderMinValue",void 0),o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"renderHoverLight",void 0),o([Object(s.serialize)()],e.prototype,"hoverRadius",void 0),o([Object(s.serializeAsColor4)()],e.prototype,"hoverColor",void 0),o([Object(s.serializeAsVector3)()],e.prototype,"hoverPosition",void 0),o([Object(s.serializeAsTexture)("albedoTexture")],e.prototype,"_albedoTexture",void 0),o([Object(s.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],e.prototype,"albedoTexture",void 0),e}(s.PushMaterial);s._TypeStore.RegisteredTypes["BABYLON.GUI.FluentMaterial"]=ht;var lt=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e)||this;return r._shareMaterials=!0,r._shareMaterials=i,r.pointerEnterAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!0)},r.pointerOutAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!1)},r}return n(e,t),e.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(e.prototype,"renderingGroupId",{get:function(){return this._backPlate.renderingGroupId},set:function(t){this._backPlate.renderingGroupId=t,this._textPlate.renderingGroupId=t,this._frontPlate.renderingGroupId=t,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null},set:function(t){var e=this;if(t){if(!this._tooltipFade){this._tooltipMesh=s.PlaneBuilder.CreatePlane("",{size:1},this._backPlate._scene);var i=s.PlaneBuilder.CreatePlane("",{size:1,sideOrientation:s.Mesh.DOUBLESIDE},this._backPlate._scene),r=new s.StandardMaterial("",this._backPlate._scene);r.diffuseColor=s.Color3.FromHexString("#212121"),i.material=r,i.isPickable=!1,this._tooltipMesh.addChild(i),i.position.z=.05,this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position.y=.7,this._tooltipMesh.position.z=-.15,this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=K.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new y,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new s.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=t)}else this._disposeTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(t){this._imageUrl!==t&&(this._imageUrl=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backMaterial",{get:function(){return this._backMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frontMaterial",{get:function(){return this._frontMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plateMaterial",{get:function(){return this._plateMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"HolographicButton"},e.prototype._rebuildContent=function(){this._disposeFacadeTexture();var t=new C;if(t.isVertical=!0,this._imageUrl){var e=new v;e.source=this._imageUrl,e.paddingTop="40px",e.height="180px",e.width="100px",e.paddingBottom="40px",t.addControl(e)}if(this._text){var i=new y;i.text=this._text,i.color="white",i.height="30px",i.fontSize=24,t.addControl(i)}this._frontPlate&&(this.content=t)},e.prototype._createNode=function(e){return this._backPlate=s.BoxBuilder.CreateBox(this.name+"BackMesh",{width:1,height:1,depth:.08},e),this._frontPlate=s.BoxBuilder.CreateBox(this.name+"FrontMesh",{width:1,height:1,depth:.08},e),this._frontPlate.parent=this._backPlate,this._frontPlate.position.z=-.08,this._frontPlate.isPickable=!1,this._frontPlate.setEnabled(!1),this._textPlate=t.prototype._createNode.call(this,e),this._textPlate.parent=this._backPlate,this._textPlate.position.z=-.08,this._textPlate.isPickable=!1,this._backPlate},e.prototype._applyFacade=function(t){this._plateMaterial.emissiveTexture=t,this._plateMaterial.opacityTexture=t},e.prototype._createBackMaterial=function(t){var e=this;this._backMaterial=new ht(this.name+"Back Material",t.getScene()),this._backMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add(function(t){t?(e._backMaterial.hoverPosition=t,e._backMaterial.hoverColor.a=1):e._backMaterial.hoverColor.a=0})},e.prototype._createFrontMaterial=function(t){this._frontMaterial=new ht(this.name+"Front Material",t.getScene()),this._frontMaterial.innerGlowColorIntensity=0,this._frontMaterial.alpha=.5,this._frontMaterial.renderBorders=!0},e.prototype._createPlateMaterial=function(t){this._plateMaterial=new s.StandardMaterial(this.name+"Plate Material",t.getScene()),this._plateMaterial.specularColor=s.Color3.Black()},e.prototype._affectMaterial=function(t){this._shareMaterials?(this._host._sharedMaterials.backFluentMaterial?this._backMaterial=this._host._sharedMaterials.backFluentMaterial:(this._createBackMaterial(t),this._host._sharedMaterials.backFluentMaterial=this._backMaterial),this._host._sharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._sharedMaterials.frontFluentMaterial:(this._createFrontMaterial(t),this._host._sharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(t),this._createFrontMaterial(t)),this._createPlateMaterial(t),this._backPlate.material=this._backMaterial,this._frontPlate.material=this._frontMaterial,this._textPlate.material=this._plateMaterial,this._rebuildContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeTooltip(),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},e}(et),ut=function(t){function e(e,i){var r=t.call(this,i)||this;return r._currentMesh=e,r.pointerEnterAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1.1)},r.pointerOutAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/1.1)},r.pointerDownAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(.95)},r.pointerUpAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/.95)},r}return n(e,t),e.prototype._getTypeName=function(){return"MeshButton3D"},e.prototype._createNode=function(t){var e=this;return this._currentMesh.getChildMeshes().forEach(function(t){t.metadata=e}),this._currentMesh},e.prototype._affectMaterial=function(t){},e}(et),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){t.position=e.clone();var r=s.TmpVectors.Vector3[0];switch(r.copyFrom(e),this.orientation){case it.FACEORIGIN_ORIENTATION:case it.FACEFORWARD_ORIENTATION:r.addInPlace(new s.Vector3(0,0,1)),i.lookAt(r);break;case it.FACEFORWARDREVERSED_ORIENTATION:case it.FACEORIGINREVERSED_ORIENTATION:r.addInPlace(new s.Vector3(0,0,-1)),i.lookAt(r)}}},e}(rt),_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._iteration=100,e}return n(e,t),Object.defineProperty(e.prototype,"iteration",{get:function(){return this._iteration},set:function(t){var e=this;this._iteration!==t&&(this._iteration=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh,r=this._scatterMapping(e);if(i){switch(this.orientation){case it.FACEORIGIN_ORIENTATION:case it.FACEFORWARD_ORIENTATION:i.lookAt(new s.Vector3(0,0,1));break;case it.FACEFORWARDREVERSED_ORIENTATION:case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(0,0,-1))}t.position=r}},e.prototype._scatterMapping=function(t){return t.x=(1-2*Math.random())*this._cellWidth,t.y=(1-2*Math.random())*this._cellHeight,t},e.prototype._finalProcessing=function(){for(var t=[],e=0,i=this._children;e<i.length;e++){var r=i[e];r.mesh&&t.push(r.mesh)}for(var n=0;n<this._iteration;n++){t.sort(function(t,e){var i=t.position.lengthSquared(),r=e.position.lengthSquared();return i<r?1:i>r?-1:0});for(var o=Math.pow(this.margin,2),a=Math.max(this._cellWidth,this._cellHeight),h=s.TmpVectors.Vector2[0],l=s.TmpVectors.Vector3[0],u=0;u<t.length-1;u++)for(var c=u+1;c<t.length;c++)if(u!=c){t[c].position.subtractToRef(t[u].position,l),h.x=l.x,h.y=l.y;var _=a,d=h.lengthSquared()-o;(d-=Math.min(d,o))<Math.pow(_,2)&&(h.normalize(),l.scaleInPlace(.5*(_-Math.sqrt(d))),t[c].position.addInPlace(l),t[u].position.subtractInPlace(l))}}},e}(rt),dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._sphericalMapping(e);switch(t.position=r,this.orientation){case it.FACEORIGIN_ORIENTATION:i.lookAt(new s.Vector3(2*r.x,2*r.y,2*r.z));break;case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(-r.x,-r.y,-r.z));break;case it.FACEFORWARD_ORIENTATION:break;case it.FACEFORWARDREVERSED_ORIENTATION:i.rotate(s.Axis.Y,Math.PI,s.Space.LOCAL)}}},e.prototype._sphericalMapping=function(t){var e=new s.Vector3(0,0,this._radius),i=t.y/this._radius,r=-t.x/this._radius;return s.Matrix.RotationYawPitchRollToRef(r,i,0,s.TmpVectors.Matrix[0]),s.Vector3.TransformNormal(e,s.TmpVectors.Matrix[0])},e}(rt),ft=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._isVertical=!1,i.margin=.1,i._isVertical=e,i}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){var e=this;this._isVertical!==t&&(this._isVertical=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){for(var t,e=0,i=0,r=0,n=[],o=s.Matrix.Invert(this.node.computeWorldMatrix(!0)),a=0,h=this._children;a<h.length;a++){if((f=h[a]).mesh){r++,f.mesh.computeWorldMatrix(!0),f.mesh.getWorldMatrix().multiplyToRef(o,s.TmpVectors.Matrix[0]);var l=f.mesh.getBoundingInfo().boundingBox,u=s.Vector3.TransformNormal(l.extendSize,s.TmpVectors.Matrix[0]);n.push(u),this._isVertical?i+=u.y:e+=u.x}}this._isVertical?i+=(r-1)*this.margin/2:e+=(r-1)*this.margin/2,t=this._isVertical?-i:-e;for(var c=0,_=0,d=this._children;_<d.length;_++){var f;if((f=d[_]).mesh){r--;u=n[c++];this._isVertical?(f.position.y=t+u.y,f.position.x=0,t+=2*u.y):(f.position.x=t+u.x,f.position.y=0,t+=2*u.x),t+=r>0?this.margin:0}}},e}(it),pt=function(){function t(t){var e=this;this._lastControlOver={},this._lastControlDown={},this.onPickedPointChangedObservable=new s.Observable,this._sharedMaterials={},this._scene=t||s.EngineStore.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){e._sceneDisposeObserver=null,e._utilityLayer=null,e.dispose()}),this._utilityLayer=new s.UtilityLayerRenderer(this._scene),this._utilityLayer.onlyCheckPointerDownEvents=!1,this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.mainSceneTrackerPredicate=function(t){return t&&t.metadata&&t.metadata._node},this._rootContainer=new it("RootContainer"),this._rootContainer._host=this;var i=this._utilityLayer.utilityLayerScene;this._pointerOutObserver=this._utilityLayer.onPointerOutObservable.add(function(t){e._handlePointerOut(t,!0)}),this._pointerObserver=i.onPointerObservable.add(function(t,i){e._doPicking(t)}),this._utilityLayer.utilityLayerScene.autoClear=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,new s.HemisphericLight("hemi",s.Vector3.Up(),this._utilityLayer.utilityLayerScene)}return Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"utilityLayer",{get:function(){return this._utilityLayer},enumerable:!0,configurable:!0}),t.prototype._handlePointerOut=function(t,e){var i=this._lastControlOver[t];i&&(i._onPointerOut(i),delete this._lastControlOver[t]),e&&this._lastControlDown[t]&&(this._lastControlDown[t].forcePointerUp(),delete this._lastControlDown[t]),this.onPickedPointChangedObservable.notifyObservers(null)},t.prototype._doPicking=function(t){if(!this._utilityLayer||!this._utilityLayer.shouldRender||!this._utilityLayer.utilityLayerScene.activeCamera)return!1;var e=t.event,i=e.pointerId||0,r=e.button,n=t.pickInfo;if(!n||!n.hit)return this._handlePointerOut(i,t.type===s.PointerEventTypes.POINTERUP),!1;var o=n.pickedMesh.metadata;return n.pickedPoint&&this.onPickedPointChangedObservable.notifyObservers(n.pickedPoint),o._processObservables(t.type,n.pickedPoint,i,r)||t.type===s.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[i]&&this._lastControlOver[i]._onPointerOut(this._lastControlOver[i]),delete this._lastControlOver[i]),t.type===s.PointerEventTypes.POINTERUP&&(this._lastControlDown[e.pointerId]&&(this._lastControlDown[e.pointerId].forcePointerUp(),delete this._lastControlDown[e.pointerId]),"touch"===e.pointerType&&this._handlePointerOut(i,!1)),!0},Object.defineProperty(t.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),t.prototype.containsControl=function(t){return this._rootContainer.containsControl(t)},t.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},t.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},t.prototype.dispose=function(){for(var t in this._rootContainer.dispose(),this._sharedMaterials)this._sharedMaterials.hasOwnProperty(t)&&this._sharedMaterials[t].dispose();this._sharedMaterials={},this._pointerOutObserver&&this._utilityLayer&&(this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver),this._pointerOutObserver=null),this.onPickedPointChangedObservable.clear();var e=this._utilityLayer?this._utilityLayer.utilityLayerScene:null;e&&this._pointerObserver&&(e.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=null),this._scene&&this._sceneDisposeObserver&&(this._scene.onDisposeObservable.remove(this._sceneDisposeObserver),this._sceneDisposeObserver=null),this._utilityLayer&&this._utilityLayer.dispose()},t}();i.d(e,"AdvancedDynamicTexture",function(){return K}),i.d(e,"AdvancedDynamicTextureInstrumentation",function(){return Z}),i.d(e,"Vector2WithInfo",function(){return d}),i.d(e,"Matrix2D",function(){return f}),i.d(e,"Measure",function(){return _}),i.d(e,"MultiLinePoint",function(){return A}),i.d(e,"Style",function(){return q}),i.d(e,"ValueAndUnit",function(){return a}),i.d(e,"XmlLoader",function(){return J}),i.d(e,"Button",function(){return O}),i.d(e,"Checkbox",function(){return w}),i.d(e,"ColorPicker",function(){return M}),i.d(e,"Container",function(){return g}),i.d(e,"Control",function(){return p}),i.d(e,"Ellipse",function(){return P}),i.d(e,"Grid",function(){return x}),i.d(e,"Image",function(){return v}),i.d(e,"InputText",function(){return T}),i.d(e,"InputPassword",function(){return k}),i.d(e,"Line",function(){return I}),i.d(e,"MultiLine",function(){return S}),i.d(e,"RadioButton",function(){return E}),i.d(e,"StackPanel",function(){return C}),i.d(e,"SelectorGroup",function(){return D}),i.d(e,"CheckboxGroup",function(){return B}),i.d(e,"RadioGroup",function(){return N}),i.d(e,"SliderGroup",function(){return V}),i.d(e,"SelectionPanel",function(){return H}),i.d(e,"ScrollViewer",function(){return z}),i.d(e,"TextWrapping",function(){return b}),i.d(e,"TextBlock",function(){return y}),i.d(e,"KeyPropertySet",function(){return G}),i.d(e,"VirtualKeyboard",function(){return X}),i.d(e,"Rectangle",function(){return m}),i.d(e,"DisplayGrid",function(){return Y}),i.d(e,"BaseSlider",function(){return L}),i.d(e,"Slider",function(){return R}),i.d(e,"ImageBasedSlider",function(){return U}),i.d(e,"ScrollBar",function(){return j}),i.d(e,"ImageScrollBar",function(){return W}),i.d(e,"name",function(){return"Statics"}),i.d(e,"GUI3DManager",function(){return pt}),i.d(e,"Vector3WithInfo",function(){return Q}),i.d(e,"AbstractButton3D",function(){return tt}),i.d(e,"Button3D",function(){return et}),i.d(e,"Container3D",function(){return it}),i.d(e,"Control3D",function(){return $}),i.d(e,"CylinderPanel",function(){return nt}),i.d(e,"HolographicButton",function(){return lt}),i.d(e,"MeshButton3D",function(){return ut}),i.d(e,"PlanePanel",function(){return ct}),i.d(e,"ScatterPanel",function(){return _t}),i.d(e,"SpherePanel",function(){return dt}),i.d(e,"StackPanel3D",function(){return ft}),i.d(e,"VolumeBasedPanel",function(){return rt}),i.d(e,"FluentMaterialDefines",function(){return at}),i.d(e,"FluentMaterial",function(){return ht})},function(t,e,i){"use strict";i.r(e),function(t){var r=i(1);i.d(e,"AdvancedDynamicTexture",function(){return r.AdvancedDynamicTexture}),i.d(e,"AdvancedDynamicTextureInstrumentation",function(){return r.AdvancedDynamicTextureInstrumentation}),i.d(e,"Vector2WithInfo",function(){return r.Vector2WithInfo}),i.d(e,"Matrix2D",function(){return r.Matrix2D}),i.d(e,"Measure",function(){return r.Measure}),i.d(e,"MultiLinePoint",function(){return r.MultiLinePoint}),i.d(e,"Style",function(){return r.Style}),i.d(e,"ValueAndUnit",function(){return r.ValueAndUnit}),i.d(e,"XmlLoader",function(){return r.XmlLoader}),i.d(e,"GUI3DManager",function(){return r.GUI3DManager}),i.d(e,"Vector3WithInfo",function(){return r.Vector3WithInfo}),i.d(e,"Button",function(){return r.Button}),i.d(e,"Checkbox",function(){return r.Checkbox}),i.d(e,"ColorPicker",function(){return r.ColorPicker}),i.d(e,"Container",function(){return r.Container}),i.d(e,"Control",function(){return r.Control}),i.d(e,"Ellipse",function(){return r.Ellipse}),i.d(e,"Grid",function(){return r.Grid}),i.d(e,"Image",function(){return r.Image}),i.d(e,"InputText",function(){return r.InputText}),i.d(e,"InputPassword",function(){return r.InputPassword}),i.d(e,"Line",function(){return r.Line}),i.d(e,"MultiLine",function(){return r.MultiLine}),i.d(e,"RadioButton",function(){return r.RadioButton}),i.d(e,"StackPanel",function(){return r.StackPanel}),i.d(e,"SelectorGroup",function(){return r.SelectorGroup}),i.d(e,"CheckboxGroup",function(){return r.CheckboxGroup}),i.d(e,"RadioGroup",function(){return r.RadioGroup}),i.d(e,"SliderGroup",function(){return r.SliderGroup}),i.d(e,"SelectionPanel",function(){return r.SelectionPanel}),i.d(e,"ScrollViewer",function(){return r.ScrollViewer}),i.d(e,"TextWrapping",function(){return r.TextWrapping}),i.d(e,"TextBlock",function(){return r.TextBlock}),i.d(e,"KeyPropertySet",function(){return r.KeyPropertySet}),i.d(e,"VirtualKeyboard",function(){return r.VirtualKeyboard}),i.d(e,"Rectangle",function(){return r.Rectangle}),i.d(e,"DisplayGrid",function(){return r.DisplayGrid}),i.d(e,"BaseSlider",function(){return r.BaseSlider}),i.d(e,"Slider",function(){return r.Slider}),i.d(e,"ImageBasedSlider",function(){return r.ImageBasedSlider}),i.d(e,"ScrollBar",function(){return r.ScrollBar}),i.d(e,"ImageScrollBar",function(){return r.ImageScrollBar}),i.d(e,"name",function(){return r.name}),i.d(e,"AbstractButton3D",function(){return r.AbstractButton3D}),i.d(e,"Button3D",function(){return r.Button3D}),i.d(e,"Container3D",function(){return r.Container3D}),i.d(e,"Control3D",function(){return r.Control3D}),i.d(e,"CylinderPanel",function(){return r.CylinderPanel}),i.d(e,"HolographicButton",function(){return r.HolographicButton}),i.d(e,"MeshButton3D",function(){return r.MeshButton3D}),i.d(e,"PlanePanel",function(){return r.PlanePanel}),i.d(e,"ScatterPanel",function(){return r.ScatterPanel}),i.d(e,"SpherePanel",function(){return r.SpherePanel}),i.d(e,"StackPanel3D",function(){return r.StackPanel3D}),i.d(e,"VolumeBasedPanel",function(){return r.VolumeBasedPanel}),i.d(e,"FluentMaterialDefines",function(){return r.FluentMaterialDefines}),i.d(e,"FluentMaterial",function(){return r.FluentMaterial});var n=void 0!==t?t:"undefined"!=typeof window?window:void 0;void 0!==n&&(n.BABYLON=n.BABYLON||{},n.BABYLON.GUI=r)}.call(this,i(3))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}])});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/ecsy/build/ecsy.module.js":
/*!************************************************!*\
  !*** ./node_modules/ecsy/build/ecsy.module.js ***!
  \************************************************/
/*! exports provided: Component, Not, System, SystemStateComponent, TagComponent, Types, Version, World, createComponentClass, createType, enableRemoteDevtools */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return Component; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Not", function() { return Not; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "System", function() { return System; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SystemStateComponent", function() { return SystemStateComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagComponent", function() { return TagComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Types", function() { return Types; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Version", function() { return Version; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "World", function() { return World; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createComponentClass", function() { return createComponentClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createType", function() { return createType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableRemoteDevtools", function() { return enableRemoteDevtools; });
class SystemManager {
  constructor(world) {
    this._systems = [];
    this._executeSystems = []; // Systems that have `execute` method
    this.world = world;
    this.lastExecutedSystem = null;
  }

  registerSystem(System, attributes) {
    if (
      this._systems.find(s => s.constructor.name === System.name) !== undefined
    ) {
      console.warn(`System '${System.name}' already registered.`);
      return this;
    }

    var system = new System(this.world, attributes);
    if (system.init) system.init();
    system.order = this._systems.length;
    this._systems.push(system);
    if (system.execute) {
      this._executeSystems.push(system);
      this.sortSystems();
    }
    return this;
  }

  sortSystems() {
    this._executeSystems.sort((a, b) => {
      return a.priority - b.priority || a.order - b.order;
    });
  }

  getSystem(System) {
    return this._systems.find(s => s instanceof System);
  }

  getSystems() {
    return this._systems;
  }

  removeSystem(System) {
    var index = this._systems.indexOf(System);
    if (!~index) return;

    this._systems.splice(index, 1);
  }

  executeSystem(system, delta, time) {
    if (system.initialized) {
      if (system.canExecute()) {
        let startTime = performance.now();
        system.execute(delta, time);
        system.executeTime = performance.now() - startTime;
        this.lastExecutedSystem = system;
        system.clearEvents();
      }
    }
  }

  stop() {
    this._executeSystems.forEach(system => system.stop());
  }

  execute(delta, time, forcePlay) {
    this._executeSystems.forEach(
      system =>
        (forcePlay || system.enabled) && this.executeSystem(system, delta, time)
    );
  }

  stats() {
    var stats = {
      numSystems: this._systems.length,
      systems: {}
    };

    for (var i = 0; i < this._systems.length; i++) {
      var system = this._systems[i];
      var systemStats = (stats.systems[system.constructor.name] = {
        queries: {}
      });
      for (var name in system.ctx) {
        systemStats.queries[name] = system.ctx[name].stats();
      }
    }

    return stats;
  }
}

/**
 * @private
 * @class EventDispatcher
 */
class EventDispatcher {
  constructor() {
    this._listeners = {};
    this.stats = {
      fired: 0,
      handled: 0
    };
  }

  /**
   * Add an event listener
   * @param {String} eventName Name of the event to listen
   * @param {Function} listener Callback to trigger when the event is fired
   */
  addEventListener(eventName, listener) {
    let listeners = this._listeners;
    if (listeners[eventName] === undefined) {
      listeners[eventName] = [];
    }

    if (listeners[eventName].indexOf(listener) === -1) {
      listeners[eventName].push(listener);
    }
  }

  /**
   * Check if an event listener is already added to the list of listeners
   * @param {String} eventName Name of the event to check
   * @param {Function} listener Callback for the specified event
   */
  hasEventListener(eventName, listener) {
    return (
      this._listeners[eventName] !== undefined &&
      this._listeners[eventName].indexOf(listener) !== -1
    );
  }

  /**
   * Remove an event listener
   * @param {String} eventName Name of the event to remove
   * @param {Function} listener Callback for the specified event
   */
  removeEventListener(eventName, listener) {
    var listenerArray = this._listeners[eventName];
    if (listenerArray !== undefined) {
      var index = listenerArray.indexOf(listener);
      if (index !== -1) {
        listenerArray.splice(index, 1);
      }
    }
  }

  /**
   * Dispatch an event
   * @param {String} eventName Name of the event to dispatch
   * @param {Entity} entity (Optional) Entity to emit
   * @param {Component} component
   */
  dispatchEvent(eventName, entity, component) {
    this.stats.fired++;

    var listenerArray = this._listeners[eventName];
    if (listenerArray !== undefined) {
      var array = listenerArray.slice(0);

      for (var i = 0; i < array.length; i++) {
        array[i].call(this, entity, component);
      }
    }
  }

  /**
   * Reset stats counters
   */
  resetCounters() {
    this.stats.fired = this.stats.handled = 0;
  }
}

/**
 * Return the name of a component
 * @param {Component} Component
 * @private
 */
function getName(Component) {
  return Component.name;
}

/**
 * Return a valid property name for the Component
 * @param {Component} Component
 * @private
 */
function componentPropertyName(Component) {
  var name = getName(Component);
  return name.charAt(0).toLowerCase() + name.slice(1);
}

/**
 * Get a key from a list of components
 * @param {Array(Component)} Components Array of components to generate the key
 * @private
 */
function queryKey(Components) {
  var names = [];
  for (var n = 0; n < Components.length; n++) {
    var T = Components[n];
    if (typeof T === "object") {
      var operator = T.operator === "not" ? "!" : T.operator;
      names.push(operator + getName(T.Component));
    } else {
      names.push(getName(T));
    }
  }

  return names.sort().join("-");
}

class Query {
  /**
   * @param {Array(Component)} Components List of types of components to query
   */
  constructor(Components, manager) {
    this.Components = [];
    this.NotComponents = [];

    Components.forEach(component => {
      if (typeof component === "object") {
        this.NotComponents.push(component.Component);
      } else {
        this.Components.push(component);
      }
    });

    if (this.Components.length === 0) {
      throw new Error("Can't create a query without components");
    }

    this.entities = [];

    this.eventDispatcher = new EventDispatcher();

    // This query is being used by a reactive system
    this.reactive = false;

    this.key = queryKey(Components);

    // Fill the query with the existing entities
    for (var i = 0; i < manager._entities.length; i++) {
      var entity = manager._entities[i];
      if (this.match(entity)) {
        // @todo ??? this.addEntity(entity); => preventing the event to be generated
        entity.queries.push(this);
        this.entities.push(entity);
      }
    }
  }

  /**
   * Add entity to this query
   * @param {Entity} entity
   */
  addEntity(entity) {
    entity.queries.push(this);
    this.entities.push(entity);

    this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED, entity);
  }

  /**
   * Remove entity from this query
   * @param {Entity} entity
   */
  removeEntity(entity) {
    let index = this.entities.indexOf(entity);
    if (~index) {
      this.entities.splice(index, 1);

      index = entity.queries.indexOf(this);
      entity.queries.splice(index, 1);

      this.eventDispatcher.dispatchEvent(
        Query.prototype.ENTITY_REMOVED,
        entity
      );
    }
  }

  match(entity) {
    return (
      entity.hasAllComponents(this.Components) &&
      !entity.hasAnyComponents(this.NotComponents)
    );
  }

  toJSON() {
    return {
      key: this.key,
      reactive: this.reactive,
      components: {
        included: this.Components.map(C => C.name),
        not: this.NotComponents.map(C => C.name)
      },
      numEntities: this.entities.length
    };
  }

  /**
   * Return stats for this query
   */
  stats() {
    return {
      numComponents: this.Components.length,
      numEntities: this.entities.length
    };
  }
}

Query.prototype.ENTITY_ADDED = "Query#ENTITY_ADDED";
Query.prototype.ENTITY_REMOVED = "Query#ENTITY_REMOVED";
Query.prototype.COMPONENT_CHANGED = "Query#COMPONENT_CHANGED";

var nextId = 0;

class Entity {
  constructor(world) {
    this._world = world || null;

    // Unique ID for this entity
    this.id = nextId++;

    // List of components types the entity has
    this._ComponentTypes = [];

    // Instance of the components
    this._components = {};

    this._componentsToRemove = {};

    // Queries where the entity is added
    this.queries = [];

    // Used for deferred removal
    this._ComponentTypesToRemove = [];

    this.alive = false;
  }

  // COMPONENTS

  getComponent(Component, includeRemoved) {
    var component = this._components[Component.name];

    if (!component && includeRemoved === true) {
      component = this._componentsToRemove[Component.name];
    }

    return  component;
  }

  getRemovedComponent(Component) {
    return this._componentsToRemove[Component.name];
  }

  getComponents() {
    return this._components;
  }

  getComponentsToRemove() {
    return this._componentsToRemove;
  }

  getComponentTypes() {
    return this._ComponentTypes;
  }

  getMutableComponent(Component) {
    var component = this._components[Component.name];
    for (var i = 0; i < this.queries.length; i++) {
      var query = this.queries[i];
      // @todo accelerate this check. Maybe having query._Components as an object
      if (query.reactive && query.Components.indexOf(Component) !== -1) {
        query.eventDispatcher.dispatchEvent(
          Query.prototype.COMPONENT_CHANGED,
          this,
          component
        );
      }
    }
    return component;
  }

  addComponent(Component, values) {
    this._world.entityAddComponent(this, Component, values);
    return this;
  }

  removeComponent(Component, forceRemove) {
    this._world.entityRemoveComponent(this, Component, forceRemove);
    return this;
  }

  hasComponent(Component, includeRemoved) {
    return (
      !!~this._ComponentTypes.indexOf(Component) ||
      (includeRemoved === true && this.hasRemovedComponent(Component))
    );
  }

  hasRemovedComponent(Component) {
    return !!~this._ComponentTypesToRemove.indexOf(Component);
  }

  hasAllComponents(Components) {
    for (var i = 0; i < Components.length; i++) {
      if (!this.hasComponent(Components[i])) return false;
    }
    return true;
  }

  hasAnyComponents(Components) {
    for (var i = 0; i < Components.length; i++) {
      if (this.hasComponent(Components[i])) return true;
    }
    return false;
  }

  removeAllComponents(forceRemove) {
    return this._world.entityRemoveAllComponents(this, forceRemove);
  }

  // EXTRAS

  // Initialize the entity. To be used when returning an entity to the pool
  reset() {
    this.id = nextId++;
    this._world = null;
    this._ComponentTypes.length = 0;
    this.queries.length = 0;
    this._components = {};
  }

  remove(forceRemove) {
    return this._world.removeEntity(this, forceRemove);
  }
}

class ObjectPool {
  // @todo Add initial size
  constructor(T, initialSize) {
    this.freeList = [];
    this.count = 0;
    this.T = T;
    this.isObjectPool = true;

    var extraArgs = null;
    if (arguments.length > 1) {
      extraArgs = Array.prototype.slice.call(arguments);
      extraArgs.shift();
    }

    this.createElement = extraArgs
      ? () => {
          return new T(...extraArgs);
        }
      : () => {
          return new T();
        };

    if (typeof initialSize !== "undefined") {
      this.expand(initialSize);
    }
  }

  aquire() {
    // Grow the list by 20%ish if we're out
    if (this.freeList.length <= 0) {
      this.expand(Math.round(this.count * 0.2) + 1);
    }

    var item = this.freeList.pop();

    return item;
  }

  release(item) {
    item.reset();
    this.freeList.push(item);
  }

  expand(count) {
    for (var n = 0; n < count; n++) {
      this.freeList.push(this.createElement());
    }
    this.count += count;
  }

  totalSize() {
    return this.count;
  }

  totalFree() {
    return this.freeList.length;
  }

  totalUsed() {
    return this.count - this.freeList.length;
  }
}

/**
 * @private
 * @class QueryManager
 */
class QueryManager {
  constructor(world) {
    this._world = world;

    // Queries indexed by a unique identifier for the components it has
    this._queries = {};
  }

  onEntityRemoved(entity) {
    for (var queryName in this._queries) {
      var query = this._queries[queryName];
      if (entity.queries.indexOf(query) !== -1) {
        query.removeEntity(entity);
      }
    }
  }

  /**
   * Callback when a component is added to an entity
   * @param {Entity} entity Entity that just got the new component
   * @param {Component} Component Component added to the entity
   */
  onEntityComponentAdded(entity, Component) {
    // @todo Use bitmask for checking components?

    // Check each indexed query to see if we need to add this entity to the list
    for (var queryName in this._queries) {
      var query = this._queries[queryName];

      if (
        !!~query.NotComponents.indexOf(Component) &&
        ~query.entities.indexOf(entity)
      ) {
        query.removeEntity(entity);
        continue;
      }

      // Add the entity only if:
      // Component is in the query
      // and Entity has ALL the components of the query
      // and Entity is not already in the query
      if (
        !~query.Components.indexOf(Component) ||
        !query.match(entity) ||
        ~query.entities.indexOf(entity)
      )
        continue;

      query.addEntity(entity);
    }
  }

  /**
   * Callback when a component is removed from an entity
   * @param {Entity} entity Entity to remove the component from
   * @param {Component} Component Component to remove from the entity
   */
  onEntityComponentRemoved(entity, Component) {
    for (var queryName in this._queries) {
      var query = this._queries[queryName];

      if (
        !!~query.NotComponents.indexOf(Component) &&
        !~query.entities.indexOf(entity) &&
        query.match(entity)
      ) {
        query.addEntity(entity);
        continue;
      }

      if (
        !!~query.Components.indexOf(Component) &&
        !!~query.entities.indexOf(entity) &&
        !query.match(entity)
      ) {
        query.removeEntity(entity);
        continue;
      }
    }
  }

  /**
   * Get a query for the specified components
   * @param {Component} Components Components that the query should have
   */
  getQuery(Components) {
    var key = queryKey(Components);
    var query = this._queries[key];
    if (!query) {
      this._queries[key] = query = new Query(Components, this._world);
    }
    return query;
  }

  /**
   * Return some stats from this class
   */
  stats() {
    var stats = {};
    for (var queryName in this._queries) {
      stats[queryName] = this._queries[queryName].stats();
    }
    return stats;
  }
}

class SystemStateComponent {}

SystemStateComponent.isSystemStateComponent = true;

/**
 * @private
 * @class EntityManager
 */
class EntityManager {
  constructor(world) {
    this.world = world;
    this.componentsManager = world.componentsManager;

    // All the entities in this instance
    this._entities = [];

    this._queryManager = new QueryManager(this);
    this.eventDispatcher = new EventDispatcher();
    this._entityPool = new ObjectPool(Entity);

    // Deferred deletion
    this.entitiesWithComponentsToRemove = [];
    this.entitiesToRemove = [];
    this.deferredRemovalEnabled = true;

    this.numStateComponents = 0;
  }

  /**
   * Create a new entity
   */
  createEntity() {
    var entity = this._entityPool.aquire();
    entity.alive = true;
    entity._world = this;
    this._entities.push(entity);
    this.eventDispatcher.dispatchEvent(ENTITY_CREATED, entity);
    return entity;
  }

  // COMPONENTS

  /**
   * Add a component to an entity
   * @param {Entity} entity Entity where the component will be added
   * @param {Component} Component Component to be added to the entity
   * @param {Object} values Optional values to replace the default attributes
   */
  entityAddComponent(entity, Component, values) {
    if (~entity._ComponentTypes.indexOf(Component)) return;

    entity._ComponentTypes.push(Component);

    if (Component.__proto__ === SystemStateComponent) {
      this.numStateComponents++;
    }

    var componentPool = this.world.componentsManager.getComponentsPool(
      Component
    );
    var component = componentPool.aquire();

    entity._components[Component.name] = component;

    if (values) {
      if (component.copy) {
        component.copy(values);
      } else {
        for (var name in values) {
          component[name] = values[name];
        }
      }
    }

    this._queryManager.onEntityComponentAdded(entity, Component);
    this.world.componentsManager.componentAddedToEntity(Component);

    this.eventDispatcher.dispatchEvent(COMPONENT_ADDED, entity, Component);
  }

  /**
   * Remove a component from an entity
   * @param {Entity} entity Entity which will get removed the component
   * @param {*} Component Component to remove from the entity
   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)
   */
  entityRemoveComponent(entity, Component, immediately) {
    var index = entity._ComponentTypes.indexOf(Component);
    if (!~index) return;

    this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE, entity, Component);

    if (immediately) {
      this._entityRemoveComponentSync(entity, Component, index);
    } else {
      if (entity._ComponentTypesToRemove.length === 0)
        this.entitiesWithComponentsToRemove.push(entity);

      entity._ComponentTypes.splice(index, 1);
      entity._ComponentTypesToRemove.push(Component);

      var componentName = getName(Component);
      entity._componentsToRemove[componentName] =
        entity._components[componentName];
      delete entity._components[componentName];
    }

    // Check each indexed query to see if we need to remove it
    this._queryManager.onEntityComponentRemoved(entity, Component);

    if (Component.__proto__ === SystemStateComponent) {
      this.numStateComponents--;

      // Check if the entity was a ghost waiting for the last system state component to be removed
      if (this.numStateComponents === 0 && !entity.alive) {
        entity.remove();
      }
    }
  }

  _entityRemoveComponentSync(entity, Component, index) {
    // Remove T listing on entity and property ref, then free the component.
    entity._ComponentTypes.splice(index, 1);
    var propName = componentPropertyName(Component);
    var componentName = getName(Component);
    var component = entity._components[componentName];
    delete entity._components[componentName];
    this.componentsManager._componentPool[propName].release(component);
    this.world.componentsManager.componentRemovedFromEntity(Component);
  }

  /**
   * Remove all the components from an entity
   * @param {Entity} entity Entity from which the components will be removed
   */
  entityRemoveAllComponents(entity, immediately) {
    let Components = entity._ComponentTypes;

    for (let j = Components.length - 1; j >= 0; j--) {
      if (Components[j].__proto__ !== SystemStateComponent)
        this.entityRemoveComponent(entity, Components[j], immediately);
    }
  }

  /**
   * Remove the entity from this manager. It will clear also its components
   * @param {Entity} entity Entity to remove from the manager
   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)
   */
  removeEntity(entity, immediately) {
    var index = this._entities.indexOf(entity);

    if (!~index) throw new Error("Tried to remove entity not in list");

    entity.alive = false;

    if (this.numStateComponents === 0) {
      // Remove from entity list
      this.eventDispatcher.dispatchEvent(ENTITY_REMOVED, entity);
      this._queryManager.onEntityRemoved(entity);
      if (immediately === true) {
        this._releaseEntity(entity, index);
      } else {
        this.entitiesToRemove.push(entity);
      }
    }

    this.entityRemoveAllComponents(entity, immediately);
  }

  _releaseEntity(entity, index) {
    this._entities.splice(index, 1);

    // Prevent any access and free
    entity._world = null;
    this._entityPool.release(entity);
  }

  /**
   * Remove all entities from this manager
   */
  removeAllEntities() {
    for (var i = this._entities.length - 1; i >= 0; i--) {
      this.removeEntity(this._entities[i]);
    }
  }

  processDeferredRemoval() {
    if (!this.deferredRemovalEnabled) {
      return;
    }

    for (let i = 0; i < this.entitiesToRemove.length; i++) {
      let entity = this.entitiesToRemove[i];
      let index = this._entities.indexOf(entity);
      this._releaseEntity(entity, index);
    }
    this.entitiesToRemove.length = 0;

    for (let i = 0; i < this.entitiesWithComponentsToRemove.length; i++) {
      let entity = this.entitiesWithComponentsToRemove[i];
      while (entity._ComponentTypesToRemove.length > 0) {
        let Component = entity._ComponentTypesToRemove.pop();

        var propName = componentPropertyName(Component);
        var componentName = getName(Component);
        var component = entity._componentsToRemove[componentName];
        delete entity._componentsToRemove[componentName];
        this.componentsManager._componentPool[propName].release(component);
        this.world.componentsManager.componentRemovedFromEntity(Component);

        //this._entityRemoveComponentSync(entity, Component, index);
      }
    }

    this.entitiesWithComponentsToRemove.length = 0;
  }

  /**
   * Get a query based on a list of components
   * @param {Array(Component)} Components List of components that will form the query
   */
  queryComponents(Components) {
    return this._queryManager.getQuery(Components);
  }

  // EXTRAS

  /**
   * Return number of entities
   */
  count() {
    return this._entities.length;
  }

  /**
   * Return some stats
   */
  stats() {
    var stats = {
      numEntities: this._entities.length,
      numQueries: Object.keys(this._queryManager._queries).length,
      queries: this._queryManager.stats(),
      numComponentPool: Object.keys(this.componentsManager._componentPool)
        .length,
      componentPool: {},
      eventDispatcher: this.eventDispatcher.stats
    };

    for (var cname in this.componentsManager._componentPool) {
      var pool = this.componentsManager._componentPool[cname];
      stats.componentPool[cname] = {
        used: pool.totalUsed(),
        size: pool.count
      };
    }

    return stats;
  }
}

const ENTITY_CREATED = "EntityManager#ENTITY_CREATE";
const ENTITY_REMOVED = "EntityManager#ENTITY_REMOVED";
const COMPONENT_ADDED = "EntityManager#COMPONENT_ADDED";
const COMPONENT_REMOVE = "EntityManager#COMPONENT_REMOVE";

class DummyObjectPool {
  constructor(T) {
    this.isDummyObjectPool = true;
    this.count = 0;
    this.used = 0;
    this.T = T;
  }

  aquire() {
    this.used++;
    this.count++;
    return new this.T();
  }

  release() {
    this.used--;
  }

  totalSize() {
    return this.count;
  }

  totalFree() {
    return Infinity;
  }

  totalUsed() {
    return this.used;
  }
}

class ComponentManager {
  constructor() {
    this.Components = {};
    this._componentPool = {};
    this.numComponents = {};
  }

  registerComponent(Component) {
    if (this.Components[Component.name]) {
      console.warn(`Component type: '${Component.name}' already registered.`);
      return;
    }

    this.Components[Component.name] = Component;
    this.numComponents[Component.name] = 0;
  }

  componentAddedToEntity(Component) {
    if (!this.Components[Component.name]) {
      this.registerComponent(Component);
    }

    this.numComponents[Component.name]++;
  }

  componentRemovedFromEntity(Component) {
    this.numComponents[Component.name]--;
  }

  getComponentsPool(Component) {
    var componentName = componentPropertyName(Component);

    if (!this._componentPool[componentName]) {
      if (Component.prototype.reset) {
        this._componentPool[componentName] = new ObjectPool(Component);
      } else {
        console.warn(
          `Component '${Component.name}' won't benefit from pooling because 'reset' method was not implemeneted.`
        );
        this._componentPool[componentName] = new DummyObjectPool(Component);
      }
    }

    return this._componentPool[componentName];
  }
}

var name = "ecsy";
var version = "0.2.0";
var description = "Entity Component System in JS";
var main = "build/ecsy.js";
var module = "build/ecsy.module.js";
var types = "src/index.d.ts";
var scripts = {
	build: "rollup -c && npm run docs",
	docs: "rm docs/api/_sidebar.md; typedoc --readme none --mode file --excludeExternals --plugin typedoc-plugin-markdown  --theme docs/theme --hideSources --hideBreadcrumbs --out docs/api/ --includeDeclarations --includes 'src/**/*.d.ts' src; touch docs/api/_sidebar.md",
	"dev:docs": "nodemon -e ts -x 'npm run docs' -w src",
	dev: "concurrently --names 'ROLLUP,DOCS,HTTP' -c 'bgBlue.bold,bgYellow.bold,bgGreen.bold' 'rollup -c -w -m inline' 'npm run dev:docs' 'npm run dev:server'",
	"dev:server": "http-server -c-1 -p 8080 --cors",
	lint: "eslint src test examples",
	start: "npm run dev",
	test: "ava",
	travis: "npm run lint && npm run test && npm run build",
	"watch:test": "ava --watch"
};
var repository = {
	type: "git",
	url: "git+https://github.com/fernandojsg/ecsy.git"
};
var keywords = [
	"ecs",
	"entity component system"
];
var author = "Fernando Serrano <fernandojsg@gmail.com> (http://fernandojsg.com)";
var license = "MIT";
var bugs = {
	url: "https://github.com/fernandojsg/ecsy/issues"
};
var ava = {
	files: [
		"test/**/*.test.js"
	],
	sources: [
		"src/**/*.js"
	],
	require: [
		"babel-register",
		"esm"
	]
};
var jspm = {
	files: [
		"package.json",
		"LICENSE",
		"README.md",
		"build/ecsy.js",
		"build/ecsy.min.js",
		"build/ecsy.module.js"
	],
	directories: {
	}
};
var homepage = "https://github.com/fernandojsg/ecsy#readme";
var devDependencies = {
	ava: "^1.4.1",
	"babel-cli": "^6.26.0",
	"babel-core": "^6.26.3",
	"babel-eslint": "^10.0.3",
	"babel-loader": "^8.0.6",
	concurrently: "^4.1.2",
	"docsify-cli": "^4.4.0",
	eslint: "^5.16.0",
	"eslint-config-prettier": "^4.3.0",
	"eslint-plugin-prettier": "^3.1.1",
	"http-server": "^0.11.1",
	nodemon: "^1.19.4",
	prettier: "^1.19.1",
	rollup: "^1.27.8",
	"rollup-plugin-json": "^4.0.0",
	"rollup-plugin-terser": "^5.1.2",
	typedoc: "^0.15.3",
	"typedoc-plugin-markdown": "^2.2.11",
	typescript: "^3.7.2"
};
var pjson = {
	name: name,
	version: version,
	description: description,
	main: main,
	"jsnext:main": "build/ecsy.module.js",
	module: module,
	types: types,
	scripts: scripts,
	repository: repository,
	keywords: keywords,
	author: author,
	license: license,
	bugs: bugs,
	ava: ava,
	jspm: jspm,
	homepage: homepage,
	devDependencies: devDependencies
};

const Version = pjson.version;

class World {
  constructor() {
    this.componentsManager = new ComponentManager(this);
    this.entityManager = new EntityManager(this);
    this.systemManager = new SystemManager(this);

    this.enabled = true;

    this.eventQueues = {};

    if (typeof CustomEvent !== "undefined") {
      var event = new CustomEvent("ecsy-world-created", {
        detail: { world: this, version: Version }
      });
      window.dispatchEvent(event);
    }

    this.lastTime = performance.now();
  }

  registerComponent(Component) {
    this.componentsManager.registerComponent(Component);
    return this;
  }

  registerSystem(System, attributes) {
    this.systemManager.registerSystem(System, attributes);
    return this;
  }

  getSystem(SystemClass) {
    return this.systemManager.getSystem(SystemClass);
  }

  getSystems() {
    return this.systemManager.getSystems();
  }

  execute(delta, time) {
    if (!delta) {
      let time = performance.now();
      delta = time - this.lastTime;
      this.lastTime = time;
    }

    if (this.enabled) {
      this.systemManager.execute(delta, time);
      this.entityManager.processDeferredRemoval();
    }
  }

  stop() {
    this.enabled = false;
  }

  play() {
    this.enabled = true;
  }

  createEntity() {
    return this.entityManager.createEntity();
  }

  stats() {
    var stats = {
      entities: this.entityManager.stats(),
      system: this.systemManager.stats()
    };

    console.log(JSON.stringify(stats, null, 2));
  }
}

class System {
  canExecute() {
    if (this._mandatoryQueries.length === 0) return true;

    for (let i = 0; i < this._mandatoryQueries.length; i++) {
      var query = this._mandatoryQueries[i];
      if (query.entities.length === 0) {
        return false;
      }
    }

    return true;
  }

  constructor(world, attributes) {
    this.world = world;
    this.enabled = true;

    // @todo Better naming :)
    this._queries = {};
    this.queries = {};

    this.priority = 0;

    // Used for stats
    this.executeTime = 0;

    if (attributes && attributes.priority) {
      this.priority = attributes.priority;
    }

    this._mandatoryQueries = [];

    this.initialized = true;

    if (this.constructor.queries) {
      for (var queryName in this.constructor.queries) {
        var queryConfig = this.constructor.queries[queryName];
        var Components = queryConfig.components;
        if (!Components || Components.length === 0) {
          throw new Error("'components' attribute can't be empty in a query");
        }
        var query = this.world.entityManager.queryComponents(Components);
        this._queries[queryName] = query;
        if (queryConfig.mandatory === true) {
          this._mandatoryQueries.push(query);
        }
        this.queries[queryName] = {
          results: query.entities
        };

        // Reactive configuration added/removed/changed
        var validEvents = ["added", "removed", "changed"];

        const eventMapping = {
          added: Query.prototype.ENTITY_ADDED,
          removed: Query.prototype.ENTITY_REMOVED,
          changed: Query.prototype.COMPONENT_CHANGED // Query.prototype.ENTITY_CHANGED
        };

        if (queryConfig.listen) {
          validEvents.forEach(eventName => {
            // Is the event enabled on this system's query?
            if (queryConfig.listen[eventName]) {
              let event = queryConfig.listen[eventName];

              if (eventName === "changed") {
                query.reactive = true;
                if (event === true) {
                  // Any change on the entity from the components in the query
                  let eventList = (this.queries[queryName][eventName] = []);
                  query.eventDispatcher.addEventListener(
                    Query.prototype.COMPONENT_CHANGED,
                    entity => {
                      // Avoid duplicates
                      if (eventList.indexOf(entity) === -1) {
                        eventList.push(entity);
                      }
                    }
                  );
                } else if (Array.isArray(event)) {
                  let eventList = (this.queries[queryName][eventName] = []);
                  query.eventDispatcher.addEventListener(
                    Query.prototype.COMPONENT_CHANGED,
                    (entity, changedComponent) => {
                      // Avoid duplicates
                      if (
                        event.indexOf(changedComponent.constructor) !== -1 &&
                        eventList.indexOf(entity) === -1
                      ) {
                        eventList.push(entity);
                      }
                    }
                  );
                }
              } else {
                let eventList = (this.queries[queryName][eventName] = []);

                query.eventDispatcher.addEventListener(
                  eventMapping[eventName],
                  entity => {
                    // @fixme overhead?
                    if (eventList.indexOf(entity) === -1)
                      eventList.push(entity);
                  }
                );
              }
            }
          });
        }
      }
    }
  }

  stop() {
    this.executeTime = 0;
    this.enabled = false;
  }

  play() {
    this.enabled = true;
  }

  // @question rename to clear queues?
  clearEvents() {
    for (let queryName in this.queries) {
      var query = this.queries[queryName];
      if (query.added) {
        query.added.length = 0;
      }
      if (query.removed) {
        query.removed.length = 0;
      }
      if (query.changed) {
        if (Array.isArray(query.changed)) {
          query.changed.length = 0;
        } else {
          for (let name in query.changed) {
            query.changed[name].length = 0;
          }
        }
      }
    }
  }

  toJSON() {
    var json = {
      name: this.constructor.name,
      enabled: this.enabled,
      executeTime: this.executeTime,
      priority: this.priority,
      queries: {}
    };

    if (this.constructor.queries) {
      var queries = this.constructor.queries;
      for (let queryName in queries) {
        let query = this.queries[queryName];
        let queryDefinition = queries[queryName];
        let jsonQuery = (json.queries[queryName] = {
          key: this._queries[queryName].key
        });

        jsonQuery.mandatory = queryDefinition.mandatory === true;
        jsonQuery.reactive =
          queryDefinition.listen &&
          (queryDefinition.listen.added === true ||
            queryDefinition.listen.removed === true ||
            queryDefinition.listen.changed === true ||
            Array.isArray(queryDefinition.listen.changed));

        if (jsonQuery.reactive) {
          jsonQuery.listen = {};

          const methods = ["added", "removed", "changed"];
          methods.forEach(method => {
            if (query[method]) {
              jsonQuery.listen[method] = {
                entities: query[method].length
              };
            }
          });
        }
      }
    }

    return json;
  }
}

function Not(Component) {
  return {
    operator: "not",
    Component: Component
  };
}

class Component {}

Component.isComponent = true;

class TagComponent {
  reset() {}
}

TagComponent.isTagComponent = true;

function createType(typeDefinition) {
  var mandatoryFunctions = [
    "create",
    "reset",
    "clear"
    /*"copy"*/
  ];

  var undefinedFunctions = mandatoryFunctions.filter(f => {
    return !typeDefinition[f];
  });

  if (undefinedFunctions.length > 0) {
    throw new Error(
      `createType expect type definition to implements the following functions: ${undefinedFunctions.join(
        ", "
      )}`
    );
  }

  typeDefinition.isType = true;
  return typeDefinition;
}

/**
 * Standard types
 */
var Types = {};

Types.Number = createType({
  baseType: Number,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : 0;
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = 0;
    }
  },
  clear: (src, key) => {
    src[key] = 0;
  }
});

Types.Boolean = createType({
  baseType: Boolean,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : false;
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = false;
    }
  },
  clear: (src, key) => {
    src[key] = false;
  }
});

Types.String = createType({
  baseType: String,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : "";
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = "";
    }
  },
  clear: (src, key) => {
    src[key] = "";
  }
});

Types.Array = createType({
  baseType: Array,
  create: defaultValue => {
    if (typeof defaultValue !== "undefined") {
      return defaultValue.slice();
    }

    return [];
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue.slice();
    } else {
      src[key].length = 0;
    }
  },
  clear: (src, key) => {
    src[key].length = 0;
  },
  copy: (src, dst, key) => {
    src[key] = dst[key].slice();
  }
});

var standardTypes = {
  number: Types.Number,
  boolean: Types.Boolean,
  string: Types.String
};

/**
 * Try to infer the type of the value
 * @param {*} value
 * @return {String} Type of the attribute
 * @private
 */
function inferType(value) {
  if (Array.isArray(value)) {
    return Types.Array;
  }

  if (standardTypes[typeof value]) {
    return standardTypes[typeof value];
  } else {
    return null;
  }
}

function createComponentClass(schema, name) {
  //var Component = new Function(`return function ${name}() {}`)();
  for (let key in schema) {
    let type = schema[key].type;
    if (!type) {
      schema[key].type = inferType(schema[key].default);
    }
  }

  var Component = function() {
    for (let key in schema) {
      var attr = schema[key];
      let type = attr.type;
      if (type && type.isType) {
        this[key] = type.create(attr.default);
      } else {
        this[key] = attr.default;
      }
    }
  };

  if (typeof name !== "undefined") {
    Object.defineProperty(Component, "name", { value: name });
  }

  Component.prototype.schema = schema;

  var knownTypes = true;
  for (let key in schema) {
    var attr = schema[key];
    if (!attr.type) {
      attr.type = inferType(attr.default);
    }

    var type = attr.type;
    if (!type) {
      console.warn(`Unknown type definition for attribute '${key}'`);
      knownTypes = false;
    }
  }

  if (!knownTypes) {
    console.warn(
      `This component can't use pooling because some data types are not registered. Please provide a type created with 'createType'`
    );

    for (var key in schema) {
      let attr = schema[key];
      Component.prototype[key] = attr.default;
    }
  } else {
    Component.prototype.copy = function(src) {
      for (let key in schema) {
        if (src[key]) {
          let type = schema[key].type;
          if (type.isSimpleType) {
            this[key] = src[key];
          } else if (type.copy) {
            type.copy(this, src, key);
          } else {
            // @todo Detect that it's not possible to copy all the attributes
            // and just avoid creating the copy function
            console.warn(
              `Unknown copy function for attribute '${key}' data type`
            );
          }
        }
      }
    };

    Component.prototype.reset = function() {
      for (let key in schema) {
        let attr = schema[key];
        let type = attr.type;
        if (type.reset) type.reset(this, key, attr.default);
      }
    };

    Component.prototype.clear = function() {
      for (let key in schema) {
        let type = schema[key].type;
        if (type.clear) type.clear(this, key);
      }
    };

    for (let key in schema) {
      let attr = schema[key];
      let type = attr.type;
      Component.prototype[key] = attr.default;

      if (type.reset) {
        type.reset(Component.prototype, key, attr.default);
      }
    }
  }

  return Component;
}

function generateId(length) {
  var result = "";
  var characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  var charactersLength = characters.length;
  for (var i = 0; i < length; i++) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength));
  }
  return result;
}

function injectScript(src, onLoad) {
  var script = document.createElement("script");
  // @todo Use link to the ecsy-devtools repo?
  script.src = src;
  script.onload = onLoad;
  (document.head || document.documentElement).appendChild(script);
}

/* global Peer */

function hookConsoleAndErrors(connection) {
  var wrapFunctions = ["error", "warning", "log"];
  wrapFunctions.forEach(key => {
    if (typeof console[key] === "function") {
      var fn = console[key].bind(console);
      console[key] = (...args) => {
        connection.send({
          method: "console",
          type: key,
          args: JSON.stringify(args)
        });
        return fn.apply(null, args);
      };
    }
  });

  window.addEventListener("error", error => {
    connection.send({
      method: "error",
      error: JSON.stringify({
        message: error.error.message,
        stack: error.error.stack
      })
    });
  });
}

function includeRemoteIdHTML(remoteId) {
  let infoDiv = document.createElement("div");
  infoDiv.style.cssText = `
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `;

  infoDiv.innerHTML = `Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${remoteId}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`;
  document.body.appendChild(infoDiv);

  return infoDiv;
}

function enableRemoteDevtools(remoteId) {
  window.generateNewCode = () => {
    window.localStorage.clear();
    remoteId = generateId(6);
    window.localStorage.setItem("ecsyRemoteId", remoteId);
    window.location.reload(false);
  };

  remoteId = remoteId || window.localStorage.getItem("ecsyRemoteId");
  if (!remoteId) {
    remoteId = generateId(6);
    window.localStorage.setItem("ecsyRemoteId", remoteId);
  }

  let infoDiv = includeRemoteIdHTML(remoteId);

  window.__ECSY_REMOTE_DEVTOOLS_INJECTED = true;
  window.__ECSY_REMOTE_DEVTOOLS = {};

  let Version = "";

  // This is used to collect the worlds created before the communication is being established
  let worldsBeforeLoading = [];
  let onWorldCreated = e => {
    var world = e.detail.world;
    Version = e.detail.version;
    worldsBeforeLoading.push(world);
  };
  window.addEventListener("ecsy-world-created", onWorldCreated);

  let onLoaded = () => {
    var peer = new Peer(remoteId);
    peer.on("open", (/* id */) => {
      peer.on("connection", connection => {
        window.__ECSY_REMOTE_DEVTOOLS.connection = connection;
        connection.on("open", function() {
          // infoDiv.style.visibility = "hidden";
          infoDiv.innerHTML = "Connected";

          // Receive messages
          connection.on("data", function(data) {
            if (data.type === "init") {
              var script = document.createElement("script");
              script.setAttribute("type", "text/javascript");
              script.onload = () => {
                script.parentNode.removeChild(script);

                // Once the script is injected we don't need to listen
                window.removeEventListener(
                  "ecsy-world-created",
                  onWorldCreated
                );
                worldsBeforeLoading.forEach(world => {
                  var event = new CustomEvent("ecsy-world-created", {
                    detail: { world: world, version: Version }
                  });
                  window.dispatchEvent(event);
                });
              };
              script.innerHTML = data.script;
              (document.head || document.documentElement).appendChild(script);
              script.onload();

              hookConsoleAndErrors(connection);
            } else if (data.type === "executeScript") {
              let value = eval(data.script);
              if (data.returnEval) {
                connection.send({
                  method: "evalReturn",
                  value: value
                });
              }
            }
          });
        });
      });
    });
  };

  // Inject PeerJS script
  injectScript(
    "https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",
    onLoaded
  );
}

const urlParams = new URLSearchParams(window.location.search);

// @todo Provide a way to disable it if needed
if (urlParams.has("enable-remote-devtools")) {
  enableRemoteDevtools();
}




/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };

    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}


/***/ }),

/***/ "./node_modules/html-entities/lib/html4-entities.js":
/*!**********************************************************!*\
  !*** ./node_modules/html-entities/lib/html4-entities.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var HTML_ALPHA = ['apos', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'acirc', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'quot', 'amp', 'lt', 'gt', 'OElig', 'oelig', 'Scaron', 'scaron', 'Yuml', 'circ', 'tilde', 'ensp', 'emsp', 'thinsp', 'zwnj', 'zwj', 'lrm', 'rlm', 'ndash', 'mdash', 'lsquo', 'rsquo', 'sbquo', 'ldquo', 'rdquo', 'bdquo', 'dagger', 'Dagger', 'permil', 'lsaquo', 'rsaquo', 'euro', 'fnof', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigmaf', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'thetasym', 'upsih', 'piv', 'bull', 'hellip', 'prime', 'Prime', 'oline', 'frasl', 'weierp', 'image', 'real', 'trade', 'alefsym', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'crarr', 'lArr', 'uArr', 'rArr', 'dArr', 'hArr', 'forall', 'part', 'exist', 'empty', 'nabla', 'isin', 'notin', 'ni', 'prod', 'sum', 'minus', 'lowast', 'radic', 'prop', 'infin', 'ang', 'and', 'or', 'cap', 'cup', 'int', 'there4', 'sim', 'cong', 'asymp', 'ne', 'equiv', 'le', 'ge', 'sub', 'sup', 'nsub', 'sube', 'supe', 'oplus', 'otimes', 'perp', 'sdot', 'lceil', 'rceil', 'lfloor', 'rfloor', 'lang', 'rang', 'loz', 'spades', 'clubs', 'hearts', 'diams'];
var HTML_CODES = [39, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 34, 38, 60, 62, 338, 339, 352, 353, 376, 710, 732, 8194, 8195, 8201, 8204, 8205, 8206, 8207, 8211, 8212, 8216, 8217, 8218, 8220, 8221, 8222, 8224, 8225, 8240, 8249, 8250, 8364, 402, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 931, 932, 933, 934, 935, 936, 937, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 977, 978, 982, 8226, 8230, 8242, 8243, 8254, 8260, 8472, 8465, 8476, 8482, 8501, 8592, 8593, 8594, 8595, 8596, 8629, 8656, 8657, 8658, 8659, 8660, 8704, 8706, 8707, 8709, 8711, 8712, 8713, 8715, 8719, 8721, 8722, 8727, 8730, 8733, 8734, 8736, 8743, 8744, 8745, 8746, 8747, 8756, 8764, 8773, 8776, 8800, 8801, 8804, 8805, 8834, 8835, 8836, 8838, 8839, 8853, 8855, 8869, 8901, 8968, 8969, 8970, 8971, 9001, 9002, 9674, 9824, 9827, 9829, 9830];
var alphaIndex = {};
var numIndex = {};
(function () {
    var i = 0;
    var length = HTML_ALPHA.length;
    while (i < length) {
        var a = HTML_ALPHA[i];
        var c = HTML_CODES[i];
        alphaIndex[a] = String.fromCharCode(c);
        numIndex[c] = a;
        i++;
    }
})();
var Html4Entities = /** @class */ (function () {
    function Html4Entities() {
    }
    Html4Entities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&(#?[\w\d]+);?/g, function (s, entity) {
            var chr;
            if (entity.charAt(0) === "#") {
                var code = entity.charAt(1).toLowerCase() === 'x' ?
                    parseInt(entity.substr(2), 16) :
                    parseInt(entity.substr(1));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        chr = String.fromCharCode(code);
                    }
                    else {
                        chr = surrogate_pairs_1.fromCodePoint(code);
                    }
                }
            }
            else {
                chr = alphaIndex[entity];
            }
            return chr || s;
        });
    };
    Html4Entities.decode = function (str) {
        return new Html4Entities().decode(str);
    };
    Html4Entities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var alpha = numIndex[str.charCodeAt(i)];
            result += alpha ? "&" + alpha + ";" : str.charAt(i);
            i++;
        }
        return result;
    };
    Html4Entities.encode = function (str) {
        return new Html4Entities().encode(str);
    };
    Html4Entities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var cc = str.charCodeAt(i);
            var alpha = numIndex[cc];
            if (alpha) {
                result += "&" + alpha + ";";
            }
            else if (cc < 32 || cc > 126) {
                if (cc >= surrogate_pairs_1.highSurrogateFrom && cc <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + cc + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    Html4Entities.encodeNonUTF = function (str) {
        return new Html4Entities().encodeNonUTF(str);
    };
    Html4Entities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i++;
            }
            else {
                result += '&#' + c + ';';
            }
            i++;
        }
        return result;
    };
    Html4Entities.encodeNonASCII = function (str) {
        return new Html4Entities().encodeNonASCII(str);
    };
    return Html4Entities;
}());
exports.Html4Entities = Html4Entities;


/***/ }),

/***/ "./node_modules/html-entities/lib/html5-entities.js":
/*!**********************************************************!*\
  !*** ./node_modules/html-entities/lib/html5-entities.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var ENTITIES = [['Aacute', [193]], ['aacute', [225]], ['Abreve', [258]], ['abreve', [259]], ['ac', [8766]], ['acd', [8767]], ['acE', [8766, 819]], ['Acirc', [194]], ['acirc', [226]], ['acute', [180]], ['Acy', [1040]], ['acy', [1072]], ['AElig', [198]], ['aelig', [230]], ['af', [8289]], ['Afr', [120068]], ['afr', [120094]], ['Agrave', [192]], ['agrave', [224]], ['alefsym', [8501]], ['aleph', [8501]], ['Alpha', [913]], ['alpha', [945]], ['Amacr', [256]], ['amacr', [257]], ['amalg', [10815]], ['amp', [38]], ['AMP', [38]], ['andand', [10837]], ['And', [10835]], ['and', [8743]], ['andd', [10844]], ['andslope', [10840]], ['andv', [10842]], ['ang', [8736]], ['ange', [10660]], ['angle', [8736]], ['angmsdaa', [10664]], ['angmsdab', [10665]], ['angmsdac', [10666]], ['angmsdad', [10667]], ['angmsdae', [10668]], ['angmsdaf', [10669]], ['angmsdag', [10670]], ['angmsdah', [10671]], ['angmsd', [8737]], ['angrt', [8735]], ['angrtvb', [8894]], ['angrtvbd', [10653]], ['angsph', [8738]], ['angst', [197]], ['angzarr', [9084]], ['Aogon', [260]], ['aogon', [261]], ['Aopf', [120120]], ['aopf', [120146]], ['apacir', [10863]], ['ap', [8776]], ['apE', [10864]], ['ape', [8778]], ['apid', [8779]], ['apos', [39]], ['ApplyFunction', [8289]], ['approx', [8776]], ['approxeq', [8778]], ['Aring', [197]], ['aring', [229]], ['Ascr', [119964]], ['ascr', [119990]], ['Assign', [8788]], ['ast', [42]], ['asymp', [8776]], ['asympeq', [8781]], ['Atilde', [195]], ['atilde', [227]], ['Auml', [196]], ['auml', [228]], ['awconint', [8755]], ['awint', [10769]], ['backcong', [8780]], ['backepsilon', [1014]], ['backprime', [8245]], ['backsim', [8765]], ['backsimeq', [8909]], ['Backslash', [8726]], ['Barv', [10983]], ['barvee', [8893]], ['barwed', [8965]], ['Barwed', [8966]], ['barwedge', [8965]], ['bbrk', [9141]], ['bbrktbrk', [9142]], ['bcong', [8780]], ['Bcy', [1041]], ['bcy', [1073]], ['bdquo', [8222]], ['becaus', [8757]], ['because', [8757]], ['Because', [8757]], ['bemptyv', [10672]], ['bepsi', [1014]], ['bernou', [8492]], ['Bernoullis', [8492]], ['Beta', [914]], ['beta', [946]], ['beth', [8502]], ['between', [8812]], ['Bfr', [120069]], ['bfr', [120095]], ['bigcap', [8898]], ['bigcirc', [9711]], ['bigcup', [8899]], ['bigodot', [10752]], ['bigoplus', [10753]], ['bigotimes', [10754]], ['bigsqcup', [10758]], ['bigstar', [9733]], ['bigtriangledown', [9661]], ['bigtriangleup', [9651]], ['biguplus', [10756]], ['bigvee', [8897]], ['bigwedge', [8896]], ['bkarow', [10509]], ['blacklozenge', [10731]], ['blacksquare', [9642]], ['blacktriangle', [9652]], ['blacktriangledown', [9662]], ['blacktriangleleft', [9666]], ['blacktriangleright', [9656]], ['blank', [9251]], ['blk12', [9618]], ['blk14', [9617]], ['blk34', [9619]], ['block', [9608]], ['bne', [61, 8421]], ['bnequiv', [8801, 8421]], ['bNot', [10989]], ['bnot', [8976]], ['Bopf', [120121]], ['bopf', [120147]], ['bot', [8869]], ['bottom', [8869]], ['bowtie', [8904]], ['boxbox', [10697]], ['boxdl', [9488]], ['boxdL', [9557]], ['boxDl', [9558]], ['boxDL', [9559]], ['boxdr', [9484]], ['boxdR', [9554]], ['boxDr', [9555]], ['boxDR', [9556]], ['boxh', [9472]], ['boxH', [9552]], ['boxhd', [9516]], ['boxHd', [9572]], ['boxhD', [9573]], ['boxHD', [9574]], ['boxhu', [9524]], ['boxHu', [9575]], ['boxhU', [9576]], ['boxHU', [9577]], ['boxminus', [8863]], ['boxplus', [8862]], ['boxtimes', [8864]], ['boxul', [9496]], ['boxuL', [9563]], ['boxUl', [9564]], ['boxUL', [9565]], ['boxur', [9492]], ['boxuR', [9560]], ['boxUr', [9561]], ['boxUR', [9562]], ['boxv', [9474]], ['boxV', [9553]], ['boxvh', [9532]], ['boxvH', [9578]], ['boxVh', [9579]], ['boxVH', [9580]], ['boxvl', [9508]], ['boxvL', [9569]], ['boxVl', [9570]], ['boxVL', [9571]], ['boxvr', [9500]], ['boxvR', [9566]], ['boxVr', [9567]], ['boxVR', [9568]], ['bprime', [8245]], ['breve', [728]], ['Breve', [728]], ['brvbar', [166]], ['bscr', [119991]], ['Bscr', [8492]], ['bsemi', [8271]], ['bsim', [8765]], ['bsime', [8909]], ['bsolb', [10693]], ['bsol', [92]], ['bsolhsub', [10184]], ['bull', [8226]], ['bullet', [8226]], ['bump', [8782]], ['bumpE', [10926]], ['bumpe', [8783]], ['Bumpeq', [8782]], ['bumpeq', [8783]], ['Cacute', [262]], ['cacute', [263]], ['capand', [10820]], ['capbrcup', [10825]], ['capcap', [10827]], ['cap', [8745]], ['Cap', [8914]], ['capcup', [10823]], ['capdot', [10816]], ['CapitalDifferentialD', [8517]], ['caps', [8745, 65024]], ['caret', [8257]], ['caron', [711]], ['Cayleys', [8493]], ['ccaps', [10829]], ['Ccaron', [268]], ['ccaron', [269]], ['Ccedil', [199]], ['ccedil', [231]], ['Ccirc', [264]], ['ccirc', [265]], ['Cconint', [8752]], ['ccups', [10828]], ['ccupssm', [10832]], ['Cdot', [266]], ['cdot', [267]], ['cedil', [184]], ['Cedilla', [184]], ['cemptyv', [10674]], ['cent', [162]], ['centerdot', [183]], ['CenterDot', [183]], ['cfr', [120096]], ['Cfr', [8493]], ['CHcy', [1063]], ['chcy', [1095]], ['check', [10003]], ['checkmark', [10003]], ['Chi', [935]], ['chi', [967]], ['circ', [710]], ['circeq', [8791]], ['circlearrowleft', [8634]], ['circlearrowright', [8635]], ['circledast', [8859]], ['circledcirc', [8858]], ['circleddash', [8861]], ['CircleDot', [8857]], ['circledR', [174]], ['circledS', [9416]], ['CircleMinus', [8854]], ['CirclePlus', [8853]], ['CircleTimes', [8855]], ['cir', [9675]], ['cirE', [10691]], ['cire', [8791]], ['cirfnint', [10768]], ['cirmid', [10991]], ['cirscir', [10690]], ['ClockwiseContourIntegral', [8754]], ['clubs', [9827]], ['clubsuit', [9827]], ['colon', [58]], ['Colon', [8759]], ['Colone', [10868]], ['colone', [8788]], ['coloneq', [8788]], ['comma', [44]], ['commat', [64]], ['comp', [8705]], ['compfn', [8728]], ['complement', [8705]], ['complexes', [8450]], ['cong', [8773]], ['congdot', [10861]], ['Congruent', [8801]], ['conint', [8750]], ['Conint', [8751]], ['ContourIntegral', [8750]], ['copf', [120148]], ['Copf', [8450]], ['coprod', [8720]], ['Coproduct', [8720]], ['copy', [169]], ['COPY', [169]], ['copysr', [8471]], ['CounterClockwiseContourIntegral', [8755]], ['crarr', [8629]], ['cross', [10007]], ['Cross', [10799]], ['Cscr', [119966]], ['cscr', [119992]], ['csub', [10959]], ['csube', [10961]], ['csup', [10960]], ['csupe', [10962]], ['ctdot', [8943]], ['cudarrl', [10552]], ['cudarrr', [10549]], ['cuepr', [8926]], ['cuesc', [8927]], ['cularr', [8630]], ['cularrp', [10557]], ['cupbrcap', [10824]], ['cupcap', [10822]], ['CupCap', [8781]], ['cup', [8746]], ['Cup', [8915]], ['cupcup', [10826]], ['cupdot', [8845]], ['cupor', [10821]], ['cups', [8746, 65024]], ['curarr', [8631]], ['curarrm', [10556]], ['curlyeqprec', [8926]], ['curlyeqsucc', [8927]], ['curlyvee', [8910]], ['curlywedge', [8911]], ['curren', [164]], ['curvearrowleft', [8630]], ['curvearrowright', [8631]], ['cuvee', [8910]], ['cuwed', [8911]], ['cwconint', [8754]], ['cwint', [8753]], ['cylcty', [9005]], ['dagger', [8224]], ['Dagger', [8225]], ['daleth', [8504]], ['darr', [8595]], ['Darr', [8609]], ['dArr', [8659]], ['dash', [8208]], ['Dashv', [10980]], ['dashv', [8867]], ['dbkarow', [10511]], ['dblac', [733]], ['Dcaron', [270]], ['dcaron', [271]], ['Dcy', [1044]], ['dcy', [1076]], ['ddagger', [8225]], ['ddarr', [8650]], ['DD', [8517]], ['dd', [8518]], ['DDotrahd', [10513]], ['ddotseq', [10871]], ['deg', [176]], ['Del', [8711]], ['Delta', [916]], ['delta', [948]], ['demptyv', [10673]], ['dfisht', [10623]], ['Dfr', [120071]], ['dfr', [120097]], ['dHar', [10597]], ['dharl', [8643]], ['dharr', [8642]], ['DiacriticalAcute', [180]], ['DiacriticalDot', [729]], ['DiacriticalDoubleAcute', [733]], ['DiacriticalGrave', [96]], ['DiacriticalTilde', [732]], ['diam', [8900]], ['diamond', [8900]], ['Diamond', [8900]], ['diamondsuit', [9830]], ['diams', [9830]], ['die', [168]], ['DifferentialD', [8518]], ['digamma', [989]], ['disin', [8946]], ['div', [247]], ['divide', [247]], ['divideontimes', [8903]], ['divonx', [8903]], ['DJcy', [1026]], ['djcy', [1106]], ['dlcorn', [8990]], ['dlcrop', [8973]], ['dollar', [36]], ['Dopf', [120123]], ['dopf', [120149]], ['Dot', [168]], ['dot', [729]], ['DotDot', [8412]], ['doteq', [8784]], ['doteqdot', [8785]], ['DotEqual', [8784]], ['dotminus', [8760]], ['dotplus', [8724]], ['dotsquare', [8865]], ['doublebarwedge', [8966]], ['DoubleContourIntegral', [8751]], ['DoubleDot', [168]], ['DoubleDownArrow', [8659]], ['DoubleLeftArrow', [8656]], ['DoubleLeftRightArrow', [8660]], ['DoubleLeftTee', [10980]], ['DoubleLongLeftArrow', [10232]], ['DoubleLongLeftRightArrow', [10234]], ['DoubleLongRightArrow', [10233]], ['DoubleRightArrow', [8658]], ['DoubleRightTee', [8872]], ['DoubleUpArrow', [8657]], ['DoubleUpDownArrow', [8661]], ['DoubleVerticalBar', [8741]], ['DownArrowBar', [10515]], ['downarrow', [8595]], ['DownArrow', [8595]], ['Downarrow', [8659]], ['DownArrowUpArrow', [8693]], ['DownBreve', [785]], ['downdownarrows', [8650]], ['downharpoonleft', [8643]], ['downharpoonright', [8642]], ['DownLeftRightVector', [10576]], ['DownLeftTeeVector', [10590]], ['DownLeftVectorBar', [10582]], ['DownLeftVector', [8637]], ['DownRightTeeVector', [10591]], ['DownRightVectorBar', [10583]], ['DownRightVector', [8641]], ['DownTeeArrow', [8615]], ['DownTee', [8868]], ['drbkarow', [10512]], ['drcorn', [8991]], ['drcrop', [8972]], ['Dscr', [119967]], ['dscr', [119993]], ['DScy', [1029]], ['dscy', [1109]], ['dsol', [10742]], ['Dstrok', [272]], ['dstrok', [273]], ['dtdot', [8945]], ['dtri', [9663]], ['dtrif', [9662]], ['duarr', [8693]], ['duhar', [10607]], ['dwangle', [10662]], ['DZcy', [1039]], ['dzcy', [1119]], ['dzigrarr', [10239]], ['Eacute', [201]], ['eacute', [233]], ['easter', [10862]], ['Ecaron', [282]], ['ecaron', [283]], ['Ecirc', [202]], ['ecirc', [234]], ['ecir', [8790]], ['ecolon', [8789]], ['Ecy', [1069]], ['ecy', [1101]], ['eDDot', [10871]], ['Edot', [278]], ['edot', [279]], ['eDot', [8785]], ['ee', [8519]], ['efDot', [8786]], ['Efr', [120072]], ['efr', [120098]], ['eg', [10906]], ['Egrave', [200]], ['egrave', [232]], ['egs', [10902]], ['egsdot', [10904]], ['el', [10905]], ['Element', [8712]], ['elinters', [9191]], ['ell', [8467]], ['els', [10901]], ['elsdot', [10903]], ['Emacr', [274]], ['emacr', [275]], ['empty', [8709]], ['emptyset', [8709]], ['EmptySmallSquare', [9723]], ['emptyv', [8709]], ['EmptyVerySmallSquare', [9643]], ['emsp13', [8196]], ['emsp14', [8197]], ['emsp', [8195]], ['ENG', [330]], ['eng', [331]], ['ensp', [8194]], ['Eogon', [280]], ['eogon', [281]], ['Eopf', [120124]], ['eopf', [120150]], ['epar', [8917]], ['eparsl', [10723]], ['eplus', [10865]], ['epsi', [949]], ['Epsilon', [917]], ['epsilon', [949]], ['epsiv', [1013]], ['eqcirc', [8790]], ['eqcolon', [8789]], ['eqsim', [8770]], ['eqslantgtr', [10902]], ['eqslantless', [10901]], ['Equal', [10869]], ['equals', [61]], ['EqualTilde', [8770]], ['equest', [8799]], ['Equilibrium', [8652]], ['equiv', [8801]], ['equivDD', [10872]], ['eqvparsl', [10725]], ['erarr', [10609]], ['erDot', [8787]], ['escr', [8495]], ['Escr', [8496]], ['esdot', [8784]], ['Esim', [10867]], ['esim', [8770]], ['Eta', [919]], ['eta', [951]], ['ETH', [208]], ['eth', [240]], ['Euml', [203]], ['euml', [235]], ['euro', [8364]], ['excl', [33]], ['exist', [8707]], ['Exists', [8707]], ['expectation', [8496]], ['exponentiale', [8519]], ['ExponentialE', [8519]], ['fallingdotseq', [8786]], ['Fcy', [1060]], ['fcy', [1092]], ['female', [9792]], ['ffilig', [64259]], ['fflig', [64256]], ['ffllig', [64260]], ['Ffr', [120073]], ['ffr', [120099]], ['filig', [64257]], ['FilledSmallSquare', [9724]], ['FilledVerySmallSquare', [9642]], ['fjlig', [102, 106]], ['flat', [9837]], ['fllig', [64258]], ['fltns', [9649]], ['fnof', [402]], ['Fopf', [120125]], ['fopf', [120151]], ['forall', [8704]], ['ForAll', [8704]], ['fork', [8916]], ['forkv', [10969]], ['Fouriertrf', [8497]], ['fpartint', [10765]], ['frac12', [189]], ['frac13', [8531]], ['frac14', [188]], ['frac15', [8533]], ['frac16', [8537]], ['frac18', [8539]], ['frac23', [8532]], ['frac25', [8534]], ['frac34', [190]], ['frac35', [8535]], ['frac38', [8540]], ['frac45', [8536]], ['frac56', [8538]], ['frac58', [8541]], ['frac78', [8542]], ['frasl', [8260]], ['frown', [8994]], ['fscr', [119995]], ['Fscr', [8497]], ['gacute', [501]], ['Gamma', [915]], ['gamma', [947]], ['Gammad', [988]], ['gammad', [989]], ['gap', [10886]], ['Gbreve', [286]], ['gbreve', [287]], ['Gcedil', [290]], ['Gcirc', [284]], ['gcirc', [285]], ['Gcy', [1043]], ['gcy', [1075]], ['Gdot', [288]], ['gdot', [289]], ['ge', [8805]], ['gE', [8807]], ['gEl', [10892]], ['gel', [8923]], ['geq', [8805]], ['geqq', [8807]], ['geqslant', [10878]], ['gescc', [10921]], ['ges', [10878]], ['gesdot', [10880]], ['gesdoto', [10882]], ['gesdotol', [10884]], ['gesl', [8923, 65024]], ['gesles', [10900]], ['Gfr', [120074]], ['gfr', [120100]], ['gg', [8811]], ['Gg', [8921]], ['ggg', [8921]], ['gimel', [8503]], ['GJcy', [1027]], ['gjcy', [1107]], ['gla', [10917]], ['gl', [8823]], ['glE', [10898]], ['glj', [10916]], ['gnap', [10890]], ['gnapprox', [10890]], ['gne', [10888]], ['gnE', [8809]], ['gneq', [10888]], ['gneqq', [8809]], ['gnsim', [8935]], ['Gopf', [120126]], ['gopf', [120152]], ['grave', [96]], ['GreaterEqual', [8805]], ['GreaterEqualLess', [8923]], ['GreaterFullEqual', [8807]], ['GreaterGreater', [10914]], ['GreaterLess', [8823]], ['GreaterSlantEqual', [10878]], ['GreaterTilde', [8819]], ['Gscr', [119970]], ['gscr', [8458]], ['gsim', [8819]], ['gsime', [10894]], ['gsiml', [10896]], ['gtcc', [10919]], ['gtcir', [10874]], ['gt', [62]], ['GT', [62]], ['Gt', [8811]], ['gtdot', [8919]], ['gtlPar', [10645]], ['gtquest', [10876]], ['gtrapprox', [10886]], ['gtrarr', [10616]], ['gtrdot', [8919]], ['gtreqless', [8923]], ['gtreqqless', [10892]], ['gtrless', [8823]], ['gtrsim', [8819]], ['gvertneqq', [8809, 65024]], ['gvnE', [8809, 65024]], ['Hacek', [711]], ['hairsp', [8202]], ['half', [189]], ['hamilt', [8459]], ['HARDcy', [1066]], ['hardcy', [1098]], ['harrcir', [10568]], ['harr', [8596]], ['hArr', [8660]], ['harrw', [8621]], ['Hat', [94]], ['hbar', [8463]], ['Hcirc', [292]], ['hcirc', [293]], ['hearts', [9829]], ['heartsuit', [9829]], ['hellip', [8230]], ['hercon', [8889]], ['hfr', [120101]], ['Hfr', [8460]], ['HilbertSpace', [8459]], ['hksearow', [10533]], ['hkswarow', [10534]], ['hoarr', [8703]], ['homtht', [8763]], ['hookleftarrow', [8617]], ['hookrightarrow', [8618]], ['hopf', [120153]], ['Hopf', [8461]], ['horbar', [8213]], ['HorizontalLine', [9472]], ['hscr', [119997]], ['Hscr', [8459]], ['hslash', [8463]], ['Hstrok', [294]], ['hstrok', [295]], ['HumpDownHump', [8782]], ['HumpEqual', [8783]], ['hybull', [8259]], ['hyphen', [8208]], ['Iacute', [205]], ['iacute', [237]], ['ic', [8291]], ['Icirc', [206]], ['icirc', [238]], ['Icy', [1048]], ['icy', [1080]], ['Idot', [304]], ['IEcy', [1045]], ['iecy', [1077]], ['iexcl', [161]], ['iff', [8660]], ['ifr', [120102]], ['Ifr', [8465]], ['Igrave', [204]], ['igrave', [236]], ['ii', [8520]], ['iiiint', [10764]], ['iiint', [8749]], ['iinfin', [10716]], ['iiota', [8489]], ['IJlig', [306]], ['ijlig', [307]], ['Imacr', [298]], ['imacr', [299]], ['image', [8465]], ['ImaginaryI', [8520]], ['imagline', [8464]], ['imagpart', [8465]], ['imath', [305]], ['Im', [8465]], ['imof', [8887]], ['imped', [437]], ['Implies', [8658]], ['incare', [8453]], ['in', [8712]], ['infin', [8734]], ['infintie', [10717]], ['inodot', [305]], ['intcal', [8890]], ['int', [8747]], ['Int', [8748]], ['integers', [8484]], ['Integral', [8747]], ['intercal', [8890]], ['Intersection', [8898]], ['intlarhk', [10775]], ['intprod', [10812]], ['InvisibleComma', [8291]], ['InvisibleTimes', [8290]], ['IOcy', [1025]], ['iocy', [1105]], ['Iogon', [302]], ['iogon', [303]], ['Iopf', [120128]], ['iopf', [120154]], ['Iota', [921]], ['iota', [953]], ['iprod', [10812]], ['iquest', [191]], ['iscr', [119998]], ['Iscr', [8464]], ['isin', [8712]], ['isindot', [8949]], ['isinE', [8953]], ['isins', [8948]], ['isinsv', [8947]], ['isinv', [8712]], ['it', [8290]], ['Itilde', [296]], ['itilde', [297]], ['Iukcy', [1030]], ['iukcy', [1110]], ['Iuml', [207]], ['iuml', [239]], ['Jcirc', [308]], ['jcirc', [309]], ['Jcy', [1049]], ['jcy', [1081]], ['Jfr', [120077]], ['jfr', [120103]], ['jmath', [567]], ['Jopf', [120129]], ['jopf', [120155]], ['Jscr', [119973]], ['jscr', [119999]], ['Jsercy', [1032]], ['jsercy', [1112]], ['Jukcy', [1028]], ['jukcy', [1108]], ['Kappa', [922]], ['kappa', [954]], ['kappav', [1008]], ['Kcedil', [310]], ['kcedil', [311]], ['Kcy', [1050]], ['kcy', [1082]], ['Kfr', [120078]], ['kfr', [120104]], ['kgreen', [312]], ['KHcy', [1061]], ['khcy', [1093]], ['KJcy', [1036]], ['kjcy', [1116]], ['Kopf', [120130]], ['kopf', [120156]], ['Kscr', [119974]], ['kscr', [120000]], ['lAarr', [8666]], ['Lacute', [313]], ['lacute', [314]], ['laemptyv', [10676]], ['lagran', [8466]], ['Lambda', [923]], ['lambda', [955]], ['lang', [10216]], ['Lang', [10218]], ['langd', [10641]], ['langle', [10216]], ['lap', [10885]], ['Laplacetrf', [8466]], ['laquo', [171]], ['larrb', [8676]], ['larrbfs', [10527]], ['larr', [8592]], ['Larr', [8606]], ['lArr', [8656]], ['larrfs', [10525]], ['larrhk', [8617]], ['larrlp', [8619]], ['larrpl', [10553]], ['larrsim', [10611]], ['larrtl', [8610]], ['latail', [10521]], ['lAtail', [10523]], ['lat', [10923]], ['late', [10925]], ['lates', [10925, 65024]], ['lbarr', [10508]], ['lBarr', [10510]], ['lbbrk', [10098]], ['lbrace', [123]], ['lbrack', [91]], ['lbrke', [10635]], ['lbrksld', [10639]], ['lbrkslu', [10637]], ['Lcaron', [317]], ['lcaron', [318]], ['Lcedil', [315]], ['lcedil', [316]], ['lceil', [8968]], ['lcub', [123]], ['Lcy', [1051]], ['lcy', [1083]], ['ldca', [10550]], ['ldquo', [8220]], ['ldquor', [8222]], ['ldrdhar', [10599]], ['ldrushar', [10571]], ['ldsh', [8626]], ['le', [8804]], ['lE', [8806]], ['LeftAngleBracket', [10216]], ['LeftArrowBar', [8676]], ['leftarrow', [8592]], ['LeftArrow', [8592]], ['Leftarrow', [8656]], ['LeftArrowRightArrow', [8646]], ['leftarrowtail', [8610]], ['LeftCeiling', [8968]], ['LeftDoubleBracket', [10214]], ['LeftDownTeeVector', [10593]], ['LeftDownVectorBar', [10585]], ['LeftDownVector', [8643]], ['LeftFloor', [8970]], ['leftharpoondown', [8637]], ['leftharpoonup', [8636]], ['leftleftarrows', [8647]], ['leftrightarrow', [8596]], ['LeftRightArrow', [8596]], ['Leftrightarrow', [8660]], ['leftrightarrows', [8646]], ['leftrightharpoons', [8651]], ['leftrightsquigarrow', [8621]], ['LeftRightVector', [10574]], ['LeftTeeArrow', [8612]], ['LeftTee', [8867]], ['LeftTeeVector', [10586]], ['leftthreetimes', [8907]], ['LeftTriangleBar', [10703]], ['LeftTriangle', [8882]], ['LeftTriangleEqual', [8884]], ['LeftUpDownVector', [10577]], ['LeftUpTeeVector', [10592]], ['LeftUpVectorBar', [10584]], ['LeftUpVector', [8639]], ['LeftVectorBar', [10578]], ['LeftVector', [8636]], ['lEg', [10891]], ['leg', [8922]], ['leq', [8804]], ['leqq', [8806]], ['leqslant', [10877]], ['lescc', [10920]], ['les', [10877]], ['lesdot', [10879]], ['lesdoto', [10881]], ['lesdotor', [10883]], ['lesg', [8922, 65024]], ['lesges', [10899]], ['lessapprox', [10885]], ['lessdot', [8918]], ['lesseqgtr', [8922]], ['lesseqqgtr', [10891]], ['LessEqualGreater', [8922]], ['LessFullEqual', [8806]], ['LessGreater', [8822]], ['lessgtr', [8822]], ['LessLess', [10913]], ['lesssim', [8818]], ['LessSlantEqual', [10877]], ['LessTilde', [8818]], ['lfisht', [10620]], ['lfloor', [8970]], ['Lfr', [120079]], ['lfr', [120105]], ['lg', [8822]], ['lgE', [10897]], ['lHar', [10594]], ['lhard', [8637]], ['lharu', [8636]], ['lharul', [10602]], ['lhblk', [9604]], ['LJcy', [1033]], ['ljcy', [1113]], ['llarr', [8647]], ['ll', [8810]], ['Ll', [8920]], ['llcorner', [8990]], ['Lleftarrow', [8666]], ['llhard', [10603]], ['lltri', [9722]], ['Lmidot', [319]], ['lmidot', [320]], ['lmoustache', [9136]], ['lmoust', [9136]], ['lnap', [10889]], ['lnapprox', [10889]], ['lne', [10887]], ['lnE', [8808]], ['lneq', [10887]], ['lneqq', [8808]], ['lnsim', [8934]], ['loang', [10220]], ['loarr', [8701]], ['lobrk', [10214]], ['longleftarrow', [10229]], ['LongLeftArrow', [10229]], ['Longleftarrow', [10232]], ['longleftrightarrow', [10231]], ['LongLeftRightArrow', [10231]], ['Longleftrightarrow', [10234]], ['longmapsto', [10236]], ['longrightarrow', [10230]], ['LongRightArrow', [10230]], ['Longrightarrow', [10233]], ['looparrowleft', [8619]], ['looparrowright', [8620]], ['lopar', [10629]], ['Lopf', [120131]], ['lopf', [120157]], ['loplus', [10797]], ['lotimes', [10804]], ['lowast', [8727]], ['lowbar', [95]], ['LowerLeftArrow', [8601]], ['LowerRightArrow', [8600]], ['loz', [9674]], ['lozenge', [9674]], ['lozf', [10731]], ['lpar', [40]], ['lparlt', [10643]], ['lrarr', [8646]], ['lrcorner', [8991]], ['lrhar', [8651]], ['lrhard', [10605]], ['lrm', [8206]], ['lrtri', [8895]], ['lsaquo', [8249]], ['lscr', [120001]], ['Lscr', [8466]], ['lsh', [8624]], ['Lsh', [8624]], ['lsim', [8818]], ['lsime', [10893]], ['lsimg', [10895]], ['lsqb', [91]], ['lsquo', [8216]], ['lsquor', [8218]], ['Lstrok', [321]], ['lstrok', [322]], ['ltcc', [10918]], ['ltcir', [10873]], ['lt', [60]], ['LT', [60]], ['Lt', [8810]], ['ltdot', [8918]], ['lthree', [8907]], ['ltimes', [8905]], ['ltlarr', [10614]], ['ltquest', [10875]], ['ltri', [9667]], ['ltrie', [8884]], ['ltrif', [9666]], ['ltrPar', [10646]], ['lurdshar', [10570]], ['luruhar', [10598]], ['lvertneqq', [8808, 65024]], ['lvnE', [8808, 65024]], ['macr', [175]], ['male', [9794]], ['malt', [10016]], ['maltese', [10016]], ['Map', [10501]], ['map', [8614]], ['mapsto', [8614]], ['mapstodown', [8615]], ['mapstoleft', [8612]], ['mapstoup', [8613]], ['marker', [9646]], ['mcomma', [10793]], ['Mcy', [1052]], ['mcy', [1084]], ['mdash', [8212]], ['mDDot', [8762]], ['measuredangle', [8737]], ['MediumSpace', [8287]], ['Mellintrf', [8499]], ['Mfr', [120080]], ['mfr', [120106]], ['mho', [8487]], ['micro', [181]], ['midast', [42]], ['midcir', [10992]], ['mid', [8739]], ['middot', [183]], ['minusb', [8863]], ['minus', [8722]], ['minusd', [8760]], ['minusdu', [10794]], ['MinusPlus', [8723]], ['mlcp', [10971]], ['mldr', [8230]], ['mnplus', [8723]], ['models', [8871]], ['Mopf', [120132]], ['mopf', [120158]], ['mp', [8723]], ['mscr', [120002]], ['Mscr', [8499]], ['mstpos', [8766]], ['Mu', [924]], ['mu', [956]], ['multimap', [8888]], ['mumap', [8888]], ['nabla', [8711]], ['Nacute', [323]], ['nacute', [324]], ['nang', [8736, 8402]], ['nap', [8777]], ['napE', [10864, 824]], ['napid', [8779, 824]], ['napos', [329]], ['napprox', [8777]], ['natural', [9838]], ['naturals', [8469]], ['natur', [9838]], ['nbsp', [160]], ['nbump', [8782, 824]], ['nbumpe', [8783, 824]], ['ncap', [10819]], ['Ncaron', [327]], ['ncaron', [328]], ['Ncedil', [325]], ['ncedil', [326]], ['ncong', [8775]], ['ncongdot', [10861, 824]], ['ncup', [10818]], ['Ncy', [1053]], ['ncy', [1085]], ['ndash', [8211]], ['nearhk', [10532]], ['nearr', [8599]], ['neArr', [8663]], ['nearrow', [8599]], ['ne', [8800]], ['nedot', [8784, 824]], ['NegativeMediumSpace', [8203]], ['NegativeThickSpace', [8203]], ['NegativeThinSpace', [8203]], ['NegativeVeryThinSpace', [8203]], ['nequiv', [8802]], ['nesear', [10536]], ['nesim', [8770, 824]], ['NestedGreaterGreater', [8811]], ['NestedLessLess', [8810]], ['nexist', [8708]], ['nexists', [8708]], ['Nfr', [120081]], ['nfr', [120107]], ['ngE', [8807, 824]], ['nge', [8817]], ['ngeq', [8817]], ['ngeqq', [8807, 824]], ['ngeqslant', [10878, 824]], ['nges', [10878, 824]], ['nGg', [8921, 824]], ['ngsim', [8821]], ['nGt', [8811, 8402]], ['ngt', [8815]], ['ngtr', [8815]], ['nGtv', [8811, 824]], ['nharr', [8622]], ['nhArr', [8654]], ['nhpar', [10994]], ['ni', [8715]], ['nis', [8956]], ['nisd', [8954]], ['niv', [8715]], ['NJcy', [1034]], ['njcy', [1114]], ['nlarr', [8602]], ['nlArr', [8653]], ['nldr', [8229]], ['nlE', [8806, 824]], ['nle', [8816]], ['nleftarrow', [8602]], ['nLeftarrow', [8653]], ['nleftrightarrow', [8622]], ['nLeftrightarrow', [8654]], ['nleq', [8816]], ['nleqq', [8806, 824]], ['nleqslant', [10877, 824]], ['nles', [10877, 824]], ['nless', [8814]], ['nLl', [8920, 824]], ['nlsim', [8820]], ['nLt', [8810, 8402]], ['nlt', [8814]], ['nltri', [8938]], ['nltrie', [8940]], ['nLtv', [8810, 824]], ['nmid', [8740]], ['NoBreak', [8288]], ['NonBreakingSpace', [160]], ['nopf', [120159]], ['Nopf', [8469]], ['Not', [10988]], ['not', [172]], ['NotCongruent', [8802]], ['NotCupCap', [8813]], ['NotDoubleVerticalBar', [8742]], ['NotElement', [8713]], ['NotEqual', [8800]], ['NotEqualTilde', [8770, 824]], ['NotExists', [8708]], ['NotGreater', [8815]], ['NotGreaterEqual', [8817]], ['NotGreaterFullEqual', [8807, 824]], ['NotGreaterGreater', [8811, 824]], ['NotGreaterLess', [8825]], ['NotGreaterSlantEqual', [10878, 824]], ['NotGreaterTilde', [8821]], ['NotHumpDownHump', [8782, 824]], ['NotHumpEqual', [8783, 824]], ['notin', [8713]], ['notindot', [8949, 824]], ['notinE', [8953, 824]], ['notinva', [8713]], ['notinvb', [8951]], ['notinvc', [8950]], ['NotLeftTriangleBar', [10703, 824]], ['NotLeftTriangle', [8938]], ['NotLeftTriangleEqual', [8940]], ['NotLess', [8814]], ['NotLessEqual', [8816]], ['NotLessGreater', [8824]], ['NotLessLess', [8810, 824]], ['NotLessSlantEqual', [10877, 824]], ['NotLessTilde', [8820]], ['NotNestedGreaterGreater', [10914, 824]], ['NotNestedLessLess', [10913, 824]], ['notni', [8716]], ['notniva', [8716]], ['notnivb', [8958]], ['notnivc', [8957]], ['NotPrecedes', [8832]], ['NotPrecedesEqual', [10927, 824]], ['NotPrecedesSlantEqual', [8928]], ['NotReverseElement', [8716]], ['NotRightTriangleBar', [10704, 824]], ['NotRightTriangle', [8939]], ['NotRightTriangleEqual', [8941]], ['NotSquareSubset', [8847, 824]], ['NotSquareSubsetEqual', [8930]], ['NotSquareSuperset', [8848, 824]], ['NotSquareSupersetEqual', [8931]], ['NotSubset', [8834, 8402]], ['NotSubsetEqual', [8840]], ['NotSucceeds', [8833]], ['NotSucceedsEqual', [10928, 824]], ['NotSucceedsSlantEqual', [8929]], ['NotSucceedsTilde', [8831, 824]], ['NotSuperset', [8835, 8402]], ['NotSupersetEqual', [8841]], ['NotTilde', [8769]], ['NotTildeEqual', [8772]], ['NotTildeFullEqual', [8775]], ['NotTildeTilde', [8777]], ['NotVerticalBar', [8740]], ['nparallel', [8742]], ['npar', [8742]], ['nparsl', [11005, 8421]], ['npart', [8706, 824]], ['npolint', [10772]], ['npr', [8832]], ['nprcue', [8928]], ['nprec', [8832]], ['npreceq', [10927, 824]], ['npre', [10927, 824]], ['nrarrc', [10547, 824]], ['nrarr', [8603]], ['nrArr', [8655]], ['nrarrw', [8605, 824]], ['nrightarrow', [8603]], ['nRightarrow', [8655]], ['nrtri', [8939]], ['nrtrie', [8941]], ['nsc', [8833]], ['nsccue', [8929]], ['nsce', [10928, 824]], ['Nscr', [119977]], ['nscr', [120003]], ['nshortmid', [8740]], ['nshortparallel', [8742]], ['nsim', [8769]], ['nsime', [8772]], ['nsimeq', [8772]], ['nsmid', [8740]], ['nspar', [8742]], ['nsqsube', [8930]], ['nsqsupe', [8931]], ['nsub', [8836]], ['nsubE', [10949, 824]], ['nsube', [8840]], ['nsubset', [8834, 8402]], ['nsubseteq', [8840]], ['nsubseteqq', [10949, 824]], ['nsucc', [8833]], ['nsucceq', [10928, 824]], ['nsup', [8837]], ['nsupE', [10950, 824]], ['nsupe', [8841]], ['nsupset', [8835, 8402]], ['nsupseteq', [8841]], ['nsupseteqq', [10950, 824]], ['ntgl', [8825]], ['Ntilde', [209]], ['ntilde', [241]], ['ntlg', [8824]], ['ntriangleleft', [8938]], ['ntrianglelefteq', [8940]], ['ntriangleright', [8939]], ['ntrianglerighteq', [8941]], ['Nu', [925]], ['nu', [957]], ['num', [35]], ['numero', [8470]], ['numsp', [8199]], ['nvap', [8781, 8402]], ['nvdash', [8876]], ['nvDash', [8877]], ['nVdash', [8878]], ['nVDash', [8879]], ['nvge', [8805, 8402]], ['nvgt', [62, 8402]], ['nvHarr', [10500]], ['nvinfin', [10718]], ['nvlArr', [10498]], ['nvle', [8804, 8402]], ['nvlt', [60, 8402]], ['nvltrie', [8884, 8402]], ['nvrArr', [10499]], ['nvrtrie', [8885, 8402]], ['nvsim', [8764, 8402]], ['nwarhk', [10531]], ['nwarr', [8598]], ['nwArr', [8662]], ['nwarrow', [8598]], ['nwnear', [10535]], ['Oacute', [211]], ['oacute', [243]], ['oast', [8859]], ['Ocirc', [212]], ['ocirc', [244]], ['ocir', [8858]], ['Ocy', [1054]], ['ocy', [1086]], ['odash', [8861]], ['Odblac', [336]], ['odblac', [337]], ['odiv', [10808]], ['odot', [8857]], ['odsold', [10684]], ['OElig', [338]], ['oelig', [339]], ['ofcir', [10687]], ['Ofr', [120082]], ['ofr', [120108]], ['ogon', [731]], ['Ograve', [210]], ['ograve', [242]], ['ogt', [10689]], ['ohbar', [10677]], ['ohm', [937]], ['oint', [8750]], ['olarr', [8634]], ['olcir', [10686]], ['olcross', [10683]], ['oline', [8254]], ['olt', [10688]], ['Omacr', [332]], ['omacr', [333]], ['Omega', [937]], ['omega', [969]], ['Omicron', [927]], ['omicron', [959]], ['omid', [10678]], ['ominus', [8854]], ['Oopf', [120134]], ['oopf', [120160]], ['opar', [10679]], ['OpenCurlyDoubleQuote', [8220]], ['OpenCurlyQuote', [8216]], ['operp', [10681]], ['oplus', [8853]], ['orarr', [8635]], ['Or', [10836]], ['or', [8744]], ['ord', [10845]], ['order', [8500]], ['orderof', [8500]], ['ordf', [170]], ['ordm', [186]], ['origof', [8886]], ['oror', [10838]], ['orslope', [10839]], ['orv', [10843]], ['oS', [9416]], ['Oscr', [119978]], ['oscr', [8500]], ['Oslash', [216]], ['oslash', [248]], ['osol', [8856]], ['Otilde', [213]], ['otilde', [245]], ['otimesas', [10806]], ['Otimes', [10807]], ['otimes', [8855]], ['Ouml', [214]], ['ouml', [246]], ['ovbar', [9021]], ['OverBar', [8254]], ['OverBrace', [9182]], ['OverBracket', [9140]], ['OverParenthesis', [9180]], ['para', [182]], ['parallel', [8741]], ['par', [8741]], ['parsim', [10995]], ['parsl', [11005]], ['part', [8706]], ['PartialD', [8706]], ['Pcy', [1055]], ['pcy', [1087]], ['percnt', [37]], ['period', [46]], ['permil', [8240]], ['perp', [8869]], ['pertenk', [8241]], ['Pfr', [120083]], ['pfr', [120109]], ['Phi', [934]], ['phi', [966]], ['phiv', [981]], ['phmmat', [8499]], ['phone', [9742]], ['Pi', [928]], ['pi', [960]], ['pitchfork', [8916]], ['piv', [982]], ['planck', [8463]], ['planckh', [8462]], ['plankv', [8463]], ['plusacir', [10787]], ['plusb', [8862]], ['pluscir', [10786]], ['plus', [43]], ['plusdo', [8724]], ['plusdu', [10789]], ['pluse', [10866]], ['PlusMinus', [177]], ['plusmn', [177]], ['plussim', [10790]], ['plustwo', [10791]], ['pm', [177]], ['Poincareplane', [8460]], ['pointint', [10773]], ['popf', [120161]], ['Popf', [8473]], ['pound', [163]], ['prap', [10935]], ['Pr', [10939]], ['pr', [8826]], ['prcue', [8828]], ['precapprox', [10935]], ['prec', [8826]], ['preccurlyeq', [8828]], ['Precedes', [8826]], ['PrecedesEqual', [10927]], ['PrecedesSlantEqual', [8828]], ['PrecedesTilde', [8830]], ['preceq', [10927]], ['precnapprox', [10937]], ['precneqq', [10933]], ['precnsim', [8936]], ['pre', [10927]], ['prE', [10931]], ['precsim', [8830]], ['prime', [8242]], ['Prime', [8243]], ['primes', [8473]], ['prnap', [10937]], ['prnE', [10933]], ['prnsim', [8936]], ['prod', [8719]], ['Product', [8719]], ['profalar', [9006]], ['profline', [8978]], ['profsurf', [8979]], ['prop', [8733]], ['Proportional', [8733]], ['Proportion', [8759]], ['propto', [8733]], ['prsim', [8830]], ['prurel', [8880]], ['Pscr', [119979]], ['pscr', [120005]], ['Psi', [936]], ['psi', [968]], ['puncsp', [8200]], ['Qfr', [120084]], ['qfr', [120110]], ['qint', [10764]], ['qopf', [120162]], ['Qopf', [8474]], ['qprime', [8279]], ['Qscr', [119980]], ['qscr', [120006]], ['quaternions', [8461]], ['quatint', [10774]], ['quest', [63]], ['questeq', [8799]], ['quot', [34]], ['QUOT', [34]], ['rAarr', [8667]], ['race', [8765, 817]], ['Racute', [340]], ['racute', [341]], ['radic', [8730]], ['raemptyv', [10675]], ['rang', [10217]], ['Rang', [10219]], ['rangd', [10642]], ['range', [10661]], ['rangle', [10217]], ['raquo', [187]], ['rarrap', [10613]], ['rarrb', [8677]], ['rarrbfs', [10528]], ['rarrc', [10547]], ['rarr', [8594]], ['Rarr', [8608]], ['rArr', [8658]], ['rarrfs', [10526]], ['rarrhk', [8618]], ['rarrlp', [8620]], ['rarrpl', [10565]], ['rarrsim', [10612]], ['Rarrtl', [10518]], ['rarrtl', [8611]], ['rarrw', [8605]], ['ratail', [10522]], ['rAtail', [10524]], ['ratio', [8758]], ['rationals', [8474]], ['rbarr', [10509]], ['rBarr', [10511]], ['RBarr', [10512]], ['rbbrk', [10099]], ['rbrace', [125]], ['rbrack', [93]], ['rbrke', [10636]], ['rbrksld', [10638]], ['rbrkslu', [10640]], ['Rcaron', [344]], ['rcaron', [345]], ['Rcedil', [342]], ['rcedil', [343]], ['rceil', [8969]], ['rcub', [125]], ['Rcy', [1056]], ['rcy', [1088]], ['rdca', [10551]], ['rdldhar', [10601]], ['rdquo', [8221]], ['rdquor', [8221]], ['CloseCurlyDoubleQuote', [8221]], ['rdsh', [8627]], ['real', [8476]], ['realine', [8475]], ['realpart', [8476]], ['reals', [8477]], ['Re', [8476]], ['rect', [9645]], ['reg', [174]], ['REG', [174]], ['ReverseElement', [8715]], ['ReverseEquilibrium', [8651]], ['ReverseUpEquilibrium', [10607]], ['rfisht', [10621]], ['rfloor', [8971]], ['rfr', [120111]], ['Rfr', [8476]], ['rHar', [10596]], ['rhard', [8641]], ['rharu', [8640]], ['rharul', [10604]], ['Rho', [929]], ['rho', [961]], ['rhov', [1009]], ['RightAngleBracket', [10217]], ['RightArrowBar', [8677]], ['rightarrow', [8594]], ['RightArrow', [8594]], ['Rightarrow', [8658]], ['RightArrowLeftArrow', [8644]], ['rightarrowtail', [8611]], ['RightCeiling', [8969]], ['RightDoubleBracket', [10215]], ['RightDownTeeVector', [10589]], ['RightDownVectorBar', [10581]], ['RightDownVector', [8642]], ['RightFloor', [8971]], ['rightharpoondown', [8641]], ['rightharpoonup', [8640]], ['rightleftarrows', [8644]], ['rightleftharpoons', [8652]], ['rightrightarrows', [8649]], ['rightsquigarrow', [8605]], ['RightTeeArrow', [8614]], ['RightTee', [8866]], ['RightTeeVector', [10587]], ['rightthreetimes', [8908]], ['RightTriangleBar', [10704]], ['RightTriangle', [8883]], ['RightTriangleEqual', [8885]], ['RightUpDownVector', [10575]], ['RightUpTeeVector', [10588]], ['RightUpVectorBar', [10580]], ['RightUpVector', [8638]], ['RightVectorBar', [10579]], ['RightVector', [8640]], ['ring', [730]], ['risingdotseq', [8787]], ['rlarr', [8644]], ['rlhar', [8652]], ['rlm', [8207]], ['rmoustache', [9137]], ['rmoust', [9137]], ['rnmid', [10990]], ['roang', [10221]], ['roarr', [8702]], ['robrk', [10215]], ['ropar', [10630]], ['ropf', [120163]], ['Ropf', [8477]], ['roplus', [10798]], ['rotimes', [10805]], ['RoundImplies', [10608]], ['rpar', [41]], ['rpargt', [10644]], ['rppolint', [10770]], ['rrarr', [8649]], ['Rrightarrow', [8667]], ['rsaquo', [8250]], ['rscr', [120007]], ['Rscr', [8475]], ['rsh', [8625]], ['Rsh', [8625]], ['rsqb', [93]], ['rsquo', [8217]], ['rsquor', [8217]], ['CloseCurlyQuote', [8217]], ['rthree', [8908]], ['rtimes', [8906]], ['rtri', [9657]], ['rtrie', [8885]], ['rtrif', [9656]], ['rtriltri', [10702]], ['RuleDelayed', [10740]], ['ruluhar', [10600]], ['rx', [8478]], ['Sacute', [346]], ['sacute', [347]], ['sbquo', [8218]], ['scap', [10936]], ['Scaron', [352]], ['scaron', [353]], ['Sc', [10940]], ['sc', [8827]], ['sccue', [8829]], ['sce', [10928]], ['scE', [10932]], ['Scedil', [350]], ['scedil', [351]], ['Scirc', [348]], ['scirc', [349]], ['scnap', [10938]], ['scnE', [10934]], ['scnsim', [8937]], ['scpolint', [10771]], ['scsim', [8831]], ['Scy', [1057]], ['scy', [1089]], ['sdotb', [8865]], ['sdot', [8901]], ['sdote', [10854]], ['searhk', [10533]], ['searr', [8600]], ['seArr', [8664]], ['searrow', [8600]], ['sect', [167]], ['semi', [59]], ['seswar', [10537]], ['setminus', [8726]], ['setmn', [8726]], ['sext', [10038]], ['Sfr', [120086]], ['sfr', [120112]], ['sfrown', [8994]], ['sharp', [9839]], ['SHCHcy', [1065]], ['shchcy', [1097]], ['SHcy', [1064]], ['shcy', [1096]], ['ShortDownArrow', [8595]], ['ShortLeftArrow', [8592]], ['shortmid', [8739]], ['shortparallel', [8741]], ['ShortRightArrow', [8594]], ['ShortUpArrow', [8593]], ['shy', [173]], ['Sigma', [931]], ['sigma', [963]], ['sigmaf', [962]], ['sigmav', [962]], ['sim', [8764]], ['simdot', [10858]], ['sime', [8771]], ['simeq', [8771]], ['simg', [10910]], ['simgE', [10912]], ['siml', [10909]], ['simlE', [10911]], ['simne', [8774]], ['simplus', [10788]], ['simrarr', [10610]], ['slarr', [8592]], ['SmallCircle', [8728]], ['smallsetminus', [8726]], ['smashp', [10803]], ['smeparsl', [10724]], ['smid', [8739]], ['smile', [8995]], ['smt', [10922]], ['smte', [10924]], ['smtes', [10924, 65024]], ['SOFTcy', [1068]], ['softcy', [1100]], ['solbar', [9023]], ['solb', [10692]], ['sol', [47]], ['Sopf', [120138]], ['sopf', [120164]], ['spades', [9824]], ['spadesuit', [9824]], ['spar', [8741]], ['sqcap', [8851]], ['sqcaps', [8851, 65024]], ['sqcup', [8852]], ['sqcups', [8852, 65024]], ['Sqrt', [8730]], ['sqsub', [8847]], ['sqsube', [8849]], ['sqsubset', [8847]], ['sqsubseteq', [8849]], ['sqsup', [8848]], ['sqsupe', [8850]], ['sqsupset', [8848]], ['sqsupseteq', [8850]], ['square', [9633]], ['Square', [9633]], ['SquareIntersection', [8851]], ['SquareSubset', [8847]], ['SquareSubsetEqual', [8849]], ['SquareSuperset', [8848]], ['SquareSupersetEqual', [8850]], ['SquareUnion', [8852]], ['squarf', [9642]], ['squ', [9633]], ['squf', [9642]], ['srarr', [8594]], ['Sscr', [119982]], ['sscr', [120008]], ['ssetmn', [8726]], ['ssmile', [8995]], ['sstarf', [8902]], ['Star', [8902]], ['star', [9734]], ['starf', [9733]], ['straightepsilon', [1013]], ['straightphi', [981]], ['strns', [175]], ['sub', [8834]], ['Sub', [8912]], ['subdot', [10941]], ['subE', [10949]], ['sube', [8838]], ['subedot', [10947]], ['submult', [10945]], ['subnE', [10955]], ['subne', [8842]], ['subplus', [10943]], ['subrarr', [10617]], ['subset', [8834]], ['Subset', [8912]], ['subseteq', [8838]], ['subseteqq', [10949]], ['SubsetEqual', [8838]], ['subsetneq', [8842]], ['subsetneqq', [10955]], ['subsim', [10951]], ['subsub', [10965]], ['subsup', [10963]], ['succapprox', [10936]], ['succ', [8827]], ['succcurlyeq', [8829]], ['Succeeds', [8827]], ['SucceedsEqual', [10928]], ['SucceedsSlantEqual', [8829]], ['SucceedsTilde', [8831]], ['succeq', [10928]], ['succnapprox', [10938]], ['succneqq', [10934]], ['succnsim', [8937]], ['succsim', [8831]], ['SuchThat', [8715]], ['sum', [8721]], ['Sum', [8721]], ['sung', [9834]], ['sup1', [185]], ['sup2', [178]], ['sup3', [179]], ['sup', [8835]], ['Sup', [8913]], ['supdot', [10942]], ['supdsub', [10968]], ['supE', [10950]], ['supe', [8839]], ['supedot', [10948]], ['Superset', [8835]], ['SupersetEqual', [8839]], ['suphsol', [10185]], ['suphsub', [10967]], ['suplarr', [10619]], ['supmult', [10946]], ['supnE', [10956]], ['supne', [8843]], ['supplus', [10944]], ['supset', [8835]], ['Supset', [8913]], ['supseteq', [8839]], ['supseteqq', [10950]], ['supsetneq', [8843]], ['supsetneqq', [10956]], ['supsim', [10952]], ['supsub', [10964]], ['supsup', [10966]], ['swarhk', [10534]], ['swarr', [8601]], ['swArr', [8665]], ['swarrow', [8601]], ['swnwar', [10538]], ['szlig', [223]], ['Tab', [9]], ['target', [8982]], ['Tau', [932]], ['tau', [964]], ['tbrk', [9140]], ['Tcaron', [356]], ['tcaron', [357]], ['Tcedil', [354]], ['tcedil', [355]], ['Tcy', [1058]], ['tcy', [1090]], ['tdot', [8411]], ['telrec', [8981]], ['Tfr', [120087]], ['tfr', [120113]], ['there4', [8756]], ['therefore', [8756]], ['Therefore', [8756]], ['Theta', [920]], ['theta', [952]], ['thetasym', [977]], ['thetav', [977]], ['thickapprox', [8776]], ['thicksim', [8764]], ['ThickSpace', [8287, 8202]], ['ThinSpace', [8201]], ['thinsp', [8201]], ['thkap', [8776]], ['thksim', [8764]], ['THORN', [222]], ['thorn', [254]], ['tilde', [732]], ['Tilde', [8764]], ['TildeEqual', [8771]], ['TildeFullEqual', [8773]], ['TildeTilde', [8776]], ['timesbar', [10801]], ['timesb', [8864]], ['times', [215]], ['timesd', [10800]], ['tint', [8749]], ['toea', [10536]], ['topbot', [9014]], ['topcir', [10993]], ['top', [8868]], ['Topf', [120139]], ['topf', [120165]], ['topfork', [10970]], ['tosa', [10537]], ['tprime', [8244]], ['trade', [8482]], ['TRADE', [8482]], ['triangle', [9653]], ['triangledown', [9663]], ['triangleleft', [9667]], ['trianglelefteq', [8884]], ['triangleq', [8796]], ['triangleright', [9657]], ['trianglerighteq', [8885]], ['tridot', [9708]], ['trie', [8796]], ['triminus', [10810]], ['TripleDot', [8411]], ['triplus', [10809]], ['trisb', [10701]], ['tritime', [10811]], ['trpezium', [9186]], ['Tscr', [119983]], ['tscr', [120009]], ['TScy', [1062]], ['tscy', [1094]], ['TSHcy', [1035]], ['tshcy', [1115]], ['Tstrok', [358]], ['tstrok', [359]], ['twixt', [8812]], ['twoheadleftarrow', [8606]], ['twoheadrightarrow', [8608]], ['Uacute', [218]], ['uacute', [250]], ['uarr', [8593]], ['Uarr', [8607]], ['uArr', [8657]], ['Uarrocir', [10569]], ['Ubrcy', [1038]], ['ubrcy', [1118]], ['Ubreve', [364]], ['ubreve', [365]], ['Ucirc', [219]], ['ucirc', [251]], ['Ucy', [1059]], ['ucy', [1091]], ['udarr', [8645]], ['Udblac', [368]], ['udblac', [369]], ['udhar', [10606]], ['ufisht', [10622]], ['Ufr', [120088]], ['ufr', [120114]], ['Ugrave', [217]], ['ugrave', [249]], ['uHar', [10595]], ['uharl', [8639]], ['uharr', [8638]], ['uhblk', [9600]], ['ulcorn', [8988]], ['ulcorner', [8988]], ['ulcrop', [8975]], ['ultri', [9720]], ['Umacr', [362]], ['umacr', [363]], ['uml', [168]], ['UnderBar', [95]], ['UnderBrace', [9183]], ['UnderBracket', [9141]], ['UnderParenthesis', [9181]], ['Union', [8899]], ['UnionPlus', [8846]], ['Uogon', [370]], ['uogon', [371]], ['Uopf', [120140]], ['uopf', [120166]], ['UpArrowBar', [10514]], ['uparrow', [8593]], ['UpArrow', [8593]], ['Uparrow', [8657]], ['UpArrowDownArrow', [8645]], ['updownarrow', [8597]], ['UpDownArrow', [8597]], ['Updownarrow', [8661]], ['UpEquilibrium', [10606]], ['upharpoonleft', [8639]], ['upharpoonright', [8638]], ['uplus', [8846]], ['UpperLeftArrow', [8598]], ['UpperRightArrow', [8599]], ['upsi', [965]], ['Upsi', [978]], ['upsih', [978]], ['Upsilon', [933]], ['upsilon', [965]], ['UpTeeArrow', [8613]], ['UpTee', [8869]], ['upuparrows', [8648]], ['urcorn', [8989]], ['urcorner', [8989]], ['urcrop', [8974]], ['Uring', [366]], ['uring', [367]], ['urtri', [9721]], ['Uscr', [119984]], ['uscr', [120010]], ['utdot', [8944]], ['Utilde', [360]], ['utilde', [361]], ['utri', [9653]], ['utrif', [9652]], ['uuarr', [8648]], ['Uuml', [220]], ['uuml', [252]], ['uwangle', [10663]], ['vangrt', [10652]], ['varepsilon', [1013]], ['varkappa', [1008]], ['varnothing', [8709]], ['varphi', [981]], ['varpi', [982]], ['varpropto', [8733]], ['varr', [8597]], ['vArr', [8661]], ['varrho', [1009]], ['varsigma', [962]], ['varsubsetneq', [8842, 65024]], ['varsubsetneqq', [10955, 65024]], ['varsupsetneq', [8843, 65024]], ['varsupsetneqq', [10956, 65024]], ['vartheta', [977]], ['vartriangleleft', [8882]], ['vartriangleright', [8883]], ['vBar', [10984]], ['Vbar', [10987]], ['vBarv', [10985]], ['Vcy', [1042]], ['vcy', [1074]], ['vdash', [8866]], ['vDash', [8872]], ['Vdash', [8873]], ['VDash', [8875]], ['Vdashl', [10982]], ['veebar', [8891]], ['vee', [8744]], ['Vee', [8897]], ['veeeq', [8794]], ['vellip', [8942]], ['verbar', [124]], ['Verbar', [8214]], ['vert', [124]], ['Vert', [8214]], ['VerticalBar', [8739]], ['VerticalLine', [124]], ['VerticalSeparator', [10072]], ['VerticalTilde', [8768]], ['VeryThinSpace', [8202]], ['Vfr', [120089]], ['vfr', [120115]], ['vltri', [8882]], ['vnsub', [8834, 8402]], ['vnsup', [8835, 8402]], ['Vopf', [120141]], ['vopf', [120167]], ['vprop', [8733]], ['vrtri', [8883]], ['Vscr', [119985]], ['vscr', [120011]], ['vsubnE', [10955, 65024]], ['vsubne', [8842, 65024]], ['vsupnE', [10956, 65024]], ['vsupne', [8843, 65024]], ['Vvdash', [8874]], ['vzigzag', [10650]], ['Wcirc', [372]], ['wcirc', [373]], ['wedbar', [10847]], ['wedge', [8743]], ['Wedge', [8896]], ['wedgeq', [8793]], ['weierp', [8472]], ['Wfr', [120090]], ['wfr', [120116]], ['Wopf', [120142]], ['wopf', [120168]], ['wp', [8472]], ['wr', [8768]], ['wreath', [8768]], ['Wscr', [119986]], ['wscr', [120012]], ['xcap', [8898]], ['xcirc', [9711]], ['xcup', [8899]], ['xdtri', [9661]], ['Xfr', [120091]], ['xfr', [120117]], ['xharr', [10231]], ['xhArr', [10234]], ['Xi', [926]], ['xi', [958]], ['xlarr', [10229]], ['xlArr', [10232]], ['xmap', [10236]], ['xnis', [8955]], ['xodot', [10752]], ['Xopf', [120143]], ['xopf', [120169]], ['xoplus', [10753]], ['xotime', [10754]], ['xrarr', [10230]], ['xrArr', [10233]], ['Xscr', [119987]], ['xscr', [120013]], ['xsqcup', [10758]], ['xuplus', [10756]], ['xutri', [9651]], ['xvee', [8897]], ['xwedge', [8896]], ['Yacute', [221]], ['yacute', [253]], ['YAcy', [1071]], ['yacy', [1103]], ['Ycirc', [374]], ['ycirc', [375]], ['Ycy', [1067]], ['ycy', [1099]], ['yen', [165]], ['Yfr', [120092]], ['yfr', [120118]], ['YIcy', [1031]], ['yicy', [1111]], ['Yopf', [120144]], ['yopf', [120170]], ['Yscr', [119988]], ['yscr', [120014]], ['YUcy', [1070]], ['yucy', [1102]], ['yuml', [255]], ['Yuml', [376]], ['Zacute', [377]], ['zacute', [378]], ['Zcaron', [381]], ['zcaron', [382]], ['Zcy', [1047]], ['zcy', [1079]], ['Zdot', [379]], ['zdot', [380]], ['zeetrf', [8488]], ['ZeroWidthSpace', [8203]], ['Zeta', [918]], ['zeta', [950]], ['zfr', [120119]], ['Zfr', [8488]], ['ZHcy', [1046]], ['zhcy', [1078]], ['zigrarr', [8669]], ['zopf', [120171]], ['Zopf', [8484]], ['Zscr', [119989]], ['zscr', [120015]], ['zwj', [8205]], ['zwnj', [8204]]];
var DECODE_ONLY_ENTITIES = [['NewLine', [10]]];
var alphaIndex = {};
var charIndex = {};
createIndexes(alphaIndex, charIndex);
var Html5Entities = /** @class */ (function () {
    function Html5Entities() {
    }
    Html5Entities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&(#?[\w\d]+);?/g, function (s, entity) {
            var chr;
            if (entity.charAt(0) === "#") {
                var code = entity.charAt(1) === 'x' ?
                    parseInt(entity.substr(2).toLowerCase(), 16) :
                    parseInt(entity.substr(1));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        chr = String.fromCharCode(code);
                    }
                    else {
                        chr = surrogate_pairs_1.fromCodePoint(code);
                    }
                }
            }
            else {
                chr = alphaIndex[entity];
            }
            return chr || s;
        });
    };
    Html5Entities.decode = function (str) {
        return new Html5Entities().decode(str);
    };
    Html5Entities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var charInfo = charIndex[str.charCodeAt(i)];
            if (charInfo) {
                var alpha = charInfo[str.charCodeAt(i + 1)];
                if (alpha) {
                    i++;
                }
                else {
                    alpha = charInfo[''];
                }
                if (alpha) {
                    result += "&" + alpha + ";";
                    i++;
                    continue;
                }
            }
            result += str.charAt(i);
            i++;
        }
        return result;
    };
    Html5Entities.encode = function (str) {
        return new Html5Entities().encode(str);
    };
    Html5Entities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            var charInfo = charIndex[c];
            if (charInfo) {
                var alpha = charInfo[str.charCodeAt(i + 1)];
                if (alpha) {
                    i++;
                }
                else {
                    alpha = charInfo[''];
                }
                if (alpha) {
                    result += "&" + alpha + ";";
                    i++;
                    continue;
                }
            }
            if (c < 32 || c > 126) {
                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + c + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    Html5Entities.encodeNonUTF = function (str) {
        return new Html5Entities().encodeNonUTF(str);
    };
    Html5Entities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i += 2;
            }
            else {
                result += '&#' + c + ';';
                i++;
            }
        }
        return result;
    };
    Html5Entities.encodeNonASCII = function (str) {
        return new Html5Entities().encodeNonASCII(str);
    };
    return Html5Entities;
}());
exports.Html5Entities = Html5Entities;
function createIndexes(alphaIndex, charIndex) {
    var i = ENTITIES.length;
    while (i--) {
        var _a = ENTITIES[i], alpha = _a[0], _b = _a[1], chr = _b[0], chr2 = _b[1];
        var addChar = (chr < 32 || chr > 126) || chr === 62 || chr === 60 || chr === 38 || chr === 34 || chr === 39;
        var charInfo = void 0;
        if (addChar) {
            charInfo = charIndex[chr] = charIndex[chr] || {};
        }
        if (chr2) {
            alphaIndex[alpha] = String.fromCharCode(chr) + String.fromCharCode(chr2);
            addChar && (charInfo[chr2] = alpha);
        }
        else {
            alphaIndex[alpha] = String.fromCharCode(chr);
            addChar && (charInfo[''] = alpha);
        }
    }
    i = DECODE_ONLY_ENTITIES.length;
    while (i--) {
        var _c = DECODE_ONLY_ENTITIES[i], alpha = _c[0], _d = _c[1], chr = _d[0], chr2 = _d[1];
        alphaIndex[alpha] = String.fromCharCode(chr) + (chr2 ? String.fromCharCode(chr2) : '');
    }
}


/***/ }),

/***/ "./node_modules/html-entities/lib/index.js":
/*!*************************************************!*\
  !*** ./node_modules/html-entities/lib/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var xml_entities_1 = __webpack_require__(/*! ./xml-entities */ "./node_modules/html-entities/lib/xml-entities.js");
exports.XmlEntities = xml_entities_1.XmlEntities;
var html4_entities_1 = __webpack_require__(/*! ./html4-entities */ "./node_modules/html-entities/lib/html4-entities.js");
exports.Html4Entities = html4_entities_1.Html4Entities;
var html5_entities_1 = __webpack_require__(/*! ./html5-entities */ "./node_modules/html-entities/lib/html5-entities.js");
exports.Html5Entities = html5_entities_1.Html5Entities;
exports.AllHtmlEntities = html5_entities_1.Html5Entities;


/***/ }),

/***/ "./node_modules/html-entities/lib/surrogate-pairs.js":
/*!***********************************************************!*\
  !*** ./node_modules/html-entities/lib/surrogate-pairs.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.fromCodePoint = String.fromCodePoint || function (astralCodePoint) {
    return String.fromCharCode(Math.floor((astralCodePoint - 0x10000) / 0x400) + 0xD800, (astralCodePoint - 0x10000) % 0x400 + 0xDC00);
};
exports.getCodePoint = String.prototype.codePointAt ?
    function (input, position) {
        return input.codePointAt(position);
    } :
    function (input, position) {
        return (input.charCodeAt(position) - 0xD800) * 0x400
            + input.charCodeAt(position + 1) - 0xDC00 + 0x10000;
    };
exports.highSurrogateFrom = 0xD800;
exports.highSurrogateTo = 0xDBFF;


/***/ }),

/***/ "./node_modules/html-entities/lib/xml-entities.js":
/*!********************************************************!*\
  !*** ./node_modules/html-entities/lib/xml-entities.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var ALPHA_INDEX = {
    '&lt': '<',
    '&gt': '>',
    '&quot': '"',
    '&apos': '\'',
    '&amp': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&apos;': '\'',
    '&amp;': '&'
};
var CHAR_INDEX = {
    60: 'lt',
    62: 'gt',
    34: 'quot',
    39: 'apos',
    38: 'amp'
};
var CHAR_S_INDEX = {
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    '\'': '&apos;',
    '&': '&amp;'
};
var XmlEntities = /** @class */ (function () {
    function XmlEntities() {
    }
    XmlEntities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/[<>"'&]/g, function (s) {
            return CHAR_S_INDEX[s];
        });
    };
    XmlEntities.encode = function (str) {
        return new XmlEntities().encode(str);
    };
    XmlEntities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&#?[0-9a-zA-Z]+;?/g, function (s) {
            if (s.charAt(1) === '#') {
                var code = s.charAt(2).toLowerCase() === 'x' ?
                    parseInt(s.substr(3), 16) :
                    parseInt(s.substr(2));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        return String.fromCharCode(code);
                    }
                    else {
                        return surrogate_pairs_1.fromCodePoint(code);
                    }
                }
                return '';
            }
            return ALPHA_INDEX[s] || s;
        });
    };
    XmlEntities.decode = function (str) {
        return new XmlEntities().decode(str);
    };
    XmlEntities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            var alpha = CHAR_INDEX[c];
            if (alpha) {
                result += "&" + alpha + ";";
                i++;
                continue;
            }
            if (c < 32 || c > 126) {
                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + c + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    XmlEntities.encodeNonUTF = function (str) {
        return new XmlEntities().encodeNonUTF(str);
    };
    XmlEntities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i++;
            }
            else {
                result += '&#' + c + ';';
            }
            i++;
        }
        return result;
    };
    XmlEntities.encodeNonASCII = function (str) {
        return new XmlEntities().encodeNonASCII(str);
    };
    return XmlEntities;
}());
exports.XmlEntities = XmlEntities;


/***/ }),

/***/ "./node_modules/loglevel/lib/loglevel.js":
/*!***********************************************!*\
  !*** ./node_modules/loglevel/lib/loglevel.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
* loglevel - https://github.com/pimterry/loglevel
*
* Copyright (c) 2013 Tim Perry
* Licensed under the MIT license.
*/
(function (root, definition) {
    "use strict";
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {}
}(this, function () {
    "use strict";

    // Slightly dubious tricks to cut down minimized file size
    var noop = function() {};
    var undefinedType = "undefined";
    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (
        /Trident\/|MSIE /.test(window.navigator.userAgent)
    );

    var logMethods = [
        "trace",
        "debug",
        "info",
        "warn",
        "error"
    ];

    // Cross-browser bind equivalent that works at least back to IE6
    function bindMethod(obj, methodName) {
        var method = obj[methodName];
        if (typeof method.bind === 'function') {
            return method.bind(obj);
        } else {
            try {
                return Function.prototype.bind.call(method, obj);
            } catch (e) {
                // Missing bind shim or IE8 + Modernizr, fallback to wrapping
                return function() {
                    return Function.prototype.apply.apply(method, [obj, arguments]);
                };
            }
        }
    }

    // Trace() doesn't print the message in IE, so for that case we need to wrap it
    function traceForIE() {
        if (console.log) {
            if (console.log.apply) {
                console.log.apply(console, arguments);
            } else {
                // In old IE, native console methods themselves don't have apply().
                Function.prototype.apply.apply(console.log, [console, arguments]);
            }
        }
        if (console.trace) console.trace();
    }

    // Build the best logging method possible for this env
    // Wherever possible we want to bind, not wrap, to preserve stack traces
    function realMethod(methodName) {
        if (methodName === 'debug') {
            methodName = 'log';
        }

        if (typeof console === undefinedType) {
            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives
        } else if (methodName === 'trace' && isIE) {
            return traceForIE;
        } else if (console[methodName] !== undefined) {
            return bindMethod(console, methodName);
        } else if (console.log !== undefined) {
            return bindMethod(console, 'log');
        } else {
            return noop;
        }
    }

    // These private functions always need `this` to be set properly

    function replaceLoggingMethods(level, loggerName) {
        /*jshint validthis:true */
        for (var i = 0; i < logMethods.length; i++) {
            var methodName = logMethods[i];
            this[methodName] = (i < level) ?
                noop :
                this.methodFactory(methodName, level, loggerName);
        }

        // Define log.log as an alias for log.debug
        this.log = this.debug;
    }

    // In old IE versions, the console isn't present until you first open it.
    // We build realMethod() replacements here that regenerate logging methods
    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {
        return function () {
            if (typeof console !== undefinedType) {
                replaceLoggingMethods.call(this, level, loggerName);
                this[methodName].apply(this, arguments);
            }
        };
    }

    // By default, we use closely bound real methods wherever possible, and
    // otherwise we wait for a console to appear, and then try again.
    function defaultMethodFactory(methodName, level, loggerName) {
        /*jshint validthis:true */
        return realMethod(methodName) ||
               enableLoggingWhenConsoleArrives.apply(this, arguments);
    }

    function Logger(name, defaultLevel, factory) {
      var self = this;
      var currentLevel;

      var storageKey = "loglevel";
      if (typeof name === "string") {
        storageKey += ":" + name;
      } else if (typeof name === "symbol") {
        storageKey = undefined;
      }

      function persistLevelIfPossible(levelNum) {
          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();

          if (typeof window === undefinedType || !storageKey) return;

          // Use localStorage if available
          try {
              window.localStorage[storageKey] = levelName;
              return;
          } catch (ignore) {}

          // Use session cookie as fallback
          try {
              window.document.cookie =
                encodeURIComponent(storageKey) + "=" + levelName + ";";
          } catch (ignore) {}
      }

      function getPersistedLevel() {
          var storedLevel;

          if (typeof window === undefinedType || !storageKey) return;

          try {
              storedLevel = window.localStorage[storageKey];
          } catch (ignore) {}

          // Fallback to cookies if local storage gives us nothing
          if (typeof storedLevel === undefinedType) {
              try {
                  var cookie = window.document.cookie;
                  var location = cookie.indexOf(
                      encodeURIComponent(storageKey) + "=");
                  if (location !== -1) {
                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];
                  }
              } catch (ignore) {}
          }

          // If the stored level is not valid, treat it as if nothing was stored.
          if (self.levels[storedLevel] === undefined) {
              storedLevel = undefined;
          }

          return storedLevel;
      }

      /*
       *
       * Public logger API - see https://github.com/pimterry/loglevel for details
       *
       */

      self.name = name;

      self.levels = { "TRACE": 0, "DEBUG": 1, "INFO": 2, "WARN": 3,
          "ERROR": 4, "SILENT": 5};

      self.methodFactory = factory || defaultMethodFactory;

      self.getLevel = function () {
          return currentLevel;
      };

      self.setLevel = function (level, persist) {
          if (typeof level === "string" && self.levels[level.toUpperCase()] !== undefined) {
              level = self.levels[level.toUpperCase()];
          }
          if (typeof level === "number" && level >= 0 && level <= self.levels.SILENT) {
              currentLevel = level;
              if (persist !== false) {  // defaults to true
                  persistLevelIfPossible(level);
              }
              replaceLoggingMethods.call(self, level, name);
              if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
              }
          } else {
              throw "log.setLevel() called with invalid level: " + level;
          }
      };

      self.setDefaultLevel = function (level) {
          if (!getPersistedLevel()) {
              self.setLevel(level, false);
          }
      };

      self.enableAll = function(persist) {
          self.setLevel(self.levels.TRACE, persist);
      };

      self.disableAll = function(persist) {
          self.setLevel(self.levels.SILENT, persist);
      };

      // Initialize with the right level
      var initialLevel = getPersistedLevel();
      if (initialLevel == null) {
          initialLevel = defaultLevel == null ? "WARN" : defaultLevel;
      }
      self.setLevel(initialLevel, false);
    }

    /*
     *
     * Top-level API
     *
     */

    var defaultLogger = new Logger();

    var _loggersByName = {};
    defaultLogger.getLogger = function getLogger(name) {
        if ((typeof name !== "symbol" && typeof name !== "string") || name === "") {
          throw new TypeError("You must supply a name when creating a logger.");
        }

        var logger = _loggersByName[name];
        if (!logger) {
          logger = _loggersByName[name] = new Logger(
            name, defaultLogger.getLevel(), defaultLogger.methodFactory);
        }
        return logger;
    };

    // Grab the current global log variable in case of overwrite
    var _log = (typeof window !== undefinedType) ? window.log : undefined;
    defaultLogger.noConflict = function() {
        if (typeof window !== undefinedType &&
               window.log === defaultLogger) {
            window.log = _log;
        }

        return defaultLogger;
    };

    defaultLogger.getLoggers = function getLoggers() {
        return _loggersByName;
    };

    // ES6 default export, for compatibility
    defaultLogger['default'] = defaultLogger;

    return defaultLogger;
}));


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/punycode/punycode.js":
/*!**************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/punycode/punycode.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports =  true && exports &&
		!exports.nodeType && exports;
	var freeModule =  true && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw new RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * https://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.4.1',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		true
	) {
		!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
			return punycode;
		}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}

}(this));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module), __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/querystring-es3/decode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/decode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};


/***/ }),

/***/ "./node_modules/querystring-es3/encode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/encode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};


/***/ }),

/***/ "./node_modules/querystring-es3/index.js":
/*!***********************************************!*\
  !*** ./node_modules/querystring-es3/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.decode = exports.parse = __webpack_require__(/*! ./decode */ "./node_modules/querystring-es3/decode.js");
exports.encode = exports.stringify = __webpack_require__(/*! ./encode */ "./node_modules/querystring-es3/encode.js");


/***/ }),

/***/ "./node_modules/sockjs-client/dist/sockjs.js":
/*!***************************************************!*\
  !*** ./node_modules/sockjs-client/dist/sockjs.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/* sockjs-client v1.5.0 | http://sockjs.org | MIT license */
(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return require(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){
'use strict';

var transportList = require('./transport-list');

module.exports = require('./main')(transportList);

// TODO can't get rid of this until all servers do
if ('_sockjs_onload' in global) {
  setTimeout(global._sockjs_onload, 1);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./main":14,"./transport-list":16}],2:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function CloseEvent() {
  Event.call(this);
  this.initEvent('close', false, false);
  this.wasClean = false;
  this.code = 0;
  this.reason = '';
}

inherits(CloseEvent, Event);

module.exports = CloseEvent;

},{"./event":4,"inherits":57}],3:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventTarget = require('./eventtarget')
  ;

function EventEmitter() {
  EventTarget.call(this);
}

inherits(EventEmitter, EventTarget);

EventEmitter.prototype.removeAllListeners = function(type) {
  if (type) {
    delete this._listeners[type];
  } else {
    this._listeners = {};
  }
};

EventEmitter.prototype.once = function(type, listener) {
  var self = this
    , fired = false;

  function g() {
    self.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  this.on(type, g);
};

EventEmitter.prototype.emit = function() {
  var type = arguments[0];
  var listeners = this._listeners[type];
  if (!listeners) {
    return;
  }
  // equivalent of Array.prototype.slice.call(arguments, 1);
  var l = arguments.length;
  var args = new Array(l - 1);
  for (var ai = 1; ai < l; ai++) {
    args[ai - 1] = arguments[ai];
  }
  for (var i = 0; i < listeners.length; i++) {
    listeners[i].apply(this, args);
  }
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;
EventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;

module.exports.EventEmitter = EventEmitter;

},{"./eventtarget":5,"inherits":57}],4:[function(require,module,exports){
'use strict';

function Event(eventType) {
  this.type = eventType;
}

Event.prototype.initEvent = function(eventType, canBubble, cancelable) {
  this.type = eventType;
  this.bubbles = canBubble;
  this.cancelable = cancelable;
  this.timeStamp = +new Date();
  return this;
};

Event.prototype.stopPropagation = function() {};
Event.prototype.preventDefault = function() {};

Event.CAPTURING_PHASE = 1;
Event.AT_TARGET = 2;
Event.BUBBLING_PHASE = 3;

module.exports = Event;

},{}],5:[function(require,module,exports){
'use strict';

/* Simplified implementation of DOM2 EventTarget.
 *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget
 */

function EventTarget() {
  this._listeners = {};
}

EventTarget.prototype.addEventListener = function(eventType, listener) {
  if (!(eventType in this._listeners)) {
    this._listeners[eventType] = [];
  }
  var arr = this._listeners[eventType];
  // #4
  if (arr.indexOf(listener) === -1) {
    // Make a copy so as not to interfere with a current dispatchEvent.
    arr = arr.concat([listener]);
  }
  this._listeners[eventType] = arr;
};

EventTarget.prototype.removeEventListener = function(eventType, listener) {
  var arr = this._listeners[eventType];
  if (!arr) {
    return;
  }
  var idx = arr.indexOf(listener);
  if (idx !== -1) {
    if (arr.length > 1) {
      // Make a copy so as not to interfere with a current dispatchEvent.
      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));
    } else {
      delete this._listeners[eventType];
    }
    return;
  }
};

EventTarget.prototype.dispatchEvent = function() {
  var event = arguments[0];
  var t = event.type;
  // equivalent of Array.prototype.slice.call(arguments, 0);
  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);
  // TODO: This doesn't match the real behavior; per spec, onfoo get
  // their place in line from the /first/ time they're set from
  // non-null. Although WebKit bumps it to the end every time it's
  // set.
  if (this['on' + t]) {
    this['on' + t].apply(this, args);
  }
  if (t in this._listeners) {
    // Grab a reference to the listeners list. removeEventListener may alter the list.
    var listeners = this._listeners[t];
    for (var i = 0; i < listeners.length; i++) {
      listeners[i].apply(this, args);
    }
  }
};

module.exports = EventTarget;

},{}],6:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function TransportMessageEvent(data) {
  Event.call(this);
  this.initEvent('message', false, false);
  this.data = data;
}

inherits(TransportMessageEvent, Event);

module.exports = TransportMessageEvent;

},{"./event":4,"inherits":57}],7:[function(require,module,exports){
'use strict';

var JSON3 = require('json3')
  , iframeUtils = require('./utils/iframe')
  ;

function FacadeJS(transport) {
  this._transport = transport;
  transport.on('message', this._transportMessage.bind(this));
  transport.on('close', this._transportClose.bind(this));
}

FacadeJS.prototype._transportClose = function(code, reason) {
  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));
};
FacadeJS.prototype._transportMessage = function(frame) {
  iframeUtils.postMessage('t', frame);
};
FacadeJS.prototype._send = function(data) {
  this._transport.send(data);
};
FacadeJS.prototype._close = function() {
  this._transport.close();
  this._transport.removeAllListeners();
};

module.exports = FacadeJS;

},{"./utils/iframe":47,"json3":58}],8:[function(require,module,exports){
(function (process){
'use strict';

var urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , JSON3 = require('json3')
  , FacadeJS = require('./facade')
  , InfoIframeReceiver = require('./info-iframe-receiver')
  , iframeUtils = require('./utils/iframe')
  , loc = require('./location')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:iframe-bootstrap');
}

module.exports = function(SockJS, availableTransports) {
  var transportMap = {};
  availableTransports.forEach(function(at) {
    if (at.facadeTransport) {
      transportMap[at.facadeTransport.transportName] = at.facadeTransport;
    }
  });

  // hard-coded for the info iframe
  // TODO see if we can make this more dynamic
  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;
  var parentOrigin;

  /* eslint-disable camelcase */
  SockJS.bootstrap_iframe = function() {
    /* eslint-enable camelcase */
    var facade;
    iframeUtils.currentWindowId = loc.hash.slice(1);
    var onMessage = function(e) {
      if (e.source !== parent) {
        return;
      }
      if (typeof parentOrigin === 'undefined') {
        parentOrigin = e.origin;
      }
      if (e.origin !== parentOrigin) {
        return;
      }

      var iframeMessage;
      try {
        iframeMessage = JSON3.parse(e.data);
      } catch (ignored) {
        debug('bad json', e.data);
        return;
      }

      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {
        return;
      }
      switch (iframeMessage.type) {
      case 's':
        var p;
        try {
          p = JSON3.parse(iframeMessage.data);
        } catch (ignored) {
          debug('bad json', iframeMessage.data);
          break;
        }
        var version = p[0];
        var transport = p[1];
        var transUrl = p[2];
        var baseUrl = p[3];
        debug(version, transport, transUrl, baseUrl);
        // change this to semver logic
        if (version !== SockJS.version) {
          throw new Error('Incompatible SockJS! Main site uses:' +
                    ' "' + version + '", the iframe:' +
                    ' "' + SockJS.version + '".');
        }

        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||
            !urlUtils.isOriginEqual(baseUrl, loc.href)) {
          throw new Error('Can\'t connect to different domain from within an ' +
                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');
        }
        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));
        break;
      case 'm':
        facade._send(iframeMessage.data);
        break;
      case 'c':
        if (facade) {
          facade._close();
        }
        facade = null;
        break;
      }
    };

    eventUtils.attachEvent('message', onMessage);

    // Start
    iframeUtils.postMessage('s');
  };
};

}).call(this,{ env: {} })

},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,"debug":55,"json3":58}],9:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , objectUtils = require('./utils/object')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-ajax');
}

function InfoAjax(url, AjaxObject) {
  EventEmitter.call(this);

  var self = this;
  var t0 = +new Date();
  this.xo = new AjaxObject('GET', url);

  this.xo.once('finish', function(status, text) {
    var info, rtt;
    if (status === 200) {
      rtt = (+new Date()) - t0;
      if (text) {
        try {
          info = JSON3.parse(text);
        } catch (e) {
          debug('bad json', text);
        }
      }

      if (!objectUtils.isObject(info)) {
        info = {};
      }
    }
    self.emit('finish', info, rtt);
    self.removeAllListeners();
  });
}

inherits(InfoAjax, EventEmitter);

InfoAjax.prototype.close = function() {
  this.removeAllListeners();
  this.xo.close();
};

module.exports = InfoAjax;

}).call(this,{ env: {} })

},{"./utils/object":49,"debug":55,"events":3,"inherits":57,"json3":58}],10:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , JSON3 = require('json3')
  , XHRLocalObject = require('./transport/sender/xhr-local')
  , InfoAjax = require('./info-ajax')
  ;

function InfoReceiverIframe(transUrl) {
  var self = this;
  EventEmitter.call(this);

  this.ir = new InfoAjax(transUrl, XHRLocalObject);
  this.ir.once('finish', function(info, rtt) {
    self.ir = null;
    self.emit('message', JSON3.stringify([info, rtt]));
  });
}

inherits(InfoReceiverIframe, EventEmitter);

InfoReceiverIframe.transportName = 'iframe-info-receiver';

InfoReceiverIframe.prototype.close = function() {
  if (this.ir) {
    this.ir.close();
    this.ir = null;
  }
  this.removeAllListeners();
};

module.exports = InfoReceiverIframe;

},{"./info-ajax":9,"./transport/sender/xhr-local":37,"events":3,"inherits":57,"json3":58}],11:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , utils = require('./utils/event')
  , IframeTransport = require('./transport/iframe')
  , InfoReceiverIframe = require('./info-iframe-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-iframe');
}

function InfoIframe(baseUrl, url) {
  var self = this;
  EventEmitter.call(this);

  var go = function() {
    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);

    ifr.once('message', function(msg) {
      if (msg) {
        var d;
        try {
          d = JSON3.parse(msg);
        } catch (e) {
          debug('bad json', msg);
          self.emit('finish');
          self.close();
          return;
        }

        var info = d[0], rtt = d[1];
        self.emit('finish', info, rtt);
      }
      self.close();
    });

    ifr.once('close', function() {
      self.emit('finish');
      self.close();
    });
  };

  // TODO this seems the same as the 'needBody' from transports
  if (!global.document.body) {
    utils.attachEvent('load', go);
  } else {
    go();
  }
}

inherits(InfoIframe, EventEmitter);

InfoIframe.enabled = function() {
  return IframeTransport.enabled();
};

InfoIframe.prototype.close = function() {
  if (this.ifr) {
    this.ifr.close();
  }
  this.removeAllListeners();
  this.ifr = null;
};

module.exports = InfoIframe;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,"debug":55,"events":3,"inherits":57,"json3":58}],12:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , urlUtils = require('./utils/url')
  , XDR = require('./transport/sender/xdr')
  , XHRCors = require('./transport/sender/xhr-cors')
  , XHRLocal = require('./transport/sender/xhr-local')
  , XHRFake = require('./transport/sender/xhr-fake')
  , InfoIframe = require('./info-iframe')
  , InfoAjax = require('./info-ajax')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-receiver');
}

function InfoReceiver(baseUrl, urlInfo) {
  debug(baseUrl);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self.doXhr(baseUrl, urlInfo);
  }, 0);
}

inherits(InfoReceiver, EventEmitter);

// TODO this is currently ignoring the list of available transports and the whitelist

InfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {
  // determine method of CORS support (if needed)
  if (urlInfo.sameOrigin) {
    return new InfoAjax(url, XHRLocal);
  }
  if (XHRCors.enabled) {
    return new InfoAjax(url, XHRCors);
  }
  if (XDR.enabled && urlInfo.sameScheme) {
    return new InfoAjax(url, XDR);
  }
  if (InfoIframe.enabled()) {
    return new InfoIframe(baseUrl, url);
  }
  return new InfoAjax(url, XHRFake);
};

InfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {
  var self = this
    , url = urlUtils.addPath(baseUrl, '/info')
    ;
  debug('doXhr', url);

  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);

  this.timeoutRef = setTimeout(function() {
    debug('timeout');
    self._cleanup(false);
    self.emit('finish');
  }, InfoReceiver.timeout);

  this.xo.once('finish', function(info, rtt) {
    debug('finish', info, rtt);
    self._cleanup(true);
    self.emit('finish', info, rtt);
  });
};

InfoReceiver.prototype._cleanup = function(wasClean) {
  debug('_cleanup');
  clearTimeout(this.timeoutRef);
  this.timeoutRef = null;
  if (!wasClean && this.xo) {
    this.xo.close();
  }
  this.xo = null;
};

InfoReceiver.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  this._cleanup(false);
};

InfoReceiver.timeout = 8000;

module.exports = InfoReceiver;

}).call(this,{ env: {} })

},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,"debug":55,"events":3,"inherits":57}],13:[function(require,module,exports){
(function (global){
'use strict';

module.exports = global.location || {
  origin: 'http://localhost:80'
, protocol: 'http:'
, host: 'localhost'
, port: 80
, href: 'http://localhost/'
, hash: ''
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],14:[function(require,module,exports){
(function (process,global){
'use strict';

require('./shims');

var URL = require('url-parse')
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , random = require('./utils/random')
  , escape = require('./utils/escape')
  , urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , transport = require('./utils/transport')
  , objectUtils = require('./utils/object')
  , browser = require('./utils/browser')
  , log = require('./utils/log')
  , Event = require('./event/event')
  , EventTarget = require('./event/eventtarget')
  , loc = require('./location')
  , CloseEvent = require('./event/close')
  , TransportMessageEvent = require('./event/trans-message')
  , InfoReceiver = require('./info-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:main');
}

var transports;

// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface
function SockJS(url, protocols, options) {
  if (!(this instanceof SockJS)) {
    return new SockJS(url, protocols, options);
  }
  if (arguments.length < 1) {
    throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");
  }
  EventTarget.call(this);

  this.readyState = SockJS.CONNECTING;
  this.extensions = '';
  this.protocol = '';

  // non-standard extension
  options = options || {};
  if (options.protocols_whitelist) {
    log.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.");
  }
  this._transportsWhitelist = options.transports;
  this._transportOptions = options.transportOptions || {};
  this._timeout = options.timeout || 0;

  var sessionId = options.sessionId || 8;
  if (typeof sessionId === 'function') {
    this._generateSessionId = sessionId;
  } else if (typeof sessionId === 'number') {
    this._generateSessionId = function() {
      return random.string(sessionId);
    };
  } else {
    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');
  }

  this._server = options.server || random.numberString(1000);

  // Step 1 of WS spec - parse and validate the url. Issue #8
  var parsedUrl = new URL(url);
  if (!parsedUrl.host || !parsedUrl.protocol) {
    throw new SyntaxError("The URL '" + url + "' is invalid");
  } else if (parsedUrl.hash) {
    throw new SyntaxError('The URL must not contain a fragment');
  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {
    throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '" + parsedUrl.protocol + "' is not allowed.");
  }

  var secure = parsedUrl.protocol === 'https:';
  // Step 2 - don't allow secure origin with an insecure protocol
  if (loc.protocol === 'https:' && !secure) {
    // exception is 127.0.0.0/8 and ::1 urls
    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {
      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');
    }
  }

  // Step 3 - check port access - no need here
  // Step 4 - parse protocols argument
  if (!protocols) {
    protocols = [];
  } else if (!Array.isArray(protocols)) {
    protocols = [protocols];
  }

  // Step 5 - check protocols argument
  var sortedProtocols = protocols.sort();
  sortedProtocols.forEach(function(proto, i) {
    if (!proto) {
      throw new SyntaxError("The protocols entry '" + proto + "' is invalid.");
    }
    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {
      throw new SyntaxError("The protocols entry '" + proto + "' is duplicated.");
    }
  });

  // Step 6 - convert origin
  var o = urlUtils.getOrigin(loc.href);
  this._origin = o ? o.toLowerCase() : null;

  // remove the trailing slash
  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\/+$/, ''));

  // store the sanitized url
  this.url = parsedUrl.href;
  debug('using url', this.url);

  // Step 7 - start connection in background
  // obtain server info
  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26
  this._urlInfo = {
    nullOrigin: !browser.hasDomain()
  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)
  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)
  };

  this._ir = new InfoReceiver(this.url, this._urlInfo);
  this._ir.once('finish', this._receiveInfo.bind(this));
}

inherits(SockJS, EventTarget);

function userSetCode(code) {
  return code === 1000 || (code >= 3000 && code <= 4999);
}

SockJS.prototype.close = function(code, reason) {
  // Step 1
  if (code && !userSetCode(code)) {
    throw new Error('InvalidAccessError: Invalid code');
  }
  // Step 2.4 states the max is 123 bytes, but we are just checking length
  if (reason && reason.length > 123) {
    throw new SyntaxError('reason argument has an invalid length');
  }

  // Step 3.1
  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {
    return;
  }

  // TODO look at docs to determine how to set this
  var wasClean = true;
  this._close(code || 1000, reason || 'Normal closure', wasClean);
};

SockJS.prototype.send = function(data) {
  // #13 - convert anything non-string to string
  // TODO this currently turns objects into [object Object]
  if (typeof data !== 'string') {
    data = '' + data;
  }
  if (this.readyState === SockJS.CONNECTING) {
    throw new Error('InvalidStateError: The connection has not been established yet');
  }
  if (this.readyState !== SockJS.OPEN) {
    return;
  }
  this._transport.send(escape.quote(data));
};

SockJS.version = require('./version');

SockJS.CONNECTING = 0;
SockJS.OPEN = 1;
SockJS.CLOSING = 2;
SockJS.CLOSED = 3;

SockJS.prototype._receiveInfo = function(info, rtt) {
  debug('_receiveInfo', rtt);
  this._ir = null;
  if (!info) {
    this._close(1002, 'Cannot connect to server');
    return;
  }

  // establish a round-trip timeout (RTO) based on the
  // round-trip time (RTT)
  this._rto = this.countRTO(rtt);
  // allow server to override url used for the actual transport
  this._transUrl = info.base_url ? info.base_url : this.url;
  info = objectUtils.extend(info, this._urlInfo);
  debug('info', info);
  // determine list of desired and supported transports
  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);
  this._transports = enabledTransports.main;
  debug(this._transports.length + ' enabled transports');

  this._connect();
};

SockJS.prototype._connect = function() {
  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {
    debug('attempt', Transport.transportName);
    if (Transport.needBody) {
      if (!global.document.body ||
          (typeof global.document.readyState !== 'undefined' &&
            global.document.readyState !== 'complete' &&
            global.document.readyState !== 'interactive')) {
        debug('waiting for body');
        this._transports.unshift(Transport);
        eventUtils.attachEvent('load', this._connect.bind(this));
        return;
      }
    }

    // calculate timeout based on RTO and round trips. Default to 5s
    var timeoutMs = Math.max(this._timeout, (this._rto * Transport.roundTrips) || 5000);
    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);
    debug('using timeout', timeoutMs);

    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());
    var options = this._transportOptions[Transport.transportName];
    debug('transport url', transportUrl);
    var transportObj = new Transport(transportUrl, this._transUrl, options);
    transportObj.on('message', this._transportMessage.bind(this));
    transportObj.once('close', this._transportClose.bind(this));
    transportObj.transportName = Transport.transportName;
    this._transport = transportObj;

    return;
  }
  this._close(2000, 'All transports failed', false);
};

SockJS.prototype._transportTimeout = function() {
  debug('_transportTimeout');
  if (this.readyState === SockJS.CONNECTING) {
    if (this._transport) {
      this._transport.close();
    }

    this._transportClose(2007, 'Transport timed out');
  }
};

SockJS.prototype._transportMessage = function(msg) {
  debug('_transportMessage', msg);
  var self = this
    , type = msg.slice(0, 1)
    , content = msg.slice(1)
    , payload
    ;

  // first check for messages that don't need a payload
  switch (type) {
    case 'o':
      this._open();
      return;
    case 'h':
      this.dispatchEvent(new Event('heartbeat'));
      debug('heartbeat', this.transport);
      return;
  }

  if (content) {
    try {
      payload = JSON3.parse(content);
    } catch (e) {
      debug('bad json', content);
    }
  }

  if (typeof payload === 'undefined') {
    debug('empty payload', content);
    return;
  }

  switch (type) {
    case 'a':
      if (Array.isArray(payload)) {
        payload.forEach(function(p) {
          debug('message', self.transport, p);
          self.dispatchEvent(new TransportMessageEvent(p));
        });
      }
      break;
    case 'm':
      debug('message', this.transport, payload);
      this.dispatchEvent(new TransportMessageEvent(payload));
      break;
    case 'c':
      if (Array.isArray(payload) && payload.length === 2) {
        this._close(payload[0], payload[1], true);
      }
      break;
  }
};

SockJS.prototype._transportClose = function(code, reason) {
  debug('_transportClose', this.transport, code, reason);
  if (this._transport) {
    this._transport.removeAllListeners();
    this._transport = null;
    this.transport = null;
  }

  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {
    this._connect();
    return;
  }

  this._close(code, reason);
};

SockJS.prototype._open = function() {
  debug('_open', this._transport && this._transport.transportName, this.readyState);
  if (this.readyState === SockJS.CONNECTING) {
    if (this._transportTimeoutId) {
      clearTimeout(this._transportTimeoutId);
      this._transportTimeoutId = null;
    }
    this.readyState = SockJS.OPEN;
    this.transport = this._transport.transportName;
    this.dispatchEvent(new Event('open'));
    debug('connected', this.transport);
  } else {
    // The server might have been restarted, and lost track of our
    // connection.
    this._close(1006, 'Server lost session');
  }
};

SockJS.prototype._close = function(code, reason, wasClean) {
  debug('_close', this.transport, code, reason, wasClean, this.readyState);
  var forceFail = false;

  if (this._ir) {
    forceFail = true;
    this._ir.close();
    this._ir = null;
  }
  if (this._transport) {
    this._transport.close();
    this._transport = null;
    this.transport = null;
  }

  if (this.readyState === SockJS.CLOSED) {
    throw new Error('InvalidStateError: SockJS has already been closed');
  }

  this.readyState = SockJS.CLOSING;
  setTimeout(function() {
    this.readyState = SockJS.CLOSED;

    if (forceFail) {
      this.dispatchEvent(new Event('error'));
    }

    var e = new CloseEvent('close');
    e.wasClean = wasClean || false;
    e.code = code || 1000;
    e.reason = reason;

    this.dispatchEvent(e);
    this.onmessage = this.onclose = this.onerror = null;
    debug('disconnected');
  }.bind(this), 0);
};

// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/
// and RFC 2988.
SockJS.prototype.countRTO = function(rtt) {
  // In a local environment, when using IE8/9 and the `jsonp-polling`
  // transport the time needed to establish a connection (the time that pass
  // from the opening of the transport to the call of `_dispatchOpen`) is
  // around 200msec (the lower bound used in the article above) and this
  // causes spurious timeouts. For this reason we calculate a value slightly
  // larger than that used in the article.
  if (rtt > 100) {
    return 4 * rtt; // rto > 400msec
  }
  return 300 + rtt; // 300msec < rto <= 400msec
};

module.exports = function(availableTransports) {
  transports = transport(availableTransports);
  require('./iframe-bootstrap')(SockJS, availableTransports);
  return SockJS;
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,"debug":55,"inherits":57,"json3":58,"url-parse":61}],15:[function(require,module,exports){
/* eslint-disable */
/* jscs: disable */
'use strict';

// pulled specific shims from https://github.com/es-shims/es5-shim

var ArrayPrototype = Array.prototype;
var ObjectPrototype = Object.prototype;
var FunctionPrototype = Function.prototype;
var StringPrototype = String.prototype;
var array_slice = ArrayPrototype.slice;

var _toString = ObjectPrototype.toString;
var isFunction = function (val) {
    return ObjectPrototype.toString.call(val) === '[object Function]';
};
var isArray = function isArray(obj) {
    return _toString.call(obj) === '[object Array]';
};
var isString = function isString(obj) {
    return _toString.call(obj) === '[object String]';
};

var supportsDescriptors = Object.defineProperty && (function () {
    try {
        Object.defineProperty({}, 'x', {});
        return true;
    } catch (e) { /* this is ES3 */
        return false;
    }
}());

// Define configurable, writable and non-enumerable props
// if they don't exist.
var defineProperty;
if (supportsDescriptors) {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        Object.defineProperty(object, name, {
            configurable: true,
            enumerable: false,
            writable: true,
            value: method
        });
    };
} else {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        object[name] = method;
    };
}
var defineProperties = function (object, map, forceAssign) {
    for (var name in map) {
        if (ObjectPrototype.hasOwnProperty.call(map, name)) {
          defineProperty(object, name, map[name], forceAssign);
        }
    }
};

var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert " + o + ' to object');
    }
    return Object(o);
};

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(num) {
    var n = +num;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function ToUint32(x) {
    return x >>> 0;
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

defineProperties(FunctionPrototype, {
    bind: function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (!isFunction(target)) {
            throw new TypeError('Function.prototype.bind called on incompatible ' + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = array_slice.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(array_slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(array_slice.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push('$' + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only
        // way to set the length property of a function.
        // In environments where Content Security Policies enabled (Chrome extensions,
        // for ex.) all use of eval or Function costructor throws an exception.
        // However in all of these environments Function.prototype.bind exists
        // and so this code will never be executed.
        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    }
});

//
// Array
// =====
//

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
defineProperties(Array, { isArray: isArray });


var boxedString = Object('a');
var splitString = boxedString[0] !== 'a' || !(0 in boxedString);

var properlyBoxesContext = function properlyBoxed(method) {
    // Check node 0.6.21 bug where third parameter is not boxed
    var properlyBoxesNonStrict = true;
    var properlyBoxesStrict = true;
    if (method) {
        method.call('foo', function (_, __, context) {
            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }
        });

        method.call([1], function () {
            'use strict';
            properlyBoxesStrict = typeof this === 'string';
        }, 'x');
    }
    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;
};

defineProperties(ArrayPrototype, {
    forEach: function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    }
}, !properlyBoxesContext(ArrayPrototype.forEach));

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
var hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;
defineProperties(ArrayPrototype, {
    indexOf: function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && isString(this) ? this.split('') : toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2IndexOfBug);

//
// String
// ======
//

// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = StringPrototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === 't' ||
    'test'.split(/(?:)/, -1).length !== 4 ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group

        StringPrototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0) {
                return [];
            }

            // If `separator` is not a regex, use native split
            if (_toString.call(separator) !== '[object RegExp]') {
                return string_split.call(this, separator, limit);
            }

            var output = [],
                flags = (separator.ignoreCase ? 'i' : '') +
                        (separator.multiline  ? 'm' : '') +
                        (separator.extended   ? 'x' : '') + // Proposed for ES6
                        (separator.sticky     ? 'y' : ''), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator2, match, lastIndex, lastLength;
            separator = new RegExp(separator.source, flags + 'g');
            string += ''; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp('^' + separator.source + '$(?!\\s)', flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                ToUint32(limit);
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        ArrayPrototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test('')) {
                    output.push('');
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ('0'.split(void 0, 0).length) {
    StringPrototype.split = function split(separator, limit) {
        if (separator === void 0 && limit === 0) { return []; }
        return string_split.call(this, separator, limit);
    };
}

// ECMA-262, 3rd B.2.3
// Not an ECMAScript standard, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
var string_substr = StringPrototype.substr;
var hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';
defineProperties(StringPrototype, {
    substr: function substr(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}, hasNegativeSubstrBug);

},{}],16:[function(require,module,exports){
'use strict';

module.exports = [
  // streaming transports
  require('./transport/websocket')
, require('./transport/xhr-streaming')
, require('./transport/xdr-streaming')
, require('./transport/eventsource')
, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))

  // polling transports
, require('./transport/htmlfile')
, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))
, require('./transport/xhr-polling')
, require('./transport/xdr-polling')
, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))
, require('./transport/jsonp-polling')
];

},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , utils = require('../../utils/event')
  , urlUtils = require('../../utils/url')
  , XHR = global.XMLHttpRequest
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:browser:xhr');
}

function AbstractXHRObject(method, url, payload, opts) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function () {
    self._start(method, url, payload, opts);
  }, 0);
}

inherits(AbstractXHRObject, EventEmitter);

AbstractXHRObject.prototype._start = function(method, url, payload, opts) {
  var self = this;

  try {
    this.xhr = new XHR();
  } catch (x) {
    // intentionally empty
  }

  if (!this.xhr) {
    debug('no xhr');
    this.emit('finish', 0, 'no xhr support');
    this._cleanup();
    return;
  }

  // several browsers cache POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  // Explorer tends to keep connection open, even after the
  // tab gets closed: http://bugs.jquery.com/ticket/5280
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload cleanup');
    self._cleanup(true);
  });
  try {
    this.xhr.open(method, url, true);
    if (this.timeout && 'timeout' in this.xhr) {
      this.xhr.timeout = this.timeout;
      this.xhr.ontimeout = function() {
        debug('xhr timeout');
        self.emit('finish', 0, '');
        self._cleanup(false);
      };
    }
  } catch (e) {
    debug('exception', e);
    // IE raises an exception on wrong port.
    this.emit('finish', 0, '');
    this._cleanup(false);
    return;
  }

  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {
    debug('withCredentials');
    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :
    // "This never affects same-site requests."

    this.xhr.withCredentials = true;
  }
  if (opts && opts.headers) {
    for (var key in opts.headers) {
      this.xhr.setRequestHeader(key, opts.headers[key]);
    }
  }

  this.xhr.onreadystatechange = function() {
    if (self.xhr) {
      var x = self.xhr;
      var text, status;
      debug('readyState', x.readyState);
      switch (x.readyState) {
      case 3:
        // IE doesn't like peeking into responseText or status
        // on Microsoft.XMLHTTP and readystate=3
        try {
          status = x.status;
          text = x.responseText;
        } catch (e) {
          // intentionally empty
        }
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }

        // IE does return readystate == 3 for 404 answers.
        if (status === 200 && text && text.length > 0) {
          debug('chunk');
          self.emit('chunk', status, text);
        }
        break;
      case 4:
        status = x.status;
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }
        // IE returns this for a bad port
        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx
        if (status === 12005 || status === 12029) {
          status = 0;
        }

        debug('finish', status, x.responseText);
        self.emit('finish', status, x.responseText);
        self._cleanup(false);
        break;
      }
    }
  };

  try {
    self.xhr.send(payload);
  } catch (e) {
    self.emit('finish', 0, '');
    self._cleanup(false);
  }
};

AbstractXHRObject.prototype._cleanup = function(abort) {
  debug('cleanup');
  if (!this.xhr) {
    return;
  }
  this.removeAllListeners();
  utils.unloadDel(this.unloadRef);

  // IE needs this field to be a function
  this.xhr.onreadystatechange = function() {};
  if (this.xhr.ontimeout) {
    this.xhr.ontimeout = null;
  }

  if (abort) {
    try {
      this.xhr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xhr = null;
};

AbstractXHRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

AbstractXHRObject.enabled = !!XHR;
// override XMLHttpRequest for IE6/7
// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (!AbstractXHRObject.enabled && (axo in global)) {
  debug('overriding xmlhttprequest');
  XHR = function() {
    try {
      return new global[axo]('Microsoft.XMLHTTP');
    } catch (e) {
      return null;
    }
  };
  AbstractXHRObject.enabled = !!new XHR();
}

var cors = false;
try {
  cors = 'withCredentials' in new XHR();
} catch (ignored) {
  // intentionally empty
}

AbstractXHRObject.supportsCORS = cors;

module.exports = AbstractXHRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],18:[function(require,module,exports){
(function (global){
module.exports = global.EventSource;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],19:[function(require,module,exports){
(function (global){
'use strict';

var Driver = global.WebSocket || global.MozWebSocket;
if (Driver) {
	module.exports = function WebSocketBrowserDriver(url) {
		return new Driver(url);
	};
} else {
	module.exports = undefined;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , EventSourceReceiver = require('./receiver/eventsource')
  , XHRCorsObject = require('./sender/xhr-cors')
  , EventSourceDriver = require('eventsource')
  ;

function EventSourceTransport(transUrl) {
  if (!EventSourceTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);
}

inherits(EventSourceTransport, AjaxBasedTransport);

EventSourceTransport.enabled = function() {
  return !!EventSourceDriver;
};

EventSourceTransport.transportName = 'eventsource';
EventSourceTransport.roundTrips = 2;

module.exports = EventSourceTransport;

},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,"eventsource":18,"inherits":57}],21:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , HtmlfileReceiver = require('./receiver/htmlfile')
  , XHRLocalObject = require('./sender/xhr-local')
  , AjaxBasedTransport = require('./lib/ajax-based')
  ;

function HtmlFileTransport(transUrl) {
  if (!HtmlfileReceiver.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);
}

inherits(HtmlFileTransport, AjaxBasedTransport);

HtmlFileTransport.enabled = function(info) {
  return HtmlfileReceiver.enabled && info.sameOrigin;
};

HtmlFileTransport.transportName = 'htmlfile';
HtmlFileTransport.roundTrips = 2;

module.exports = HtmlFileTransport;

},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,"inherits":57}],22:[function(require,module,exports){
(function (process){
'use strict';

// Few cool transports do work only for same-origin. In order to make
// them work cross-domain we shall use iframe, served from the
// remote domain. New browsers have capabilities to communicate with
// cross domain iframe using postMessage(). In IE it was implemented
// from IE 8+, but of course, IE got some details wrong:
//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx
//    http://stevesouders.com/misc/test-postmessage.php

var inherits = require('inherits')
  , JSON3 = require('json3')
  , EventEmitter = require('events').EventEmitter
  , version = require('../version')
  , urlUtils = require('../utils/url')
  , iframeUtils = require('../utils/iframe')
  , eventUtils = require('../utils/event')
  , random = require('../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:transport:iframe');
}

function IframeTransport(transport, transUrl, baseUrl) {
  if (!IframeTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  EventEmitter.call(this);

  var self = this;
  this.origin = urlUtils.getOrigin(baseUrl);
  this.baseUrl = baseUrl;
  this.transUrl = transUrl;
  this.transport = transport;
  this.windowId = random.string(8);

  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;
  debug(transport, transUrl, iframeUrl);

  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {
    debug('err callback');
    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');
    self.close();
  });

  this.onmessageCallback = this._message.bind(this);
  eventUtils.attachEvent('message', this.onmessageCallback);
}

inherits(IframeTransport, EventEmitter);

IframeTransport.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  if (this.iframeObj) {
    eventUtils.detachEvent('message', this.onmessageCallback);
    try {
      // When the iframe is not loaded, IE raises an exception
      // on 'contentWindow'.
      this.postMessage('c');
    } catch (x) {
      // intentionally empty
    }
    this.iframeObj.cleanup();
    this.iframeObj = null;
    this.onmessageCallback = this.iframeObj = null;
  }
};

IframeTransport.prototype._message = function(e) {
  debug('message', e.data);
  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {
    debug('not same origin', e.origin, this.origin);
    return;
  }

  var iframeMessage;
  try {
    iframeMessage = JSON3.parse(e.data);
  } catch (ignored) {
    debug('bad json', e.data);
    return;
  }

  if (iframeMessage.windowId !== this.windowId) {
    debug('mismatched window id', iframeMessage.windowId, this.windowId);
    return;
  }

  switch (iframeMessage.type) {
  case 's':
    this.iframeObj.loaded();
    // window global dependency
    this.postMessage('s', JSON3.stringify([
      version
    , this.transport
    , this.transUrl
    , this.baseUrl
    ]));
    break;
  case 't':
    this.emit('message', iframeMessage.data);
    break;
  case 'c':
    var cdata;
    try {
      cdata = JSON3.parse(iframeMessage.data);
    } catch (ignored) {
      debug('bad json', iframeMessage.data);
      return;
    }
    this.emit('close', cdata[0], cdata[1]);
    this.close();
    break;
  }
};

IframeTransport.prototype.postMessage = function(type, data) {
  debug('postMessage', type, data);
  this.iframeObj.post(JSON3.stringify({
    windowId: this.windowId
  , type: type
  , data: data || ''
  }), this.origin);
};

IframeTransport.prototype.send = function(message) {
  debug('send', message);
  this.postMessage('m', message);
};

IframeTransport.enabled = function() {
  return iframeUtils.iframeEnabled;
};

IframeTransport.transportName = 'iframe';
IframeTransport.roundTrips = 2;

module.exports = IframeTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,"debug":55,"events":3,"inherits":57,"json3":58}],23:[function(require,module,exports){
(function (global){
'use strict';

// The simplest and most robust transport, using the well-know cross
// domain hack - JSONP. This transport is quite inefficient - one
// message could use up to one http request. But at least it works almost
// everywhere.
// Known limitations:
//   o you will get a spinning cursor
//   o for Konqueror a dumb timer is needed to detect errors

var inherits = require('inherits')
  , SenderReceiver = require('./lib/sender-receiver')
  , JsonpReceiver = require('./receiver/jsonp')
  , jsonpSender = require('./sender/jsonp')
  ;

function JsonPTransport(transUrl) {
  if (!JsonPTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);
}

inherits(JsonPTransport, SenderReceiver);

JsonPTransport.enabled = function() {
  return !!global.document;
};

JsonPTransport.transportName = 'jsonp-polling';
JsonPTransport.roundTrips = 1;
JsonPTransport.needBody = true;

module.exports = JsonPTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,"inherits":57}],24:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , SenderReceiver = require('./sender-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:ajax-based');
}

function createAjaxSender(AjaxObject) {
  return function(url, payload, callback) {
    debug('create ajax sender', url, payload);
    var opt = {};
    if (typeof payload === 'string') {
      opt.headers = {'Content-type': 'text/plain'};
    }
    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');
    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);
    xo.once('finish', function(status) {
      debug('finish', status);
      xo = null;

      if (status !== 200 && status !== 204) {
        return callback(new Error('http status ' + status));
      }
      callback();
    });
    return function() {
      debug('abort');
      xo.close();
      xo = null;

      var err = new Error('Aborted');
      err.code = 1000;
      callback(err);
    };
  };
}

function AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {
  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);
}

inherits(AjaxBasedTransport, SenderReceiver);

module.exports = AjaxBasedTransport;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./sender-receiver":28,"debug":55,"inherits":57}],25:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:buffered-sender');
}

function BufferedSender(url, sender) {
  debug(url);
  EventEmitter.call(this);
  this.sendBuffer = [];
  this.sender = sender;
  this.url = url;
}

inherits(BufferedSender, EventEmitter);

BufferedSender.prototype.send = function(message) {
  debug('send', message);
  this.sendBuffer.push(message);
  if (!this.sendStop) {
    this.sendSchedule();
  }
};

// For polling transports in a situation when in the message callback,
// new message is being send. If the sending connection was started
// before receiving one, it is possible to saturate the network and
// timeout due to the lack of receiving socket. To avoid that we delay
// sending messages by some small time, in order to let receiving
// connection be started beforehand. This is only a halfmeasure and
// does not fix the big problem, but it does make the tests go more
// stable on slow networks.
BufferedSender.prototype.sendScheduleWait = function() {
  debug('sendScheduleWait');
  var self = this;
  var tref;
  this.sendStop = function() {
    debug('sendStop');
    self.sendStop = null;
    clearTimeout(tref);
  };
  tref = setTimeout(function() {
    debug('timeout');
    self.sendStop = null;
    self.sendSchedule();
  }, 25);
};

BufferedSender.prototype.sendSchedule = function() {
  debug('sendSchedule', this.sendBuffer.length);
  var self = this;
  if (this.sendBuffer.length > 0) {
    var payload = '[' + this.sendBuffer.join(',') + ']';
    this.sendStop = this.sender(this.url, payload, function(err) {
      self.sendStop = null;
      if (err) {
        debug('error', err);
        self.emit('close', err.code || 1006, 'Sending error: ' + err);
        self.close();
      } else {
        self.sendScheduleWait();
      }
    });
    this.sendBuffer = [];
  }
};

BufferedSender.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

BufferedSender.prototype.close = function() {
  debug('close');
  this._cleanup();
  if (this.sendStop) {
    this.sendStop();
    this.sendStop = null;
  }
};

module.exports = BufferedSender;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],26:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , IframeTransport = require('../iframe')
  , objectUtils = require('../../utils/object')
  ;

module.exports = function(transport) {

  function IframeWrapTransport(transUrl, baseUrl) {
    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);
  }

  inherits(IframeWrapTransport, IframeTransport);

  IframeWrapTransport.enabled = function(url, info) {
    if (!global.document) {
      return false;
    }

    var iframeInfo = objectUtils.extend({}, info);
    iframeInfo.sameOrigin = true;
    return transport.enabled(iframeInfo) && IframeTransport.enabled();
  };

  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;
  IframeWrapTransport.needBody = true;
  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)

  IframeWrapTransport.facadeTransport = transport;

  return IframeWrapTransport;
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/object":49,"../iframe":22,"inherits":57}],27:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:polling');
}

function Polling(Receiver, receiveUrl, AjaxObject) {
  debug(receiveUrl);
  EventEmitter.call(this);
  this.Receiver = Receiver;
  this.receiveUrl = receiveUrl;
  this.AjaxObject = AjaxObject;
  this._scheduleReceiver();
}

inherits(Polling, EventEmitter);

Polling.prototype._scheduleReceiver = function() {
  debug('_scheduleReceiver');
  var self = this;
  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);

  poll.on('message', function(msg) {
    debug('message', msg);
    self.emit('message', msg);
  });

  poll.once('close', function(code, reason) {
    debug('close', code, reason, self.pollIsClosing);
    self.poll = poll = null;

    if (!self.pollIsClosing) {
      if (reason === 'network') {
        self._scheduleReceiver();
      } else {
        self.emit('close', code || 1006, reason);
        self.removeAllListeners();
      }
    }
  });
};

Polling.prototype.abort = function() {
  debug('abort');
  this.removeAllListeners();
  this.pollIsClosing = true;
  if (this.poll) {
    this.poll.abort();
  }
};

module.exports = Polling;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],28:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , BufferedSender = require('./buffered-sender')
  , Polling = require('./polling')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender-receiver');
}

function SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {
  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);
  debug(pollUrl);
  var self = this;
  BufferedSender.call(this, transUrl, senderFunc);

  this.poll = new Polling(Receiver, pollUrl, AjaxObject);
  this.poll.on('message', function(msg) {
    debug('poll message', msg);
    self.emit('message', msg);
  });
  this.poll.once('close', function(code, reason) {
    debug('poll close', code, reason);
    self.poll = null;
    self.emit('close', code, reason);
    self.close();
  });
}

inherits(SenderReceiver, BufferedSender);

SenderReceiver.prototype.close = function() {
  BufferedSender.prototype.close.call(this);
  debug('close');
  this.removeAllListeners();
  if (this.poll) {
    this.poll.abort();
    this.poll = null;
  }
};

module.exports = SenderReceiver;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,"debug":55,"inherits":57}],29:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , EventSourceDriver = require('eventsource')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:eventsource');
}

function EventSourceReceiver(url) {
  debug(url);
  EventEmitter.call(this);

  var self = this;
  var es = this.es = new EventSourceDriver(url);
  es.onmessage = function(e) {
    debug('message', e.data);
    self.emit('message', decodeURI(e.data));
  };
  es.onerror = function(e) {
    debug('error', es.readyState, e);
    // ES on reconnection has readyState = 0 or 1.
    // on network error it's CLOSED = 2
    var reason = (es.readyState !== 2 ? 'network' : 'permanent');
    self._cleanup();
    self._close(reason);
  };
}

inherits(EventSourceReceiver, EventEmitter);

EventSourceReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

EventSourceReceiver.prototype._cleanup = function() {
  debug('cleanup');
  var es = this.es;
  if (es) {
    es.onmessage = es.onerror = null;
    es.close();
    this.es = null;
  }
};

EventSourceReceiver.prototype._close = function(reason) {
  debug('close', reason);
  var self = this;
  // Safari and chrome < 15 crash if we close window before
  // waiting for ES cleanup. See:
  // https://code.google.com/p/chromium/issues/detail?id=89155
  setTimeout(function() {
    self.emit('close', null, reason);
    self.removeAllListeners();
  }, 200);
};

module.exports = EventSourceReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"eventsource":18,"inherits":57}],30:[function(require,module,exports){
(function (process,global){
'use strict';

var inherits = require('inherits')
  , iframeUtils = require('../../utils/iframe')
  , urlUtils = require('../../utils/url')
  , EventEmitter = require('events').EventEmitter
  , random = require('../../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:htmlfile');
}

function HtmlfileReceiver(url) {
  debug(url);
  EventEmitter.call(this);
  var self = this;
  iframeUtils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));

  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);
  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?
      iframeUtils.createHtmlfile : iframeUtils.createIframe;

  global[iframeUtils.WPrefix][this.id] = {
    start: function() {
      debug('start');
      self.iframeObj.loaded();
    }
  , message: function(data) {
      debug('message', data);
      self.emit('message', data);
    }
  , stop: function() {
      debug('stop');
      self._cleanup();
      self._close('network');
    }
  };
  this.iframeObj = constructFunc(url, function() {
    debug('callback');
    self._cleanup();
    self._close('permanent');
  });
}

inherits(HtmlfileReceiver, EventEmitter);

HtmlfileReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

HtmlfileReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  if (this.iframeObj) {
    this.iframeObj.cleanup();
    this.iframeObj = null;
  }
  delete global[iframeUtils.WPrefix][this.id];
};

HtmlfileReceiver.prototype._close = function(reason) {
  debug('_close', reason);
  this.emit('close', null, reason);
  this.removeAllListeners();
};

HtmlfileReceiver.htmlfileEnabled = false;

// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (axo in global) {
  try {
    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');
  } catch (x) {
    // intentionally empty
  }
}

HtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;

module.exports = HtmlfileReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],31:[function(require,module,exports){
(function (process,global){
'use strict';

var utils = require('../../utils/iframe')
  , random = require('../../utils/random')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:jsonp');
}

function JsonpReceiver(url) {
  debug(url);
  var self = this;
  EventEmitter.call(this);

  utils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));

  global[utils.WPrefix][this.id] = this._callback.bind(this);
  this._createScript(urlWithId);

  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.
  this.timeoutId = setTimeout(function() {
    debug('timeout');
    self._abort(new Error('JSONP script loaded abnormally (timeout)'));
  }, JsonpReceiver.timeout);
}

inherits(JsonpReceiver, EventEmitter);

JsonpReceiver.prototype.abort = function() {
  debug('abort');
  if (global[utils.WPrefix][this.id]) {
    var err = new Error('JSONP user aborted read');
    err.code = 1000;
    this._abort(err);
  }
};

JsonpReceiver.timeout = 35000;
JsonpReceiver.scriptErrorTimeout = 1000;

JsonpReceiver.prototype._callback = function(data) {
  debug('_callback', data);
  this._cleanup();

  if (this.aborting) {
    return;
  }

  if (data) {
    debug('message', data);
    this.emit('message', data);
  }
  this.emit('close', null, 'network');
  this.removeAllListeners();
};

JsonpReceiver.prototype._abort = function(err) {
  debug('_abort', err);
  this._cleanup();
  this.aborting = true;
  this.emit('close', err.code, err.message);
  this.removeAllListeners();
};

JsonpReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  clearTimeout(this.timeoutId);
  if (this.script2) {
    this.script2.parentNode.removeChild(this.script2);
    this.script2 = null;
  }
  if (this.script) {
    var script = this.script;
    // Unfortunately, you can't really abort script loading of
    // the script.
    script.parentNode.removeChild(script);
    script.onreadystatechange = script.onerror =
        script.onload = script.onclick = null;
    this.script = null;
  }
  delete global[utils.WPrefix][this.id];
};

JsonpReceiver.prototype._scriptError = function() {
  debug('_scriptError');
  var self = this;
  if (this.errorTimer) {
    return;
  }

  this.errorTimer = setTimeout(function() {
    if (!self.loadedOkay) {
      self._abort(new Error('JSONP script loaded abnormally (onerror)'));
    }
  }, JsonpReceiver.scriptErrorTimeout);
};

JsonpReceiver.prototype._createScript = function(url) {
  debug('_createScript', url);
  var self = this;
  var script = this.script = global.document.createElement('script');
  var script2;  // Opera synchronous load trick.

  script.id = 'a' + random.string(8);
  script.src = url;
  script.type = 'text/javascript';
  script.charset = 'UTF-8';
  script.onerror = this._scriptError.bind(this);
  script.onload = function() {
    debug('onload');
    self._abort(new Error('JSONP script loaded abnormally (onload)'));
  };

  // IE9 fires 'error' event after onreadystatechange or before, in random order.
  // Use loadedOkay to determine if actually errored
  script.onreadystatechange = function() {
    debug('onreadystatechange', script.readyState);
    if (/loaded|closed/.test(script.readyState)) {
      if (script && script.htmlFor && script.onclick) {
        self.loadedOkay = true;
        try {
          // In IE, actually execute the script.
          script.onclick();
        } catch (x) {
          // intentionally empty
        }
      }
      if (script) {
        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));
      }
    }
  };
  // IE: event/htmlFor/onclick trick.
  // One can't rely on proper order for onreadystatechange. In order to
  // make sure, set a 'htmlFor' and 'event' properties, so that
  // script code will be installed as 'onclick' handler for the
  // script object. Later, onreadystatechange, manually execute this
  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'
  // set. For reference see:
  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html
  // Also, read on that about script ordering:
  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
  if (typeof script.async === 'undefined' && global.document.attachEvent) {
    // According to mozilla docs, in recent browsers script.async defaults
    // to 'true', so we may use it to detect a good browser:
    // https://developer.mozilla.org/en/HTML/Element/script
    if (!browser.isOpera()) {
      // Naively assume we're in IE
      try {
        script.htmlFor = script.id;
        script.event = 'onclick';
      } catch (x) {
        // intentionally empty
      }
      script.async = true;
    } else {
      // Opera, second sync script hack
      script2 = this.script2 = global.document.createElement('script');
      script2.text = "try{var a = document.getElementById('" + script.id + "'); if(a)a.onerror();}catch(x){};";
      script.async = script2.async = false;
    }
  }
  if (typeof script.async !== 'undefined') {
    script.async = true;
  }

  var head = global.document.getElementsByTagName('head')[0];
  head.insertBefore(script, head.firstChild);
  if (script2) {
    head.insertBefore(script2, head.firstChild);
  }
};

module.exports = JsonpReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],32:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:xhr');
}

function XhrReceiver(url, AjaxObject) {
  debug(url);
  EventEmitter.call(this);
  var self = this;

  this.bufferPosition = 0;

  this.xo = new AjaxObject('POST', url, null);
  this.xo.on('chunk', this._chunkHandler.bind(this));
  this.xo.once('finish', function(status, text) {
    debug('finish', status, text);
    self._chunkHandler(status, text);
    self.xo = null;
    var reason = status === 200 ? 'network' : 'permanent';
    debug('close', reason);
    self.emit('close', null, reason);
    self._cleanup();
  });
}

inherits(XhrReceiver, EventEmitter);

XhrReceiver.prototype._chunkHandler = function(status, text) {
  debug('_chunkHandler', status);
  if (status !== 200 || !text) {
    return;
  }

  for (var idx = -1; ; this.bufferPosition += idx + 1) {
    var buf = text.slice(this.bufferPosition);
    idx = buf.indexOf('\n');
    if (idx === -1) {
      break;
    }
    var msg = buf.slice(0, idx);
    if (msg) {
      debug('message', msg);
      this.emit('message', msg);
    }
  }
};

XhrReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

XhrReceiver.prototype.abort = function() {
  debug('abort');
  if (this.xo) {
    this.xo.close();
    debug('close');
    this.emit('close', null, 'user');
    this.xo = null;
  }
  this._cleanup();
};

module.exports = XhrReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],33:[function(require,module,exports){
(function (process,global){
'use strict';

var random = require('../../utils/random')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:jsonp');
}

var form, area;

function createIframe(id) {
  debug('createIframe', id);
  try {
    // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
    return global.document.createElement('<iframe name="' + id + '">');
  } catch (x) {
    var iframe = global.document.createElement('iframe');
    iframe.name = id;
    return iframe;
  }
}

function createForm() {
  debug('createForm');
  form = global.document.createElement('form');
  form.style.display = 'none';
  form.style.position = 'absolute';
  form.method = 'POST';
  form.enctype = 'application/x-www-form-urlencoded';
  form.acceptCharset = 'UTF-8';

  area = global.document.createElement('textarea');
  area.name = 'd';
  form.appendChild(area);

  global.document.body.appendChild(form);
}

module.exports = function(url, payload, callback) {
  debug(url, payload);
  if (!form) {
    createForm();
  }
  var id = 'a' + random.string(8);
  form.target = id;
  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);

  var iframe = createIframe(id);
  iframe.id = id;
  iframe.style.display = 'none';
  form.appendChild(iframe);

  try {
    area.value = payload;
  } catch (e) {
    // seriously broken browsers get here
  }
  form.submit();

  var completed = function(err) {
    debug('completed', id, err);
    if (!iframe.onerror) {
      return;
    }
    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;
    // Opera mini doesn't like if we GC iframe
    // immediately, thus this timeout.
    setTimeout(function() {
      debug('cleaning up', id);
      iframe.parentNode.removeChild(iframe);
      iframe = null;
    }, 500);
    area.value = '';
    // It is not possible to detect if the iframe succeeded or
    // failed to submit our form.
    callback(err);
  };
  iframe.onerror = function() {
    debug('onerror', id);
    completed();
  };
  iframe.onload = function() {
    debug('onload', id);
    completed();
  };
  iframe.onreadystatechange = function(e) {
    debug('onreadystatechange', id, iframe.readyState, e);
    if (iframe.readyState === 'complete') {
      completed();
    }
  };
  return function() {
    debug('aborted', id);
    completed(new Error('Aborted'));
  };
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/random":50,"../../utils/url":52,"debug":55}],34:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , eventUtils = require('../../utils/event')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:xdr');
}

// References:
//   http://ajaxian.com/archives/100-line-ajax-wrapper
//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx

function XDRObject(method, url, payload) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self._start(method, url, payload);
  }, 0);
}

inherits(XDRObject, EventEmitter);

XDRObject.prototype._start = function(method, url, payload) {
  debug('_start');
  var self = this;
  var xdr = new global.XDomainRequest();
  // IE caches even POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  xdr.onerror = function() {
    debug('onerror');
    self._error();
  };
  xdr.ontimeout = function() {
    debug('ontimeout');
    self._error();
  };
  xdr.onprogress = function() {
    debug('progress', xdr.responseText);
    self.emit('chunk', 200, xdr.responseText);
  };
  xdr.onload = function() {
    debug('load');
    self.emit('finish', 200, xdr.responseText);
    self._cleanup(false);
  };
  this.xdr = xdr;
  this.unloadRef = eventUtils.unloadAdd(function() {
    self._cleanup(true);
  });
  try {
    // Fails with AccessDenied if port number is bogus
    this.xdr.open(method, url);
    if (this.timeout) {
      this.xdr.timeout = this.timeout;
    }
    this.xdr.send(payload);
  } catch (x) {
    this._error();
  }
};

XDRObject.prototype._error = function() {
  this.emit('finish', 0, '');
  this._cleanup(false);
};

XDRObject.prototype._cleanup = function(abort) {
  debug('cleanup', abort);
  if (!this.xdr) {
    return;
  }
  this.removeAllListeners();
  eventUtils.unloadDel(this.unloadRef);

  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;
  if (abort) {
    try {
      this.xdr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xdr = null;
};

XDRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

// IE 8/9 if the request target uses the same scheme - #79
XDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());

module.exports = XDRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],35:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRCorsObject(method, url, payload, opts) {
  XhrDriver.call(this, method, url, payload, opts);
}

inherits(XHRCorsObject, XhrDriver);

XHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;

module.exports = XHRCorsObject;

},{"../driver/xhr":17,"inherits":57}],36:[function(require,module,exports){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  ;

function XHRFake(/* method, url, payload, opts */) {
  var self = this;
  EventEmitter.call(this);

  this.to = setTimeout(function() {
    self.emit('finish', 200, '{}');
  }, XHRFake.timeout);
}

inherits(XHRFake, EventEmitter);

XHRFake.prototype.close = function() {
  clearTimeout(this.to);
};

XHRFake.timeout = 2000;

module.exports = XHRFake;

},{"events":3,"inherits":57}],37:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRLocalObject(method, url, payload /*, opts */) {
  XhrDriver.call(this, method, url, payload, {
    noCredentials: true
  });
}

inherits(XHRLocalObject, XhrDriver);

XHRLocalObject.enabled = XhrDriver.enabled;

module.exports = XHRLocalObject;

},{"../driver/xhr":17,"inherits":57}],38:[function(require,module,exports){
(function (process){
'use strict';

var utils = require('../utils/event')
  , urlUtils = require('../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , WebsocketDriver = require('./driver/websocket')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:websocket');
}

function WebSocketTransport(transUrl, ignore, options) {
  if (!WebSocketTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  EventEmitter.call(this);
  debug('constructor', transUrl);

  var self = this;
  var url = urlUtils.addPath(transUrl, '/websocket');
  if (url.slice(0, 5) === 'https') {
    url = 'wss' + url.slice(5);
  } else {
    url = 'ws' + url.slice(4);
  }
  this.url = url;

  this.ws = new WebsocketDriver(this.url, [], options);
  this.ws.onmessage = function(e) {
    debug('message event', e.data);
    self.emit('message', e.data);
  };
  // Firefox has an interesting bug. If a websocket connection is
  // created after onunload, it stays alive even when user
  // navigates away from the page. In such situation let's lie -
  // let's not open the ws connection at all. See:
  // https://github.com/sockjs/sockjs-client/issues/28
  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload');
    self.ws.close();
  });
  this.ws.onclose = function(e) {
    debug('close event', e.code, e.reason);
    self.emit('close', e.code, e.reason);
    self._cleanup();
  };
  this.ws.onerror = function(e) {
    debug('error event', e);
    self.emit('close', 1006, 'WebSocket connection broken');
    self._cleanup();
  };
}

inherits(WebSocketTransport, EventEmitter);

WebSocketTransport.prototype.send = function(data) {
  var msg = '[' + data + ']';
  debug('send', msg);
  this.ws.send(msg);
};

WebSocketTransport.prototype.close = function() {
  debug('close');
  var ws = this.ws;
  this._cleanup();
  if (ws) {
    ws.close();
  }
};

WebSocketTransport.prototype._cleanup = function() {
  debug('_cleanup');
  var ws = this.ws;
  if (ws) {
    ws.onmessage = ws.onclose = ws.onerror = null;
  }
  utils.unloadDel(this.unloadRef);
  this.unloadRef = this.ws = null;
  this.removeAllListeners();
};

WebSocketTransport.enabled = function() {
  debug('enabled');
  return !!WebsocketDriver;
};
WebSocketTransport.transportName = 'websocket';

// In theory, ws should require 1 round trip. But in chrome, this is
// not very stable over SSL. Most likely a ws connection requires a
// separate SSL connection, in which case 2 round trips are an
// absolute minumum.
WebSocketTransport.roundTrips = 2;

module.exports = WebSocketTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,"debug":55,"events":3,"inherits":57}],39:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XdrStreamingTransport = require('./xdr-streaming')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

function XdrPollingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);
}

inherits(XdrPollingTransport, AjaxBasedTransport);

XdrPollingTransport.enabled = XdrStreamingTransport.enabled;
XdrPollingTransport.transportName = 'xdr-polling';
XdrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,"inherits":57}],40:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

// According to:
//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests
//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/

function XdrStreamingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);
}

inherits(XdrStreamingTransport, AjaxBasedTransport);

XdrStreamingTransport.enabled = function(info) {
  if (info.cookie_needed || info.nullOrigin) {
    return false;
  }
  return XDRObject.enabled && info.sameScheme;
};

XdrStreamingTransport.transportName = 'xdr-streaming';
XdrStreamingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrStreamingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"inherits":57}],41:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  ;

function XhrPollingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);
}

inherits(XhrPollingTransport, AjaxBasedTransport);

XhrPollingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }

  if (XHRLocalObject.enabled && info.sameOrigin) {
    return true;
  }
  return XHRCorsObject.enabled;
};

XhrPollingTransport.transportName = 'xhr-polling';
XhrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XhrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],42:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  , browser = require('../utils/browser')
  ;

function XhrStreamingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);
}

inherits(XhrStreamingTransport, AjaxBasedTransport);

XhrStreamingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }
  // Opera doesn't support xhr-streaming #60
  // But it might be able to #92
  if (browser.isOpera()) {
    return false;
  }

  return XHRCorsObject.enabled;
};

XhrStreamingTransport.transportName = 'xhr-streaming';
XhrStreamingTransport.roundTrips = 2; // preflight, ajax

// Safari gets confused when a streaming ajax request is started
// before onload. This causes the load indicator to spin indefinetely.
// Only require body when used in a browser
XhrStreamingTransport.needBody = !!global.document;

module.exports = XhrStreamingTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],43:[function(require,module,exports){
(function (global){
'use strict';

if (global.crypto && global.crypto.getRandomValues) {
  module.exports.randomBytes = function(length) {
    var bytes = new Uint8Array(length);
    global.crypto.getRandomValues(bytes);
    return bytes;
  };
} else {
  module.exports.randomBytes = function(length) {
    var bytes = new Array(length);
    for (var i = 0; i < length; i++) {
      bytes[i] = Math.floor(Math.random() * 256);
    }
    return bytes;
  };
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],44:[function(require,module,exports){
(function (global){
'use strict';

module.exports = {
  isOpera: function() {
    return global.navigator &&
      /opera/i.test(global.navigator.userAgent);
  }

, isKonqueror: function() {
    return global.navigator &&
      /konqueror/i.test(global.navigator.userAgent);
  }

  // #187 wrap document.domain in try/catch because of WP8 from file:///
, hasDomain: function () {
    // non-browser client always has a domain
    if (!global.document) {
      return true;
    }

    try {
      return !!global.document.domain;
    } catch (e) {
      return false;
    }
  }
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],45:[function(require,module,exports){
'use strict';

var JSON3 = require('json3');

// Some extra characters that Chrome gets wrong, and substitutes with
// something else on the wire.
// eslint-disable-next-line no-control-regex, no-misleading-character-class
var extraEscapable = /[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g
  , extraLookup;

// This may be quite slow, so let's delay until user actually uses bad
// characters.
var unrollLookup = function(escapable) {
  var i;
  var unrolled = {};
  var c = [];
  for (i = 0; i < 65536; i++) {
    c.push( String.fromCharCode(i) );
  }
  escapable.lastIndex = 0;
  c.join('').replace(escapable, function(a) {
    unrolled[ a ] = '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
    return '';
  });
  escapable.lastIndex = 0;
  return unrolled;
};

// Quote string, also taking care of unicode characters that browsers
// often break. Especially, take care of unicode surrogates:
// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates
module.exports = {
  quote: function(string) {
    var quoted = JSON3.stringify(string);

    // In most cases this should be very fast and good enough.
    extraEscapable.lastIndex = 0;
    if (!extraEscapable.test(quoted)) {
      return quoted;
    }

    if (!extraLookup) {
      extraLookup = unrollLookup(extraEscapable);
    }

    return quoted.replace(extraEscapable, function(a) {
      return extraLookup[a];
    });
  }
};

},{"json3":58}],46:[function(require,module,exports){
(function (global){
'use strict';

var random = require('./random');

var onUnload = {}
  , afterUnload = false
    // detect google chrome packaged apps because they don't allow the 'unload' event
  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime
  ;

module.exports = {
  attachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.addEventListener(event, listener, false);
    } else if (global.document && global.attachEvent) {
      // IE quirks.
      // According to: http://stevesouders.com/misc/test-postmessage.php
      // the message gets delivered only to 'document', not 'window'.
      global.document.attachEvent('on' + event, listener);
      // I get 'window' for ie8.
      global.attachEvent('on' + event, listener);
    }
  }

, detachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.removeEventListener(event, listener, false);
    } else if (global.document && global.detachEvent) {
      global.document.detachEvent('on' + event, listener);
      global.detachEvent('on' + event, listener);
    }
  }

, unloadAdd: function(listener) {
    if (isChromePackagedApp) {
      return null;
    }

    var ref = random.string(8);
    onUnload[ref] = listener;
    if (afterUnload) {
      setTimeout(this.triggerUnloadCallbacks, 0);
    }
    return ref;
  }

, unloadDel: function(ref) {
    if (ref in onUnload) {
      delete onUnload[ref];
    }
  }

, triggerUnloadCallbacks: function() {
    for (var ref in onUnload) {
      onUnload[ref]();
      delete onUnload[ref];
    }
  }
};

var unloadTriggered = function() {
  if (afterUnload) {
    return;
  }
  afterUnload = true;
  module.exports.triggerUnloadCallbacks();
};

// 'unload' alone is not reliable in opera within an iframe, but we
// can't use `beforeunload` as IE fires it on javascript: links.
if (!isChromePackagedApp) {
  module.exports.attachEvent('unload', unloadTriggered);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./random":50}],47:[function(require,module,exports){
(function (process,global){
'use strict';

var eventUtils = require('./event')
  , JSON3 = require('json3')
  , browser = require('./browser')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:iframe');
}

module.exports = {
  WPrefix: '_jp'
, currentWindowId: null

, polluteGlobalNamespace: function() {
    if (!(module.exports.WPrefix in global)) {
      global[module.exports.WPrefix] = {};
    }
  }

, postMessage: function(type, data) {
    if (global.parent !== global) {
      global.parent.postMessage(JSON3.stringify({
        windowId: module.exports.currentWindowId
      , type: type
      , data: data || ''
      }), '*');
    } else {
      debug('Cannot postMessage, no parent window.', type, data);
    }
  }

, createIframe: function(iframeUrl, errorCallback) {
    var iframe = global.document.createElement('iframe');
    var tref, unloadRef;
    var unattach = function() {
      debug('unattach');
      clearTimeout(tref);
      // Explorer had problems with that.
      try {
        iframe.onload = null;
      } catch (x) {
        // intentionally empty
      }
      iframe.onerror = null;
    };
    var cleanup = function() {
      debug('cleanup');
      if (iframe) {
        unattach();
        // This timeout makes chrome fire onbeforeunload event
        // within iframe. Without the timeout it goes straight to
        // onunload.
        setTimeout(function() {
          if (iframe) {
            iframe.parentNode.removeChild(iframe);
          }
          iframe = null;
        }, 0);
        eventUtils.unloadDel(unloadRef);
      }
    };
    var onerror = function(err) {
      debug('onerror', err);
      if (iframe) {
        cleanup();
        errorCallback(err);
      }
    };
    var post = function(msg, origin) {
      debug('post', msg, origin);
      setTimeout(function() {
        try {
          // When the iframe is not loaded, IE raises an exception
          // on 'contentWindow'.
          if (iframe && iframe.contentWindow) {
            iframe.contentWindow.postMessage(msg, origin);
          }
        } catch (x) {
          // intentionally empty
        }
      }, 0);
    };

    iframe.src = iframeUrl;
    iframe.style.display = 'none';
    iframe.style.position = 'absolute';
    iframe.onerror = function() {
      onerror('onerror');
    };
    iframe.onload = function() {
      debug('onload');
      // `onload` is triggered before scripts on the iframe are
      // executed. Give it few seconds to actually load stuff.
      clearTimeout(tref);
      tref = setTimeout(function() {
        onerror('onload timeout');
      }, 2000);
    };
    global.document.body.appendChild(iframe);
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }

/* eslint no-undef: "off", new-cap: "off" */
, createHtmlfile: function(iframeUrl, errorCallback) {
    var axo = ['Active'].concat('Object').join('X');
    var doc = new global[axo]('htmlfile');
    var tref, unloadRef;
    var iframe;
    var unattach = function() {
      clearTimeout(tref);
      iframe.onerror = null;
    };
    var cleanup = function() {
      if (doc) {
        unattach();
        eventUtils.unloadDel(unloadRef);
        iframe.parentNode.removeChild(iframe);
        iframe = doc = null;
        CollectGarbage();
      }
    };
    var onerror = function(r) {
      debug('onerror', r);
      if (doc) {
        cleanup();
        errorCallback(r);
      }
    };
    var post = function(msg, origin) {
      try {
        // When the iframe is not loaded, IE raises an exception
        // on 'contentWindow'.
        setTimeout(function() {
          if (iframe && iframe.contentWindow) {
              iframe.contentWindow.postMessage(msg, origin);
          }
        }, 0);
      } catch (x) {
        // intentionally empty
      }
    };

    doc.open();
    doc.write('<html><s' + 'cript>' +
              'document.domain="' + global.document.domain + '";' +
              '</s' + 'cript></html>');
    doc.close();
    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];
    var c = doc.createElement('div');
    doc.body.appendChild(c);
    iframe = doc.createElement('iframe');
    c.appendChild(iframe);
    iframe.src = iframeUrl;
    iframe.onerror = function() {
      onerror('onerror');
    };
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }
};

module.exports.iframeEnabled = false;
if (global.document) {
  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with
  // huge delay, or not at all.
  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||
    typeof global.postMessage === 'object') && (!browser.isKonqueror());
}

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./browser":44,"./event":46,"debug":55,"json3":58}],48:[function(require,module,exports){
(function (global){
'use strict';

var logObject = {};
['log', 'debug', 'warn'].forEach(function (level) {
  var levelExists;

  try {
    levelExists = global.console && global.console[level] && global.console[level].apply;
  } catch(e) {
    // do nothing
  }

  logObject[level] = levelExists ? function () {
    return global.console[level].apply(global.console, arguments);
  } : (level === 'log' ? function () {} : logObject.log);
});

module.exports = logObject;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],49:[function(require,module,exports){
'use strict';

module.exports = {
  isObject: function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  }

, extend: function(obj) {
    if (!this.isObject(obj)) {
      return obj;
    }
    var source, prop;
    for (var i = 1, length = arguments.length; i < length; i++) {
      source = arguments[i];
      for (prop in source) {
        if (Object.prototype.hasOwnProperty.call(source, prop)) {
          obj[prop] = source[prop];
        }
      }
    }
    return obj;
  }
};

},{}],50:[function(require,module,exports){
'use strict';

var crypto = require('crypto');

// This string has length 32, a power of 2, so the modulus doesn't introduce a
// bias.
var _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';
module.exports = {
  string: function(length) {
    var max = _randomStringChars.length;
    var bytes = crypto.randomBytes(length);
    var ret = [];
    for (var i = 0; i < length; i++) {
      ret.push(_randomStringChars.substr(bytes[i] % max, 1));
    }
    return ret.join('');
  }

, number: function(max) {
    return Math.floor(Math.random() * max);
  }

, numberString: function(max) {
    var t = ('' + (max - 1)).length;
    var p = new Array(t + 1).join('0');
    return (p + this.number(max)).slice(-t);
  }
};

},{"crypto":43}],51:[function(require,module,exports){
(function (process){
'use strict';

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:transport');
}

module.exports = function(availableTransports) {
  return {
    filterToEnabled: function(transportsWhitelist, info) {
      var transports = {
        main: []
      , facade: []
      };
      if (!transportsWhitelist) {
        transportsWhitelist = [];
      } else if (typeof transportsWhitelist === 'string') {
        transportsWhitelist = [transportsWhitelist];
      }

      availableTransports.forEach(function(trans) {
        if (!trans) {
          return;
        }

        if (trans.transportName === 'websocket' && info.websocket === false) {
          debug('disabled from server', 'websocket');
          return;
        }

        if (transportsWhitelist.length &&
            transportsWhitelist.indexOf(trans.transportName) === -1) {
          debug('not in whitelist', trans.transportName);
          return;
        }

        if (trans.enabled(info)) {
          debug('enabled', trans.transportName);
          transports.main.push(trans);
          if (trans.facadeTransport) {
            transports.facade.push(trans.facadeTransport);
          }
        } else {
          debug('disabled', trans.transportName);
        }
      });
      return transports;
    }
  };
};

}).call(this,{ env: {} })

},{"debug":55}],52:[function(require,module,exports){
(function (process){
'use strict';

var URL = require('url-parse');

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:url');
}

module.exports = {
  getOrigin: function(url) {
    if (!url) {
      return null;
    }

    var p = new URL(url);
    if (p.protocol === 'file:') {
      return null;
    }

    var port = p.port;
    if (!port) {
      port = (p.protocol === 'https:') ? '443' : '80';
    }

    return p.protocol + '//' + p.hostname + ':' + port;
  }

, isOriginEqual: function(a, b) {
    var res = this.getOrigin(a) === this.getOrigin(b);
    debug('same', a, b, res);
    return res;
  }

, isSchemeEqual: function(a, b) {
    return (a.split(':')[0] === b.split(':')[0]);
  }

, addPath: function (url, path) {
    var qs = url.split('?');
    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');
  }

, addQuery: function (url, q) {
    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));
  }

, isLoopbackAddr: function (addr) {
    return /^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr) || /^\[::1\]$/.test(addr);
  }
};

}).call(this,{ env: {} })

},{"debug":55,"url-parse":61}],53:[function(require,module,exports){
module.exports = '1.5.0';

},{}],54:[function(require,module,exports){
/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}

},{}],55:[function(require,module,exports){
(function (process){
"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */
exports.log = log;
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
/**
 * Colors.
 */

exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];
/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */
// eslint-disable-next-line complexity

function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
    return true;
  } // Internet Explorer and Edge do not support colors.


  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
    return false;
  } // Is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632


  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
}
/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */


function formatArgs(args) {
  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);

  if (!this.useColors) {
    return;
  }

  var c = 'color: ' + this.color;
  args.splice(1, 0, c, 'color: inherit'); // The final "%c" is somewhat tricky, because there could be other
  // arguments passed either before or after the %c, so we need to
  // figure out the correct index to insert the CSS into

  var index = 0;
  var lastC = 0;
  args[0].replace(/%[a-zA-Z%]/g, function (match) {
    if (match === '%%') {
      return;
    }

    index++;

    if (match === '%c') {
      // We only are interested in the *last* %c
      // (the user may have provided their own)
      lastC = index;
    }
  });
  args.splice(lastC, 0, c);
}
/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */


function log() {
  var _console;

  // This hackery is required for IE8/9, where
  // the `console.log` function doesn't have 'apply'
  return (typeof console === "undefined" ? "undefined" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);
}
/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */


function save(namespaces) {
  try {
    if (namespaces) {
      exports.storage.setItem('debug', namespaces);
    } else {
      exports.storage.removeItem('debug');
    }
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}
/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */


function load() {
  var r;

  try {
    r = exports.storage.getItem('debug');
  } catch (error) {} // Swallow
  // XXX (@Qix-) should we be logging these?
  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG


  if (!r && typeof process !== 'undefined' && 'env' in process) {
    r = process.env.DEBUG;
  }

  return r;
}
/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */


function localstorage() {
  try {
    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
    // The Browser also has localStorage in the global context.
    return localStorage;
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}

module.exports = require('./common')(exports);
var formatters = module.exports.formatters;
/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
  try {
    return JSON.stringify(v);
  } catch (error) {
    return '[UnexpectedJSONParseError]: ' + error.message;
  }
};


}).call(this,{ env: {} })

},{"./common":56}],56:[function(require,module,exports){
"use strict";

/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */
function setup(env) {
  createDebug.debug = createDebug;
  createDebug.default = createDebug;
  createDebug.coerce = coerce;
  createDebug.disable = disable;
  createDebug.enable = enable;
  createDebug.enabled = enabled;
  createDebug.humanize = require('ms');
  Object.keys(env).forEach(function (key) {
    createDebug[key] = env[key];
  });
  /**
  * Active `debug` instances.
  */

  createDebug.instances = [];
  /**
  * The currently active debug mode names, and names to skip.
  */

  createDebug.names = [];
  createDebug.skips = [];
  /**
  * Map of special "%n" handling functions, for the debug "format" argument.
  *
  * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
  */

  createDebug.formatters = {};
  /**
  * Selects a color for a debug namespace
  * @param {String} namespace The namespace string for the for the debug instance to be colored
  * @return {Number|String} An ANSI color code for the given namespace
  * @api private
  */

  function selectColor(namespace) {
    var hash = 0;

    for (var i = 0; i < namespace.length; i++) {
      hash = (hash << 5) - hash + namespace.charCodeAt(i);
      hash |= 0; // Convert to 32bit integer
    }

    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
  }

  createDebug.selectColor = selectColor;
  /**
  * Create a debugger with the given `namespace`.
  *
  * @param {String} namespace
  * @return {Function}
  * @api public
  */

  function createDebug(namespace) {
    var prevTime;

    function debug() {
      // Disabled?
      if (!debug.enabled) {
        return;
      }

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var self = debug; // Set `diff` timestamp

      var curr = Number(new Date());
      var ms = curr - (prevTime || curr);
      self.diff = ms;
      self.prev = prevTime;
      self.curr = curr;
      prevTime = curr;
      args[0] = createDebug.coerce(args[0]);

      if (typeof args[0] !== 'string') {
        // Anything else let's inspect with %O
        args.unshift('%O');
      } // Apply any `formatters` transformations


      var index = 0;
      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {
        // If we encounter an escaped % then don't increase the array index
        if (match === '%%') {
          return match;
        }

        index++;
        var formatter = createDebug.formatters[format];

        if (typeof formatter === 'function') {
          var val = args[index];
          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`

          args.splice(index, 1);
          index--;
        }

        return match;
      }); // Apply env-specific formatting (colors, etc.)

      createDebug.formatArgs.call(self, args);
      var logFn = self.log || createDebug.log;
      logFn.apply(self, args);
    }

    debug.namespace = namespace;
    debug.enabled = createDebug.enabled(namespace);
    debug.useColors = createDebug.useColors();
    debug.color = selectColor(namespace);
    debug.destroy = destroy;
    debug.extend = extend; // Debug.formatArgs = formatArgs;
    // debug.rawLog = rawLog;
    // env-specific initialization logic for debug instances

    if (typeof createDebug.init === 'function') {
      createDebug.init(debug);
    }

    createDebug.instances.push(debug);
    return debug;
  }

  function destroy() {
    var index = createDebug.instances.indexOf(this);

    if (index !== -1) {
      createDebug.instances.splice(index, 1);
      return true;
    }

    return false;
  }

  function extend(namespace, delimiter) {
    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
  }
  /**
  * Enables a debug mode by namespaces. This can include modes
  * separated by a colon and wildcards.
  *
  * @param {String} namespaces
  * @api public
  */


  function enable(namespaces) {
    createDebug.save(namespaces);
    createDebug.names = [];
    createDebug.skips = [];
    var i;
    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
    var len = split.length;

    for (i = 0; i < len; i++) {
      if (!split[i]) {
        // ignore empty strings
        continue;
      }

      namespaces = split[i].replace(/\*/g, '.*?');

      if (namespaces[0] === '-') {
        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
      } else {
        createDebug.names.push(new RegExp('^' + namespaces + '$'));
      }
    }

    for (i = 0; i < createDebug.instances.length; i++) {
      var instance = createDebug.instances[i];
      instance.enabled = createDebug.enabled(instance.namespace);
    }
  }
  /**
  * Disable debug output.
  *
  * @api public
  */


  function disable() {
    createDebug.enable('');
  }
  /**
  * Returns true if the given mode name is enabled, false otherwise.
  *
  * @param {String} name
  * @return {Boolean}
  * @api public
  */


  function enabled(name) {
    if (name[name.length - 1] === '*') {
      return true;
    }

    var i;
    var len;

    for (i = 0, len = createDebug.skips.length; i < len; i++) {
      if (createDebug.skips[i].test(name)) {
        return false;
      }
    }

    for (i = 0, len = createDebug.names.length; i < len; i++) {
      if (createDebug.names[i].test(name)) {
        return true;
      }
    }

    return false;
  }
  /**
  * Coerce `val`.
  *
  * @param {Mixed} val
  * @return {Mixed}
  * @api private
  */


  function coerce(val) {
    if (val instanceof Error) {
      return val.stack || val.message;
    }

    return val;
  }

  createDebug.enable(createDebug.load());
  return createDebug;
}

module.exports = setup;


},{"ms":54}],57:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      ctor.prototype = Object.create(superCtor.prototype, {
        constructor: {
          value: ctor,
          enumerable: false,
          writable: true,
          configurable: true
        }
      })
    }
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      var TempCtor = function () {}
      TempCtor.prototype = superCtor.prototype
      ctor.prototype = new TempCtor()
      ctor.prototype.constructor = ctor
    }
  }
}

},{}],58:[function(require,module,exports){
(function (global){
/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */
;(function () {
  // Detect the `define` function exposed by asynchronous module loaders. The
  // strict `define` check is necessary for compatibility with `r.js`.
  var isLoader = typeof define === "function" && define.amd;

  // A set of types used to distinguish objects from primitives.
  var objectTypes = {
    "function": true,
    "object": true
  };

  // Detect the `exports` object exposed by CommonJS implementations.
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  // Use the `global` object exposed by Node (including Browserify via
  // `insert-module-globals`), Narwhal, and Ringo as the default context,
  // and the `window` object in browsers. Rhino exports a `global` function
  // instead.
  var root = objectTypes[typeof window] && window || this,
      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == "object" && global;

  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {
    root = freeGlobal;
  }

  // Public: Initializes JSON 3 using the given `context` object, attaching the
  // `stringify` and `parse` functions to the specified `exports` object.
  function runInContext(context, exports) {
    context || (context = root.Object());
    exports || (exports = root.Object());

    // Native constructor aliases.
    var Number = context.Number || root.Number,
        String = context.String || root.String,
        Object = context.Object || root.Object,
        Date = context.Date || root.Date,
        SyntaxError = context.SyntaxError || root.SyntaxError,
        TypeError = context.TypeError || root.TypeError,
        Math = context.Math || root.Math,
        nativeJSON = context.JSON || root.JSON;

    // Delegate to the native `stringify` and `parse` implementations.
    if (typeof nativeJSON == "object" && nativeJSON) {
      exports.stringify = nativeJSON.stringify;
      exports.parse = nativeJSON.parse;
    }

    // Convenience aliases.
    var objectProto = Object.prototype,
        getClass = objectProto.toString,
        isProperty = objectProto.hasOwnProperty,
        undefined;

    // Internal: Contains `try...catch` logic used by other functions.
    // This prevents other functions from being deoptimized.
    function attempt(func, errorFunc) {
      try {
        func();
      } catch (exception) {
        if (errorFunc) {
          errorFunc();
        }
      }
    }

    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.
    var isExtended = new Date(-3509827334573292);
    attempt(function () {
      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical
      // results for certain dates in Opera >= 10.53.
      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&
        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;
    });

    // Internal: Determines whether the native `JSON.stringify` and `parse`
    // implementations are spec-compliant. Based on work by Ken Snyder.
    function has(name) {
      if (has[name] != null) {
        // Return cached feature test result.
        return has[name];
      }
      var isSupported;
      if (name == "bug-string-char-index") {
        // IE <= 7 doesn't support accessing string characters using square
        // bracket notation. IE 8 only supports this for primitives.
        isSupported = "a"[0] != "a";
      } else if (name == "json") {
        // Indicates whether both `JSON.stringify` and `JSON.parse` are
        // supported.
        isSupported = has("json-stringify") && has("date-serialization") && has("json-parse");
      } else if (name == "date-serialization") {
        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.
        isSupported = has("json-stringify") && isExtended;
        if (isSupported) {
          var stringify = exports.stringify;
          attempt(function () {
            isSupported =
              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly
              // serialize extended years.
              stringify(new Date(-8.64e15)) == '"-271821-04-20T00:00:00.000Z"' &&
              // The milliseconds are optional in ES 5, but required in 5.1.
              stringify(new Date(8.64e15)) == '"+275760-09-13T00:00:00.000Z"' &&
              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative
              // four-digit years instead of six-digit years. Credits: @Yaffle.
              stringify(new Date(-621987552e5)) == '"-000001-01-01T00:00:00.000Z"' &&
              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond
              // values less than 1000. Credits: @Yaffle.
              stringify(new Date(-1)) == '"1969-12-31T23:59:59.999Z"';
          });
        }
      } else {
        var value, serialized = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
        // Test `JSON.stringify`.
        if (name == "json-stringify") {
          var stringify = exports.stringify, stringifySupported = typeof stringify == "function";
          if (stringifySupported) {
            // A test function object with a custom `toJSON` method.
            (value = function () {
              return 1;
            }).toJSON = value;
            attempt(function () {
              stringifySupported =
                // Firefox 3.1b1 and b2 serialize string, number, and boolean
                // primitives as object literals.
                stringify(0) === "0" &&
                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object
                // literals.
                stringify(new Number()) === "0" &&
                stringify(new String()) == '""' &&
                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or
                // does not define a canonical JSON representation (this applies to
                // objects with `toJSON` properties as well, *unless* they are nested
                // within an object or array).
                stringify(getClass) === undefined &&
                // IE 8 serializes `undefined` as `"undefined"`. Safari <= 5.1.7 and
                // FF 3.1b3 pass this test.
                stringify(undefined) === undefined &&
                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,
                // respectively, if the value is omitted entirely.
                stringify() === undefined &&
                // FF 3.1b1, 2 throw an error if the given value is not a number,
                // string, array, object, Boolean, or `null` literal. This applies to
                // objects with custom `toJSON` methods as well, unless they are nested
                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`
                // methods entirely.
                stringify(value) === "1" &&
                stringify([value]) == "[1]" &&
                // Prototype <= 1.6.1 serializes `[undefined]` as `"[]"` instead of
                // `"[null]"`.
                stringify([undefined]) == "[null]" &&
                // YUI 3.0.0b1 fails to serialize `null` literals.
                stringify(null) == "null" &&
                // FF 3.1b1, 2 halts serialization if an array contains a function:
                // `[1, true, getClass, 1]` serializes as "[1,true,],". FF 3.1b3
                // elides non-JSON values from objects and arrays, unless they
                // define custom `toJSON` methods.
                stringify([undefined, getClass, null]) == "[null,null,null]" &&
                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences
                // where character escape codes are expected (e.g., `\b` => `\u0008`).
                stringify({ "a": [value, true, false, null, "\x00\b\n\f\r\t"] }) == serialized &&
                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.
                stringify(null, value) === "1" &&
                stringify([1, 2], null, 1) == "[\n 1,\n 2\n]";
            }, function () {
              stringifySupported = false;
            });
          }
          isSupported = stringifySupported;
        }
        // Test `JSON.parse`.
        if (name == "json-parse") {
          var parse = exports.parse, parseSupported;
          if (typeof parse == "function") {
            attempt(function () {
              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.
              // Conforming implementations should also coerce the initial argument to
              // a string prior to parsing.
              if (parse("0") === 0 && !parse(false)) {
                // Simple parsing test.
                value = parse(serialized);
                parseSupported = value["a"].length == 5 && value["a"][0] === 1;
                if (parseSupported) {
                  attempt(function () {
                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.
                    parseSupported = !parse('"\t"');
                  });
                  if (parseSupported) {
                    attempt(function () {
                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading
                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow
                      // certain octal literals.
                      parseSupported = parse("01") !== 1;
                    });
                  }
                  if (parseSupported) {
                    attempt(function () {
                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal
                      // points. These environments, along with FF 3.1b1 and 2,
                      // also allow trailing commas in JSON objects and arrays.
                      parseSupported = parse("1.") !== 1;
                    });
                  }
                }
              }
            }, function () {
              parseSupported = false;
            });
          }
          isSupported = parseSupported;
        }
      }
      return has[name] = !!isSupported;
    }
    has["bug-string-char-index"] = has["date-serialization"] = has["json"] = has["json-stringify"] = has["json-parse"] = null;

    if (!has("json")) {
      // Common `[[Class]]` name aliases.
      var functionClass = "[object Function]",
          dateClass = "[object Date]",
          numberClass = "[object Number]",
          stringClass = "[object String]",
          arrayClass = "[object Array]",
          booleanClass = "[object Boolean]";

      // Detect incomplete support for accessing string characters by index.
      var charIndexBuggy = has("bug-string-char-index");

      // Internal: Normalizes the `for...in` iteration algorithm across
      // environments. Each enumerated key is yielded to a `callback` function.
      var forOwn = function (object, callback) {
        var size = 0, Properties, dontEnums, property;

        // Tests for bugs in the current environment's `for...in` algorithm. The
        // `valueOf` property inherits the non-enumerable flag from
        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.
        (Properties = function () {
          this.valueOf = 0;
        }).prototype.valueOf = 0;

        // Iterate over a new instance of the `Properties` class.
        dontEnums = new Properties();
        for (property in dontEnums) {
          // Ignore all properties inherited from `Object.prototype`.
          if (isProperty.call(dontEnums, property)) {
            size++;
          }
        }
        Properties = dontEnums = null;

        // Normalize the iteration algorithm.
        if (!size) {
          // A list of non-enumerable properties inherited from `Object.prototype`.
          dontEnums = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];
          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable
          // properties.
          forOwn = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, length;
            var hasProperty = !isFunction && typeof object.constructor != "function" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;
            for (property in object) {
              // Gecko <= 1.0 enumerates the `prototype` property of functions under
              // certain conditions; IE does not.
              if (!(isFunction && property == "prototype") && hasProperty.call(object, property)) {
                callback(property);
              }
            }
            // Manually invoke the callback for each non-enumerable property.
            for (length = dontEnums.length; property = dontEnums[--length];) {
              if (hasProperty.call(object, property)) {
                callback(property);
              }
            }
          };
        } else {
          // No bugs detected; use the standard `for...in` algorithm.
          forOwn = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, isConstructor;
            for (property in object) {
              if (!(isFunction && property == "prototype") && isProperty.call(object, property) && !(isConstructor = property === "constructor")) {
                callback(property);
              }
            }
            // Manually invoke the callback for the `constructor` property due to
            // cross-environment inconsistencies.
            if (isConstructor || isProperty.call(object, (property = "constructor"))) {
              callback(property);
            }
          };
        }
        return forOwn(object, callback);
      };

      // Public: Serializes a JavaScript `value` as a JSON string. The optional
      // `filter` argument may specify either a function that alters how object and
      // array members are serialized, or an array of strings and numbers that
      // indicates which properties should be serialized. The optional `width`
      // argument may be either a string or number that specifies the indentation
      // level of the output.
      if (!has("json-stringify") && !has("date-serialization")) {
        // Internal: A map of control characters and their escaped equivalents.
        var Escapes = {
          92: "\\\\",
          34: '\\"',
          8: "\\b",
          12: "\\f",
          10: "\\n",
          13: "\\r",
          9: "\\t"
        };

        // Internal: Converts `value` into a zero-padded string such that its
        // length is at least equal to `width`. The `width` must be <= 6.
        var leadingZeroes = "000000";
        var toPaddedString = function (width, value) {
          // The `|| 0` expression is necessary to work around a bug in
          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== "0"`.
          return (leadingZeroes + (value || 0)).slice(-width);
        };

        // Internal: Serializes a date object.
        var serializeDate = function (value) {
          var getData, year, month, date, time, hours, minutes, seconds, milliseconds;
          // Define additional utility methods if the `Date` methods are buggy.
          if (!isExtended) {
            var floor = Math.floor;
            // A mapping between the months of the year and the number of days between
            // January 1st and the first of the respective month.
            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
            // Internal: Calculates the number of days between the Unix epoch and the
            // first day of the given month.
            var getDay = function (year, month) {
              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);
            };
            getData = function (value) {
              // Manually compute the year, month, date, hours, minutes,
              // seconds, and milliseconds if the `getUTC*` methods are
              // buggy. Adapted from @Yaffle's `date-shim` project.
              date = floor(value / 864e5);
              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);
              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);
              date = 1 + date - getDay(year, month);
              // The `time` value specifies the time within the day (see ES
              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used
              // to compute `A modulo B`, as the `%` operator does not
              // correspond to the `modulo` operation for negative numbers.
              time = (value % 864e5 + 864e5) % 864e5;
              // The hours, minutes, seconds, and milliseconds are obtained by
              // decomposing the time within the day. See section 15.9.1.10.
              hours = floor(time / 36e5) % 24;
              minutes = floor(time / 6e4) % 60;
              seconds = floor(time / 1e3) % 60;
              milliseconds = time % 1e3;
            };
          } else {
            getData = function (value) {
              year = value.getUTCFullYear();
              month = value.getUTCMonth();
              date = value.getUTCDate();
              hours = value.getUTCHours();
              minutes = value.getUTCMinutes();
              seconds = value.getUTCSeconds();
              milliseconds = value.getUTCMilliseconds();
            };
          }
          serializeDate = function (value) {
            if (value > -1 / 0 && value < 1 / 0) {
              // Dates are serialized according to the `Date#toJSON` method
              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15
              // for the ISO 8601 date time string format.
              getData(value);
              // Serialize extended years correctly.
              value = (year <= 0 || year >= 1e4 ? (year < 0 ? "-" : "+") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +
              "-" + toPaddedString(2, month + 1) + "-" + toPaddedString(2, date) +
              // Months, dates, hours, minutes, and seconds should have two
              // digits; milliseconds should have three.
              "T" + toPaddedString(2, hours) + ":" + toPaddedString(2, minutes) + ":" + toPaddedString(2, seconds) +
              // Milliseconds are optional in ES 5.0, but required in 5.1.
              "." + toPaddedString(3, milliseconds) + "Z";
              year = month = date = hours = minutes = seconds = milliseconds = null;
            } else {
              value = null;
            }
            return value;
          };
          return serializeDate(value);
        };

        // For environments with `JSON.stringify` but buggy date serialization,
        // we override the native `Date#toJSON` implementation with a
        // spec-compliant one.
        if (has("json-stringify") && !has("date-serialization")) {
          // Internal: the `Date#toJSON` implementation used to override the native one.
          function dateToJSON (key) {
            return serializeDate(this);
          }

          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
          var nativeStringify = exports.stringify;
          exports.stringify = function (source, filter, width) {
            var nativeToJSON = Date.prototype.toJSON;
            Date.prototype.toJSON = dateToJSON;
            var result = nativeStringify(source, filter, width);
            Date.prototype.toJSON = nativeToJSON;
            return result;
          }
        } else {
          // Internal: Double-quotes a string `value`, replacing all ASCII control
          // characters (characters with code unit values between 0 and 31) with
          // their escaped equivalents. This is an implementation of the
          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.
          var unicodePrefix = "\\u00";
          var escapeChar = function (character) {
            var charCode = character.charCodeAt(0), escaped = Escapes[charCode];
            if (escaped) {
              return escaped;
            }
            return unicodePrefix + toPaddedString(2, charCode.toString(16));
          };
          var reEscape = /[\x00-\x1f\x22\x5c]/g;
          var quote = function (value) {
            reEscape.lastIndex = 0;
            return '"' +
              (
                reEscape.test(value)
                  ? value.replace(reEscape, escapeChar)
                  : value
              ) +
              '"';
          };

          // Internal: Recursively serializes an object. Implements the
          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.
          var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {
            var value, type, className, results, element, index, length, prefix, result;
            attempt(function () {
              // Necessary for host object support.
              value = object[property];
            });
            if (typeof value == "object" && value) {
              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {
                value = serializeDate(value);
              } else if (typeof value.toJSON == "function") {
                value = value.toJSON(property);
              }
            }
            if (callback) {
              // If a replacement function was provided, call it to obtain the value
              // for serialization.
              value = callback.call(object, property, value);
            }
            // Exit early if value is `undefined` or `null`.
            if (value == undefined) {
              return value === undefined ? value : "null";
            }
            type = typeof value;
            // Only call `getClass` if the value is an object.
            if (type == "object") {
              className = getClass.call(value);
            }
            switch (className || type) {
              case "boolean":
              case booleanClass:
                // Booleans are represented literally.
                return "" + value;
              case "number":
              case numberClass:
                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as
                // `"null"`.
                return value > -1 / 0 && value < 1 / 0 ? "" + value : "null";
              case "string":
              case stringClass:
                // Strings are double-quoted and escaped.
                return quote("" + value);
            }
            // Recursively serialize objects and arrays.
            if (typeof value == "object") {
              // Check for cyclic structures. This is a linear search; performance
              // is inversely proportional to the number of unique nested objects.
              for (length = stack.length; length--;) {
                if (stack[length] === value) {
                  // Cyclic structures cannot be serialized by `JSON.stringify`.
                  throw TypeError();
                }
              }
              // Add the object to the stack of traversed objects.
              stack.push(value);
              results = [];
              // Save the current indentation level and indent one additional level.
              prefix = indentation;
              indentation += whitespace;
              if (className == arrayClass) {
                // Recursively serialize array elements.
                for (index = 0, length = value.length; index < length; index++) {
                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);
                  results.push(element === undefined ? "null" : element);
                }
                result = results.length ? (whitespace ? "[\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "]" : ("[" + results.join(",") + "]")) : "[]";
              } else {
                // Recursively serialize object members. Members are selected from
                // either a user-specified list of property names, or the object
                // itself.
                forOwn(properties || value, function (property) {
                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);
                  if (element !== undefined) {
                    // According to ES 5.1 section 15.12.3: "If `gap` {whitespace}
                    // is not the empty string, let `member` {quote(property) + ":"}
                    // be the concatenation of `member` and the `space` character."
                    // The "`space` character" refers to the literal space
                    // character, not the `space` {width} argument provided to
                    // `JSON.stringify`.
                    results.push(quote(property) + ":" + (whitespace ? " " : "") + element);
                  }
                });
                result = results.length ? (whitespace ? "{\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "}" : ("{" + results.join(",") + "}")) : "{}";
              }
              // Remove the object from the traversed object stack.
              stack.pop();
              return result;
            }
          };

          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
          exports.stringify = function (source, filter, width) {
            var whitespace, callback, properties, className;
            if (objectTypes[typeof filter] && filter) {
              className = getClass.call(filter);
              if (className == functionClass) {
                callback = filter;
              } else if (className == arrayClass) {
                // Convert the property names array into a makeshift set.
                properties = {};
                for (var index = 0, length = filter.length, value; index < length;) {
                  value = filter[index++];
                  className = getClass.call(value);
                  if (className == "[object String]" || className == "[object Number]") {
                    properties[value] = 1;
                  }
                }
              }
            }
            if (width) {
              className = getClass.call(width);
              if (className == numberClass) {
                // Convert the `width` to an integer and create a string containing
                // `width` number of space characters.
                if ((width -= width % 1) > 0) {
                  if (width > 10) {
                    width = 10;
                  }
                  for (whitespace = ""; whitespace.length < width;) {
                    whitespace += " ";
                  }
                }
              } else if (className == stringClass) {
                whitespace = width.length <= 10 ? width : width.slice(0, 10);
              }
            }
            // Opera <= 7.54u2 discards the values associated with empty string keys
            // (`""`) only if they are used directly within an object member list
            // (e.g., `!("" in { "": 1})`).
            return serialize("", (value = {}, value[""] = source, value), callback, properties, whitespace, "", []);
          };
        }
      }

      // Public: Parses a JSON source string.
      if (!has("json-parse")) {
        var fromCharCode = String.fromCharCode;

        // Internal: A map of escaped control characters and their unescaped
        // equivalents.
        var Unescapes = {
          92: "\\",
          34: '"',
          47: "/",
          98: "\b",
          116: "\t",
          110: "\n",
          102: "\f",
          114: "\r"
        };

        // Internal: Stores the parser state.
        var Index, Source;

        // Internal: Resets the parser state and throws a `SyntaxError`.
        var abort = function () {
          Index = Source = null;
          throw SyntaxError();
        };

        // Internal: Returns the next token, or `"$"` if the parser has reached
        // the end of the source string. A token may be a string, number, `null`
        // literal, or Boolean literal.
        var lex = function () {
          var source = Source, length = source.length, value, begin, position, isSigned, charCode;
          while (Index < length) {
            charCode = source.charCodeAt(Index);
            switch (charCode) {
              case 9: case 10: case 13: case 32:
                // Skip whitespace tokens, including tabs, carriage returns, line
                // feeds, and space characters.
                Index++;
                break;
              case 123: case 125: case 91: case 93: case 58: case 44:
                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at
                // the current position.
                value = charIndexBuggy ? source.charAt(Index) : source[Index];
                Index++;
                return value;
              case 34:
                // `"` delimits a JSON string; advance to the next character and
                // begin parsing the string. String tokens are prefixed with the
                // sentinel `@` character to distinguish them from punctuators and
                // end-of-string tokens.
                for (value = "@", Index++; Index < length;) {
                  charCode = source.charCodeAt(Index);
                  if (charCode < 32) {
                    // Unescaped ASCII control characters (those with a code unit
                    // less than the space character) are not permitted.
                    abort();
                  } else if (charCode == 92) {
                    // A reverse solidus (`\`) marks the beginning of an escaped
                    // control character (including `"`, `\`, and `/`) or Unicode
                    // escape sequence.
                    charCode = source.charCodeAt(++Index);
                    switch (charCode) {
                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:
                        // Revive escaped control characters.
                        value += Unescapes[charCode];
                        Index++;
                        break;
                      case 117:
                        // `\u` marks the beginning of a Unicode escape sequence.
                        // Advance to the first character and validate the
                        // four-digit code point.
                        begin = ++Index;
                        for (position = Index + 4; Index < position; Index++) {
                          charCode = source.charCodeAt(Index);
                          // A valid sequence comprises four hexdigits (case-
                          // insensitive) that form a single hexadecimal value.
                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {
                            // Invalid Unicode escape sequence.
                            abort();
                          }
                        }
                        // Revive the escaped character.
                        value += fromCharCode("0x" + source.slice(begin, Index));
                        break;
                      default:
                        // Invalid escape sequence.
                        abort();
                    }
                  } else {
                    if (charCode == 34) {
                      // An unescaped double-quote character marks the end of the
                      // string.
                      break;
                    }
                    charCode = source.charCodeAt(Index);
                    begin = Index;
                    // Optimize for the common case where a string is valid.
                    while (charCode >= 32 && charCode != 92 && charCode != 34) {
                      charCode = source.charCodeAt(++Index);
                    }
                    // Append the string as-is.
                    value += source.slice(begin, Index);
                  }
                }
                if (source.charCodeAt(Index) == 34) {
                  // Advance to the next character and return the revived string.
                  Index++;
                  return value;
                }
                // Unterminated string.
                abort();
              default:
                // Parse numbers and literals.
                begin = Index;
                // Advance past the negative sign, if one is specified.
                if (charCode == 45) {
                  isSigned = true;
                  charCode = source.charCodeAt(++Index);
                }
                // Parse an integer or floating-point value.
                if (charCode >= 48 && charCode <= 57) {
                  // Leading zeroes are interpreted as octal literals.
                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {
                    // Illegal octal literal.
                    abort();
                  }
                  isSigned = false;
                  // Parse the integer component.
                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);
                  // Floats cannot contain a leading decimal point; however, this
                  // case is already accounted for by the parser.
                  if (source.charCodeAt(Index) == 46) {
                    position = ++Index;
                    // Parse the decimal component.
                    for (; position < length; position++) {
                      charCode = source.charCodeAt(position);
                      if (charCode < 48 || charCode > 57) {
                        break;
                      }
                    }
                    if (position == Index) {
                      // Illegal trailing decimal.
                      abort();
                    }
                    Index = position;
                  }
                  // Parse exponents. The `e` denoting the exponent is
                  // case-insensitive.
                  charCode = source.charCodeAt(Index);
                  if (charCode == 101 || charCode == 69) {
                    charCode = source.charCodeAt(++Index);
                    // Skip past the sign following the exponent, if one is
                    // specified.
                    if (charCode == 43 || charCode == 45) {
                      Index++;
                    }
                    // Parse the exponential component.
                    for (position = Index; position < length; position++) {
                      charCode = source.charCodeAt(position);
                      if (charCode < 48 || charCode > 57) {
                        break;
                      }
                    }
                    if (position == Index) {
                      // Illegal empty exponent.
                      abort();
                    }
                    Index = position;
                  }
                  // Coerce the parsed value to a JavaScript number.
                  return +source.slice(begin, Index);
                }
                // A negative sign may only precede numbers.
                if (isSigned) {
                  abort();
                }
                // `true`, `false`, and `null` literals.
                var temp = source.slice(Index, Index + 4);
                if (temp == "true") {
                  Index += 4;
                  return true;
                } else if (temp == "fals" && source.charCodeAt(Index + 4 ) == 101) {
                  Index += 5;
                  return false;
                } else if (temp == "null") {
                  Index += 4;
                  return null;
                }
                // Unrecognized token.
                abort();
            }
          }
          // Return the sentinel `$` character if the parser has reached the end
          // of the source string.
          return "$";
        };

        // Internal: Parses a JSON `value` token.
        var get = function (value) {
          var results, hasMembers;
          if (value == "$") {
            // Unexpected end of input.
            abort();
          }
          if (typeof value == "string") {
            if ((charIndexBuggy ? value.charAt(0) : value[0]) == "@") {
              // Remove the sentinel `@` character.
              return value.slice(1);
            }
            // Parse object and array literals.
            if (value == "[") {
              // Parses a JSON array, returning a new JavaScript array.
              results = [];
              for (;;) {
                value = lex();
                // A closing square bracket marks the end of the array literal.
                if (value == "]") {
                  break;
                }
                // If the array literal contains elements, the current token
                // should be a comma separating the previous element from the
                // next.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "]") {
                      // Unexpected trailing `,` in array literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each array element.
                    abort();
                  }
                } else {
                  hasMembers = true;
                }
                // Elisions and leading commas are not permitted.
                if (value == ",") {
                  abort();
                }
                results.push(get(value));
              }
              return results;
            } else if (value == "{") {
              // Parses a JSON object, returning a new JavaScript object.
              results = {};
              for (;;) {
                value = lex();
                // A closing curly brace marks the end of the object literal.
                if (value == "}") {
                  break;
                }
                // If the object literal contains members, the current token
                // should be a comma separator.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "}") {
                      // Unexpected trailing `,` in object literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each object member.
                    abort();
                  }
                } else {
                  hasMembers = true;
                }
                // Leading commas are not permitted, object property names must be
                // double-quoted strings, and a `:` must separate each property
                // name and value.
                if (value == "," || typeof value != "string" || (charIndexBuggy ? value.charAt(0) : value[0]) != "@" || lex() != ":") {
                  abort();
                }
                results[value.slice(1)] = get(lex());
              }
              return results;
            }
            // Unexpected token encountered.
            abort();
          }
          return value;
        };

        // Internal: Updates a traversed object member.
        var update = function (source, property, callback) {
          var element = walk(source, property, callback);
          if (element === undefined) {
            delete source[property];
          } else {
            source[property] = element;
          }
        };

        // Internal: Recursively traverses a parsed JSON object, invoking the
        // `callback` function for each value. This is an implementation of the
        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.
        var walk = function (source, property, callback) {
          var value = source[property], length;
          if (typeof value == "object" && value) {
            // `forOwn` can't be used to traverse an array in Opera <= 8.54
            // because its `Object#hasOwnProperty` implementation returns `false`
            // for array indices (e.g., `![1, 2, 3].hasOwnProperty("0")`).
            if (getClass.call(value) == arrayClass) {
              for (length = value.length; length--;) {
                update(getClass, forOwn, value, length, callback);
              }
            } else {
              forOwn(value, function (property) {
                update(value, property, callback);
              });
            }
          }
          return callback.call(source, property, value);
        };

        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.
        exports.parse = function (source, callback) {
          var result, value;
          Index = 0;
          Source = "" + source;
          result = get(lex());
          // If a JSON string contains multiple tokens, it is invalid.
          if (lex() != "$") {
            abort();
          }
          // Reset the parser state.
          Index = Source = null;
          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[""] = result, value), "", callback) : result;
        };
      }
    }

    exports.runInContext = runInContext;
    return exports;
  }

  if (freeExports && !isLoader) {
    // Export for CommonJS environments.
    runInContext(root, freeExports);
  } else {
    // Export for web browsers and JavaScript engines.
    var nativeJSON = root.JSON,
        previousJSON = root.JSON3,
        isRestored = false;

    var JSON3 = runInContext(root, (root.JSON3 = {
      // Public: Restores the original value of the global `JSON` object and
      // returns a reference to the `JSON3` object.
      "noConflict": function () {
        if (!isRestored) {
          isRestored = true;
          root.JSON = nativeJSON;
          root.JSON3 = previousJSON;
          nativeJSON = previousJSON = null;
        }
        return JSON3;
      }
    }));

    root.JSON = {
      "parse": JSON3.parse,
      "stringify": JSON3.stringify
    };
  }

  // Export for asynchronous module loaders.
  if (isLoader) {
    define(function () {
      return JSON3;
    });
  }
}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],59:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty
  , undef;

/**
 * Decode a URI encoded string.
 *
 * @param {String} input The URI encoded string.
 * @returns {String|Null} The decoded string.
 * @api private
 */
function decode(input) {
  try {
    return decodeURIComponent(input.replace(/\+/g, ' '));
  } catch (e) {
    return null;
  }
}

/**
 * Attempts to encode a given input.
 *
 * @param {String} input The string that needs to be encoded.
 * @returns {String|Null} The encoded string.
 * @api private
 */
function encode(input) {
  try {
    return encodeURIComponent(input);
  } catch (e) {
    return null;
  }
}

/**
 * Simple query string parser.
 *
 * @param {String} query The query string that needs to be parsed.
 * @returns {Object}
 * @api public
 */
function querystring(query) {
  var parser = /([^=?&]+)=?([^&]*)/g
    , result = {}
    , part;

  while (part = parser.exec(query)) {
    var key = decode(part[1])
      , value = decode(part[2]);

    //
    // Prevent overriding of existing properties. This ensures that build-in
    // methods like `toString` or __proto__ are not overriden by malicious
    // querystrings.
    //
    // In the case if failed decoding, we want to omit the key/value pairs
    // from the result.
    //
    if (key === null || value === null || key in result) continue;
    result[key] = value;
  }

  return result;
}

/**
 * Transform a query string to an object.
 *
 * @param {Object} obj Object that should be transformed.
 * @param {String} prefix Optional prefix.
 * @returns {String}
 * @api public
 */
function querystringify(obj, prefix) {
  prefix = prefix || '';

  var pairs = []
    , value
    , key;

  //
  // Optionally prefix with a '?' if needed
  //
  if ('string' !== typeof prefix) prefix = '?';

  for (key in obj) {
    if (has.call(obj, key)) {
      value = obj[key];

      //
      // Edge cases where we actually want to encode the value to an empty
      // string instead of the stringified value.
      //
      if (!value && (value === null || value === undef || isNaN(value))) {
        value = '';
      }

      key = encodeURIComponent(key);
      value = encodeURIComponent(value);

      //
      // If we failed to encode the strings, we should bail out as we don't
      // want to add invalid strings to the query.
      //
      if (key === null || value === null) continue;
      pairs.push(key +'='+ value);
    }
  }

  return pairs.length ? prefix + pairs.join('&') : '';
}

//
// Expose the module.
//
exports.stringify = querystringify;
exports.parse = querystring;

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Check if we're required to add a port number.
 *
 * @see https://url.spec.whatwg.org/#default-port
 * @param {Number|String} port Port number we need to check
 * @param {String} protocol Protocol we need to check against.
 * @returns {Boolean} Is it a default port for the given protocol
 * @api private
 */
module.exports = function required(port, protocol) {
  protocol = protocol.split(':')[0];
  port = +port;

  if (!port) return false;

  switch (protocol) {
    case 'http':
    case 'ws':
    return port !== 80;

    case 'https':
    case 'wss':
    return port !== 443;

    case 'ftp':
    return port !== 21;

    case 'gopher':
    return port !== 70;

    case 'file':
    return false;
  }

  return port !== 0;
};

},{}],61:[function(require,module,exports){
(function (global){
'use strict';

var required = require('requires-port')
  , qs = require('querystringify')
  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//
  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i
  , whitespace = '[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]'
  , left = new RegExp('^'+ whitespace +'+');

/**
 * Trim a given string.
 *
 * @param {String} str String to trim.
 * @public
 */
function trimLeft(str) {
  return (str ? str : '').toString().replace(left, '');
}

/**
 * These are the parse rules for the URL parser, it informs the parser
 * about:
 *
 * 0. The char it Needs to parse, if it's a string it should be done using
 *    indexOf, RegExp using exec and NaN means set as current value.
 * 1. The property we should set when parsing this value.
 * 2. Indication if it's backwards or forward parsing, when set as number it's
 *    the value of extra chars that should be split off.
 * 3. Inherit from location if non existing in the parser.
 * 4. `toLowerCase` the resulting value.
 */
var rules = [
  ['#', 'hash'],                        // Extract from the back.
  ['?', 'query'],                       // Extract from the back.
  function sanitize(address) {          // Sanitize what is left of the address
    return address.replace('\\', '/');
  },
  ['/', 'pathname'],                    // Extract from the back.
  ['@', 'auth', 1],                     // Extract from the front.
  [NaN, 'host', undefined, 1, 1],       // Set left over value.
  [/:(\d+)$/, 'port', undefined, 1],    // RegExp the back.
  [NaN, 'hostname', undefined, 1, 1]    // Set left over.
];

/**
 * These properties should not be copied or inherited from. This is only needed
 * for all non blob URL's as a blob URL does not include a hash, only the
 * origin.
 *
 * @type {Object}
 * @private
 */
var ignore = { hash: 1, query: 1 };

/**
 * The location object differs when your code is loaded through a normal page,
 * Worker or through a worker using a blob. And with the blobble begins the
 * trouble as the location object will contain the URL of the blob, not the
 * location of the page where our code is loaded in. The actual origin is
 * encoded in the `pathname` so we can thankfully generate a good "default"
 * location from it so we can generate proper relative URL's again.
 *
 * @param {Object|String} loc Optional default location object.
 * @returns {Object} lolcation object.
 * @public
 */
function lolcation(loc) {
  var globalVar;

  if (typeof window !== 'undefined') globalVar = window;
  else if (typeof global !== 'undefined') globalVar = global;
  else if (typeof self !== 'undefined') globalVar = self;
  else globalVar = {};

  var location = globalVar.location || {};
  loc = loc || location;

  var finaldestination = {}
    , type = typeof loc
    , key;

  if ('blob:' === loc.protocol) {
    finaldestination = new Url(unescape(loc.pathname), {});
  } else if ('string' === type) {
    finaldestination = new Url(loc, {});
    for (key in ignore) delete finaldestination[key];
  } else if ('object' === type) {
    for (key in loc) {
      if (key in ignore) continue;
      finaldestination[key] = loc[key];
    }

    if (finaldestination.slashes === undefined) {
      finaldestination.slashes = slashes.test(loc.href);
    }
  }

  return finaldestination;
}

/**
 * @typedef ProtocolExtract
 * @type Object
 * @property {String} protocol Protocol matched in the URL, in lowercase.
 * @property {Boolean} slashes `true` if protocol is followed by "//", else `false`.
 * @property {String} rest Rest of the URL that is not part of the protocol.
 */

/**
 * Extract protocol information from a URL with/without double slash ("//").
 *
 * @param {String} address URL we want to extract from.
 * @return {ProtocolExtract} Extracted information.
 * @private
 */
function extractProtocol(address) {
  address = trimLeft(address);
  var match = protocolre.exec(address);

  return {
    protocol: match[1] ? match[1].toLowerCase() : '',
    slashes: !!match[2],
    rest: match[3]
  };
}

/**
 * Resolve a relative URL pathname against a base URL pathname.
 *
 * @param {String} relative Pathname of the relative URL.
 * @param {String} base Pathname of the base URL.
 * @return {String} Resolved pathname.
 * @private
 */
function resolve(relative, base) {
  if (relative === '') return base;

  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))
    , i = path.length
    , last = path[i - 1]
    , unshift = false
    , up = 0;

  while (i--) {
    if (path[i] === '.') {
      path.splice(i, 1);
    } else if (path[i] === '..') {
      path.splice(i, 1);
      up++;
    } else if (up) {
      if (i === 0) unshift = true;
      path.splice(i, 1);
      up--;
    }
  }

  if (unshift) path.unshift('');
  if (last === '.' || last === '..') path.push('');

  return path.join('/');
}

/**
 * The actual URL instance. Instead of returning an object we've opted-in to
 * create an actual constructor as it's much more memory efficient and
 * faster and it pleases my OCD.
 *
 * It is worth noting that we should not use `URL` as class name to prevent
 * clashes with the global URL instance that got introduced in browsers.
 *
 * @constructor
 * @param {String} address URL we want to parse.
 * @param {Object|String} [location] Location defaults for relative paths.
 * @param {Boolean|Function} [parser] Parser for the query string.
 * @private
 */
function Url(address, location, parser) {
  address = trimLeft(address);

  if (!(this instanceof Url)) {
    return new Url(address, location, parser);
  }

  var relative, extracted, parse, instruction, index, key
    , instructions = rules.slice()
    , type = typeof location
    , url = this
    , i = 0;

  //
  // The following if statements allows this module two have compatibility with
  // 2 different API:
  //
  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments
  //    where the boolean indicates that the query string should also be parsed.
  //
  // 2. The `URL` interface of the browser which accepts a URL, object as
  //    arguments. The supplied object will be used as default values / fall-back
  //    for relative paths.
  //
  if ('object' !== type && 'string' !== type) {
    parser = location;
    location = null;
  }

  if (parser && 'function' !== typeof parser) parser = qs.parse;

  location = lolcation(location);

  //
  // Extract protocol information before running the instructions.
  //
  extracted = extractProtocol(address || '');
  relative = !extracted.protocol && !extracted.slashes;
  url.slashes = extracted.slashes || relative && location.slashes;
  url.protocol = extracted.protocol || location.protocol || '';
  address = extracted.rest;

  //
  // When the authority component is absent the URL starts with a path
  // component.
  //
  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];

  for (; i < instructions.length; i++) {
    instruction = instructions[i];

    if (typeof instruction === 'function') {
      address = instruction(address);
      continue;
    }

    parse = instruction[0];
    key = instruction[1];

    if (parse !== parse) {
      url[key] = address;
    } else if ('string' === typeof parse) {
      if (~(index = address.indexOf(parse))) {
        if ('number' === typeof instruction[2]) {
          url[key] = address.slice(0, index);
          address = address.slice(index + instruction[2]);
        } else {
          url[key] = address.slice(index);
          address = address.slice(0, index);
        }
      }
    } else if ((index = parse.exec(address))) {
      url[key] = index[1];
      address = address.slice(0, index.index);
    }

    url[key] = url[key] || (
      relative && instruction[3] ? location[key] || '' : ''
    );

    //
    // Hostname, host and protocol should be lowercased so they can be used to
    // create a proper `origin`.
    //
    if (instruction[4]) url[key] = url[key].toLowerCase();
  }

  //
  // Also parse the supplied query string in to an object. If we're supplied
  // with a custom parser as function use that instead of the default build-in
  // parser.
  //
  if (parser) url.query = parser(url.query);

  //
  // If the URL is relative, resolve the pathname against the base URL.
  //
  if (
      relative
    && location.slashes
    && url.pathname.charAt(0) !== '/'
    && (url.pathname !== '' || location.pathname !== '')
  ) {
    url.pathname = resolve(url.pathname, location.pathname);
  }

  //
  // We should not add port numbers if they are already the default port number
  // for a given protocol. As the host also contains the port number we're going
  // override it with the hostname which contains no port number.
  //
  if (!required(url.port, url.protocol)) {
    url.host = url.hostname;
    url.port = '';
  }

  //
  // Parse down the `auth` for the username and password.
  //
  url.username = url.password = '';
  if (url.auth) {
    instruction = url.auth.split(':');
    url.username = instruction[0] || '';
    url.password = instruction[1] || '';
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  //
  // The href is just the compiled result.
  //
  url.href = url.toString();
}

/**
 * This is convenience method for changing properties in the URL instance to
 * insure that they all propagate correctly.
 *
 * @param {String} part          Property we need to adjust.
 * @param {Mixed} value          The newly assigned value.
 * @param {Boolean|Function} fn  When setting the query, it will be the function
 *                               used to parse the query.
 *                               When setting the protocol, double slash will be
 *                               removed from the final url if it is true.
 * @returns {URL} URL instance for chaining.
 * @public
 */
function set(part, value, fn) {
  var url = this;

  switch (part) {
    case 'query':
      if ('string' === typeof value && value.length) {
        value = (fn || qs.parse)(value);
      }

      url[part] = value;
      break;

    case 'port':
      url[part] = value;

      if (!required(value, url.protocol)) {
        url.host = url.hostname;
        url[part] = '';
      } else if (value) {
        url.host = url.hostname +':'+ value;
      }

      break;

    case 'hostname':
      url[part] = value;

      if (url.port) value += ':'+ url.port;
      url.host = value;
      break;

    case 'host':
      url[part] = value;

      if (/:\d+$/.test(value)) {
        value = value.split(':');
        url.port = value.pop();
        url.hostname = value.join(':');
      } else {
        url.hostname = value;
        url.port = '';
      }

      break;

    case 'protocol':
      url.protocol = value.toLowerCase();
      url.slashes = !fn;
      break;

    case 'pathname':
    case 'hash':
      if (value) {
        var char = part === 'pathname' ? '/' : '#';
        url[part] = value.charAt(0) !== char ? char + value : value;
      } else {
        url[part] = value;
      }
      break;

    default:
      url[part] = value;
  }

  for (var i = 0; i < rules.length; i++) {
    var ins = rules[i];

    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  url.href = url.toString();

  return url;
}

/**
 * Transform the properties back in to a valid and full URL string.
 *
 * @param {Function} stringify Optional query stringify function.
 * @returns {String} Compiled version of the URL.
 * @public
 */
function toString(stringify) {
  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;

  var query
    , url = this
    , protocol = url.protocol;

  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';

  var result = protocol + (url.slashes ? '//' : '');

  if (url.username) {
    result += url.username;
    if (url.password) result += ':'+ url.password;
    result += '@';
  }

  result += url.host + url.pathname;

  query = 'object' === typeof url.query ? stringify(url.query) : url.query;
  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;

  if (url.hash) result += url.hash;

  return result;
}

Url.prototype = { set: set, toString: toString };

//
// Expose the URL parser and some additional properties that might be useful for
// others or testing.
//
Url.extractProtocol = extractProtocol;
Url.location = lolcation;
Url.trimLeft = trimLeft;
Url.qs = qs;

module.exports = Url;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"querystringify":59,"requires-port":60}]},{},[1])(1)
});


//# sourceMappingURL=sockjs.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/url/url.js":
/*!*********************************!*\
  !*** ./node_modules/url/url.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var punycode = __webpack_require__(/*! punycode */ "./node_modules/node-libs-browser/node_modules/punycode/punycode.js");
var util = __webpack_require__(/*! ./util */ "./node_modules/url/util.js");

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = __webpack_require__(/*! querystring */ "./node_modules/querystring-es3/index.js");

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};


/***/ }),

/***/ "./node_modules/url/util.js":
/*!**********************************!*\
  !*** ./node_modules/url/util.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};


/***/ }),

/***/ "./node_modules/webpack-dev-server/client/clients/BaseClient.js":
/*!*********************************************************!*\
  !*** (webpack)-dev-server/client/clients/BaseClient.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable
  no-unused-vars
*/

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

module.exports = /*#__PURE__*/function () {
  function BaseClient() {
    _classCallCheck(this, BaseClient);
  }

  _createClass(BaseClient, null, [{
    key: "getClientPath",
    value: function getClientPath(options) {
      throw new Error('Client needs implementation');
    }
  }]);

  return BaseClient;
}();

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js":
/*!***********************************************************!*\
  !*** (webpack)-dev-server/client/clients/SockJSClient.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable
  no-unused-vars
*/

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var SockJS = __webpack_require__(/*! sockjs-client/dist/sockjs */ "./node_modules/sockjs-client/dist/sockjs.js");

var BaseClient = __webpack_require__(/*! ./BaseClient */ "./node_modules/webpack-dev-server/client/clients/BaseClient.js");

module.exports = /*#__PURE__*/function (_BaseClient) {
  _inherits(SockJSClient, _BaseClient);

  var _super = _createSuper(SockJSClient);

  function SockJSClient(url) {
    var _this;

    _classCallCheck(this, SockJSClient);

    _this = _super.call(this);
    _this.sock = new SockJS(url);

    _this.sock.onerror = function (err) {// TODO: use logger to log the error event once client and client-src
      // are reorganized to have the same directory structure
    };

    return _this;
  }

  _createClass(SockJSClient, [{
    key: "onOpen",
    value: function onOpen(f) {
      this.sock.onopen = f;
    }
  }, {
    key: "onClose",
    value: function onClose(f) {
      this.sock.onclose = f;
    } // call f with the message string as the first argument

  }, {
    key: "onMessage",
    value: function onMessage(f) {
      this.sock.onmessage = function (e) {
        f(e.data);
      };
    }
  }], [{
    key: "getClientPath",
    value: function getClientPath(options) {
      return /*require.resolve*/(/*! ./SockJSClient */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js");
    }
  }]);

  return SockJSClient;
}(BaseClient);

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/index.js?http://localhost:9000":
/*!*********************************************************!*\
  !*** (webpack)-dev-server/client?http://localhost:9000 ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__resourceQuery) {
/* global __resourceQuery WorkerGlobalScope self */

/* eslint prefer-destructuring: off */

var stripAnsi = __webpack_require__(/*! strip-ansi */ "./node_modules/webpack-dev-server/node_modules/strip-ansi/index.js");

var socket = __webpack_require__(/*! ./socket */ "./node_modules/webpack-dev-server/client/socket.js");

var overlay = __webpack_require__(/*! ./overlay */ "./node_modules/webpack-dev-server/client/overlay.js");

var _require = __webpack_require__(/*! ./utils/log */ "./node_modules/webpack-dev-server/client/utils/log.js"),
    log = _require.log,
    setLogLevel = _require.setLogLevel;

var sendMessage = __webpack_require__(/*! ./utils/sendMessage */ "./node_modules/webpack-dev-server/client/utils/sendMessage.js");

var reloadApp = __webpack_require__(/*! ./utils/reloadApp */ "./node_modules/webpack-dev-server/client/utils/reloadApp.js");

var createSocketUrl = __webpack_require__(/*! ./utils/createSocketUrl */ "./node_modules/webpack-dev-server/client/utils/createSocketUrl.js");

var status = {
  isUnloading: false,
  currentHash: ''
};
var options = {
  hot: false,
  hotReload: true,
  liveReload: false,
  initial: true,
  useWarningOverlay: false,
  useErrorOverlay: false,
  useProgress: false
};
var socketUrl = createSocketUrl(__resourceQuery);
self.addEventListener('beforeunload', function () {
  status.isUnloading = true;
});

if (typeof window !== 'undefined') {
  var qs = window.location.search.toLowerCase();
  options.hotReload = qs.indexOf('hotreload=false') === -1;
}

var onSocketMessage = {
  hot: function hot() {
    options.hot = true;
    log.info('[WDS] Hot Module Replacement enabled.');
  },
  liveReload: function liveReload() {
    options.liveReload = true;
    log.info('[WDS] Live Reloading enabled.');
  },
  invalid: function invalid() {
    log.info('[WDS] App updated. Recompiling...'); // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    sendMessage('Invalid');
  },
  hash: function hash(_hash) {
    status.currentHash = _hash;
  },
  'still-ok': function stillOk() {
    log.info('[WDS] Nothing changed.');

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    sendMessage('StillOk');
  },
  'log-level': function logLevel(level) {
    var hotCtx = __webpack_require__("./node_modules/webpack/hot sync ^\\.\\/log$");

    if (hotCtx.keys().indexOf('./log') !== -1) {
      hotCtx('./log').setLogLevel(level);
    }

    setLogLevel(level);
  },
  overlay: function overlay(value) {
    if (typeof document !== 'undefined') {
      if (typeof value === 'boolean') {
        options.useWarningOverlay = false;
        options.useErrorOverlay = value;
      } else if (value) {
        options.useWarningOverlay = value.warnings;
        options.useErrorOverlay = value.errors;
      }
    }
  },
  progress: function progress(_progress) {
    if (typeof document !== 'undefined') {
      options.useProgress = _progress;
    }
  },
  'progress-update': function progressUpdate(data) {
    if (options.useProgress) {
      log.info("[WDS] ".concat(data.percent, "% - ").concat(data.msg, "."));
    }

    sendMessage('Progress', data);
  },
  ok: function ok() {
    sendMessage('Ok');

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    if (options.initial) {
      return options.initial = false;
    } // eslint-disable-line no-return-assign


    reloadApp(options, status);
  },
  'content-changed': function contentChanged() {
    log.info('[WDS] Content base changed. Reloading...');
    self.location.reload();
  },
  warnings: function warnings(_warnings) {
    log.warn('[WDS] Warnings while compiling.');

    var strippedWarnings = _warnings.map(function (warning) {
      return stripAnsi(warning);
    });

    sendMessage('Warnings', strippedWarnings);

    for (var i = 0; i < strippedWarnings.length; i++) {
      log.warn(strippedWarnings[i]);
    }

    if (options.useWarningOverlay) {
      overlay.showMessage(_warnings);
    }

    if (options.initial) {
      return options.initial = false;
    } // eslint-disable-line no-return-assign


    reloadApp(options, status);
  },
  errors: function errors(_errors) {
    log.error('[WDS] Errors while compiling. Reload prevented.');

    var strippedErrors = _errors.map(function (error) {
      return stripAnsi(error);
    });

    sendMessage('Errors', strippedErrors);

    for (var i = 0; i < strippedErrors.length; i++) {
      log.error(strippedErrors[i]);
    }

    if (options.useErrorOverlay) {
      overlay.showMessage(_errors);
    }

    options.initial = false;
  },
  error: function error(_error) {
    log.error(_error);
  },
  close: function close() {
    log.error('[WDS] Disconnected!');
    sendMessage('Close');
  }
};
socket(socketUrl, onSocketMessage);
/* WEBPACK VAR INJECTION */}.call(this, "?http://localhost:9000"))

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/overlay.js":
/*!**********************************************!*\
  !*** (webpack)-dev-server/client/overlay.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
 // The error overlay is inspired (and mostly copied) from Create React App (https://github.com/facebookincubator/create-react-app)
// They, in turn, got inspired by webpack-hot-middleware (https://github.com/glenjamin/webpack-hot-middleware).

var ansiHTML = __webpack_require__(/*! ansi-html */ "./node_modules/ansi-html/index.js");

var _require = __webpack_require__(/*! html-entities */ "./node_modules/html-entities/lib/index.js"),
    AllHtmlEntities = _require.AllHtmlEntities;

var entities = new AllHtmlEntities();
var colors = {
  reset: ['transparent', 'transparent'],
  black: '181818',
  red: 'E36049',
  green: 'B3CB74',
  yellow: 'FFD080',
  blue: '7CAFC2',
  magenta: '7FACCA',
  cyan: 'C3C2EF',
  lightgrey: 'EBE7E3',
  darkgrey: '6D7891'
};
var overlayIframe = null;
var overlayDiv = null;
var lastOnOverlayDivReady = null;
ansiHTML.setColors(colors);

function createOverlayIframe(onIframeLoad) {
  var iframe = document.createElement('iframe');
  iframe.id = 'webpack-dev-server-client-overlay';
  iframe.src = 'about:blank';
  iframe.style.position = 'fixed';
  iframe.style.left = 0;
  iframe.style.top = 0;
  iframe.style.right = 0;
  iframe.style.bottom = 0;
  iframe.style.width = '100vw';
  iframe.style.height = '100vh';
  iframe.style.border = 'none';
  iframe.style.zIndex = 9999999999;
  iframe.onload = onIframeLoad;
  return iframe;
}

function addOverlayDivTo(iframe) {
  var div = iframe.contentDocument.createElement('div');
  div.id = 'webpack-dev-server-client-overlay-div';
  div.style.position = 'fixed';
  div.style.boxSizing = 'border-box';
  div.style.left = 0;
  div.style.top = 0;
  div.style.right = 0;
  div.style.bottom = 0;
  div.style.width = '100vw';
  div.style.height = '100vh';
  div.style.backgroundColor = 'rgba(0, 0, 0, 0.85)';
  div.style.color = '#E8E8E8';
  div.style.fontFamily = 'Menlo, Consolas, monospace';
  div.style.fontSize = 'large';
  div.style.padding = '2rem';
  div.style.lineHeight = '1.2';
  div.style.whiteSpace = 'pre-wrap';
  div.style.overflow = 'auto';
  iframe.contentDocument.body.appendChild(div);
  return div;
}

function ensureOverlayDivExists(onOverlayDivReady) {
  if (overlayDiv) {
    // Everything is ready, call the callback right away.
    onOverlayDivReady(overlayDiv);
    return;
  } // Creating an iframe may be asynchronous so we'll schedule the callback.
  // In case of multiple calls, last callback wins.


  lastOnOverlayDivReady = onOverlayDivReady;

  if (overlayIframe) {
    // We've already created it.
    return;
  } // Create iframe and, when it is ready, a div inside it.


  overlayIframe = createOverlayIframe(function () {
    overlayDiv = addOverlayDivTo(overlayIframe); // Now we can talk!

    lastOnOverlayDivReady(overlayDiv);
  }); // Zalgo alert: onIframeLoad() will be called either synchronously
  // or asynchronously depending on the browser.
  // We delay adding it so `overlayIframe` is set when `onIframeLoad` fires.

  document.body.appendChild(overlayIframe);
} // Successful compilation.


function clear() {
  if (!overlayDiv) {
    // It is not there in the first place.
    return;
  } // Clean up and reset internal state.


  document.body.removeChild(overlayIframe);
  overlayDiv = null;
  overlayIframe = null;
  lastOnOverlayDivReady = null;
} // Compilation with errors (e.g. syntax error or missing modules).


function showMessage(messages) {
  ensureOverlayDivExists(function (div) {
    // Make it look similar to our terminal.
    div.innerHTML = "<span style=\"color: #".concat(colors.red, "\">Failed to compile.</span><br><br>").concat(ansiHTML(entities.encode(messages[0])));
  });
}

module.exports = {
  clear: clear,
  showMessage: showMessage
};

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/socket.js":
/*!*********************************************!*\
  !*** (webpack)-dev-server/client/socket.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__webpack_dev_server_client__) {
/* global __webpack_dev_server_client__ */

/* eslint-disable
  camelcase
*/
// this SockJSClient is here as a default fallback, in case inline mode
// is off or the client is not injected. This will be switched to
// WebsocketClient when it becomes the default
// important: the path to SockJSClient here is made to work in the 'client'
// directory, but is updated via the webpack compilation when compiled from
// the 'client-src' directory

var Client = typeof __webpack_dev_server_client__ !== 'undefined' ? __webpack_dev_server_client__ : // eslint-disable-next-line import/no-unresolved
__webpack_require__(/*! ./clients/SockJSClient */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js");
var retries = 0;
var client = null;

var socket = function initSocket(url, handlers) {
  client = new Client(url);
  client.onOpen(function () {
    retries = 0;
  });
  client.onClose(function () {
    if (retries === 0) {
      handlers.close();
    } // Try to reconnect.


    client = null; // After 10 retries stop trying, to prevent logspam.

    if (retries <= 10) {
      // Exponentially increase timeout to reconnect.
      // Respectfully copied from the package `got`.
      // eslint-disable-next-line no-mixed-operators, no-restricted-properties
      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;
      retries += 1;
      setTimeout(function () {
        socket(url, handlers);
      }, retryInMs);
    }
  });
  client.onMessage(function (data) {
    var msg = JSON.parse(data);

    if (handlers[msg.type]) {
      handlers[msg.type](msg.data);
    }
  });
};

module.exports = socket;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! (webpack)-dev-server/client/clients/SockJSClient.js */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js")))

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/createSocketUrl.js":
/*!************************************************************!*\
  !*** (webpack)-dev-server/client/utils/createSocketUrl.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global self */

var url = __webpack_require__(/*! url */ "./node_modules/url/url.js");

var getCurrentScriptSource = __webpack_require__(/*! ./getCurrentScriptSource */ "./node_modules/webpack-dev-server/client/utils/getCurrentScriptSource.js");

function createSocketUrl(resourceQuery, currentLocation) {
  var urlParts;

  if (typeof resourceQuery === 'string' && resourceQuery !== '') {
    // If this bundle is inlined, use the resource query to get the correct url.
    // format is like `?http://0.0.0.0:8096&sockPort=8097&sockHost=localhost`
    urlParts = url.parse(resourceQuery // strip leading `?` from query string to get a valid URL
    .substr(1) // replace first `&` with `?` to have a valid query string
    .replace('&', '?'), true);
  } else {
    // Else, get the url from the <script> this file was called with.
    var scriptHost = getCurrentScriptSource();
    urlParts = url.parse(scriptHost || '/', true, true);
  } // Use parameter to allow passing location in unit tests


  if (typeof currentLocation === 'string' && currentLocation !== '') {
    currentLocation = url.parse(currentLocation);
  } else {
    currentLocation = self.location;
  }

  return getSocketUrl(urlParts, currentLocation);
}
/*
 * Gets socket URL based on Script Source/Location
 * (scriptSrc: URL, location: URL) -> URL
 */


function getSocketUrl(urlParts, loc) {
  var auth = urlParts.auth,
      query = urlParts.query;
  var hostname = urlParts.hostname,
      protocol = urlParts.protocol,
      port = urlParts.port;

  if (!port || port === '0') {
    port = loc.port;
  } // check ipv4 and ipv6 `all hostname`
  // why do we need this check?
  // hostname n/a for file protocol (example, when using electron, ionic)
  // see: https://github.com/webpack/webpack-dev-server/pull/384


  if ((hostname === '0.0.0.0' || hostname === '::') && loc.hostname && loc.protocol.indexOf('http') === 0) {
    hostname = loc.hostname;
  } // `hostname` can be empty when the script path is relative. In that case, specifying
  // a protocol would result in an invalid URL.
  // When https is used in the app, secure websockets are always necessary
  // because the browser doesn't accept non-secure websockets.


  if (hostname && hostname !== '127.0.0.1' && (loc.protocol === 'https:' || urlParts.hostname === '0.0.0.0')) {
    protocol = loc.protocol;
  } // all of these sock url params are optionally passed in through
  // resourceQuery, so we need to fall back to the default if
  // they are not provided


  var sockHost = query.sockHost || hostname;
  var sockPath = query.sockPath || '/sockjs-node';
  var sockPort = query.sockPort || port;

  if (sockPort === 'location') {
    sockPort = loc.port;
  }

  return url.format({
    protocol: protocol,
    auth: auth,
    hostname: sockHost,
    port: sockPort,
    // If sockPath is provided it'll be passed in via the resourceQuery as a
    // query param so it has to be parsed out of the querystring in order for the
    // client to open the socket to the correct location.
    pathname: sockPath
  });
}

module.exports = createSocketUrl;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/getCurrentScriptSource.js":
/*!*******************************************************************!*\
  !*** (webpack)-dev-server/client/utils/getCurrentScriptSource.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function getCurrentScriptSource() {
  // `document.currentScript` is the most accurate way to find the current script,
  // but is not supported in all browsers.
  if (document.currentScript) {
    return document.currentScript.getAttribute('src');
  } // Fall back to getting all scripts in the document.


  var scriptElements = document.scripts || [];
  var currentScript = scriptElements[scriptElements.length - 1];

  if (currentScript) {
    return currentScript.getAttribute('src');
  } // Fail as there was no script to use.


  throw new Error('[WDS] Failed to get current script source.');
}

module.exports = getCurrentScriptSource;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/log.js":
/*!************************************************!*\
  !*** (webpack)-dev-server/client/utils/log.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var log = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js").getLogger('webpack-dev-server');

var INFO = 'info';
var WARN = 'warn';
var ERROR = 'error';
var DEBUG = 'debug';
var TRACE = 'trace';
var SILENT = 'silent'; // deprecated
// TODO: remove these at major released
// https://github.com/webpack/webpack-dev-server/pull/1825

var WARNING = 'warning';
var NONE = 'none'; // Set the default log level

log.setDefaultLevel(INFO);

function setLogLevel(level) {
  switch (level) {
    case INFO:
    case WARN:
    case ERROR:
    case DEBUG:
    case TRACE:
      log.setLevel(level);
      break;
    // deprecated

    case WARNING:
      // loglevel's warning name is different from webpack's
      log.setLevel('warn');
      break;
    // deprecated

    case NONE:
    case SILENT:
      log.disableAll();
      break;

    default:
      log.error("[WDS] Unknown clientLogLevel '".concat(level, "'"));
  }
}

module.exports = {
  log: log,
  setLogLevel: setLogLevel
};

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/reloadApp.js":
/*!******************************************************!*\
  !*** (webpack)-dev-server/client/utils/reloadApp.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global WorkerGlobalScope self */

var _require = __webpack_require__(/*! ./log */ "./node_modules/webpack-dev-server/client/utils/log.js"),
    log = _require.log;

function reloadApp(_ref, _ref2) {
  var hotReload = _ref.hotReload,
      hot = _ref.hot,
      liveReload = _ref.liveReload;
  var isUnloading = _ref2.isUnloading,
      currentHash = _ref2.currentHash;

  if (isUnloading || !hotReload) {
    return;
  }

  if (hot) {
    log.info('[WDS] App hot update...');

    var hotEmitter = __webpack_require__(/*! webpack/hot/emitter */ "./node_modules/webpack/hot/emitter.js");

    hotEmitter.emit('webpackHotUpdate', currentHash);

    if (typeof self !== 'undefined' && self.window) {
      // broadcast update to window
      self.postMessage("webpackHotUpdate".concat(currentHash), '*');
    }
  } // allow refreshing the page only if liveReload isn't disabled
  else if (liveReload) {
      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)

      var intervalId = self.setInterval(function () {
        if (rootWindow.location.protocol !== 'about:') {
          // reload immediately if protocol is valid
          applyReload(rootWindow, intervalId);
        } else {
          rootWindow = rootWindow.parent;

          if (rootWindow.parent === rootWindow) {
            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways
            applyReload(rootWindow, intervalId);
          }
        }
      });
    }

  function applyReload(rootWindow, intervalId) {
    clearInterval(intervalId);
    log.info('[WDS] App updated. Reloading...');
    rootWindow.location.reload();
  }
}

module.exports = reloadApp;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/sendMessage.js":
/*!********************************************************!*\
  !*** (webpack)-dev-server/client/utils/sendMessage.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global __resourceQuery WorkerGlobalScope self */
// Send messages to the outside, so plugins can consume it.

function sendMsg(type, data) {
  if (typeof self !== 'undefined' && (typeof WorkerGlobalScope === 'undefined' || !(self instanceof WorkerGlobalScope))) {
    self.postMessage({
      type: "webpack".concat(type),
      data: data
    }, '*');
  }
}

module.exports = sendMsg;

/***/ }),

/***/ "./node_modules/webpack-dev-server/node_modules/ansi-regex/index.js":
/*!*************************************************************!*\
  !*** (webpack)-dev-server/node_modules/ansi-regex/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function () {
	return /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;
};


/***/ }),

/***/ "./node_modules/webpack-dev-server/node_modules/strip-ansi/index.js":
/*!*************************************************************!*\
  !*** (webpack)-dev-server/node_modules/strip-ansi/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ansiRegex = __webpack_require__(/*! ansi-regex */ "./node_modules/webpack-dev-server/node_modules/ansi-regex/index.js")();

module.exports = function (str) {
	return typeof str === 'string' ? str.replace(ansiRegex, '') : str;
};


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./node_modules/webpack/hot sync ^\\.\\/log$":
/*!*************************************************!*\
  !*** (webpack)/hot sync nonrecursive ^\.\/log$ ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./log": "./node_modules/webpack/hot/log.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/webpack/hot sync ^\\.\\/log$";

/***/ }),

/***/ "./node_modules/webpack/hot/emitter.js":
/*!********************************!*\
  !*** (webpack)/hot/emitter.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var EventEmitter = __webpack_require__(/*! events */ "./node_modules/events/events.js");
module.exports = new EventEmitter();


/***/ }),

/***/ "./node_modules/webpack/hot/log.js":
/*!****************************!*\
  !*** (webpack)/hot/log.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

var logLevel = "info";

function dummy() {}

function shouldLog(level) {
	var shouldLog =
		(logLevel === "info" && level === "info") ||
		(["info", "warning"].indexOf(logLevel) >= 0 && level === "warning") ||
		(["info", "warning", "error"].indexOf(logLevel) >= 0 && level === "error");
	return shouldLog;
}

function logGroup(logFn) {
	return function(level, msg) {
		if (shouldLog(level)) {
			logFn(msg);
		}
	};
}

module.exports = function(level, msg) {
	if (shouldLog(level)) {
		if (level === "info") {
			console.log(msg);
		} else if (level === "warning") {
			console.warn(msg);
		} else if (level === "error") {
			console.error(msg);
		}
	}
};

/* eslint-disable node/no-unsupported-features/node-builtins */
var group = console.group || dummy;
var groupCollapsed = console.groupCollapsed || dummy;
var groupEnd = console.groupEnd || dummy;
/* eslint-enable node/no-unsupported-features/node-builtins */

module.exports.group = logGroup(group);

module.exports.groupCollapsed = logGroup(groupCollapsed);

module.exports.groupEnd = logGroup(groupEnd);

module.exports.setLogLevel = function(level) {
	logLevel = level;
};

module.exports.formatError = function(err) {
	var message = err.message;
	var stack = err.stack;
	if (!stack) {
		return message;
	} else if (stack.indexOf(message) < 0) {
		return message + "\n" + stack;
	} else {
		return stack;
	}
};


/***/ }),

/***/ "./src/core/Game.ts":
/*!**************************!*\
  !*** ./src/core/Game.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Game = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const ecsy_babylon_1 = __webpack_require__(/*! ../ecsy-babylon */ "./src/ecsy-babylon/index.ts");
class Game extends ecsy_1.World {
    constructor() {
        super();
    }
    /** Get all Entity instances. */
    get entities() {
        return this["entityManager"]._entities;
    }
    /** Get all System instances. */
    get systems() {
        return this["systemManager"]._systems;
    }
    /** Get GameSystem instance. */
    get gameSystem() {
        return this.getSystem(ecsy_babylon_1.GameSystem);
    }
    /** Get singleton of Game instance. */
    static instance() {
        this._game || (this._game = new Game());
        return this._game;
    }
    /**
     * Start game with an empty scene.
     * @param canvas Canvas for webgl context
     * @param systems Systems going to used besides GameSystem, TransformSystem and CameraSystem
     */
    start(canvas, systems) {
        this
            .registerSystem(ecsy_babylon_1.GameSystem)
            .registerSystem(ecsy_babylon_1.TransformSystem)
            .registerSystem(ecsy_babylon_1.CameraSystem);
        systems.forEach(system => this.registerSystem(system));
        this.gameSystem.start(canvas);
        return this;
    }
    /** Create an entity with Transform component. */
    createEntity() {
        return super.createEntity().addComponent(ecsy_babylon_1.Transform);
    }
    /** Create a scene entity. */
    createScene(color) {
        return super.createEntity().addComponent(ecsy_babylon_1.Scene, { color: color });
    }
    /** Show Babylon.js insepctor */
    showDebugger() {
        this.gameSystem.activeScene.debugLayer.show();
    }
}
exports.Game = Game;


/***/ }),

/***/ "./src/ecsy-babylon/components/Camera.ts":
/*!***********************************************!*\
  !*** ./src/ecsy-babylon/components/Camera.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Camera = void 0;
/**
 * @example
 * ```
 * entity.addComponent(Camera, { pointerLock: true });
 * ```
 */
class Camera {
    constructor() {
        /**
         * Lock pointer when using the camera.
         * @see https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API
         * @default false
         */
        this.pointerLock = false;
    }
}
exports.Camera = Camera;


/***/ }),

/***/ "./src/ecsy-babylon/components/Input.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Input.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Input = exports.InputTypes = void 0;
var InputTypes;
(function (InputTypes) {
    InputTypes["Keyboard"] = "Keyboard";
})(InputTypes = exports.InputTypes || (exports.InputTypes = {}));
/**
 * @example Keyboard
 * ```
 * entity.addComponent(Input, { onKey: onKey });
 * function onKey(key, down, up) {
 *   if (down) console.log(key + " is pressing.");
 * }
 * ```
 */
class Input {
    constructor() {
        /** @default "Keyboard" */
        this.type = InputTypes.Keyboard;
    }
}
exports.Input = Input;


/***/ }),

/***/ "./src/ecsy-babylon/components/Light.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Light.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Light = exports.LightTypes = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
var LightTypes;
(function (LightTypes) {
    LightTypes["Point"] = "Point";
    LightTypes["Directional"] = "Directional";
    LightTypes["Spot"] = "Spot";
    LightTypes["Hemispheric"] = "Hemispheric";
})(LightTypes = exports.LightTypes || (exports.LightTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Light, { color: { diffuse: "#AAFFAA" } });
 * entity.addComponent(Light, { type: LightTypes.Point, intensity: 2 });
 * entity.addComponent(Light, { type: LightTypes.Directional, direction: { x: 0, y: 0, z: 1 } });
 * entity.addComponent(Light, { type: LightTypes.Spot, direction: { x: 0, y: 0, z: 1 }, angle: 30, exponent: 2 });
 * ```
 */
class Light {
    constructor() {
        /** @default "Hemispheric" */
        this.type = LightTypes.Hemispheric;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.shadowlight#direction
         * @default 0,0,0
         */
        this.direction = mathUtils_1.xyz();
    }
}
exports.Light = Light;


/***/ }),

/***/ "./src/ecsy-babylon/components/Material.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/components/Material.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Material = void 0;
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/**
 * @example
 * ```
 * entity.addComponent(Mesh).addComponent(Material, {
 *    alpha: 0.7,
 *    color: { diffuse: "#E74C3C" }
 * });
 * entity.addComponent(Mesh).addComponent(Material, {
 *    texture: {
 *      diffuse: { url: "PATH_TO_TEXTURE", uScale: 4, vScale: 4 }
 *    }
 * });
 * ```
 */
class Material {
    constructor() {
        /** @default { diffuse: "#ffffff" } */
        this.color = materialUtils_1.materialColorHex();
    }
}
exports.Material = Material;


/***/ }),

/***/ "./src/ecsy-babylon/components/Mesh.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/components/Mesh.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Mesh = exports.MeshTypes = void 0;
var MeshTypes;
(function (MeshTypes) {
    MeshTypes["Box"] = "Box";
    MeshTypes["Plane"] = "Plane";
    MeshTypes["Sphere"] = "Sphere";
    MeshTypes["Ground"] = "Ground";
    MeshTypes["Url"] = "Url";
})(MeshTypes = exports.MeshTypes || (exports.MeshTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Mesh);
 * entity.addComponent(Mesh, { type: MeshTypes.Ground, options: { width: 2, height: 2 } });
 * entity.addComponent(Mesh, { type: MeshTypes.Sphere, options: { diameter: 2 } });
 * entity.addComponent(Mesh, { type: MeshTypes.Url, url: "PATH_TO_MESH" });
 * ```
 */
class Mesh {
    constructor() {
        /** @default "Box" */
        this.type = MeshTypes.Box;
    }
}
exports.Mesh = Mesh;


/***/ }),

/***/ "./src/ecsy-babylon/components/Particle.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/components/Particle.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Particle = exports.ParticleTypes = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
var ParticleTypes;
(function (ParticleTypes) {
    ParticleTypes["Point"] = "Point";
    ParticleTypes["Box"] = "Box";
    ParticleTypes["Sphere"] = "Sphere";
    ParticleTypes["DirectedSphere"] = "DirectedSphere";
    ParticleTypes["Hemisphere"] = "Hemisphere";
    ParticleTypes["Cylinder"] = "Cylinder";
    ParticleTypes["DirectedCylinder"] = "DirectedCylinder";
    ParticleTypes["Cone"] = "Cone";
})(ParticleTypes = exports.ParticleTypes || (exports.ParticleTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Particle, {
 *    emitter: { x: 0, y: 0, z: 1 },
 *    texture: {
 *      diffuse: { url: "PATH_TO_PARTICLE_TEXTURE" }
 *    }
 * });
 * ```
 */
class Particle {
    constructor() {
        /** @default "Point" */
        this.type = ParticleTypes.Point;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.particlesystem#constructor
         * @default 100
         */
        this.capacity = 100;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.particlesystem#emitter
         * @default 0,0,0
         */
        this.emitter = mathUtils_1.xyz();
        /**
         * @memberof Point, Box, DirectedSphere, Cylinder
         * @default 0,0,0
         */
        this.direction1 = mathUtils_1.xyz();
        /**
         * @memberof Point, Box, DirectedSphere, Cylinder
         * @default 10,10,10
         */
        this.direction2 = mathUtils_1.xyz(10, 10, 10);
        /**
         * @memberof Box
         * @default 0,0,0
         */
        this.minEmitBox = mathUtils_1.xyz();
        /**
         * @memberof Box
         * @default 0,0,0
         */
        this.maxEmitBox = mathUtils_1.xyz();
    }
}
exports.Particle = Particle;


/***/ }),

/***/ "./src/ecsy-babylon/components/Scene.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Scene.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Scene = void 0;
/**
 * @example
 * ```
 * entity.addComponent(Scene, { color: { clear: "123ABCFF" } });
 * ```
 */
class Scene {
}
exports.Scene = Scene;


/***/ }),

/***/ "./src/ecsy-babylon/components/Transform.ts":
/*!**************************************************!*\
  !*** ./src/ecsy-babylon/components/Transform.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Transform = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
/**
 * @example
 * ```
 * entity.addComponent(Transform);
 * ```
 */
class Transform {
    constructor() {
        /** @default 0,0,0 */
        this.position = mathUtils_1.xyz();
        /** @default 0,0,0 */
        this.rotation = mathUtils_1.xyz();
        /** @default 1,1,1 */
        this.scale = mathUtils_1.xyz(1, 1, 1);
    }
}
exports.Transform = Transform;


/***/ }),

/***/ "./src/ecsy-babylon/components/index.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/index.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./Scene */ "./src/ecsy-babylon/components/Scene.ts"), exports);
__exportStar(__webpack_require__(/*! ./Transform */ "./src/ecsy-babylon/components/Transform.ts"), exports);
__exportStar(__webpack_require__(/*! ./Camera */ "./src/ecsy-babylon/components/Camera.ts"), exports);
__exportStar(__webpack_require__(/*! ./Mesh */ "./src/ecsy-babylon/components/Mesh.ts"), exports);
__exportStar(__webpack_require__(/*! ./Light */ "./src/ecsy-babylon/components/Light.ts"), exports);
__exportStar(__webpack_require__(/*! ./Material */ "./src/ecsy-babylon/components/Material.ts"), exports);
__exportStar(__webpack_require__(/*! ./Particle */ "./src/ecsy-babylon/components/Particle.ts"), exports);
__exportStar(__webpack_require__(/*! ./Input */ "./src/ecsy-babylon/components/Input.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ColorComponent.ts":
/*!*************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ColorComponent.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/LightColorProperties.ts":
/*!*******************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/LightColorProperties.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MaterialColorProperties.ts":
/*!**********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MaterialColorProperties.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MaterialTextureProperties.ts":
/*!************************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MaterialTextureProperties.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MeshOptions.ts":
/*!**********************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MeshOptions.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ObjectComponent.ts":
/*!**************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ObjectComponent.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ParticleColorProperties.ts":
/*!**********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ParticleColorProperties.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ParticleTextureProperties.ts":
/*!************************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ParticleTextureProperties.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneColorProperties.ts":
/*!*******************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneColorProperties.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneComponent.ts":
/*!*************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneComponent.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneTextureProperties.ts":
/*!*********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneTextureProperties.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/TextureAttributes.ts":
/*!****************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/TextureAttributes.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/TextureComponent.ts":
/*!***************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/TextureComponent.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/XYZProperties.ts":
/*!************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/XYZProperties.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/index.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/components/types/index.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./SceneComponent */ "./src/ecsy-babylon/components/types/SceneComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./SceneColorProperties */ "./src/ecsy-babylon/components/types/SceneColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./SceneTextureProperties */ "./src/ecsy-babylon/components/types/SceneTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ObjectComponent */ "./src/ecsy-babylon/components/types/ObjectComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./XYZProperties */ "./src/ecsy-babylon/components/types/XYZProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./MeshOptions */ "./src/ecsy-babylon/components/types/MeshOptions.ts"), exports);
__exportStar(__webpack_require__(/*! ./ColorComponent */ "./src/ecsy-babylon/components/types/ColorComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./TextureComponent */ "./src/ecsy-babylon/components/types/TextureComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./TextureAttributes */ "./src/ecsy-babylon/components/types/TextureAttributes.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialColorProperties */ "./src/ecsy-babylon/components/types/MaterialColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialTextureProperties */ "./src/ecsy-babylon/components/types/MaterialTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./LightColorProperties */ "./src/ecsy-babylon/components/types/LightColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleTextureProperties */ "./src/ecsy-babylon/components/types/ParticleTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleColorProperties */ "./src/ecsy-babylon/components/types/ParticleColorProperties.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/index.ts":
/*!***********************************!*\
  !*** ./src/ecsy-babylon/index.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./systems/index */ "./src/ecsy-babylon/systems/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./components/index */ "./src/ecsy-babylon/components/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./components/types/index */ "./src/ecsy-babylon/components/types/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./utils/index */ "./src/ecsy-babylon/utils/index.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/systems/CameraSystem.ts":
/*!**************************************************!*\
  !*** ./src/ecsy-babylon/systems/CameraSystem.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CameraSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
/** System for Camera component */
let CameraSystem = /** @class */ (() => {
    class CameraSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            /** <BABYLON.Scene.uid, Camera component> */
            this._cameras = new Map();
        }
        /** @hidden */
        init() {
            gameUtils_1.getSystem(this, GameSystem_1.GameSystem).onSceneSwitched.add(scene => this._updateControl(scene));
            this._pointerLock = this._pointerLock.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.camera.added.forEach((entity) => {
                let camera = entity.getComponent(index_1.Camera);
                let scene = gameUtils_1.getScene(this, camera.scene);
                camera.object = new BABYLON.FreeCamera("", BABYLON.Vector3.Zero(), scene);
                objectUtils_1.updateObjectsTransform(entity);
                this._cameras.set(scene.uid, camera);
                this._updateControl(scene);
            });
            this.queries.camera.removed.forEach((entity) => {
                let camera = entity.getComponent(index_1.Camera);
                let scene = gameUtils_1.getScene(this, camera.scene);
                this._removeControl(scene);
                this._cameras.has(scene.uid) && this._cameras.delete(scene.uid);
                objectUtils_1.disposeObject(camera);
            });
        }
        _updateControl(targetScene) {
            if (targetScene.uid === gameUtils_1.getScene(this).uid) {
                gameUtils_1.getScenes(this).forEach(scene => this._removeControl(scene));
                let camera = this._cameras.get(targetScene.uid);
                camera.object.attachControl(gameUtils_1.getRenderingCanvas(this));
                camera.pointerLock ? targetScene.onPointerObservable.add(this._pointerLock) : document.exitPointerLock();
            }
        }
        _removeControl(scene) {
            this._cameras.forEach((camera, sceneUID) => sceneUID === scene.uid && camera.object.detachControl(gameUtils_1.getRenderingCanvas(this)));
            scene.onPointerObservable.removeCallback(this._pointerLock);
        }
        _pointerLock(pointerInfo) {
            pointerInfo.event.type === "pointerdown" && (document.pointerLockElement || gameUtils_1.getRenderingCanvas(this).requestPointerLock());
        }
    }
    /** @hidden */
    CameraSystem.queries = {
        camera: { components: [index_1.Camera], listen: { added: true, removed: true } },
    };
    return CameraSystem;
})();
exports.CameraSystem = CameraSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/GameSystem.ts":
/*!************************************************!*\
  !*** ./src/ecsy-babylon/systems/GameSystem.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.GameSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const BABYLONGUI = __webpack_require__(/*! babylonjs-gui */ "./node_modules/babylonjs-gui/babylon.gui.min.js");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const worldUtils_1 = __webpack_require__(/*! ../utils/worldUtils */ "./src/ecsy-babylon/utils/worldUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** Core system of ecsy-babylon. */
let GameSystem = /** @class */ (() => {
    class GameSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            /** <Scene UID, BABYLON.AssetsManager> */
            this._assetManagers = new Map();
            /** Observable event when active scene is switched. */
            this.onSceneSwitched = new BABYLON.Observable();
        }
        /** Get canvas used for rendering. */
        get renderingCanvas() { return this._engine.getRenderingCanvas(); }
        /** Get all scenes in engine. */
        get scenes() { return this._engine.scenes; }
        /** Get active scene. */
        get activeScene() { return this._activeScene; }
        /** @hidden */
        init() {
            this._render = this._render.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.scene.added.forEach((entity) => {
                let scene = entity.getComponent(index_1.Scene);
                scene.object = new BABYLON.Scene(this._engine, scene.options);
                this._engine.scenes.length === 1 && (this._activeScene = scene.object);
                this._updateScene(entity);
                // add assetManager for each scenes 
                let assetManager = new BABYLON.AssetsManager(scene.object);
                assetManager.useDefaultLoadingScreen = false;
                this._assetManagers.set(scene.object.uid, assetManager);
                createSkybox(scene.object);
            });
            this.queries.scene.changed.forEach((entity) => {
                this._updateScene(entity);
            });
            this.queries.scene.removed.forEach((entity) => {
                let scene = entity.getComponent(index_1.Scene);
                objectUtils_1.disposeObject(scene);
            });
        }
        _updateScene(entity) {
            let scene = entity.getComponent(index_1.Scene);
            for (let prop in scene) {
                switch (prop) {
                    case "texture":
                        materialUtils_1.updateTexture(scene, scene.texture, this.getAssetManager(entity));
                        break;
                    case "color":
                        this._updateColor(scene, scene.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(scene, prop);
                        break;
                }
            }
        }
        _updateColor(scene, color) {
            for (let prop in color) {
                switch (prop) {
                    case "clear":
                        scene.object[`${prop}Color`] = materialUtils_1.hexToColor4(color[prop]);
                        break;
                    default:
                        scene.object[`${prop}Color`] = materialUtils_1.hexToColor3(color[prop]);
                        break;
                }
            }
        }
        /**
         * Start game system in the world can be used by other systems & components.
         * @see https://doc.babylonjs.com/api/classes/babylon.engine#constructor
         * @param canvas WebGL context to be used for rendering
         * @param antialias defines enable antialiasing (default: false)
         * @param options @see https://doc.babylonjs.com/api/interfaces/babylon.engineoptions
         * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)
         */
        start(canvas, antialias, options, adaptToDeviceRatio) {
            this._engine = new BABYLON.Engine(canvas, antialias, options, adaptToDeviceRatio);
            this._engine.runRenderLoop(this._render);
            return this;
        }
        /**
         * Switch to a scene by given scene entity.
         * @param scene Scene entity
         */
        switchScene(scene) {
            this._activeScene = scene.getComponent(index_1.Scene).object;
            this.onSceneSwitched.notifyObservers(this._activeScene);
            return this;
        }
        /**
         * Get scene AssetManager or return AssetManager in active scene.
         * @param scene Scene entity
         */
        getAssetManager(scene) {
            if (scene) {
                return this._assetManagers.get(scene.getComponent(index_1.Scene).object.uid);
            }
            else {
                return this._assetManagers.get(this._activeScene.uid);
            }
        }
        /**
         * Log a message to the screen
         * @param message text to display in a stack panel
         */
        logMessage(message) {
            console.log('log', message);
            if (!this._messages) {
                this._messages = createTextPanel();
            }
            this._messages.addControl(createTextBlock(message));
        }
        _render() {
            worldUtils_1.getWorld(this).execute(this._engine.getDeltaTime(), performance.now());
            worldUtils_1.getWorld(this).enabled && this._activeScene.render();
        }
    }
    /** @hidden */
    GameSystem.queries = {
        scene: { components: [index_1.Scene], listen: { added: true, removed: true, changed: [index_1.Scene] } },
    };
    return GameSystem;
})();
exports.GameSystem = GameSystem;
function createTextPanel() {
    var advancedTexture = BABYLONGUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
    var grid = new BABYLONGUI.Grid();
    grid.addColumnDefinition(1 / 3);
    grid.addColumnDefinition(1 / 3);
    grid.addColumnDefinition(1 / 3);
    advancedTexture.addControl(grid);
    var stack = new BABYLONGUI.StackPanel();
    stack.verticalAlignment = BABYLONGUI.Control.VERTICAL_ALIGNMENT_BOTTOM;
    grid.addControl(stack, 0, 2);
    return stack;
}
function createTextBlock(text, color = "red") {
    var textBlock = new BABYLONGUI.TextBlock();
    textBlock.text = text;
    textBlock.color = color;
    textBlock.fontSize = 12;
    textBlock.textHorizontalAlignment = BABYLONGUI.Control.HORIZONTAL_ALIGNMENT_LEFT;
    textBlock.height = "15px";
    return textBlock;
}
function createSkybox(scene) {
    var skybox = BABYLON.MeshBuilder.CreateBox("skyBox", { size: 1000.0 }, scene);
    var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
    skyboxMaterial.backFaceCulling = false;
    skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("textures/skybox", scene);
    skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
    skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
    skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
    skybox.material = skyboxMaterial;
}


/***/ }),

/***/ "./src/ecsy-babylon/systems/InputSystem.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/systems/InputSystem.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.InputSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
/** System for Input component */
let InputSystem = /** @class */ (() => {
    class InputSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            this._inputs = new Map();
        }
        init() {
            gameUtils_1.getSystem(this, GameSystem_1.GameSystem).onSceneSwitched.add(scene => this._updateOnKey(scene));
            this._onKey = this._onKey.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.input.added.forEach((entity) => {
                let input = entity.getComponent(index_1.Input);
                let scene = gameUtils_1.getScene(this, input.scene);
                switch (input.type) {
                    default:
                        if (!this._inputs.has(scene.uid)) {
                            this._inputs.set(scene.uid, input);
                            this._updateOnKey(scene);
                        }
                        break;
                }
            });
            this.queries.input.removed.forEach((entity) => {
                let input = entity.getComponent(index_1.Input);
                let scene = gameUtils_1.getScene(this, input.scene);
                switch (input.type) {
                    default:
                        if (this._inputs.has(scene.uid)) {
                            this._inputs.delete(scene.uid);
                            this._removeOnKey(scene);
                        }
                        break;
                }
            });
        }
        _updateOnKey(targetScene) {
            if (targetScene.uid === gameUtils_1.getScene(this).uid) {
                gameUtils_1.getScenes(this).forEach(scene => this._removeOnKey(scene));
                this._input = this._inputs.get(targetScene.uid);
                this._input.onKey && targetScene.onKeyboardObservable.add(this._onKey);
            }
        }
        _removeOnKey(scene) {
            scene.onKeyboardObservable.removeCallback(this._onKey);
        }
        _onKey(keyInfo) {
            // BABYLON.KeyboardEventTypes.KEYDOWN = 1, BABYLON.KeyboardEventTypes.KEYUP = 2
            this._input.onKey.call(this._input, keyInfo.event.key, keyInfo.type === 1, keyInfo.type === 2);
        }
    }
    /** @hidden */
    InputSystem.queries = {
        input: { components: [index_1.Input], listen: { added: true, removed: true } },
    };
    return InputSystem;
})();
exports.InputSystem = InputSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/LightSystem.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/systems/LightSystem.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.LightSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Light component */
let LightSystem = /** @class */ (() => {
    class LightSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.light.added.forEach((entity) => {
                let light = entity.getComponent(index_1.Light);
                let direction = mathUtils_1.xyzToVector3(light.direction);
                let scene = gameUtils_1.getScene(this, light.scene);
                switch (light.type) {
                    case index_1.LightTypes.Point:
                        light.object = new BABYLON.PointLight(light.type, BABYLON.Vector3.Zero(), scene);
                        break;
                    case index_1.LightTypes.Directional:
                        light.object = new BABYLON.DirectionalLight(light.type, direction, scene);
                        break;
                    case index_1.LightTypes.Spot:
                        light.object = new BABYLON.SpotLight(light.type, BABYLON.Vector3.Zero(), direction, mathUtils_1.degreeToRadians(light.angle), light.exponent, scene);
                        break;
                    default:
                        light.object = new BABYLON.HemisphericLight(index_1.LightTypes.Hemispheric, direction, scene);
                        break;
                }
                this._updateLight(light);
                objectUtils_1.updateObjectsTransform(entity);
            });
            this.queries.light.changed.forEach((entity) => {
                this._updateLight(entity.getComponent(index_1.Light));
            });
            this.queries.light.removed.forEach((entity) => {
                objectUtils_1.disposeObject(entity.getComponent(index_1.Light));
            });
        }
        _updateLight(light) {
            for (let prop in light) {
                switch (prop) {
                    case "direction":
                        objectUtils_1.updateObjectVector3(light, prop);
                        break;
                    case "color":
                        this._updateColor(light, light.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(light, prop);
                        break;
                }
            }
        }
        _updateColor(light, color) {
            for (let prop in color) {
                light.object[prop] = materialUtils_1.hexToColor3(color[prop]);
            }
        }
    }
    /** @hidden */
    LightSystem.queries = {
        light: { components: [index_1.Light], listen: { added: true, removed: true, changed: [index_1.Light] } },
    };
    return LightSystem;
})();
exports.LightSystem = LightSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/MaterialSystem.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/systems/MaterialSystem.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.MaterialSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** System for Material component */
let MaterialSystem = /** @class */ (() => {
    class MaterialSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.meshMaterial.added.forEach((entity) => {
                if (!this._isUrlMesh(entity)) {
                    let material = entity.getComponent(index_1.Material);
                    material.object = new BABYLON.StandardMaterial(material.color.diffuse, gameUtils_1.getScene(this, material.scene));
                    this._updateMaterial(material);
                    let mesh = entity.getComponent(index_1.Mesh);
                    mesh.object.material = material.object;
                }
            });
            this.queries.meshMaterial.changed.forEach((entity) => {
                this._isUrlMesh(entity) || this._updateMaterial(entity.getComponent(index_1.Material));
            });
            this.queries.meshMaterial.removed.forEach((entity) => {
                if (!this._isUrlMesh(entity)) {
                    objectUtils_1.disposeObject(entity.getComponent(index_1.Material));
                    entity.getComponent(index_1.Mesh).object.material = null;
                }
            });
        }
        _isUrlMesh(entity) {
            return entity.getComponent(index_1.Mesh).type === index_1.MeshTypes.Url;
        }
        _updateMaterial(material) {
            for (let prop in material) {
                switch (prop) {
                    case "color":
                        this._updateColor(material, material.color);
                        break;
                    case "texture":
                        materialUtils_1.updateTexture(material, material.texture, gameUtils_1.getAssetManager(this, material.scene));
                        break;
                    default:
                        objectUtils_1.updateObjectValue(material, prop);
                        break;
                }
            }
        }
        _updateColor(material, color) {
            for (let prop in color) {
                (material.object[`${prop}Color`] = materialUtils_1.hexToColor3(color[prop]));
            }
        }
    }
    /** @hidden */
    MaterialSystem.queries = {
        meshMaterial: { components: [index_1.Mesh, index_1.Material], listen: { added: true, removed: true, changed: [index_1.Material] } },
    };
    return MaterialSystem;
})();
exports.MaterialSystem = MaterialSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/MeshSystem.ts":
/*!************************************************!*\
  !*** ./src/ecsy-babylon/systems/MeshSystem.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.MeshSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const objectUtils_2 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Mesh component */
let MeshSystem = /** @class */ (() => {
    class MeshSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.mesh.added.forEach((entity) => {
                this._updateMesh(entity, entity.getComponent(index_1.Mesh));
            });
            this.queries.mesh.changed.forEach((entity) => {
                objectUtils_2.disposeObject(entity.getComponent(index_1.Mesh));
                this._updateMesh(entity, entity.getComponent(index_1.Mesh));
            });
            this.queries.mesh.removed.forEach((entity) => {
                objectUtils_2.disposeObject(entity.getComponent(index_1.Mesh));
            });
        }
        _updateMesh(entity, mesh) {
            switch (mesh.type) {
                case index_1.MeshTypes.Url:
                    mesh.url && BABYLON.SceneLoader.IsPluginForExtensionAvailable(this._fileExt(mesh.url)) ?
                        this._loadUrlMesh(entity, mesh, mesh.url) :
                        this._unsupportedMesh(entity, mesh);
                    break;
                default:
                    mesh.object = BABYLON.MeshBuilder[`Create${mesh.type}`].call(this, mesh.type, mesh.options ? mesh.options : {}, gameUtils_1.getScene(this, mesh.scene));
                    this._updateMeshValue(mesh);
                    objectUtils_1.updateObjectsTransform(entity);
                    break;
            }
        }
        _fileExt(url) {
            return url.substring(url.lastIndexOf("."), url.length);
        }
        _loadUrlMesh(entity, mesh, url) {
            let assetManager = gameUtils_1.getAssetManager(this, mesh.scene);
            let filenameIndex = url.lastIndexOf("/") + 1;
            let task = assetManager.addMeshTask(mesh.type, "", url.substring(0, filenameIndex), url.substring(filenameIndex, url.length));
            task.onSuccess = (task) => {
                mesh.object = task.loadedMeshes[0];
                this._updateMeshValue(mesh);
                objectUtils_1.updateObjectsTransform(entity);
            };
            task.onError = () => { this._unsupportedMesh(entity, mesh); };
            assetManager.load();
            assetManager.reset();
        }
        _updateMeshValue(mesh) {
            for (let prop in mesh) {
                objectUtils_1.updateObjectValue(mesh, prop);
            }
        }
        _unsupportedMesh(entity, mesh) {
            let scene = gameUtils_1.getScene(this, mesh.scene);
            mesh.object = BABYLON.MeshBuilder.CreatePlane("", {}, scene);
            let material = new BABYLON.StandardMaterial("", scene);
            const errorData = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURSgoKCgoKCgoKO88OVVpm6AAAAACdFJOU/LlgHlY8AAAAP9JREFUOMvN1MFtwzAMBVB3nU7RcQsSKDcI96EPvrPAZ0nZkRUZKXKMb36xPr+UxMvX8nB9LDRdy+fj/ff7gES4bKYUBPYDdLOQcEgDY1cx6AqIjUADQFYvUNohkAFBEbFP+Y1MRAPboU1JOKdUj8rgp1BLWo+jaQutQUdotDuqMS+eRxblzM8F3kHDkIAD8kNxcBbukCuidmADaILcITOheST/g2wDVIYEX+Gckj2q7NkjmyYMTRlU4K/+HJQNEWttGDtIwZZffgcH8rkJgtFBC2h44oYCHeCWoRztUBugQP0E15pCP32JyzT2AiZT0zyL2gvd4T3+YpeXwfy6+ANZO9QlB5svlAAAAABJRU5ErkJggg==";
            // BABYLON.Texture.BILINEAR_SAMPLINGMODE = 2
            material.diffuseTexture = new BABYLON.Texture("data:errorData", scene, false, false, 2, null, null, errorData, true);
            mesh.object.material = material;
            objectUtils_1.updateObjectsTransform(entity);
        }
    }
    /** @hidden */
    MeshSystem.queries = {
        mesh: { components: [index_1.Mesh], listen: { added: true, removed: true, changed: [index_1.Mesh] } },
    };
    return MeshSystem;
})();
exports.MeshSystem = MeshSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/ParticleSystem.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/systems/ParticleSystem.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.ParticleSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** System for Particle component */
let ParticleSystem = /** @class */ (() => {
    class ParticleSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.particle.added.forEach((entity) => {
                let particle = entity.getComponent(index_1.Particle);
                particle.object = new BABYLON.ParticleSystem(particle.type, particle.capacity, gameUtils_1.getScene(this, particle.scene));
                let particleObject = particle.object;
                switch (particle.type) {
                    case index_1.ParticleTypes.Point:
                        particleObject.createPointEmitter(mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Box:
                        particleObject.createBoxEmitter(mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2), mathUtils_1.xyzToVector3(particle.minEmitBox), mathUtils_1.xyzToVector3(particle.maxEmitBox));
                        break;
                    case index_1.ParticleTypes.Sphere:
                        particleObject.createSphereEmitter(particle.radius, particle.radiusRange);
                        break;
                    case index_1.ParticleTypes.DirectedSphere:
                        particleObject.createDirectedSphereEmitter(particle.radius, mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Hemisphere:
                        particleObject.createHemisphericEmitter(particle.radius, particle.radiusRange);
                        break;
                    case index_1.ParticleTypes.Cylinder:
                        particleObject.createCylinderEmitter(particle.radius, particle.height, particle.radiusRange, Math.random());
                        break;
                    case index_1.ParticleTypes.DirectedCylinder:
                        particleObject.createDirectedCylinderEmitter(particle.radius, particle.height, particle.radiusRange, mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Cone:
                        particleObject.createConeEmitter(particle.radius, particle.angle);
                        break;
                }
                this._updateParticle(particle);
                objectUtils_1.updateObjectsTransform(entity);
                particleObject.start();
            });
            this.queries.particle.changed.forEach((entity) => {
                this._updateParticle(entity.getComponent(index_1.Particle));
            });
            this.queries.particle.removed.forEach((entity) => {
                let particle = entity.getComponent(index_1.Particle);
                particle.object.stop();
                objectUtils_1.disposeObject(particle);
            });
        }
        _updateParticle(particle) {
            for (let prop in particle) {
                switch (prop) {
                    case "emitter":
                    case "direction1":
                    case "direction2":
                    case "minEmitBox":
                    case "maxEmitBox":
                        objectUtils_1.updateObjectVector3(particle, prop);
                        break;
                    case "texture":
                        materialUtils_1.updateTexture(particle, particle.texture, gameUtils_1.getAssetManager(this, particle.scene));
                        break;
                    case "color":
                        this._updateColor(particle, particle.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(particle, prop);
                        break;
                }
            }
        }
        _updateColor(particle, color) {
            for (let prop in color) {
                particle.object[prop] = materialUtils_1.hexToColor4(color[prop]);
            }
        }
    }
    /** @hidden */
    ParticleSystem.queries = {
        particle: { components: [index_1.Particle], listen: { added: true, removed: true, changed: [index_1.Particle] } },
    };
    return ParticleSystem;
})();
exports.ParticleSystem = ParticleSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/TransformSystem.ts":
/*!*****************************************************!*\
  !*** ./src/ecsy-babylon/systems/TransformSystem.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.TransformSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Transform component */
let TransformSystem = /** @class */ (() => {
    class TransformSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.transforms.changed.forEach((entity) => {
                objectUtils_1.updateObjectsTransform(entity);
            });
        }
    }
    /** @hidden */
    TransformSystem.queries = {
        transforms: { components: [index_1.Transform], listen: { changed: [index_1.Transform] } },
    };
    return TransformSystem;
})();
exports.TransformSystem = TransformSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/index.ts":
/*!*******************************************!*\
  !*** ./src/ecsy-babylon/systems/index.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./TransformSystem */ "./src/ecsy-babylon/systems/TransformSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./CameraSystem */ "./src/ecsy-babylon/systems/CameraSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./MeshSystem */ "./src/ecsy-babylon/systems/MeshSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./LightSystem */ "./src/ecsy-babylon/systems/LightSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialSystem */ "./src/ecsy-babylon/systems/MaterialSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleSystem */ "./src/ecsy-babylon/systems/ParticleSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./InputSystem */ "./src/ecsy-babylon/systems/InputSystem.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/utils/gameUtils.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/utils/gameUtils.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.logMessage = exports.getAssetManager = exports.getScene = exports.getScenes = exports.getRenderingCanvas = exports.getSystem = void 0;
const worldUtils_1 = __webpack_require__(/*! ./worldUtils */ "./src/ecsy-babylon/utils/worldUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ../systems/GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
const Scene_1 = __webpack_require__(/*! ../components/Scene */ "./src/ecsy-babylon/components/Scene.ts");
/** @hidden */
function getSystem(self, target) {
    return worldUtils_1.getWorld(self).getSystem(target);
}
exports.getSystem = getSystem;
/**
 * @hidden
 * Get canvas used for rendering.
 * @param system A registered ecsy System class
 */
function getRenderingCanvas(system) {
    return getSystem(system, GameSystem_1.GameSystem).renderingCanvas;
}
exports.getRenderingCanvas = getRenderingCanvas;
/**
 * @hidden
 * Get all scenes in engine.
 * @param system A registered ecsy System class
 */
function getScenes(system) {
    return getSystem(system, GameSystem_1.GameSystem).scenes;
}
exports.getScenes = getScenes;
/**
 * Get a scene or return active scene.
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function getScene(system, scene) {
    if (scene) {
        return scene.getComponent(Scene_1.Scene).object;
    }
    else {
        return getSystem(system, GameSystem_1.GameSystem).activeScene;
    }
}
exports.getScene = getScene;
/**
 * Get scene AssetManager or return AssetManager in active scene.
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function getAssetManager(system, scene) {
    return getSystem(system, GameSystem_1.GameSystem).getAssetManager(scene);
}
exports.getAssetManager = getAssetManager;
/**
 * Log a message to the screen
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function logMessage(system, message) {
    return getSystem(system, GameSystem_1.GameSystem).logMessage(message);
}
exports.logMessage = logMessage;


/***/ }),

/***/ "./src/ecsy-babylon/utils/index.ts":
/*!*****************************************!*\
  !*** ./src/ecsy-babylon/utils/index.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var gameUtils_1 = __webpack_require__(/*! ./gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
Object.defineProperty(exports, "getScene", { enumerable: true, get: function () { return gameUtils_1.getScene; } });
Object.defineProperty(exports, "getAssetManager", { enumerable: true, get: function () { return gameUtils_1.getAssetManager; } });
var mathUtils_1 = __webpack_require__(/*! ./mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
Object.defineProperty(exports, "degreeToRadians", { enumerable: true, get: function () { return mathUtils_1.degreeToRadians; } });
Object.defineProperty(exports, "xyzToVector3", { enumerable: true, get: function () { return mathUtils_1.xyzToVector3; } });
Object.defineProperty(exports, "xyzToVector3Radians", { enumerable: true, get: function () { return mathUtils_1.xyzToVector3Radians; } });
var materialUtils_1 = __webpack_require__(/*! ./materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
Object.defineProperty(exports, "hexToColor3", { enumerable: true, get: function () { return materialUtils_1.hexToColor3; } });
Object.defineProperty(exports, "hexToColor4", { enumerable: true, get: function () { return materialUtils_1.hexToColor4; } });


/***/ }),

/***/ "./src/ecsy-babylon/utils/materialUtils.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/utils/materialUtils.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hexToColor4 = exports.hexToColor3 = exports.materialColorHex = exports.updateTexture = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const objectUtils_1 = __webpack_require__(/*! ./objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/**
 * @hidden
 * Update texture object to a component for its texture properties.
 * @param component TextureComponent in the entity
 * @param textureProperties Texture properties to be update
 * @param assetManager AssetManager to process textures
 */
function updateTexture(component, textureProperties, assetManager) {
    for (let prop in textureProperties) {
        let textureAttributes = textureProperties[prop];
        let task = assetManager.addTextureTask(prop, textureAttributes.url);
        task.onSuccess = (task) => {
            let textureObject = task.texture;
            for (let attr in textureAttributes) {
                attr !== "url" && (textureObject[attr] = textureAttributes[attr]);
            }
            let textureName = `${prop}Texture`;
            let componentObject = component.object;
            componentObject[textureName] && objectUtils_1.disposeObject(componentObject[textureName]);
            componentObject[textureName] = textureObject;
        };
    }
    assetManager.load();
    assetManager.reset();
}
exports.updateTexture = updateTexture;
/**
 * @hidden
 * Create object of material color values or create a material color object with white diffuse.
 * @param diffuse Diffuse color in hex string. e.g., #123ABC
 * @returns Object matches MaterialColorProperties
 */
function materialColorHex(diffuse) {
    if (diffuse) {
        return { diffuse: diffuse };
    }
    else {
        return { diffuse: "#ffffff" };
    }
}
exports.materialColorHex = materialColorHex;
/**
 * Convert hex color value to Color3.
 * @param hexString Text of hex color value(e.g., #123ABC)
 */
function hexToColor3(hexString) {
    return BABYLON.Color3.FromHexString(hexString);
}
exports.hexToColor3 = hexToColor3;
/**
 * Convert hex color value to Color4 (has alpha).
 * @param hexString Text of hex color value(e.g., #123ABCFF)
 */
function hexToColor4(hexString) {
    return BABYLON.Color4.FromHexString(hexString);
}
exports.hexToColor4 = hexToColor4;


/***/ }),

/***/ "./src/ecsy-babylon/utils/mathUtils.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/utils/mathUtils.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.xyz = exports.xyzToVector3Radians = exports.xyzToVector3 = exports.degreeToRadians = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
/**
 * Translate degree to radians.
 * @param degree Degree
 */
function degreeToRadians(degree) {
    return BABYLON.Angle.FromDegrees(degree).radians();
}
exports.degreeToRadians = degreeToRadians;
/**
 * Convert XYZProperties value to Vector3.
 * @param properties XYZProperties value
 */
function xyzToVector3(properties) {
    return new BABYLON.Vector3(properties.x, properties.y, properties.z);
}
exports.xyzToVector3 = xyzToVector3;
/**
 * Convert XYZProperties degree value to Vector3 in radians.
 * @param properties XYZProperties value in degrees
 */
function xyzToVector3Radians(properties) {
    return new BABYLON.Vector3(degreeToRadians(properties.x), degreeToRadians(properties.y), degreeToRadians(properties.z));
}
exports.xyzToVector3Radians = xyzToVector3Radians;
/**
 * @hidden
 * Create object by XYZ values or create all zero object.
 * @param x value
 * @param y value
 * @param z value
 * @returns Object matches XYZProperties
 */
function xyz(x, y, z) {
    if (x && y && z) {
        return { x: x, y: y, z: z };
    }
    else {
        return { x: 0, y: 0, z: 0 };
    }
}
exports.xyz = xyz;


/***/ }),

/***/ "./src/ecsy-babylon/utils/objectUtils.ts":
/*!***********************************************!*\
  !*** ./src/ecsy-babylon/utils/objectUtils.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.disposeObject = exports.updateObjectTransform = exports.updateObjectsTransform = exports.getObjectComponents = exports.updateObjectVector3 = exports.updateObjectValue = void 0;
const Transform_1 = __webpack_require__(/*! ../components/Transform */ "./src/ecsy-babylon/components/Transform.ts");
const mathUtils_1 = __webpack_require__(/*! ./mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
/**
 * @hidden
 * Update value of Babylon.js object's property from a property in component with same name.
 * @param component Component contains Babylon.js object
 * @param name Name of property in the component
 */
function updateObjectValue(component, name) {
    component.object[name] = component[name];
}
exports.updateObjectValue = updateObjectValue;
/**
 * @hidden
 * Update Vector3 of Babylon.js object's property from property in component with same name.
 * @param component Component contains Babylon.js object
 * @param name Name of property in the component, value of property should matches XYZProperties
 */
function updateObjectVector3(component, name) {
    component.object[name] = mathUtils_1.xyzToVector3(component[name]);
}
exports.updateObjectVector3 = updateObjectVector3;
/**
 * @hidden
 * Get ObjectComponents in an Entity.
 * @param entity Entity to filter ObjectComponents
 */
function getObjectComponents(entity) {
    let components = entity.getComponents();
    let objectComponents = [];
    for (let prop in components) {
        let component = components[prop];
        component.object && objectComponents.push(component);
    }
    return objectComponents;
}
exports.getObjectComponents = getObjectComponents;
/**
 * @hidden
 * Update transformation of ObjectComponents in entity.
 * @param entity Entity to be updated
 */
function updateObjectsTransform(entity) {
    let components = entity.getComponents();
    for (let prop in components) {
        let component = components[prop];
        (component.object && entity.hasComponent(Transform_1.Transform)) && updateObjectTransform(entity.getMutableComponent(Transform_1.Transform), component);
    }
}
exports.updateObjectsTransform = updateObjectsTransform;
/**
 * @hidden
 * Update transformation to an ObjectComponent.
 * @param transform Transfrom component in the entity
 * @param component A component has Babylon.js object
 */
function updateObjectTransform(transform, component) {
    let object = component.object;
    object.position && (object.position = mathUtils_1.xyzToVector3(transform.position));
    object.rotation && (object.rotation = mathUtils_1.xyzToVector3Radians(transform.rotation));
    object.scaling && (object.scaling = mathUtils_1.xyzToVector3(transform.scale));
}
exports.updateObjectTransform = updateObjectTransform;
/**
 * @hidden
 * Dispose Babylon.js object in the component.
 * @param object Component contains Babylon.js object
 */
function disposeObject(component) {
    component.object && component.object.dispose();
}
exports.disposeObject = disposeObject;


/***/ }),

/***/ "./src/ecsy-babylon/utils/worldUtils.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/utils/worldUtils.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.getWorld = void 0;
/**
 * @hidden
 * Hack on ecsy to get World instance from system itself.
 * @param system A registered ecsy System class
 * @returns ecsy world
 */
function getWorld(system) {
    return system["world"];
}
exports.getWorld = getWorld;


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const Game_1 = __webpack_require__(/*! ./core/Game */ "./src/core/Game.ts");
const ecsy_babylon_1 = __webpack_require__(/*! ./ecsy-babylon */ "./src/ecsy-babylon/index.ts");
const ControllerInput_1 = __webpack_require__(/*! ./webuild-xr/components/ControllerInput */ "./src/webuild-xr/components/ControllerInput.ts");
const ControllerInputSystem_1 = __webpack_require__(/*! ./webuild-xr/systems/ControllerInputSystem */ "./src/webuild-xr/systems/ControllerInputSystem.ts");
// start app by call game instance
const game = Game_1.Game.instance();
// init game canvas, add systems, add scene T
game.start(document.getElementById("mainCanvas"), [ecsy_babylon_1.MeshSystem, ecsy_babylon_1.LightSystem, ecsy_babylon_1.MaterialSystem, ecsy_babylon_1.InputSystem, ControllerInputSystem_1.ControllerInputSystem]);
// add sceneZ
const sceneZ = game.createScene({
    ambient: "#CCCCCC",
    clear: "#CCCCCCFF"
});
// create camera of scene Z
const cameraZ = game.createEntity().addComponent(ecsy_babylon_1.Camera, { scene: sceneZ, pointerLock: false });
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.y = 3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.z = -3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.x = -3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).rotation.y = 45;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).rotation.x = 15;
// create a box in scene Z can be moved by WASD
const boxZ = game.createEntity()
    .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ })
    .addComponent(ecsy_babylon_1.Material, { scene: sceneZ, color: { diffuse: "#330099" } });
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.y = 1;
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.z = 1;
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.x = 1;
// create light of scene Z
const lightB = game.createEntity().addComponent(ecsy_babylon_1.Light, { scene: sceneZ });
lightB.getMutableComponent(ecsy_babylon_1.Light).direction.y = 1;
// create zebra skin texture ground for scene T
const ground = game.createEntity()
    .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ, type: ecsy_babylon_1.MeshTypes.Ground, options: { width: 10, height: 10 } })
    .addComponent(ecsy_babylon_1.Material, {
    scene: sceneZ,
    texture: {
        diffuse: { url: "https://i0.wp.com/www.sharetextures.com/wp-content/uploads/2018/09/zebra_skin.jpg-diffuse.jpg?ssl=1", uScale: 5, vScale: 5 },
        bump: { url: "https://i2.wp.com/www.sharetextures.com/wp-content/uploads/2018/09/zebra_skin.jpg-normal.jpg?ssl=1", uScale: 5, vScale: 5 },
        specular: { url: "https://i1.wp.com/www.sharetextures.com/wp-content/uploads/2018/09/zebra_skin.jpg-specular.jpg?ssl=1", uScale: 5, vScale: 5 }
    }
});
game.createEntity()
    .addComponent(ecsy_babylon_1.Input, {
    onKey: (key, down, up) => {
        if (key == "d") {
            game.showDebugger();
        }
        else if (key == "b") {
            createRandomBox();
        }
    }
});
game.createEntity()
    .addComponent(ControllerInput_1.ControllerInput, {
    onLeftThumbstickMove: () => {
    },
    onRightThumbstickMove: () => {
    },
    onLeftButtonPress: () => {
        createRandomBox();
    },
    onLeftTriggerPress: (mesh) => {
        mesh.material.alpha = mesh.material.alpha < 1 ? .9 : .3;
        createRandomBox();
    },
    onLeftSqueezePress: (mesh) => {
        mesh.material.alpha = mesh.material.alpha < 1 ? .9 : .3;
        createRandomBox();
    },
    onRightButtonPress: () => {
        createRandomBox();
    },
    onRightTriggerPress: (mesh) => {
        mesh.material.alpha = mesh.material.alpha < 1 ? .9 : .3;
        createRandomBox();
    },
    onRightSqueezePress: (mesh) => {
        mesh.material.alpha = mesh.material.alpha < 1 ? .9 : .3;
        createRandomBox();
    }
});
function createRandomBox() {
    const boxR = game.createEntity()
        .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ })
        .addComponent(ecsy_babylon_1.Material, { scene: sceneZ, color: { diffuse: randomColor() } });
    boxR.getMutableComponent(ecsy_babylon_1.Transform).position.y = Math.round(Math.random() * 10);
    boxR.getMutableComponent(ecsy_babylon_1.Transform).position.z = Math.round(Math.random() * 10);
    boxR.getMutableComponent(ecsy_babylon_1.Transform).position.x = Math.round(Math.random() * 10);
}
const randomColor = () => {
    let color = '#';
    for (let i = 0; i < 6; i++) {
        const random = Math.random();
        const bit = (random * 16) | 0;
        color += (bit).toString(16);
    }
    ;
    return color;
};
const move = function () {
    //const matrix = new BABYLON.Matrix();
    //const deviceRotationQuaternion = xrHelper.input.xrCamera.rotationQuaternion;
    //BABYLON.Matrix.FromQuaternionToRef(deviceRotationQuaternion, matrix);
    //
    //const move = new BABYLON.Vector3(moveX * moveSpeed, 0, -moveY * moveSpeed);
    //const addPos = BABYLON.Vector3.TransformCoordinates(move, matrix);
    //addPos.y = 0;
    //
    //xrHelper.input.xrCamera.position = xrHelper.input.xrCamera.position.add(addPos);
};


/***/ }),

/***/ "./src/webuild-xr/components/ControllerInput.ts":
/*!******************************************************!*\
  !*** ./src/webuild-xr/components/ControllerInput.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.ControllerInput = void 0;
/**
 * @example
 * ```
 * entity.addComponent(ControllerInput, { onLeftTriggerPress: onTriggerPress });
 * function onTriggerPress(amount: number) {
 *   console.log("trigger pressed: " + amount);
 * }
 * ```
 */
class ControllerInput {
}
exports.ControllerInput = ControllerInput;


/***/ }),

/***/ "./src/webuild-xr/systems/ControllerInputSystem.ts":
/*!*********************************************************!*\
  !*** ./src/webuild-xr/systems/ControllerInputSystem.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ControllerInputSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const ControllerInput_1 = __webpack_require__(/*! ../components/ControllerInput */ "./src/webuild-xr/components/ControllerInput.ts");
const gameUtils_1 = __webpack_require__(/*! ../../ecsy-babylon/utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
/** System for ControllerInput component */
let ControllerInputSystem = /** @class */ (() => {
    class ControllerInputSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.input.added.forEach((entity) => {
                let input = entity.getComponent(ControllerInput_1.ControllerInput);
                let scene = gameUtils_1.getScene(this, input.scene);
                this.createXRHelper(input, scene);
            });
            this.queries.input.removed.forEach((entity) => {
                let input = entity.getComponent(ControllerInput_1.ControllerInput);
                let scene = gameUtils_1.getScene(this, input.scene);
                if (this._xrHelper) {
                    this._xrHelper.dispose();
                }
            });
        }
        createXRHelper(input, scene) {
            return __awaiter(this, void 0, void 0, function* () {
                if (!this._xrHelper) {
                    this._xrHelper = yield scene.createDefaultXRExperienceAsync(input.xrOptions || {
                        disableTeleportation: false
                    });
                    gameUtils_1.logMessage(this, 'xrHelper created');
                    this._xrHelper.input.onControllerAddedObservable.add((inputSource) => {
                        inputSource.onMotionControllerInitObservable.add((controller) => {
                            //https://doc.babylonjs.com/divingDeeper/webXR/webXRInputControllerSupport#some-terms-and-classes-to-clear-things-up
                            //MotionControllerComponentType = "trigger" | "squeeze" | "touchpad" | "thumbstick" | "button"
                            if (controller.handness == "left") {
                                gameUtils_1.logMessage(this, 'left controller ' + controller.profileId);
                                const leftThumbstick = input.onLeftThumbstickMove && controller.getComponentOfType("thumbstick");
                                if (leftThumbstick) {
                                    leftThumbstick.onAxisValueChangedObservable.add(({ x, y }) => {
                                        gameUtils_1.logMessage(this, 'onLeftThumbstickMove ' + x + ',' + y);
                                        input.onLeftThumbstickMove(x, y);
                                    });
                                }
                                const leftButtons = input.onLeftButtonPress && controller.getAllComponentsOfType("button");
                                if (leftButtons && leftButtons.length > 0) {
                                    for (const button of leftButtons) {
                                        button.onButtonStateChangedObservable.add((buttonComponent) => {
                                            console.log('onLeftButtonPress', buttonComponent);
                                            if (buttonComponent.pressed) {
                                                gameUtils_1.logMessage(this, 'onLeftButtonPress ' + buttonComponent.value);
                                                input.onLeftButtonPress(buttonComponent.id);
                                            }
                                        });
                                    }
                                }
                                const squeezeButton = input.onLeftSqueezePress && controller.getComponentOfType("squeeze");
                                if (squeezeButton) {
                                    squeezeButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onLeftSqueezePress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onLeftSqueezePress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onLeftSqueezePress(mesh);
                                        }
                                    });
                                }
                                const triggerButton = input.onLeftTriggerPress && controller.getComponentOfType("trigger");
                                if (triggerButton) {
                                    triggerButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onLeftTriggerPress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onLeftTriggerPress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onLeftTriggerPress(mesh);
                                        }
                                    });
                                }
                            }
                            else if (controller.handness == "right") {
                                gameUtils_1.logMessage(this, 'right controller ' + controller.profileId);
                                const rightThumbstick = input.onRightThumbstickMove && controller.getComponentOfType("thumbstick");
                                if (rightThumbstick) {
                                    rightThumbstick.onAxisValueChangedObservable.add(({ x, y }) => {
                                        gameUtils_1.logMessage(this, 'onRightThumbstickMove ' + x + ',' + y);
                                        input.onRightThumbstickMove(x, y);
                                    });
                                }
                                const rightButtons = input.onRightButtonPress && controller.getAllComponentsOfType("button");
                                if (rightButtons && rightButtons.length > 0) {
                                    for (const button of rightButtons) {
                                        button.onButtonStateChangedObservable.add((buttonComponent) => {
                                            console.log('onRightButtonPress', buttonComponent);
                                            if (buttonComponent.pressed) {
                                                gameUtils_1.logMessage(this, 'onRightButtonPress ' + buttonComponent.value);
                                                input.onRightButtonPress(buttonComponent.id);
                                            }
                                        });
                                    }
                                }
                                const squeezeButton = input.onRightSqueezePress && controller.getComponentOfType("squeeze");
                                if (squeezeButton) {
                                    squeezeButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onRightSqueezePress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onRightSqueezePress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onRightSqueezePress(mesh);
                                        }
                                    });
                                }
                                const triggerButton = input.onRightTriggerPress && controller.getComponentOfType("trigger");
                                if (triggerButton) {
                                    triggerButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onRightTriggerPress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onRightTriggerPress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onRightTriggerPress(mesh);
                                        }
                                    });
                                }
                            }
                            else {
                                console.log('onMotionControllerInit', controller);
                                gameUtils_1.logMessage(this, 'onMotionControllerInit ' + controller.profileId);
                            }
                        });
                    });
                }
            });
        }
    }
    /** @hidden */
    ControllerInputSystem.queries = {
        input: { components: [ControllerInput_1.ControllerInput], listen: { added: true, removed: true } },
    };
    return ControllerInputSystem;
})();
exports.ControllerInputSystem = ControllerInputSystem;


/***/ }),

/***/ 0:
/*!******************************************************************************!*\
  !*** multi (webpack)-dev-server/client?http://localhost:9000 ./src/index.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! C:\github\webuildxr\node_modules\webpack-dev-server\client\index.js?http://localhost:9000 */"./node_modules/webpack-dev-server/client/index.js?http://localhost:9000");
module.exports = __webpack_require__(/*! ./src/index.ts */"./src/index.ts");


/***/ }),

/***/ "babylonjs":
/*!**************************!*\
  !*** external "BABYLON" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = BABYLON;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Fuc2ktaHRtbC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYmFieWxvbmpzLWd1aS9iYWJ5bG9uLmd1aS5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Vjc3kvYnVpbGQvZWNzeS5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2h0bWwtZW50aXRpZXMvbGliL2h0bWw0LWVudGl0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9odG1sLWVudGl0aWVzL2xpYi9odG1sNS1lbnRpdGllcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaHRtbC1lbnRpdGllcy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2h0bWwtZW50aXRpZXMvbGliL3N1cnJvZ2F0ZS1wYWlycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaHRtbC1lbnRpdGllcy9saWIveG1sLWVudGl0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL25vZGUtbGlicy1icm93c2VyL25vZGVfbW9kdWxlcy9wdW55Y29kZS9wdW55Y29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2RlY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zb2NranMtY2xpZW50L2Rpc3Qvc29ja2pzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cmwvdXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cmwvdXRpbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L2NsaWVudHMvQmFzZUNsaWVudC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L2NsaWVudHMvU29ja0pTQ2xpZW50LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS1kZXYtc2VydmVyL2NsaWVudC9vdmVybGF5LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvc29ja2V0LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvdXRpbHMvY3JlYXRlU29ja2V0VXJsLmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvdXRpbHMvZ2V0Q3VycmVudFNjcmlwdFNvdXJjZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL2xvZy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL3JlbG9hZEFwcC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL3NlbmRNZXNzYWdlLmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9ub2RlX21vZHVsZXMvYW5zaS1yZWdleC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvbm9kZV9tb2R1bGVzL3N0cmlwLWFuc2kvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8od2VicGFjaykvaG90IHN5bmMgbm9ucmVjdXJzaXZlIF5cXC5cXC9sb2ckIiwid2VicGFjazovLy8od2VicGFjaykvaG90L2VtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9ob3QvbG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL0NhbWVyYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL0xpZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy9NYXRlcmlhbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvTWVzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvUGFydGljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL1NjZW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy9UcmFuc2Zvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9Db2xvckNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvTGlnaHRDb2xvclByb3BlcnRpZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL3R5cGVzL01hdGVyaWFsQ29sb3JQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9NYXRlcmlhbFRleHR1cmVQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9NZXNoT3B0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvT2JqZWN0Q29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9QYXJ0aWNsZUNvbG9yUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvUGFydGljbGVUZXh0dXJlUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvU2NlbmVDb2xvclByb3BlcnRpZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL3R5cGVzL1NjZW5lQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9TY2VuZVRleHR1cmVQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9UZXh0dXJlQXR0cmlidXRlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvVGV4dHVyZUNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvWFlaUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9HYW1lU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9JbnB1dFN5c3RlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvTGlnaHRTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9zeXN0ZW1zL01hdGVyaWFsU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9NZXNoU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9QYXJ0aWNsZVN5c3RlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvVHJhbnNmb3JtU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL2dhbWVVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vdXRpbHMvbWF0ZXJpYWxVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL21hdGhVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL29iamVjdFV0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vdXRpbHMvd29ybGRVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnVpbGQteHIvY29tcG9uZW50cy9Db250cm9sbGVySW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnVpbGQteHIvc3lzdGVtcy9Db250cm9sbGVySW5wdXRTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiQkFCWUxPTlwiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7UUFBQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTs7O1FBR0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDBDQUEwQyxnQ0FBZ0M7UUFDMUU7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSx3REFBd0Qsa0JBQWtCO1FBQzFFO1FBQ0EsaURBQWlELGNBQWM7UUFDL0Q7O1FBRUE7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHlDQUF5QyxpQ0FBaUM7UUFDMUUsZ0hBQWdILG1CQUFtQixFQUFFO1FBQ3JJO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMkJBQTJCLDBCQUEwQixFQUFFO1FBQ3ZELGlDQUFpQyxlQUFlO1FBQ2hEO1FBQ0E7UUFDQTs7UUFFQTtRQUNBLHNEQUFzRCwrREFBK0Q7O1FBRXJIO1FBQ0E7OztRQUdBO1FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNsRlk7O0FBRVo7O0FBRUE7QUFDQSxtREFBbUQsSUFBSSxTQUFTLE1BQU0sSUFBSTs7QUFFMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLEdBQUc7QUFDSDtBQUNBLHNCQUFzQjtBQUN0QixHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDLFVBQVUsK0JBQStCO0FBQ2hGO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FDL0tBLDZEQUFlLEtBQWlELGtCQUFrQixtQkFBTyxDQUFDLDRCQUFXLEdBQUcsU0FBNE0sQ0FBQyxrRkFBa0YsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0JBQW9CLEVBQUUsaUJBQWlCLDRGQUE0RixlQUFlLHdDQUF3QyxTQUFTLEVBQUUsbUJBQW1CLDhCQUE4QixxREFBcUQsMEJBQTBCLDZDQUE2QyxzQkFBc0IsNkRBQTZELFlBQVksZUFBZSxTQUFTLGlCQUFpQixpQ0FBaUMsaUJBQWlCLFlBQVksVUFBVSxzQkFBc0IsbUJBQW1CLGlEQUFpRCxpQkFBaUIsZ0JBQWdCLFlBQVksaUJBQWlCLGFBQWE7QUFDNTFDO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUNBQWlDLGFBQWEsZ0NBQWdDLGNBQWMsZ0JBQWdCLGdEQUFnRCxRQUFRLGdCQUFnQixhQUFhLG1CQUFtQiw2RUFBNkUsb0JBQW9CLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4Qyx3QkFBd0Isa0JBQWtCLDJLQUEySyx5REFBeUQsZUFBZSx5Q0FBeUMsK0JBQStCLCtDQUErQyxlQUFlLG9DQUFvQywrQkFBK0IscURBQXFELGVBQWUsbUJBQW1CLCtCQUErQiw0Q0FBNEMsd0RBQXdELHlDQUF5Qyx1RUFBdUUsa0NBQWtDLHNFQUFzRSxZQUFZLGdPQUFnTyx5QkFBeUIsMEJBQTBCLG1CQUFtQixvQ0FBb0Msa0JBQWtCLHNEQUFzRCw2QkFBNkIsNkNBQTZDLDhCQUE4Qiw0QkFBNEIsb0NBQW9DLGtDQUFrQyw2QkFBNkIsNENBQTRDLG1FQUFtRSw0QkFBNEIsTUFBTSx1Q0FBdUMsdUVBQXVFLGdEQUFnRCxlQUFlLDhCQUE4QiwrQkFBK0IsNENBQTRDLGVBQWUseUJBQXlCLCtCQUErQixvRkFBb0YsME5BQTBOLG9CQUFvQixrREFBa0Qsd0NBQXdDLHdFQUF3RSw4Q0FBOEMsa0RBQWtELGdDQUFnQywwSUFBMEksMENBQTBDLDBDQUEwQyx3UkFBd1IsWUFBWSxJQUFJLGlNQUFpTSxzREFBc0Qsb0NBQW9DLDhGQUE4RixvQkFBb0Isc0JBQXNCLEdBQUcsaUJBQWlCLGdCQUFnQixrQkFBa0IsaUNBQWlDLHlCQUF5QixnQkFBZ0IseUJBQXlCLHdCQUF3Qix3REFBd0Qsb0RBQW9ELG9GQUFvRixvQ0FBb0MsK0NBQStDLHFDQUFxQyxpR0FBaUcsMkZBQTJGLDhCQUE4QixnRkFBZ0YseUNBQXlDLGtJQUFrSSwwR0FBMEcsa0RBQWtELHdGQUF3Rix1QkFBdUIsMEJBQTBCLG9DQUFvQywwQkFBMEIsZ0NBQWdDLDBCQUEwQiwrQkFBK0IsZ0NBQWdDLDJCQUEyQix3Q0FBd0MsbWdCQUFtZ0Isa1BBQWtQLGdCQUFnQixjQUFjLDZvQ0FBNm9DLDhIQUE4SCx5MEJBQXkwQiwwREFBMEQsZUFBZSwyQkFBMkIsaUJBQWlCLHFFQUFxRSwrQkFBK0IscURBQXFELGVBQWUsMkJBQTJCLGlCQUFpQixxRUFBcUUsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQixtREFBbUQsZUFBZSx5QkFBeUIsaUJBQWlCLGlFQUFpRSwrQkFBK0IsZ0RBQWdELGVBQWUsMkJBQTJCLCtCQUErQixzQ0FBc0MsMkJBQTJCLDJDQUEyQyxlQUFlLGtCQUFrQiwrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQixtQkFBbUIsK0JBQStCLDZDQUE2QyxlQUFlLG1CQUFtQixpQkFBaUIsdUVBQXVFLCtCQUErQixxREFBcUQsZUFBZSwyQkFBMkIsaUJBQWlCLHFFQUFxRSwrQkFBK0IsOENBQThDLGVBQWUsb0JBQW9CLGlCQUFpQixpRkFBaUYsK0JBQStCLDhDQUE4QyxlQUFlLG9CQUFvQixpQkFBaUIsaUZBQWlGLCtCQUErQixnREFBZ0QsZUFBZSxzQkFBc0IsaUJBQWlCLHFGQUFxRiwrQkFBK0Isd0RBQXdELGVBQWUsOEJBQThCLGlCQUFpQixxR0FBcUcsK0JBQStCLHdEQUF3RCxlQUFlLDhCQUE4QixpQkFBaUIscUdBQXFHLCtCQUErQiwyREFBMkQsZUFBZSxpQ0FBaUMsaUJBQWlCLGlGQUFpRiwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw2RUFBNkUsK0JBQStCLDZDQUE2QyxlQUFlLHdDQUF3QyxpQkFBaUIscUZBQXFGLCtCQUErQixxREFBcUQsZUFBZSwrRUFBK0UsaUJBQWlCLDhCQUE4QiwrQkFBK0IsOENBQThDLGVBQWUseUNBQXlDLGlCQUFpQix1RkFBdUYsK0JBQStCLHNEQUFzRCxlQUFlLGlGQUFpRixpQkFBaUIsK0JBQStCLCtCQUErQixrREFBa0QsZUFBZSx5Q0FBeUMsaUJBQWlCLGtFQUFrRSwrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLGlCQUFpQixnRUFBZ0UsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsa0VBQWtFLCtCQUErQiw2Q0FBNkMsZUFBZSxtQkFBbUIsaUJBQWlCLFdBQVcsbU1BQW1NLHFDQUFxQyw4Q0FBOEMsK0JBQStCLCtEQUErRCxlQUFlLG1DQUFtQywrQkFBK0Isd0RBQXdELGVBQWUsdURBQXVELHVJQUF1SSxpQkFBaUIsaUNBQWlDLCtCQUErQixnREFBZ0QsZUFBZSwyQ0FBMkMsaUJBQWlCLG9IQUFvSCwrQkFBK0IsNkNBQTZDLGVBQWUsbUJBQW1CLGlCQUFpQixxREFBcUQsK0JBQStCLDhDQUE4QyxlQUFlLG9CQUFvQixpQkFBaUIsaUZBQWlGLCtCQUErQixxREFBcUQsZUFBZSx5QkFBeUIsaUJBQWlCLGlFQUFpRSwrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLGlCQUFpQiwrREFBK0QsK0JBQStCLCtDQUErQyxlQUFlLHFCQUFxQiwrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLCtCQUErQixtREFBbUQsZUFBZSw4Q0FBOEMsaUJBQWlCLHFEQUFxRCwrQkFBK0IsMkRBQTJELGVBQWUscUZBQXFGLGlCQUFpQixvQ0FBb0MsK0JBQStCLG9EQUFvRCxlQUFlLCtDQUErQyxpQkFBaUIsc0RBQXNELCtCQUErQiw0REFBNEQsZUFBZSxzRkFBc0YsaUJBQWlCLHFDQUFxQywrQkFBK0Isa0RBQWtELGVBQWUsNkNBQTZDLGlCQUFpQixvREFBb0QsK0JBQStCLDBEQUEwRCxlQUFlLHFGQUFxRixpQkFBaUIsbUNBQW1DLCtCQUErQixxREFBcUQsZUFBZSxnREFBZ0QsaUJBQWlCLHVEQUF1RCwrQkFBK0IsNkRBQTZELGVBQWUsd0ZBQXdGLGlCQUFpQixzQ0FBc0MsK0JBQStCLDRDQUE0QyxlQUFlLHVDQUF1QyxpQkFBaUIsOENBQThDLCtCQUErQixvREFBb0QsZUFBZSw4RUFBOEUsaUJBQWlCLDZCQUE2QiwrQkFBK0IsMkNBQTJDLGVBQWUsc0NBQXNDLGlCQUFpQiw2Q0FBNkMsK0JBQStCLG1EQUFtRCxlQUFlLDhFQUE4RSxpQkFBaUIsNEJBQTRCLCtCQUErQixtREFBbUQsZUFBZSw4Q0FBOEMsaUJBQWlCLHFEQUFxRCwrQkFBK0IsMkRBQTJELGVBQWUscUZBQXFGLGlCQUFpQixvQ0FBb0MsK0JBQStCLG1EQUFtRCxlQUFlLDhDQUE4QyxpQkFBaUIscURBQXFELCtCQUErQiwyREFBMkQsZUFBZSxzRkFBc0YsaUJBQWlCLG9DQUFvQywrQkFBK0IsK0NBQStDLGVBQWUsOERBQThELCtCQUErQiwrQ0FBK0MsZUFBZSw4REFBOEQsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQixxREFBcUQsZUFBZSwyQkFBMkIsaUJBQWlCLHFFQUFxRSwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw2RUFBNkUsK0JBQStCLHNDQUFzQyxnQkFBZ0IsNkNBQTZDLHNHQUFzRyx3Q0FBd0MscUNBQXFDLHFDQUFxQyxtRUFBbUUsNkNBQTZDLHVCQUF1Qiw0Q0FBNEMsb0RBQW9ELCtFQUErRSxtREFBbUQsdUJBQXVCLHNGQUFzRix5Q0FBeUMsd0RBQXdELHFHQUFxRywyR0FBMkcsMEZBQTBGLDZGQUE2RixpREFBaUQsbUJBQW1CLDBDQUEwQyxnQkFBZ0IseUNBQXlDLHNDQUFzQyw2SkFBNkosS0FBSywrQ0FBK0Msb0ZBQW9GLG9LQUFvSyxrREFBa0QsNE5BQTROLGlQQUFpUCxxQ0FBcUMsOENBQThDLG9DQUFvQyw2Q0FBNkMsMkNBQTJDLDREQUE0RCx1REFBdUQseUNBQXlDLGlTQUFpUyx1Q0FBdUMsd1RBQXdULGdNQUFnTSwyTkFBMk4sd05BQXdOLHNDQUFzQyxpR0FBaUcsd0NBQXdDLG9EQUFvRCwrQkFBK0IsNkVBQTZFLG9DQUFvQyxnRkFBZ0YsZ0tBQWdLLDJkQUEyZCwwQ0FBMEMsa0hBQWtILGtEQUFrRCx3SEFBd0gsc0NBQXNDLHVUQUF1VCxtQ0FBbUMsaUVBQWlFLDREQUE0RCx3S0FBd0ssUUFBUSxHQUFHLHNEQUFzRCxnQ0FBZ0MsK0tBQStLLHdEQUF3RCw0Q0FBNEMseWRBQXlkLGdEQUFnRCwwQ0FBMEMsNEVBQTRFLCtGQUErRiwyRUFBMkUsOEZBQThGLG1CQUFtQixpQ0FBaUMsK1JBQStSLDZDQUE2Qyw0RkFBNEYsaUNBQWlDLHFDQUFxQyxNQUFNLHdDQUF3QyxNQUFNLDZDQUE2QywrQkFBK0Isa0NBQWtDLE1BQU0sdUNBQXVDLE1BQU0sMkNBQTJDLDR1Q0FBNHVDLHdDQUF3QyxrREFBa0QsMkNBQTJDLGlDQUFpQyxrRUFBa0UsZ0VBQWdFLHFCQUFxQixzWkFBc1osNERBQTRELGdNQUFnTSxzR0FBc0csK0ZBQStGLFNBQVMsbUNBQW1DLDh1QkFBOHVCLGtDQUFrQyxvQ0FBb0MsOFlBQThZLHFEQUFxRCwrSkFBK0osNENBQTRDLGdIQUFnSCx5Q0FBeUMsdU9BQXVPLHlDQUF5QyxvREFBb0QsbUJBQW1CLFNBQVMsMklBQTJJLDhDQUE4QyxvT0FBb08sOENBQThDLG9CQUFvQixpREFBaUQsUUFBUSxrUEFBa1AseUNBQXlDLGlGQUFpRix3RkFBd0YsMENBQTBDLGtJQUFrSSx5REFBeUQsNkJBQTZCLCtFQUErRSwrQ0FBK0MscUNBQXFDLHNIQUFzSCwyZUFBMmUscUNBQXFDLDZTQUE2UyxnQ0FBZ0MsZ25CQUFnbkIsc0RBQXNELGVBQWUsb0NBQW9DLCtCQUErQix3REFBd0QsZUFBZSxxQ0FBcUMsK0JBQStCLHlEQUF5RCxlQUFlLHNDQUFzQywrQkFBK0Isb0RBQW9ELGVBQWUsaUNBQWlDLCtCQUErQix1REFBdUQsZUFBZSxvQ0FBb0MsK0JBQStCLHVEQUF1RCxlQUFlLG9DQUFvQywrQkFBK0IsK0JBQStCLHNEQUFzRCxxQ0FBcUMsZ0NBQWdDLG9DQUFvQyx1R0FBdUcsb0NBQW9DLCtEQUErRCxZQUFZLElBQUksNkpBQTZKLFFBQVEsNkJBQTZCLE9BQU8sK0JBQStCLGlDQUFpQyxtQ0FBbUMsdUhBQXVILHlRQUF5USx5QkFBeUIsR0FBRyxHQUFHLHNEQUFzRCxrQkFBa0IsY0FBYywyQkFBMkIsNkxBQTZMLHlFQUF5RSxlQUFlLG1DQUFtQyxpQkFBaUIsNkdBQTZHLCtCQUErQiw0REFBNEQsZUFBZSxrQ0FBa0MsaUJBQWlCLDBHQUEwRywrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQiwrREFBK0QsK0JBQStCLGdEQUFnRCxlQUFlLHNCQUFzQiwrQkFBK0Isc0NBQXNDLGtCQUFrQixzREFBc0QsNEJBQTRCLFdBQVcsS0FBSywyQkFBMkIsd0NBQXdDLDRCQUE0QixXQUFXLEtBQUssV0FBVyx1QkFBdUIsWUFBWSwwQ0FBMEMsNEJBQTRCLFdBQVcsS0FBSyxXQUFXLDJCQUEyQixZQUFZLHlDQUF5QyxvQ0FBb0Msb0NBQW9DLDZJQUE2SSxzQ0FBc0Msb0NBQW9DLFdBQVcsS0FBSyxXQUFXLHNCQUFzQixZQUFZLHVDQUF1QyxnQ0FBZ0MsMkpBQTJKLHlDQUF5QyxzQkFBc0IsaUJBQWlCLHdCQUF3QiwwQ0FBMEMsa0NBQWtDLE1BQU0sNERBQTRELHFDQUFxQyxxQ0FBcUMsNkJBQTZCLFdBQVcsS0FBSyxxQkFBcUIsb0NBQW9DLG9DQUFvQyw2QkFBNkIsV0FBVyxLQUFLLG9CQUFvQix3Q0FBd0MsdUNBQXVDLFlBQVksd0JBQXdCLHdDQUF3QyxvQ0FBb0MsMlhBQTJYLCtCQUErQiwrQkFBK0IsNkJBQTZCLFdBQVcsS0FBSyxlQUFlLHVDQUF1Qyw0Q0FBNEMsc0lBQXNJLG1DQUFtQyxpRUFBaUUseUpBQXlKLFFBQVEsbURBQW1ELEdBQUcsY0FBYyx1RUFBdUUsNkJBQTZCLFdBQVcsS0FBSyxXQUFXLDhRQUE4USx5TkFBeU4sSUFBSSxrREFBa0QseU5BQXlOLHNDQUFzQyxpQ0FBaUMsK0RBQStELDZCQUE2QixXQUFXLEtBQUssV0FBVywwQ0FBMEMsaURBQWlELGdEQUFnRCx1QkFBdUIsS0FBSyx1QkFBdUIsc0RBQXNELHFEQUFxRCxrRUFBa0UsaURBQWlELGtDQUFrQyxLQUFLLEtBQUssd0JBQXdCLHFHQUFxRyx1RUFBdUUsaURBQWlELHlHQUF5RyxnQ0FBZ0MsK0JBQStCLGlDQUFpQyxLQUFLLCtCQUErQixHQUFHLElBQUksd0RBQXdELG9CQUFvQixjQUFjLDJCQUEyQixtREFBbUQsNkRBQTZELGVBQWUsdUJBQXVCLGlCQUFpQiw2REFBNkQsK0JBQStCLG9EQUFvRCxlQUFlLDBCQUEwQixpQkFBaUIsOEVBQThFLCtCQUErQixzQ0FBc0Msa0JBQWtCLG9DQUFvQyxpNUJBQWk1QixpREFBaUQsbVBBQW1QLDRDQUE0QyxrQkFBa0IsdUxBQXVMLDRQQUE0UCwwQ0FBMEMsd0VBQXdFLEdBQUcsSUFBSSxvRUFBb0UseUVBQXlFLFNBQVMsR0FBRyxrQkFBa0IsZ0JBQWdCLG1CQUFtQiwyQkFBMkIsb1ZBQW9WLHlEQUF5RCxlQUFlLG1CQUFtQiwrQkFBK0IsbURBQW1ELGVBQWUseUJBQXlCLGlCQUFpQixpS0FBaUssK0JBQStCLG9EQUFvRCxlQUFlLDBCQUEwQixpQkFBaUIsb0VBQW9FLCtCQUErQiw0Q0FBNEMsZUFBZSxrQkFBa0IsaUJBQWlCLHNHQUFzRywrQkFBK0IsK0RBQStELGVBQWUscUNBQXFDLGlCQUFpQix5RkFBeUYsK0JBQStCLDZEQUE2RCxlQUFlLG1DQUFtQyxpQkFBaUIscUZBQXFGLCtCQUErQixtREFBbUQsZUFBZSw4Q0FBOEMsaUJBQWlCLHFEQUFxRCwrQkFBK0Isb0RBQW9ELGVBQWUsMEJBQTBCLGlCQUFpQixtRUFBbUUsK0JBQStCLG9EQUFvRCxlQUFlLDBCQUEwQixpQkFBaUIsbUVBQW1FLCtCQUErQixzQ0FBc0Msa0JBQWtCLDRDQUE0Qyx1TkFBdU4sZ0JBQWdCLHFCQUFxQixLQUFLLHFCQUFxQix1QkFBdUIsc0JBQXNCLGdDQUFnQywyREFBMkQsc0dBQXNHLG9HQUFvRyw4REFBOEQsUUFBUSxnTkFBZ04seUdBQXlHLHlDQUF5QyxxQ0FBcUMsc0NBQXNDLHFDQUFxQyxNQUFNLHdDQUF3QyxNQUFNLDZDQUE2Qyw0U0FBNFMsaUNBQWlDLCtEQUErRCxzQ0FBc0MseUhBQXlILHVDQUF1QyxpQ0FBaUMsbURBQW1ELFdBQVcsS0FBSyxXQUFXLHVDQUF1Qyx3REFBd0QsV0FBVyxLQUFLLE9BQU8sK0NBQStDLHFCQUFxQixXQUFXLEtBQUssT0FBTyw2QkFBNkIsU0FBUyxzQ0FBc0MsMkJBQTJCLHFDQUFxQyxnREFBZ0QsbUJBQW1CLDZCQUE2QixrQkFBa0IsZ0JBQWdCLDhDQUE4QyxPQUFPLGdCQUFnQixnREFBZ0QsbUJBQW1CLG9DQUFvQyxXQUFXLEtBQUssbURBQW1ELGtCQUFrQixlQUFlLDZDQUE2QyxlQUFlLGVBQWUsSUFBSSxzQ0FBc0Msc0NBQXNDLG9DQUFvQyx3REFBd0QsTUFBTSw2R0FBNkcsTUFBTSw0R0FBNEcsNEJBQTRCLFlBQVkscUJBQXFCLEtBQUsscUJBQXFCLHFTQUFxUyw4Q0FBOEMsa0NBQWtDLHdEQUF3RCxNQUFNLG1GQUFtRiw4TUFBOE0sb0RBQW9ELFFBQVEsc01BQXNNLFVBQVUsU0FBUyxnQ0FBZ0Msb0VBQW9FLEdBQUcsSUFBSSx3REFBd0Qsa0JBQWtCLGdCQUFnQixxQkFBcUIsMkJBQTJCLG1aQUFtWiw0REFBNEQsZUFBZSxvQkFBb0IsK0JBQStCLHdFQUF3RSxlQUFlLDhDQUE4QyxpQkFBaUIsd0xBQXdMLCtCQUErQixpRUFBaUUsZUFBZSx1Q0FBdUMsaUJBQWlCLHlFQUF5RSwrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLGlCQUFpQiw2REFBNkQsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQixnREFBZ0QsZUFBZSxzQkFBc0IsaUJBQWlCLDJEQUEyRCwrQkFBK0IsbURBQW1ELGVBQWUseUJBQXlCLGlCQUFpQixpRUFBaUUsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQixpREFBaUQsZUFBZSx1QkFBdUIsaUJBQWlCLDZEQUE2RCwrQkFBK0IsbURBQW1ELGVBQWUseUJBQXlCLGlCQUFpQixpRUFBaUUsK0JBQStCLG9EQUFvRCxlQUFlLDBCQUEwQixpQkFBaUIsbUVBQW1FLCtCQUErQiw2Q0FBNkMsZUFBZSxtQkFBbUIsK0JBQStCLHlFQUF5RSxlQUFlLCtDQUErQywrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLGlCQUFpQiw0RkFBNEYsK0JBQStCLCtDQUErQyxlQUFlLHFCQUFxQixpQkFBaUIseURBQXlELCtCQUErQixzQ0FBc0MsbUJBQW1CLDJHQUEyRywrSEFBK0gsOERBQThELDBPQUEwTyx3REFBd0QsV0FBVyxtS0FBbUssb0RBQW9ELEdBQUcsdURBQXVELHFIQUFxSCxTQUFTLGVBQWUsS0FBSyxZQUFZLGNBQWMsdUdBQXVHLDhEQUE4RCwrQ0FBK0MsZUFBZSxzQkFBc0IsaUJBQWlCLFdBQVcsNkdBQTZHLG9CQUFvQiwrQkFBK0Isd0NBQXdDLDJTQUEyUyw0REFBNEQsNEVBQTRFLDhGQUE4Rix5REFBeUQsOEJBQThCLHVDQUF1QyxZQUFZLElBQUksS0FBSyxpRUFBaUUsbUNBQW1DLG1CQUFtQixPQUFPLHVDQUF1QyxZQUFZLElBQUksS0FBSyxNQUFNLGlFQUFpRSxrQ0FBa0Msb0JBQW9CLFFBQVEsNkNBQTZDLGdCQUFnQixXQUFXLHlKQUF5SixtQkFBbUIsc0VBQXNFLCtCQUErQixvQ0FBb0MsV0FBVyx3RkFBd0YsZUFBZSw4RkFBOEYsTUFBTSx3QkFBd0IseUJBQXlCLHFKQUFxSixrRUFBa0UscUNBQXFDLHNCQUFzQixFQUFFLEtBQUssdUNBQXVDLDRHQUE0RywwREFBMEQsMEJBQTBCLFNBQVMsU0FBUywwQ0FBMEMsd0JBQXdCLHlCQUF5QiwyS0FBMkssZUFBZSxzRkFBc0YsK2NBQStjLGdEQUFnRCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLCtEQUErRCwrQkFBK0IsOENBQThDLGVBQWUsb0JBQW9CLGlCQUFpQix1REFBdUQsK0JBQStCLHFDQUFxQyxpREFBaUQsbUVBQW1FLDBHQUEwRywySUFBMkkscUNBQXFDLGNBQWMsbURBQW1ELDRGQUE0Riw0Q0FBNEMsc0NBQXNDLCtGQUErRixxTEFBcUwsNENBQTRDLGdFQUFnRSxvQ0FBb0MsNEVBQTRFLDBHQUEwRywyQ0FBMkMsb0RBQW9ELHFOQUFxTiwrQkFBK0IsWUFBWSxpWEFBaVgsS0FBSyxvRkFBb0YsMEVBQTBFLDBHQUEwRyw2S0FBNkssTUFBTSxxTEFBcUwsMEZBQTBGLE1BQU0sMkpBQTJKLE1BQU0sbURBQW1ELFlBQVksd0RBQXdELHNGQUFzRiwwQ0FBMEMsNklBQTZJLDJFQUEyRSx1SUFBdUksNDhCQUE0OEIsZ0NBQWdDLG1IQUFtSCxtR0FBbUcsSUFBSSxvREFBb0Qsa0JBQWtCLGNBQWMsMkJBQTJCLDRFQUE0RSxXQUFXLDBDQUEwQyxzQkFBc0Isa0NBQWtDLHNCQUFzQixtQ0FBbUMsNEJBQTRCLGlDQUFpQyw0QkFBNEIsR0FBRyx5REFBeUQsZUFBZSxtQkFBbUIsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QiwrQkFBK0Isc0NBQXNDLGVBQWUscURBQXFELDBGQUEwRixpREFBaUQsbUNBQW1DLHVDQUF1QyxLQUFLLEtBQUssd0JBQXdCLG9GQUFvRixLQUFLLE9BQU8sZUFBZSxrREFBa0QseUNBQXlDLGdIQUFnSCx5Q0FBeUMsaUhBQWlILDhDQUE4QyxtSEFBbUgsOENBQThDLGlHQUFpRyxxQ0FBcUMsc0NBQXNDLDhHQUE4Ryx5QkFBeUIsK0lBQStJLHVDQUF1QyxvQ0FBb0MsK0dBQStHLG9DQUFvQyxzQ0FBc0Msa0hBQWtILG1EQUFtRCxvQ0FBb0MseUNBQXlDLDJCQUEyQiw2SEFBNkgsR0FBRyxJQUFJLHFEQUFxRCxrQkFBa0IsY0FBYywyQkFBMkIsZ0lBQWdJLDhEQUE4RCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQiw2Q0FBNkMsZUFBZSx3Q0FBd0MsaUJBQWlCLDJJQUEySSwrQkFBK0IsOENBQThDLGVBQWUseUNBQXlDLGlCQUFpQiw4SUFBOEksK0JBQStCLHNDQUFzQyxtQkFBbUIsdUNBQXVDLDZCQUE2QixXQUFXLEtBQUssV0FBVyxnSEFBZ0gsdUNBQXVDLGlEQUFpRCwwWUFBMFkscUNBQXFDLHFDQUFxQyxXQUFXLEtBQUssV0FBVyxzd0JBQXN3QixpQ0FBaUMsY0FBYywwQ0FBMEMsa0JBQWtCLDBFQUEwRSwwQ0FBMEMsaUJBQWlCLHVFQUF1RSwyTEFBMkwsR0FBRyxJQUFJLHlEQUF5RCxrQkFBa0IsY0FBYywyQkFBMkIsa0tBQWtLLDZEQUE2RCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsaUJBQWlCLG1HQUFtRywrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQiwrREFBK0QsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QixpQkFBaUIsa0hBQWtILCtCQUErQixzQ0FBc0MsaUJBQWlCLGlDQUFpQyw4QkFBOEIsK0ZBQStGLDJlQUEyZSwrREFBK0Qsc0RBQXNELHVIQUF1SCwwS0FBMEssOENBQThDLDJGQUEyRix1Q0FBdUMsWUFBWSxnQ0FBZ0MsWUFBWSxvSEFBb0gsWUFBWSw0SUFBNEksR0FBRyxJQUFJLHVEQUF1RCxrQkFBa0IsZ0JBQWdCLG1CQUFtQiwyQkFBMkIsaWlDQUFpaUMsNERBQTRELGVBQWUsMkNBQTJDLGlCQUFpQiwyRkFBMkYsK0JBQStCLHdEQUF3RCxlQUFlLGtGQUFrRiwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw2RUFBNkUsK0JBQStCLHdEQUF3RCxlQUFlLDhCQUE4QixpQkFBaUIsMkVBQTJFLCtCQUErQiwwREFBMEQsZUFBZSxnQ0FBZ0MsaUJBQWlCLCtFQUErRSwrQkFBK0IsOENBQThDLGVBQWUseUNBQXlDLGlCQUFpQix1RkFBdUYsK0JBQStCLHNEQUFzRCxlQUFlLGdGQUFnRiwrQkFBK0Isd0RBQXdELGVBQWUsOEJBQThCLGlCQUFpQiwyRUFBMkUsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQix5REFBeUQsZUFBZSwrQkFBK0IsaUJBQWlCLDZFQUE2RSwrQkFBK0Isb0RBQW9ELGVBQWUsMEJBQTBCLGlCQUFpQixtRUFBbUUsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQix3REFBd0QsZUFBZSw4QkFBOEIsaUJBQWlCLDJFQUEyRSwrQkFBK0IsdURBQXVELGVBQWUsNkJBQTZCLGlCQUFpQix5RUFBeUUsK0JBQStCLCtDQUErQyxlQUFlLHFCQUFxQixpQkFBaUIsZ0JBQWdCLCtCQUErQix1REFBdUQsZUFBZSw2QkFBNkIsaUJBQWlCLHlFQUF5RSwrQkFBK0IsOENBQThDLGVBQWUsb0JBQW9CLGlCQUFpQixlQUFlLCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLG1CQUFtQiwrQkFBK0IsNENBQTRDLGVBQWUsa0JBQWtCLGlCQUFpQixtQkFBbUIsc0dBQXNHLCtCQUErQiw2Q0FBNkMsZUFBZSx3Q0FBd0MsaUJBQWlCLGdIQUFnSCwrQkFBK0IsZ0NBQWdDLG9TQUFvUyw0QkFBNEIsOEZBQThGLGdDQUFnQyxXQUFXLG9CQUFvQiw4TkFBOE4saUNBQWlDLG9FQUFvRSxnSEFBZ0gsZUFBZSxpR0FBaUcsTUFBTSw4RkFBOEYsTUFBTSxvR0FBb0csTUFBTSxnQkFBZ0IsRUFBRSw0QkFBNEIsd0VBQXdFLG1GQUFtRixrREFBa0QscUNBQXFDLGtCQUFrQix1Q0FBdUMsNEVBQTRFLHdDQUF3Qyx1REFBdUQsMEZBQTBGLFVBQVUsY0FBYyxNQUFNLCtCQUErQixNQUFNLDJDQUEyQyw4UUFBOFEsNkVBQTZFLHdHQUF3RyxtQ0FBbUMsb0NBQW9DLGtHQUFrRyw0REFBNEQsMEJBQTBCLHNCQUFzQiw0SEFBNEgsMERBQTBELDJDQUEyQywyRUFBMkUsbUNBQW1DLCtFQUErRSw2R0FBNkcsNkhBQTZILDRIQUE0SCw4Q0FBOEMsNkJBQTZCLGlEQUFpRCwrREFBK0Qsd0xBQXdMLDB0QkFBMHRCLDhTQUE4Uyw0RkFBNEYsOENBQThDLDZCQUE2QixpQ0FBaUMsaUVBQWlFLHdMQUF3TCx3ckJBQXdyQiw2UkFBNlIsb0VBQW9FLHVjQUF1Yyw0Q0FBNEMsS0FBSywyQ0FBMkMsd0RBQXdELHFEQUFxRCxtRUFBbUUsd0tBQXdLLEtBQUssc0dBQXNHLDJIQUEySCwrQ0FBK0MsMENBQTBDLGlIQUFpSCxpQkFBaUIsR0FBRyxnUEFBZ1AsWUFBWSx5T0FBeU8sdUNBQXVDLG9NQUFvTSx5Q0FBeUMsOEZBQThGLHFDQUFxQywyQkFBMkIsSUFBSSw2RUFBNkUsVUFBVSwrQ0FBK0Msb0NBQW9DLDBCQUEwQiwyTEFBMkwsSUFBSSw2RUFBNkUsVUFBVSx5RUFBeUUsc0NBQXNDLFNBQVMsbUlBQW1JLDJDQUEyQyxzREFBc0QsaUNBQWlDLFdBQVcsK3pCQUErekIsdUdBQXVHLHFDQUFxQyx5Q0FBeUMsbUxBQW1MLCtFQUErRSwrSUFBK0ksZ0tBQWdLLGtNQUFrTSwwQkFBMEIsdUNBQXVDLHdCQUF3Qiw4RUFBOEUsNEJBQTRCLG1FQUFtRSxxQkFBcUIsUUFBUSxHQUFHLDJJQUEySSx5Q0FBeUMsd0ZBQXdGLHVCQUF1QiwySEFBMkgsaVFBQWlRLDZFQUE2RSxnREFBZ0QsK0JBQStCLGlDQUFpQywrR0FBK0csNkZBQTZGLGtHQUFrRyx5VEFBeVQsK1dBQStXLDhDQUE4Qyw0V0FBNFcsNENBQTRDLDBNQUEwTSw4Q0FBOEMsNEdBQTRHLDJDQUEyQyxTQUFTLGdDQUFnQyw4VEFBOFQsR0FBRyxJQUFJLHdEQUF3RCxrQkFBa0IsY0FBYywyQkFBMkIsc0ZBQXNGLDhCQUE4QiwrREFBK0QsZUFBZSxzQ0FBc0MsK0JBQStCLGdEQUFnRCxlQUFlLG1DQUFtQywrQkFBK0IsZ0RBQWdELGVBQWUsMkJBQTJCLCtCQUErQiw2Q0FBNkMsZUFBZSxtQkFBbUIsK0JBQStCLDJDQUEyQyx3RUFBd0UsNkNBQTZDLDhFQUE4RSw0Q0FBNEMsZ0lBQWdJLCtDQUErQyxtSUFBbUksOENBQThDLHNFQUFzRSw4QkFBOEIsdUpBQXVKLGlEQUFpRCx5RUFBeUUsaUNBQWlDLDBKQUEwSix5Q0FBeUMsMkJBQTJCLHlCQUF5QiwwQ0FBMEMsY0FBYyx1Q0FBdUMsTUFBTSx1Q0FBdUMseUJBQXlCLFdBQVcsS0FBSyw0Q0FBNEMsd0NBQXdDLHVCQUF1Qix1Q0FBdUMsbUJBQW1CLDhCQUE4QixzQ0FBc0MsV0FBVyxLQUFLLFlBQVksdUJBQXVCLGdEQUFnRCxzREFBc0QsWUFBWSw4QkFBOEIsS0FBSywrQkFBK0Isc0JBQXNCLFFBQVEsOEJBQThCLGtCQUFrQixpQ0FBaUMsS0FBSyxrQkFBa0IsVUFBVSxzQkFBc0Isb0VBQW9FLDZDQUE2QyxtREFBbUQsWUFBWSxpQ0FBaUMsS0FBSywrQkFBK0Isc0JBQXNCLFFBQVEsaUNBQWlDLGtCQUFrQiw4QkFBOEIsS0FBSyxnQkFBZ0IsVUFBVSxzQkFBc0IsaUVBQWlFLHdDQUF3Qyx5V0FBeVcsa0hBQWtILHVRQUF1USx1Q0FBdUMscUNBQXFDLHdDQUF3QywwQkFBMEIsb0VBQW9FLHFDQUFxQyxhQUFhLDZDQUE2Qyw4SEFBOEgsV0FBVyxLQUFLLHVEQUF1RCx3QkFBd0IsSUFBSSxRQUFRLElBQUksbUNBQW1DLFdBQVcsS0FBSyxhQUFhLGlEQUFpRCxxQ0FBcUMsSUFBSSxJQUFJLHNDQUFzQyxXQUFXLEtBQUssdURBQXVELHdCQUF3QixJQUFJLFFBQVEsSUFBSSxzQ0FBc0MsV0FBVyxLQUFLLE1BQU0sT0FBTyxpREFBaUQscUNBQXFDLElBQUksV0FBVyxpREFBaUQsV0FBVywyQ0FBMkMscURBQXFELG1FQUFtRSw2TUFBNk0sbURBQW1ELHNEQUFzRCwwQkFBMEIsc0VBQXNFLGtEQUFrRCxXQUFXLDZGQUE2RixZQUFZLFdBQVcsS0FBSyx1Q0FBdUMsc0hBQXNILFFBQVEsV0FBVyxLQUFLLHNDQUFzQyx3SEFBd0gsY0FBYyxnQ0FBZ0MsK0JBQStCLGtDQUFrQyxXQUFXLEtBQUssZUFBZSx1QkFBdUIsR0FBRyxJQUFJLG1EQUFtRCxrQkFBa0IsY0FBYywyQkFBMkIsK1ZBQStWLHlEQUF5RCxlQUFlLG1CQUFtQixpQkFBaUIsb2lCQUFvaUIsK0JBQStCLDZDQUE2QyxlQUFlLHdDQUF3QyxpQkFBaUIsa0hBQWtILCtCQUErQiw4Q0FBOEMsZUFBZSx5Q0FBeUMsaUJBQWlCLG1IQUFtSCwrQkFBK0IsNENBQTRDLGVBQWUsa0JBQWtCLGlCQUFpQixhQUFhLCtCQUErQixzQ0FBc0Msb0JBQW9CLHVDQUF1Qyx5RkFBeUYsMkNBQTJDLDZHQUE2RywyR0FBMkcsdURBQXVELHdDQUF3QyxxR0FBcUcsd0NBQXdDLDZGQUE2RiwyQ0FBMkMsd0xBQXdMLG1EQUFtRCx1Q0FBdUMseUJBQXlCLDRHQUE0RyxJQUFJLGlCQUFpQixJQUFJLEtBQUssY0FBYyxnQkFBZ0IscUNBQXFDLGtEQUFrRCx3QkFBd0IsMkNBQTJDLFNBQVMsdUNBQXVDLGtCQUFrQixrREFBa0QsK0JBQStCLCtCQUErQiw4QkFBOEIsd0lBQXdJLDZwQkFBNnBCLCtGQUErRiw4QkFBOEIsYUFBYSxrSUFBa0ksbURBQW1ELGdDQUFnQyxxSUFBcUksNENBQTRDLDhSQUE4Uix5RkFBeUYsNENBQTRDLDBCQUEwQiw0REFBNEQsa0NBQWtDLDJDQUEyQyxnS0FBZ0ssc0JBQXNCLDhDQUE4QywyREFBMkQsMEtBQTBLLGdFQUFnRSxrT0FBa08sNENBQTRDLCtCQUErQixvRkFBb0YsZ0VBQWdFLG9HQUFvRyw4Q0FBOEMsNEdBQTRHLHVDQUF1QyxpQ0FBaUMsbU9BQW1PLHVlQUF1ZSxnQkFBZ0IsSUFBSSxzQkFBc0IsK1JBQStSLG1CQUFtQixZQUFZLHVCQUF1QixnQkFBZ0IsYUFBYSw4QkFBOEIseUlBQXlJLGtDQUFrQywyQ0FBMkMsc0pBQXNKLGdCQUFnQixhQUFhLGdDQUFnQyxLQUFLLGtOQUFrTiwyQ0FBMkMsZ0pBQWdKLGFBQWEsb0NBQW9DLGVBQWUsVUFBVSwwQ0FBMEMsK0JBQStCLDZEQUE2RCxxTEFBcUwsUUFBUSx5Q0FBeUMsY0FBYyxpQ0FBaUMsY0FBYyxvQ0FBb0MsY0FBYyxrQ0FBa0MsY0FBYywyQ0FBMkMsTUFBTSxtTEFBbUwsSUFBSSxZQUFZLGVBQWUsd0JBQXdCLFlBQVksb0JBQW9CLEtBQUssaUNBQWlDLHNDQUFzQyxLQUFLLFFBQVEsb0JBQW9CLEtBQUssZ0NBQWdDLHVDQUF1QyxpQkFBaUIsa0JBQWtCLG1EQUFtRCwyREFBMkQsZ0JBQWdCLFdBQVcsb0JBQW9CLHlCQUF5QixJQUFJLDZCQUE2QixRQUFRLE1BQU0sMERBQTBELG1DQUFtQyxnQkFBZ0IsTUFBTSxVQUFVLDBFQUEwRSx1REFBdUQsK0RBQStELElBQUksa0NBQWtDLFVBQVUseUNBQXlDLHVEQUF1RCxlQUFlLGlXQUFpVyxlQUFlLDBDQUEwQyxlQUFlLG9DQUFvQyxlQUFlLGlDQUFpQyxlQUFlLDJDQUEyQyxVQUFVLDRDQUE0QyxpQkFBaUIsd0RBQXdELGVBQWUseUNBQXlDLHdDQUF3QyxLQUFLLGNBQWMsc0JBQXNCLGFBQWEsb0VBQW9FLFlBQVksNENBQTRDLHdEQUF3RCx3REFBd0QsbUNBQW1DLGlIQUFpSCxpREFBaUQsa0JBQWtCLGFBQWEsNkVBQTZFLGFBQWEsNERBQTRELCtEQUErRCxTQUFTLDRCQUE0QixxRUFBcUUscUJBQXFCLGFBQWEsZ0RBQWdELHNFQUFzRSxrRkFBa0YsYUFBYSwyRkFBMkYsK0NBQStDLGdDQUFnQyw2Q0FBNkMsc1ZBQXNWLGtDQUFrQyw0QkFBNEIscUNBQXFDLDJDQUEyQyxtQ0FBbUMscURBQXFELDRDQUE0QyxrQkFBa0Isd0JBQXdCLGFBQWEsd0NBQXdDLHFCQUFxQixrSEFBa0gsYUFBYSxxWEFBcVgscUJBQXFCLDZDQUE2Qyx1QkFBdUIsdUJBQXVCLGFBQWEsaUZBQWlGLG1CQUFtQixrRkFBa0YsYUFBYSwrQkFBK0IsbUJBQW1CLGtIQUFrSCxhQUFhLG1DQUFtQyx5QkFBeUIsOElBQThJLGFBQWEsbUhBQW1ILHdIQUF3SCwwQ0FBMEMsV0FBVyxhQUFhLHNMQUFzTCxnREFBZ0Qsb0ZBQW9GLHdEQUF3RCxzQ0FBc0MsbUNBQW1DLHNDQUFzQyxvQ0FBb0MsdUJBQXVCLGFBQWEscUhBQXFILGFBQWEsZ0dBQWdHLGFBQWEsbUNBQW1DLDZYQUE2WCwwQ0FBMEMsMktBQTJLLGdCQUFnQiwyQ0FBMkMsZ0JBQWdCLHFDQUFxQyxnQkFBZ0Isa0NBQWtDLGdCQUFnQiw0Q0FBNEMsd0JBQXdCLHdCQUF3QixrREFBa0QsOEtBQThLLGdCQUFnQiwyQ0FBMkMsZ0JBQWdCLHFDQUFxQyxnQkFBZ0Isa0NBQWtDLGdCQUFnQiw0Q0FBNEMseUJBQXlCLHVDQUF1Qyw4Q0FBOEMsME5BQTBOLHFFQUFxRSwyQ0FBMkMscUVBQXFFLHFDQUFxQyxxRUFBcUUsa0NBQWtDLHFFQUFxRSw0Q0FBNEMsZ0hBQWdILHVEQUF1RCxhQUFhLHlNQUF5TSxhQUFhLHVSQUF1UixTQUFTLFlBQVksTUFBTSxzRUFBc0UseUtBQXlLLHlCQUF5QixvQ0FBb0Msb0RBQW9ELDJDQUEyQyxvQkFBb0IsZ01BQWdNLHlCQUF5QixvQ0FBb0Msb0RBQW9ELDJDQUEyQyxvQkFBb0IsZ01BQWdNLHlCQUF5QixvQ0FBb0Msb0RBQW9ELDJDQUEyQyxvQkFBb0IsMExBQTBMLHlCQUF5QixvQ0FBb0MsMkVBQTJFLDJDQUEyQyxvQkFBb0IsMExBQTBMLHlCQUF5QixvQ0FBb0MsMkVBQTJFLDJDQUEyQyxvQkFBb0IsMExBQTBMLHlCQUF5QixvQ0FBb0MsMkVBQTJFLDJDQUEyQyxvQkFBb0IsdUJBQXVCLGdCQUFnQixvVUFBb1UsOEJBQThCLHlGQUF5Rix5QkFBeUIsb0NBQW9DLHFCQUFxQix1QkFBdUIscUNBQXFDLHNGQUFzRiwyQ0FBMkMsb0NBQW9DLDRDQUE0QyxLQUFLLGlEQUFpRCxJQUFJLFlBQVkscUJBQXFCLHVCQUF1QixnQ0FBZ0MsbUVBQW1FLHdFQUF3RSxFQUFFLG1CQUFtQixJQUFJLDBEQUEwRCxrQkFBa0IsY0FBYywyQkFBMkIsaUNBQWlDLDZEQUE2RCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQixzQ0FBc0MsZ0JBQWdCLG9DQUFvQyw2ckJBQTZyQixpREFBaUQsbVBBQW1QLDBDQUEwQyxtTUFBbU0sR0FBRyxJQUFJLHNEQUFzRCxrQkFBa0IsYUFBYSwrQ0FBK0Msd0RBQXdELGlCQUFpQixXQUFXLFdBQVcsU0FBUyxHQUFHLElBQUksNERBQTRELGtCQUFrQixjQUFjLDJCQUEyQiwwUEFBMFAsd0RBQXdELGVBQWUsa0JBQWtCLGlCQUFpQixtREFBbUQsK0JBQStCLHdEQUF3RCxlQUFlLDhCQUE4QixpQkFBaUIsV0FBVyxxU0FBcVMsd0JBQXdCLGlEQUFpRCwrQkFBK0IsMENBQTBDLGVBQWUscUNBQXFDLGlCQUFpQiwrRUFBK0UsK0JBQStCLDBDQUEwQyxlQUFlLHFDQUFxQyxpQkFBaUIsK0VBQStFLCtCQUErQiwwQ0FBMEMsZUFBZSxxQ0FBcUMsaUJBQWlCLCtFQUErRSwrQkFBK0IsMENBQTBDLGVBQWUscUNBQXFDLGlCQUFpQiwrRUFBK0UsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQiwyREFBMkQsaUJBQWlCLCtCQUErQix5REFBeUQsaUJBQWlCLCtCQUErQixvREFBb0QsZUFBZSw4RkFBOEYsK0JBQStCLG9EQUFvRCxlQUFlLDhGQUE4RiwrQkFBK0Isc0NBQXNDLGFBQWEsK0JBQStCLCtqQkFBK2pCLGlDQUFpQywyTUFBMk0sNkNBQTZDLHdOQUF3TiwyQ0FBMkMsMkVBQTJFLDJHQUEyRyw0RkFBNEYsNkZBQTZGLG9EQUFvRCxtQkFBbUIsd0dBQXdHLHNMQUFzTCxHQUFHLElBQUksbURBQW1ELGlCQUFpQixjQUFjLG1GQUFtRiw4Q0FBOEMsZUFBZSwrQ0FBK0MsaUJBQWlCLG1HQUFtRywrQkFBK0IseUNBQXlDLGVBQWUsK0NBQStDLGlCQUFpQixtR0FBbUcsK0JBQStCLCtDQUErQyxlQUFlLHFCQUFxQixpQkFBaUIsK1NBQStTLCtCQUErQiw0Q0FBNEMsZUFBZSxrQkFBa0IsaUJBQWlCLHFTQUFxUywrQkFBK0Isb0NBQW9DLGlDQUFpQyxrQ0FBa0Msc0RBQXNELHdDQUF3QyxzSkFBc0oseUZBQXlGLHVJQUF1SSwwQkFBMEIsZ0NBQWdDLGtCQUFrQixHQUFHLGlCQUFpQixjQUFjLDJCQUEyQiwwREFBMEQsaUJBQWlCLHNLQUFzSyx3REFBd0QsZUFBZSxrQkFBa0IsaUJBQWlCLG1EQUFtRCwrQkFBK0IsZ0NBQWdDLHNFQUFzRSw0QkFBNEIsd0JBQXdCLG1CQUFtQixzQkFBc0IseUJBQXlCLGlCQUFpQixFQUFFLDhCQUE4QixzQ0FBc0MsNkhBQTZILGdDQUFnQyxNQUFNLG1CQUFtQiwyQ0FBMkMsU0FBUyxzQkFBc0IsMENBQTBDLDhCQUE4QixLQUFLLHNCQUFzQixvQ0FBb0MsbUNBQW1DLGlDQUFpQyx3QkFBd0IsRUFBRSxnREFBZ0QsZUFBZSx1QkFBdUIsaUJBQWlCLDZEQUE2RCwrQkFBK0IsMkRBQTJELGlCQUFpQiwrQkFBK0IseURBQXlELGlCQUFpQiwrQkFBK0Isc0NBQXNDLGtCQUFrQixpQ0FBaUMsMFRBQTBULFNBQVMsaUNBQWlDLDhFQUE4RSx5QkFBeUIsaURBQWlELFdBQVcsbUdBQW1HLDJQQUEyUCxzSUFBc0ksaUNBQWlDLGlPQUFpTyw2Q0FBNkMsbUpBQW1KLGdDQUFnQyw0Q0FBNEMsR0FBRyxJQUFJLHdEQUF3RCxrQkFBa0IsY0FBYywyQkFBMkIsNktBQTZLLDZEQUE2RCxlQUFlLHVCQUF1QixpQkFBaUIsNkRBQTZELCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsaUJBQWlCLG1HQUFtRywrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQiwrREFBK0QsK0JBQStCLGlEQUFpRCxlQUFlLHVCQUF1QixpQkFBaUIsV0FBVywwTEFBMEwsNEJBQTRCLFFBQVEscUNBQXFDLEdBQUcsK0JBQStCLHNDQUFzQyxvQkFBb0IsK0JBQStCLDhCQUE4QiwrRkFBK0YsMnFCQUEycUIsMkRBQTJELHNEQUFzRCxvTEFBb0wsWUFBWSw4Q0FBOEMsZ0dBQWdHLDhDQUE4QyxZQUFZLGdDQUFnQyxZQUFZLHNIQUFzSCxjQUFjLGtCQUFrQixZQUFZLDRJQUE0SSxHQUFHLElBQUksMERBQTBELGtCQUFrQixjQUFjLDJCQUEyQix5VkFBeVYsZ0VBQWdFLGVBQWUsMEJBQTBCLGlCQUFpQixtRUFBbUUsK0JBQStCLDRDQUE0QyxlQUFlLGtCQUFrQixpQkFBaUIsbURBQW1ELCtCQUErQixpREFBaUQsZUFBZSw0Q0FBNEMsaUJBQWlCLDZGQUE2RiwrQkFBK0IseURBQXlELGVBQWUsbUZBQW1GLCtCQUErQixrREFBa0QsZUFBZSw2Q0FBNkMsaUJBQWlCLCtGQUErRiwrQkFBK0IsMERBQTBELGVBQWUsb0ZBQW9GLCtCQUErQiwrQ0FBK0MsZUFBZSxxQkFBcUIsaUJBQWlCLCtIQUErSCwrQkFBK0IsK0NBQStDLGVBQWUscUJBQXFCLGlCQUFpQiwrSEFBK0gsK0JBQStCLDZDQUE2QyxlQUFlLG1CQUFtQixpQkFBaUIsb0tBQW9LLCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLCtEQUErRCwrQkFBK0Isc0RBQXNELGVBQWUsNEJBQTRCLGlCQUFpQix1RUFBdUUsK0JBQStCLHNDQUFzQyxtQkFBbUIsMENBQTBDLHVMQUF1TCw0Q0FBNEMsUUFBUSxVQUFVLHdMQUF3TCxNQUFNLDJMQUEyTCxTQUFTLCtDQUErQyxxM0NBQXEzQyxtREFBbUQsTUFBTSxpWUFBaVkscUJBQXFCLGtDQUFrQyw4Q0FBOEMsd0xBQXdMLDRDQUE0QyxxSUFBcUksOENBQThDLDRHQUE0RyxHQUFHLGtCQUFrQixjQUFjLDJCQUEyQix5R0FBeUcsbUVBQW1FLGVBQWUsNkJBQTZCLGlCQUFpQix5RUFBeUUsK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QixpQkFBaUIsaUVBQWlFLCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLCtEQUErRCwrQkFBK0IscURBQXFELGVBQWUsMkJBQTJCLGlCQUFpQixxRUFBcUUsK0JBQStCLHNDQUFzQyxlQUFlLGlDQUFpQyxrR0FBa0csc0ZBQXNGLDZaQUE2WiwrQkFBK0Isd3dFQUF3d0UsR0FBRyxJQUFJLHFEQUFxRCxpQkFBaUIsY0FBYyxvT0FBb08sdURBQXVELGVBQWUsd0JBQXdCLCtCQUErQixpREFBaUQsZUFBZSx1QkFBdUIsK0JBQStCLDhDQUE4QyxlQUFlLDhCQUE4QixpQkFBaUIsNkRBQTZELCtCQUErQiwwQ0FBMEMsMkJBQTJCLDBOQUEwTixzQ0FBc0MsK0RBQStELHdDQUF3QyxpSEFBaUgsR0FBRyxpQkFBaUIsYUFBYSwrQ0FBK0Msc0RBQXNELDRCQUE0QixxQkFBcUIsUUFBUSxZQUFZLHlLQUF5SyxLQUFLLEVBQUUsK0JBQStCLGdDQUFnQyxFQUFFLHlUQUF5VCw2Q0FBNkMscUNBQXFDLGtEQUFrRCxzQ0FBc0MsbURBQW1ELHNDQUFzQyx3REFBd0QsMkNBQTJDLEdBQUcsa0JBQWtCLGFBQWEsOENBQThDLHVCQUF1QixtREFBbUQsNEJBQTRCLHFCQUFxQiwrQkFBK0Isb01BQW9NLFFBQVEsRUFBRSwrQkFBK0IsZ0NBQWdDLEVBQUUseVRBQXlULDZDQUE2QyxxQ0FBcUMsa0RBQWtELHNDQUFzQyxtREFBbUQsc0NBQXNDLHdEQUF3RCwyQ0FBMkMsR0FBRyxrQkFBa0IsYUFBYSwrQ0FBK0MsNERBQTRELDRCQUE0QiwyR0FBMkcsV0FBVyxFQUFFLFlBQVkscVFBQXFRLDhFQUE4RSxFQUFFLDhDQUE4QyxnQ0FBZ0MsRUFBRSxnVUFBZ1UsNkNBQTZDLDBKQUEwSixrREFBa0Qsc0NBQXNDLG1EQUFtRCxzQ0FBc0Msd0RBQXdELDJDQUEyQyxHQUFHLGtCQUFrQixnQkFBZ0IsbUJBQW1CLDJCQUEyQix5WUFBeVksWUFBWSxhQUFhLHdEQUF3RCw4Q0FBOEMsZ0NBQWdDLGtEQUFrRCx1QkFBdUIsa0RBQWtELGVBQWUseUJBQXlCLGlCQUFpQixvRUFBb0UsK0JBQStCLHlDQUF5QyxZQUFZLHNCQUFzQixtRUFBbUUsa0RBQWtELGVBQWUseUJBQXlCLGlCQUFpQixvRUFBb0UsK0JBQStCLHlDQUF5QyxZQUFZLHNCQUFzQixnQkFBZ0IsbUNBQW1DLGlFQUFpRSxpREFBaUQsZUFBZSx3QkFBd0IsaUJBQWlCLGlFQUFpRSwrQkFBK0Isd0NBQXdDLFlBQVksc0JBQXNCLGdCQUFnQixtQ0FBbUMsK0RBQStELHVEQUF1RCxlQUFlLDhCQUE4QixpQkFBaUIsbUZBQW1GLCtCQUErQiw4Q0FBOEMsWUFBWSxzQkFBc0IsZ0JBQWdCLG1DQUFtQywyRUFBMkUsK0NBQStDLGVBQWUsc0JBQXNCLGlCQUFpQiwyREFBMkQsK0JBQStCLHNDQUFzQyxZQUFZLG9CQUFvQix3REFBd0QsZ0RBQWdELGVBQWUsdUJBQXVCLGlCQUFpQiw4REFBOEQsK0JBQStCLHVDQUF1QyxZQUFZLG9CQUFvQixxREFBcUQsbURBQW1ELGVBQWUsMEJBQTBCLGlCQUFpQix1RUFBdUUsK0JBQStCLDBDQUEwQyxZQUFZLG9CQUFvQiw0Q0FBNEMsbUNBQW1DLFlBQVksd0ZBQXdGLFlBQVksb1BBQW9QLGtDQUFrQyxvSkFBb0osWUFBWSxxQkFBcUIsNEdBQTRHLHFDQUFxQyxtQ0FBbUMsc0JBQXNCLHlKQUF5Six5Q0FBeUMsNkVBQTZFLHFDQUFxQyxtQ0FBbUMsc0JBQXNCLHNEQUFzRCxtREFBbUQsbUNBQW1DLHNCQUFzQixpREFBaUQsa0RBQWtELDRCQUE0QixzRkFBc0YsK0NBQStDLDRCQUE0QixtRkFBbUYsd0RBQXdELDRCQUE0QiwyR0FBMkcsV0FBVyx5RUFBeUUsR0FBRyxrQkFBa0IsY0FBYywyQkFBMkIsNEVBQTRFLEdBQUcsa0VBQWtFLGVBQWUsNEJBQTRCLGlCQUFpQiw2QkFBNkIsd0JBQXdCLHlGQUF5RixzTEFBc0wsK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QiwrQkFBK0Isb0RBQW9ELGVBQWUsMEJBQTBCLCtCQUErQiwyQ0FBMkMsdUhBQXVILG9DQUFvQyxpREFBaUQscUNBQXFDLGdCQUFnQix5R0FBeUcsNENBQTRDLFlBQVksV0FBVyxLQUFLLHNhQUFzYSxLQUFLLEVBQUUsWUFBWSxLQUFLLEtBQUssNkNBQTZDLHVDQUF1QyxJQUFJLDRFQUE0RSx3Q0FBd0MsK0NBQStDLDJLQUEySyxxREFBcUQsWUFBWSxXQUFXLEtBQUssV0FBVyxvT0FBb08scUNBQXFDLDJCQUEyQixpREFBaUQscVFBQXFRLG1DQUFtQywwRkFBMEYsNkNBQTZDLFlBQVksV0FBVyxLQUFLLFdBQVcsNkxBQTZMLDBEQUEwRCwyT0FBMk8sS0FBSyxFQUFFLFlBQVksS0FBSyxLQUFLLDZDQUE2QyxpQkFBaUIsV0FBVyxLQUFLLFdBQVcsaUhBQWlILEtBQUssaUNBQWlDLHlCQUF5QiwrREFBK0QsMkNBQTJDLHNNQUFzTSw2QkFBNkIsV0FBVyxLQUFLLFdBQVcsMEVBQTBFLHNDQUFzQyxxQ0FBcUMsNERBQTRELEtBQUssK0VBQStFLFdBQVcsS0FBSyxXQUFXLHFiQUFxYixrVkFBa1YsR0FBRyxrQkFBa0IsY0FBYywyQkFBMkIsNkZBQTZGLCtEQUErRCxlQUFlLHlCQUF5QixpQkFBaUIsaUVBQWlFLCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLCtEQUErRCwrQkFBK0Isc0NBQXNDLGtCQUFrQiwyQ0FBMkMseUlBQXlJLCtCQUErQixzRUFBc0Usa0RBQWtELDhzQkFBOHNCLG1EQUFtRCx1bUJBQXVtQixRQUFRLHdQQUF3UCw4Q0FBOEMsb0VBQW9FLEdBQUcsa0JBQWtCLGNBQWMsMkJBQTJCLHVJQUF1SSxtRUFBbUUsZUFBZSxpQ0FBaUMsaUJBQWlCLFdBQVcsdVFBQXVRLG9EQUFvRCw4RUFBOEUsaUJBQWlCLG1CQUFtQix3RkFBd0YsaUJBQWlCLHdCQUF3QiwrQkFBK0Isa0RBQWtELGVBQWUsNEJBQTRCLGlCQUFpQixXQUFXLHlQQUF5UCxxREFBcUQseUVBQXlFLGlCQUFpQixtQkFBbUIsbUZBQW1GLGlCQUFpQix3QkFBd0IsK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QixpQkFBaUIsaUVBQWlFLCtCQUErQixtREFBbUQsZUFBZSx5QkFBeUIsaUJBQWlCLGlFQUFpRSwrQkFBK0Isc0RBQXNELGVBQWUsNEJBQTRCLGlCQUFpQix1RUFBdUUsK0JBQStCLHNDQUFzQyx1QkFBdUIsMkNBQTJDLHlJQUF5SSwrQkFBK0Isc0VBQXNFLDZHQUE2Ryx3b0NBQXdvQyxtREFBbUQsdW1CQUF1bUIsUUFBUSx3UEFBd1AsOENBQThDLG9FQUFvRSxHQUFHLGtCQUFrQixnQkFBZ0IsMkJBQTJCLHdSQUF3UixpR0FBaUcsNENBQTRDLG9CQUFvQiwwQ0FBMEMsb0JBQW9CLHVyQ0FBdXJDLGlFQUFpRSxlQUFlLDJCQUEyQiwrQkFBK0IsbURBQW1ELGVBQWUseUJBQXlCLCtCQUErQixxQ0FBcUMsZ0RBQWdELHVDQUF1QywwQ0FBMEMsK0NBQStDLGVBQWUsNkJBQTZCLCtCQUErQix1REFBdUQsNkJBQTZCLFdBQVcsS0FBSywyQkFBMkIscURBQXFELGVBQWUsbUNBQW1DLGlCQUFpQiw4QkFBOEIsK0JBQStCLG1EQUFtRCxlQUFlLGdDQUFnQywrQkFBK0Isb0RBQW9ELGVBQWUsaUNBQWlDLCtCQUErQiwyQ0FBMkMsaUNBQWlDLHlEQUF5RCxlQUFlLGdDQUFnQyxpQkFBaUIsK0dBQStHLCtCQUErQix3REFBd0QsZUFBZSw4QkFBOEIsaUJBQWlCLDhHQUE4RywrQkFBK0IscUNBQXFDLHFEQUFxRCxxQ0FBcUMscUJBQXFCLDBDQUEwQywyQkFBMkIsOFlBQThZLGlEQUFpRCwwRUFBMEUscUNBQXFDLDJEQUEyRCxxREFBcUQsZUFBZSw0QkFBNEIsaUJBQWlCLHlFQUF5RSwrQkFBK0Isd0RBQXdELGVBQWUsMkNBQTJDLGlCQUFpQixxSEFBcUgsK0JBQStCLGdEQUFnRCxlQUFlLHNCQUFzQixpQkFBaUIsNkZBQTZGLCtCQUErQixrREFBa0QsZUFBZSxzQkFBc0IsaUJBQWlCLHVCQUF1QixpQkFBaUIsOENBQThDLCtCQUErQiwrQkFBK0IsNERBQTRELGVBQWUsZ0NBQWdDLGlCQUFpQiw0RkFBNEYsK0JBQStCLDBEQUEwRCxlQUFlLDhCQUE4QixpQkFBaUIsc0ZBQXNGLCtCQUErQiwrQ0FBK0MsZUFBZSxxQkFBcUIsaUJBQWlCLHdOQUF3TiwrQkFBK0IsbURBQW1ELGVBQWUseUJBQXlCLGlCQUFpQiwwQkFBMEIsNENBQTRDLDhDQUE4QyxxREFBcUQsK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QixpQkFBaUIsMEJBQTBCLDRDQUE0Qyw4Q0FBOEMscURBQXFELCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsaUJBQWlCLDZCQUE2QiwrQ0FBK0MsOENBQThDLDJEQUEyRCwrQkFBK0IsZ0VBQWdFLGVBQWUsc0NBQXNDLGlCQUFpQix3SkFBd0osK0JBQStCLDhEQUE4RCxlQUFlLG9DQUFvQyxpQkFBaUIsa0pBQWtKLCtCQUErQixxREFBcUQsZUFBZSwyQkFBMkIsaUJBQWlCLDRCQUE0QixzQkFBc0IsOENBQThDLDREQUE0RCwrQkFBK0IsZ0RBQWdELGVBQWUsZ0NBQWdDLGlCQUFpQixvREFBb0QsOENBQThDLHdDQUF3QywrQkFBK0IsMERBQTBELGVBQWUsMENBQTBDLGlCQUFpQiw4R0FBOEcsK0JBQStCLHdEQUF3RCxlQUFlLHdDQUF3QyxpQkFBaUIsd0dBQXdHLCtCQUErQiw0Q0FBNEMsMk5BQTJOLG9MQUFvTCx3Q0FBd0MsK0VBQStFLHV4QkFBdXhCLDJCQUEyQiw2SkFBNkosK0JBQStCLG1EQUFtRCx1Q0FBdUMsV0FBVyw2UkFBNlIsdUJBQXVCLEVBQUUscUNBQXFDLFdBQVcsa0dBQWtHLHNhQUFzYSxHQUFHLGtEQUFrRCwySEFBMkgsZ0NBQWdDLCtHQUErRyxHQUFHLElBQUksMkRBQTJELGtCQUFrQixlQUFlLGFBQWEsOENBQThDLGdkQUFnZCxrREFBa0Qsd0JBQXdCLHNDQUFzQyx1Q0FBdUMsNHVCQUE0dUIsMENBQTBDLElBQUksc0NBQXNDLFlBQVksc0NBQXNDLG1CQUFtQixXQUFXLEtBQUssV0FBVyxpQ0FBaUMsOEJBQThCLCtEQUErRCxnRUFBZ0UseUNBQXlDLDZCQUE2Qix1QkFBdUIsS0FBSyx1QkFBdUIsaUNBQWlDLG9CQUFvQixLQUFLLG9CQUFvQixxQkFBcUIsb0JBQW9CLDhLQUE4Syx5REFBeUQsZUFBZSx5Q0FBeUMsK0JBQStCLGtDQUFrQyxXQUFXLCtDQUErQyxtQkFBbUIsR0FBRyxxR0FBcUcsbUNBQW1DLDZGQUE2RixvR0FBb0csaUVBQWlFLGtFQUFrRSxpSkFBaUosMEZBQTBGLHlDQUF5Qyw4RUFBOEUsc0NBQXNDLG9GQUFvRixFQUFFLGdDQUFnQywyQ0FBMkMsR0FBRyxvQ0FBb0MsV0FBVyxNQUFNLG1EQUFtRCxtQkFBbUIsRUFBRSxrSUFBa0ksbUJBQW1CLG1GQUFtRixtREFBbUQsc0NBQXNDLCtCQUErQix3S0FBd0ssMERBQTBELDZJQUE2SSxnQ0FBZ0MsaURBQWlELG1DQUFtQyxlQUFlLCtLQUErSyw2RkFBNkYsY0FBYyxLQUFLLEdBQUcsSUFBSSw4REFBOEQsa0JBQWtCLGNBQWMsMkJBQTJCLHNQQUFzUCxxRUFBcUUsZUFBZSwrQkFBK0IsaUJBQWlCLDZFQUE2RSwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw2RUFBNkUsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsK0RBQStELCtCQUErQixpREFBaUQsZUFBZSx1QkFBdUIsaUJBQWlCLHNDQUFzQywrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQix1Q0FBdUMsK0JBQStCLHlEQUF5RCxlQUFlLCtCQUErQixpQkFBaUIsOENBQThDLCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsaUJBQWlCLDJDQUEyQywrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw4Q0FBOEMsK0JBQStCLHNEQUFzRCxlQUFlLDRCQUE0QixpQkFBaUIsMkNBQTJDLCtCQUErQiwwREFBMEQsZUFBZSxnQ0FBZ0MsaUJBQWlCLCtDQUErQywrQkFBK0Isa0NBQWtDLGtEQUFrRCx1S0FBdUssa05BQWtOLDRCQUE0Qix1RUFBdUUsZUFBZSxNQUFNLEtBQUsseUJBQXlCLCtIQUErSCxlQUFlLE1BQU0sS0FBSywwQkFBMEIsaUlBQWlJLDRCQUE0Qix1RUFBdUUsb0NBQW9DLE1BQU0sNkJBQTZCLHFCQUFxQiwrSEFBK0gsb0NBQW9DLE1BQU0sNkJBQTZCLHNCQUFzQixrSUFBa0ksWUFBWSxxQ0FBcUMsb0JBQW9CLEdBQUcsSUFBSSwwREFBMEQsa0JBQWtCLGNBQWMsMkJBQTJCLGdEQUFnRCxnRUFBZ0UsZUFBZSxpREFBaUQsaUJBQWlCLG1FQUFtRSwrQkFBK0IsdURBQXVELGVBQWUsNkJBQTZCLGlCQUFpQixXQUFXLGlIQUFpSCx3QkFBd0IsdUJBQXVCLCtCQUErQixxREFBcUQsZUFBZSwyQkFBMkIsaUJBQWlCLFdBQVcsNkdBQTZHLHdCQUF3Qix1QkFBdUIsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsV0FBVyx1R0FBdUcsd0JBQXdCLHVCQUF1QiwrQkFBK0Isc0NBQXNDLHlCQUF5QixpQ0FBaUMsc0VBQXNFLDZHQUE2Ryx1ckNBQXVyQyxHQUFHLElBQUksK0RBQStELDhCQUE4QiwrREFBK0QsZ0JBQWdCLHNCQUFzQixxVUFBcVUsaUJBQWlCLGNBQWMsb0tBQW9LLHFEQUFxRCxlQUFlLDJDQUEyQyxpQkFBaUIsc0hBQXNILCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLDBGQUEwRiwrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLGlCQUFpQix3RkFBd0YsK0JBQStCLGtEQUFrRCxlQUFlLHdCQUF3QixpQkFBaUIsMEZBQTBGLCtCQUErQixpQ0FBaUMsaUNBQWlDLEdBQUcsaUJBQWlCLHdCQUF3QixzR0FBc0cscUJBQXFCLGlCQUFpQiw2Q0FBNkMseUVBQXlFLHNCQUFzQix1QkFBdUIsaXRCQUFpdEIsNERBQTRELDhEQUE4RCw4QkFBOEIsMkRBQTJELDhEQUE4RCxnQ0FBZ0MsNkRBQTZELDhEQUE4RCxpSkFBaUoseUJBQXlCLG1FQUFtRSxvSUFBb0ksbUhBQW1ILHFCQUFxQiw0Q0FBNEMsa0VBQWtFLGVBQWUsNEJBQTRCLCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QixpQkFBaUIsOERBQThELCtCQUErQixrREFBa0QsZUFBZSx3QkFBd0IsaUJBQWlCLDhEQUE4RCwrQkFBK0Isa0RBQWtELGVBQWUsd0JBQXdCLGlCQUFpQixvR0FBb0csK0JBQStCLG1EQUFtRCxlQUFlLHlCQUF5QixpQkFBaUIsc0dBQXNHLCtCQUErQix3REFBd0QsZUFBZSw4QkFBOEIsaUJBQWlCLGdIQUFnSCwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiwwRUFBMEUsK0JBQStCLGtEQUFrRCxlQUFlLFlBQVksZ1JBQWdSLCtCQUErQiw2Q0FBNkMsZUFBZSw0QkFBNEIsK0JBQStCLHFEQUFxRCxlQUFlLDJCQUEyQiwrQkFBK0IscUNBQXFDLDRCQUE0QiwwQ0FBMEMsK0NBQStDLHFEQUFxRCxlQUFlLDRCQUE0QixpQkFBaUIscUhBQXFILCtCQUErQixvREFBb0QsZUFBZSw0Q0FBNEMsaUJBQWlCLHVFQUF1RSwrQkFBK0IscURBQXFELGVBQWUsMkJBQTJCLGlCQUFpQixzQkFBc0IsK0JBQStCLHNDQUFzQywrQkFBK0IsZ0RBQWdELGdDQUFnQyx5QkFBeUIsV0FBVyxLQUFLLFdBQVcsZ0RBQWdELG9FQUFvRSxlQUFlLDJDQUEyQyxpQkFBaUIsc0NBQXNDLCtCQUErQiwrQ0FBK0Msc0VBQXNFLDRMQUE0TCx3VEFBd1QsdURBQXVELG9DQUFvQyxpQkFBaUIsb0NBQW9DLG1CQUFtQixvQ0FBb0MsOENBQThDLHVDQUF1QyxpREFBaUQsZ0NBQWdDLHNCQUFzQixrNkJBQWs2QixrQ0FBa0Msc0JBQXNCLE1BQU0sb0hBQW9ILHVWQUF1Viw0Q0FBNEMsb0JBQW9CLGlGQUFpRixnREFBZ0Qsc0JBQXNCLDhCQUE4QixtRkFBbUYsK0RBQStELHNDQUFzQywyRUFBMkUsb0RBQW9ELHNCQUFzQixhQUFhLGdFQUFnRSxXQUFXLEtBQUssV0FBVyxnQkFBZ0Isb0JBQW9CLHVCQUF1Qiw0SkFBNEosb0hBQW9ILHFDQUFxQyxxQkFBcUIsSUFBSSxrSEFBa0gsZ0NBQWdDLDhEQUE4RCw2RkFBNkYscUJBQXFCLGd2QkFBZ3ZCLHVDQUF1Qyw2RUFBNkUsb0RBQW9ELDZFQUE2RSxnREFBZ0Qsc0JBQXNCLE1BQU0scUNBQXFDLHVCQUF1QiwwREFBMEQsbUZBQW1GLDRaQUE0Wiw2REFBNkQsZ0JBQWdCLDhDQUE4QyxtREFBbUQsZ0lBQWdJLCtCQUErQiw2QkFBNkIsTUFBTSw4QkFBOEIscUVBQXFFLHdOQUF3TiwwR0FBMEcsK0RBQStELDJJQUEySSw2SEFBNkgseUJBQXlCLGtEQUFrRCxrSkFBa0osaUNBQWlDLGdEQUFnRCxrS0FBa0ssa0RBQWtELGtLQUFrSyx3Q0FBd0MsV0FBVyxtQkFBbUIsc0JBQXNCLGtFQUFrRSwrSEFBK0gsa0RBQWtELDBEQUEwRCx5Q0FBeUMsTUFBTSxrQkFBa0Isb0VBQW9FLGdEQUFnRCxrSEFBa0gsNkNBQTZDLHFCQUFxQixXQUFXLEtBQUssV0FBVyxnQkFBZ0IsY0FBYyxnRUFBZ0UsS0FBSyxRQUFRLDRCQUE0QixvS0FBb0ssNkRBQTZELDRDQUE0Qyw2RUFBNkUscUNBQXFDLG9IQUFvSCx5RUFBeUUsbURBQW1ELDBCQUEwQiwrQ0FBK0MsV0FBVywwRkFBMEYsdVZBQXVWLEVBQUUscUNBQXFDLGdGQUFnRiwyS0FBMkssa09BQWtPLHdDQUF3Qyx3RkFBd0YsOERBQThELHVFQUF1RSxHQUFHLGdDQUFnQyxjQUFjLDJRQUEyUSw4REFBOEQsZUFBZSx3QkFBd0IsK0JBQStCLHlEQUF5RCxlQUFlLHdCQUF3QiwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQixXQUFXLDJJQUEySSxnQ0FBZ0MsOEVBQThFLGdDQUFnQyxvTkFBb04sK0JBQStCLHlEQUF5RCxlQUFlLCtCQUErQixpQkFBaUIsV0FBVywySUFBMkksZ0NBQWdDLDhFQUE4RSxnQ0FBZ0Msb05BQW9OLCtCQUErQixpQ0FBaUMsOGFBQThhLEdBQUcsZ0JBQWdCLGNBQWMsbUNBQW1DLGtCQUFrQiw2QkFBNkIsMkNBQTJDLHNHQUFzRywwQkFBMEIsZ0RBQWdELGFBQWEseUNBQXlDLFFBQVEsZUFBZSxZQUFZLFdBQVcsY0FBYyxTQUFTLDRDQUE0QyxtQkFBbUIsd0RBQXdELCtDQUErQyxtQkFBbUIsSUFBSSw0REFBNEQsc0JBQXNCLFlBQVksc0JBQXNCLGdJQUFnSSxtREFBbUQsK0JBQStCLHNLQUFzSyw0Q0FBNEMsc0NBQXNDLElBQUksMkZBQTJGLDBCQUEwQiw4VkFBOFYsOEdBQThHLDRDQUE0QyxtQkFBbUIsa0JBQWtCLG9LQUFvSywwQkFBMEIsU0FBUywwRUFBMEUsd0NBQXdDLHNEQUFzRCxXQUFXLCtDQUErQyxpR0FBaUcsa0lBQWtJLDhMQUE4TCxZQUFZLFdBQVcsK0NBQStDLHVHQUF1RyxzS0FBc0ssU0FBUyx1SUFBdUksZ01BQWdNLGdCQUFnQixZQUFZLFdBQVcseUpBQXlKLGlCQUFpQiwrQ0FBK0MsMkNBQTJDLDRGQUE0Rix1REFBdUQsMkdBQTJHLHNEQUFzRCxvREFBb0Qsa0dBQWtHLDJCQUEyQixvR0FBb0csV0FBVyxrQkFBa0IsaUJBQWlCLG9KQUFvSixXQUFXLDZDQUE2Qyw2REFBNkQsK0NBQStDLHVDQUF1QywyREFBMkQsb0RBQW9ELGtDQUFrQyxpSkFBaUosc0RBQXNELGlDQUFpQyxzQkFBc0IscUNBQXFDLHNCQUFzQixpQ0FBaUMsbUJBQW1CLHdDQUF3Qyx5QkFBeUIsZ0NBQWdDLG1DQUFtQyxtRkFBbUYsb0NBQW9DLHlEQUF5RCx3Q0FBd0MsR0FBRyxpQkFBaUIsZ0JBQWdCLGtCQUFrQixxQ0FBcUMseUJBQXlCLGdCQUFnQix5QkFBeUIsY0FBYyx5RUFBeUUsaVVBQWlVLHFEQUFxRCxlQUFlLHVEQUF1RCxpQkFBaUIsb0NBQW9DLCtCQUErQiwrQ0FBK0MsZUFBZSwwREFBMEQsaUJBQWlCLG1DQUFtQywrQkFBK0IsaURBQWlELGVBQWUsdUJBQXVCLCtCQUErQixzQ0FBc0MsV0FBVywrQ0FBK0MsU0FBUyx1QkFBdUIsK0RBQStELFlBQVksOENBQThDLHdDQUF3QyxpQ0FBaUMsaUZBQWlGLDJDQUEyQyw4QkFBOEIsV0FBVyxLQUFLLFdBQVcsdUJBQXVCLFlBQVksZ0RBQWdELGVBQWUsdUJBQXVCLGlCQUFpQix3QkFBd0Isa0JBQWtCLGdCQUFnQixvQkFBb0IsK0JBQStCLGdEQUFnRCxlQUFlLDJCQUEyQiwrQkFBK0Isc0NBQXNDLDJCQUEyQixxQ0FBcUMsa0JBQWtCLDJDQUEyQyxlQUFlLGtCQUFrQiwrQkFBK0IsNENBQTRDLGVBQWUsNERBQTRELCtCQUErQiw4Q0FBOEMsOENBQThDLHNDQUFzQyxnQkFBZ0Isb0RBQW9ELDJGQUEyRixnQkFBZ0IsOENBQThDLHFDQUFxQyxZQUFZLHlDQUF5QyxnQkFBZ0IsMENBQTBDLDBEQUEwRCx5Q0FBeUMsd05BQXdOLHVDQUF1QyxvSUFBb0ksOENBQThDLDhOQUE4Tiw4Q0FBOEMsbVZBQW1WLHdDQUF3QyxpRkFBaUYsS0FBSyxtRkFBbUYsd0ZBQXdGLG1EQUFtRCx3Q0FBd0MsNEJBQTRCLHFDQUFxQyxzSEFBc0gsZ1VBQWdVLHFDQUFxQyxtREFBbUQsZ0NBQWdDLGlQQUFpUCw4QkFBOEIsV0FBVyxLQUFLLGVBQWUsR0FBRyxrQkFBa0IsY0FBYyw0QkFBNEIsa0RBQWtELHlCQUF5QixxQ0FBcUMsK0NBQStDLEdBQUcsbUJBQW1CLGNBQWMsMkJBQTJCLDBGQUEwRiwwREFBMEQsa0NBQWtDLGtEQUFrRCxtQ0FBbUMseUNBQXlDLGlDQUFpQywyQ0FBMkMsR0FBRyxxRUFBcUUsZUFBZSwrQkFBK0IsaUJBQWlCLDhFQUE4RSwrQkFBK0IseURBQXlELGVBQWUsK0JBQStCLGlCQUFpQiw4RUFBOEUsK0JBQStCLCtDQUErQyw4RUFBOEUsc0NBQXNDLHdEQUF3RCw4Q0FBOEMsZUFBZSxxQkFBcUIsaUJBQWlCLCtnQkFBK2dCLCtCQUErQix1Q0FBdUMsd0NBQXdDLHFDQUFxQyxpQkFBaUIscUNBQXFDLDJCQUEyQixJQUFJLGdDQUFnQyxpRkFBaUYsb0NBQW9DLElBQUkseUNBQXlDLGdFQUFnRSwyRkFBMkYsZ0NBQWdDLG1IQUFtSCxHQUFHLG9CQUFvQixjQUFjLDJCQUEyQixpREFBaUQsNERBQTRELGVBQWUsc0JBQXNCLCtCQUErQixtREFBbUQsZUFBZSx5QkFBeUIsaUJBQWlCLHdGQUF3RiwrQkFBK0Isc0NBQXNDLG9DQUFvQyx5Q0FBeUMscUNBQXFDLG9DQUFvQywwUUFBMFEsMENBQTBDLHFDQUFxQyw4Q0FBOEMsdUNBQXVDLGdDQUFnQywrRUFBK0UscUNBQXFDLG9CQUFvQixnQ0FBZ0MsNkJBQTZCLFdBQVcsS0FBSyxlQUFlLGlEQUFpRCx1SkFBdUosbUJBQW1CLGFBQWEseUJBQXlCLHdHQUF3RywrREFBK0QsZUFBZSx5QkFBeUIsaUJBQWlCLFdBQVcsNEVBQTRFLHFCQUFxQixHQUFHLCtCQUErQiwrQ0FBK0MsZUFBZSxxQkFBcUIsaUJBQWlCLFdBQVcsMEZBQTBGLHFCQUFxQixHQUFHLCtCQUErQiw0Q0FBNEMsZUFBZSxrQkFBa0IsaUJBQWlCLFdBQVcsb0ZBQW9GLHFCQUFxQixHQUFHLCtCQUErQiwwQ0FBMEMscUNBQXFDLDZGQUE2RixXQUFXLEtBQUssa0JBQWtCLGtDQUFrQywrRkFBK0YseUxBQXlMLDBLQUEwSyw0REFBNEQsa0NBQWtDLElBQUksZ0JBQWdCLHVIQUF1SCxLQUFLLGFBQWEsSUFBSSxZQUFZLHVIQUF1SCxLQUFLLElBQUksNkJBQTZCLFdBQVcsS0FBSyxNQUFNLCtDQUErQyx3QkFBd0IsMENBQTBDLEdBQUcsb0JBQW9CLGFBQWEsOENBQThDLHFCQUFxQiwwREFBMEQsZUFBZSxvQkFBb0IsaUJBQWlCLFdBQVcsa0VBQWtFLHFCQUFxQixHQUFHLCtCQUErQix5Q0FBeUMsYUFBYSxNQUFNLGtDQUFrQyxzQ0FBc0Msd0VBQXdFLE1BQU0sOEVBQThFLE1BQU0sc0NBQXNDLG1GQUFtRiw2Q0FBNkMsMkRBQTJELDRIQUE0SCxHQUFHLCtCQUErQiw0QkFBNEIsd0JBQXdCLG9CQUFvQix1QkFBdUIsOEJBQThCLG1CQUFtQix3Q0FBd0MsNEJBQTRCLDJCQUEyQix3REFBd0QsMkJBQTJCLFNBQVMsd0NBQXdDLG1EQUFtRCxtREFBbUQsZ0ZBQWdGLCtCQUErQiwrQkFBK0IsK0JBQStCLHNDQUFzQyw4QkFBOEIsa0JBQWtCLGtCQUFrQix3Q0FBd0Msd0NBQXdDLEdBQUcsR0FBRyxtQ0FBbUMsa0JBQWtCLHdDQUF3Qyx3Q0FBd0MsR0FBRyxHQUFHLFNBQVMsd0NBQXdDLHdDQUF3QyxHQUFHLEdBQUcsNkRBQTZELHlCQUF5QixpREFBaUQsb0NBQW9DLEdBQUcsU0FBUyxvQ0FBb0MsaURBQWlELEdBQUcsaURBQWlELGdEQUFnRCw4Q0FBOEMsR0FBRyxJQUFJLDRDQUE0Qyw4QkFBOEIsbUJBQW1CLDJCQUEyQixnREFBZ0QsZ0RBQWdELG1DQUFtQywrQkFBK0Isd0RBQXdELDZCQUE2QiwwQkFBMEIsNEJBQTRCLDBEQUEwRCwyQkFBMkIsOEJBQThCLDRCQUE0QiwwREFBMEQsZ0lBQWdJLHlEQUF5RCxnQ0FBZ0MsZ0RBQWdELDJDQUEyQyxzQ0FBc0Msc0JBQXNCLHNDQUFzQyxzQ0FBc0MsaU5BQWlOLDBGQUEwRixzQkFBc0IsK0JBQStCLHFGQUFxRix1QkFBdUIsdUJBQXVCLHNFQUFzRSwwQ0FBMEMsR0FBRyxFQUFFLDJDQUEyQyxtQkFBbUIsYUFBYSx5QkFBeUIsNkVBQTZFLGdCQUFnQixtQ0FBbUMsZ0JBQWdCLDZCQUE2Qix5VEFBeVQsdURBQXVELHNCQUFzQix5Q0FBeUMsU0FBUyw0Q0FBNEMsWUFBWSwrQ0FBK0Msa0VBQWtFLGdEQUFnRCwyQ0FBMkMsaUZBQWlGLHlKQUF5Six3REFBd0QsYUFBYSxrQkFBa0Isb0JBQW9CLGNBQWMsNENBQTRDLG9DQUFvQyxnRUFBZ0UsNk1BQTZNLGlEQUFpRCxtRkFBbUYsRUFBRSxtQkFBbUIsaURBQWlELHdKQUF3Six5QkFBeUIsS0FBSywwR0FBMEcsNENBQTRDLDJDQUEyQyxNQUFNLGVBQWUsbWdDQUFtZ0MsMENBQTBDLGdEQUFnRCxvQ0FBb0MsNENBQTRDLGlDQUFpQyxpQ0FBaUMsK0JBQStCLFdBQVcsOENBQThDLDZCQUE2QixPQUFPLGtDQUFrQyw0Q0FBNEMsbURBQW1ELHFDQUFxQyx1QkFBdUIseUJBQXlCLDhDQUE4Qyx1QkFBdUIsUUFBUSxpcENBQWlwQyxpQkFBaUIsOERBQThELG1CQUFtQixnQkFBZ0IsbUJBQW1CLDJCQUEyQixtRkFBbUYscUNBQXFDLGtDQUFrQyxxQ0FBcUMsR0FBRyxxREFBcUQsa1RBQWtULHVEQUF1RCxlQUFlLHdDQUF3QyxpQkFBaUIsb0tBQW9LLCtCQUErQixtREFBbUQsZUFBZSwrREFBK0QsaUJBQWlCLFdBQVcsTUFBTSx1QkFBdUIsaURBQWlELE9BQU8seUJBQXlCLHFDQUFxQyx5Q0FBeUMsNkVBQTZFLDZ0QkFBNnRCLDBDQUEwQyxzRUFBc0UsMENBQTBDLEVBQUUsd0RBQXdELDRCQUE0QiwrQkFBK0IsNENBQTRDLGVBQWUsa0JBQWtCLGlCQUFpQixzREFBc0QsK0JBQStCLGdEQUFnRCxlQUFlLHNCQUFzQixpQkFBaUIsOERBQThELCtCQUErQixvREFBb0QsZUFBZSwwQkFBMEIsK0JBQStCLHFEQUFxRCxlQUFlLDJCQUEyQiwrQkFBK0IscURBQXFELGVBQWUsMkJBQTJCLCtCQUErQixzREFBc0QsZUFBZSw0QkFBNEIsK0JBQStCLHNDQUFzQywwQkFBMEIsd0NBQXdDLDZCQUE2QixZQUFZLG1DQUFtQyxZQUFZLG9IQUFvSCxlQUFlLFlBQVksZ0ZBQWdGLG1DQUFtQyxxQ0FBcUMsb0VBQW9FLDJCQUEyQixtRUFBbUUsMkJBQTJCLHNUQUFzVCxzQ0FBc0MsMkVBQTJFLDZDQUE2QyxXQUFXLDZMQUE2TCxrR0FBa0csRUFBRSw4Q0FBOEMsb0xBQW9MLDhDQUE4Qyx1SUFBdUkseUNBQXlDLHFyQkFBcXJCLGdDQUFnQyw4U0FBOFMsR0FBRyxvQkFBb0IsZ0JBQWdCLDJCQUEyQiwyREFBMkQseUNBQXlDLGtDQUFrQywyQ0FBMkMsbUNBQW1DLHlDQUF5QyxpQ0FBaUMsMkNBQTJDLEdBQUcsa0RBQWtELHFCQUFxQixxQ0FBcUMsV0FBVyw4REFBOEQsYUFBYSxvQkFBb0IsMENBQTBDLEdBQUcsb0JBQW9CLGFBQWEsK0NBQStDLHFEQUFxRCxhQUFhLE1BQU0scUJBQXFCLDhCQUE4Qix1Q0FBdUMsOEdBQThHLE1BQU0saUlBQWlJLEdBQUcsb0JBQW9CLGFBQWEsOENBQThDLDBCQUEwQiw2REFBNkQsZUFBZSx1QkFBdUIsaUJBQWlCLFdBQVcsd0VBQXdFLHFCQUFxQixHQUFHLCtCQUErQix5Q0FBeUMsdUNBQXVDLE1BQU0seUJBQXlCLDhGQUE4RixNQUFNLCtHQUErRyxjQUFjLHlDQUF5QywwRkFBMEYseUNBQXlDLGtDQUFrQyxXQUFXLEtBQUssV0FBVyx1QkFBdUIsWUFBWSxrQkFBa0IsS0FBSyxxQkFBcUIsOERBQThELHNCQUFzQixFQUFFLHVJQUF1SSxhQUFhLGtCQUFrQixXQUFXLGFBQWEsNkRBQTZELDhCQUE4QixxSkFBcUosR0FBRyxvQkFBb0IsYUFBYSw4Q0FBOEMscUJBQXFCLDBEQUEwRCxlQUFlLG9CQUFvQixpQkFBaUIsV0FBVyxrRUFBa0UscUJBQXFCLEdBQUcsK0JBQStCLHlDQUF5QyxhQUFhLE1BQU0sZ0NBQWdDLHNDQUFzQywwRUFBMEUsTUFBTSwrRUFBK0UsTUFBTSxzQ0FBc0MsbUZBQW1GLDJDQUEyQyw2RUFBNkUsNEhBQTRILEdBQUcsb0JBQW9CLGNBQWMsbUJBQW1CLHlCQUF5QixzREFBc0QsOERBQThELGVBQWUsd0JBQXdCLGlCQUFpQixXQUFXLDBFQUEwRSxxQkFBcUIsR0FBRywrQkFBK0IsMENBQTBDLG9HQUFvRyxXQUFXLEtBQUssa0JBQWtCLGtHQUFrRyw0R0FBNEcsMENBQTBDLHdGQUF3RixpQ0FBaUMsV0FBVyxLQUFLLE1BQU0sa0JBQWtCLElBQUksU0FBUyxrSUFBa0ksR0FBRyxtQkFBbUIsY0FBYyxXQUFXLHdCQUF3Qix5QkFBeUIsOEVBQThFLHlIQUF5SCw4REFBOEQsbU5BQW1OLHVDQUF1Qyw0RUFBNEUsMkNBQTJDLG1GQUFtRiwwQkFBMEIsZ0VBQWdFLGdCQUFnQix3TUFBd00sa0RBQWtELGVBQWUsbUJBQW1CLCtCQUErQixvREFBb0QsZUFBZSwwQkFBMEIsK0JBQStCLDhDQUE4QywrQkFBK0IsMk5BQTJOLG9DQUFvQyxzSEFBc0gsdURBQXVELHlGQUF5Riw0QkFBNEIsd2hCQUF3aEIsb0RBQW9ELGVBQWUsMkJBQTJCLCtCQUErQiwwQ0FBMEMsOENBQThDLG9DQUFvQyw4Q0FBOEMsdUNBQXVDLGlEQUFpRCxnQ0FBZ0MsNklBQTZJLHdCQUF3QixzTUFBc00sbUVBQW1FLDBTQUEwUyxHQUFHLEdBQUcsMENBQTBDLFNBQVMsMkRBQTJELFNBQVMscUNBQXFDLFNBQVMsOEJBQThCLFNBQVMsNkJBQTZCLFNBQVMsb0NBQW9DLFNBQVMsMkJBQTJCLFNBQVMsa0NBQWtDLFNBQVMsK0JBQStCLFNBQVMsNEJBQTRCLFNBQVMsOEJBQThCLFNBQVMsaUNBQWlDLFNBQVMsK0JBQStCLFNBQVMsNkJBQTZCLFNBQVMsNkJBQTZCLFNBQVMsMEJBQTBCLFNBQVMsMkJBQTJCLFNBQVMsK0JBQStCLFNBQVMsbUNBQW1DLFNBQVMsMEJBQTBCLFNBQVMsK0JBQStCLFNBQVMsaUNBQWlDLFNBQVMsZ0NBQWdDLFNBQVMsbUNBQW1DLFNBQVMsbUNBQW1DLFNBQVMsZ0NBQWdDLFNBQVMsaUNBQWlDLFNBQVMsb0NBQW9DLFNBQVMsa0NBQWtDLFNBQVMsa0NBQWtDLFNBQVMsK0JBQStCLFNBQVMsb0NBQW9DLFNBQVMscUNBQXFDLFNBQVMsK0JBQStCLFNBQVMsaUNBQWlDLFNBQVMsZ0NBQWdDLFNBQVMsNEJBQTRCLFNBQVMsc0NBQXNDLFNBQVMsK0JBQStCLFNBQVMsb0NBQW9DLFNBQVMsMEJBQTBCLGdCQUFnQixrQ0FBa0MsVUFBVSxxQ0FBcUMsU0FBUyxzQ0FBc0MsVUFBVSw4QkFBOEIsVUFBVSxpQ0FBaUMsVUFBVSwrQkFBK0IsU0FBUyxtQ0FBbUMsVUFBVSx1Q0FBdUMsVUFBVSxrQ0FBa0MsVUFBVSxnQ0FBZ0MsVUFBVSxrQ0FBa0MsVUFBVSxpQ0FBaUMsVUFBVSxrQ0FBa0MsVUFBVSxzQ0FBc0MsVUFBVSwyQ0FBMkMsVUFBVSxvQ0FBb0MsVUFBVSxFQUFFLGlCQUFpQixhQUFhLG1CQUFtQixXQUFXLDBDQUEwQyxnQ0FBZ0MsMkRBQTJELCtDQUErQyxxQ0FBcUMseUJBQXlCLDhCQUE4QixrQkFBa0IsNkJBQTZCLGlCQUFpQixvQ0FBb0Msd0JBQXdCLDJCQUEyQixlQUFlLGtDQUFrQyxzQkFBc0IsK0JBQStCLG1CQUFtQixrQ0FBa0Msc0JBQXNCLHFDQUFxQyx5QkFBeUIsNEJBQTRCLGdCQUFnQiw4QkFBOEIsa0JBQWtCLGlDQUFpQyxxQkFBcUIsK0JBQStCLG1CQUFtQiw2QkFBNkIsaUJBQWlCLDZCQUE2QixpQkFBaUIsMEJBQTBCLGNBQWMsMkJBQTJCLGVBQWUsK0JBQStCLG1CQUFtQixtQ0FBbUMsdUJBQXVCLDBCQUEwQixjQUFjLCtCQUErQixtQkFBbUIsaUNBQWlDLHFCQUFxQixnQ0FBZ0Msb0JBQW9CLG1DQUFtQyx1QkFBdUIsbUNBQW1DLHVCQUF1QixnQ0FBZ0Msb0JBQW9CLGlDQUFpQyxxQkFBcUIsb0NBQW9DLHdCQUF3QixrQ0FBa0Msc0JBQXNCLGtDQUFrQyxzQkFBc0IsK0JBQStCLG1CQUFtQixvQ0FBb0Msd0JBQXdCLHFDQUFxQyx5QkFBeUIsK0JBQStCLG1CQUFtQixpQ0FBaUMscUJBQXFCLGdDQUFnQyxvQkFBb0IsNEJBQTRCLGdCQUFnQixzQ0FBc0MsMEJBQTBCLCtCQUErQixtQkFBbUIsb0NBQW9DLHdCQUF3QiwwQkFBMEIsY0FBYyxzQ0FBc0MsMEJBQTBCLDhCQUE4QixrQkFBa0IsaUNBQWlDLHFCQUFxQiwrQkFBK0IsbUJBQW1CLG1DQUFtQyx1QkFBdUIsdUNBQXVDLDJCQUEyQixrQ0FBa0Msc0JBQXNCLGdDQUFnQyxvQkFBb0Isa0NBQWtDLHNCQUFzQixpQ0FBaUMscUJBQXFCLGtDQUFrQyxzQkFBc0Isc0NBQXNDLDBCQUEwQiwyQ0FBMkMsK0JBQStCLG9DQUFvQyx3QkFBd0IsRUFBRSw0REFBNEQsb0NBQW9DLGtCQUFrQixpQkFBaUIsZUFBZSxNQUFNLGFBQWEsWUFBWSxHQUFHLElBQUksbUNBQW1DLFNBQVMsb0NBQW9DLFlBQVksR0FBRyxFOzs7Ozs7Ozs7Ozs7O0FDZnh3aFE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixZQUFZO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLDBCQUEwQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLE9BQU87QUFDcEIsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsaUJBQWlCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVCQUF1QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsbUJBQW1CLDhCQUE4QjtBQUNqRDtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixXQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsRUFBRTtBQUNmLGFBQWEsS0FBSztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUEsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLEtBQUs7QUFDbEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixrQ0FBa0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsZ0RBQWdEO0FBQ25FO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnTkFBZ047QUFDaFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixtQ0FBbUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGtGQUFrRjtBQUNsRjtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FB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Q0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsc0ZBQXNGO0FBQ3pGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRSwwSEFBMEg7O0FBRWxKLENBQUMsRUFBRSxzSEFBc0g7QUFDekg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSx3TkFBd047QUFDM047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMscUlBQXFJOztBQUV0SSxDQUFDLEdBQUc7QUFDSjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsV0FBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxFQUFFLDBRQUEwUTtBQUM3UTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsZ0ZBQWdGO0FBQ25GO0FBQ0E7O0FBRUEsQ0FBQyxxSUFBcUk7O0FBRXRJLENBQUMsR0FBRztBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBLENBQUMscUlBQXFJOztBQUV0SSxDQUFDLEdBQUc7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsd0dBQXdHO0FBQzNHOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLENBQUMsRUFBRSxxRkFBcUY7QUFDeEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRTs7QUFFeEIsQ0FBQyxFQUFFLCtJQUErSTtBQUNsSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxxSUFBcUk7O0FBRXRJLENBQUMsRUFBRSxtRkFBbUY7QUFDdEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxxRUFBcUU7QUFDeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLGFBQWEsUUFBUSxFQUFFOztBQUV4QixDQUFDLEVBQUUsb0NBQW9DO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlGQUF5Rjs7QUFFekY7O0FBRUE7QUFDQTs7QUFFQSxDQUFDLHFJQUFxSTs7QUFFdEksQ0FBQyxFQUFFLHFEQUFxRDtBQUN4RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxvQ0FBb0M7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRTs7QUFFeEIsQ0FBQyxFQUFFLG9GQUFvRjtBQUN2RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxxREFBcUQ7QUFDeEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDLGFBQWEsUUFBUSxFQUFFLDBIQUEwSDs7QUFFbEosQ0FBQyxFQUFFLHlHQUF5RztBQUM1RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFxRCxtQkFBbUIsV0FBVztBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsa0lBQWtJO0FBQ3JJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLEVBQUU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxvQ0FBb0M7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsd0RBQXdEO0FBQzNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRSwwSEFBMEg7O0FBRWxKLENBQUMsRUFBRSx5R0FBeUc7QUFDNUc7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsaUNBQWlDO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQ0FBZ0M7QUFDaEMsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLENBQUMsRUFBRSxXQUFXO0FBQ2Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDLHFJQUFxSTs7QUFFdEksQ0FBQyxFQUFFLGNBQWM7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxNQUFNO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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Q0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0YsT0FBTztBQUM3RjtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLE9BQU87QUFDOUY7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQTJELDZCQUE2QixFQUFFO0FBQzFHO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwSkEseUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiJ3VzZSBzdHJpY3QnXG5cbm1vZHVsZS5leHBvcnRzID0gYW5zaUhUTUxcblxuLy8gUmVmZXJlbmNlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvYW5zaS1yZWdleFxudmFyIF9yZWdBTlNJID0gLyg/Oig/OlxcdTAwMWJcXFspfFxcdTAwOWIpKD86KD86WzAtOV17MSwzfSk/KD86KD86O1swLTldezAsM30pKik/W0EtTXxmLW1dKXxcXHUwMDFiW0EtTV0vXG5cbnZhciBfZGVmQ29sb3JzID0ge1xuICByZXNldDogWydmZmYnLCAnMDAwJ10sIC8vIFtGT1JFR1JPVURfQ09MT1IsIEJBQ0tHUk9VTkRfQ09MT1JdXG4gIGJsYWNrOiAnMDAwJyxcbiAgcmVkOiAnZmYwMDAwJyxcbiAgZ3JlZW46ICcyMDk4MDUnLFxuICB5ZWxsb3c6ICdlOGJmMDMnLFxuICBibHVlOiAnMDAwMGZmJyxcbiAgbWFnZW50YTogJ2ZmMDBmZicsXG4gIGN5YW46ICcwMGZmZWUnLFxuICBsaWdodGdyZXk6ICdmMGYwZjAnLFxuICBkYXJrZ3JleTogJzg4OCdcbn1cbnZhciBfc3R5bGVzID0ge1xuICAzMDogJ2JsYWNrJyxcbiAgMzE6ICdyZWQnLFxuICAzMjogJ2dyZWVuJyxcbiAgMzM6ICd5ZWxsb3cnLFxuICAzNDogJ2JsdWUnLFxuICAzNTogJ21hZ2VudGEnLFxuICAzNjogJ2N5YW4nLFxuICAzNzogJ2xpZ2h0Z3JleSdcbn1cbnZhciBfb3BlblRhZ3MgPSB7XG4gICcxJzogJ2ZvbnQtd2VpZ2h0OmJvbGQnLCAvLyBib2xkXG4gICcyJzogJ29wYWNpdHk6MC41JywgLy8gZGltXG4gICczJzogJzxpPicsIC8vIGl0YWxpY1xuICAnNCc6ICc8dT4nLCAvLyB1bmRlcnNjb3JlXG4gICc4JzogJ2Rpc3BsYXk6bm9uZScsIC8vIGhpZGRlblxuICAnOSc6ICc8ZGVsPicgLy8gZGVsZXRlXG59XG52YXIgX2Nsb3NlVGFncyA9IHtcbiAgJzIzJzogJzwvaT4nLCAvLyByZXNldCBpdGFsaWNcbiAgJzI0JzogJzwvdT4nLCAvLyByZXNldCB1bmRlcnNjb3JlXG4gICcyOSc6ICc8L2RlbD4nIC8vIHJlc2V0IGRlbGV0ZVxufVxuXG47WzAsIDIxLCAyMiwgMjcsIDI4LCAzOSwgNDldLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgX2Nsb3NlVGFnc1tuXSA9ICc8L3NwYW4+J1xufSlcblxuLyoqXG4gKiBDb252ZXJ0cyB0ZXh0IHdpdGggQU5TSSBjb2xvciBjb2RlcyB0byBIVE1MIG1hcmt1cC5cbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuZnVuY3Rpb24gYW5zaUhUTUwgKHRleHQpIHtcbiAgLy8gUmV0dXJucyB0aGUgdGV4dCBpZiB0aGUgc3RyaW5nIGhhcyBubyBBTlNJIGVzY2FwZSBjb2RlLlxuICBpZiAoIV9yZWdBTlNJLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gdGV4dFxuICB9XG5cbiAgLy8gQ2FjaGUgb3BlbmVkIHNlcXVlbmNlLlxuICB2YXIgYW5zaUNvZGVzID0gW11cbiAgLy8gUmVwbGFjZSB3aXRoIG1hcmt1cC5cbiAgdmFyIHJldCA9IHRleHQucmVwbGFjZSgvXFwwMzNcXFsoXFxkKykqbS9nLCBmdW5jdGlvbiAobWF0Y2gsIHNlcSkge1xuICAgIHZhciBvdCA9IF9vcGVuVGFnc1tzZXFdXG4gICAgaWYgKG90KSB7XG4gICAgICAvLyBJZiBjdXJyZW50IHNlcXVlbmNlIGhhcyBiZWVuIG9wZW5lZCwgY2xvc2UgaXQuXG4gICAgICBpZiAoISF+YW5zaUNvZGVzLmluZGV4T2Yoc2VxKSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWV4dHJhLWJvb2xlYW4tY2FzdFxuICAgICAgICBhbnNpQ29kZXMucG9wKClcbiAgICAgICAgcmV0dXJuICc8L3NwYW4+J1xuICAgICAgfVxuICAgICAgLy8gT3BlbiB0YWcuXG4gICAgICBhbnNpQ29kZXMucHVzaChzZXEpXG4gICAgICByZXR1cm4gb3RbMF0gPT09ICc8JyA/IG90IDogJzxzcGFuIHN0eWxlPVwiJyArIG90ICsgJztcIj4nXG4gICAgfVxuXG4gICAgdmFyIGN0ID0gX2Nsb3NlVGFnc1tzZXFdXG4gICAgaWYgKGN0KSB7XG4gICAgICAvLyBQb3Agc2VxdWVuY2VcbiAgICAgIGFuc2lDb2Rlcy5wb3AoKVxuICAgICAgcmV0dXJuIGN0XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9KVxuXG4gIC8vIE1ha2Ugc3VyZSB0YWdzIGFyZSBjbG9zZWQuXG4gIHZhciBsID0gYW5zaUNvZGVzLmxlbmd0aFxuICA7KGwgPiAwKSAmJiAocmV0ICs9IEFycmF5KGwgKyAxKS5qb2luKCc8L3NwYW4+JykpXG5cbiAgcmV0dXJuIHJldFxufVxuXG4vKipcbiAqIEN1c3RvbWl6ZSBjb2xvcnMuXG4gKiBAcGFyYW0ge09iamVjdH0gY29sb3JzIHJlZmVyZW5jZSB0byBfZGVmQ29sb3JzXG4gKi9cbmFuc2lIVE1MLnNldENvbG9ycyA9IGZ1bmN0aW9uIChjb2xvcnMpIHtcbiAgaWYgKHR5cGVvZiBjb2xvcnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgY29sb3JzYCBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBPYmplY3QuJylcbiAgfVxuXG4gIHZhciBfZmluYWxDb2xvcnMgPSB7fVxuICBmb3IgKHZhciBrZXkgaW4gX2RlZkNvbG9ycykge1xuICAgIHZhciBoZXggPSBjb2xvcnMuaGFzT3duUHJvcGVydHkoa2V5KSA/IGNvbG9yc1trZXldIDogbnVsbFxuICAgIGlmICghaGV4KSB7XG4gICAgICBfZmluYWxDb2xvcnNba2V5XSA9IF9kZWZDb2xvcnNba2V5XVxuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaWYgKCdyZXNldCcgPT09IGtleSkge1xuICAgICAgaWYgKHR5cGVvZiBoZXggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGhleCA9IFtoZXhdXG4gICAgICB9XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaGV4KSB8fCBoZXgubGVuZ3RoID09PSAwIHx8IGhleC5zb21lKGZ1bmN0aW9uIChoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgaCAhPT0gJ3N0cmluZydcbiAgICAgIH0pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHZhbHVlIG9mIGAnICsga2V5ICsgJ2AgcHJvcGVydHkgbXVzdCBiZSBhbiBBcnJheSBhbmQgZWFjaCBpdGVtIGNvdWxkIG9ubHkgYmUgYSBoZXggc3RyaW5nLCBlLmcuOiBGRjAwMDAnKVxuICAgICAgfVxuICAgICAgdmFyIGRlZkhleENvbG9yID0gX2RlZkNvbG9yc1trZXldXG4gICAgICBpZiAoIWhleFswXSkge1xuICAgICAgICBoZXhbMF0gPSBkZWZIZXhDb2xvclswXVxuICAgICAgfVxuICAgICAgaWYgKGhleC5sZW5ndGggPT09IDEgfHwgIWhleFsxXSkge1xuICAgICAgICBoZXggPSBbaGV4WzBdXVxuICAgICAgICBoZXgucHVzaChkZWZIZXhDb2xvclsxXSlcbiAgICAgIH1cblxuICAgICAgaGV4ID0gaGV4LnNsaWNlKDAsIDIpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaGV4ICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdmFsdWUgb2YgYCcgKyBrZXkgKyAnYCBwcm9wZXJ0eSBtdXN0IGJlIGEgaGV4IHN0cmluZywgZS5nLjogRkYwMDAwJylcbiAgICB9XG4gICAgX2ZpbmFsQ29sb3JzW2tleV0gPSBoZXhcbiAgfVxuICBfc2V0VGFncyhfZmluYWxDb2xvcnMpXG59XG5cbi8qKlxuICogUmVzZXQgY29sb3JzLlxuICovXG5hbnNpSFRNTC5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgX3NldFRhZ3MoX2RlZkNvbG9ycylcbn1cblxuLyoqXG4gKiBFeHBvc2UgdGFncywgaW5jbHVkaW5nIG9wZW4gYW5kIGNsb3NlLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuYW5zaUhUTUwudGFncyA9IHt9XG5cbmlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFuc2lIVE1MLnRhZ3MsICdvcGVuJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX29wZW5UYWdzIH1cbiAgfSlcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFuc2lIVE1MLnRhZ3MsICdjbG9zZScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9jbG9zZVRhZ3MgfVxuICB9KVxufSBlbHNlIHtcbiAgYW5zaUhUTUwudGFncy5vcGVuID0gX29wZW5UYWdzXG4gIGFuc2lIVE1MLnRhZ3MuY2xvc2UgPSBfY2xvc2VUYWdzXG59XG5cbmZ1bmN0aW9uIF9zZXRUYWdzIChjb2xvcnMpIHtcbiAgLy8gcmVzZXQgYWxsXG4gIF9vcGVuVGFnc1snMCddID0gJ2ZvbnQtd2VpZ2h0Om5vcm1hbDtvcGFjaXR5OjE7Y29sb3I6IycgKyBjb2xvcnMucmVzZXRbMF0gKyAnO2JhY2tncm91bmQ6IycgKyBjb2xvcnMucmVzZXRbMV1cbiAgLy8gaW52ZXJzZVxuICBfb3BlblRhZ3NbJzcnXSA9ICdjb2xvcjojJyArIGNvbG9ycy5yZXNldFsxXSArICc7YmFja2dyb3VuZDojJyArIGNvbG9ycy5yZXNldFswXVxuICAvLyBkYXJrIGdyZXlcbiAgX29wZW5UYWdzWyc5MCddID0gJ2NvbG9yOiMnICsgY29sb3JzLmRhcmtncmV5XG5cbiAgZm9yICh2YXIgY29kZSBpbiBfc3R5bGVzKSB7XG4gICAgdmFyIGNvbG9yID0gX3N0eWxlc1tjb2RlXVxuICAgIHZhciBvcmlDb2xvciA9IGNvbG9yc1tjb2xvcl0gfHwgJzAwMCdcbiAgICBfb3BlblRhZ3NbY29kZV0gPSAnY29sb3I6IycgKyBvcmlDb2xvclxuICAgIGNvZGUgPSBwYXJzZUludChjb2RlKVxuICAgIF9vcGVuVGFnc1soY29kZSArIDEwKS50b1N0cmluZygpXSA9ICdiYWNrZ3JvdW5kOiMnICsgb3JpQ29sb3JcbiAgfVxufVxuXG5hbnNpSFRNTC5yZXNldCgpXG4iLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJiYWJ5bG9uanNcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJiYWJ5bG9uanMtZ3VpXCIsW1wiYmFieWxvbmpzXCJdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHNbXCJiYWJ5bG9uanMtZ3VpXCJdPWUocmVxdWlyZShcImJhYnlsb25qc1wiKSk6KHQuQkFCWUxPTj10LkJBQllMT058fHt9LHQuQkFCWUxPTi5HVUk9ZSh0LkJBQllMT04pKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDp0aGlzLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBpKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgbj1lW3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtyXS5jYWxsKG4uZXhwb3J0cyxuLG4uZXhwb3J0cyxpKSxuLmw9ITAsbi5leHBvcnRzfXJldHVybiBpLm09dCxpLmM9ZSxpLmQ9ZnVuY3Rpb24odCxlLHIpe2kubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtlbnVtZXJhYmxlOiEwLGdldDpyfSl9LGkucj1mdW5jdGlvbih0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxpLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PWkodCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIHI9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihpLnIociksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpaS5kKHIsbixmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLG4pKTtyZXR1cm4gcn0saS5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiBpLmQoZSxcImFcIixlKSxlfSxpLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGkucD1cIlwiLGkoaS5zPTIpfShbZnVuY3Rpb24oZSxpKXtlLmV4cG9ydHM9dH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTtcbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cblxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xudmFyIHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4ocj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX0pKHQsZSl9O2Z1bmN0aW9uIG4odCxlKXtmdW5jdGlvbiBpKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fXIodCxlKSx0LnByb3RvdHlwZT1udWxsPT09ZT9PYmplY3QuY3JlYXRlKGUpOihpLnByb3RvdHlwZT1lLnByb3RvdHlwZSxuZXcgaSl9ZnVuY3Rpb24gbyh0LGUsaSxyKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/ZTpudWxsPT09cj9yPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxpKTpyO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZSh0LGUsaSxyKTtlbHNlIGZvcih2YXIgYT10Lmxlbmd0aC0xO2E+PTA7YS0tKShuPXRbYV0pJiYocz0obzwzP24ocyk6bz4zP24oZSxpLHMpOm4oZSxpKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkscyksc312YXIgcz1pKDApLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsaSxyKXt2b2lkIDA9PT1pJiYoaT10LlVOSVRNT0RFX1BJWEVMKSx2b2lkIDA9PT1yJiYocj0hMCksdGhpcy51bml0PWksdGhpcy5uZWdhdGl2ZVZhbHVlQWxsb3dlZD1yLHRoaXMuX3ZhbHVlPTEsdGhpcy5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITEsdGhpcy5fdmFsdWU9ZSx0aGlzLl9vcmlnaW5hbFVuaXQ9aX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNQZXJjZW50YWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaXQ9PT10LlVOSVRNT0RFX1BFUkNFTlRBR0V9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNQaXhlbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bml0PT09dC5VTklUTU9ERV9QSVhFTH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJpbnRlcm5hbFZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5nZXRWYWx1ZUluUGl4ZWw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5pc1BpeGVsP3RoaXMuZ2V0VmFsdWUodCk6dGhpcy5nZXRWYWx1ZSh0KSplfSx0LnByb3RvdHlwZS51cGRhdGVJblBsYWNlPWZ1bmN0aW9uKGUsaSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPXQuVU5JVE1PREVfUElYRUwpLHRoaXMuX3ZhbHVlPWUsdGhpcy51bml0PWksdGhpc30sdC5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oZSl7aWYoZSYmIXRoaXMuaWdub3JlQWRhcHRpdmVTY2FsaW5nJiZ0aGlzLnVuaXQhPT10LlVOSVRNT0RFX1BFUkNFTlRBR0Upe3ZhciBpPTAscj0wO2lmKGUuaWRlYWxXaWR0aCYmKGk9dGhpcy5fdmFsdWUqZS5nZXRTaXplKCkud2lkdGgvZS5pZGVhbFdpZHRoKSxlLmlkZWFsSGVpZ2h0JiYocj10aGlzLl92YWx1ZSplLmdldFNpemUoKS5oZWlnaHQvZS5pZGVhbEhlaWdodCksZS51c2VTbWFsbGVzdElkZWFsJiZlLmlkZWFsV2lkdGgmJmUuaWRlYWxIZWlnaHQpcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoPHdpbmRvdy5pbm5lckhlaWdodD9pOnI7aWYoZS5pZGVhbFdpZHRoKXJldHVybiBpO2lmKGUuaWRlYWxIZWlnaHQpcmV0dXJuIHJ9cmV0dXJuIHRoaXMuX3ZhbHVlfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlLGkpe3N3aXRjaCh0aGlzLnVuaXQpe2Nhc2UgdC5VTklUTU9ERV9QRVJDRU5UQUdFOnZhciByPTEwMCp0aGlzLmdldFZhbHVlKGUpO3JldHVybihpP3IudG9GaXhlZChpKTpyKStcIiVcIjtjYXNlIHQuVU5JVE1PREVfUElYRUw6dmFyIG49dGhpcy5nZXRWYWx1ZShlKTtyZXR1cm4oaT9uLnRvRml4ZWQoaSk6bikrXCJweFwifXJldHVybiB0aGlzLnVuaXQudG9TdHJpbmcoKX0sdC5wcm90b3R5cGUuZnJvbVN0cmluZz1mdW5jdGlvbihlKXt2YXIgaT10Ll9SZWdleC5leGVjKGUudG9TdHJpbmcoKSk7aWYoIWl8fDA9PT1pLmxlbmd0aClyZXR1cm4hMTt2YXIgcj1wYXJzZUZsb2F0KGlbMV0pLG49dGhpcy5fb3JpZ2luYWxVbml0O2lmKHRoaXMubmVnYXRpdmVWYWx1ZUFsbG93ZWR8fHI8MCYmKHI9MCksND09PWkubGVuZ3RoKXN3aXRjaChpWzNdKXtjYXNlXCJweFwiOm49dC5VTklUTU9ERV9QSVhFTDticmVhaztjYXNlXCIlXCI6bj10LlVOSVRNT0RFX1BFUkNFTlRBR0Usci89MTAwfXJldHVybihyIT09dGhpcy5fdmFsdWV8fG4hPT10aGlzLnVuaXQpJiYodGhpcy5fdmFsdWU9cix0aGlzLnVuaXQ9biwhMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiVU5JVE1PREVfUEVSQ0VOVEFHRVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fVU5JVE1PREVfUEVSQ0VOVEFHRX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIlVOSVRNT0RFX1BJWEVMXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9VTklUTU9ERV9QSVhFTH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0Ll9SZWdleD0vKF4tP1xcZCooXFwuXFxkKyk/KSglfHB4KT8vLHQuX1VOSVRNT0RFX1BFUkNFTlRBR0U9MCx0Ll9VTklUTU9ERV9QSVhFTD0xLHR9KCksaD1bbmV3IHMuVmVjdG9yMigwLDApLG5ldyBzLlZlY3RvcjIoMCwwKSxuZXcgcy5WZWN0b3IyKDAsMCksbmV3IHMuVmVjdG9yMigwLDApXSxsPVtuZXcgcy5WZWN0b3IyKDAsMCksbmV3IHMuVmVjdG9yMigwLDApLG5ldyBzLlZlY3RvcjIoMCwwKSxuZXcgcy5WZWN0b3IyKDAsMCldLHU9bmV3IHMuVmVjdG9yMigwLDApLGM9bmV3IHMuVmVjdG9yMigwLDApLF89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLHIpe3RoaXMubGVmdD10LHRoaXMudG9wPWUsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PXJ9cmV0dXJuIHQucHJvdG90eXBlLmNvcHlGcm9tPWZ1bmN0aW9uKHQpe3RoaXMubGVmdD10LmxlZnQsdGhpcy50b3A9dC50b3AsdGhpcy53aWR0aD10LndpZHRoLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0fSx0LnByb3RvdHlwZS5jb3B5RnJvbUZsb2F0cz1mdW5jdGlvbih0LGUsaSxyKXt0aGlzLmxlZnQ9dCx0aGlzLnRvcD1lLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1yfSx0LkNvbWJpbmVUb1JlZj1mdW5jdGlvbih0LGUsaSl7dmFyIHI9TWF0aC5taW4odC5sZWZ0LGUubGVmdCksbj1NYXRoLm1pbih0LnRvcCxlLnRvcCksbz1NYXRoLm1heCh0LmxlZnQrdC53aWR0aCxlLmxlZnQrZS53aWR0aCkscz1NYXRoLm1heCh0LnRvcCt0LmhlaWdodCxlLnRvcCtlLmhlaWdodCk7aS5sZWZ0PXIsaS50b3A9bixpLndpZHRoPW8tcixpLmhlaWdodD1zLW59LHQucHJvdG90eXBlLnRyYW5zZm9ybVRvUmVmPWZ1bmN0aW9uKHQsZSl7aFswXS5jb3B5RnJvbUZsb2F0cyh0aGlzLmxlZnQsdGhpcy50b3ApLGhbMV0uY29weUZyb21GbG9hdHModGhpcy5sZWZ0K3RoaXMud2lkdGgsdGhpcy50b3ApLGhbMl0uY29weUZyb21GbG9hdHModGhpcy5sZWZ0K3RoaXMud2lkdGgsdGhpcy50b3ArdGhpcy5oZWlnaHQpLGhbM10uY29weUZyb21GbG9hdHModGhpcy5sZWZ0LHRoaXMudG9wK3RoaXMuaGVpZ2h0KSx1LmNvcHlGcm9tRmxvYXRzKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSksYy5jb3B5RnJvbUZsb2F0cygwLDApO2Zvcih2YXIgaT0wO2k8NDtpKyspdC50cmFuc2Zvcm1Db29yZGluYXRlcyhoW2ldLngsaFtpXS55LGxbaV0pLHUueD1NYXRoLmZsb29yKE1hdGgubWluKHUueCxsW2ldLngpKSx1Lnk9TWF0aC5mbG9vcihNYXRoLm1pbih1LnksbFtpXS55KSksYy54PU1hdGguY2VpbChNYXRoLm1heChjLngsbFtpXS54KSksYy55PU1hdGguY2VpbChNYXRoLm1heChjLnksbFtpXS55KSk7ZS5sZWZ0PXUueCxlLnRvcD11LnksZS53aWR0aD1jLngtdS54LGUuaGVpZ2h0PWMueS11Lnl9LHQucHJvdG90eXBlLmlzRXF1YWxzVG89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGVmdD09PXQubGVmdCYmKHRoaXMudG9wPT09dC50b3AmJih0aGlzLndpZHRoPT09dC53aWR0aCYmdGhpcy5oZWlnaHQ9PT10LmhlaWdodCkpfSx0LkVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KDAsMCwwLDApfSx0fSgpLGQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPTApO3ZhciByPXQuY2FsbCh0aGlzLGUueCxlLnkpfHx0aGlzO3JldHVybiByLmJ1dHRvbkluZGV4PWkscn1yZXR1cm4gbihlLHQpLGV9KHMuVmVjdG9yMiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkscixuLG8pe3RoaXMubT1uZXcgRmxvYXQzMkFycmF5KDYpLHRoaXMuZnJvbVZhbHVlcyh0LGUsaSxyLG4sbyl9cmV0dXJuIHQucHJvdG90eXBlLmZyb21WYWx1ZXM9ZnVuY3Rpb24odCxlLGkscixuLG8pe3JldHVybiB0aGlzLm1bMF09dCx0aGlzLm1bMV09ZSx0aGlzLm1bMl09aSx0aGlzLm1bM109cix0aGlzLm1bNF09bix0aGlzLm1bNV09byx0aGlzfSx0LnByb3RvdHlwZS5kZXRlcm1pbmFudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1bMF0qdGhpcy5tWzNdLXRoaXMubVsxXSp0aGlzLm1bMl19LHQucHJvdG90eXBlLmludmVydFRvUmVmPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubVswXSxpPXRoaXMubVsxXSxyPXRoaXMubVsyXSxuPXRoaXMubVszXSxvPXRoaXMubVs0XSxhPXRoaXMubVs1XSxoPXRoaXMuZGV0ZXJtaW5hbnQoKTtpZihoPHMuRXBzaWxvbipzLkVwc2lsb24pcmV0dXJuIHQubVswXT0wLHQubVsxXT0wLHQubVsyXT0wLHQubVszXT0wLHQubVs0XT0wLHQubVs1XT0wLHRoaXM7dmFyIGw9MS9oLHU9ciphLW4qbyxjPWkqby1lKmE7cmV0dXJuIHQubVswXT1uKmwsdC5tWzFdPS1pKmwsdC5tWzJdPS1yKmwsdC5tWzNdPWUqbCx0Lm1bNF09dSpsLHQubVs1XT1jKmwsdGhpc30sdC5wcm90b3R5cGUubXVsdGlwbHlUb1JlZj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubVswXSxyPXRoaXMubVsxXSxuPXRoaXMubVsyXSxvPXRoaXMubVszXSxzPXRoaXMubVs0XSxhPXRoaXMubVs1XSxoPXQubVswXSxsPXQubVsxXSx1PXQubVsyXSxjPXQubVszXSxfPXQubVs0XSxkPXQubVs1XTtyZXR1cm4gZS5tWzBdPWkqaCtyKnUsZS5tWzFdPWkqbCtyKmMsZS5tWzJdPW4qaCtvKnUsZS5tWzNdPW4qbCtvKmMsZS5tWzRdPXMqaCthKnUrXyxlLm1bNV09cypsK2EqYytkLHRoaXN9LHQucHJvdG90eXBlLnRyYW5zZm9ybUNvb3JkaW5hdGVzPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaS54PXQqdGhpcy5tWzBdK2UqdGhpcy5tWzJdK3RoaXMubVs0XSxpLnk9dCp0aGlzLm1bMV0rZSp0aGlzLm1bM10rdGhpcy5tWzVdLHRoaXN9LHQuSWRlbnRpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQoMSwwLDAsMSwwLDApfSx0LlRyYW5zbGF0aW9uVG9SZWY9ZnVuY3Rpb24odCxlLGkpe2kuZnJvbVZhbHVlcygxLDAsMCwxLHQsZSl9LHQuU2NhbGluZ1RvUmVmPWZ1bmN0aW9uKHQsZSxpKXtpLmZyb21WYWx1ZXModCwwLDAsZSwwLDApfSx0LlJvdGF0aW9uVG9SZWY9ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLnNpbih0KSxyPU1hdGguY29zKHQpO2UuZnJvbVZhbHVlcyhyLGksLWksciwwLDApfSx0LkNvbXBvc2VUb1JlZj1mdW5jdGlvbihlLGkscixuLG8scyxhKXt0LlRyYW5zbGF0aW9uVG9SZWYoZSxpLHQuX1RlbXBQcmVUcmFuc2xhdGlvbk1hdHJpeCksdC5TY2FsaW5nVG9SZWYobixvLHQuX1RlbXBTY2FsaW5nTWF0cml4KSx0LlJvdGF0aW9uVG9SZWYocix0Ll9UZW1wUm90YXRpb25NYXRyaXgpLHQuVHJhbnNsYXRpb25Ub1JlZigtZSwtaSx0Ll9UZW1wUG9zdFRyYW5zbGF0aW9uTWF0cml4KSx0Ll9UZW1wUHJlVHJhbnNsYXRpb25NYXRyaXgubXVsdGlwbHlUb1JlZih0Ll9UZW1wU2NhbGluZ01hdHJpeCx0Ll9UZW1wQ29tcG9zZTApLHQuX1RlbXBDb21wb3NlMC5tdWx0aXBseVRvUmVmKHQuX1RlbXBSb3RhdGlvbk1hdHJpeCx0Ll9UZW1wQ29tcG9zZTEpLHM/KHQuX1RlbXBDb21wb3NlMS5tdWx0aXBseVRvUmVmKHQuX1RlbXBQb3N0VHJhbnNsYXRpb25NYXRyaXgsdC5fVGVtcENvbXBvc2UyKSx0Ll9UZW1wQ29tcG9zZTIubXVsdGlwbHlUb1JlZihzLGEpKTp0Ll9UZW1wQ29tcG9zZTEubXVsdGlwbHlUb1JlZih0Ll9UZW1wUG9zdFRyYW5zbGF0aW9uTWF0cml4LGEpfSx0Ll9UZW1wUHJlVHJhbnNsYXRpb25NYXRyaXg9dC5JZGVudGl0eSgpLHQuX1RlbXBQb3N0VHJhbnNsYXRpb25NYXRyaXg9dC5JZGVudGl0eSgpLHQuX1RlbXBSb3RhdGlvbk1hdHJpeD10LklkZW50aXR5KCksdC5fVGVtcFNjYWxpbmdNYXRyaXg9dC5JZGVudGl0eSgpLHQuX1RlbXBDb21wb3NlMD10LklkZW50aXR5KCksdC5fVGVtcENvbXBvc2UxPXQuSWRlbnRpdHkoKSx0Ll9UZW1wQ29tcG9zZTI9dC5JZGVudGl0eSgpLHR9KCkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dGhpcy5uYW1lPWUsdGhpcy5fYWxwaGE9MSx0aGlzLl9hbHBoYVNldD0hMSx0aGlzLl96SW5kZXg9MCx0aGlzLl9jdXJyZW50TWVhc3VyZT1fLkVtcHR5KCksdGhpcy5fZm9udEZhbWlseT1cIkFyaWFsXCIsdGhpcy5fZm9udFN0eWxlPVwiXCIsdGhpcy5fZm9udFdlaWdodD1cIlwiLHRoaXMuX2ZvbnRTaXplPW5ldyBhKDE4LGEuVU5JVE1PREVfUElYRUwsITEpLHRoaXMuX3dpZHRoPW5ldyBhKDEsYS5VTklUTU9ERV9QRVJDRU5UQUdFLCExKSx0aGlzLl9oZWlnaHQ9bmV3IGEoMSxhLlVOSVRNT0RFX1BFUkNFTlRBR0UsITEpLHRoaXMuX2NvbG9yPVwiXCIsdGhpcy5fc3R5bGU9bnVsbCx0aGlzLl9ob3Jpem9udGFsQWxpZ25tZW50PXQuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSLHRoaXMuX3ZlcnRpY2FsQWxpZ25tZW50PXQuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUix0aGlzLl9pc0RpcnR5PSEwLHRoaXMuX3dhc0RpcnR5PSExLHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlPV8uRW1wdHkoKSx0aGlzLl9wcmV2Q3VycmVudE1lYXN1cmVUcmFuc2Zvcm1lZEludG9HbG9iYWxTcGFjZT1fLkVtcHR5KCksdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZT1fLkVtcHR5KCksdGhpcy5fcGFkZGluZ0xlZnQ9bmV3IGEoMCksdGhpcy5fcGFkZGluZ1JpZ2h0PW5ldyBhKDApLHRoaXMuX3BhZGRpbmdUb3A9bmV3IGEoMCksdGhpcy5fcGFkZGluZ0JvdHRvbT1uZXcgYSgwKSx0aGlzLl9sZWZ0PW5ldyBhKDApLHRoaXMuX3RvcD1uZXcgYSgwKSx0aGlzLl9zY2FsZVg9MSx0aGlzLl9zY2FsZVk9MSx0aGlzLl9yb3RhdGlvbj0wLHRoaXMuX3RyYW5zZm9ybUNlbnRlclg9LjUsdGhpcy5fdHJhbnNmb3JtQ2VudGVyWT0uNSx0aGlzLl90cmFuc2Zvcm1NYXRyaXg9Zi5JZGVudGl0eSgpLHRoaXMuX2ludmVydFRyYW5zZm9ybU1hdHJpeD1mLklkZW50aXR5KCksdGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbj1zLlZlY3RvcjIuWmVybygpLHRoaXMuX2lzTWF0cml4RGlydHk9ITAsdGhpcy5faXNWaXNpYmxlPSEwLHRoaXMuX2lzSGlnaGxpZ2h0ZWQ9ITEsdGhpcy5fZm9udFNldD0hMSx0aGlzLl9kdW1teVZlY3RvcjI9cy5WZWN0b3IyLlplcm8oKSx0aGlzLl9kb3duQ291bnQ9MCx0aGlzLl9lbnRlckNvdW50PS0xLHRoaXMuX2RvTm90UmVuZGVyPSExLHRoaXMuX2Rvd25Qb2ludGVySWRzPXt9LHRoaXMuX2lzRW5hYmxlZD0hMCx0aGlzLl9kaXNhYmxlZENvbG9yPVwiIzlhOWE5YVwiLHRoaXMuX2Rpc2FibGVkQ29sb3JJdGVtPVwiIzZhNmE2YVwiLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITEsdGhpcy5fY3VzdG9tRGF0YT17fSx0aGlzLl9pc0NsaXBwZWQ9ITEsdGhpcy5fYXV0b21hdGljU2l6ZT0hMSx0aGlzLm1ldGFkYXRhPW51bGwsdGhpcy5pc0hpdFRlc3RWaXNpYmxlPSEwLHRoaXMuaXNQb2ludGVyQmxvY2tlcj0hMSx0aGlzLmlzRm9jdXNJbnZpc2libGU9ITEsdGhpcy5jbGlwQ2hpbGRyZW49ITAsdGhpcy5jbGlwQ29udGVudD0hMCx0aGlzLnVzZUJpdG1hcENhY2hlPSExLHRoaXMuX3NoYWRvd09mZnNldFg9MCx0aGlzLl9zaGFkb3dPZmZzZXRZPTAsdGhpcy5fc2hhZG93Qmx1cj0wLHRoaXMuX3NoYWRvd0NvbG9yPVwiYmxhY2tcIix0aGlzLmhvdmVyQ3Vyc29yPVwiXCIsdGhpcy5fbGlua09mZnNldFg9bmV3IGEoMCksdGhpcy5fbGlua09mZnNldFk9bmV3IGEoMCksdGhpcy5vbldoZWVsT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckRvd25PYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJVcE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vbkRpcnR5T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25CZWZvcmVEcmF3T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25BZnRlckRyYXdPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5fdG1wTWVhc3VyZUE9bmV3IF8oMCwwLDAsMCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNoYWRvd09mZnNldFhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYWRvd09mZnNldFh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFkb3dPZmZzZXRYIT09dCYmKHRoaXMuX3NoYWRvd09mZnNldFg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzaGFkb3dPZmZzZXRZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFkb3dPZmZzZXRZfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2hhZG93T2Zmc2V0WSE9PXQmJih0aGlzLl9zaGFkb3dPZmZzZXRZPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2hhZG93Qmx1clwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhZG93Qmx1cn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYWRvd0JsdXIhPT10JiYodGhpcy5fc2hhZG93Qmx1cj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNoYWRvd0NvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFkb3dDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYWRvd0NvbG9yIT09dCYmKHRoaXMuX3NoYWRvd0NvbG9yPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidHlwZU5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFR5cGVOYW1lKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFR5cGVOYW1lKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhvc3RcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvc3R9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udE9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udE9mZnNldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRPZmZzZXQ9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJhbHBoYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWxwaGF9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbHBoYSE9PXQmJih0aGlzLl9hbHBoYVNldD0hMCx0aGlzLl9hbHBoYT10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzSGlnaGxpZ2h0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSGlnaGxpZ2h0ZWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pc0hpZ2hsaWdodGVkIT09dCYmKHRoaXMuX2lzSGlnaGxpZ2h0ZWQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzY2FsZVhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlWH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlWCE9PXQmJih0aGlzLl9zY2FsZVg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX21hcmtNYXRyaXhBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNjYWxlWVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGVZfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGVZIT09dCYmKHRoaXMuX3NjYWxlWT10LHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5fbWFya01hdHJpeEFzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicm90YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvdGF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcm90YXRpb24hPT10JiYodGhpcy5fcm90YXRpb249dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX21hcmtNYXRyaXhBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInRyYW5zZm9ybUNlbnRlcllcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybUNlbnRlcll9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90cmFuc2Zvcm1DZW50ZXJZIT09dCYmKHRoaXMuX3RyYW5zZm9ybUNlbnRlclk9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX21hcmtNYXRyaXhBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInRyYW5zZm9ybUNlbnRlclhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zZm9ybUNlbnRlclh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90cmFuc2Zvcm1DZW50ZXJYIT09dCYmKHRoaXMuX3RyYW5zZm9ybUNlbnRlclg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX21hcmtNYXRyaXhBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhvcml6b250YWxBbGlnbm1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvcml6b250YWxBbGlnbm1lbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ob3Jpem9udGFsQWxpZ25tZW50IT09dCYmKHRoaXMuX2hvcml6b250YWxBbGlnbm1lbnQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ2ZXJ0aWNhbEFsaWdubWVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVydGljYWxBbGlnbm1lbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92ZXJ0aWNhbEFsaWdubWVudCE9PXQmJih0aGlzLl92ZXJ0aWNhbEFsaWdubWVudD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fd2lkdGguZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ3aWR0aEluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy53aWR0aD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9oZWlnaHQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJoZWlnaHRJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5oZWlnaHQ9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRGYW1pbHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRTZXQ/dGhpcy5fZm9udEZhbWlseTpcIlwifSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udEZhbWlseSE9PXQmJih0aGlzLl9mb250RmFtaWx5PXQsdGhpcy5fcmVzZXRGb250Q2FjaGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udFN0eWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250U3R5bGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250U3R5bGUhPT10JiYodGhpcy5fZm9udFN0eWxlPXQsdGhpcy5fcmVzZXRGb250Q2FjaGUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udFdlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFdlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRXZWlnaHQhPT10JiYodGhpcy5fZm9udFdlaWdodD10LHRoaXMuX3Jlc2V0Rm9udENhY2hlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInN0eWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHlsZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fc3R5bGUmJih0aGlzLl9zdHlsZS5vbkNoYW5nZWRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9zdHlsZU9ic2VydmVyKSx0aGlzLl9zdHlsZU9ic2VydmVyPW51bGwpLHRoaXMuX3N0eWxlPXQsdGhpcy5fc3R5bGUmJih0aGlzLl9zdHlsZU9ic2VydmVyPXRoaXMuX3N0eWxlLm9uQ2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ZS5fbWFya0FzRGlydHkoKSxlLl9yZXNldEZvbnRDYWNoZSgpfSkpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5fcmVzZXRGb250Q2FjaGUoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJfaXNGb250U2l6ZUluUGVyY2VudGFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFNpemUuaXNQZXJjZW50YWdlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRTaXplSW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc3R5bGU/dGhpcy5fc3R5bGUuX2ZvbnRTaXplOnRoaXMuX2ZvbnRTaXplO3JldHVybiB0LmlzUGl4ZWw/dC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlLmhlaWdodHx8dGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpfSxzZXQ6ZnVuY3Rpb24odCl7aXNOYU4odCl8fCh0aGlzLmZvbnRTaXplPXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmb250U2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFNpemUudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250U2l6ZS50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX2ZvbnRTaXplLmZyb21TdHJpbmcodCkmJih0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX3Jlc2V0Rm9udENhY2hlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbG9yIT09dCYmKHRoaXMuX2NvbG9yPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiekluZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96SW5kZXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLnpJbmRleCE9PXQmJih0aGlzLl96SW5kZXg9dCx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuX3JlT3JkZXJDb250cm9sKHRoaXMpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJub3RSZW5kZXJhYmxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb05vdFJlbmRlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RvTm90UmVuZGVyIT09dCYmKHRoaXMuX2RvTm90UmVuZGVyPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNWaXNpYmxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1Zpc2libGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pc1Zpc2libGUhPT10JiYodGhpcy5faXNWaXNpYmxlPXQsdGhpcy5fbWFya0FzRGlydHkoITApKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJpc0RpcnR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0RpcnR5fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxpbmtlZE1lc2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmtlZE1lc2h9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ0xlZnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdMZWZ0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFkZGluZ0xlZnQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwYWRkaW5nTGVmdEluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nTGVmdC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5wYWRkaW5nTGVmdD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ1JpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nUmlnaHQudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWRkaW5nUmlnaHQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwYWRkaW5nUmlnaHRJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFkZGluZ1JpZ2h0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUud2lkdGgpfSxzZXQ6ZnVuY3Rpb24odCl7aXNOYU4odCl8fCh0aGlzLnBhZGRpbmdSaWdodD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ1RvcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFkZGluZ1RvcC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhZGRpbmdUb3AuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwYWRkaW5nVG9wSW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdUb3AuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpfSxzZXQ6ZnVuY3Rpb24odCl7aXNOYU4odCl8fCh0aGlzLnBhZGRpbmdUb3A9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhZGRpbmdCb3R0b21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdCb3R0b20udG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWRkaW5nQm90dG9tLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ0JvdHRvbUluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nQm90dG9tLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5wYWRkaW5nQm90dG9tPXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZWZ0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGVmdC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxlZnRJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVmdC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5sZWZ0PXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ0b3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvcC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RvcC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInRvcEluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3AuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpfSxzZXQ6ZnVuY3Rpb24odCl7aXNOYU4odCl8fCh0aGlzLnRvcD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibGlua09mZnNldFhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmtPZmZzZXRYLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGlua09mZnNldFguZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsaW5rT2Zmc2V0WEluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5rT2Zmc2V0WC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5saW5rT2Zmc2V0WD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibGlua09mZnNldFlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmtPZmZzZXRZLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGlua09mZnNldFkuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsaW5rT2Zmc2V0WUluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5rT2Zmc2V0WS5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmhlaWdodCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMubGlua09mZnNldFk9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNlbnRlclhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjZW50ZXJZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNFbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0VuYWJsZWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pc0VuYWJsZWQhPT10JiYodGhpcy5faXNFbmFibGVkPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZGlzYWJsZWRDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzYWJsZWRDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc2FibGVkQ29sb3IhPT10JiYodGhpcy5fZGlzYWJsZWRDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRpc2FibGVkQ29sb3JJdGVtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNhYmxlZENvbG9ySXRlbX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc2FibGVkQ29sb3JJdGVtIT09dCYmKHRoaXMuX2Rpc2FibGVkQ29sb3JJdGVtPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJDb250cm9sXCJ9LHQucHJvdG90eXBlLmdldEFzY2VuZGFudE9mQ2xhc3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LmdldENsYXNzTmFtZSgpPT09dD90aGlzLnBhcmVudDp0aGlzLnBhcmVudC5nZXRBc2NlbmRhbnRPZkNsYXNzKHQpOm51bGx9LHQucHJvdG90eXBlLl9yZXNldEZvbnRDYWNoZT1mdW5jdGlvbigpe3RoaXMuX2ZvbnRTZXQ9ITAsdGhpcy5fbWFya0FzRGlydHkoKX0sdC5wcm90b3R5cGUuaXNBc2NlbmRhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnBhcmVudCYmKHRoaXMucGFyZW50PT09dHx8dGhpcy5wYXJlbnQuaXNBc2NlbmRhbnQodCkpfSx0LnByb3RvdHlwZS5nZXRMb2NhbENvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXMuVmVjdG9yMi5aZXJvKCk7cmV0dXJuIHRoaXMuZ2V0TG9jYWxDb29yZGluYXRlc1RvUmVmKHQsZSksZX0sdC5wcm90b3R5cGUuZ2V0TG9jYWxDb29yZGluYXRlc1RvUmVmPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUueD10LngtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCxlLnk9dC55LXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzfSx0LnByb3RvdHlwZS5nZXRQYXJlbnRMb2NhbENvb3JkaW5hdGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXMuVmVjdG9yMi5aZXJvKCk7cmV0dXJuIGUueD10LngtdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5sZWZ0LGUueT10LnktdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS50b3AsZX0sdC5wcm90b3R5cGUubW92ZVRvVmVjdG9yMz1mdW5jdGlvbihlLGkpe2lmKHRoaXMuX2hvc3QmJnRoaXMucGFyZW50PT09dGhpcy5faG9zdC5fcm9vdENvbnRhaW5lcil7dGhpcy5ob3Jpem9udGFsQWxpZ25tZW50PXQuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCx0aGlzLnZlcnRpY2FsQWxpZ25tZW50PXQuVkVSVElDQUxfQUxJR05NRU5UX1RPUDt2YXIgcj10aGlzLl9ob3N0Ll9nZXRHbG9iYWxWaWV3cG9ydChpKSxuPXMuVmVjdG9yMy5Qcm9qZWN0KGUscy5NYXRyaXguSWRlbnRpdHkoKSxpLmdldFRyYW5zZm9ybU1hdHJpeCgpLHIpO3RoaXMuX21vdmVUb1Byb2plY3RlZFBvc2l0aW9uKG4pLG4uejwwfHxuLno+MT90aGlzLm5vdFJlbmRlcmFibGU9ITA6dGhpcy5ub3RSZW5kZXJhYmxlPSExfWVsc2Ugcy5Ub29scy5FcnJvcihcIkNhbm5vdCBtb3ZlIGEgY29udHJvbCB0byBhIHZlY3RvcjMgaWYgdGhlIGNvbnRyb2wgaXMgbm90IGF0IHJvb3QgbGV2ZWxcIil9LHQucHJvdG90eXBlLmdldERlc2NlbmRhbnRzVG9SZWY9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWUmJihlPSExKX0sdC5wcm90b3R5cGUuZ2V0RGVzY2VuZGFudHM9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgQXJyYXk7cmV0dXJuIHRoaXMuZ2V0RGVzY2VuZGFudHNUb1JlZihpLHQsZSksaX0sdC5wcm90b3R5cGUubGlua1dpdGhNZXNoPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9ob3N0fHx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQhPT10aGlzLl9ob3N0Ll9yb290Q29udGFpbmVyKWUmJnMuVG9vbHMuRXJyb3IoXCJDYW5ub3QgbGluayBhIGNvbnRyb2wgdG8gYSBtZXNoIGlmIHRoZSBjb250cm9sIGlzIG5vdCBhdCByb290IGxldmVsXCIpO2Vsc2V7dmFyIGk9dGhpcy5faG9zdC5fbGlua2VkQ29udHJvbHMuaW5kZXhPZih0aGlzKTtpZigtMSE9PWkpcmV0dXJuIHRoaXMuX2xpbmtlZE1lc2g9ZSx2b2lkKGV8fHRoaXMuX2hvc3QuX2xpbmtlZENvbnRyb2xzLnNwbGljZShpLDEpKTtlJiYodGhpcy5ob3Jpem9udGFsQWxpZ25tZW50PXQuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCx0aGlzLnZlcnRpY2FsQWxpZ25tZW50PXQuVkVSVElDQUxfQUxJR05NRU5UX1RPUCx0aGlzLl9saW5rZWRNZXNoPWUsdGhpcy5faG9zdC5fbGlua2VkQ29udHJvbHMucHVzaCh0aGlzKSl9fSx0LnByb3RvdHlwZS5fbW92ZVRvUHJvamVjdGVkUG9zaXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbGVmdC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSxpPXRoaXMuX3RvcC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSxyPXQueCt0aGlzLl9saW5rT2Zmc2V0WC5nZXRWYWx1ZSh0aGlzLl9ob3N0KS10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC8yLG49dC55K3RoaXMuX2xpbmtPZmZzZXRZLmdldFZhbHVlKHRoaXMuX2hvc3QpLXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yO3RoaXMuX2xlZnQuaWdub3JlQWRhcHRpdmVTY2FsaW5nJiZ0aGlzLl90b3AuaWdub3JlQWRhcHRpdmVTY2FsaW5nJiYoTWF0aC5hYnMoci1lKTwuNSYmKHI9ZSksTWF0aC5hYnMobi1pKTwuNSYmKG49aSkpLHRoaXMubGVmdD1yK1wicHhcIix0aGlzLnRvcD1uK1wicHhcIix0aGlzLl9sZWZ0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCx0aGlzLl90b3AuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwLHRoaXMuX21hcmtBc0RpcnR5KCl9LHQucHJvdG90eXBlLl9vZmZzZXRMZWZ0PWZ1bmN0aW9uKHQpe3RoaXMuX2lzRGlydHk9ITAsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9dH0sdC5wcm90b3R5cGUuX29mZnNldFRvcD1mdW5jdGlvbih0KXt0aGlzLl9pc0RpcnR5PSEwLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCs9dH0sdC5wcm90b3R5cGUuX21hcmtNYXRyaXhBc0RpcnR5PWZ1bmN0aW9uKCl7dGhpcy5faXNNYXRyaXhEaXJ0eT0hMCx0aGlzLl9mbGFnRGVzY2VuZGFudHNBc01hdHJpeERpcnR5KCl9LHQucHJvdG90eXBlLl9mbGFnRGVzY2VuZGFudHNBc01hdHJpeERpcnR5PWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5faW50ZXJzZWN0c1JlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRyYW5zZm9ybVRvUmVmKHRoaXMuX3RyYW5zZm9ybU1hdHJpeCx0aGlzLl90bXBNZWFzdXJlQSksISh0aGlzLl90bXBNZWFzdXJlQS5sZWZ0Pj10LmxlZnQrdC53aWR0aCkmJighKHRoaXMuX3RtcE1lYXN1cmVBLnRvcD49dC50b3ArdC5oZWlnaHQpJiYoISh0aGlzLl90bXBNZWFzdXJlQS5sZWZ0K3RoaXMuX3RtcE1lYXN1cmVBLndpZHRoPD10LmxlZnQpJiYhKHRoaXMuX3RtcE1lYXN1cmVBLnRvcCt0aGlzLl90bXBNZWFzdXJlQS5oZWlnaHQ8PXQudG9wKSkpfSx0LnByb3RvdHlwZS5pbnZhbGlkYXRlUmVjdD1mdW5jdGlvbigpe2lmKHRoaXMuX3RyYW5zZm9ybSgpLHRoaXMuaG9zdCYmdGhpcy5ob3N0LnVzZUludmFsaWRhdGVSZWN0T3B0aW1pemF0aW9uKWlmKHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRyYW5zZm9ybVRvUmVmKHRoaXMuX3RyYW5zZm9ybU1hdHJpeCx0aGlzLl90bXBNZWFzdXJlQSksXy5Db21iaW5lVG9SZWYodGhpcy5fdG1wTWVhc3VyZUEsdGhpcy5fcHJldkN1cnJlbnRNZWFzdXJlVHJhbnNmb3JtZWRJbnRvR2xvYmFsU3BhY2UsdGhpcy5fdG1wTWVhc3VyZUEpLHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpe3ZhciB0PXRoaXMuc2hhZG93T2Zmc2V0WCxlPXRoaXMuc2hhZG93T2Zmc2V0WSxpPXRoaXMuc2hhZG93Qmx1cixyPU1hdGgubWluKE1hdGgubWluKHQsMCktMippLDApLG49TWF0aC5tYXgoTWF0aC5tYXgodCwwKSsyKmksMCksbz1NYXRoLm1pbihNYXRoLm1pbihlLDApLTIqaSwwKSxzPU1hdGgubWF4KE1hdGgubWF4KGUsMCkrMippLDApO3RoaXMuaG9zdC5pbnZhbGlkYXRlUmVjdChNYXRoLmZsb29yKHRoaXMuX3RtcE1lYXN1cmVBLmxlZnQrciksTWF0aC5mbG9vcih0aGlzLl90bXBNZWFzdXJlQS50b3ArbyksTWF0aC5jZWlsKHRoaXMuX3RtcE1lYXN1cmVBLmxlZnQrdGhpcy5fdG1wTWVhc3VyZUEud2lkdGgrbiksTWF0aC5jZWlsKHRoaXMuX3RtcE1lYXN1cmVBLnRvcCt0aGlzLl90bXBNZWFzdXJlQS5oZWlnaHQrcykpfWVsc2UgdGhpcy5ob3N0LmludmFsaWRhdGVSZWN0KE1hdGguZmxvb3IodGhpcy5fdG1wTWVhc3VyZUEubGVmdCksTWF0aC5mbG9vcih0aGlzLl90bXBNZWFzdXJlQS50b3ApLE1hdGguY2VpbCh0aGlzLl90bXBNZWFzdXJlQS5sZWZ0K3RoaXMuX3RtcE1lYXN1cmVBLndpZHRoKSxNYXRoLmNlaWwodGhpcy5fdG1wTWVhc3VyZUEudG9wK3RoaXMuX3RtcE1lYXN1cmVBLmhlaWdodCkpfSx0LnByb3RvdHlwZS5fbWFya0FzRGlydHk9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ITEpLCh0aGlzLl9pc1Zpc2libGV8fHQpJiYodGhpcy5faXNEaXJ0eT0hMCx0aGlzLl9ob3N0JiZ0aGlzLl9ob3N0Lm1hcmtBc0RpcnR5KCkpfSx0LnByb3RvdHlwZS5fbWFya0FsbEFzRGlydHk9ZnVuY3Rpb24oKXt0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX2ZvbnQmJnRoaXMuX3ByZXBhcmVGb250KCl9LHQucHJvdG90eXBlLl9saW5rPWZ1bmN0aW9uKHQpe3RoaXMuX2hvc3Q9dCx0aGlzLl9ob3N0JiYodGhpcy51bmlxdWVJZD10aGlzLl9ob3N0LmdldFNjZW5lKCkuZ2V0VW5pcXVlSWQoKSl9LHQucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24odCl7aWYodGhpcy5faXNNYXRyaXhEaXJ0eXx8MSE9PXRoaXMuX3NjYWxlWHx8MSE9PXRoaXMuX3NjYWxlWXx8MCE9PXRoaXMuX3JvdGF0aW9uKXt2YXIgZT10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCp0aGlzLl90cmFuc2Zvcm1DZW50ZXJYK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsaT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQqdGhpcy5fdHJhbnNmb3JtQ2VudGVyWSt0aGlzLl9jdXJyZW50TWVhc3VyZS50b3A7dCYmKHQudHJhbnNsYXRlKGUsaSksdC5yb3RhdGUodGhpcy5fcm90YXRpb24pLHQuc2NhbGUodGhpcy5fc2NhbGVYLHRoaXMuX3NjYWxlWSksdC50cmFuc2xhdGUoLWUsLWkpKSwodGhpcy5faXNNYXRyaXhEaXJ0eXx8dGhpcy5fY2FjaGVkT2Zmc2V0WCE9PWV8fHRoaXMuX2NhY2hlZE9mZnNldFkhPT1pKSYmKHRoaXMuX2NhY2hlZE9mZnNldFg9ZSx0aGlzLl9jYWNoZWRPZmZzZXRZPWksdGhpcy5faXNNYXRyaXhEaXJ0eT0hMSx0aGlzLl9mbGFnRGVzY2VuZGFudHNBc01hdHJpeERpcnR5KCksZi5Db21wb3NlVG9SZWYoLWUsLWksdGhpcy5fcm90YXRpb24sdGhpcy5fc2NhbGVYLHRoaXMuX3NjYWxlWSx0aGlzLnBhcmVudD90aGlzLnBhcmVudC5fdHJhbnNmb3JtTWF0cml4Om51bGwsdGhpcy5fdHJhbnNmb3JtTWF0cml4KSx0aGlzLl90cmFuc2Zvcm1NYXRyaXguaW52ZXJ0VG9SZWYodGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4KSl9fSx0LnByb3RvdHlwZS5fcmVuZGVySGlnaGxpZ2h0PWZ1bmN0aW9uKHQpe3RoaXMuaXNIaWdobGlnaHRlZCYmKHQuc2F2ZSgpLHQuc3Ryb2tlU3R5bGU9XCIjNGFmZmZmXCIsdC5saW5lV2lkdGg9Mix0aGlzLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYyh0KSx0LnJlc3RvcmUoKSl9LHQucHJvdG90eXBlLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYz1mdW5jdGlvbih0KXt0LnN0cm9rZVJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KX0sdC5wcm90b3R5cGUuX2FwcGx5U3RhdGVzPWZ1bmN0aW9uKGUpe3RoaXMuX2lzRm9udFNpemVJblBlcmNlbnRhZ2UmJih0aGlzLl9mb250U2V0PSEwKSx0aGlzLl9mb250U2V0JiYodGhpcy5fcHJlcGFyZUZvbnQoKSx0aGlzLl9mb250U2V0PSExKSx0aGlzLl9mb250JiYoZS5mb250PXRoaXMuX2ZvbnQpLHRoaXMuX2NvbG9yJiYoZS5maWxsU3R5bGU9dGhpcy5fY29sb3IpLHQuQWxsb3dBbHBoYUluaGVyaXRhbmNlP2UuZ2xvYmFsQWxwaGEqPXRoaXMuX2FscGhhOnRoaXMuX2FscGhhU2V0JiYoZS5nbG9iYWxBbHBoYT10aGlzLnBhcmVudD90aGlzLnBhcmVudC5hbHBoYSp0aGlzLl9hbHBoYTp0aGlzLl9hbHBoYSl9LHQucHJvdG90eXBlLl9sYXlvdXQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc0RpcnR5JiYoIXRoaXMuaXNWaXNpYmxlfHx0aGlzLm5vdFJlbmRlcmFibGUpKXJldHVybiExO2lmKHRoaXMuX2lzRGlydHl8fCF0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmlzRXF1YWxzVG8odCkpe3RoaXMuaG9zdC5fbnVtTGF5b3V0Q2FsbHMrKyx0aGlzLl9jdXJyZW50TWVhc3VyZS50cmFuc2Zvcm1Ub1JlZih0aGlzLl90cmFuc2Zvcm1NYXRyaXgsdGhpcy5fcHJldkN1cnJlbnRNZWFzdXJlVHJhbnNmb3JtZWRJbnRvR2xvYmFsU3BhY2UpLGUuc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKGUpO3ZhciBpPTA7ZG97dGhpcy5fcmVidWlsZExheW91dD0hMSx0aGlzLl9wcm9jZXNzTWVhc3VyZXModCxlKSxpKyt9d2hpbGUodGhpcy5fcmVidWlsZExheW91dCYmaTwzKTtpPj0zJiZzLkxvZ2dlci5FcnJvcihcIkxheW91dCBjeWNsZSBkZXRlY3RlZCBpbiBHVUkgKENvbnRyb2wgbmFtZT1cIit0aGlzLm5hbWUrXCIsIHVuaXF1ZUlkPVwiK3RoaXMudW5pcXVlSWQrXCIpXCIpLGUucmVzdG9yZSgpLHRoaXMuaW52YWxpZGF0ZVJlY3QoKSx0aGlzLl9ldmFsdWF0ZUNsaXBwaW5nU3RhdGUodCl9cmV0dXJuIHRoaXMuX3dhc0RpcnR5PXRoaXMuX2lzRGlydHksdGhpcy5faXNEaXJ0eT0hMSwhMH0sdC5wcm90b3R5cGUuX3Byb2Nlc3NNZWFzdXJlcz1mdW5jdGlvbih0LGUpe3RoaXMuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHQpLHRoaXMuX3ByZU1lYXN1cmUodCxlKSx0aGlzLl9tZWFzdXJlKCksdGhpcy5fY29tcHV0ZUFsaWdubWVudCh0LGUpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQ9MHx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcD0wfHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD0wfHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodD0wfHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCx0aGlzLl9hZGRpdGlvbmFsUHJvY2Vzc2luZyh0LGUpLHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuY29weUZyb20odCksdGhpcy5vbkRpcnR5T2JzZXJ2YWJsZS5oYXNPYnNlcnZlcnMoKSYmdGhpcy5vbkRpcnR5T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyl9LHQucHJvdG90eXBlLl9ldmFsdWF0ZUNsaXBwaW5nU3RhdGU9ZnVuY3Rpb24odCl7aWYodGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmNsaXBDaGlsZHJlbil7aWYodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdD50LmxlZnQrdC53aWR0aClyZXR1cm4gdm9pZCh0aGlzLl9pc0NsaXBwZWQ9ITApO2lmKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg8dC5sZWZ0KXJldHVybiB2b2lkKHRoaXMuX2lzQ2xpcHBlZD0hMCk7aWYodGhpcy5fY3VycmVudE1lYXN1cmUudG9wPnQudG9wK3QuaGVpZ2h0KXJldHVybiB2b2lkKHRoaXMuX2lzQ2xpcHBlZD0hMCk7aWYodGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodDx0LnRvcClyZXR1cm4gdm9pZCh0aGlzLl9pc0NsaXBwZWQ9ITApfXRoaXMuX2lzQ2xpcHBlZD0hMX0sdC5wcm90b3R5cGUuX21lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLl93aWR0aC5pc1BpeGVsP3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoPXRoaXMuX3dpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKj10aGlzLl93aWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9oZWlnaHQuaXNQaXhlbD90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ9dGhpcy5faGVpZ2h0LmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCo9dGhpcy5faGVpZ2h0LmdldFZhbHVlKHRoaXMuX2hvc3QpfSx0LnByb3RvdHlwZS5fY29tcHV0ZUFsaWdubWVudD1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLG49dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LG89ZS53aWR0aCxzPWUuaGVpZ2h0LGE9MCxoPTA7c3dpdGNoKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudCl7Y2FzZSB0LkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQ6YT0wO2JyZWFrO2Nhc2UgdC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9SSUdIVDphPW8tcjticmVhaztjYXNlIHQuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSOmE9KG8tcikvMn1zd2l0Y2godGhpcy52ZXJ0aWNhbEFsaWdubWVudCl7Y2FzZSB0LlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1A6aD0wO2JyZWFrO2Nhc2UgdC5WRVJUSUNBTF9BTElHTk1FTlRfQk9UVE9NOmg9cy1uO2JyZWFrO2Nhc2UgdC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSOmg9KHMtbikvMn10aGlzLl9wYWRkaW5nTGVmdC5pc1BpeGVsPyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0Kz10aGlzLl9wYWRkaW5nTGVmdC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC09dGhpcy5fcGFkZGluZ0xlZnQuZ2V0VmFsdWUodGhpcy5faG9zdCkpOih0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0Kz1vKnRoaXMuX3BhZGRpbmdMZWZ0LmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLT1vKnRoaXMuX3BhZGRpbmdMZWZ0LmdldFZhbHVlKHRoaXMuX2hvc3QpKSx0aGlzLl9wYWRkaW5nUmlnaHQuaXNQaXhlbD90aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC09dGhpcy5fcGFkZGluZ1JpZ2h0LmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLT1vKnRoaXMuX3BhZGRpbmdSaWdodC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9wYWRkaW5nVG9wLmlzUGl4ZWw/KHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCs9dGhpcy5fcGFkZGluZ1RvcC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtPXRoaXMuX3BhZGRpbmdUb3AuZ2V0VmFsdWUodGhpcy5faG9zdCkpOih0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArPXMqdGhpcy5fcGFkZGluZ1RvcC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtPXMqdGhpcy5fcGFkZGluZ1RvcC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSksdGhpcy5fcGFkZGluZ0JvdHRvbS5pc1BpeGVsP3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC09dGhpcy5fcGFkZGluZ0JvdHRvbS5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtPXMqdGhpcy5fcGFkZGluZ0JvdHRvbS5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9sZWZ0LmlzUGl4ZWw/dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9dGhpcy5fbGVmdC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0Kz1vKnRoaXMuX2xlZnQuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fdG9wLmlzUGl4ZWw/dGhpcy5fY3VycmVudE1lYXN1cmUudG9wKz10aGlzLl90b3AuZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fY3VycmVudE1lYXN1cmUudG9wKz1zKnRoaXMuX3RvcC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0Kz1hLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCs9aH0sdC5wcm90b3R5cGUuX3ByZU1lYXN1cmU9ZnVuY3Rpb24odCxlKXt9LHQucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbih0LGUpe30sdC5wcm90b3R5cGUuX2NsaXBGb3JDaGlsZHJlbj1mdW5jdGlvbih0KXt9LHQucHJvdG90eXBlLl9jbGlwPWZ1bmN0aW9uKGUsaSl7aWYoZS5iZWdpblBhdGgoKSx0Ll9DbGlwTWVhc3VyZS5jb3B5RnJvbSh0aGlzLl9jdXJyZW50TWVhc3VyZSksaSl7aS50cmFuc2Zvcm1Ub1JlZih0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXgsdGhpcy5fdG1wTWVhc3VyZUEpO3ZhciByPW5ldyBfKDAsMCwwLDApO3IubGVmdD1NYXRoLm1heCh0aGlzLl90bXBNZWFzdXJlQS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQpLHIudG9wPU1hdGgubWF4KHRoaXMuX3RtcE1lYXN1cmVBLnRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApLHIud2lkdGg9TWF0aC5taW4odGhpcy5fdG1wTWVhc3VyZUEubGVmdCt0aGlzLl90bXBNZWFzdXJlQS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKS1yLmxlZnQsci5oZWlnaHQ9TWF0aC5taW4odGhpcy5fdG1wTWVhc3VyZUEudG9wK3RoaXMuX3RtcE1lYXN1cmVBLmhlaWdodCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KS1yLnRvcCx0Ll9DbGlwTWVhc3VyZS5jb3B5RnJvbShyKX1pZih0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKXt2YXIgbj10aGlzLnNoYWRvd09mZnNldFgsbz10aGlzLnNoYWRvd09mZnNldFkscz10aGlzLnNoYWRvd0JsdXIsYT1NYXRoLm1pbihNYXRoLm1pbihuLDApLTIqcywwKSxoPU1hdGgubWF4KE1hdGgubWF4KG4sMCkrMipzLDApLGw9TWF0aC5taW4oTWF0aC5taW4obywwKS0yKnMsMCksdT1NYXRoLm1heChNYXRoLm1heChvLDApKzIqcywwKTtlLnJlY3QodC5fQ2xpcE1lYXN1cmUubGVmdCthLHQuX0NsaXBNZWFzdXJlLnRvcCtsLHQuX0NsaXBNZWFzdXJlLndpZHRoK2gtYSx0Ll9DbGlwTWVhc3VyZS5oZWlnaHQrdS1sKX1lbHNlIGUucmVjdCh0Ll9DbGlwTWVhc3VyZS5sZWZ0LHQuX0NsaXBNZWFzdXJlLnRvcCx0Ll9DbGlwTWVhc3VyZS53aWR0aCx0Ll9DbGlwTWVhc3VyZS5oZWlnaHQpO2UuY2xpcCgpfSx0LnByb3RvdHlwZS5fcmVuZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIXRoaXMuaXNWaXNpYmxlfHx0aGlzLm5vdFJlbmRlcmFibGV8fHRoaXMuX2lzQ2xpcHBlZD8odGhpcy5faXNEaXJ0eT0hMSwhMSk6KHRoaXMuaG9zdC5fbnVtUmVuZGVyQ2FsbHMrKyx0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl90cmFuc2Zvcm0odCksdGhpcy5jbGlwQ29udGVudCYmdGhpcy5fY2xpcCh0LGUpLHRoaXMub25CZWZvcmVEcmF3T2JzZXJ2YWJsZS5oYXNPYnNlcnZlcnMoKSYmdGhpcy5vbkJlZm9yZURyYXdPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0aGlzLnVzZUJpdG1hcENhY2hlJiYhdGhpcy5fd2FzRGlydHkmJnRoaXMuX2NhY2hlRGF0YT90LnB1dEltYWdlRGF0YSh0aGlzLl9jYWNoZURhdGEsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApOnRoaXMuX2RyYXcodCxlKSx0aGlzLnVzZUJpdG1hcENhY2hlJiZ0aGlzLl93YXNEaXJ0eSYmKHRoaXMuX2NhY2hlRGF0YT10LmdldEltYWdlRGF0YSh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKSx0aGlzLl9yZW5kZXJIaWdobGlnaHQodCksdGhpcy5vbkFmdGVyRHJhd09ic2VydmFibGUuaGFzT2JzZXJ2ZXJzKCkmJnRoaXMub25BZnRlckRyYXdPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0LnJlc3RvcmUoKSwhMCl9LHQucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7fSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXgudHJhbnNmb3JtQ29vcmRpbmF0ZXModCxlLHRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24pLHQ9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi54LGU9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi55LCEodDx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KSYmKCEodD50aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKSYmKCEoZTx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApJiYoIShlPnRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpJiYodGhpcy5pc1BvaW50ZXJCbG9ja2VyJiYodGhpcy5faG9zdC5fc2hvdWxkQmxvY2tQb2ludGVyPSEwKSwhMCkpKSl9LHQucHJvdG90eXBlLl9wcm9jZXNzUGlja2luZz1mdW5jdGlvbih0LGUsaSxyLG4sbyxzKXtyZXR1cm4hIXRoaXMuX2lzRW5hYmxlZCYmKCEoIXRoaXMuaXNIaXRUZXN0VmlzaWJsZXx8IXRoaXMuaXNWaXNpYmxlfHx0aGlzLl9kb05vdFJlbmRlcikmJighIXRoaXMuY29udGFpbnModCxlKSYmKHRoaXMuX3Byb2Nlc3NPYnNlcnZhYmxlcyhpLHQsZSxyLG4sbyxzKSwhMCkpKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlLGkpe3RoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGUsLTEsdCx0aGlzKSYmbnVsbCE9dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9vblBvaW50ZXJNb3ZlKHQsZSxpKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlckVudGVyPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5faXNFbmFibGVkJiYoISh0aGlzLl9lbnRlckNvdW50PjApJiYoLTE9PT10aGlzLl9lbnRlckNvdW50JiYodGhpcy5fZW50ZXJDb3VudD0wKSx0aGlzLl9lbnRlckNvdW50KyssdGhpcy5vblBvaW50ZXJFbnRlck9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMsLTEsdCx0aGlzKSYmbnVsbCE9dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9vblBvaW50ZXJFbnRlcih0KSwhMCkpfSx0LnByb3RvdHlwZS5fb25Qb2ludGVyT3V0PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9ITEpLGV8fHRoaXMuX2lzRW5hYmxlZCYmdCE9PXRoaXMpe3RoaXMuX2VudGVyQ291bnQ9MDt2YXIgaT0hMDt0LmlzQXNjZW5kYW50KHRoaXMpfHwoaT10aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMsLTEsdCx0aGlzKSksaSYmbnVsbCE9dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9vblBvaW50ZXJPdXQodCxlKX19LHQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiB0aGlzLl9vblBvaW50ZXJFbnRlcih0aGlzKSwwPT09dGhpcy5fZG93bkNvdW50JiYodGhpcy5fZG93bkNvdW50KyssdGhpcy5fZG93blBvaW50ZXJJZHNbaV09ITAsdGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IGQoZSxyKSwtMSx0LHRoaXMpJiZudWxsIT10aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuX29uUG9pbnRlckRvd24odCxlLGksciksITApfSx0LnByb3RvdHlwZS5fb25Qb2ludGVyVXA9ZnVuY3Rpb24odCxlLGkscixuKXtpZih0aGlzLl9pc0VuYWJsZWQpe3RoaXMuX2Rvd25Db3VudD0wLGRlbGV0ZSB0aGlzLl9kb3duUG9pbnRlcklkc1tpXTt2YXIgbz1uO24mJih0aGlzLl9lbnRlckNvdW50PjB8fC0xPT09dGhpcy5fZW50ZXJDb3VudCkmJihvPXRoaXMub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuZXcgZChlLHIpLC0xLHQsdGhpcykpLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuZXcgZChlLHIpLC0xLHQsdGhpcykmJm51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fb25Qb2ludGVyVXAodCxlLGkscixvKX19LHQucHJvdG90eXBlLl9mb3JjZVBvaW50ZXJVcD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10JiYodD1udWxsKSxudWxsIT09dCl0aGlzLl9vblBvaW50ZXJVcCh0aGlzLHMuVmVjdG9yMi5aZXJvKCksdCwwLCEwKTtlbHNlIGZvcih2YXIgZSBpbiB0aGlzLl9kb3duUG9pbnRlcklkcyl0aGlzLl9vblBvaW50ZXJVcCh0aGlzLHMuVmVjdG9yMi5aZXJvKCksK2UsMCwhMCl9LHQucHJvdG90eXBlLl9vbldoZWVsU2Nyb2xsPWZ1bmN0aW9uKHQsZSl7dGhpcy5faXNFbmFibGVkJiYodGhpcy5vbldoZWVsT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IHMuVmVjdG9yMih0LGUpKSYmbnVsbCE9dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9vbldoZWVsU2Nyb2xsKHQsZSkpfSx0LnByb3RvdHlwZS5fcHJvY2Vzc09ic2VydmFibGVzPWZ1bmN0aW9uKHQsZSxpLHIsbixvLGEpe2lmKCF0aGlzLl9pc0VuYWJsZWQpcmV0dXJuITE7aWYodGhpcy5fZHVtbXlWZWN0b3IyLmNvcHlGcm9tRmxvYXRzKGUsaSksdD09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkUpe3RoaXMuX29uUG9pbnRlck1vdmUodGhpcyx0aGlzLl9kdW1teVZlY3RvcjIscik7dmFyIGg9dGhpcy5faG9zdC5fbGFzdENvbnRyb2xPdmVyW3JdO3JldHVybiBoJiZoIT09dGhpcyYmaC5fb25Qb2ludGVyT3V0KHRoaXMpLGghPT10aGlzJiZ0aGlzLl9vblBvaW50ZXJFbnRlcih0aGlzKSx0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbE92ZXJbcl09dGhpcywhMH1yZXR1cm4gdD09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUkRPV04/KHRoaXMuX29uUG9pbnRlckRvd24odGhpcyx0aGlzLl9kdW1teVZlY3RvcjIscixuKSx0aGlzLl9ob3N0Ll9yZWdpc3Rlckxhc3RDb250cm9sRG93bih0aGlzLHIpLHRoaXMuX2hvc3QuX2xhc3RQaWNrZWRDb250cm9sPXRoaXMsITApOnQ9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJVUD8odGhpcy5faG9zdC5fbGFzdENvbnRyb2xEb3duW3JdJiZ0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25bcl0uX29uUG9pbnRlclVwKHRoaXMsdGhpcy5fZHVtbXlWZWN0b3IyLHIsbiwhMCksZGVsZXRlIHRoaXMuX2hvc3QuX2xhc3RDb250cm9sRG93bltyXSwhMCk6ISh0IT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSV0hFRUx8fCF0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbE92ZXJbcl0pJiYodGhpcy5faG9zdC5fbGFzdENvbnRyb2xPdmVyW3JdLl9vbldoZWVsU2Nyb2xsKG8sYSksITApfSx0LnByb3RvdHlwZS5fcHJlcGFyZUZvbnQ9ZnVuY3Rpb24oKXsodGhpcy5fZm9udHx8dGhpcy5fZm9udFNldCkmJih0aGlzLl9zdHlsZT90aGlzLl9mb250PXRoaXMuX3N0eWxlLmZvbnRTdHlsZStcIiBcIit0aGlzLl9zdHlsZS5mb250V2VpZ2h0K1wiIFwiK3RoaXMuZm9udFNpemVJblBpeGVscytcInB4IFwiK3RoaXMuX3N0eWxlLmZvbnRGYW1pbHk6dGhpcy5fZm9udD10aGlzLl9mb250U3R5bGUrXCIgXCIrdGhpcy5fZm9udFdlaWdodCtcIiBcIit0aGlzLmZvbnRTaXplSW5QaXhlbHMrXCJweCBcIit0aGlzLl9mb250RmFtaWx5LHRoaXMuX2ZvbnRPZmZzZXQ9dC5fR2V0Rm9udE9mZnNldCh0aGlzLl9mb250KSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXsodGhpcy5vbkRpcnR5T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25CZWZvcmVEcmF3T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25BZnRlckRyYXdPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblBvaW50ZXJNb3ZlT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblBvaW50ZXJDbGlja09ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uV2hlZWxPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5fc3R5bGVPYnNlcnZlciYmdGhpcy5fc3R5bGUmJih0aGlzLl9zdHlsZS5vbkNoYW5nZWRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9zdHlsZU9ic2VydmVyKSx0aGlzLl9zdHlsZU9ic2VydmVyPW51bGwpLHRoaXMucGFyZW50JiYodGhpcy5wYXJlbnQucmVtb3ZlQ29udHJvbCh0aGlzKSx0aGlzLnBhcmVudD1udWxsKSx0aGlzLl9ob3N0KSYmKHRoaXMuX2hvc3QuX2xpbmtlZENvbnRyb2xzLmluZGV4T2YodGhpcyk+LTEmJnRoaXMubGlua1dpdGhNZXNoKG51bGwpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJIT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZUXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZUfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiSE9SSVpPTlRBTF9BTElHTk1FTlRfUklHSFRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX0hPUklaT05UQUxfQUxJR05NRU5UX1JJR0hUfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJWRVJUSUNBTF9BTElHTk1FTlRfVE9QXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9WRVJUSUNBTF9BTElHTk1FTlRfVE9QfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiVkVSVElDQUxfQUxJR05NRU5UX0JPVFRPTVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fVkVSVElDQUxfQUxJR05NRU5UX0JPVFRPTX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX1ZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5fR2V0Rm9udE9mZnNldD1mdW5jdGlvbihlKXtpZih0Ll9Gb250SGVpZ2h0U2l6ZXNbZV0pcmV0dXJuIHQuX0ZvbnRIZWlnaHRTaXplc1tlXTt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtpLmlubmVySFRNTD1cIkhnXCIsaS5zdHlsZS5mb250PWU7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIixyLnN0eWxlLndpZHRoPVwiMXB4XCIsci5zdHlsZS5oZWlnaHQ9XCIwcHhcIixyLnN0eWxlLnZlcnRpY2FsQWxpZ249XCJib3R0b21cIjt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uYXBwZW5kQ2hpbGQoaSksbi5hcHBlbmRDaGlsZChyKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pO3ZhciBvPTAscz0wO3RyeXtzPXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLHIuc3R5bGUudmVydGljYWxBbGlnbj1cImJhc2VsaW5lXCIsbz1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcC1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcH1maW5hbGx5e2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobil9dmFyIGE9e2FzY2VudDpvLGhlaWdodDpzLGRlc2NlbnQ6cy1vfTtyZXR1cm4gdC5fRm9udEhlaWdodFNpemVzW2VdPWEsYX0sdC5kcmF3RWxsaXBzZT1mdW5jdGlvbih0LGUsaSxyLG4pe24udHJhbnNsYXRlKHQsZSksbi5zY2FsZShpLHIpLG4uYmVnaW5QYXRoKCksbi5hcmMoMCwwLDEsMCwyKk1hdGguUEkpLG4uY2xvc2VQYXRoKCksbi5zY2FsZSgxL2ksMS9yKSxuLnRyYW5zbGF0ZSgtdCwtZSl9LHQuQWxsb3dBbHBoYUluaGVyaXRhbmNlPSExLHQuX0NsaXBNZWFzdXJlPW5ldyBfKDAsMCwwLDApLHQuX0hPUklaT05UQUxfQUxJR05NRU5UX0xFRlQ9MCx0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9SSUdIVD0xLHQuX0hPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUj0yLHQuX1ZFUlRJQ0FMX0FMSUdOTUVOVF9UT1A9MCx0Ll9WRVJUSUNBTF9BTElHTk1FTlRfQk9UVE9NPTEsdC5fVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUj0yLHQuX0ZvbnRIZWlnaHRTaXplcz17fSx0LkFkZEhlYWRlcj1mdW5jdGlvbigpe30sdH0oKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuQ29udHJvbFwiXT1wO3ZhciBnPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2NoaWxkcmVuPW5ldyBBcnJheSxpLl9tZWFzdXJlRm9yQ2hpbGRyZW49Xy5FbXB0eSgpLGkuX2JhY2tncm91bmQ9XCJcIixpLl9hZGFwdFdpZHRoVG9DaGlsZHJlbj0hMSxpLl9hZGFwdEhlaWdodFRvQ2hpbGRyZW49ITEsaS5sb2dMYXlvdXRDeWNsZUVycm9ycz0hMSxpLm1heExheW91dEN5Y2xlPTMsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFkYXB0SGVpZ2h0VG9DaGlsZHJlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWRhcHRIZWlnaHRUb0NoaWxkcmVufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYWRhcHRIZWlnaHRUb0NoaWxkcmVuIT09dCYmKHRoaXMuX2FkYXB0SGVpZ2h0VG9DaGlsZHJlbj10LHQmJih0aGlzLmhlaWdodD1cIjEwMCVcIiksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWRhcHRXaWR0aFRvQ2hpbGRyZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FkYXB0V2lkdGhUb0NoaWxkcmVufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYWRhcHRXaWR0aFRvQ2hpbGRyZW4hPT10JiYodGhpcy5fYWRhcHRXaWR0aFRvQ2hpbGRyZW49dCx0JiYodGhpcy53aWR0aD1cIjEwMCVcIiksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tncm91bmQhPT10JiYodGhpcy5fYmFja2dyb3VuZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNoaWxkcmVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkNvbnRhaW5lclwifSxlLnByb3RvdHlwZS5fZmxhZ0Rlc2NlbmRhbnRzQXNNYXRyaXhEaXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5jaGlsZHJlbjt0PGUubGVuZ3RoO3QrKyl7ZVt0XS5fbWFya01hdHJpeEFzRGlydHkoKX19LGUucHJvdG90eXBlLmdldENoaWxkQnlOYW1lPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9dGhpcy5jaGlsZHJlbjtlPGkubGVuZ3RoO2UrKyl7dmFyIHI9aVtlXTtpZihyLm5hbWU9PT10KXJldHVybiByfXJldHVybiBudWxsfSxlLnByb3RvdHlwZS5nZXRDaGlsZEJ5VHlwZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wLHI9dGhpcy5jaGlsZHJlbjtpPHIubGVuZ3RoO2krKyl7dmFyIG49cltpXTtpZihuLnR5cGVOYW1lPT09ZSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuY29udGFpbnNDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09dGhpcy5jaGlsZHJlbi5pbmRleE9mKHQpfSxlLnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0Py0xIT09dGhpcy5fY2hpbGRyZW4uaW5kZXhPZih0KT90aGlzOih0Ll9saW5rKHRoaXMuX2hvc3QpLHQuX21hcmtBbGxBc0RpcnR5KCksdGhpcy5fcmVPcmRlckNvbnRyb2wodCksdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzKTp0aGlzfSxlLnByb3RvdHlwZS5jbGVhckNvbnRyb2xzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLmNoaWxkcmVuLnNsaWNlKCk7dDxlLmxlbmd0aDt0Kyspe3ZhciBpPWVbdF07dGhpcy5yZW1vdmVDb250cm9sKGkpfXJldHVybiB0aGlzfSxlLnByb3RvdHlwZS5yZW1vdmVDb250cm9sPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2NoaWxkcmVuLmluZGV4T2YodCk7cmV0dXJuLTEhPT1lJiYodGhpcy5fY2hpbGRyZW4uc3BsaWNlKGUsMSksdC5wYXJlbnQ9bnVsbCksdC5saW5rV2l0aE1lc2gobnVsbCksdGhpcy5faG9zdCYmdGhpcy5faG9zdC5fY2xlYW5Db250cm9sQWZ0ZXJSZW1vdmFsKHQpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpc30sZS5wcm90b3R5cGUuX3JlT3JkZXJDb250cm9sPWZ1bmN0aW9uKHQpe3RoaXMucmVtb3ZlQ29udHJvbCh0KTtmb3IodmFyIGU9ITEsaT0wO2k8dGhpcy5fY2hpbGRyZW4ubGVuZ3RoO2krKylpZih0aGlzLl9jaGlsZHJlbltpXS56SW5kZXg+dC56SW5kZXgpe3RoaXMuX2NoaWxkcmVuLnNwbGljZShpLDAsdCksZT0hMDticmVha31lfHx0aGlzLl9jaGlsZHJlbi5wdXNoKHQpLHQucGFyZW50PXRoaXMsdGhpcy5fbWFya0FzRGlydHkoKX0sZS5wcm90b3R5cGUuX29mZnNldExlZnQ9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuX29mZnNldExlZnQuY2FsbCh0aGlzLGUpO2Zvcih2YXIgaT0wLHI9dGhpcy5fY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3JbaV0uX29mZnNldExlZnQoZSl9fSxlLnByb3RvdHlwZS5fb2Zmc2V0VG9wPWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLl9vZmZzZXRUb3AuY2FsbCh0aGlzLGUpO2Zvcih2YXIgaT0wLHI9dGhpcy5fY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3JbaV0uX29mZnNldFRvcChlKX19LGUucHJvdG90eXBlLl9tYXJrQWxsQXNEaXJ0eT1mdW5jdGlvbigpe3QucHJvdG90eXBlLl9tYXJrQWxsQXNEaXJ0eS5jYWxsKHRoaXMpO2Zvcih2YXIgZT0wO2U8dGhpcy5fY2hpbGRyZW4ubGVuZ3RoO2UrKyl0aGlzLl9jaGlsZHJlbltlXS5fbWFya0FsbEFzRGlydHkoKX0sZS5wcm90b3R5cGUuX2xvY2FsRHJhdz1mdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kJiYodC5zYXZlKCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0LnJlc3RvcmUoKSl9LGUucHJvdG90eXBlLl9saW5rPWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLl9saW5rLmNhbGwodGhpcyxlKTtmb3IodmFyIGk9MCxyPXRoaXMuX2NoaWxkcmVuO2k8ci5sZW5ndGg7aSsrKXtyW2ldLl9saW5rKGUpfX0sZS5wcm90b3R5cGUuX2JlZm9yZUxheW91dD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuX3Byb2Nlc3NNZWFzdXJlcz1mdW5jdGlvbihlLGkpeyF0aGlzLl9pc0RpcnR5JiZ0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmlzRXF1YWxzVG8oZSl8fCh0LnByb3RvdHlwZS5fcHJvY2Vzc01lYXN1cmVzLmNhbGwodGhpcyxlLGkpLHRoaXMuX2V2YWx1YXRlQ2xpcHBpbmdTdGF0ZShlKSl9LGUucHJvdG90eXBlLl9sYXlvdXQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5pc0RpcnR5JiYoIXRoaXMuaXNWaXNpYmxlfHx0aGlzLm5vdFJlbmRlcmFibGUpKXJldHVybiExO3RoaXMuaG9zdC5fbnVtTGF5b3V0Q2FsbHMrKyx0aGlzLl9pc0RpcnR5JiZ0aGlzLl9jdXJyZW50TWVhc3VyZS50cmFuc2Zvcm1Ub1JlZih0aGlzLl90cmFuc2Zvcm1NYXRyaXgsdGhpcy5fcHJldkN1cnJlbnRNZWFzdXJlVHJhbnNmb3JtZWRJbnRvR2xvYmFsU3BhY2UpO3ZhciBpPTA7ZS5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXMoZSksdGhpcy5fYmVmb3JlTGF5b3V0KCk7ZG97dmFyIHI9LTEsbj0tMTtpZih0aGlzLl9yZWJ1aWxkTGF5b3V0PSExLHRoaXMuX3Byb2Nlc3NNZWFzdXJlcyh0LGUpLCF0aGlzLl9pc0NsaXBwZWQpe2Zvcih2YXIgbz0wLGE9dGhpcy5fY2hpbGRyZW47bzxhLmxlbmd0aDtvKyspe3ZhciBoPWFbb107aC5fdGVtcFBhcmVudE1lYXN1cmUuY29weUZyb20odGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuKSxoLl9sYXlvdXQodGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLGUpJiYodGhpcy5hZGFwdFdpZHRoVG9DaGlsZHJlbiYmaC5fd2lkdGguaXNQaXhlbCYmKHI9TWF0aC5tYXgocixoLl9jdXJyZW50TWVhc3VyZS53aWR0aCkpLHRoaXMuYWRhcHRIZWlnaHRUb0NoaWxkcmVuJiZoLl9oZWlnaHQuaXNQaXhlbCYmKG49TWF0aC5tYXgobixoLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKSl9dGhpcy5hZGFwdFdpZHRoVG9DaGlsZHJlbiYmcj49MCYmdGhpcy53aWR0aCE9PXIrXCJweFwiJiYodGhpcy53aWR0aD1yK1wicHhcIix0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKSx0aGlzLmFkYXB0SGVpZ2h0VG9DaGlsZHJlbiYmbj49MCYmdGhpcy5oZWlnaHQhPT1uK1wicHhcIiYmKHRoaXMuaGVpZ2h0PW4rXCJweFwiLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApLHRoaXMuX3Bvc3RNZWFzdXJlKCl9aSsrfXdoaWxlKHRoaXMuX3JlYnVpbGRMYXlvdXQmJmk8dGhpcy5tYXhMYXlvdXRDeWNsZSk7cmV0dXJuIGk+PTMmJnRoaXMubG9nTGF5b3V0Q3ljbGVFcnJvcnMmJnMuTG9nZ2VyLkVycm9yKFwiTGF5b3V0IGN5Y2xlIGRldGVjdGVkIGluIEdVSSAoQ29udGFpbmVyIG5hbWU9XCIrdGhpcy5uYW1lK1wiLCB1bmlxdWVJZD1cIit0aGlzLnVuaXF1ZUlkK1wiKVwiKSxlLnJlc3RvcmUoKSx0aGlzLl9pc0RpcnR5JiYodGhpcy5pbnZhbGlkYXRlUmVjdCgpLHRoaXMuX2lzRGlydHk9ITEpLCEwfSxlLnByb3RvdHlwZS5fcG9zdE1lYXN1cmU9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7dGhpcy5fbG9jYWxEcmF3KHQpLHRoaXMuY2xpcENoaWxkcmVuJiZ0aGlzLl9jbGlwRm9yQ2hpbGRyZW4odCk7Zm9yKHZhciBpPTAscj10aGlzLl9jaGlsZHJlbjtpPHIubGVuZ3RoO2krKyl7dmFyIG49cltpXTtlJiYhbi5faW50ZXJzZWN0c1JlY3QoZSl8fG4uX3JlbmRlcih0LGUpfX0sZS5wcm90b3R5cGUuZ2V0RGVzY2VuZGFudHNUb1JlZj1mdW5jdGlvbih0LGUsaSl7aWYodm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMuY2hpbGRyZW4pZm9yKHZhciByPTA7cjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtyKyspe3ZhciBuPXRoaXMuY2hpbGRyZW5bcl07aSYmIWkobil8fHQucHVzaChuKSxlfHxuLmdldERlc2NlbmRhbnRzVG9SZWYodCwhMSxpKX19LGUucHJvdG90eXBlLl9wcm9jZXNzUGlja2luZz1mdW5jdGlvbihlLGkscixuLG8scyxhKXtpZighdGhpcy5faXNFbmFibGVkfHwhdGhpcy5pc1Zpc2libGV8fHRoaXMubm90UmVuZGVyYWJsZSlyZXR1cm4hMTtpZighdC5wcm90b3R5cGUuY29udGFpbnMuY2FsbCh0aGlzLGUsaSkpcmV0dXJuITE7Zm9yKHZhciBoPXRoaXMuX2NoaWxkcmVuLmxlbmd0aC0xO2g+PTA7aC0tKXt2YXIgbD10aGlzLl9jaGlsZHJlbltoXTtpZihsLl9wcm9jZXNzUGlja2luZyhlLGkscixuLG8scyxhKSlyZXR1cm4gbC5ob3ZlckN1cnNvciYmdGhpcy5faG9zdC5fY2hhbmdlQ3Vyc29yKGwuaG92ZXJDdXJzb3IpLCEwfXJldHVybiEhdGhpcy5pc0hpdFRlc3RWaXNpYmxlJiZ0aGlzLl9wcm9jZXNzT2JzZXJ2YWJsZXMocixlLGksbixvLHMsYSl9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZy5jYWxsKHRoaXMsZSxpKSx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4uY29weUZyb20odGhpcy5fY3VycmVudE1lYXN1cmUpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO2Zvcih2YXIgZT10aGlzLmNoaWxkcmVuLmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuY2hpbGRyZW5bZV0uZGlzcG9zZSgpfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuQ29udGFpbmVyXCJdPWc7dmFyIGIsbT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl90aGlja25lc3M9MSxpLl9jb3JuZXJSYWRpdXM9MCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGhpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aGlja25lc3MhPT10JiYodGhpcy5fdGhpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29ybmVyUmFkaXVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JuZXJSYWRpdXN9LHNldDpmdW5jdGlvbih0KXt0PDAmJih0PTApLHRoaXMuX2Nvcm5lclJhZGl1cyE9PXQmJih0aGlzLl9jb3JuZXJSYWRpdXM9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlJlY3RhbmdsZVwifSxlLnByb3RvdHlwZS5fbG9jYWxEcmF3PWZ1bmN0aW9uKHQpe3Quc2F2ZSgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdGhpcy5fYmFja2dyb3VuZCYmKHQuZmlsbFN0eWxlPXRoaXMuX2JhY2tncm91bmQsdGhpcy5fY29ybmVyUmFkaXVzPyh0aGlzLl9kcmF3Um91bmRlZFJlY3QodCx0aGlzLl90aGlja25lc3MvMiksdC5maWxsKCkpOnQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSksdGhpcy5fdGhpY2tuZXNzJiYoKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHRoaXMuY29sb3ImJih0LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IpLHQubGluZVdpZHRoPXRoaXMuX3RoaWNrbmVzcyx0aGlzLl9jb3JuZXJSYWRpdXM/KHRoaXMuX2RyYXdSb3VuZGVkUmVjdCh0LHRoaXMuX3RoaWNrbmVzcy8yKSx0LnN0cm9rZSgpKTp0LnN0cm9rZVJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl90aGlja25lc3MvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtdGhpcy5fdGhpY2tuZXNzLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl90aGlja25lc3MpKSx0LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nLmNhbGwodGhpcyxlLGkpLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi53aWR0aC09Mip0aGlzLl90aGlja25lc3MsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmhlaWdodC09Mip0aGlzLl90aGlja25lc3MsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmxlZnQrPXRoaXMuX3RoaWNrbmVzcyx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4udG9wKz10aGlzLl90aGlja25lc3N9LGUucHJvdG90eXBlLl9kcmF3Um91bmRlZFJlY3Q9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0wKTt2YXIgaT10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2Uscj10aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArZSxuPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLTIqZSxvPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC0yKmUscz1NYXRoLm1pbihvLzItMixNYXRoLm1pbihuLzItMix0aGlzLl9jb3JuZXJSYWRpdXMpKTt0LmJlZ2luUGF0aCgpLHQubW92ZVRvKGkrcyxyKSx0LmxpbmVUbyhpK24tcyxyKSx0LnF1YWRyYXRpY0N1cnZlVG8oaStuLHIsaStuLHIrcyksdC5saW5lVG8oaStuLHIrby1zKSx0LnF1YWRyYXRpY0N1cnZlVG8oaStuLHIrbyxpK24tcyxyK28pLHQubGluZVRvKGkrcyxyK28pLHQucXVhZHJhdGljQ3VydmVUbyhpLHIrbyxpLHIrby1zKSx0LmxpbmVUbyhpLHIrcyksdC5xdWFkcmF0aWNDdXJ2ZVRvKGkscixpK3MsciksdC5jbG9zZVBhdGgoKX0sZS5wcm90b3R5cGUuX2NsaXBGb3JDaGlsZHJlbj1mdW5jdGlvbih0KXt0aGlzLl9jb3JuZXJSYWRpdXMmJih0aGlzLl9kcmF3Um91bmRlZFJlY3QodCx0aGlzLl90aGlja25lc3MpLHQuY2xpcCgpKX0sZX0oZyk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLlJlY3RhbmdsZVwiXT1tLGZ1bmN0aW9uKHQpe3RbdC5DbGlwPTBdPVwiQ2xpcFwiLHRbdC5Xb3JkV3JhcD0xXT1cIldvcmRXcmFwXCIsdFt0LkVsbGlwc2lzPTJdPVwiRWxsaXBzaXNcIn0oYnx8KGI9e30pKTt2YXIgeT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dm9pZCAwPT09aSYmKGk9XCJcIik7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIubmFtZT1lLHIuX3RleHQ9XCJcIixyLl90ZXh0V3JhcHBpbmc9Yi5DbGlwLHIuX3RleHRIb3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSLHIuX3RleHRWZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsci5fcmVzaXplVG9GaXQ9ITEsci5fbGluZVNwYWNpbmc9bmV3IGEoMCksci5fb3V0bGluZVdpZHRoPTAsci5fb3V0bGluZUNvbG9yPVwid2hpdGVcIixyLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vbkxpbmVzUmVhZHlPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci50ZXh0PWkscn1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImxpbmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZXNpemVUb0ZpdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzaXplVG9GaXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9yZXNpemVUb0ZpdCE9PXQmJih0aGlzLl9yZXNpemVUb0ZpdD10LHRoaXMuX3Jlc2l6ZVRvRml0JiYodGhpcy5fd2lkdGguaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwLHRoaXMuX2hlaWdodC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApLHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRXcmFwcGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dFdyYXBwaW5nfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dFdyYXBwaW5nIT09dCYmKHRoaXMuX3RleHRXcmFwcGluZz0rdCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dCE9PXQmJih0aGlzLl90ZXh0PXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGV4dEhvcml6b250YWxBbGlnbm1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRIb3Jpem9udGFsQWxpZ25tZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dEhvcml6b250YWxBbGlnbm1lbnQhPT10JiYodGhpcy5fdGV4dEhvcml6b250YWxBbGlnbm1lbnQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0VmVydGljYWxBbGlnbm1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRWZXJ0aWNhbEFsaWdubWVudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHRWZXJ0aWNhbEFsaWdubWVudCE9PXQmJih0aGlzLl90ZXh0VmVydGljYWxBbGlnbm1lbnQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsaW5lU3BhY2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZVNwYWNpbmcudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9saW5lU3BhY2luZy5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm91dGxpbmVXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3V0bGluZVdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3V0bGluZVdpZHRoIT09dCYmKHRoaXMuX291dGxpbmVXaWR0aD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm91dGxpbmVDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3V0bGluZUNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3V0bGluZUNvbG9yIT09dCYmKHRoaXMuX291dGxpbmVDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiVGV4dEJsb2NrXCJ9LGUucHJvdG90eXBlLl9wcm9jZXNzTWVhc3VyZXM9ZnVuY3Rpb24oZSxpKXt0aGlzLl9mb250T2Zmc2V0fHwodGhpcy5fZm9udE9mZnNldD1wLl9HZXRGb250T2Zmc2V0KGkuZm9udCkpLHQucHJvdG90eXBlLl9wcm9jZXNzTWVhc3VyZXMuY2FsbCh0aGlzLGUsaSksdGhpcy5fbGluZXM9dGhpcy5fYnJlYWtMaW5lcyh0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxpKSx0aGlzLm9uTGluZXNSZWFkeU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpO2Zvcih2YXIgcj0wLG49MDtuPHRoaXMuX2xpbmVzLmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuX2xpbmVzW25dO28ud2lkdGg+ciYmKHI9by53aWR0aCl9aWYodGhpcy5fcmVzaXplVG9GaXQpe2lmKHRoaXMuX3RleHRXcmFwcGluZz09PWIuQ2xpcCl7dmFyIHM9dGhpcy5wYWRkaW5nTGVmdEluUGl4ZWxzK3RoaXMucGFkZGluZ1JpZ2h0SW5QaXhlbHMrcjtzIT09dGhpcy5fd2lkdGguaW50ZXJuYWxWYWx1ZSYmKHRoaXMuX3dpZHRoLnVwZGF0ZUluUGxhY2UocyxhLlVOSVRNT0RFX1BJWEVMKSx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKX12YXIgaD10aGlzLnBhZGRpbmdUb3BJblBpeGVscyt0aGlzLnBhZGRpbmdCb3R0b21JblBpeGVscyt0aGlzLl9mb250T2Zmc2V0LmhlaWdodCp0aGlzLl9saW5lcy5sZW5ndGg7aWYodGhpcy5fbGluZXMubGVuZ3RoPjAmJjAhPT10aGlzLl9saW5lU3BhY2luZy5pbnRlcm5hbFZhbHVlKXt2YXIgbD0wO2w9dGhpcy5fbGluZVNwYWNpbmcuaXNQaXhlbD90aGlzLl9saW5lU3BhY2luZy5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9saW5lU3BhY2luZy5nZXRWYWx1ZSh0aGlzLl9ob3N0KSp0aGlzLl9oZWlnaHQuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpLGgrPSh0aGlzLl9saW5lcy5sZW5ndGgtMSkqbH1oIT09dGhpcy5faGVpZ2h0LmludGVybmFsVmFsdWUmJih0aGlzLl9oZWlnaHQudXBkYXRlSW5QbGFjZShoLGEuVU5JVE1PREVfUElYRUwpLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApfX0sZS5wcm90b3R5cGUuX2RyYXdUZXh0PWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLG89MDtzd2l0Y2godGhpcy5fdGV4dEhvcml6b250YWxBbGlnbm1lbnQpe2Nhc2UgcC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZUOm89MDticmVhaztjYXNlIHAuSE9SSVpPTlRBTF9BTElHTk1FTlRfUklHSFQ6bz1uLWU7YnJlYWs7Y2FzZSBwLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUjpvPShuLWUpLzJ9KHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYoci5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHIuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsci5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCxyLnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0aGlzLm91dGxpbmVXaWR0aCYmci5zdHJva2VUZXh0KHQsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtvLGkpLHIuZmlsbFRleHQodCx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K28saSl9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7dC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5fcmVuZGVyTGluZXModCksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9hcHBseVN0YXRlcz1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5fYXBwbHlTdGF0ZXMuY2FsbCh0aGlzLGUpLHRoaXMub3V0bGluZVdpZHRoJiYoZS5saW5lV2lkdGg9dGhpcy5vdXRsaW5lV2lkdGgsZS5zdHJva2VTdHlsZT10aGlzLm91dGxpbmVDb2xvcil9LGUucHJvdG90eXBlLl9icmVha0xpbmVzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9W10scj10aGlzLnRleHQuc3BsaXQoXCJcXG5cIik7aWYodGhpcy5fdGV4dFdyYXBwaW5nPT09Yi5FbGxpcHNpcylmb3IodmFyIG49MCxvPXI7bjxvLmxlbmd0aDtuKyspe3ZhciBzPW9bbl07aS5wdXNoKHRoaXMuX3BhcnNlTGluZUVsbGlwc2lzKHMsdCxlKSl9ZWxzZSBpZih0aGlzLl90ZXh0V3JhcHBpbmc9PT1iLldvcmRXcmFwKWZvcih2YXIgYT0wLGg9cjthPGgubGVuZ3RoO2ErKyl7cz1oW2FdO2kucHVzaC5hcHBseShpLHRoaXMuX3BhcnNlTGluZVdvcmRXcmFwKHMsdCxlKSl9ZWxzZSBmb3IodmFyIGw9MCx1PXI7bDx1Lmxlbmd0aDtsKyspe3M9dVtsXTtpLnB1c2godGhpcy5fcGFyc2VMaW5lKHMsZSkpfXJldHVybiBpfSxlLnByb3RvdHlwZS5fcGFyc2VMaW5lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVwiXCIpLHt0ZXh0OnQsd2lkdGg6ZS5tZWFzdXJlVGV4dCh0KS53aWR0aH19LGUucHJvdG90eXBlLl9wYXJzZUxpbmVFbGxpcHNpcz1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09dCYmKHQ9XCJcIik7dmFyIHI9aS5tZWFzdXJlVGV4dCh0KS53aWR0aDtmb3Iocj5lJiYodCs9XCLigKZcIik7dC5sZW5ndGg+MiYmcj5lOyl0PXQuc2xpY2UoMCwtMikrXCLigKZcIixyPWkubWVhc3VyZVRleHQodCkud2lkdGg7cmV0dXJue3RleHQ6dCx3aWR0aDpyfX0sZS5wcm90b3R5cGUuX3BhcnNlTGluZVdvcmRXcmFwPWZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT10JiYodD1cIlwiKTtmb3IodmFyIHI9W10sbj10LnNwbGl0KFwiIFwiKSxvPTAscz0wO3M8bi5sZW5ndGg7cysrKXt2YXIgYT1zPjA/dCtcIiBcIituW3NdOm5bMF0saD1pLm1lYXN1cmVUZXh0KGEpLndpZHRoO2g+ZSYmcz4wPyhyLnB1c2goe3RleHQ6dCx3aWR0aDpvfSksdD1uW3NdLG89aS5tZWFzdXJlVGV4dCh0KS53aWR0aCk6KG89aCx0PWEpfXJldHVybiByLnB1c2goe3RleHQ6dCx3aWR0aDpvfSkscn0sZS5wcm90b3R5cGUuX3JlbmRlckxpbmVzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCxpPTA7c3dpdGNoKHRoaXMuX3RleHRWZXJ0aWNhbEFsaWdubWVudCl7Y2FzZSBwLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1A6aT10aGlzLl9mb250T2Zmc2V0LmFzY2VudDticmVhaztjYXNlIHAuVkVSVElDQUxfQUxJR05NRU5UX0JPVFRPTTppPWUtdGhpcy5fZm9udE9mZnNldC5oZWlnaHQqKHRoaXMuX2xpbmVzLmxlbmd0aC0xKS10aGlzLl9mb250T2Zmc2V0LmRlc2NlbnQ7YnJlYWs7Y2FzZSBwLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVI6aT10aGlzLl9mb250T2Zmc2V0LmFzY2VudCsoZS10aGlzLl9mb250T2Zmc2V0LmhlaWdodCp0aGlzLl9saW5lcy5sZW5ndGgpLzJ9aSs9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wO2Zvcih2YXIgcj0wO3I8dGhpcy5fbGluZXMubGVuZ3RoO3IrKyl7dmFyIG49dGhpcy5fbGluZXNbcl07MCE9PXImJjAhPT10aGlzLl9saW5lU3BhY2luZy5pbnRlcm5hbFZhbHVlJiYodGhpcy5fbGluZVNwYWNpbmcuaXNQaXhlbD9pKz10aGlzLl9saW5lU3BhY2luZy5nZXRWYWx1ZSh0aGlzLl9ob3N0KTppKz10aGlzLl9saW5lU3BhY2luZy5nZXRWYWx1ZSh0aGlzLl9ob3N0KSp0aGlzLl9oZWlnaHQuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpKSx0aGlzLl9kcmF3VGV4dChuLnRleHQsbi53aWR0aCxpLHQpLGkrPXRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0fX0sZS5wcm90b3R5cGUuY29tcHV0ZUV4cGVjdGVkSGVpZ2h0PWZ1bmN0aW9uKCl7aWYodGhpcy50ZXh0JiZ0aGlzLndpZHRoSW5QaXhlbHMpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO2lmKHQpe3RoaXMuX2FwcGx5U3RhdGVzKHQpLHRoaXMuX2ZvbnRPZmZzZXR8fCh0aGlzLl9mb250T2Zmc2V0PXAuX0dldEZvbnRPZmZzZXQodC5mb250KSk7dmFyIGU9dGhpcy5fbGluZXM/dGhpcy5fbGluZXM6dGhpcy5fYnJlYWtMaW5lcyh0aGlzLndpZHRoSW5QaXhlbHMtdGhpcy5wYWRkaW5nTGVmdEluUGl4ZWxzLXRoaXMucGFkZGluZ1JpZ2h0SW5QaXhlbHMsdCksaT10aGlzLnBhZGRpbmdUb3BJblBpeGVscyt0aGlzLnBhZGRpbmdCb3R0b21JblBpeGVscyt0aGlzLl9mb250T2Zmc2V0LmhlaWdodCplLmxlbmd0aDtpZihlLmxlbmd0aD4wJiYwIT09dGhpcy5fbGluZVNwYWNpbmcuaW50ZXJuYWxWYWx1ZSl7dmFyIHI9MDtyPXRoaXMuX2xpbmVTcGFjaW5nLmlzUGl4ZWw/dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCkqdGhpcy5faGVpZ2h0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KSxpKz0oZS5sZW5ndGgtMSkqcn1yZXR1cm4gaX19cmV0dXJuIDB9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5jbGVhcigpfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuVGV4dEJsb2NrXCJdPXk7dmFyIHY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShpLHIpe3ZvaWQgMD09PXImJihyPW51bGwpO3ZhciBuPXQuY2FsbCh0aGlzLGkpfHx0aGlzO3JldHVybiBuLm5hbWU9aSxuLl93b3JraW5nQ2FudmFzPW51bGwsbi5fbG9hZGVkPSExLG4uX3N0cmV0Y2g9ZS5TVFJFVENIX0ZJTEwsbi5fYXV0b1NjYWxlPSExLG4uX3NvdXJjZUxlZnQ9MCxuLl9zb3VyY2VUb3A9MCxuLl9zb3VyY2VXaWR0aD0wLG4uX3NvdXJjZUhlaWdodD0wLG4uX3N2Z0F0dHJpYnV0ZXNDb21wdXRhdGlvbkNvbXBsZXRlZD0hMSxuLl9pc1NWRz0hMSxuLl9jZWxsV2lkdGg9MCxuLl9jZWxsSGVpZ2h0PTAsbi5fY2VsbElkPS0xLG4uX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlPSExLG4ub25JbWFnZUxvYWRlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxuLm9uU1ZHQXR0cmlidXRlc0NvbXB1dGVkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLG4uc291cmNlPXIsbn1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzTG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2UhPT10JiYodGhpcy5fcG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2U9dCx0aGlzLl9wb3B1bGF0ZU5pbmVQYXRjaFNsaWNlc0Zyb21JbWFnZSYmdGhpcy5fbG9hZGVkJiZ0aGlzLl9leHRyYWN0TmluZVBhdGNoU2xpY2VEYXRhRnJvbUltYWdlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRldGVjdFBvaW50ZXJPbk9wYXF1ZU9ubHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RldGVjdFBvaW50ZXJPbk9wYXF1ZU9ubHl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5IT09dCYmKHRoaXMuX2RldGVjdFBvaW50ZXJPbk9wYXF1ZU9ubHk9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2xpY2VMZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbGljZUxlZnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zbGljZUxlZnQhPT10JiYodGhpcy5fc2xpY2VMZWZ0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2xpY2VSaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xpY2VSaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NsaWNlUmlnaHQhPT10JiYodGhpcy5fc2xpY2VSaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNsaWNlVG9wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbGljZVRvcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NsaWNlVG9wIT09dCYmKHRoaXMuX3NsaWNlVG9wPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2xpY2VCb3R0b21cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NsaWNlQm90dG9tfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2xpY2VCb3R0b20hPT10JiYodGhpcy5fc2xpY2VCb3R0b209dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzb3VyY2VMZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VMZWZ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlTGVmdCE9PXQmJih0aGlzLl9zb3VyY2VMZWZ0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic291cmNlVG9wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2VUb3AhPT10JiYodGhpcy5fc291cmNlVG9wPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic291cmNlV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZVdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlV2lkdGghPT10JiYodGhpcy5fc291cmNlV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzb3VyY2VIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZUhlaWdodCE9PXQmJih0aGlzLl9zb3VyY2VIZWlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc1NWR1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTVkd9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3ZnQXR0cmlidXRlc0NvbXB1dGF0aW9uQ29tcGxldGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdmdBdHRyaWJ1dGVzQ29tcHV0YXRpb25Db21wbGV0ZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYXV0b1NjYWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdXRvU2NhbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hdXRvU2NhbGUhPT10JiYodGhpcy5fYXV0b1NjYWxlPXQsdCYmdGhpcy5fbG9hZGVkJiZ0aGlzLnN5bmNocm9uaXplU2l6ZVdpdGhDb250ZW50KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0cmV0Y2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0cmV0Y2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zdHJldGNoIT09dCYmKHRoaXMuX3N0cmV0Y2g9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fcm90YXRlOTA9ZnVuY3Rpb24odCxpKXt2b2lkIDA9PT1pJiYoaT0hMSk7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxuPXIuZ2V0Q29udGV4dChcIjJkXCIpLG89dGhpcy5fZG9tSW1hZ2Uud2lkdGgscz10aGlzLl9kb21JbWFnZS5oZWlnaHQ7ci53aWR0aD1zLHIuaGVpZ2h0PW8sbi50cmFuc2xhdGUoci53aWR0aC8yLHIuaGVpZ2h0LzIpLG4ucm90YXRlKHQqTWF0aC5QSS8yKSxuLmRyYXdJbWFnZSh0aGlzLl9kb21JbWFnZSwwLDAsbyxzLC1vLzIsLXMvMixvLHMpO3ZhciBhPXIudG9EYXRhVVJMKFwiaW1hZ2UvanBnXCIpLGg9bmV3IGUodGhpcy5uYW1lK1wicm90YXRlZFwiLGEpO3JldHVybiBpJiYoaC5fc3RyZXRjaD10aGlzLl9zdHJldGNoLGguX2F1dG9TY2FsZT10aGlzLl9hdXRvU2NhbGUsaC5fY2VsbElkPXRoaXMuX2NlbGxJZCxoLl9jZWxsV2lkdGg9dCUxP3RoaXMuX2NlbGxIZWlnaHQ6dGhpcy5fY2VsbFdpZHRoLGguX2NlbGxIZWlnaHQ9dCUxP3RoaXMuX2NlbGxXaWR0aDp0aGlzLl9jZWxsSGVpZ2h0KSx0aGlzLl9oYW5kbGVSb3RhdGlvbkZvclNWR0ltYWdlKHRoaXMsaCx0KSxofSxlLnByb3RvdHlwZS5faGFuZGxlUm90YXRpb25Gb3JTVkdJbWFnZT1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpczt0Ll9pc1NWRyYmKHQuX3N2Z0F0dHJpYnV0ZXNDb21wdXRhdGlvbkNvbXBsZXRlZD8odGhpcy5fcm90YXRlOTBTb3VyY2VQcm9wZXJ0aWVzKHQsZSxpKSx0aGlzLl9tYXJrQXNEaXJ0eSgpKTp0Lm9uU1ZHQXR0cmlidXRlc0NvbXB1dGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7ci5fcm90YXRlOTBTb3VyY2VQcm9wZXJ0aWVzKHQsZSxpKSxyLl9tYXJrQXNEaXJ0eSgpfSkpfSxlLnByb3RvdHlwZS5fcm90YXRlOTBTb3VyY2VQcm9wZXJ0aWVzPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcixuLG89dC5zb3VyY2VMZWZ0LHM9dC5zb3VyY2VUb3AsYT10LmRvbUltYWdlLndpZHRoLGg9dC5kb21JbWFnZS5oZWlnaHQsbD1vLHU9cyxjPXQuc291cmNlV2lkdGgsXz10LnNvdXJjZUhlaWdodDtpZigwIT1pKXt2YXIgZD1pPDA/LTE6MTtpJT00O2Zvcih2YXIgZj0wO2Y8TWF0aC5hYnMoaSk7KytmKWw9LShzLWgvMikqZCtoLzIsdT0oby1hLzIpKmQrYS8yLGM9KHI9W18sY10pWzBdLF89clsxXSxpPDA/dS09XzpsLT1jLG89bCxzPXUsYT0obj1baCxhXSlbMF0saD1uWzFdfWUuc291cmNlTGVmdD1sLGUuc291cmNlVG9wPXUsZS5zb3VyY2VXaWR0aD1jLGUuc291cmNlSGVpZ2h0PV99LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRvbUltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21JbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fZG9tSW1hZ2U9dCx0aGlzLl9sb2FkZWQ9ITEsdGhpcy5fZG9tSW1hZ2Uud2lkdGg/dGhpcy5fb25JbWFnZUxvYWRlZCgpOnRoaXMuX2RvbUltYWdlLm9ubG9hZD1mdW5jdGlvbigpe2UuX29uSW1hZ2VMb2FkZWQoKX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX29uSW1hZ2VMb2FkZWQ9ZnVuY3Rpb24oKXt0aGlzLl9pbWFnZVdpZHRoPXRoaXMuX2RvbUltYWdlLndpZHRoLHRoaXMuX2ltYWdlSGVpZ2h0PXRoaXMuX2RvbUltYWdlLmhlaWdodCx0aGlzLl9sb2FkZWQ9ITAsdGhpcy5fcG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2UmJnRoaXMuX2V4dHJhY3ROaW5lUGF0Y2hTbGljZURhdGFGcm9tSW1hZ2UoKSx0aGlzLl9hdXRvU2NhbGUmJnRoaXMuc3luY2hyb25pemVTaXplV2l0aENvbnRlbnQoKSx0aGlzLm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlLnByb3RvdHlwZS5fZXh0cmFjdE5pbmVQYXRjaFNsaWNlRGF0YUZyb21JbWFnZT1mdW5jdGlvbigpe3RoaXMuX3dvcmtpbmdDYW52YXN8fCh0aGlzLl93b3JraW5nQ2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpO3ZhciB0PXRoaXMuX3dvcmtpbmdDYW52YXMsZT10LmdldENvbnRleHQoXCIyZFwiKSxpPXRoaXMuX2RvbUltYWdlLndpZHRoLHI9dGhpcy5fZG9tSW1hZ2UuaGVpZ2h0O3Qud2lkdGg9aSx0LmhlaWdodD1yLGUuZHJhd0ltYWdlKHRoaXMuX2RvbUltYWdlLDAsMCxpLHIpO3ZhciBuPWUuZ2V0SW1hZ2VEYXRhKDAsMCxpLHIpO3RoaXMuX3NsaWNlTGVmdD0tMSx0aGlzLl9zbGljZVJpZ2h0PS0xO2Zvcih2YXIgbz0wO288aTtvKyspe2lmKChhPW4uZGF0YVs0Km8rM10pPjEyNyYmLTE9PT10aGlzLl9zbGljZUxlZnQpdGhpcy5fc2xpY2VMZWZ0PW87ZWxzZSBpZihhPDEyNyYmdGhpcy5fc2xpY2VMZWZ0Pi0xKXt0aGlzLl9zbGljZVJpZ2h0PW87YnJlYWt9fXRoaXMuX3NsaWNlVG9wPS0xLHRoaXMuX3NsaWNlQm90dG9tPS0xO2Zvcih2YXIgcz0wO3M8cjtzKyspe3ZhciBhO2lmKChhPW4uZGF0YVtzKmkqNCszXSk+MTI3JiYtMT09PXRoaXMuX3NsaWNlVG9wKXRoaXMuX3NsaWNlVG9wPXM7ZWxzZSBpZihhPDEyNyYmdGhpcy5fc2xpY2VUb3A+LTEpe3RoaXMuX3NsaWNlQm90dG9tPXM7YnJlYWt9fX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic291cmNlXCIse3NldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3NvdXJjZSE9PXQmJih0aGlzLl9sb2FkZWQ9ITEsdGhpcy5fc291cmNlPXQsdCYmKHQ9dGhpcy5fc3ZnQ2hlY2sodCkpLHRoaXMuX2RvbUltYWdlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksdGhpcy5fZG9tSW1hZ2Uub25sb2FkPWZ1bmN0aW9uKCl7ZS5fb25JbWFnZUxvYWRlZCgpfSx0JiYocy5Ub29scy5TZXRDb3JzQmVoYXZpb3IodCx0aGlzLl9kb21JbWFnZSksdGhpcy5fZG9tSW1hZ2Uuc3JjPXQpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc3ZnQ2hlY2s9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih3aW5kb3cuU1ZHU1ZHRWxlbWVudCYmLTEhPT10LnNlYXJjaCgvLnN2ZyMvZ2kpJiZ0LmluZGV4T2YoXCIjXCIpPT09dC5sYXN0SW5kZXhPZihcIiNcIikpe3RoaXMuX2lzU1ZHPSEwO3ZhciBpPXQuc3BsaXQoXCIjXCIpWzBdLHI9dC5zcGxpdChcIiNcIilbMV0sbj1kb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJ29iamVjdFtkYXRhPVwiJytpKydcIl0nKTtpZihuKXt2YXIgbz1uLmNvbnRlbnREb2N1bWVudDtpZihvJiZvLmRvY3VtZW50RWxlbWVudCl7dmFyIHM9by5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlld0JveFwiKSxhPU51bWJlcihvLmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksaD1OdW1iZXIoby5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKTtpZihvLmdldEVsZW1lbnRCeUlkKHIpJiZzJiZhJiZoKXJldHVybiB0aGlzLl9nZXRTVkdBdHRyaWJzKG4sciksdH1uLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtlLl9nZXRTVkdBdHRyaWJzKG4scil9KX1lbHNle3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvYmplY3RcIik7bC5kYXRhPWksbC50eXBlPVwiaW1hZ2Uvc3ZnK3htbFwiLGwud2lkdGg9XCIwJVwiLGwuaGVpZ2h0PVwiMCVcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGwpLGwub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCdvYmplY3RbZGF0YT1cIicraSsnXCJdJyk7dCYmZS5fZ2V0U1ZHQXR0cmlicyh0LHIpfX1yZXR1cm4gaX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuX2dldFNWR0F0dHJpYnM9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmNvbnRlbnREb2N1bWVudDtpZihpJiZpLmRvY3VtZW50RWxlbWVudCl7dmFyIHI9aS5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidmlld0JveFwiKSxuPU51bWJlcihpLmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksbz1OdW1iZXIoaS5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKSxzPWkuZ2V0RWxlbWVudEJ5SWQoZSk7aWYociYmbiYmbyYmcyl7dmFyIGE9TnVtYmVyKHIuc3BsaXQoXCIgXCIpWzJdKSxoPU51bWJlcihyLnNwbGl0KFwiIFwiKVszXSksbD1zLmdldEJCb3goKSx1PTEsYz0xLF89MCxkPTA7cy50cmFuc2Zvcm0mJnMudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKSYmKHU9cy50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpLm1hdHJpeC5hLGM9cy50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpLm1hdHJpeC5kLF89cy50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpLm1hdHJpeC5lLGQ9cy50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpLm1hdHJpeC5mKSx0aGlzLnNvdXJjZUxlZnQ9KHUqbC54K18pKm4vYSx0aGlzLnNvdXJjZVRvcD0oYypsLnkrZCkqby9oLHRoaXMuc291cmNlV2lkdGg9bC53aWR0aCp1KihuL2EpLHRoaXMuc291cmNlSGVpZ2h0PWwuaGVpZ2h0KmMqKG8vaCksdGhpcy5fc3ZnQXR0cmlidXRlc0NvbXB1dGF0aW9uQ29tcGxldGVkPSEwLHRoaXMub25TVkdBdHRyaWJ1dGVzQ29tcHV0ZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKX19fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjZWxsV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NlbGxXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NlbGxXaWR0aCE9PXQmJih0aGlzLl9jZWxsV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjZWxsSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jZWxsSGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2VsbEhlaWdodCE9PXQmJih0aGlzLl9jZWxsSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2VsbElkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jZWxsSWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jZWxsSWQhPT10JiYodGhpcy5fY2VsbElkPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSxpKXtpZighdC5wcm90b3R5cGUuY29udGFpbnMuY2FsbCh0aGlzLGUsaSkpcmV0dXJuITE7aWYoIXRoaXMuX2RldGVjdFBvaW50ZXJPbk9wYXF1ZU9ubHl8fCF0aGlzLl93b3JraW5nQ2FudmFzKXJldHVybiEwO3ZhciByPXRoaXMuX3dvcmtpbmdDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLG49MHx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxvPTB8dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0O3JldHVybiByLmdldEltYWdlRGF0YSgwLDAsbixvKS5kYXRhWzQqKChlPWUtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdHwwKSsoaT1pLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcHwwKSp0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCkrM10+MH0sZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJJbWFnZVwifSxlLnByb3RvdHlwZS5zeW5jaHJvbml6ZVNpemVXaXRoQ29udGVudD1mdW5jdGlvbigpe3RoaXMuX2xvYWRlZCYmKHRoaXMud2lkdGg9dGhpcy5fZG9tSW1hZ2Uud2lkdGgrXCJweFwiLHRoaXMuaGVpZ2h0PXRoaXMuX2RvbUltYWdlLmhlaWdodCtcInB4XCIpfSxlLnByb3RvdHlwZS5fcHJvY2Vzc01lYXN1cmVzPWZ1bmN0aW9uKGkscil7aWYodGhpcy5fbG9hZGVkKXN3aXRjaCh0aGlzLl9zdHJldGNoKXtjYXNlIGUuU1RSRVRDSF9OT05FOmNhc2UgZS5TVFJFVENIX0ZJTEw6Y2FzZSBlLlNUUkVUQ0hfVU5JRk9STTpjYXNlIGUuU1RSRVRDSF9OSU5FX1BBVENIOmJyZWFrO2Nhc2UgZS5TVFJFVENIX0VYVEVORDp0aGlzLl9hdXRvU2NhbGUmJnRoaXMuc3luY2hyb25pemVTaXplV2l0aENvbnRlbnQoKSx0aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQucGFyZW50JiYodGhpcy5wYXJlbnQuYWRhcHRXaWR0aFRvQ2hpbGRyZW49ITAsdGhpcy5wYXJlbnQuYWRhcHRIZWlnaHRUb0NoaWxkcmVuPSEwKX10LnByb3RvdHlwZS5fcHJvY2Vzc01lYXN1cmVzLmNhbGwodGhpcyxpLHIpfSxlLnByb3RvdHlwZS5fcHJlcGFyZVdvcmtpbmdDYW52YXNGb3JPcGFxdWVEZXRlY3Rpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5KXt0aGlzLl93b3JraW5nQ2FudmFzfHwodGhpcy5fd29ya2luZ0NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKTt2YXIgdD10aGlzLl93b3JraW5nQ2FudmFzLGU9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsaT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQscj10LmdldENvbnRleHQoXCIyZFwiKTt0LndpZHRoPWUsdC5oZWlnaHQ9aSxyLmNsZWFyUmVjdCgwLDAsZSxpKX19LGUucHJvdG90eXBlLl9kcmF3SW1hZ2U9ZnVuY3Rpb24odCxlLGkscixuLG8scyxhLGgpeyh0LmRyYXdJbWFnZSh0aGlzLl9kb21JbWFnZSxlLGkscixuLG8scyxhLGgpLHRoaXMuX2RldGVjdFBvaW50ZXJPbk9wYXF1ZU9ubHkpJiYodD10aGlzLl93b3JraW5nQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKSkuZHJhd0ltYWdlKHRoaXMuX2RvbUltYWdlLGUsaSxyLG4sby10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHMtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLGEsaCl9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3ZhciBpLHIsbixvO2lmKHQuc2F2ZSgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksLTE9PXRoaXMuY2VsbElkKWk9dGhpcy5fc291cmNlTGVmdCxyPXRoaXMuX3NvdXJjZVRvcCxuPXRoaXMuX3NvdXJjZVdpZHRoP3RoaXMuX3NvdXJjZVdpZHRoOnRoaXMuX2ltYWdlV2lkdGgsbz10aGlzLl9zb3VyY2VIZWlnaHQ/dGhpcy5fc291cmNlSGVpZ2h0OnRoaXMuX2ltYWdlSGVpZ2h0O2Vsc2V7dmFyIHM9dGhpcy5fZG9tSW1hZ2UubmF0dXJhbFdpZHRoL3RoaXMuY2VsbFdpZHRoLGE9dGhpcy5jZWxsSWQvcz4+MCxoPXRoaXMuY2VsbElkJXM7aT10aGlzLmNlbGxXaWR0aCpoLHI9dGhpcy5jZWxsSGVpZ2h0KmEsbj10aGlzLmNlbGxXaWR0aCxvPXRoaXMuY2VsbEhlaWdodH1pZih0aGlzLl9wcmVwYXJlV29ya2luZ0NhbnZhc0Zvck9wYXF1ZURldGVjdGlvbigpLHRoaXMuX2FwcGx5U3RhdGVzKHQpLHRoaXMuX2xvYWRlZClzd2l0Y2godGhpcy5fc3RyZXRjaCl7Y2FzZSBlLlNUUkVUQ0hfTk9ORTpjYXNlIGUuU1RSRVRDSF9GSUxMOnRoaXMuX2RyYXdJbWFnZSh0LGkscixuLG8sdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KTticmVhaztjYXNlIGUuU1RSRVRDSF9VTklGT1JNOnZhciBsPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoL24sdT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvbyxjPU1hdGgubWluKGwsdSksXz0odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtbipjKS8yLGQ9KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC1vKmMpLzI7dGhpcy5fZHJhd0ltYWdlKHQsaSxyLG4sbyx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K18sdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK2QsbipjLG8qYyk7YnJlYWs7Y2FzZSBlLlNUUkVUQ0hfRVhURU5EOnRoaXMuX2RyYXdJbWFnZSh0LGkscixuLG8sdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KTticmVhaztjYXNlIGUuU1RSRVRDSF9OSU5FX1BBVENIOnRoaXMuX3JlbmRlck5pbmVQYXRjaCh0KX10LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX3JlbmRlckNvcm5lclBhdGNoPWZ1bmN0aW9uKHQsZSxpLHIsbixvLHMpe3RoaXMuX2RyYXdJbWFnZSh0LGUsaSxyLG4sdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtvLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtzLHIsbil9LGUucHJvdG90eXBlLl9yZW5kZXJOaW5lUGF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faW1hZ2VIZWlnaHQsaT10aGlzLl9zbGljZUxlZnQscj10aGlzLl9zbGljZVRvcCxuPXRoaXMuX2ltYWdlSGVpZ2h0LXRoaXMuX3NsaWNlQm90dG9tLG89dGhpcy5faW1hZ2VXaWR0aC10aGlzLl9zbGljZVJpZ2h0LHM9MCxhPTA7dGhpcy5fcG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2UmJihzPTEsYT0xLGUtPTIsaS09MSxyLT0xLG4tPTEsby09MSk7dmFyIGg9dGhpcy5fc2xpY2VSaWdodC10aGlzLl9zbGljZUxlZnQsbD10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC1vLXRoaXMuc2xpY2VMZWZ0LHU9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LWUrdGhpcy5fc2xpY2VCb3R0b207dGhpcy5fcmVuZGVyQ29ybmVyUGF0Y2godCxzLGEsaSxyLDAsMCksdGhpcy5fcmVuZGVyQ29ybmVyUGF0Y2godCxzLHRoaXMuX3NsaWNlQm90dG9tLGksZS10aGlzLl9zbGljZUJvdHRvbSwwLHUpLHRoaXMuX3JlbmRlckNvcm5lclBhdGNoKHQsdGhpcy5fc2xpY2VSaWdodCxhLG8scix0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC1vLDApLHRoaXMuX3JlbmRlckNvcm5lclBhdGNoKHQsdGhpcy5fc2xpY2VSaWdodCx0aGlzLl9zbGljZUJvdHRvbSxvLGUtdGhpcy5fc2xpY2VCb3R0b20sdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtbyx1KSx0aGlzLl9kcmF3SW1hZ2UodCx0aGlzLl9zbGljZUxlZnQsdGhpcy5fc2xpY2VUb3AsaCx0aGlzLl9zbGljZUJvdHRvbS10aGlzLl9zbGljZVRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2ksdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3IsbCx1LXIpLHRoaXMuX2RyYXdJbWFnZSh0LHMsdGhpcy5fc2xpY2VUb3AsaSx0aGlzLl9zbGljZUJvdHRvbS10aGlzLl9zbGljZVRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtyLGksdS1yKSx0aGlzLl9kcmF3SW1hZ2UodCx0aGlzLl9zbGljZVJpZ2h0LHRoaXMuX3NsaWNlVG9wLGksdGhpcy5fc2xpY2VCb3R0b20tdGhpcy5fc2xpY2VUb3AsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC1vLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtyLGksdS1yKSx0aGlzLl9kcmF3SW1hZ2UodCx0aGlzLl9zbGljZUxlZnQsYSxoLHIsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCxsLHIpLHRoaXMuX2RyYXdJbWFnZSh0LHRoaXMuX3NsaWNlTGVmdCx0aGlzLl9zbGljZUJvdHRvbSxoLG4sdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt1LGwsbil9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25TVkdBdHRyaWJ1dGVzQ29tcHV0ZWRPYnNlcnZhYmxlLmNsZWFyKCl9LGUuU1RSRVRDSF9OT05FPTAsZS5TVFJFVENIX0ZJTEw9MSxlLlNUUkVUQ0hfVU5JRk9STT0yLGUuU1RSRVRDSF9FWFRFTkQ9MyxlLlNUUkVUQ0hfTklORV9QQVRDSD00LGV9KHApO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5JbWFnZVwiXT12O3ZhciBPPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7aS5uYW1lPWUsaS5kZWxlZ2F0ZVBpY2tpbmdUb0NoaWxkcmVuPSExLGkudGhpY2tuZXNzPTEsaS5pc1BvaW50ZXJCbG9ja2VyPSEwO3ZhciByPW51bGw7cmV0dXJuIGkucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7cj1pLmFscGhhLGkuYWxwaGEtPS4xfSxpLnBvaW50ZXJPdXRBbmltYXRpb249ZnVuY3Rpb24oKXtudWxsIT09ciYmKGkuYWxwaGE9cil9LGkucG9pbnRlckRvd25BbmltYXRpb249ZnVuY3Rpb24oKXtpLnNjYWxlWC09LjA1LGkuc2NhbGVZLT0uMDV9LGkucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5zY2FsZVgrPS4wNSxpLnNjYWxlWSs9LjA1fSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRCbG9ja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dEJsb2NrfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQnV0dG9uXCJ9LGUucHJvdG90eXBlLl9wcm9jZXNzUGlja2luZz1mdW5jdGlvbihlLGkscixuLG8scyxhKXtpZighdGhpcy5faXNFbmFibGVkfHwhdGhpcy5pc0hpdFRlc3RWaXNpYmxlfHwhdGhpcy5pc1Zpc2libGV8fHRoaXMubm90UmVuZGVyYWJsZSlyZXR1cm4hMTtpZighdC5wcm90b3R5cGUuY29udGFpbnMuY2FsbCh0aGlzLGUsaSkpcmV0dXJuITE7aWYodGhpcy5kZWxlZ2F0ZVBpY2tpbmdUb0NoaWxkcmVuKXtmb3IodmFyIGg9ITEsbD10aGlzLl9jaGlsZHJlbi5sZW5ndGgtMTtsPj0wO2wtLSl7dmFyIHU9dGhpcy5fY2hpbGRyZW5bbF07aWYodS5pc0VuYWJsZWQmJnUuaXNIaXRUZXN0VmlzaWJsZSYmdS5pc1Zpc2libGUmJiF1Lm5vdFJlbmRlcmFibGUmJnUuY29udGFpbnMoZSxpKSl7aD0hMDticmVha319aWYoIWgpcmV0dXJuITF9cmV0dXJuIHRoaXMuX3Byb2Nlc3NPYnNlcnZhYmxlcyhyLGUsaSxuLG8scyxhKSwhMH0sZS5wcm90b3R5cGUuX29uUG9pbnRlckVudGVyPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5wcm90b3R5cGUuX29uUG9pbnRlckVudGVyLmNhbGwodGhpcyxlKSYmKHRoaXMucG9pbnRlckVudGVyQW5pbWF0aW9uJiZ0aGlzLnBvaW50ZXJFbnRlckFuaW1hdGlvbigpLCEwKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlck91dD1mdW5jdGlvbihlLGkpe3ZvaWQgMD09PWkmJihpPSExKSx0aGlzLnBvaW50ZXJPdXRBbmltYXRpb24mJnRoaXMucG9pbnRlck91dEFuaW1hdGlvbigpLHQucHJvdG90eXBlLl9vblBvaW50ZXJPdXQuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiEhdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pJiYodGhpcy5wb2ludGVyRG93bkFuaW1hdGlvbiYmdGhpcy5wb2ludGVyRG93bkFuaW1hdGlvbigpLCEwKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKGUsaSxyLG4sbyl7dGhpcy5wb2ludGVyVXBBbmltYXRpb24mJnRoaXMucG9pbnRlclVwQW5pbWF0aW9uKCksdC5wcm90b3R5cGUuX29uUG9pbnRlclVwLmNhbGwodGhpcyxlLGkscixuLG8pfSxlLkNyZWF0ZUltYWdlQnV0dG9uPWZ1bmN0aW9uKHQsaSxyKXt2YXIgbj1uZXcgZSh0KSxvPW5ldyB5KHQrXCJfYnV0dG9uXCIsaSk7by50ZXh0V3JhcHBpbmc9ITAsby50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUixvLnBhZGRpbmdMZWZ0PVwiMjAlXCIsbi5hZGRDb250cm9sKG8pO3ZhciBzPW5ldyB2KHQrXCJfaWNvblwiLHIpO3JldHVybiBzLndpZHRoPVwiMjAlXCIscy5zdHJldGNoPXYuU1RSRVRDSF9VTklGT1JNLHMuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsbi5hZGRDb250cm9sKHMpLG4uX2ltYWdlPXMsbi5fdGV4dEJsb2NrPW8sbn0sZS5DcmVhdGVJbWFnZU9ubHlCdXR0b249ZnVuY3Rpb24odCxpKXt2YXIgcj1uZXcgZSh0KSxuPW5ldyB2KHQrXCJfaWNvblwiLGkpO3JldHVybiBuLnN0cmV0Y2g9di5TVFJFVENIX0ZJTEwsbi5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLmFkZENvbnRyb2wobiksci5faW1hZ2U9bixyfSxlLkNyZWF0ZVNpbXBsZUJ1dHRvbj1mdW5jdGlvbih0LGkpe3ZhciByPW5ldyBlKHQpLG49bmV3IHkodCtcIl9idXR0b25cIixpKTtyZXR1cm4gbi50ZXh0V3JhcHBpbmc9ITAsbi50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUixyLmFkZENvbnRyb2wobiksci5fdGV4dEJsb2NrPW4scn0sZS5DcmVhdGVJbWFnZVdpdGhDZW50ZXJUZXh0QnV0dG9uPWZ1bmN0aW9uKHQsaSxyKXt2YXIgbj1uZXcgZSh0KSxvPW5ldyB2KHQrXCJfaWNvblwiLHIpO28uc3RyZXRjaD12LlNUUkVUQ0hfRklMTCxuLmFkZENvbnRyb2wobyk7dmFyIHM9bmV3IHkodCtcIl9idXR0b25cIixpKTtyZXR1cm4gcy50ZXh0V3JhcHBpbmc9ITAscy50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUixuLmFkZENvbnRyb2wocyksbi5faW1hZ2U9byxuLl90ZXh0QmxvY2s9cyxufSxlfShtKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuQnV0dG9uXCJdPU87dmFyIEM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5faXNWZXJ0aWNhbD0hMCxpLl9tYW51YWxXaWR0aD0hMSxpLl9tYW51YWxIZWlnaHQ9ITEsaS5fZG9Ob3RUcmFja01hbnVhbENoYW5nZXM9ITEsaS5pZ25vcmVMYXlvdXRXYXJuaW5ncz0hMSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNWZXJ0aWNhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmVydGljYWwhPT10JiYodGhpcy5faXNWZXJ0aWNhbD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RvTm90VHJhY2tNYW51YWxDaGFuZ2VzfHwodGhpcy5fbWFudWFsV2lkdGg9ITApLHRoaXMuX3dpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fd2lkdGguZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlaWdodC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RvTm90VHJhY2tNYW51YWxDaGFuZ2VzfHwodGhpcy5fbWFudWFsSGVpZ2h0PSEwKSx0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9oZWlnaHQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlN0YWNrUGFuZWxcIn0sZS5wcm90b3R5cGUuX3ByZU1lYXN1cmU9ZnVuY3Rpb24oZSxpKXtmb3IodmFyIHI9MCxuPXRoaXMuX2NoaWxkcmVuO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO3RoaXMuX2lzVmVydGljYWw/by52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1A6by5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVH10LnByb3RvdHlwZS5fcHJlTWVhc3VyZS5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nLmNhbGwodGhpcyxlLGkpLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5jb3B5RnJvbShlKSx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4ubGVmdD10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi50b3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuaXNWZXJ0aWNhbCYmIXRoaXMuX21hbnVhbFdpZHRofHwodGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLndpZHRoPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKSwodGhpcy5pc1ZlcnRpY2FsfHx0aGlzLl9tYW51YWxIZWlnaHQpJiYodGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmhlaWdodD10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpfSxlLnByb3RvdHlwZS5fcG9zdE1lYXN1cmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCxpPTAscj0wLG49dGhpcy5fY2hpbGRyZW47cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07by5pc1Zpc2libGUmJiFvLm5vdFJlbmRlcmFibGUmJih0aGlzLl9pc1ZlcnRpY2FsPyhvLnRvcCE9PWkrXCJweFwiJiYoby50b3A9aStcInB4XCIsdGhpcy5fcmVidWlsZExheW91dD0hMCxvLl90b3AuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwKSxvLl9oZWlnaHQuaXNQZXJjZW50YWdlJiYhby5fYXV0b21hdGljU2l6ZT90aGlzLmlnbm9yZUxheW91dFdhcm5pbmdzfHxzLlRvb2xzLldhcm4oXCJDb250cm9sIChOYW1lOlwiK28ubmFtZStcIiwgVW5pcXVlSWQ6XCIrby51bmlxdWVJZCtcIikgaXMgdXNpbmcgaGVpZ2h0IGluIHBlcmNlbnRhZ2UgbW9kZSBpbnNpZGUgYSB2ZXJ0aWNhbCBTdGFja1BhbmVsXCIpOmkrPW8uX2N1cnJlbnRNZWFzdXJlLmhlaWdodCtvLnBhZGRpbmdUb3BJblBpeGVscytvLnBhZGRpbmdCb3R0b21JblBpeGVscyk6KG8ubGVmdCE9PWUrXCJweFwiJiYoby5sZWZ0PWUrXCJweFwiLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITAsby5fbGVmdC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApLG8uX3dpZHRoLmlzUGVyY2VudGFnZSYmIW8uX2F1dG9tYXRpY1NpemU/dGhpcy5pZ25vcmVMYXlvdXRXYXJuaW5nc3x8cy5Ub29scy5XYXJuKFwiQ29udHJvbCAoTmFtZTpcIitvLm5hbWUrXCIsIFVuaXF1ZUlkOlwiK28udW5pcXVlSWQrXCIpIGlzIHVzaW5nIHdpZHRoIGluIHBlcmNlbnRhZ2UgbW9kZSBpbnNpZGUgYSBob3Jpem9udGFsIFN0YWNrUGFuZWxcIik6ZSs9by5fY3VycmVudE1lYXN1cmUud2lkdGgrby5wYWRkaW5nTGVmdEluUGl4ZWxzK28ucGFkZGluZ1JpZ2h0SW5QaXhlbHMpKX10aGlzLl9kb05vdFRyYWNrTWFudWFsQ2hhbmdlcz0hMDt2YXIgYT0hMSxoPSExO2lmKCF0aGlzLl9tYW51YWxIZWlnaHQmJnRoaXMuX2lzVmVydGljYWwpe3ZhciBsPXRoaXMuaGVpZ2h0O3RoaXMuaGVpZ2h0PWkrXCJweFwiLGg9bCE9PXRoaXMuaGVpZ2h0fHwhdGhpcy5faGVpZ2h0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZ31pZighdGhpcy5fbWFudWFsV2lkdGgmJiF0aGlzLl9pc1ZlcnRpY2FsKXt2YXIgdT10aGlzLndpZHRoO3RoaXMud2lkdGg9ZStcInB4XCIsYT11IT09dGhpcy53aWR0aHx8IXRoaXMuX3dpZHRoLmlnbm9yZUFkYXB0aXZlU2NhbGluZ31oJiYodGhpcy5faGVpZ2h0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCksYSYmKHRoaXMuX3dpZHRoLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCksdGhpcy5fZG9Ob3RUcmFja01hbnVhbENoYW5nZXM9ITEsKGF8fGgpJiYodGhpcy5fcmVidWlsZExheW91dD0hMCksdC5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlLmNhbGwodGhpcyl9LGV9KGcpO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5TdGFja1BhbmVsXCJdPUM7dmFyIHc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5faXNDaGVja2VkPSExLGkuX2JhY2tncm91bmQ9XCJibGFja1wiLGkuX2NoZWNrU2l6ZVJhdGlvPS44LGkuX3RoaWNrbmVzcz0xLGkub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGkuaXNQb2ludGVyQmxvY2tlcj0hMCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGhpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aGlja25lc3MhPT10JiYodGhpcy5fdGhpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hlY2tTaXplUmF0aW9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrU2l6ZVJhdGlvfSxzZXQ6ZnVuY3Rpb24odCl7dD1NYXRoLm1heChNYXRoLm1pbigxLHQpLDApLHRoaXMuX2NoZWNrU2l6ZVJhdGlvIT09dCYmKHRoaXMuX2NoZWNrU2l6ZVJhdGlvPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tncm91bmQhPT10JiYodGhpcy5fYmFja2dyb3VuZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzQ2hlY2tlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDaGVja2VkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNDaGVja2VkIT09dCYmKHRoaXMuX2lzQ2hlY2tlZD10LHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5vbklzQ2hlY2tlZENoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJDaGVja2JveFwifSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpO3ZhciBpPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLXRoaXMuX3RoaWNrbmVzcyxyPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl90aGlja25lc3M7aWYoKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5fYmFja2dyb3VuZDp0aGlzLl9kaXNhYmxlZENvbG9yLHQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl90aGlja25lc3MvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fdGhpY2tuZXNzLzIsaSxyKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0JsdXI9MCx0LnNoYWRvd09mZnNldFg9MCx0LnNoYWRvd09mZnNldFk9MCksdGhpcy5faXNDaGVja2VkKXt0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5jb2xvcjp0aGlzLl9kaXNhYmxlZENvbG9ySXRlbTt2YXIgbj1pKnRoaXMuX2NoZWNrU2l6ZVJhdGlvLG89cip0aGlzLl9jaGVja1NpemVSYXRpbzt0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fdGhpY2tuZXNzLzIrKGktbikvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fdGhpY2tuZXNzLzIrKHItbykvMixuLG8pfXQuc3Ryb2tlU3R5bGU9dGhpcy5jb2xvcix0LmxpbmVXaWR0aD10aGlzLl90aGlja25lc3MsdC5zdHJva2VSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX3RoaWNrbmVzcy8yLGksciksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiEhdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pJiYodGhpcy5pc0NoZWNrZWQ9IXRoaXMuaXNDaGVja2VkLCEwKX0sZS5BZGRDaGVja0JveFdpdGhIZWFkZXI9ZnVuY3Rpb24odCxpKXt2YXIgcj1uZXcgQztyLmlzVmVydGljYWw9ITEsci5oZWlnaHQ9XCIzMHB4XCI7dmFyIG49bmV3IGU7bi53aWR0aD1cIjIwcHhcIixuLmhlaWdodD1cIjIwcHhcIixuLmlzQ2hlY2tlZD0hMCxuLmNvbG9yPVwiZ3JlZW5cIixuLm9uSXNDaGVja2VkQ2hhbmdlZE9ic2VydmFibGUuYWRkKGkpLHIuYWRkQ29udHJvbChuKTt2YXIgbz1uZXcgeTtyZXR1cm4gby50ZXh0PXQsby53aWR0aD1cIjE4MHB4XCIsby5wYWRkaW5nTGVmdD1cIjVweFwiLG8udGV4dEhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG8uY29sb3I9XCJ3aGl0ZVwiLHIuYWRkQ29udHJvbChvKSxyfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuQ2hlY2tib3hcIl09dzt2YXIgVD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dm9pZCAwPT09aSYmKGk9XCJcIik7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIubmFtZT1lLHIuX3RleHQ9XCJcIixyLl9wbGFjZWhvbGRlclRleHQ9XCJcIixyLl9iYWNrZ3JvdW5kPVwiIzIyMjIyMlwiLHIuX2ZvY3VzZWRCYWNrZ3JvdW5kPVwiIzAwMDAwMFwiLHIuX2ZvY3VzZWRDb2xvcj1cIndoaXRlXCIsci5fcGxhY2Vob2xkZXJDb2xvcj1cImdyYXlcIixyLl90aGlja25lc3M9MSxyLl9tYXJnaW49bmV3IGEoMTAsYS5VTklUTU9ERV9QSVhFTCksci5fYXV0b1N0cmV0Y2hXaWR0aD0hMCxyLl9tYXhXaWR0aD1uZXcgYSgxLGEuVU5JVE1PREVfUEVSQ0VOVEFHRSwhMSksci5faXNGb2N1c2VkPSExLHIuX2JsaW5rSXNFdmVuPSExLHIuX2N1cnNvck9mZnNldD0wLHIuX2RlYWRLZXk9ITEsci5fYWRkS2V5PSEwLHIuX2N1cnJlbnRLZXk9XCJcIixyLl9pc1RleHRIaWdobGlnaHRPbj0hMSxyLl90ZXh0SGlnaGxpZ2h0Q29sb3I9XCIjZDVlMGZmXCIsci5faGlnaGxpZ2hlck9wYWNpdHk9LjQsci5faGlnaGxpZ2h0ZWRUZXh0PVwiXCIsci5fc3RhcnRIaWdobGlnaHRJbmRleD0wLHIuX2VuZEhpZ2hsaWdodEluZGV4PTAsci5fY3Vyc29ySW5kZXg9LTEsci5fb25Gb2N1c1NlbGVjdEFsbD0hMSxyLl9pc1BvaW50ZXJEb3duPSExLHIucHJvbXB0TWVzc2FnZT1cIlBsZWFzZSBlbnRlciB0ZXh0OlwiLHIuZGlzYWJsZU1vYmlsZVByb21wdD0hMSxyLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vbkJlZm9yZUtleUFkZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxyLm9uRm9jdXNPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vbkJsdXJPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vblRleHRIaWdobGlnaHRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vblRleHRDb3B5T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25UZXh0Q3V0T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25UZXh0UGFzdGVPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vbktleWJvYXJkRXZlbnRQcm9jZXNzZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci50ZXh0PWksci5pc1BvaW50ZXJCbG9ja2VyPSEwLHJ9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXhXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4V2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYXhXaWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX21heFdpZHRoLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWF4V2lkdGhJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4V2lkdGguZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGlnaGxpZ2hlck9wYWNpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hpZ2hsaWdoZXJPcGFjaXR5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faGlnaGxpZ2hlck9wYWNpdHkhPT10JiYodGhpcy5faGlnaGxpZ2hlck9wYWNpdHk9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJvbkZvY3VzU2VsZWN0QWxsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkZvY3VzU2VsZWN0QWxsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb25Gb2N1c1NlbGVjdEFsbCE9PXQmJih0aGlzLl9vbkZvY3VzU2VsZWN0QWxsPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGV4dEhpZ2hsaWdodENvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0SGlnaGxpZ2h0Q29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90ZXh0SGlnaGxpZ2h0Q29sb3IhPT10JiYodGhpcy5fdGV4dEhpZ2hsaWdodENvbG9yPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWFyZ2luXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXJnaW4udG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYXJnaW4udG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9tYXJnaW4uZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXJnaW5JblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFyZ2luLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUud2lkdGgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImF1dG9TdHJldGNoV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F1dG9TdHJldGNoV2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hdXRvU3RyZXRjaFdpZHRoIT09dCYmKHRoaXMuX2F1dG9TdHJldGNoV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aGlja25lc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RoaWNrbmVzc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RoaWNrbmVzcyE9PXQmJih0aGlzLl90aGlja25lc3M9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmb2N1c2VkQmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9jdXNlZEJhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb2N1c2VkQmFja2dyb3VuZCE9PXQmJih0aGlzLl9mb2N1c2VkQmFja2dyb3VuZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZvY3VzZWRDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9jdXNlZENvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9jdXNlZENvbG9yIT09dCYmKHRoaXMuX2ZvY3VzZWRDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwbGFjZWhvbGRlckNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFjZWhvbGRlckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxhY2Vob2xkZXJDb2xvciE9PXQmJih0aGlzLl9wbGFjZWhvbGRlckNvbG9yPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGxhY2Vob2xkZXJUZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGFjZWhvbGRlclRleHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGFjZWhvbGRlclRleHQhPT10JiYodGhpcy5fcGxhY2Vob2xkZXJUZXh0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGVhZEtleVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVhZEtleX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RlYWRLZXk9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoaWdobGlnaHRlZFRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hpZ2hsaWdodGVkVGV4dH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hpZ2hsaWdodGVkVGV4dCE9PXQmJih0aGlzLl9oaWdobGlnaHRlZFRleHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhZGRLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FkZEtleX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FkZEtleT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImN1cnJlbnRLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRLZXl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jdXJyZW50S2V5PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXQudG9TdHJpbmcoKTt0aGlzLl90ZXh0IT09ZSYmKHRoaXMuX3RleHQ9ZSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMub25UZXh0Q2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ3aWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJih0aGlzLl93aWR0aC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuYXV0b1N0cmV0Y2hXaWR0aD0hMSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dGhpcy5faXNGb2N1c2VkPSExLHRoaXMuX3Njcm9sbExlZnQ9bnVsbCx0aGlzLl9jdXJzb3JPZmZzZXQ9MCxjbGVhclRpbWVvdXQodGhpcy5fYmxpbmtUaW1lb3V0KSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMub25CbHVyT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy5faG9zdC51blJlZ2lzdGVyQ2xpcGJvYXJkRXZlbnRzKCksdGhpcy5fb25DbGlwYm9hcmRPYnNlcnZlciYmdGhpcy5faG9zdC5vbkNsaXBib2FyZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uQ2xpcGJvYXJkT2JzZXJ2ZXIpO3ZhciB0PXRoaXMuX2hvc3QuZ2V0U2NlbmUoKTt0aGlzLl9vblBvaW50ZXJEYmxUYXBPYnNlcnZlciYmdCYmdC5vblBvaW50ZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vblBvaW50ZXJEYmxUYXBPYnNlcnZlcil9LGUucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuX2lzRW5hYmxlZCl7aWYodGhpcy5fc2Nyb2xsTGVmdD1udWxsLHRoaXMuX2lzRm9jdXNlZD0hMCx0aGlzLl9ibGlua0lzRXZlbj0hMSx0aGlzLl9jdXJzb3JPZmZzZXQ9MCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMub25Gb2N1c09ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpLC0xIT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTW9iaWxlXCIpJiYhdGhpcy5kaXNhYmxlTW9iaWxlUHJvbXB0KXt2YXIgZT1wcm9tcHQodGhpcy5wcm9tcHRNZXNzYWdlKTtyZXR1cm4gbnVsbCE9PWUmJih0aGlzLnRleHQ9ZSksdm9pZCh0aGlzLl9ob3N0LmZvY3VzZWRDb250cm9sPW51bGwpfXRoaXMuX2hvc3QucmVnaXN0ZXJDbGlwYm9hcmRFdmVudHMoKSx0aGlzLl9vbkNsaXBib2FyZE9ic2VydmVyPXRoaXMuX2hvc3Qub25DbGlwYm9hcmRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlIHMuQ2xpcGJvYXJkRXZlbnRUeXBlcy5DT1BZOnQuX29uQ29weVRleHQoZS5ldmVudCksdC5vblRleHRDb3B5T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCk7YnJlYWs7Y2FzZSBzLkNsaXBib2FyZEV2ZW50VHlwZXMuQ1VUOnQuX29uQ3V0VGV4dChlLmV2ZW50KSx0Lm9uVGV4dEN1dE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHQpO2JyZWFrO2Nhc2Ugcy5DbGlwYm9hcmRFdmVudFR5cGVzLlBBU1RFOnQuX29uUGFzdGVUZXh0KGUuZXZlbnQpLHQub25UZXh0UGFzdGVPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0KTticmVhaztkZWZhdWx0OnJldHVybn19KTt2YXIgaT10aGlzLl9ob3N0LmdldFNjZW5lKCk7aSYmKHRoaXMuX29uUG9pbnRlckRibFRhcE9ic2VydmVyPWkub25Qb2ludGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oZSl7dC5faXNGb2N1c2VkJiZlLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJET1VCTEVUQVAmJnQuX3Byb2Nlc3NEYmxDbGljayhlKX0pKSx0aGlzLl9vbkZvY3VzU2VsZWN0QWxsJiZ0aGlzLl9zZWxlY3RBbGxUZXh0KCl9fSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIklucHV0VGV4dFwifSxlLnByb3RvdHlwZS5rZWVwc0ZvY3VzV2l0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0ZWRWaXJ0dWFsS2V5Ym9hcmQ/W3RoaXMuX2Nvbm5lY3RlZFZpcnR1YWxLZXlib2FyZF06bnVsbH0sZS5wcm90b3R5cGUucHJvY2Vzc0tleT1mdW5jdGlvbih0LGUsaSl7aWYoIWl8fCFpLmN0cmxLZXkmJiFpLm1ldGFLZXl8fDY3IT09dCYmODYhPT10JiY4OCE9PXQpe2lmKGkmJihpLmN0cmxLZXl8fGkubWV0YUtleSkmJjY1PT09dClyZXR1cm4gdGhpcy5fc2VsZWN0QWxsVGV4dCgpLHZvaWQgaS5wcmV2ZW50RGVmYXVsdCgpO3N3aXRjaCh0KXtjYXNlIDMyOmU9XCIgXCI7YnJlYWs7Y2FzZSAxOTE6aSYmaS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgODppZih0aGlzLl90ZXh0JiZ0aGlzLl90ZXh0Lmxlbmd0aD4wKXtpZih0aGlzLl9pc1RleHRIaWdobGlnaHRPbilyZXR1cm4gdGhpcy50ZXh0PXRoaXMuX3RleHQuc2xpY2UoMCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4KSt0aGlzLl90ZXh0LnNsaWNlKHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4KSx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy50ZXh0Lmxlbmd0aC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHRoaXMuX2JsaW5rSXNFdmVuPSExLHZvaWQoaSYmaS5wcmV2ZW50RGVmYXVsdCgpKTtpZigwPT09dGhpcy5fY3Vyc29yT2Zmc2V0KXRoaXMudGV4dD10aGlzLl90ZXh0LnN1YnN0cigwLHRoaXMuX3RleHQubGVuZ3RoLTEpO2Vsc2Uobj10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQpPjAmJih0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLG4tMSkrdGhpcy5fdGV4dC5zbGljZShuKSl9cmV0dXJuIHZvaWQoaSYmaS5wcmV2ZW50RGVmYXVsdCgpKTtjYXNlIDQ2OmlmKHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uKXt0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgpK3RoaXMuX3RleHQuc2xpY2UodGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgpO2Zvcih2YXIgcj10aGlzLl9lbmRIaWdobGlnaHRJbmRleC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4O3I+MCYmdGhpcy5fY3Vyc29yT2Zmc2V0PjA7KXRoaXMuX2N1cnNvck9mZnNldC0tO3JldHVybiB0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy50ZXh0Lmxlbmd0aC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHZvaWQoaSYmaS5wcmV2ZW50RGVmYXVsdCgpKX1pZih0aGlzLl90ZXh0JiZ0aGlzLl90ZXh0Lmxlbmd0aD4wJiZ0aGlzLl9jdXJzb3JPZmZzZXQ+MCl7dmFyIG49dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0O3RoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsbikrdGhpcy5fdGV4dC5zbGljZShuKzEpLHRoaXMuX2N1cnNvck9mZnNldC0tfXJldHVybiB2b2lkKGkmJmkucHJldmVudERlZmF1bHQoKSk7Y2FzZSAxMzpyZXR1cm4gdGhpcy5faG9zdC5mb2N1c2VkQ29udHJvbD1udWxsLHZvaWQodGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEpO2Nhc2UgMzU6cmV0dXJuIHRoaXMuX2N1cnNvck9mZnNldD0wLHRoaXMuX2JsaW5rSXNFdmVuPSExLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKTtjYXNlIDM2OnJldHVybiB0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5fYmxpbmtJc0V2ZW49ITEsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpO2Nhc2UgMzc6aWYodGhpcy5fY3Vyc29yT2Zmc2V0KyssdGhpcy5fY3Vyc29yT2Zmc2V0PnRoaXMuX3RleHQubGVuZ3RoJiYodGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoKSxpJiZpLnNoaWZ0S2V5KXtpZih0aGlzLl9ibGlua0lzRXZlbj0hMSxpLmN0cmxLZXl8fGkubWV0YUtleSl7aWYoIXRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uKXtpZih0aGlzLl90ZXh0Lmxlbmd0aD09PXRoaXMuX2N1cnNvck9mZnNldClyZXR1cm47dGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0KzF9cmV0dXJuIHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9MCx0aGlzLl9jdXJzb3JJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9lbmRIaWdobGlnaHRJbmRleCx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITAsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpfXJldHVybiB0aGlzLl9pc1RleHRIaWdobGlnaHRPbj8tMT09PXRoaXMuX2N1cnNvckluZGV4JiYodGhpcy5fY3Vyc29ySW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgsdGhpcy5fY3Vyc29yT2Zmc2V0PTA9PT10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4P3RoaXMuX3RleHQubGVuZ3RoOnRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgrMSk6KHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX2N1cnNvckluZGV4PXRoaXMuX2N1cnNvck9mZnNldD49dGhpcy5fdGV4dC5sZW5ndGg/dGhpcy5fdGV4dC5sZW5ndGg6dGhpcy5fY3Vyc29yT2Zmc2V0LTEpLHRoaXMuX2N1cnNvckluZGV4PHRoaXMuX2N1cnNvck9mZnNldD8odGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29ySW5kZXgsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQpOnRoaXMuX2N1cnNvckluZGV4PnRoaXMuX2N1cnNvck9mZnNldD8odGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0LHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29ySW5kZXgpOnRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKX1yZXR1cm4gdGhpcy5faXNUZXh0SGlnaGxpZ2h0T24mJih0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSksaSYmKGkuY3RybEtleXx8aS5tZXRhS2V5KSYmKHRoaXMuX2N1cnNvck9mZnNldD10aGlzLnRleHQubGVuZ3RoLGkucHJldmVudERlZmF1bHQoKSksdGhpcy5fYmxpbmtJc0V2ZW49ITEsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fY3Vyc29ySW5kZXg9LTEsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpO2Nhc2UgMzk6aWYodGhpcy5fY3Vyc29yT2Zmc2V0LS0sdGhpcy5fY3Vyc29yT2Zmc2V0PDAmJih0aGlzLl9jdXJzb3JPZmZzZXQ9MCksaSYmaS5zaGlmdEtleSl7aWYodGhpcy5fYmxpbmtJc0V2ZW49ITEsaS5jdHJsS2V5fHxpLm1ldGFLZXkpe2lmKCF0aGlzLl9pc1RleHRIaWdobGlnaHRPbil7aWYoMD09PXRoaXMuX2N1cnNvck9mZnNldClyZXR1cm47dGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQtMX1yZXR1cm4gdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITAsdGhpcy5fY3Vyc29ySW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLl9jdXJzb3JPZmZzZXQ9MCx2b2lkIHRoaXMuX21hcmtBc0RpcnR5KCl9cmV0dXJuIHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPy0xPT09dGhpcy5fY3Vyc29ySW5kZXgmJih0aGlzLl9jdXJzb3JJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHRoaXMuX2N1cnNvck9mZnNldD10aGlzLl90ZXh0Lmxlbmd0aD09PXRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PzA6dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgtMSk6KHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX2N1cnNvckluZGV4PXRoaXMuX2N1cnNvck9mZnNldDw9MD8wOnRoaXMuX2N1cnNvck9mZnNldCsxKSx0aGlzLl9jdXJzb3JJbmRleDx0aGlzLl9jdXJzb3JPZmZzZXQ/KHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvckluZGV4LHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0KTp0aGlzLl9jdXJzb3JJbmRleD50aGlzLl9jdXJzb3JPZmZzZXQ/KHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvckluZGV4KTp0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx2b2lkIHRoaXMuX21hcmtBc0RpcnR5KCl9cmV0dXJuIHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uJiYodGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2VuZEhpZ2hsaWdodEluZGV4LHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExKSxpJiYoaS5jdHJsS2V5fHxpLm1ldGFLZXkpJiYodGhpcy5fY3Vyc29yT2Zmc2V0PTAsaS5wcmV2ZW50RGVmYXVsdCgpKSx0aGlzLl9ibGlua0lzRXZlbj0hMSx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx0aGlzLl9jdXJzb3JJbmRleD0tMSx2b2lkIHRoaXMuX21hcmtBc0RpcnR5KCk7Y2FzZSAyMjI6aSYmaS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2N1cnNvckluZGV4PS0xLHRoaXMuZGVhZEtleT0hMH1pZihlJiYoLTE9PT10fHwzMj09PXR8fHQ+NDcmJnQ8NjR8fHQ+NjQmJnQ8OTF8fHQ+MTU5JiZ0PDE5M3x8dD4yMTgmJnQ8MjIzfHx0Pjk1JiZ0PDExMikmJih0aGlzLl9jdXJyZW50S2V5PWUsdGhpcy5vbkJlZm9yZUtleUFkZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpLGU9dGhpcy5fY3VycmVudEtleSx0aGlzLl9hZGRLZXkpKWlmKHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uKXRoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCkrZSt0aGlzLl90ZXh0LnNsaWNlKHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4KSx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy50ZXh0Lmxlbmd0aC0odGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCsxKSx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx0aGlzLl9ibGlua0lzRXZlbj0hMSx0aGlzLl9tYXJrQXNEaXJ0eSgpO2Vsc2UgaWYoMD09PXRoaXMuX2N1cnNvck9mZnNldCl0aGlzLnRleHQrPWU7ZWxzZXt2YXIgbz10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQ7dGhpcy50ZXh0PXRoaXMuX3RleHQuc2xpY2UoMCxvKStlK3RoaXMuX3RleHQuc2xpY2Uobyl9fX0sZS5wcm90b3R5cGUuX3VwZGF0ZVZhbHVlRnJvbUN1cnNvckluZGV4PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2JsaW5rSXNFdmVuPSExLC0xPT09dGhpcy5fY3Vyc29ySW5kZXgpdGhpcy5fY3Vyc29ySW5kZXg9dDtlbHNlIGlmKHRoaXMuX2N1cnNvckluZGV4PHRoaXMuX2N1cnNvck9mZnNldCl0aGlzLl9lbmRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JJbmRleCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldDtlbHNle2lmKCEodGhpcy5fY3Vyc29ySW5kZXg+dGhpcy5fY3Vyc29yT2Zmc2V0KSlyZXR1cm4gdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpO3RoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvckluZGV4fXRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX21hcmtBc0RpcnR5KCl9LGUucHJvdG90eXBlLl9wcm9jZXNzRGJsQ2xpY2s9ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQsdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleDt2YXIgZSxpLHI9L1xcdysvZztkb3tpPXRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PHRoaXMuX3RleHQubGVuZ3RoJiYtMSE9PXRoaXMuX3RleHRbdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXhdLnNlYXJjaChyKT8rK3RoaXMuX2VuZEhpZ2hsaWdodEluZGV4OjAsZT10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PjAmJi0xIT09dGhpcy5fdGV4dFt0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LTFdLnNlYXJjaChyKT8tLXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg6MH13aGlsZShlfHxpKTt0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy50ZXh0Lmxlbmd0aC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHRoaXMub25UZXh0SGlnaGxpZ2h0T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITAsdGhpcy5fY2xpY2tlZENvb3JkaW5hdGU9bnVsbCx0aGlzLl9ibGlua0lzRXZlbj0hMCx0aGlzLl9jdXJzb3JJbmRleD0tMSx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlLnByb3RvdHlwZS5fc2VsZWN0QWxsVGV4dD1mdW5jdGlvbigpe3RoaXMuX2JsaW5rSXNFdmVuPSEwLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9MCx0aGlzLl9lbmRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aCx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5fY3Vyc29ySW5kZXg9LTEsdGhpcy5fbWFya0FzRGlydHkoKX0sZS5wcm90b3R5cGUucHJvY2Vzc0tleWJvYXJkPWZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc0tleSh0LmtleUNvZGUsdC5rZXksdCksdGhpcy5vbktleWJvYXJkRXZlbnRQcm9jZXNzZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0KX0sZS5wcm90b3R5cGUuX29uQ29weVRleHQ9ZnVuY3Rpb24odCl7dGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITE7dHJ5e3QuY2xpcGJvYXJkRGF0YSYmdC5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsdGhpcy5faGlnaGxpZ2h0ZWRUZXh0KX1jYXRjaCh0KXt9dGhpcy5faG9zdC5jbGlwYm9hcmREYXRhPXRoaXMuX2hpZ2hsaWdodGVkVGV4dH0sZS5wcm90b3R5cGUuX29uQ3V0VGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLl9oaWdobGlnaHRlZFRleHQpe3RoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCkrdGhpcy5fdGV4dC5zbGljZSh0aGlzLl9lbmRIaWdobGlnaHRJbmRleCksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMudGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleDt0cnl7dC5jbGlwYm9hcmREYXRhJiZ0LmNsaXBib2FyZERhdGEuc2V0RGF0YShcInRleHQvcGxhaW5cIix0aGlzLl9oaWdobGlnaHRlZFRleHQpfWNhdGNoKHQpe310aGlzLl9ob3N0LmNsaXBib2FyZERhdGE9dGhpcy5faGlnaGxpZ2h0ZWRUZXh0LHRoaXMuX2hpZ2hsaWdodGVkVGV4dD1cIlwifX0sZS5wcm90b3R5cGUuX29uUGFzdGVUZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7ZT10LmNsaXBib2FyZERhdGEmJi0xIT09dC5jbGlwYm9hcmREYXRhLnR5cGVzLmluZGV4T2YoXCJ0ZXh0L3BsYWluXCIpP3QuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKTp0aGlzLl9ob3N0LmNsaXBib2FyZERhdGE7dmFyIGk9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0O3RoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsaSkrZSt0aGlzLl90ZXh0LnNsaWNlKGkpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7dC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0aGlzLl9pc0ZvY3VzZWQ/dGhpcy5fZm9jdXNlZEJhY2tncm91bmQmJih0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5fZm9jdXNlZEJhY2tncm91bmQ6dGhpcy5fZGlzYWJsZWRDb2xvcix0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkpOnRoaXMuX2JhY2tncm91bmQmJih0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5fYmFja2dyb3VuZDp0aGlzLl9kaXNhYmxlZENvbG9yLHQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHRoaXMuX2ZvbnRPZmZzZXR8fCh0aGlzLl9mb250T2Zmc2V0PXAuX0dldEZvbnRPZmZzZXQodC5mb250KSk7dmFyIHI9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9tYXJnaW4uZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fdGVtcFBhcmVudE1lYXN1cmUud2lkdGgpO3RoaXMuY29sb3ImJih0LmZpbGxTdHlsZT10aGlzLmNvbG9yKTt2YXIgbj10aGlzLl9iZWZvcmVSZW5kZXJUZXh0KHRoaXMuX3RleHQpO3RoaXMuX2lzRm9jdXNlZHx8dGhpcy5fdGV4dHx8IXRoaXMuX3BsYWNlaG9sZGVyVGV4dHx8KG49dGhpcy5fcGxhY2Vob2xkZXJUZXh0LHRoaXMuX3BsYWNlaG9sZGVyQ29sb3ImJih0LmZpbGxTdHlsZT10aGlzLl9wbGFjZWhvbGRlckNvbG9yKSksdGhpcy5fdGV4dFdpZHRoPXQubWVhc3VyZVRleHQobikud2lkdGg7dmFyIG89Mip0aGlzLl9tYXJnaW4uZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fdGVtcFBhcmVudE1lYXN1cmUud2lkdGgpO3RoaXMuX2F1dG9TdHJldGNoV2lkdGgmJih0aGlzLndpZHRoPU1hdGgubWluKHRoaXMuX21heFdpZHRoLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlLndpZHRoKSx0aGlzLl90ZXh0V2lkdGgrbykrXCJweFwiKTt2YXIgcz10aGlzLl9mb250T2Zmc2V0LmFzY2VudCsodGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LXRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0KS8yLGE9dGhpcy5fd2lkdGguZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fdGVtcFBhcmVudE1lYXN1cmUud2lkdGgpLW87aWYodC5zYXZlKCksdC5iZWdpblBhdGgoKSx0LnJlY3Qocix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl9mb250T2Zmc2V0LmhlaWdodCkvMixhKzIsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0LmNsaXAoKSx0aGlzLl9pc0ZvY3VzZWQmJnRoaXMuX3RleHRXaWR0aD5hKXt2YXIgaD1yLXRoaXMuX3RleHRXaWR0aCthO3RoaXMuX3Njcm9sbExlZnR8fCh0aGlzLl9zY3JvbGxMZWZ0PWgpfWVsc2UgdGhpcy5fc2Nyb2xsTGVmdD1yO2lmKHQuZmlsbFRleHQobix0aGlzLl9zY3JvbGxMZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtzKSx0aGlzLl9pc0ZvY3VzZWQpe2lmKHRoaXMuX2NsaWNrZWRDb29yZGluYXRlKXt2YXIgbD10aGlzLl9zY3JvbGxMZWZ0K3RoaXMuX3RleHRXaWR0aC10aGlzLl9jbGlja2VkQ29vcmRpbmF0ZSx1PTA7dGhpcy5fY3Vyc29yT2Zmc2V0PTA7dmFyIGM9MDtkb3t0aGlzLl9jdXJzb3JPZmZzZXQmJihjPU1hdGguYWJzKGwtdSkpLHRoaXMuX2N1cnNvck9mZnNldCsrLHU9dC5tZWFzdXJlVGV4dChuLnN1YnN0cihuLmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQsdGhpcy5fY3Vyc29yT2Zmc2V0KSkud2lkdGh9d2hpbGUodTxsJiZuLmxlbmd0aD49dGhpcy5fY3Vyc29yT2Zmc2V0KTtNYXRoLmFicyhsLXUpPmMmJnRoaXMuX2N1cnNvck9mZnNldC0tLHRoaXMuX2JsaW5rSXNFdmVuPSExLHRoaXMuX2NsaWNrZWRDb29yZGluYXRlPW51bGx9aWYoIXRoaXMuX2JsaW5rSXNFdmVuKXt2YXIgXz10aGlzLnRleHQuc3Vic3RyKHRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCksZD10Lm1lYXN1cmVUZXh0KF8pLndpZHRoLGY9dGhpcy5fc2Nyb2xsTGVmdCt0aGlzLl90ZXh0V2lkdGgtZDtmPHI/KHRoaXMuX3Njcm9sbExlZnQrPXItZixmPXIsdGhpcy5fbWFya0FzRGlydHkoKSk6Zj5yK2EmJih0aGlzLl9zY3JvbGxMZWZ0Kz1yK2EtZixmPXIrYSx0aGlzLl9tYXJrQXNEaXJ0eSgpKSx0aGlzLl9pc1RleHRIaWdobGlnaHRPbnx8dC5maWxsUmVjdChmLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCsodGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LXRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0KS8yLDIsdGhpcy5fZm9udE9mZnNldC5oZWlnaHQpfWlmKGNsZWFyVGltZW91dCh0aGlzLl9ibGlua1RpbWVvdXQpLHRoaXMuX2JsaW5rVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5fYmxpbmtJc0V2ZW49IWkuX2JsaW5rSXNFdmVuLGkuX21hcmtBc0RpcnR5KCl9LDUwMCksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T24pe2NsZWFyVGltZW91dCh0aGlzLl9ibGlua1RpbWVvdXQpO3ZhciBnPXQubWVhc3VyZVRleHQodGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4KSkud2lkdGgsYj10aGlzLl9zY3JvbGxMZWZ0K3RoaXMuX3RleHRXaWR0aC1nO3RoaXMuX2hpZ2hsaWdodGVkVGV4dD10aGlzLnRleHQuc3Vic3RyaW5nKHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgsdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgpO3ZhciBtPXQubWVhc3VyZVRleHQodGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4KSkud2lkdGg7YjxyJiYoKG0tPXItYil8fChtPXQubWVhc3VyZVRleHQodGhpcy50ZXh0LmNoYXJBdCh0aGlzLnRleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCkpLndpZHRoKSxiPXIpLHQuZ2xvYmFsQWxwaGE9dGhpcy5faGlnaGxpZ2hlck9wYWNpdHksdC5maWxsU3R5bGU9dGhpcy5fdGV4dEhpZ2hsaWdodENvbG9yLHQuZmlsbFJlY3QoYix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl9mb250T2Zmc2V0LmhlaWdodCkvMixtLHRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0KSx0Lmdsb2JhbEFscGhhPTF9fXQucmVzdG9yZSgpLHRoaXMuX3RoaWNrbmVzcyYmKHRoaXMuX2lzRm9jdXNlZD90aGlzLmZvY3VzZWRDb2xvciYmKHQuc3Ryb2tlU3R5bGU9dGhpcy5mb2N1c2VkQ29sb3IpOnRoaXMuY29sb3ImJih0LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IpLHQubGluZVdpZHRoPXRoaXMuX3RoaWNrbmVzcyx0LnN0cm9rZVJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl90aGlja25lc3MvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtdGhpcy5fdGhpY2tuZXNzLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl90aGlja25lc3MpKSx0LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlckRvd249ZnVuY3Rpb24oZSxpLHIsbil7cmV0dXJuISF0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bi5jYWxsKHRoaXMsZSxpLHIsbikmJih0aGlzLl9jbGlja2VkQ29vcmRpbmF0ZT1pLngsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5faGlnaGxpZ2h0ZWRUZXh0PVwiXCIsdGhpcy5fY3Vyc29ySW5kZXg9LTEsdGhpcy5faXNQb2ludGVyRG93bj0hMCx0aGlzLl9ob3N0Ll9jYXB0dXJpbmdDb250cm9sW3JdPXRoaXMsdGhpcy5faG9zdC5mb2N1c2VkQ29udHJvbD09PXRoaXM/KGNsZWFyVGltZW91dCh0aGlzLl9ibGlua1RpbWVvdXQpLHRoaXMuX21hcmtBc0RpcnR5KCksITApOiEhdGhpcy5faXNFbmFibGVkJiYodGhpcy5faG9zdC5mb2N1c2VkQ29udHJvbD10aGlzLCEwKSl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlPWZ1bmN0aW9uKGUsaSxyKXt0aGlzLl9ob3N0LmZvY3VzZWRDb250cm9sPT09dGhpcyYmdGhpcy5faXNQb2ludGVyRG93biYmKHRoaXMuX2NsaWNrZWRDb29yZGluYXRlPWkueCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX3VwZGF0ZVZhbHVlRnJvbUN1cnNvckluZGV4KHRoaXMuX2N1cnNvck9mZnNldCkpLHQucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlLmNhbGwodGhpcyxlLGkscil9LGUucHJvdG90eXBlLl9vblBvaW50ZXJVcD1mdW5jdGlvbihlLGkscixuLG8pe3RoaXMuX2lzUG9pbnRlckRvd249ITEsZGVsZXRlIHRoaXMuX2hvc3QuX2NhcHR1cmluZ0NvbnRyb2xbcl0sdC5wcm90b3R5cGUuX29uUG9pbnRlclVwLmNhbGwodGhpcyxlLGkscixuLG8pfSxlLnByb3RvdHlwZS5fYmVmb3JlUmVuZGVyVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdH0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm9uQmx1ck9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uRm9jdXNPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25UZXh0Q29weU9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uVGV4dEN1dE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uVGV4dFBhc3RlT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25UZXh0SGlnaGxpZ2h0T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25LZXlib2FyZEV2ZW50UHJvY2Vzc2VkT2JzZXJ2YWJsZS5jbGVhcigpfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuSW5wdXRUZXh0XCJdPVQ7dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fcm93RGVmaW5pdGlvbnM9bmV3IEFycmF5LGkuX2NvbHVtbkRlZmluaXRpb25zPW5ldyBBcnJheSxpLl9jZWxscz17fSxpLl9jaGlsZENvbnRyb2xzPW5ldyBBcnJheSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29sdW1uQ291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyb3dDb3VudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm93RGVmaW5pdGlvbnMubGVuZ3RofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNoaWxkcmVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZENvbnRyb2xzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNlbGxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jZWxsc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXRSb3dEZWZpbml0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0PDB8fHQ+PXRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aD9udWxsOnRoaXMuX3Jvd0RlZmluaXRpb25zW3RdfSxlLnByb3RvdHlwZS5nZXRDb2x1bW5EZWZpbml0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0PDB8fHQ+PXRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aD9udWxsOnRoaXMuX2NvbHVtbkRlZmluaXRpb25zW3RdfSxlLnByb3RvdHlwZS5hZGRSb3dEZWZpbml0aW9uPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSx0aGlzLl9yb3dEZWZpbml0aW9ucy5wdXNoKG5ldyBhKHQsZT9hLlVOSVRNT0RFX1BJWEVMOmEuVU5JVE1PREVfUEVSQ0VOVEFHRSkpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpc30sZS5wcm90b3R5cGUuYWRkQ29sdW1uRGVmaW5pdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy5fY29sdW1uRGVmaW5pdGlvbnMucHVzaChuZXcgYSh0LGU/YS5VTklUTU9ERV9QSVhFTDphLlVOSVRNT0RFX1BFUkNFTlRBR0UpKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLnNldFJvd0RlZmluaXRpb249ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWkmJihpPSExKSx0PDB8fHQ+PXRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgcj10aGlzLl9yb3dEZWZpbml0aW9uc1t0XTtyZXR1cm4gciYmci5pc1BpeGVsPT09aSYmci5pbnRlcm5hbFZhbHVlPT09ZT90aGlzOih0aGlzLl9yb3dEZWZpbml0aW9uc1t0XT1uZXcgYShlLGk/YS5VTklUTU9ERV9QSVhFTDphLlVOSVRNT0RFX1BFUkNFTlRBR0UpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcyl9LGUucHJvdG90eXBlLnNldENvbHVtbkRlZmluaXRpb249ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWkmJihpPSExKSx0PDB8fHQ+PXRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgcj10aGlzLl9jb2x1bW5EZWZpbml0aW9uc1t0XTtyZXR1cm4gciYmci5pc1BpeGVsPT09aSYmci5pbnRlcm5hbFZhbHVlPT09ZT90aGlzOih0aGlzLl9jb2x1bW5EZWZpbml0aW9uc1t0XT1uZXcgYShlLGk/YS5VTklUTU9ERV9QSVhFTDphLlVOSVRNT0RFX1BFUkNFTlRBR0UpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcyl9LGUucHJvdG90eXBlLmdldENoaWxkcmVuQXQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9jZWxsc1t0K1wiOlwiK2VdO3JldHVybiBpP2kuY2hpbGRyZW46bnVsbH0sZS5wcm90b3R5cGUuZ2V0Q2hpbGRDZWxsSW5mbz1mdW5jdGlvbih0KXtyZXR1cm4gdC5fdGFnfSxlLnByb3RvdHlwZS5fcmVtb3ZlQ2VsbD1mdW5jdGlvbihlLGkpe2lmKGUpe3QucHJvdG90eXBlLnJlbW92ZUNvbnRyb2wuY2FsbCh0aGlzLGUpO2Zvcih2YXIgcj0wLG49ZS5jaGlsZHJlbjtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXSxzPXRoaXMuX2NoaWxkQ29udHJvbHMuaW5kZXhPZihvKTstMSE9PXMmJnRoaXMuX2NoaWxkQ29udHJvbHMuc3BsaWNlKHMsMSl9ZGVsZXRlIHRoaXMuX2NlbGxzW2ldfX0sZS5wcm90b3R5cGUuX29mZnNldENlbGw9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9jZWxsc1tlXSl7dGhpcy5fY2VsbHNbdF09dGhpcy5fY2VsbHNbZV07Zm9yKHZhciBpPTAscj10aGlzLl9jZWxsc1t0XS5jaGlsZHJlbjtpPHIubGVuZ3RoO2krKyl7cltpXS5fdGFnPXR9ZGVsZXRlIHRoaXMuX2NlbGxzW2VdfX0sZS5wcm90b3R5cGUucmVtb3ZlQ29sdW1uRGVmaW5pdGlvbj1mdW5jdGlvbih0KXtpZih0PDB8fHQ+PXRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aClyZXR1cm4gdGhpcztmb3IodmFyIGU9MDtlPHRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aDtlKyspe3ZhciBpPWUrXCI6XCIrdCxyPXRoaXMuX2NlbGxzW2ldO3RoaXMuX3JlbW92ZUNlbGwocixpKX1mb3IoZT0wO2U8dGhpcy5fcm93RGVmaW5pdGlvbnMubGVuZ3RoO2UrKylmb3IodmFyIG49dCsxO248dGhpcy5fY29sdW1uRGVmaW5pdGlvbnMubGVuZ3RoO24rKyl7dmFyIG89ZStcIjpcIisobi0xKTtpPWUrXCI6XCIrbjt0aGlzLl9vZmZzZXRDZWxsKG8saSl9cmV0dXJuIHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLnNwbGljZSh0LDEpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpc30sZS5wcm90b3R5cGUucmVtb3ZlUm93RGVmaW5pdGlvbj1mdW5jdGlvbih0KXtpZih0PDB8fHQ+PXRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aClyZXR1cm4gdGhpcztmb3IodmFyIGU9MDtlPHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aDtlKyspe3ZhciBpPXQrXCI6XCIrZSxyPXRoaXMuX2NlbGxzW2ldO3RoaXMuX3JlbW92ZUNlbGwocixpKX1mb3IoZT0wO2U8dGhpcy5fY29sdW1uRGVmaW5pdGlvbnMubGVuZ3RoO2UrKylmb3IodmFyIG49dCsxO248dGhpcy5fcm93RGVmaW5pdGlvbnMubGVuZ3RoO24rKyl7dmFyIG89bi0xK1wiOlwiK2U7aT1uK1wiOlwiK2U7dGhpcy5fb2Zmc2V0Q2VsbChvLGkpfXJldHVybiB0aGlzLl9yb3dEZWZpbml0aW9ucy5zcGxpY2UodCwxKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLmFkZENvbnRyb2w9ZnVuY3Rpb24oZSxpLHIpe2lmKHZvaWQgMD09PWkmJihpPTApLHZvaWQgMD09PXImJihyPTApLDA9PT10aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGgmJnRoaXMuYWRkUm93RGVmaW5pdGlvbigxLCExKSwwPT09dGhpcy5fY29sdW1uRGVmaW5pdGlvbnMubGVuZ3RoJiZ0aGlzLmFkZENvbHVtbkRlZmluaXRpb24oMSwhMSksLTEhPT10aGlzLl9jaGlsZENvbnRyb2xzLmluZGV4T2YoZSkpcmV0dXJuIHMuVG9vbHMuV2FybihcIkNvbnRyb2wgKE5hbWU6XCIrZS5uYW1lK1wiLCBVbmlxdWVJZDpcIitlLnVuaXF1ZUlkK1wiKSBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGdyaWQuIFlvdSBtdXN0IHJlbW92ZSBpdCBiZWZvcmUgcmVhdHRhY2hpbmcgaXRcIiksdGhpczt2YXIgbj1NYXRoLm1pbihpLHRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aC0xKStcIjpcIitNYXRoLm1pbihyLHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aC0xKSxvPXRoaXMuX2NlbGxzW25dO3JldHVybiBvfHwobz1uZXcgZyhuKSx0aGlzLl9jZWxsc1tuXT1vLG8uaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsby52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1AsdC5wcm90b3R5cGUuYWRkQ29udHJvbC5jYWxsKHRoaXMsbykpLG8uYWRkQ29udHJvbChlKSx0aGlzLl9jaGlsZENvbnRyb2xzLnB1c2goZSksZS5fdGFnPW4sZS5wYXJlbnQ9dGhpcyx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLnJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY2hpbGRDb250cm9scy5pbmRleE9mKHQpOy0xIT09ZSYmdGhpcy5fY2hpbGRDb250cm9scy5zcGxpY2UoZSwxKTt2YXIgaT10aGlzLl9jZWxsc1t0Ll90YWddO3JldHVybiBpJiYoaS5yZW1vdmVDb250cm9sKHQpLHQuX3RhZz1udWxsKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiR3JpZFwifSxlLnByb3RvdHlwZS5fZ2V0R3JpZERlZmluaXRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxpPVtdLHI9W10sbj1bXSxvPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHM9MCxhPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCxoPTAsbD0wLHU9MCxjPXRoaXMuX3Jvd0RlZmluaXRpb25zO3U8Yy5sZW5ndGg7dSsrKXtpZigoZz1jW3VdKS5pc1BpeGVsKWEtPXA9Zy5nZXRWYWx1ZSh0aGlzLl9ob3N0KSxpW2xdPXA7ZWxzZSBoKz1nLmludGVybmFsVmFsdWU7bCsrfXZhciBfPTA7bD0wO2Zvcih2YXIgZD0wLGY9dGhpcy5fcm93RGVmaW5pdGlvbnM7ZDxmLmxlbmd0aDtkKyspe3ZhciBwLGc9ZltkXTtpZihuLnB1c2goXyksZy5pc1BpeGVsKV8rPWcuZ2V0VmFsdWUodGhpcy5faG9zdCk7ZWxzZSBfKz1wPWcuaW50ZXJuYWxWYWx1ZS9oKmEsaVtsXT1wO2wrK31sPTA7Zm9yKHZhciBiPTAsbT10aGlzLl9jb2x1bW5EZWZpbml0aW9ucztiPG0ubGVuZ3RoO2IrKyl7aWYoKGc9bVtiXSkuaXNQaXhlbClvLT1DPWcuZ2V0VmFsdWUodGhpcy5faG9zdCksZVtsXT1DO2Vsc2Ugcys9Zy5pbnRlcm5hbFZhbHVlO2wrK312YXIgeT0wO2w9MDtmb3IodmFyIHY9MCxPPXRoaXMuX2NvbHVtbkRlZmluaXRpb25zO3Y8Ty5sZW5ndGg7disrKXt2YXIgQztnPU9bdl07aWYoci5wdXNoKHkpLGcuaXNQaXhlbCl5Kz1nLmdldFZhbHVlKHRoaXMuX2hvc3QpO2Vsc2UgeSs9Qz1nLmludGVybmFsVmFsdWUvcypvLGVbbF09QztsKyt9dChyLG4sZSxpKX0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dmFyIHI9dGhpczt0aGlzLl9nZXRHcmlkRGVmaW5pdGlvbnMoZnVuY3Rpb24odCxlLGksbil7Zm9yKHZhciBvIGluIHIuX2NlbGxzKWlmKHIuX2NlbGxzLmhhc093blByb3BlcnR5KG8pKXt2YXIgcz1vLnNwbGl0KFwiOlwiKSxhPXBhcnNlSW50KHNbMF0pLGg9cGFyc2VJbnQoc1sxXSksbD1yLl9jZWxsc1tvXTtsLmxlZnQ9dFtoXStcInB4XCIsbC50b3A9ZVthXStcInB4XCIsbC53aWR0aD1pW2hdK1wicHhcIixsLmhlaWdodD1uW2FdK1wicHhcIixsLl9sZWZ0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCxsLl90b3AuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwLGwuX3dpZHRoLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCxsLl9oZWlnaHQuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwfX0pLHQucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZy5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUuX2ZsYWdEZXNjZW5kYW50c0FzTWF0cml4RGlydHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fY2VsbHMpe2lmKHRoaXMuX2NlbGxzLmhhc093blByb3BlcnR5KHQpKXRoaXMuX2NlbGxzW3RdLl9tYXJrTWF0cml4QXNEaXJ0eSgpfX0sZS5wcm90b3R5cGUuX3JlbmRlckhpZ2hsaWdodFNwZWNpZmljPWZ1bmN0aW9uKGUpe3ZhciBpPXRoaXM7dC5wcm90b3R5cGUuX3JlbmRlckhpZ2hsaWdodFNwZWNpZmljLmNhbGwodGhpcyxlKSx0aGlzLl9nZXRHcmlkRGVmaW5pdGlvbnMoZnVuY3Rpb24odCxyLG4sbyl7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspe3ZhciBhPWkuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdFtzXStuW3NdO2UuYmVnaW5QYXRoKCksZS5tb3ZlVG8oYSxpLl9jdXJyZW50TWVhc3VyZS50b3ApLGUubGluZVRvKGEsaS5fY3VycmVudE1lYXN1cmUudG9wK2kuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksZS5zdHJva2UoKX1mb3Iocz0wO3M8ci5sZW5ndGg7cysrKXt2YXIgaD1pLl9jdXJyZW50TWVhc3VyZS50b3ArcltzXStvW3NdO2UuYmVnaW5QYXRoKCksZS5tb3ZlVG8oaS5fY3VycmVudE1lYXN1cmUubGVmdCxoKSxlLmxpbmVUbyhpLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2kuX2N1cnJlbnRNZWFzdXJlLndpZHRoLGgpLGUuc3Ryb2tlKCl9fSksZS5yZXN0b3JlKCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciBlPTAsaT10aGlzLl9jaGlsZENvbnRyb2xzO2U8aS5sZW5ndGg7ZSsrKXtpW2VdLmRpc3Bvc2UoKX10aGlzLl9jaGlsZENvbnRyb2xzPVtdfSxlfShnKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuR3JpZFwiXT14O3ZhciBNPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3ZhbHVlPXMuQ29sb3IzLlJlZCgpLGkuX3RtcENvbG9yPW5ldyBzLkNvbG9yMyxpLl9wb2ludGVyU3RhcnRlZE9uU3F1YXJlPSExLGkuX3BvaW50ZXJTdGFydGVkT25XaGVlbD0hMSxpLl9zcXVhcmVMZWZ0PTAsaS5fc3F1YXJlVG9wPTAsaS5fc3F1YXJlU2l6ZT0wLGkuX2g9MzYwLGkuX3M9MSxpLl92PTEsaS5fbGFzdFBvaW50ZXJEb3duSUQ9LTEsaS5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxpLl9wb2ludGVySXNEb3duPSExLGkudmFsdWU9bmV3IHMuQ29sb3IzKC44OCwuMSwuMSksaS5zaXplPVwiMjAwcHhcIixpLmlzUG9pbnRlckJsb2NrZXI9ITAsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZhbHVlLmVxdWFscyh0KXx8KHRoaXMuX3ZhbHVlLmNvcHlGcm9tKHQpLHRoaXMuX3ZhbHVlLnRvSFNWVG9SZWYodGhpcy5fdG1wQ29sb3IpLHRoaXMuX2g9dGhpcy5fdG1wQ29sb3Iucix0aGlzLl9zPU1hdGgubWF4KHRoaXMuX3RtcENvbG9yLmcsMWUtNSksdGhpcy5fdj1NYXRoLm1heCh0aGlzLl90bXBDb2xvci5iLDFlLTUpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5fdmFsdWUucjw9ZS5fRXBzaWxvbiYmKHRoaXMuX3ZhbHVlLnI9MCksdGhpcy5fdmFsdWUuZzw9ZS5fRXBzaWxvbiYmKHRoaXMuX3ZhbHVlLmc9MCksdGhpcy5fdmFsdWUuYjw9ZS5fRXBzaWxvbiYmKHRoaXMuX3ZhbHVlLmI9MCksdGhpcy5fdmFsdWUucj49MS1lLl9FcHNpbG9uJiYodGhpcy5fdmFsdWUucj0xKSx0aGlzLl92YWx1ZS5nPj0xLWUuX0Vwc2lsb24mJih0aGlzLl92YWx1ZS5nPTEpLHRoaXMuX3ZhbHVlLmI+PTEtZS5fRXBzaWxvbiYmKHRoaXMuX3ZhbHVlLmI9MSksdGhpcy5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMuX3ZhbHVlKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl93aWR0aC5mcm9tU3RyaW5nKHQpJiYodGhpcy5faGVpZ2h0LmZyb21TdHJpbmcodCksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9oZWlnaHQuZnJvbVN0cmluZyh0KSYmKHRoaXMuX3dpZHRoLmZyb21TdHJpbmcodCksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMud2lkdGg9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkNvbG9yUGlja2VyXCJ9LGUucHJvdG90eXBlLl9wcmVNZWFzdXJlPWZ1bmN0aW9uKHQsZSl7dC53aWR0aDx0LmhlaWdodD90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ9dC53aWR0aDp0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD10LmhlaWdodH0sZS5wcm90b3R5cGUuX3VwZGF0ZVNxdWFyZVByb3BzPWZ1bmN0aW9uKCl7dmFyIHQ9LjUqTWF0aC5taW4odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSxlPTIqKHQtLjIqdCkvTWF0aC5zcXJ0KDIpLGk9dC0uNSplO3RoaXMuX3NxdWFyZUxlZnQ9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLHRoaXMuX3NxdWFyZVRvcD10aGlzLl9jdXJyZW50TWVhc3VyZS50b3AraSx0aGlzLl9zcXVhcmVTaXplPWV9LGUucHJvdG90eXBlLl9kcmF3R3JhZGllbnRTcXVhcmU9ZnVuY3Rpb24odCxlLGkscixuLG8pe3ZhciBzPW8uY3JlYXRlTGluZWFyR3JhZGllbnQoZSxpLHIrZSxpKTtzLmFkZENvbG9yU3RvcCgwLFwiI2ZmZlwiKSxzLmFkZENvbG9yU3RvcCgxLFwiaHNsKFwiK3QrXCIsIDEwMCUsIDUwJSlcIiksby5maWxsU3R5bGU9cyxvLmZpbGxSZWN0KGUsaSxyLG4pO3ZhciBhPW8uY3JlYXRlTGluZWFyR3JhZGllbnQoZSxpLGUsbitpKTthLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLDAsMCwwKVwiKSxhLmFkZENvbG9yU3RvcCgxLFwiIzAwMFwiKSxvLmZpbGxTdHlsZT1hLG8uZmlsbFJlY3QoZSxpLHIsbil9LGUucHJvdG90eXBlLl9kcmF3Q2lyY2xlPWZ1bmN0aW9uKHQsZSxpLHIpe3IuYmVnaW5QYXRoKCksci5hcmModCxlLGkrMSwwLDIqTWF0aC5QSSwhMSksci5saW5lV2lkdGg9MyxyLnN0cm9rZVN0eWxlPVwiIzMzMzMzM1wiLHIuc3Ryb2tlKCksci5iZWdpblBhdGgoKSxyLmFyYyh0LGUsaSwwLDIqTWF0aC5QSSwhMSksci5saW5lV2lkdGg9MyxyLnN0cm9rZVN0eWxlPVwiI2ZmZmZmZlwiLHIuc3Ryb2tlKCl9LGUucHJvdG90eXBlLl9jcmVhdGVDb2xvcldoZWVsQ2FudmFzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtpLndpZHRoPTIqdCxpLmhlaWdodD0yKnQ7Zm9yKHZhciByPWkuZ2V0Q29udGV4dChcIjJkXCIpLG49ci5nZXRJbWFnZURhdGEoMCwwLDIqdCwyKnQpLG89bi5kYXRhLGE9dGhpcy5fdG1wQ29sb3IsaD10KnQsbD10LWUsdT1sKmwsYz0tdDtjPHQ7YysrKWZvcih2YXIgXz0tdDtfPHQ7XysrKXt2YXIgZD1jKmMrXypfO2lmKCEoZD5ofHxkPHUpKXt2YXIgZj1NYXRoLnNxcnQoZCkscD1NYXRoLmF0YW4yKF8sYyk7cy5Db2xvcjMuSFNWdG9SR0JUb1JlZigxODAqcC9NYXRoLlBJKzE4MCxmL3QsMSxhKTt2YXIgZz00KihjK3QrMiooXyt0KSp0KTtvW2ddPTI1NSphLnIsb1tnKzFdPTI1NSphLmcsb1tnKzJdPTI1NSphLmI7dmFyIGI9LjI7Yj10PDUwPy4yOnQ+MTUwPy4wNDotLjE2Kih0LTUwKS8xMDArLjI7dmFyIG09KGYtbCkvKHQtbCk7b1tnKzNdPW08Yj9tL2IqMjU1Om0+MS1iPzI1NSooMS0obS0oMS1iKSkvYik6MjU1fX1yZXR1cm4gci5wdXRJbWFnZURhdGEobiwwLDApLGl9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpO3ZhciBlPS41Kk1hdGgubWluKHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksaT0uMiplLHI9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCxuPXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcDt0aGlzLl9jb2xvcldoZWVsQ2FudmFzJiZ0aGlzLl9jb2xvcldoZWVsQ2FudmFzLndpZHRoPT0yKmV8fCh0aGlzLl9jb2xvcldoZWVsQ2FudmFzPXRoaXMuX2NyZWF0ZUNvbG9yV2hlZWxDYW52YXMoZSxpKSksdGhpcy5fdXBkYXRlU3F1YXJlUHJvcHMoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFksdC5maWxsUmVjdCh0aGlzLl9zcXVhcmVMZWZ0LHRoaXMuX3NxdWFyZVRvcCx0aGlzLl9zcXVhcmVTaXplLHRoaXMuX3NxdWFyZVNpemUpKSx0LmRyYXdJbWFnZSh0aGlzLl9jb2xvcldoZWVsQ2FudmFzLHIsbiksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHRoaXMuX2RyYXdHcmFkaWVudFNxdWFyZSh0aGlzLl9oLHRoaXMuX3NxdWFyZUxlZnQsdGhpcy5fc3F1YXJlVG9wLHRoaXMuX3NxdWFyZVNpemUsdGhpcy5fc3F1YXJlU2l6ZSx0KTt2YXIgbz10aGlzLl9zcXVhcmVMZWZ0K3RoaXMuX3NxdWFyZVNpemUqdGhpcy5fcyxzPXRoaXMuX3NxdWFyZVRvcCt0aGlzLl9zcXVhcmVTaXplKigxLXRoaXMuX3YpO3RoaXMuX2RyYXdDaXJjbGUobyxzLC4wNCplLHQpO3ZhciBhPWUtLjUqaTtvPXIrZStNYXRoLmNvcygodGhpcy5faC0xODApKk1hdGguUEkvMTgwKSphLHM9bitlK01hdGguc2luKCh0aGlzLl9oLTE4MCkqTWF0aC5QSS8xODApKmEsdGhpcy5fZHJhd0NpcmNsZShvLHMsLjM1KmksdCksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl91cGRhdGVWYWx1ZUZyb21Qb2ludGVyPWZ1bmN0aW9uKHQsaSl7aWYodGhpcy5fcG9pbnRlclN0YXJ0ZWRPbldoZWVsKXt2YXIgcj0uNSpNYXRoLm1pbih0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLG49cit0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LG89cit0aGlzLl9jdXJyZW50TWVhc3VyZS50b3A7dGhpcy5faD0xODAqTWF0aC5hdGFuMihpLW8sdC1uKS9NYXRoLlBJKzE4MH1lbHNlIHRoaXMuX3BvaW50ZXJTdGFydGVkT25TcXVhcmUmJih0aGlzLl91cGRhdGVTcXVhcmVQcm9wcygpLHRoaXMuX3M9KHQtdGhpcy5fc3F1YXJlTGVmdCkvdGhpcy5fc3F1YXJlU2l6ZSx0aGlzLl92PTEtKGktdGhpcy5fc3F1YXJlVG9wKS90aGlzLl9zcXVhcmVTaXplLHRoaXMuX3M9TWF0aC5taW4odGhpcy5fcywxKSx0aGlzLl9zPU1hdGgubWF4KHRoaXMuX3MsZS5fRXBzaWxvbiksdGhpcy5fdj1NYXRoLm1pbih0aGlzLl92LDEpLHRoaXMuX3Y9TWF0aC5tYXgodGhpcy5fdixlLl9FcHNpbG9uKSk7cy5Db2xvcjMuSFNWdG9SR0JUb1JlZih0aGlzLl9oLHRoaXMuX3MsdGhpcy5fdix0aGlzLl90bXBDb2xvciksdGhpcy52YWx1ZT10aGlzLl90bXBDb2xvcn0sZS5wcm90b3R5cGUuX2lzUG9pbnRPblNxdWFyZT1mdW5jdGlvbih0LGUpe3RoaXMuX3VwZGF0ZVNxdWFyZVByb3BzKCk7dmFyIGk9dGhpcy5fc3F1YXJlTGVmdCxyPXRoaXMuX3NxdWFyZVRvcCxuPXRoaXMuX3NxdWFyZVNpemU7cmV0dXJuIHQ+PWkmJnQ8PWkrbiYmZT49ciYmZTw9citufSxlLnByb3RvdHlwZS5faXNQb2ludE9uV2hlZWw9ZnVuY3Rpb24odCxlKXt2YXIgaT0uNSpNYXRoLm1pbih0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHI9aS0uMippLG49dC0oaSt0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KSxvPWUtKGkrdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKSxzPW4qbitvKm87cmV0dXJuIHM8PWkqaSYmcz49cipyfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtpZighdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pKXJldHVybiExO3RoaXMuX3BvaW50ZXJJc0Rvd249ITAsdGhpcy5fcG9pbnRlclN0YXJ0ZWRPblNxdWFyZT0hMSx0aGlzLl9wb2ludGVyU3RhcnRlZE9uV2hlZWw9ITEsdGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKGkueCxpLnksdGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbik7dmFyIG89dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi54LHM9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi55O3JldHVybiB0aGlzLl9pc1BvaW50T25TcXVhcmUobyxzKT90aGlzLl9wb2ludGVyU3RhcnRlZE9uU3F1YXJlPSEwOnRoaXMuX2lzUG9pbnRPbldoZWVsKG8scykmJih0aGlzLl9wb2ludGVyU3RhcnRlZE9uV2hlZWw9ITApLHRoaXMuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXIobyxzKSx0aGlzLl9ob3N0Ll9jYXB0dXJpbmdDb250cm9sW3JdPXRoaXMsdGhpcy5fbGFzdFBvaW50ZXJEb3duSUQ9ciwhMH0sZS5wcm90b3R5cGUuX29uUG9pbnRlck1vdmU9ZnVuY3Rpb24oZSxpLHIpe2lmKHI9PXRoaXMuX2xhc3RQb2ludGVyRG93bklEKXt0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXgudHJhbnNmb3JtQ29vcmRpbmF0ZXMoaS54LGkueSx0aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uKTt2YXIgbj10aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uLngsbz10aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uLnk7dGhpcy5fcG9pbnRlcklzRG93biYmdGhpcy5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcihuLG8pLHQucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlLmNhbGwodGhpcyxlLGkscil9fSxlLnByb3RvdHlwZS5fb25Qb2ludGVyVXA9ZnVuY3Rpb24oZSxpLHIsbixvKXt0aGlzLl9wb2ludGVySXNEb3duPSExLGRlbGV0ZSB0aGlzLl9ob3N0Ll9jYXB0dXJpbmdDb250cm9sW3JdLHQucHJvdG90eXBlLl9vblBvaW50ZXJVcC5jYWxsKHRoaXMsZSxpLHIsbixvKX0sZS5TaG93UGlja2VyRGlhbG9nQXN5bmM9ZnVuY3Rpb24odCxpKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXtpLnBpY2tlcldpZHRoPWkucGlja2VyV2lkdGh8fFwiNjQwcHhcIixpLnBpY2tlckhlaWdodD1pLnBpY2tlckhlaWdodHx8XCI0MDBweFwiLGkuaGVhZGVySGVpZ2h0PWkuaGVhZGVySGVpZ2h0fHxcIjM1cHhcIixpLmxhc3RDb2xvcj1pLmxhc3RDb2xvcnx8XCIjMDAwMDAwXCIsaS5zd2F0Y2hMaW1pdD1pLnN3YXRjaExpbWl0fHwyMCxpLm51bVN3YXRjaGVzUGVyTGluZT1pLm51bVN3YXRjaGVzUGVyTGluZXx8MTA7dmFyIG8sYSxoLGwsdSxjLF8sZCxmLGcsYix2LEMsdyxNLFAsayxJLEEsUz1pLnN3YXRjaExpbWl0L2kubnVtU3dhdGNoZXNQZXJMaW5lLEU9cGFyc2VGbG9hdChpLnBpY2tlcldpZHRoKS9pLm51bVN3YXRjaGVzUGVyTGluZSxMPU1hdGguZmxvb3IoLjI1KkUpLFI9TCooaS5udW1Td2F0Y2hlc1BlckxpbmUrMSksRD1NYXRoLmZsb29yKChwYXJzZUZsb2F0KGkucGlja2VyV2lkdGgpLVIpL2kubnVtU3dhdGNoZXNQZXJMaW5lKSxCPUQqUytMKihTKzEpLE49KHBhcnNlSW50KGkucGlja2VySGVpZ2h0KStCK01hdGguZmxvb3IoLjI1KkQpKS50b1N0cmluZygpK1wicHhcIixWPVwiI2MwYzBjMFwiLEg9XCIjNTM1MzUzXCIsRj1cIiM0MTQxNDFcIixqPVwiNTE1MTUxXCIsVz1cIiM1NTU1NTVcIix6PVwiIzQ1NDU0NVwiLEc9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhcIiNkZGRkZGRcIiksWD1HLnIrRy5nK0cuYixZPVwiI2FhYWFhYVwiLFU9XCIjZmZmZmZmXCIscT1bXCJSXCIsXCJHXCIsXCJCXCJdLEs9ITE7ZnVuY3Rpb24gWih0LGUpe0E9ZTt2YXIgaT10LnRvSGV4U3RyaW5nKCk7aWYoay5iYWNrZ3JvdW5kPWksZy5uYW1lIT1BJiYoZy50ZXh0PU1hdGguZmxvb3IoMjU1KnQucikudG9TdHJpbmcoKSksYi5uYW1lIT1BJiYoYi50ZXh0PU1hdGguZmxvb3IoMjU1KnQuZykudG9TdHJpbmcoKSksdi5uYW1lIT1BJiYodi50ZXh0PU1hdGguZmxvb3IoMjU1KnQuYikudG9TdHJpbmcoKSksQy5uYW1lIT1BJiYoQy50ZXh0PXQuci50b1N0cmluZygpKSx3Lm5hbWUhPUEmJih3LnRleHQ9dC5nLnRvU3RyaW5nKCkpLE0ubmFtZSE9QSYmKE0udGV4dD10LmIudG9TdHJpbmcoKSksUC5uYW1lIT1BKXt2YXIgcj1pLnNwbGl0KFwiI1wiKTtQLnRleHQ9clsxXX1mLm5hbWUhPUEmJihmLnZhbHVlPXQpfWZ1bmN0aW9uIEoodCxlKXt2YXIgaT10LnRleHQ7aWYoL1teMC05XS9nLnRlc3QoaSkpdC50ZXh0PUk7ZWxzZSBpZihcIlwiIT1pJiYoTWF0aC5mbG9vcihwYXJzZUludChpKSk8MD9pPVwiMFwiOk1hdGguZmxvb3IocGFyc2VJbnQoaSkpPjI1NT9pPVwiMjU1XCI6aXNOYU4ocGFyc2VJbnQoaSkpJiYoaT1cIjBcIikpLEE9PXQubmFtZSYmKEk9aSksXCJcIiE9aSl7aT1wYXJzZUludChpKS50b1N0cmluZygpLHQudGV4dD1pO3ZhciByPXMuQ29sb3IzLkZyb21IZXhTdHJpbmcoay5iYWNrZ3JvdW5kKTtBPT10Lm5hbWUmJlooXCJyXCI9PWU/bmV3IHMuQ29sb3IzKHBhcnNlSW50KGkpLzI1NSxyLmcsci5iKTpcImdcIj09ZT9uZXcgcy5Db2xvcjMoci5yLHBhcnNlSW50KGkpLzI1NSxyLmIpOm5ldyBzLkNvbG9yMyhyLnIsci5nLHBhcnNlSW50KGkpLzI1NSksdC5uYW1lKX19ZnVuY3Rpb24gUSh0LGUpe3ZhciBpPXQudGV4dDtpZigvW14wLTlcXC5dL2cudGVzdChpKSl0LnRleHQ9STtlbHNle1wiXCIhPWkmJlwiLlwiIT1pJiYwIT1wYXJzZUZsb2F0KGkpJiYocGFyc2VGbG9hdChpKTwwP2k9XCIwLjBcIjpwYXJzZUZsb2F0KGkpPjE/aT1cIjEuMFwiOmlzTmFOKHBhcnNlRmxvYXQoaSkpJiYoaT1cIjAuMFwiKSksQT09dC5uYW1lJiYoST1pKSxcIlwiIT1pJiZcIi5cIiE9aSYmMCE9cGFyc2VGbG9hdChpKT8oaT1wYXJzZUZsb2F0KGkpLnRvU3RyaW5nKCksdC50ZXh0PWkpOmk9XCIwLjBcIjt2YXIgcj1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGsuYmFja2dyb3VuZCk7QT09dC5uYW1lJiZaKFwiclwiPT1lP25ldyBzLkNvbG9yMyhwYXJzZUZsb2F0KGkpLHIuZyxyLmIpOlwiZ1wiPT1lP25ldyBzLkNvbG9yMyhyLnIscGFyc2VGbG9hdChpKSxyLmIpOm5ldyBzLkNvbG9yMyhyLnIsci5nLHBhcnNlRmxvYXQoaSkpLHQubmFtZSl9fWZ1bmN0aW9uICQoKXtpZihpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzW19dKXtpZihLKXZhciB0PVwiYlwiO2Vsc2UgdD1cIlwiO3ZhciBlPU8uQ3JlYXRlU2ltcGxlQnV0dG9uKFwiU3dhdGNoX1wiK18sdCk7ZS5mb250RmFtaWx5PVwiQmFieWxvbkpTZ2x5cGhzXCI7dmFyIHI9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhpLnNhdmVkQ29sb3JzW19dKSxuPXIucityLmcrci5iO2UuY29sb3I9bj5YP1k6VSxlLmZvbnRTaXplPU1hdGguZmxvb3IoLjcqRCksZS50ZXh0QmxvY2sudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLGUuaGVpZ2h0PWUud2lkdGg9RC50b1N0cmluZygpK1wicHhcIixlLmJhY2tncm91bmQ9aS5zYXZlZENvbG9yc1tfXSxlLnRoaWNrbmVzcz0yO3ZhciBvPV87cmV0dXJuIGUucG9pbnRlckRvd25BbmltYXRpb249ZnVuY3Rpb24oKXtlLnRoaWNrbmVzcz00fSxlLnBvaW50ZXJVcEFuaW1hdGlvbj1mdW5jdGlvbigpe2UudGhpY2tuZXNzPTN9LGUucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ZS50aGlja25lc3M9M30sZS5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7ZS50aGlja25lc3M9Mn0sZS5vblBvaW50ZXJDbGlja09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7dmFyIHQ7Sz8odD1vLGkuc2F2ZWRDb2xvcnMmJmkuc2F2ZWRDb2xvcnMuc3BsaWNlKHQsMSksaS5zYXZlZENvbG9ycyYmMD09aS5zYXZlZENvbG9ycy5sZW5ndGgmJihpdCghMSksSz0hMSksZXQoXCJcIixCdCkpOmkuc2F2ZWRDb2xvcnMmJloocy5Db2xvcjMuRnJvbUhleFN0cmluZyhpLnNhdmVkQ29sb3JzW29dKSxlLm5hbWUpfSksZX1yZXR1cm4gbnVsbH1mdW5jdGlvbiB0dCh0KXtpZih2b2lkIDAhPT10JiYoSz10KSxLKXtmb3IodmFyIGU9MDtlPGQuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7ZC5jaGlsZHJlbltlXS50ZXh0QmxvY2sudGV4dD1cImJcIn12b2lkIDAhPT1oJiYoaC50ZXh0QmxvY2sudGV4dD1cIkRvbmVcIil9ZWxzZXtmb3IoZT0wO2U8ZC5jaGlsZHJlbi5sZW5ndGg7ZSsrKXtkLmNoaWxkcmVuW2VdLnRleHRCbG9jay50ZXh0PVwiXCJ9dm9pZCAwIT09aCYmKGgudGV4dEJsb2NrLnRleHQ9XCJFZGl0XCIpfX1mdW5jdGlvbiBldCh0LGUpe2lmKGkuc2F2ZWRDb2xvcnMpe1wiXCIhPXQmJmkuc2F2ZWRDb2xvcnMucHVzaCh0KSxfPTAsZC5jbGVhckNvbnRyb2xzKCk7dmFyIHI9TWF0aC5jZWlsKGkuc2F2ZWRDb2xvcnMubGVuZ3RoL2kubnVtU3dhdGNoZXNQZXJMaW5lKTtpZigwPT1yKXZhciBuPTA7ZWxzZSBuPXIrMTtpZihkLnJvd0NvdW50IT1yK24pe2Zvcih2YXIgbz1kLnJvd0NvdW50LHM9MDtzPG87cysrKWQucmVtb3ZlUm93RGVmaW5pdGlvbigwKTtmb3Iocz0wO3M8cituO3MrKylzJTI/ZC5hZGRSb3dEZWZpbml0aW9uKEQsITApOmQuYWRkUm93RGVmaW5pdGlvbihMLCEwKX1kLmhlaWdodD0oRCpyK24qTCkudG9TdHJpbmcoKStcInB4XCI7Zm9yKHZhciBhPTEsaD0xO2E8cituO2ErPTIsaCsrKXtpZihpLnNhdmVkQ29sb3JzLmxlbmd0aD5oKmkubnVtU3dhdGNoZXNQZXJMaW5lKXZhciBsPWkubnVtU3dhdGNoZXNQZXJMaW5lO2Vsc2UgbD1pLnNhdmVkQ29sb3JzLmxlbmd0aC0oaC0xKSppLm51bVN3YXRjaGVzUGVyTGluZTtmb3IodmFyIHU9TWF0aC5taW4oTWF0aC5tYXgobCwwKSxpLm51bVN3YXRjaGVzUGVyTGluZSksYz0wLGY9MTtjPHU7YysrKWlmKCEoYz5pLm51bVN3YXRjaGVzUGVyTGluZSkpe3ZhciBwPSQoKTtudWxsIT1wJiYoZC5hZGRDb250cm9sKHAsYSxmKSxmKz0yLF8rKyl9fWkuc2F2ZWRDb2xvcnMubGVuZ3RoPj1pLnN3YXRjaExpbWl0P3J0KGUsITApOnJ0KGUsITEpfX1mdW5jdGlvbiBpdCh0KXt0PygoaD1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcImJ1dEVkaXRcIixcIkVkaXRcIikpLndpZHRoPWwsaC5oZWlnaHQ9dSxoLmxlZnQ9TWF0aC5mbG9vciguMSpwYXJzZUludChsKSkudG9TdHJpbmcoKStcInB4XCIsaC50b3A9KC0xKnBhcnNlRmxvYXQoaC5sZWZ0KSkudG9TdHJpbmcoKStcInB4XCIsaC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9CT1RUT00saC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxoLnRoaWNrbmVzcz0yLGguY29sb3I9VixoLmZvbnRTaXplPWEsaC5iYWNrZ3JvdW5kPUgsaC5vblBvaW50ZXJFbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7aC5iYWNrZ3JvdW5kPUZ9KSxoLm9uUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7aC5iYWNrZ3JvdW5kPUh9KSxoLnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aC5iYWNrZ3JvdW5kPWp9LGgucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aC5iYWNrZ3JvdW5kPUZ9LGgub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0s9IUssdHQoKX0pLG10LmFkZENvbnRyb2woaCwxLDApKTptdC5yZW1vdmVDb250cm9sKGgpfWZ1bmN0aW9uIHJ0KHQsZSl7ZT8odC5jb2xvcj1XLHQuYmFja2dyb3VuZD16KToodC5jb2xvcj1WLHQuYmFja2dyb3VuZD1IKX1mdW5jdGlvbiBudChlKXtpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzLmxlbmd0aD4wP3Ioe3NhdmVkQ29sb3JzOmkuc2F2ZWRDb2xvcnMscGlja2VkQ29sb3I6ZX0pOnIoe3BpY2tlZENvbG9yOmV9KSx0LnJlbW92ZUNvbnRyb2wob3QpfXZhciBvdD1uZXcgeDtpZihvdC5uYW1lPVwiRGlhbG9nIENvbnRhaW5lclwiLG90LndpZHRoPWkucGlja2VyV2lkdGgsaS5zYXZlZENvbG9ycyl7b3QuaGVpZ2h0PU47dmFyIHN0PXBhcnNlSW50KGkucGlja2VySGVpZ2h0KS9wYXJzZUludChOKTtvdC5hZGRSb3dEZWZpbml0aW9uKHN0LCExKSxvdC5hZGRSb3dEZWZpbml0aW9uKDEtc3QsITEpfWVsc2Ugb3QuaGVpZ2h0PWkucGlja2VySGVpZ2h0LG90LmFkZFJvd0RlZmluaXRpb24oMSwhMSk7aWYodC5hZGRDb250cm9sKG90KSxpLnNhdmVkQ29sb3JzKXsoZD1uZXcgeCkubmFtZT1cIlN3YXRjaCBEcmF3ZXJcIixkLnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCxkLmJhY2tncm91bmQ9SCxkLndpZHRoPWkucGlja2VyV2lkdGg7dmFyIGF0PWkuc2F2ZWRDb2xvcnMubGVuZ3RoL2kubnVtU3dhdGNoZXNQZXJMaW5lO2lmKDA9PWF0KXZhciBodD0wO2Vsc2UgaHQ9YXQrMTtkLmhlaWdodD0oRCphdCtodCpMKS50b1N0cmluZygpK1wicHhcIixkLnRvcD1NYXRoLmZsb29yKC4yNSpEKS50b1N0cmluZygpK1wicHhcIjtmb3IodmFyIGx0PTA7bHQ8MipNYXRoLmNlaWwoaS5zYXZlZENvbG9ycy5sZW5ndGgvaS5udW1Td2F0Y2hlc1BlckxpbmUpKzE7bHQrKylsdCUyIT0wP2QuYWRkUm93RGVmaW5pdGlvbihELCEwKTpkLmFkZFJvd0RlZmluaXRpb24oTCwhMCk7Zm9yKGx0PTA7bHQ8MippLm51bVN3YXRjaGVzUGVyTGluZSsxO2x0KyspbHQlMiE9MD9kLmFkZENvbHVtbkRlZmluaXRpb24oRCwhMCk6ZC5hZGRDb2x1bW5EZWZpbml0aW9uKEwsITApO290LmFkZENvbnRyb2woZCwxLDApfXZhciB1dD1uZXcgeDt1dC5uYW1lPVwiUGlja2VyIFBhbmVsXCIsdXQuaGVpZ2h0PWkucGlja2VySGVpZ2h0O3ZhciBjdD1wYXJzZUludChpLmhlYWRlckhlaWdodCkvcGFyc2VJbnQoaS5waWNrZXJIZWlnaHQpLF90PVtjdCwxLWN0XTt1dC5hZGRSb3dEZWZpbml0aW9uKF90WzBdLCExKSx1dC5hZGRSb3dEZWZpbml0aW9uKF90WzFdLCExKSxvdC5hZGRDb250cm9sKHV0LDAsMCk7dmFyIGR0PW5ldyBtO2R0Lm5hbWU9XCJEaWFsb2d1ZSBIZWFkZXIgQmFyXCIsZHQuYmFja2dyb3VuZD1cIiNjY2NjY2NcIixkdC50aGlja25lc3M9MCx1dC5hZGRDb250cm9sKGR0LDAsMCk7dmFyIGZ0PU8uQ3JlYXRlU2ltcGxlQnV0dG9uKFwiY2xvc2VCdXR0b25cIixcImFcIik7ZnQuZm9udEZhbWlseT1cIkJhYnlsb25KU2dseXBoc1wiO3ZhciBwdD1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGR0LmJhY2tncm91bmQpO289bmV3IHMuQ29sb3IzKDEtcHQuciwxLXB0LmcsMS1wdC5iKSxmdC5jb2xvcj1vLnRvSGV4U3RyaW5nKCksZnQuZm9udFNpemU9TWF0aC5mbG9vciguNipwYXJzZUludChpLmhlYWRlckhlaWdodCkpLGZ0LnRleHRCbG9jay50ZXh0VmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLGZ0Lmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9SSUdIVCxmdC5oZWlnaHQ9ZnQud2lkdGg9aS5oZWFkZXJIZWlnaHQsZnQuYmFja2dyb3VuZD1kdC5iYWNrZ3JvdW5kLGZ0LnRoaWNrbmVzcz0wLGZ0LnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7fSxmdC5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtmdC5iYWNrZ3JvdW5kPWR0LmJhY2tncm91bmR9LGZ0LnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe2Z0LmNvbG9yPWR0LmJhY2tncm91bmQsZnQuYmFja2dyb3VuZD1cInJlZFwifSxmdC5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7ZnQuY29sb3I9by50b0hleFN0cmluZygpLGZ0LmJhY2tncm91bmQ9ZHQuYmFja2dyb3VuZH0sZnQub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe250KEF0LmJhY2tncm91bmQpfSksdXQuYWRkQ29udHJvbChmdCwwLDApO3ZhciBndD1uZXcgeDtndC5uYW1lPVwiRGlhbG9ndWUgQm9keVwiLGd0LmJhY2tncm91bmQ9SDt2YXIgYnQ9Wy40Mzc1LC41NjI1XTtndC5hZGRSb3dEZWZpbml0aW9uKDEsITEpLGd0LmFkZENvbHVtbkRlZmluaXRpb24oYnRbMF0sITEpLGd0LmFkZENvbHVtbkRlZmluaXRpb24oYnRbMV0sITEpLHV0LmFkZENvbnRyb2woZ3QsMSwwKTt2YXIgbXQ9bmV3IHg7bXQubmFtZT1cIlBpY2tlciBHcmlkXCIsbXQuYWRkUm93RGVmaW5pdGlvbiguODUsITEpLG10LmFkZFJvd0RlZmluaXRpb24oLjE1LCExKSxndC5hZGRDb250cm9sKG10LDAsMCksKGY9bmV3IGUpLm5hbWU9XCJHVUkgQ29sb3IgUGlja2VyXCIsaS5waWNrZXJIZWlnaHQ8aS5waWNrZXJXaWR0aD9mLndpZHRoPS44OTpmLmhlaWdodD0uODksZi52YWx1ZT1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGkubGFzdENvbG9yKSxmLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVIsZi52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsZi5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPWYubmFtZSxJPVwiXCIsdHQoITEpfSksZi5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe0E9PWYubmFtZSYmWih0LGYubmFtZSl9KSxtdC5hZGRDb250cm9sKGYsMCwwKTt2YXIgeXQ9bmV3IHg7eXQubmFtZT1cIkRpYWxvZ3VlIFJpZ2h0IEhhbGZcIix5dC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVDt2YXIgdnQ9Wy41MTQsLjQ4Nl07eXQuYWRkUm93RGVmaW5pdGlvbih2dFswXSwhMSkseXQuYWRkUm93RGVmaW5pdGlvbih2dFsxXSwhMSksZ3QuYWRkQ29udHJvbCh5dCwxLDEpO3ZhciBPdD1uZXcgeDtPdC5uYW1lPVwiU3dhdGNoZXMgYW5kIEJ1dHRvbnNcIjt2YXIgQ3Q9Wy40MTcsLjU4M107T3QuYWRkUm93RGVmaW5pdGlvbigxLCExKSxPdC5hZGRDb2x1bW5EZWZpbml0aW9uKEN0WzBdLCExKSxPdC5hZGRDb2x1bW5EZWZpbml0aW9uKEN0WzFdLCExKSx5dC5hZGRDb250cm9sKE90LDAsMCk7dmFyIHd0PW5ldyB4O3d0Lm5hbWU9XCJOZXcgYW5kIEN1cnJlbnQgU3dhdGNoZXNcIjt2YXIgVHQ9Wy4wNCwuMTYsLjY0LC4xNl07d3QuYWRkUm93RGVmaW5pdGlvbihUdFswXSwhMSksd3QuYWRkUm93RGVmaW5pdGlvbihUdFsxXSwhMSksd3QuYWRkUm93RGVmaW5pdGlvbihUdFsyXSwhMSksd3QuYWRkUm93RGVmaW5pdGlvbihUdFszXSwhMSksT3QuYWRkQ29udHJvbCh3dCwwLDApO3ZhciB4dD1uZXcgeDt4dC5uYW1lPVwiQWN0aXZlIFN3YXRjaGVzXCIseHQud2lkdGg9LjY3LHh0LmFkZFJvd0RlZmluaXRpb24oLjUsITEpLHh0LmFkZFJvd0RlZmluaXRpb24oLjUsITEpLHd0LmFkZENvbnRyb2woeHQsMiwwKTt2YXIgTXQ9TWF0aC5mbG9vcihwYXJzZUludChpLnBpY2tlcldpZHRoKSpidFsxXSpDdFswXSouMTEpLFB0PU1hdGguZmxvb3IocGFyc2VJbnQoaS5waWNrZXJIZWlnaHQpKl90WzFdKnZ0WzBdKlR0WzFdKi41KTtpZihpLnBpY2tlcldpZHRoPmkucGlja2VySGVpZ2h0KXZhciBrdD1QdDtlbHNlIGt0PU10O3ZhciBJdD1uZXcgeTtJdC50ZXh0PVwibmV3XCIsSXQubmFtZT1cIk5ldyBDb2xvciBMYWJlbFwiLEl0LmNvbG9yPVYsSXQuZm9udFNpemU9a3Qsd3QuYWRkQ29udHJvbChJdCwxLDApLChrPW5ldyBtKS5uYW1lPVwiTmV3IENvbG9yIFN3YXRjaFwiLGsuYmFja2dyb3VuZD1pLmxhc3RDb2xvcixrLnRoaWNrbmVzcz0wLHh0LmFkZENvbnRyb2woaywwLDApO3ZhciBBdD1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcImN1cnJlbnRTd2F0Y2hcIixcIlwiKTtBdC5iYWNrZ3JvdW5kPWkubGFzdENvbG9yLEF0LnRoaWNrbmVzcz0wLEF0Lm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtaKHMuQ29sb3IzLkZyb21IZXhTdHJpbmcoQXQuYmFja2dyb3VuZCksQXQubmFtZSksdHQoITEpfSksQXQucG9pbnRlckRvd25BbmltYXRpb249ZnVuY3Rpb24oKXt9LEF0LnBvaW50ZXJVcEFuaW1hdGlvbj1mdW5jdGlvbigpe30sQXQucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7fSxBdC5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7fSx4dC5hZGRDb250cm9sKEF0LDEsMCk7dmFyIFN0PW5ldyBtO1N0Lm5hbWU9XCJTd2F0Y2ggT3V0bGluZVwiLFN0LndpZHRoPS42NyxTdC50aGlja25lc3M9MixTdC5jb2xvcj1cIiM0MDQwNDBcIixTdC5pc0hpdFRlc3RWaXNpYmxlPSExLHd0LmFkZENvbnRyb2woU3QsMiwwKTt2YXIgRXQ9bmV3IHk7RXQubmFtZT1cIkN1cnJlbnQgQ29sb3IgTGFiZWxcIixFdC50ZXh0PVwiY3VycmVudFwiLEV0LmNvbG9yPVYsRXQuZm9udFNpemU9a3Qsd3QuYWRkQ29udHJvbChFdCwzLDApO3ZhciBMdD1uZXcgeDtMdC5uYW1lPVwiQnV0dG9uIEdyaWRcIixMdC5oZWlnaHQ9Ljg7THQuYWRkUm93RGVmaW5pdGlvbigxLzMsITEpLEx0LmFkZFJvd0RlZmluaXRpb24oMS8zLCExKSxMdC5hZGRSb3dEZWZpbml0aW9uKDEvMywhMSksT3QuYWRkQ29udHJvbChMdCwwLDEpLGw9TWF0aC5mbG9vcihwYXJzZUludChpLnBpY2tlcldpZHRoKSpidFsxXSpDdFsxXSouNjcpLnRvU3RyaW5nKCkrXCJweFwiLHU9TWF0aC5mbG9vcihwYXJzZUludChpLnBpY2tlckhlaWdodCkqX3RbMV0qdnRbMF0qKHBhcnNlRmxvYXQoTHQuaGVpZ2h0LnRvU3RyaW5nKCkpLzEwMCkqKDEvMykqLjcpLnRvU3RyaW5nKCkrXCJweFwiLGE9cGFyc2VGbG9hdChsKT5wYXJzZUZsb2F0KHUpP01hdGguZmxvb3IoLjQ1KnBhcnNlRmxvYXQodSkpOk1hdGguZmxvb3IoLjExKnBhcnNlRmxvYXQobCkpO3ZhciBSdD1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcImJ1dE9LXCIsXCJPS1wiKTtSdC53aWR0aD1sLFJ0LmhlaWdodD11LFJ0LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixSdC50aGlja25lc3M9MixSdC5jb2xvcj1WLFJ0LmZvbnRTaXplPWEsUnQuYmFja2dyb3VuZD1ILFJ0Lm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtSdC5iYWNrZ3JvdW5kPUZ9KSxSdC5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe1J0LmJhY2tncm91bmQ9SH0pLFJ0LnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7UnQuYmFja2dyb3VuZD1qfSxSdC5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtSdC5iYWNrZ3JvdW5kPUZ9LFJ0Lm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXt0dCghMSksbnQoay5iYWNrZ3JvdW5kKX0pLEx0LmFkZENvbnRyb2woUnQsMCwwKTt2YXIgRHQ9Ty5DcmVhdGVTaW1wbGVCdXR0b24oXCJidXRDYW5jZWxcIixcIkNhbmNlbFwiKTtpZihEdC53aWR0aD1sLER0LmhlaWdodD11LER0LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixEdC50aGlja25lc3M9MixEdC5jb2xvcj1WLER0LmZvbnRTaXplPWEsRHQuYmFja2dyb3VuZD1ILER0Lm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtEdC5iYWNrZ3JvdW5kPUZ9KSxEdC5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0R0LmJhY2tncm91bmQ9SH0pLER0LnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7RHQuYmFja2dyb3VuZD1qfSxEdC5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtEdC5iYWNrZ3JvdW5kPUZ9LER0Lm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXt0dCghMSksbnQoQXQuYmFja2dyb3VuZCl9KSxMdC5hZGRDb250cm9sKER0LDEsMCksaS5zYXZlZENvbG9ycyl7dmFyIEJ0PU8uQ3JlYXRlU2ltcGxlQnV0dG9uKFwiYnV0U2F2ZVwiLFwiU2F2ZVwiKTtCdC53aWR0aD1sLEJ0LmhlaWdodD11LEJ0LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixCdC50aGlja25lc3M9MixCdC5mb250U2l6ZT1hLGkuc2F2ZWRDb2xvcnMubGVuZ3RoPGkuc3dhdGNoTGltaXQ/KEJ0LmNvbG9yPVYsQnQuYmFja2dyb3VuZD1IKTpydChCdCwhMCksQnQub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2kuc2F2ZWRDb2xvcnMmJmkuc2F2ZWRDb2xvcnMubGVuZ3RoPGkuc3dhdGNoTGltaXQmJihCdC5iYWNrZ3JvdW5kPUYpfSksQnQub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzLmxlbmd0aDxpLnN3YXRjaExpbWl0JiYoQnQuYmFja2dyb3VuZD1IKX0pLEJ0LnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5zYXZlZENvbG9ycyYmaS5zYXZlZENvbG9ycy5sZW5ndGg8aS5zd2F0Y2hMaW1pdCYmKEJ0LmJhY2tncm91bmQ9ail9LEJ0LnBvaW50ZXJVcEFuaW1hdGlvbj1mdW5jdGlvbigpe2kuc2F2ZWRDb2xvcnMmJmkuc2F2ZWRDb2xvcnMubGVuZ3RoPGkuc3dhdGNoTGltaXQmJihCdC5iYWNrZ3JvdW5kPUYpfSxCdC5vblBvaW50ZXJDbGlja09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7aS5zYXZlZENvbG9ycyYmKDA9PWkuc2F2ZWRDb2xvcnMubGVuZ3RoJiZpdCghMCksaS5zYXZlZENvbG9ycy5sZW5ndGg8aS5zd2F0Y2hMaW1pdCYmZXQoay5iYWNrZ3JvdW5kLEJ0KSx0dCghMSkpfSksaS5zYXZlZENvbG9ycy5sZW5ndGg+MCYmaXQoITApLEx0LmFkZENvbnRyb2woQnQsMiwwKX12YXIgTnQ9bmV3IHg7TnQubmFtZT1cIkRpYWxvZyBMb3dlciBSaWdodFwiLE50LmFkZFJvd0RlZmluaXRpb24oLjAyLCExKSxOdC5hZGRSb3dEZWZpbml0aW9uKC42MywhMSksTnQuYWRkUm93RGVmaW5pdGlvbiguMjEsITEpLE50LmFkZFJvd0RlZmluaXRpb24oLjE0LCExKSx5dC5hZGRDb250cm9sKE50LDEsMCksYz1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGkubGFzdENvbG9yKTt2YXIgVnQ9bmV3IHg7VnQubmFtZT1cIlJHQiBWYWx1ZXNcIixWdC53aWR0aD0uODIsVnQudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLFZ0LmFkZFJvd0RlZmluaXRpb24oMS8zLCExKSxWdC5hZGRSb3dEZWZpbml0aW9uKDEvMywhMSksVnQuYWRkUm93RGVmaW5pdGlvbigxLzMsITEpLFZ0LmFkZENvbHVtbkRlZmluaXRpb24oLjEsITEpLFZ0LmFkZENvbHVtbkRlZmluaXRpb24oLjIsITEpLFZ0LmFkZENvbHVtbkRlZmluaXRpb24oLjcsITEpLE50LmFkZENvbnRyb2woVnQsMSwwKTtmb3IobHQ9MDtsdDxxLmxlbmd0aDtsdCsrKXsoSHQ9bmV3IHkpLnRleHQ9cVtsdF0sSHQuY29sb3I9VixIdC5mb250U2l6ZT1hLFZ0LmFkZENvbnRyb2woSHQsbHQsMCl9KGc9bmV3IFQpLndpZHRoPS44MyxnLmhlaWdodD0uNzIsZy5uYW1lPVwickludEZpZWxkXCIsZy5mb250U2l6ZT1hLGcudGV4dD0oMjU1KmMucikudG9TdHJpbmcoKSxnLmNvbG9yPVwiI2YwZjBmMFwiLGcuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIixnLm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9Zy5uYW1lLEk9Zy50ZXh0LHR0KCExKX0pLGcub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtcIlwiPT1nLnRleHQmJihnLnRleHQ9XCIwXCIpLEooZyxcInJcIiksQT09Zy5uYW1lJiYoQT1cIlwiKX0pLGcub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT09Zy5uYW1lJiZKKGcsXCJyXCIpfSksVnQuYWRkQ29udHJvbChnLDAsMSksKGI9bmV3IFQpLndpZHRoPS44MyxiLmhlaWdodD0uNzIsYi5uYW1lPVwiZ0ludEZpZWxkXCIsYi5mb250U2l6ZT1hLGIudGV4dD0oMjU1KmMuZykudG9TdHJpbmcoKSxiLmNvbG9yPVwiI2YwZjBmMFwiLGIuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIixiLm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9Yi5uYW1lLEk9Yi50ZXh0LHR0KCExKX0pLGIub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtcIlwiPT1iLnRleHQmJihiLnRleHQ9XCIwXCIpLEooYixcImdcIiksQT09Yi5uYW1lJiYoQT1cIlwiKX0pLGIub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT09Yi5uYW1lJiZKKGIsXCJnXCIpfSksVnQuYWRkQ29udHJvbChiLDEsMSksKHY9bmV3IFQpLndpZHRoPS44Myx2LmhlaWdodD0uNzIsdi5uYW1lPVwiYkludEZpZWxkXCIsdi5mb250U2l6ZT1hLHYudGV4dD0oMjU1KmMuYikudG9TdHJpbmcoKSx2LmNvbG9yPVwiI2YwZjBmMFwiLHYuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIix2Lm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9di5uYW1lLEk9di50ZXh0LHR0KCExKX0pLHYub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtcIlwiPT12LnRleHQmJih2LnRleHQ9XCIwXCIpLEoodixcImJcIiksQT09di5uYW1lJiYoQT1cIlwiKX0pLHYub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT09di5uYW1lJiZKKHYsXCJiXCIpfSksVnQuYWRkQ29udHJvbCh2LDIsMSksKEM9bmV3IFQpLndpZHRoPS45NSxDLmhlaWdodD0uNzIsQy5uYW1lPVwickRlY0ZpZWxkXCIsQy5mb250U2l6ZT1hLEMudGV4dD1jLnIudG9TdHJpbmcoKSxDLmNvbG9yPVwiI2YwZjBmMFwiLEMuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIixDLm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9Qy5uYW1lLEk9Qy50ZXh0LHR0KCExKX0pLEMub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXswIT1wYXJzZUZsb2F0KEMudGV4dCkmJlwiXCIhPUMudGV4dHx8KEMudGV4dD1cIjBcIixRKEMsXCJyXCIpKSxBPT1DLm5hbWUmJihBPVwiXCIpfSksQy5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPT1DLm5hbWUmJlEoQyxcInJcIil9KSxWdC5hZGRDb250cm9sKEMsMCwyKSwodz1uZXcgVCkud2lkdGg9Ljk1LHcuaGVpZ2h0PS43Mix3Lm5hbWU9XCJnRGVjRmllbGRcIix3LmZvbnRTaXplPWEsdy50ZXh0PWMuZy50b1N0cmluZygpLHcuY29sb3I9XCIjZjBmMGYwXCIsdy5iYWNrZ3JvdW5kPVwiIzQ1NDU0NVwiLHcub25Gb2N1c09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT13Lm5hbWUsST13LnRleHQsdHQoITEpfSksdy5vbkJsdXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpezAhPXBhcnNlRmxvYXQody50ZXh0KSYmXCJcIiE9dy50ZXh0fHwody50ZXh0PVwiMFwiLFEodyxcImdcIikpLEE9PXcubmFtZSYmKEE9XCJcIil9KSx3Lm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9PXcubmFtZSYmUSh3LFwiZ1wiKX0pLFZ0LmFkZENvbnRyb2wodywxLDIpLChNPW5ldyBUKS53aWR0aD0uOTUsTS5oZWlnaHQ9LjcyLE0ubmFtZT1cImJEZWNGaWVsZFwiLE0uZm9udFNpemU9YSxNLnRleHQ9Yy5iLnRvU3RyaW5nKCksTS5jb2xvcj1cIiNmMGYwZjBcIixNLmJhY2tncm91bmQ9XCIjNDU0NTQ1XCIsTS5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPU0ubmFtZSxJPU0udGV4dCx0dCghMSl9KSxNLm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7MCE9cGFyc2VGbG9hdChNLnRleHQpJiZcIlwiIT1NLnRleHR8fChNLnRleHQ9XCIwXCIsUShNLFwiYlwiKSksQT09TS5uYW1lJiYoQT1cIlwiKX0pLE0ub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT09TS5uYW1lJiZRKE0sXCJiXCIpfSksVnQuYWRkQ29udHJvbChNLDIsMik7dmFyIEh0LEZ0PW5ldyB4O0Z0Lm5hbWU9XCJIZXggVmFsdWVcIixGdC53aWR0aD0uODIsRnQuYWRkUm93RGVmaW5pdGlvbigxLCExKSxGdC5hZGRDb2x1bW5EZWZpbml0aW9uKC4xLCExKSxGdC5hZGRDb2x1bW5EZWZpbml0aW9uKC45LCExKSxOdC5hZGRDb250cm9sKEZ0LDIsMCksKEh0PW5ldyB5KS50ZXh0PVwiI1wiLEh0LmNvbG9yPVYsSHQuZm9udFNpemU9YSxGdC5hZGRDb250cm9sKEh0LDAsMCksKFA9bmV3IFQpLndpZHRoPS45NixQLmhlaWdodD0uNzIsUC5uYW1lPVwiaGV4RmllbGRcIixQLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVIsUC5mb250U2l6ZT1hO3ZhciBqdD1pLmxhc3RDb2xvci5zcGxpdChcIiNcIik7UC50ZXh0PWp0WzFdLFAuY29sb3I9XCIjZjBmMGYwXCIsUC5iYWNrZ3JvdW5kPVwiIzQ1NDU0NVwiLFAub25Gb2N1c09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT1QLm5hbWUsST1QLnRleHQsdHQoITEpfSksUC5vbkJsdXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2lmKDM9PVAudGV4dC5sZW5ndGgpe3ZhciB0PVAudGV4dC5zcGxpdChcIlwiKTtQLnRleHQ9dFswXSt0WzBdK3RbMV0rdFsxXSt0WzJdK3RbMl19XCJcIj09UC50ZXh0JiYoUC50ZXh0PVwiMDAwMDAwXCIsWihzLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKFAudGV4dCksXCJiXCIpKSxBPT1QLm5hbWUmJihBPVwiXCIpfSksUC5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXt2YXIgdD1QLnRleHQsZT0vW14wLTlBLUZdL2kudGVzdCh0KTtpZigoUC50ZXh0Lmxlbmd0aD42fHxlKSYmQT09UC5uYW1lKVAudGV4dD1JO2Vsc2V7aWYoUC50ZXh0Lmxlbmd0aDw2KWZvcih2YXIgaT02LVAudGV4dC5sZW5ndGgscj0wO3I8aTtyKyspdD1cIjBcIit0O2lmKDM9PVAudGV4dC5sZW5ndGgpe3ZhciBuPVAudGV4dC5zcGxpdChcIlwiKTt0PW5bMF0rblswXStuWzFdK25bMV0rblsyXStuWzJdfXQ9XCIjXCIrdCxBPT1QLm5hbWUmJihJPVAudGV4dCxaKHMuQ29sb3IzLkZyb21IZXhTdHJpbmcodCksUC5uYW1lKSl9fSksRnQuYWRkQ29udHJvbChQLDAsMSksaS5zYXZlZENvbG9ycyYmaS5zYXZlZENvbG9ycy5sZW5ndGg+MCYmZXQoXCJcIixCdCl9KX0sZS5fRXBzaWxvbj0xZS02LGV9KHApO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5Db2xvclBpY2tlclwiXT1NO3ZhciBQPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3RoaWNrbmVzcz0xLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aGlja25lc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RoaWNrbmVzc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RoaWNrbmVzcyE9PXQmJih0aGlzLl90aGlja25lc3M9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkVsbGlwc2VcIn0sZS5wcm90b3R5cGUuX2xvY2FsRHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpLHAuZHJhd0VsbGlwc2UodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMix0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC8yLXRoaXMuX3RoaWNrbmVzcy8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yLXRoaXMuX3RoaWNrbmVzcy8yLHQpLHRoaXMuX2JhY2tncm91bmQmJih0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHQuZmlsbCgpKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0JsdXI9MCx0LnNoYWRvd09mZnNldFg9MCx0LnNoYWRvd09mZnNldFk9MCksdGhpcy5fdGhpY2tuZXNzJiYodGhpcy5jb2xvciYmKHQuc3Ryb2tlU3R5bGU9dGhpcy5jb2xvciksdC5saW5lV2lkdGg9dGhpcy5fdGhpY2tuZXNzLHQuc3Ryb2tlKCkpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3Npbmc9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3NpbmcuY2FsbCh0aGlzLGUsaSksdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLndpZHRoLT0yKnRoaXMuX3RoaWNrbmVzcyx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4uaGVpZ2h0LT0yKnRoaXMuX3RoaWNrbmVzcyx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4ubGVmdCs9dGhpcy5fdGhpY2tuZXNzLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi50b3ArPXRoaXMuX3RoaWNrbmVzc30sZS5wcm90b3R5cGUuX2NsaXBGb3JDaGlsZHJlbj1mdW5jdGlvbih0KXtwLmRyYXdFbGxpcHNlKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMix0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMix0KSx0LmNsaXAoKX0sZX0oZyk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkVsbGlwc2VcIl09UDt2YXIgaz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9iZWZvcmVSZW5kZXJUZXh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1cIlwiLGk9MDtpPHQubGVuZ3RoO2krKyllKz1cIuKAolwiO3JldHVybiBlfSxlfShUKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuSW5wdXRQYXNzd29yZFwiXT1rO3ZhciBJPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2xpbmVXaWR0aD0xLGkuX3gxPW5ldyBhKDApLGkuX3kxPW5ldyBhKDApLGkuX3gyPW5ldyBhKDApLGkuX3kyPW5ldyBhKDApLGkuX2Rhc2g9bmV3IEFycmF5LGkuX2F1dG9tYXRpY1NpemU9ITAsaS5pc0hpdFRlc3RWaXNpYmxlPSExLGkuX2hvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULGkuX3ZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGFzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGFzaH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rhc2ghPT10JiYodGhpcy5fZGFzaD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbm5lY3RlZENvbnRyb2xcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3RlZENvbnRyb2x9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2Nvbm5lY3RlZENvbnRyb2whPT10JiYodGhpcy5fY29ubmVjdGVkQ29udHJvbERpcnR5T2JzZXJ2ZXImJnRoaXMuX2Nvbm5lY3RlZENvbnRyb2wmJih0aGlzLl9jb25uZWN0ZWRDb250cm9sLm9uRGlydHlPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9jb25uZWN0ZWRDb250cm9sRGlydHlPYnNlcnZlciksdGhpcy5fY29ubmVjdGVkQ29udHJvbERpcnR5T2JzZXJ2ZXI9bnVsbCksdCYmKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xEaXJ0eU9ic2VydmVyPXQub25EaXJ0eU9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX21hcmtBc0RpcnR5KCl9KSksdGhpcy5fY29ubmVjdGVkQ29udHJvbD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIngxXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94MS50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3gxLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5feDEuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ5MVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feTEudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl95MS50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3kxLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwieDJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3gyLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feDIudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl94Mi5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInkyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95Mi50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3kyLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5feTIuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsaW5lV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xpbmVXaWR0aCE9PXQmJih0aGlzLl9saW5lV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsQWxpZ25tZW50XCIse3NldDpmdW5jdGlvbih0KXt9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmVydGljYWxBbGlnbm1lbnRcIix7c2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfZWZmZWN0aXZlWDJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2w/dGhpcy5fY29ubmVjdGVkQ29udHJvbC5jZW50ZXJYOjApK3RoaXMuX3gyLmdldFZhbHVlKHRoaXMuX2hvc3QpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIl9lZmZlY3RpdmVZMlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fY29ubmVjdGVkQ29udHJvbD90aGlzLl9jb25uZWN0ZWRDb250cm9sLmNlbnRlclk6MCkrdGhpcy5feTIuZ2V0VmFsdWUodGhpcy5faG9zdCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lXCJ9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3Quc2F2ZSgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdGhpcy5fYXBwbHlTdGF0ZXModCksdC5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHQubGluZVdpZHRoPXRoaXMuX2xpbmVXaWR0aCx0LnNldExpbmVEYXNoKHRoaXMuX2Rhc2gpLHQuYmVnaW5QYXRoKCksdC5tb3ZlVG8odGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX3gxLmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUudG9wK3RoaXMuX3kxLmdldFZhbHVlKHRoaXMuX2hvc3QpKSx0LmxpbmVUbyh0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fZWZmZWN0aXZlWDIsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS50b3ArdGhpcy5fZWZmZWN0aXZlWTIpLHQuc3Ryb2tlKCksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9tZWFzdXJlPWZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg9TWF0aC5hYnModGhpcy5feDEuZ2V0VmFsdWUodGhpcy5faG9zdCktdGhpcy5fZWZmZWN0aXZlWDIpK3RoaXMuX2xpbmVXaWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ9TWF0aC5hYnModGhpcy5feTEuZ2V0VmFsdWUodGhpcy5faG9zdCktdGhpcy5fZWZmZWN0aXZlWTIpK3RoaXMuX2xpbmVXaWR0aH0sZS5wcm90b3R5cGUuX2NvbXB1dGVBbGlnbm1lbnQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0PXQubGVmdCtNYXRoLm1pbih0aGlzLl94MS5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9lZmZlY3RpdmVYMiktdGhpcy5fbGluZVdpZHRoLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wPXQudG9wK01hdGgubWluKHRoaXMuX3kxLmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2VmZmVjdGl2ZVkyKS10aGlzLl9saW5lV2lkdGgvMn0sZS5wcm90b3R5cGUubW92ZVRvVmVjdG9yMz1mdW5jdGlvbih0LGUsaSl7aWYodm9pZCAwPT09aSYmKGk9ITEpLHRoaXMuX2hvc3QmJnRoaXMucGFyZW50PT09dGhpcy5faG9zdC5fcm9vdENvbnRhaW5lcil7dmFyIHI9dGhpcy5faG9zdC5fZ2V0R2xvYmFsVmlld3BvcnQoZSksbj1zLlZlY3RvcjMuUHJvamVjdCh0LHMuTWF0cml4LklkZW50aXR5KCksZS5nZXRUcmFuc2Zvcm1NYXRyaXgoKSxyKTt0aGlzLl9tb3ZlVG9Qcm9qZWN0ZWRQb3NpdGlvbihuLGkpLG4uejwwfHxuLno+MT90aGlzLm5vdFJlbmRlcmFibGU9ITA6dGhpcy5ub3RSZW5kZXJhYmxlPSExfWVsc2Ugcy5Ub29scy5FcnJvcihcIkNhbm5vdCBtb3ZlIGEgY29udHJvbCB0byBhIHZlY3RvcjMgaWYgdGhlIGNvbnRyb2wgaXMgbm90IGF0IHJvb3QgbGV2ZWxcIil9LGUucHJvdG90eXBlLl9tb3ZlVG9Qcm9qZWN0ZWRQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSExKTt2YXIgaT10LngrdGhpcy5fbGlua09mZnNldFguZ2V0VmFsdWUodGhpcy5faG9zdCkrXCJweFwiLHI9dC55K3RoaXMuX2xpbmtPZmZzZXRZLmdldFZhbHVlKHRoaXMuX2hvc3QpK1wicHhcIjtlPyh0aGlzLngyPWksdGhpcy55Mj1yLHRoaXMuX3gyLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCx0aGlzLl95Mi5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApOih0aGlzLngxPWksdGhpcy55MT1yLHRoaXMuX3gxLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCx0aGlzLl95MS5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuTGluZVwiXT1JO3ZhciBBPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9tdWx0aUxpbmU9dCx0aGlzLl94PW5ldyBhKDApLHRoaXMuX3k9bmV3IGEoMCksdGhpcy5fcG9pbnQ9bmV3IHMuVmVjdG9yMigwLDApfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94LnRvU3RyaW5nKHRoaXMuX211bHRpTGluZS5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl94LnRvU3RyaW5nKHRoaXMuX211bHRpTGluZS5faG9zdCkhPT10JiZ0aGlzLl94LmZyb21TdHJpbmcodCkmJnRoaXMuX211bHRpTGluZS5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95LnRvU3RyaW5nKHRoaXMuX211bHRpTGluZS5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl95LnRvU3RyaW5nKHRoaXMuX211bHRpTGluZS5faG9zdCkhPT10JiZ0aGlzLl95LmZyb21TdHJpbmcodCkmJnRoaXMuX211bHRpTGluZS5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb250cm9sXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250cm9sfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29udHJvbCE9PXQmJih0aGlzLl9jb250cm9sJiZ0aGlzLl9jb250cm9sT2JzZXJ2ZXImJih0aGlzLl9jb250cm9sLm9uRGlydHlPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9jb250cm9sT2JzZXJ2ZXIpLHRoaXMuX2NvbnRyb2xPYnNlcnZlcj1udWxsKSx0aGlzLl9jb250cm9sPXQsdGhpcy5fY29udHJvbCYmKHRoaXMuX2NvbnRyb2xPYnNlcnZlcj10aGlzLl9jb250cm9sLm9uRGlydHlPYnNlcnZhYmxlLmFkZCh0aGlzLl9tdWx0aUxpbmUub25Qb2ludFVwZGF0ZSkpLHRoaXMuX211bHRpTGluZS5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibWVzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzaH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21lc2ghPT10JiYodGhpcy5fbWVzaCYmdGhpcy5fbWVzaE9ic2VydmVyJiZ0aGlzLl9tZXNoLmdldFNjZW5lKCkub25BZnRlckNhbWVyYVJlbmRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX21lc2hPYnNlcnZlciksdGhpcy5fbWVzaD10LHRoaXMuX21lc2gmJih0aGlzLl9tZXNoT2JzZXJ2ZXI9dGhpcy5fbWVzaC5nZXRTY2VuZSgpLm9uQWZ0ZXJDYW1lcmFSZW5kZXJPYnNlcnZhYmxlLmFkZCh0aGlzLl9tdWx0aUxpbmUub25Qb2ludFVwZGF0ZSkpLHRoaXMuX211bHRpTGluZS5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVzZXRMaW5rcz1mdW5jdGlvbigpe3RoaXMuY29udHJvbD1udWxsLHRoaXMubWVzaD1udWxsfSx0LnByb3RvdHlwZS50cmFuc2xhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9pbnQ9dGhpcy5fdHJhbnNsYXRlUG9pbnQoKSx0aGlzLl9wb2ludH0sdC5wcm90b3R5cGUuX3RyYW5zbGF0ZVBvaW50PWZ1bmN0aW9uKCl7aWYobnVsbCE9dGhpcy5fbWVzaClyZXR1cm4gdGhpcy5fbXVsdGlMaW5lLl9ob3N0LmdldFByb2plY3RlZFBvc2l0aW9uKHRoaXMuX21lc2guZ2V0Qm91bmRpbmdJbmZvKCkuYm91bmRpbmdTcGhlcmUuY2VudGVyLHRoaXMuX21lc2guZ2V0V29ybGRNYXRyaXgoKSk7aWYobnVsbCE9dGhpcy5fY29udHJvbClyZXR1cm4gbmV3IHMuVmVjdG9yMih0aGlzLl9jb250cm9sLmNlbnRlclgsdGhpcy5fY29udHJvbC5jZW50ZXJZKTt2YXIgdD10aGlzLl9tdWx0aUxpbmUuX2hvc3QsZT10aGlzLl94LmdldFZhbHVlSW5QaXhlbCh0LE51bWJlcih0Ll9jYW52YXMud2lkdGgpKSxpPXRoaXMuX3kuZ2V0VmFsdWVJblBpeGVsKHQsTnVtYmVyKHQuX2NhbnZhcy5oZWlnaHQpKTtyZXR1cm4gbmV3IHMuVmVjdG9yMihlLGkpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5yZXNldExpbmtzKCl9LHR9KCksUz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl9saW5lV2lkdGg9MSxpLm9uUG9pbnRVcGRhdGU9ZnVuY3Rpb24oKXtpLl9tYXJrQXNEaXJ0eSgpfSxpLl9hdXRvbWF0aWNTaXplPSEwLGkuaXNIaXRUZXN0VmlzaWJsZT0hMSxpLl9ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxpLl92ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1AsaS5fZGFzaD1bXSxpLl9wb2ludHM9W10saX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRhc2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rhc2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kYXNoIT09dCYmKHRoaXMuX2Rhc2g9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXRBdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcG9pbnRzW3RdfHwodGhpcy5fcG9pbnRzW3RdPW5ldyBBKHRoaXMpKSx0aGlzLl9wb2ludHNbdF19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspZVtpXT1hcmd1bWVudHNbaV07cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiB0LnB1c2goZSl9KX0sZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEF0KHRoaXMuX3BvaW50cy5sZW5ndGgpO3JldHVybiBudWxsPT10P2U6KHQgaW5zdGFuY2VvZiBzLkFic3RyYWN0TWVzaD9lLm1lc2g9dDp0IGluc3RhbmNlb2YgcD9lLmNvbnRyb2w9dDpudWxsIT10LngmJm51bGwhPXQueSYmKGUueD10LngsZS55PXQueSksZSl9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt2YXIgZTtpZih0IGluc3RhbmNlb2YgQSl7aWYoLTE9PT0oZT10aGlzLl9wb2ludHMuaW5kZXhPZih0KSkpcmV0dXJufWVsc2UgZT10O3ZhciBpPXRoaXMuX3BvaW50c1tlXTtpJiYoaS5kaXNwb3NlKCksdGhpcy5fcG9pbnRzLnNwbGljZShlLDEpKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtmb3IoO3RoaXMuX3BvaW50cy5sZW5ndGg+MDspdGhpcy5yZW1vdmUodGhpcy5fcG9pbnRzLmxlbmd0aC0xKX0sZS5wcm90b3R5cGUucmVzZXRMaW5rcz1mdW5jdGlvbigpe3RoaXMuX3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe251bGwhPXQmJnQucmVzZXRMaW5rcygpfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImxpbmVXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZVdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGluZVdpZHRoIT09dCYmKHRoaXMuX2xpbmVXaWR0aD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhvcml6b250YWxBbGlnbm1lbnRcIix7c2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2ZXJ0aWNhbEFsaWdubWVudFwiLHtzZXQ6ZnVuY3Rpb24odCl7fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiTXVsdGlMaW5lXCJ9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7dC5zYXZlKCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IsdC5saW5lV2lkdGg9dGhpcy5fbGluZVdpZHRoLHQuc2V0TGluZURhc2godGhpcy5fZGFzaCksdC5iZWdpblBhdGgoKTt2YXIgaT0hMDt0aGlzLl9wb2ludHMuZm9yRWFjaChmdW5jdGlvbihlKXtlJiYoaT8odC5tb3ZlVG8oZS5fcG9pbnQueCxlLl9wb2ludC55KSxpPSExKTp0LmxpbmVUbyhlLl9wb2ludC54LGUuX3BvaW50LnkpKX0pLHQuc3Ryb2tlKCksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7dGhpcy5fbWluWD1udWxsLHRoaXMuX21pblk9bnVsbCx0aGlzLl9tYXhYPW51bGwsdGhpcy5fbWF4WT1udWxsLHRoaXMuX3BvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dCYmKHQudHJhbnNsYXRlKCksKG51bGw9PWkuX21pblh8fHQuX3BvaW50Lng8aS5fbWluWCkmJihpLl9taW5YPXQuX3BvaW50LngpLChudWxsPT1pLl9taW5ZfHx0Ll9wb2ludC55PGkuX21pblkpJiYoaS5fbWluWT10Ll9wb2ludC55KSwobnVsbD09aS5fbWF4WHx8dC5fcG9pbnQueD5pLl9tYXhYKSYmKGkuX21heFg9dC5fcG9pbnQueCksKG51bGw9PWkuX21heFl8fHQuX3BvaW50Lnk+aS5fbWF4WSkmJihpLl9tYXhZPXQuX3BvaW50LnkpKX0pLG51bGw9PXRoaXMuX21pblgmJih0aGlzLl9taW5YPTApLG51bGw9PXRoaXMuX21pblkmJih0aGlzLl9taW5ZPTApLG51bGw9PXRoaXMuX21heFgmJih0aGlzLl9tYXhYPTApLG51bGw9PXRoaXMuX21heFkmJih0aGlzLl9tYXhZPTApfSxlLnByb3RvdHlwZS5fbWVhc3VyZT1mdW5jdGlvbigpe251bGwhPXRoaXMuX21pblgmJm51bGwhPXRoaXMuX21heFgmJm51bGwhPXRoaXMuX21pblkmJm51bGwhPXRoaXMuX21heFkmJih0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD1NYXRoLmFicyh0aGlzLl9tYXhYLXRoaXMuX21pblgpK3RoaXMuX2xpbmVXaWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ9TWF0aC5hYnModGhpcy5fbWF4WS10aGlzLl9taW5ZKSt0aGlzLl9saW5lV2lkdGgpfSxlLnByb3RvdHlwZS5fY29tcHV0ZUFsaWdubWVudD1mdW5jdGlvbih0LGUpe251bGwhPXRoaXMuX21pblgmJm51bGwhPXRoaXMuX21pblkmJih0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0PXRoaXMuX21pblgtdGhpcy5fbGluZVdpZHRoLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wPXRoaXMuX21pblktdGhpcy5fbGluZVdpZHRoLzIpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5yZXNldCgpLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLk11bHRpTGluZVwiXT1TO3ZhciBFPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2lzQ2hlY2tlZD0hMSxpLl9iYWNrZ3JvdW5kPVwiYmxhY2tcIixpLl9jaGVja1NpemVSYXRpbz0uOCxpLl90aGlja25lc3M9MSxpLmdyb3VwPVwiXCIsaS5vbklzQ2hlY2tlZENoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsaS5pc1BvaW50ZXJCbG9ja2VyPSEwLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aGlja25lc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RoaWNrbmVzc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RoaWNrbmVzcyE9PXQmJih0aGlzLl90aGlja25lc3M9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGVja1NpemVSYXRpb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tTaXplUmF0aW99LHNldDpmdW5jdGlvbih0KXt0PU1hdGgubWF4KE1hdGgubWluKDEsdCksMCksdGhpcy5fY2hlY2tTaXplUmF0aW8hPT10JiYodGhpcy5fY2hlY2tTaXplUmF0aW89dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNDaGVja2VkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NoZWNrZWR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2lzQ2hlY2tlZCE9PXQmJih0aGlzLl9pc0NoZWNrZWQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCksdGhpcy5faXNDaGVja2VkJiZ0aGlzLl9ob3N0JiZ0aGlzLl9ob3N0LmV4ZWN1dGVPbkFsbENvbnRyb2xzKGZ1bmN0aW9uKHQpe2lmKHQhPT1lJiZ2b2lkIDAhPT10Lmdyb3VwKXt2YXIgaT10O2kuZ3JvdXA9PT1lLmdyb3VwJiYoaS5pc0NoZWNrZWQ9ITEpfX0pKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlJhZGlvQnV0dG9uXCJ9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpO3ZhciBlPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLXRoaXMuX3RoaWNrbmVzcyxpPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl90aGlja25lc3M7aWYoKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSxwLmRyYXdFbGxpcHNlKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMi10aGlzLl90aGlja25lc3MvMix0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMi10aGlzLl90aGlja25lc3MvMix0KSx0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5fYmFja2dyb3VuZDp0aGlzLl9kaXNhYmxlZENvbG9yLHQuZmlsbCgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IsdC5saW5lV2lkdGg9dGhpcy5fdGhpY2tuZXNzLHQuc3Ryb2tlKCksdGhpcy5faXNDaGVja2VkKXt0LmZpbGxTdHlsZT10aGlzLl9pc0VuYWJsZWQ/dGhpcy5jb2xvcjp0aGlzLl9kaXNhYmxlZENvbG9yO3ZhciByPWUqdGhpcy5fY2hlY2tTaXplUmF0aW8sbj1pKnRoaXMuX2NoZWNrU2l6ZVJhdGlvO3AuZHJhd0VsbGlwc2UodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMixyLzItdGhpcy5fdGhpY2tuZXNzLzIsbi8yLXRoaXMuX3RoaWNrbmVzcy8yLHQpLHQuZmlsbCgpfXQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtyZXR1cm4hIXQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKSYmKHRoaXMuaXNDaGVja2VkfHwodGhpcy5pc0NoZWNrZWQ9ITApLCEwKX0sZS5BZGRSYWRpb0J1dHRvbldpdGhIZWFkZXI9ZnVuY3Rpb24odCxpLHIsbil7dmFyIG89bmV3IEM7by5pc1ZlcnRpY2FsPSExLG8uaGVpZ2h0PVwiMzBweFwiO3ZhciBzPW5ldyBlO3Mud2lkdGg9XCIyMHB4XCIscy5oZWlnaHQ9XCIyMHB4XCIscy5pc0NoZWNrZWQ9cixzLmNvbG9yPVwiZ3JlZW5cIixzLmdyb3VwPWkscy5vbklzQ2hlY2tlZENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtyZXR1cm4gbihzLHQpfSksby5hZGRDb250cm9sKHMpO3ZhciBhPW5ldyB5O3JldHVybiBhLnRleHQ9dCxhLndpZHRoPVwiMTgwcHhcIixhLnBhZGRpbmdMZWZ0PVwiNXB4XCIsYS50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsYS5jb2xvcj1cIndoaXRlXCIsby5hZGRDb250cm9sKGEpLG99LGV9KHApO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5SYWRpb0J1dHRvblwiXT1FO3ZhciBMPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3RodW1iV2lkdGg9bmV3IGEoMjAsYS5VTklUTU9ERV9QSVhFTCwhMSksaS5fbWluaW11bT0wLGkuX21heGltdW09MTAwLGkuX3ZhbHVlPTUwLGkuX2lzVmVydGljYWw9ITEsaS5fYmFyT2Zmc2V0PW5ldyBhKDUsYS5VTklUTU9ERV9QSVhFTCwhMSksaS5faXNUaHVtYkNsYW1wZWQ9ITEsaS5fZGlzcGxheVRodW1iPSEwLGkuX3N0ZXA9MCxpLl9sYXN0UG9pbnRlckRvd25JRD0tMSxpLl9lZmZlY3RpdmVCYXJPZmZzZXQ9MCxpLm9uVmFsdWVDaGFuZ2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGkuX3BvaW50ZXJJc0Rvd249ITEsaS5pc1BvaW50ZXJCbG9ja2VyPSEwLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkaXNwbGF5VGh1bWJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXlUaHVtYn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3BsYXlUaHVtYiE9PXQmJih0aGlzLl9kaXNwbGF5VGh1bWI9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzdGVwXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGVwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3RlcCE9PXQmJih0aGlzLl9zdGVwPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFyT2Zmc2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJPZmZzZXQudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYXJPZmZzZXQudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9iYXJPZmZzZXQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXJPZmZzZXRJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFyT2Zmc2V0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUud2lkdGgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iV2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aHVtYldpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fdGh1bWJXaWR0aC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iV2lkdGhJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJXaWR0aC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtaW5pbXVtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW5pbXVtfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWluaW11bSE9PXQmJih0aGlzLl9taW5pbXVtPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLnZhbHVlPU1hdGgubWF4KE1hdGgubWluKHRoaXMudmFsdWUsdGhpcy5fbWF4aW11bSksdGhpcy5fbWluaW11bSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1heGltdW1cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heGltdW19LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYXhpbXVtIT09dCYmKHRoaXMuX21heGltdW09dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMudmFsdWU9TWF0aC5tYXgoTWF0aC5taW4odGhpcy52YWx1ZSx0aGlzLl9tYXhpbXVtKSx0aGlzLl9taW5pbXVtKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dD1NYXRoLm1heChNYXRoLm1pbih0LHRoaXMuX21heGltdW0pLHRoaXMuX21pbmltdW0pLHRoaXMuX3ZhbHVlIT09dCYmKHRoaXMuX3ZhbHVlPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uVmFsdWVDaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcy5fdmFsdWUpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc1ZlcnRpY2FsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1ZlcnRpY2FsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNWZXJ0aWNhbCE9PXQmJih0aGlzLl9pc1ZlcnRpY2FsPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNUaHVtYkNsYW1wZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVGh1bWJDbGFtcGVkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNUaHVtYkNsYW1wZWQhPT10JiYodGhpcy5faXNUaHVtYkNsYW1wZWQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkJhc2VTbGlkZXJcIn0sZS5wcm90b3R5cGUuX2dldFRodW1iUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1ZlcnRpY2FsPyh0aGlzLm1heGltdW0tdGhpcy52YWx1ZSkvKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pKnRoaXMuX2JhY2tncm91bmRCb3hMZW5ndGg6KHRoaXMudmFsdWUtdGhpcy5taW5pbXVtKS8odGhpcy5tYXhpbXVtLXRoaXMubWluaW11bSkqdGhpcy5fYmFja2dyb3VuZEJveExlbmd0aH0sZS5wcm90b3R5cGUuX2dldFRodW1iVGhpY2tuZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPTA7c3dpdGNoKHQpe2Nhc2VcImNpcmNsZVwiOmU9dGhpcy5fdGh1bWJXaWR0aC5pc1BpeGVsP01hdGgubWF4KHRoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyk6dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyp0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpO2JyZWFrO2Nhc2VcInJlY3RhbmdsZVwiOmU9dGhpcy5fdGh1bWJXaWR0aC5pc1BpeGVsP01hdGgubWluKHRoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyk6dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyp0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpfXJldHVybiBlfSxlLnByb3RvdHlwZS5fcHJlcGFyZVJlbmRlcmluZ0RhdGE9ZnVuY3Rpb24odCl7dGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0PTAsdGhpcy5fcmVuZGVyTGVmdD10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX3JlbmRlclRvcD10aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fcmVuZGVyV2lkdGg9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fcmVuZGVySGVpZ2h0PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCx0aGlzLl9iYWNrZ3JvdW5kQm94TGVuZ3RoPU1hdGgubWF4KHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcz1NYXRoLm1pbih0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzPXRoaXMuX2dldFRodW1iVGhpY2tuZXNzKHQpLHRoaXMuZGlzcGxheVRodW1iJiYodGhpcy5fYmFja2dyb3VuZEJveExlbmd0aC09dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpLHRoaXMuaXNWZXJ0aWNhbCYmdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoP2NvbnNvbGUuZXJyb3IoXCJIZWlnaHQgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiB3aWR0aFwiKToodGhpcy5fYmFyT2Zmc2V0LmlzUGl4ZWw/dGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0PU1hdGgubWluKHRoaXMuX2Jhck9mZnNldC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzKTp0aGlzLl9lZmZlY3RpdmVCYXJPZmZzZXQ9dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyp0aGlzLl9iYXJPZmZzZXQuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy09Mip0aGlzLl9lZmZlY3RpdmVCYXJPZmZzZXQsdGhpcy5pc1ZlcnRpY2FsPyh0aGlzLl9yZW5kZXJMZWZ0Kz10aGlzLl9lZmZlY3RpdmVCYXJPZmZzZXQsIXRoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuZGlzcGxheVRodW1iJiYodGhpcy5fcmVuZGVyVG9wKz10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcy8yKSx0aGlzLl9yZW5kZXJIZWlnaHQ9dGhpcy5fYmFja2dyb3VuZEJveExlbmd0aCx0aGlzLl9yZW5kZXJXaWR0aD10aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzKToodGhpcy5fcmVuZGVyVG9wKz10aGlzLl9lZmZlY3RpdmVCYXJPZmZzZXQsIXRoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuZGlzcGxheVRodW1iJiYodGhpcy5fcmVuZGVyTGVmdCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MvMiksdGhpcy5fcmVuZGVySGVpZ2h0PXRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MsdGhpcy5fcmVuZGVyV2lkdGg9dGhpcy5fYmFja2dyb3VuZEJveExlbmd0aCkpfSxlLnByb3RvdHlwZS5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcj1mdW5jdGlvbih0LGUpe3ZhciBpOzAhPXRoaXMucm90YXRpb24mJih0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXgudHJhbnNmb3JtQ29vcmRpbmF0ZXModCxlLHRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24pLHQ9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi54LGU9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi55KSxpPXRoaXMuX2lzVmVydGljYWw/dGhpcy5fbWluaW11bSsoMS0oZS10aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApL3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkqKHRoaXMuX21heGltdW0tdGhpcy5fbWluaW11bSk6dGhpcy5fbWluaW11bSsodC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KS90aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCoodGhpcy5fbWF4aW11bS10aGlzLl9taW5pbXVtKTt2YXIgcj0xL3RoaXMuX3N0ZXB8MDt0aGlzLnZhbHVlPXRoaXMuX3N0ZXA/KGkqcnwwKS9yOml9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiEhdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pJiYodGhpcy5fcG9pbnRlcklzRG93bj0hMCx0aGlzLl91cGRhdGVWYWx1ZUZyb21Qb2ludGVyKGkueCxpLnkpLHRoaXMuX2hvc3QuX2NhcHR1cmluZ0NvbnRyb2xbcl09dGhpcyx0aGlzLl9sYXN0UG9pbnRlckRvd25JRD1yLCEwKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlck1vdmU9ZnVuY3Rpb24oZSxpLHIpe3I9PXRoaXMuX2xhc3RQb2ludGVyRG93bklEJiYodGhpcy5fcG9pbnRlcklzRG93biYmdGhpcy5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcihpLngsaS55KSx0LnByb3RvdHlwZS5fb25Qb2ludGVyTW92ZS5jYWxsKHRoaXMsZSxpLHIpKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKGUsaSxyLG4sbyl7dGhpcy5fcG9pbnRlcklzRG93bj0hMSxkZWxldGUgdGhpcy5faG9zdC5fY2FwdHVyaW5nQ29udHJvbFtyXSx0LnByb3RvdHlwZS5fb25Qb2ludGVyVXAuY2FsbCh0aGlzLGUsaSxyLG4sbyl9LGV9KHApLFI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fYmFja2dyb3VuZD1cImJsYWNrXCIsaS5fYm9yZGVyQ29sb3I9XCJ3aGl0ZVwiLGkuX2lzVGh1bWJDaXJjbGU9ITEsaS5fZGlzcGxheVZhbHVlQmFyPSEwLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkaXNwbGF5VmFsdWVCYXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXlWYWx1ZUJhcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3BsYXlWYWx1ZUJhciE9PXQmJih0aGlzLl9kaXNwbGF5VmFsdWVCYXI9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJib3JkZXJDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9yZGVyQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ib3JkZXJDb2xvciE9PXQmJih0aGlzLl9ib3JkZXJDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc1RodW1iQ2lyY2xlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1RodW1iQ2lyY2xlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNUaHVtYkNpcmNsZSE9PXQmJih0aGlzLl9pc1RodW1iQ2lyY2xlPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJTbGlkZXJcIn0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCxlKXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9wcmVwYXJlUmVuZGVyaW5nRGF0YSh0aGlzLmlzVGh1bWJDaXJjbGU/XCJjaXJjbGVcIjpcInJlY3RhbmdsZVwiKTt2YXIgaT10aGlzLl9yZW5kZXJMZWZ0LHI9dGhpcy5fcmVuZGVyVG9wLG49dGhpcy5fcmVuZGVyV2lkdGgsbz10aGlzLl9yZW5kZXJIZWlnaHQscz0wO3RoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuaXNUaHVtYkNpcmNsZT8odGhpcy5pc1ZlcnRpY2FsP3IrPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLzI6aSs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MvMixzPXRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MvMik6cz0odGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MtdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0KS8yLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSk7dmFyIGE9dGhpcy5fZ2V0VGh1bWJQb3NpdGlvbigpO3QuZmlsbFN0eWxlPXRoaXMuX2JhY2tncm91bmQsdGhpcy5pc1ZlcnRpY2FsP3RoaXMuaXNUaHVtYkNsYW1wZWQ/dGhpcy5pc1RodW1iQ2lyY2xlPyh0LmJlZ2luUGF0aCgpLHQuYXJjKGkrdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy8yLHIscyxNYXRoLlBJLDIqTWF0aC5QSSksdC5maWxsKCksdC5maWxsUmVjdChpLHIsbixvKSk6dC5maWxsUmVjdChpLHIsbixvK3RoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKTp0LmZpbGxSZWN0KGkscixuLG8pOnRoaXMuaXNUaHVtYkNsYW1wZWQ/dGhpcy5pc1RodW1iQ2lyY2xlPyh0LmJlZ2luUGF0aCgpLHQuYXJjKGkrdGhpcy5fYmFja2dyb3VuZEJveExlbmd0aCxyK3RoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MvMixzLDAsMipNYXRoLlBJKSx0LmZpbGwoKSx0LmZpbGxSZWN0KGkscixuLG8pKTp0LmZpbGxSZWN0KGkscixuK3RoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLG8pOnQuZmlsbFJlY3QoaSxyLG4sbyksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHQuZmlsbFN0eWxlPXRoaXMuY29sb3IsdGhpcy5fZGlzcGxheVZhbHVlQmFyJiYodGhpcy5pc1ZlcnRpY2FsP3RoaXMuaXNUaHVtYkNsYW1wZWQ/dGhpcy5pc1RodW1iQ2lyY2xlPyh0LmJlZ2luUGF0aCgpLHQuYXJjKGkrdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy8yLHIrdGhpcy5fYmFja2dyb3VuZEJveExlbmd0aCxzLDAsMipNYXRoLlBJKSx0LmZpbGwoKSx0LmZpbGxSZWN0KGkscithLG4sby1hKSk6dC5maWxsUmVjdChpLHIrYSxuLG8tYSt0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dC5maWxsUmVjdChpLHIrYSxuLG8tYSk6dGhpcy5pc1RodW1iQ2xhbXBlZCYmdGhpcy5pc1RodW1iQ2lyY2xlPyh0LmJlZ2luUGF0aCgpLHQuYXJjKGkscit0aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzLzIscywwLDIqTWF0aC5QSSksdC5maWxsKCksdC5maWxsUmVjdChpLHIsYSxvKSk6dC5maWxsUmVjdChpLHIsYSxvKSksdGhpcy5kaXNwbGF5VGh1bWImJigodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpLHRoaXMuX2lzVGh1bWJDaXJjbGU/KHQuYmVnaW5QYXRoKCksdGhpcy5pc1ZlcnRpY2FsP3QuYXJjKGkrdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy8yLHIrYSxzLDAsMipNYXRoLlBJKTp0LmFyYyhpK2Escit0aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzLzIscywwLDIqTWF0aC5QSSksdC5maWxsKCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHQuc3Ryb2tlU3R5bGU9dGhpcy5fYm9yZGVyQ29sb3IsdC5zdHJva2UoKSk6KHRoaXMuaXNWZXJ0aWNhbD90LmZpbGxSZWN0KGktdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCthLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKTp0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrYSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0JsdXI9MCx0LnNoYWRvd09mZnNldFg9MCx0LnNoYWRvd09mZnNldFk9MCksdC5zdHJva2VTdHlsZT10aGlzLl9ib3JkZXJDb2xvcix0aGlzLmlzVmVydGljYWw/dC5zdHJva2VSZWN0KGktdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCthLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKTp0LnN0cm9rZVJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCthLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKSksdC5yZXN0b3JlKCl9LGV9KEwpO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5TbGlkZXJcIl09Ujt2YXIgRD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5uYW1lPXQsdGhpcy5fZ3JvdXBQYW5lbD1uZXcgQyx0aGlzLl9zZWxlY3RvcnM9bmV3IEFycmF5LHRoaXMuX2dyb3VwUGFuZWwudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLHRoaXMuX2dyb3VwUGFuZWwuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsdGhpcy5fZ3JvdXBIZWFkZXI9dGhpcy5fYWRkR3JvdXBIZWFkZXIodCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImdyb3VwUGFuZWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dyb3VwUGFuZWx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2VsZWN0b3JzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3RvcnN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaGVhZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncm91cEhlYWRlci50ZXh0fSxzZXQ6ZnVuY3Rpb24odCl7XCJsYWJlbFwiIT09dGhpcy5fZ3JvdXBIZWFkZXIudGV4dCYmKHRoaXMuX2dyb3VwSGVhZGVyLnRleHQ9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX2FkZEdyb3VwSGVhZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB5KFwiZ3JvdXBIZWFkXCIsdCk7cmV0dXJuIGUud2lkdGg9LjksZS5oZWlnaHQ9XCIzMHB4XCIsZS50ZXh0V3JhcHBpbmc9ITAsZS5jb2xvcj1cImJsYWNrXCIsZS5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxlLnRleHRIb3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxlLmxlZnQ9XCIycHhcIix0aGlzLl9ncm91cFBhbmVsLmFkZENvbnRyb2woZSksZX0sdC5wcm90b3R5cGUuX2dldFNlbGVjdG9yPWZ1bmN0aW9uKHQpe2lmKCEodDwwfHx0Pj10aGlzLl9zZWxlY3RvcnMubGVuZ3RoKSlyZXR1cm4gdGhpcy5fc2VsZWN0b3JzW3RdfSx0LnByb3RvdHlwZS5yZW1vdmVTZWxlY3Rvcj1mdW5jdGlvbih0KXt0PDB8fHQ+PXRoaXMuX3NlbGVjdG9ycy5sZW5ndGh8fCh0aGlzLl9ncm91cFBhbmVsLnJlbW92ZUNvbnRyb2wodGhpcy5fc2VsZWN0b3JzW3RdKSx0aGlzLl9zZWxlY3RvcnMuc3BsaWNlKHQsMSkpfSx0fSgpLEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5hZGRDaGVja2JveD1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09ZSYmKGU9ZnVuY3Rpb24odCl7fSksdm9pZCAwPT09aSYmKGk9ITEpO2k9aXx8ITE7dmFyIHI9bmV3IHc7ci53aWR0aD1cIjIwcHhcIixyLmhlaWdodD1cIjIwcHhcIixyLmNvbG9yPVwiIzM2NDI0OVwiLHIuYmFja2dyb3VuZD1cIiNDQ0NDQ0NcIixyLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULHIub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7ZSh0KX0pO3ZhciBuPXAuQWRkSGVhZGVyKHIsdCxcIjIwMHB4XCIse2lzSG9yaXpvbnRhbDohMCxjb250cm9sRmlyc3Q6ITB9KTtuLmhlaWdodD1cIjMwcHhcIixuLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG4ubGVmdD1cIjRweFwiLHRoaXMuZ3JvdXBQYW5lbC5hZGRDb250cm9sKG4pLHRoaXMuc2VsZWN0b3JzLnB1c2gobiksci5pc0NoZWNrZWQ9aSx0aGlzLmdyb3VwUGFuZWwucGFyZW50JiZ0aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudCYmKHIuY29sb3I9dGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQuYnV0dG9uQ29sb3Isci5iYWNrZ3JvdW5kPXRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50LmJ1dHRvbkJhY2tncm91bmQpfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JMYWJlbD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLnRleHQ9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yTGFiZWxDb2xvcj1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLmNvbG9yPWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckJ1dHRvbkNvbG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMF0uY29sb3I9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yQnV0dG9uQmFja2dyb3VuZD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLmJhY2tncm91bmQ9ZX0sZX0oRCksTj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9zZWxlY3ROYj0wLGV9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5hZGRSYWRpbz1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09ZSYmKGU9ZnVuY3Rpb24odCl7fSksdm9pZCAwPT09aSYmKGk9ITEpO3ZhciByPXRoaXMuX3NlbGVjdE5iKyssbj1uZXcgRTtuLm5hbWU9dCxuLndpZHRoPVwiMjBweFwiLG4uaGVpZ2h0PVwiMjBweFwiLG4uY29sb3I9XCIjMzY0MjQ5XCIsbi5iYWNrZ3JvdW5kPVwiI0NDQ0NDQ1wiLG4uZ3JvdXA9dGhpcy5uYW1lLG4uaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsbi5vbklzQ2hlY2tlZENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXt0JiZlKHIpfSk7dmFyIG89cC5BZGRIZWFkZXIobix0LFwiMjAwcHhcIix7aXNIb3Jpem9udGFsOiEwLGNvbnRyb2xGaXJzdDohMH0pO28uaGVpZ2h0PVwiMzBweFwiLG8uaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsby5sZWZ0PVwiNHB4XCIsdGhpcy5ncm91cFBhbmVsLmFkZENvbnRyb2wobyksdGhpcy5zZWxlY3RvcnMucHVzaChvKSxuLmlzQ2hlY2tlZD1pLHRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQmJnRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50JiYobi5jb2xvcj10aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudC5idXR0b25Db2xvcixuLmJhY2tncm91bmQ9dGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQuYnV0dG9uQmFja2dyb3VuZCl9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckxhYmVsPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMV0udGV4dD1lfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JMYWJlbENvbG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMV0uY29sb3I9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yQnV0dG9uQ29sb3I9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblswXS5jb2xvcj1lfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JCdXR0b25CYWNrZ3JvdW5kPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMF0uYmFja2dyb3VuZD1lfSxlfShEKSxWPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuYWRkU2xpZGVyPWZ1bmN0aW9uKHQsZSxpLHIsbixvLHMpe3ZvaWQgMD09PWUmJihlPWZ1bmN0aW9uKHQpe30pLHZvaWQgMD09PWkmJihpPVwiVW5pdHNcIiksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09byYmKG89MCksdm9pZCAwPT09cyYmKHM9ZnVuY3Rpb24odCl7cmV0dXJuIDB8dH0pO3ZhciBhPW5ldyBSO2EubmFtZT1pLGEudmFsdWU9byxhLm1pbmltdW09cixhLm1heGltdW09bixhLndpZHRoPS45LGEuaGVpZ2h0PVwiMjBweFwiLGEuY29sb3I9XCIjMzY0MjQ5XCIsYS5iYWNrZ3JvdW5kPVwiI0NDQ0NDQ1wiLGEuYm9yZGVyQ29sb3I9XCJibGFja1wiLGEuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsYS5sZWZ0PVwiNHB4XCIsYS5wYWRkaW5nQm90dG9tPVwiNHB4XCIsYS5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe2EucGFyZW50LmNoaWxkcmVuWzBdLnRleHQ9YS5wYXJlbnQuY2hpbGRyZW5bMF0ubmFtZStcIjogXCIrcyh0KStcIiBcIithLm5hbWUsZSh0KX0pO3ZhciBoPXAuQWRkSGVhZGVyKGEsdCtcIjogXCIrcyhvKStcIiBcIitpLFwiMzBweFwiLHtpc0hvcml6b250YWw6ITEsY29udHJvbEZpcnN0OiExfSk7aC5oZWlnaHQ9XCI2MHB4XCIsaC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxoLmxlZnQ9XCI0cHhcIixoLmNoaWxkcmVuWzBdLm5hbWU9dCx0aGlzLmdyb3VwUGFuZWwuYWRkQ29udHJvbChoKSx0aGlzLnNlbGVjdG9ycy5wdXNoKGgpLHRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQmJnRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50JiYoYS5jb2xvcj10aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudC5idXR0b25Db2xvcixhLmJhY2tncm91bmQ9dGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQuYnV0dG9uQmFja2dyb3VuZCl9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckxhYmVsPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMF0ubmFtZT1lLHRoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLnRleHQ9ZStcIjogXCIrdGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMV0udmFsdWUrXCIgXCIrdGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMV0ubmFtZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yTGFiZWxDb2xvcj1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLmNvbG9yPWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckJ1dHRvbkNvbG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMV0uY29sb3I9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yQnV0dG9uQmFja2dyb3VuZD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLmJhY2tncm91bmQ9ZX0sZX0oRCksSD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dm9pZCAwPT09aSYmKGk9W10pO3ZhciByPXQuY2FsbCh0aGlzLGUpfHx0aGlzO2lmKHIubmFtZT1lLHIuZ3JvdXBzPWksci5fYnV0dG9uQ29sb3I9XCIjMzY0MjQ5XCIsci5fYnV0dG9uQmFja2dyb3VuZD1cIiNDQ0NDQ0NcIixyLl9oZWFkZXJDb2xvcj1cImJsYWNrXCIsci5fYmFyQ29sb3I9XCJ3aGl0ZVwiLHIuX2JhckhlaWdodD1cIjJweFwiLHIuX3NwYWNlckhlaWdodD1cIjIwcHhcIixyLl9iYXJzPW5ldyBBcnJheSxyLl9ncm91cHM9aSxyLnRoaWNrbmVzcz0yLHIuX3BhbmVsPW5ldyBDLHIuX3BhbmVsLnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCxyLl9wYW5lbC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLl9wYW5lbC50b3A9NSxyLl9wYW5lbC5sZWZ0PTUsci5fcGFuZWwud2lkdGg9Ljk1LGkubGVuZ3RoPjApe2Zvcih2YXIgbj0wO248aS5sZW5ndGgtMTtuKyspci5fcGFuZWwuYWRkQ29udHJvbChpW25dLmdyb3VwUGFuZWwpLHIuX2FkZFNwYWNlcigpO3IuX3BhbmVsLmFkZENvbnRyb2woaVtpLmxlbmd0aC0xXS5ncm91cFBhbmVsKX1yZXR1cm4gci5hZGRDb250cm9sKHIuX3BhbmVsKSxyfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJTZWxlY3Rpb25QYW5lbFwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoZWFkZXJDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVhZGVyQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oZWFkZXJDb2xvciE9PXQmJih0aGlzLl9oZWFkZXJDb2xvcj10LHRoaXMuX3NldEhlYWRlckNvbG9yKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9zZXRIZWFkZXJDb2xvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fZ3JvdXBzLmxlbmd0aDt0KyspdGhpcy5fZ3JvdXBzW3RdLmdyb3VwUGFuZWwuY2hpbGRyZW5bMF0uY29sb3I9dGhpcy5faGVhZGVyQ29sb3J9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJ1dHRvbkNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idXR0b25Db2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1dHRvbkNvbG9yIT09dCYmKHRoaXMuX2J1dHRvbkNvbG9yPXQsdGhpcy5fc2V0YnV0dG9uQ29sb3IoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldGJ1dHRvbkNvbG9yPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9ncm91cHMubGVuZ3RoO3QrKylmb3IodmFyIGU9MDtlPHRoaXMuX2dyb3Vwc1t0XS5zZWxlY3RvcnMubGVuZ3RoO2UrKyl0aGlzLl9ncm91cHNbdF0uX3NldFNlbGVjdG9yQnV0dG9uQ29sb3IoZSx0aGlzLl9idXR0b25Db2xvcil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImxhYmVsQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhYmVsQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sYWJlbENvbG9yIT09dCYmKHRoaXMuX2xhYmVsQ29sb3I9dCx0aGlzLl9zZXRMYWJlbENvbG9yKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9zZXRMYWJlbENvbG9yPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9ncm91cHMubGVuZ3RoO3QrKylmb3IodmFyIGU9MDtlPHRoaXMuX2dyb3Vwc1t0XS5zZWxlY3RvcnMubGVuZ3RoO2UrKyl0aGlzLl9ncm91cHNbdF0uX3NldFNlbGVjdG9yTGFiZWxDb2xvcihlLHRoaXMuX2xhYmVsQ29sb3IpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidXR0b25CYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idXR0b25CYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnV0dG9uQmFja2dyb3VuZCE9PXQmJih0aGlzLl9idXR0b25CYWNrZ3JvdW5kPXQsdGhpcy5fc2V0QnV0dG9uQmFja2dyb3VuZCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0QnV0dG9uQmFja2dyb3VuZD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fZ3JvdXBzLmxlbmd0aDt0KyspZm9yKHZhciBlPTA7ZTx0aGlzLl9ncm91cHNbdF0uc2VsZWN0b3JzLmxlbmd0aDtlKyspdGhpcy5fZ3JvdXBzW3RdLl9zZXRTZWxlY3RvckJ1dHRvbkJhY2tncm91bmQoZSx0aGlzLl9idXR0b25CYWNrZ3JvdW5kKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFyQ29sb3IhPT10JiYodGhpcy5fYmFyQ29sb3I9dCx0aGlzLl9zZXRCYXJDb2xvcigpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0QmFyQ29sb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2JhcnMubGVuZ3RoO3QrKyl0aGlzLl9iYXJzW3RdLmNoaWxkcmVuWzBdLmJhY2tncm91bmQ9dGhpcy5fYmFyQ29sb3J9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFySGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFySGVpZ2h0IT09dCYmKHRoaXMuX2JhckhlaWdodD10LHRoaXMuX3NldEJhckhlaWdodCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0QmFySGVpZ2h0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9iYXJzLmxlbmd0aDt0KyspdGhpcy5fYmFyc1t0XS5jaGlsZHJlblswXS5oZWlnaHQ9dGhpcy5fYmFySGVpZ2h0fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzcGFjZXJIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NwYWNlckhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NwYWNlckhlaWdodCE9PXQmJih0aGlzLl9zcGFjZXJIZWlnaHQ9dCx0aGlzLl9zZXRTcGFjZXJIZWlnaHQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldFNwYWNlckhlaWdodD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fYmFycy5sZW5ndGg7dCsrKXRoaXMuX2JhcnNbdF0uaGVpZ2h0PXRoaXMuX3NwYWNlckhlaWdodH0sZS5wcm90b3R5cGUuX2FkZFNwYWNlcj1mdW5jdGlvbigpe3ZhciB0PW5ldyBnO3Qud2lkdGg9MSx0LmhlaWdodD10aGlzLl9zcGFjZXJIZWlnaHQsdC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVDt2YXIgZT1uZXcgbTtlLndpZHRoPTEsZS5oZWlnaHQ9dGhpcy5fYmFySGVpZ2h0LGUuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsZS52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsZS5iYWNrZ3JvdW5kPXRoaXMuX2JhckNvbG9yLGUuY29sb3I9XCJ0cmFuc3BhcmVudFwiLHQuYWRkQ29udHJvbChlKSx0aGlzLl9wYW5lbC5hZGRDb250cm9sKHQpLHRoaXMuX2JhcnMucHVzaCh0KX0sZS5wcm90b3R5cGUuYWRkR3JvdXA9ZnVuY3Rpb24odCl7dGhpcy5fZ3JvdXBzLmxlbmd0aD4wJiZ0aGlzLl9hZGRTcGFjZXIoKSx0aGlzLl9wYW5lbC5hZGRDb250cm9sKHQuZ3JvdXBQYW5lbCksdGhpcy5fZ3JvdXBzLnB1c2godCksdC5ncm91cFBhbmVsLmNoaWxkcmVuWzBdLmNvbG9yPXRoaXMuX2hlYWRlckNvbG9yO2Zvcih2YXIgZT0wO2U8dC5zZWxlY3RvcnMubGVuZ3RoO2UrKyl0Ll9zZXRTZWxlY3RvckJ1dHRvbkNvbG9yKGUsdGhpcy5fYnV0dG9uQ29sb3IpLHQuX3NldFNlbGVjdG9yQnV0dG9uQmFja2dyb3VuZChlLHRoaXMuX2J1dHRvbkJhY2tncm91bmQpfSxlLnByb3RvdHlwZS5yZW1vdmVHcm91cD1mdW5jdGlvbih0KXtpZighKHQ8MHx8dD49dGhpcy5fZ3JvdXBzLmxlbmd0aCkpe3ZhciBlPXRoaXMuX2dyb3Vwc1t0XTt0aGlzLl9wYW5lbC5yZW1vdmVDb250cm9sKGUuZ3JvdXBQYW5lbCksdGhpcy5fZ3JvdXBzLnNwbGljZSh0LDEpLHQ8dGhpcy5fYmFycy5sZW5ndGgmJih0aGlzLl9wYW5lbC5yZW1vdmVDb250cm9sKHRoaXMuX2JhcnNbdF0pLHRoaXMuX2JhcnMuc3BsaWNlKHQsMSkpfX0sZS5wcm90b3R5cGUuc2V0SGVhZGVyTmFtZT1mdW5jdGlvbih0LGUpe2U8MHx8ZT49dGhpcy5fZ3JvdXBzLmxlbmd0aHx8KHRoaXMuX2dyb3Vwc1tlXS5ncm91cFBhbmVsLmNoaWxkcmVuWzBdLnRleHQ9dCl9LGUucHJvdG90eXBlLnJlbGFiZWw9ZnVuY3Rpb24odCxlLGkpe2lmKCEoZTwwfHxlPj10aGlzLl9ncm91cHMubGVuZ3RoKSl7dmFyIHI9dGhpcy5fZ3JvdXBzW2VdO2k8MHx8aT49ci5zZWxlY3RvcnMubGVuZ3RofHxyLl9zZXRTZWxlY3RvckxhYmVsKGksdCl9fSxlLnByb3RvdHlwZS5yZW1vdmVGcm9tR3JvdXBTZWxlY3Rvcj1mdW5jdGlvbih0LGUpe2lmKCEodDwwfHx0Pj10aGlzLl9ncm91cHMubGVuZ3RoKSl7dmFyIGk9dGhpcy5fZ3JvdXBzW3RdO2U8MHx8ZT49aS5zZWxlY3RvcnMubGVuZ3RofHxpLnJlbW92ZVNlbGVjdG9yKGUpfX0sZS5wcm90b3R5cGUuYWRkVG9Hcm91cENoZWNrYm94PWZ1bmN0aW9uKHQsZSxpLHIpeyh2b2lkIDA9PT1pJiYoaT1mdW5jdGlvbigpe30pLHZvaWQgMD09PXImJihyPSExKSx0PDB8fHQ+PXRoaXMuX2dyb3Vwcy5sZW5ndGgpfHx0aGlzLl9ncm91cHNbdF0uYWRkQ2hlY2tib3goZSxpLHIpfSxlLnByb3RvdHlwZS5hZGRUb0dyb3VwUmFkaW89ZnVuY3Rpb24odCxlLGkscil7KHZvaWQgMD09PWkmJihpPWZ1bmN0aW9uKCl7fSksdm9pZCAwPT09ciYmKHI9ITEpLHQ8MHx8dD49dGhpcy5fZ3JvdXBzLmxlbmd0aCl8fHRoaXMuX2dyb3Vwc1t0XS5hZGRSYWRpbyhlLGkscil9LGUucHJvdG90eXBlLmFkZFRvR3JvdXBTbGlkZXI9ZnVuY3Rpb24odCxlLGkscixuLG8scyxhKXsodm9pZCAwPT09aSYmKGk9ZnVuY3Rpb24oKXt9KSx2b2lkIDA9PT1yJiYocj1cIlVuaXRzXCIpLHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PW8mJihvPTApLHZvaWQgMD09PXMmJihzPTApLHZvaWQgMD09PWEmJihhPWZ1bmN0aW9uKHQpe3JldHVybiAwfHR9KSx0PDB8fHQ+PXRoaXMuX2dyb3Vwcy5sZW5ndGgpfHx0aGlzLl9ncm91cHNbdF0uYWRkU2xpZGVyKGUsaSxyLG4sbyxzLGEpfSxlfShtKSxGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkuX2ZyZWV6ZUNvbnRyb2xzPSExLGkuX2J1Y2tldFdpZHRoPTAsaS5fYnVja2V0SGVpZ2h0PTAsaS5fYnVja2V0cz17fSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZnJlZXplQ29udHJvbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZyZWV6ZUNvbnRyb2xzfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fZnJlZXplQ29udHJvbHMhPT10KXt0aGlzLl9mcmVlemVDb250cm9scz0hMTt2YXIgZT10aGlzLmhvc3QuZ2V0U2l6ZSgpLGk9ZS53aWR0aCxyPWUuaGVpZ2h0LG49dGhpcy5ob3N0LmdldENvbnRleHQoKSxvPW5ldyBfKDAsMCxpLHIpO3RoaXMuaG9zdC5fbnVtTGF5b3V0Q2FsbHM9MCx0aGlzLmhvc3QuX3Jvb3RDb250YWluZXIuX2xheW91dChvLG4pLHQmJih0aGlzLl91cGRhdGVNZWFzdXJlcygpLHRoaXMuX3VzZUJ1Y2tldHMoKSYmdGhpcy5fbWFrZUJ1Y2tldHMoKSksdGhpcy5fZnJlZXplQ29udHJvbHM9dCx0aGlzLmhvc3QubWFya0FzRGlydHkoKX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYnVja2V0V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1Y2tldFdpZHRofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJ1Y2tldEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVja2V0SGVpZ2h0fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnNldEJ1Y2tldFNpemVzPWZ1bmN0aW9uKHQsZSl7dGhpcy5fYnVja2V0V2lkdGg9dCx0aGlzLl9idWNrZXRIZWlnaHQ9ZSx0aGlzLl91c2VCdWNrZXRzKCk/dGhpcy5fZnJlZXplQ29udHJvbHMmJnRoaXMuX21ha2VCdWNrZXRzKCk6dGhpcy5fYnVja2V0cz17fX0sZS5wcm90b3R5cGUuX3VzZUJ1Y2tldHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVja2V0V2lkdGg+MCYmdGhpcy5fYnVja2V0SGVpZ2h0PjB9LGUucHJvdG90eXBlLl9tYWtlQnVja2V0cz1mdW5jdGlvbigpe3RoaXMuX2J1Y2tldHM9e30sdGhpcy5fYnVja2V0TGVuPU1hdGguY2VpbCh0aGlzLndpZHRoSW5QaXhlbHMvdGhpcy5fYnVja2V0V2lkdGgpLHRoaXMuX2Rpc3BhdGNoSW5CdWNrZXRzKHRoaXMuX2NoaWxkcmVuKX0sZS5wcm90b3R5cGUuX2Rpc3BhdGNoSW5CdWNrZXRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7KytlKXtmb3IodmFyIGk9dFtlXSxyPU1hdGgubWF4KDAsTWF0aC5mbG9vcigoaS5fY3VycmVudE1lYXN1cmUubGVmdC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KS90aGlzLl9idWNrZXRXaWR0aCkpLG49TWF0aC5mbG9vcigoaS5fY3VycmVudE1lYXN1cmUubGVmdC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2kuX2N1cnJlbnRNZWFzdXJlLndpZHRoLTEpL3RoaXMuX2J1Y2tldFdpZHRoKSxvPU1hdGgubWF4KDAsTWF0aC5mbG9vcigoaS5fY3VycmVudE1lYXN1cmUudG9wLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCkvdGhpcy5fYnVja2V0SGVpZ2h0KSkscz1NYXRoLmZsb29yKChpLl9jdXJyZW50TWVhc3VyZS50b3AtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK2kuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC0xKS90aGlzLl9idWNrZXRIZWlnaHQpO288PXM7KXtmb3IodmFyIGE9cjthPD1uOysrYSl7dmFyIGg9byp0aGlzLl9idWNrZXRMZW4rYSxsPXRoaXMuX2J1Y2tldHNbaF07bHx8KGw9W10sdGhpcy5fYnVja2V0c1toXT1sKSxsLnB1c2goaSl9bysrfWkgaW5zdGFuY2VvZiBnJiZpLl9jaGlsZHJlbi5sZW5ndGg+MCYmdGhpcy5fZGlzcGF0Y2hJbkJ1Y2tldHMoaS5fY2hpbGRyZW4pfX0sZS5wcm90b3R5cGUuX3VwZGF0ZU1lYXN1cmVzPWZ1bmN0aW9uKCl7dmFyIHQ9MHx0aGlzLmxlZnRJblBpeGVscyxlPTB8dGhpcy50b3BJblBpeGVsczt0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4ubGVmdC09dCx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4udG9wLT1lLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQtPXQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLT1lLHRoaXMuX3VwZGF0ZUNoaWxkcmVuTWVhc3VyZXModGhpcy5fY2hpbGRyZW4sdCxlKX0sZS5wcm90b3R5cGUuX3VwZGF0ZUNoaWxkcmVuTWVhc3VyZXM9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKXt2YXIgbj10W3JdO24uX2N1cnJlbnRNZWFzdXJlLmxlZnQtPWUsbi5fY3VycmVudE1lYXN1cmUudG9wLT1pLG4uX2N1c3RvbURhdGEuX29yaWdMZWZ0PW4uX2N1cnJlbnRNZWFzdXJlLmxlZnQsbi5fY3VzdG9tRGF0YS5fb3JpZ1RvcD1uLl9jdXJyZW50TWVhc3VyZS50b3AsbiBpbnN0YW5jZW9mIGcmJm4uX2NoaWxkcmVuLmxlbmd0aD4wJiZ0aGlzLl91cGRhdGVDaGlsZHJlbk1lYXN1cmVzKG4uX2NoaWxkcmVuLGUsaSl9fSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNjcm9sbFZpZXdlcldpbmRvd1wifSxlLnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3Npbmc9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3NpbmcuY2FsbCh0aGlzLGUsaSksdGhpcy5fcGFyZW50TWVhc3VyZT1lLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5sZWZ0PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLnRvcD10aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLndpZHRoPWUud2lkdGgsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmhlaWdodD1lLmhlaWdodH0sZS5wcm90b3R5cGUuX2xheW91dD1mdW5jdGlvbihlLGkpe3JldHVybiB0aGlzLl9mcmVlemVDb250cm9scz8odGhpcy5pbnZhbGlkYXRlUmVjdCgpLCExKTp0LnByb3RvdHlwZS5fbGF5b3V0LmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5fc2Nyb2xsQ2hpbGRyZW49ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKXt2YXIgbj10W3JdO24uX2N1cnJlbnRNZWFzdXJlLmxlZnQ9bi5fY3VzdG9tRGF0YS5fb3JpZ0xlZnQrZSxuLl9jdXJyZW50TWVhc3VyZS50b3A9bi5fY3VzdG9tRGF0YS5fb3JpZ1RvcCtpLG4uX2lzQ2xpcHBlZD0hMSxuIGluc3RhbmNlb2YgZyYmbi5fY2hpbGRyZW4ubGVuZ3RoPjAmJnRoaXMuX3Njcm9sbENoaWxkcmVuKG4uX2NoaWxkcmVuLGUsaSl9fSxlLnByb3RvdHlwZS5fc2Nyb2xsQ2hpbGRyZW5XaXRoQnVja2V0cz1mdW5jdGlvbih0LGUsaSxyKXtmb3IodmFyIG49TWF0aC5tYXgoMCxNYXRoLmZsb29yKC10L3RoaXMuX2J1Y2tldFdpZHRoKSksbz1NYXRoLmZsb29yKCgtdCt0aGlzLl9wYXJlbnRNZWFzdXJlLndpZHRoLTEpL3RoaXMuX2J1Y2tldFdpZHRoKSxzPU1hdGgubWF4KDAsTWF0aC5mbG9vcigtZS90aGlzLl9idWNrZXRIZWlnaHQpKSxhPU1hdGguZmxvb3IoKC1lK3RoaXMuX3BhcmVudE1lYXN1cmUuaGVpZ2h0LTEpL3RoaXMuX2J1Y2tldEhlaWdodCk7czw9YTspe2Zvcih2YXIgaD1uO2g8PW87KytoKXt2YXIgbD1zKnRoaXMuX2J1Y2tldExlbitoLHU9dGhpcy5fYnVja2V0c1tsXTtpZih1KWZvcih2YXIgYz0wO2M8dS5sZW5ndGg7KytjKXt2YXIgXz11W2NdO18uX2N1cnJlbnRNZWFzdXJlLmxlZnQ9Xy5fY3VzdG9tRGF0YS5fb3JpZ0xlZnQraSxfLl9jdXJyZW50TWVhc3VyZS50b3A9Xy5fY3VzdG9tRGF0YS5fb3JpZ1RvcCtyLF8uX2lzQ2xpcHBlZD0hMX19cysrfX0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24oZSxpKXtpZih0aGlzLl9mcmVlemVDb250cm9scyl7dGhpcy5fbG9jYWxEcmF3KGUpLHRoaXMuY2xpcENoaWxkcmVuJiZ0aGlzLl9jbGlwRm9yQ2hpbGRyZW4oZSk7dmFyIHI9dGhpcy5sZWZ0SW5QaXhlbHMsbj10aGlzLnRvcEluUGl4ZWxzO3RoaXMuX3VzZUJ1Y2tldHMoKT8odGhpcy5fc2Nyb2xsQ2hpbGRyZW5XaXRoQnVja2V0cyh0aGlzLl9vbGRMZWZ0LHRoaXMuX29sZFRvcCxyLG4pLHRoaXMuX3Njcm9sbENoaWxkcmVuV2l0aEJ1Y2tldHMocixuLHIsbikpOnRoaXMuX3Njcm9sbENoaWxkcmVuKHRoaXMuX2NoaWxkcmVuLHIsbiksdGhpcy5fb2xkTGVmdD1yLHRoaXMuX29sZFRvcD1uO2Zvcih2YXIgbz0wLHM9dGhpcy5fY2hpbGRyZW47bzxzLmxlbmd0aDtvKyspe3ZhciBhPXNbb107YS5faW50ZXJzZWN0c1JlY3QodGhpcy5fcGFyZW50TWVhc3VyZSkmJmEuX3JlbmRlcihlLHRoaXMuX3BhcmVudE1lYXN1cmUpfX1lbHNlIHQucHJvdG90eXBlLl9kcmF3LmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5fcG9zdE1lYXN1cmU9ZnVuY3Rpb24oKXtpZih0aGlzLl9mcmVlemVDb250cm9scyl0LnByb3RvdHlwZS5fcG9zdE1lYXN1cmUuY2FsbCh0aGlzKTtlbHNle2Zvcih2YXIgZT10aGlzLnBhcmVudENsaWVudFdpZHRoLGk9dGhpcy5wYXJlbnRDbGllbnRIZWlnaHQscj0wLG49dGhpcy5jaGlsZHJlbjtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtvLmlzVmlzaWJsZSYmIW8ubm90UmVuZGVyYWJsZSYmKG8uaG9yaXpvbnRhbEFsaWdubWVudD09PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSJiZvLl9vZmZzZXRMZWZ0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQtby5fY3VycmVudE1lYXN1cmUubGVmdCksby52ZXJ0aWNhbEFsaWdubWVudD09PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUiYmby5fb2Zmc2V0VG9wKHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcC1vLl9jdXJyZW50TWVhc3VyZS50b3ApLGU9TWF0aC5tYXgoZSxvLl9jdXJyZW50TWVhc3VyZS5sZWZ0LXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrby5fY3VycmVudE1lYXN1cmUud2lkdGgpLGk9TWF0aC5tYXgoaSxvLl9jdXJyZW50TWVhc3VyZS50b3AtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK28uX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkpfXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoIT09ZSYmKHRoaXMuX3dpZHRoLnVwZGF0ZUluUGxhY2UoZSxhLlVOSVRNT0RFX1BJWEVMKSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD1lLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITAsdGhpcy5faXNEaXJ0eT0hMCksdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0IT09aSYmKHRoaXMuX2hlaWdodC51cGRhdGVJblBsYWNlKGksYS5VTklUTU9ERV9QSVhFTCksdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PWksdGhpcy5fcmVidWlsZExheW91dD0hMCx0aGlzLl9pc0RpcnR5PSEwKSx0LnByb3RvdHlwZS5fcG9zdE1lYXN1cmUuY2FsbCh0aGlzKX19LGV9KGcpLGo9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fYmFja2dyb3VuZD1cImJsYWNrXCIsaS5fYm9yZGVyQ29sb3I9XCJ3aGl0ZVwiLGkuX3RlbXBNZWFzdXJlPW5ldyBfKDAsMCwwLDApLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJib3JkZXJDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm9yZGVyQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ib3JkZXJDb2xvciE9PXQmJih0aGlzLl9ib3JkZXJDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNjcm9sbGJhclwifSxlLnByb3RvdHlwZS5fZ2V0VGh1bWJUaGlja25lc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJXaWR0aC5pc1BpeGVsP3RoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyp0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9wcmVwYXJlUmVuZGVyaW5nRGF0YShcInJlY3RhbmdsZVwiKTt2YXIgZT10aGlzLl9yZW5kZXJMZWZ0LGk9dGhpcy5fZ2V0VGh1bWJQb3NpdGlvbigpO3QuZmlsbFN0eWxlPXRoaXMuX2JhY2tncm91bmQsdC5maWxsUmVjdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHQuZmlsbFN0eWxlPXRoaXMuY29sb3IsdGhpcy5pc1ZlcnRpY2FsPyh0aGlzLl90ZW1wTWVhc3VyZS5sZWZ0PWUtdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LHRoaXMuX3RlbXBNZWFzdXJlLnRvcD10aGlzLl9jdXJyZW50TWVhc3VyZS50b3AraSx0aGlzLl90ZW1wTWVhc3VyZS53aWR0aD10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl90ZW1wTWVhc3VyZS5oZWlnaHQ9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpOih0aGlzLl90ZW1wTWVhc3VyZS5sZWZ0PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQraSx0aGlzLl90ZW1wTWVhc3VyZS50b3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX3RlbXBNZWFzdXJlLndpZHRoPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLHRoaXMuX3RlbXBNZWFzdXJlLmhlaWdodD10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHQuZmlsbFJlY3QodGhpcy5fdGVtcE1lYXN1cmUubGVmdCx0aGlzLl90ZW1wTWVhc3VyZS50b3AsdGhpcy5fdGVtcE1lYXN1cmUud2lkdGgsdGhpcy5fdGVtcE1lYXN1cmUuaGVpZ2h0KSx0LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXI9ZnVuY3Rpb24odCxlKXswIT10aGlzLnJvdGF0aW9uJiYodGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQsZSx0aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uKSx0PXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueCxlPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueSksdGhpcy5fZmlyc3QmJih0aGlzLl9maXJzdD0hMSx0aGlzLl9vcmlnaW5YPXQsdGhpcy5fb3JpZ2luWT1lLCh0PHRoaXMuX3RlbXBNZWFzdXJlLmxlZnR8fHQ+dGhpcy5fdGVtcE1lYXN1cmUubGVmdCt0aGlzLl90ZW1wTWVhc3VyZS53aWR0aHx8ZTx0aGlzLl90ZW1wTWVhc3VyZS50b3B8fGU+dGhpcy5fdGVtcE1lYXN1cmUudG9wK3RoaXMuX3RlbXBNZWFzdXJlLmhlaWdodCkmJih0aGlzLmlzVmVydGljYWw/dGhpcy52YWx1ZT10aGlzLm1pbmltdW0rKDEtKGUtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKS90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKih0aGlzLm1heGltdW0tdGhpcy5taW5pbXVtKTp0aGlzLnZhbHVlPXRoaXMubWluaW11bSsodC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KS90aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCoodGhpcy5tYXhpbXVtLXRoaXMubWluaW11bSkpKTt2YXIgaT0wO2k9dGhpcy5pc1ZlcnRpY2FsPy0oZS10aGlzLl9vcmlnaW5ZKS8odGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKToodC10aGlzLl9vcmlnaW5YKS8odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpLHRoaXMudmFsdWUrPWkqKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pLHRoaXMuX29yaWdpblg9dCx0aGlzLl9vcmlnaW5ZPWV9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiB0aGlzLl9maXJzdD0hMCx0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bi5jYWxsKHRoaXMsZSxpLHIsbil9LGV9KEwpLFc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fdGh1bWJMZW5ndGg9LjUsaS5fdGh1bWJIZWlnaHQ9MSxpLl9iYXJJbWFnZUhlaWdodD0xLGkuX3RlbXBNZWFzdXJlPW5ldyBfKDAsMCwwLDApLGkubnVtOTBSb3RhdGlvbkluVmVydGljYWxNb2RlPTEsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZEJhc2VJbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fYmFja2dyb3VuZEJhc2VJbWFnZSE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kQmFzZUltYWdlPXQsdGhpcy5pc1ZlcnRpY2FsJiYwIT09dGhpcy5udW05MFJvdGF0aW9uSW5WZXJ0aWNhbE1vZGU/dC5pc0xvYWRlZD8odGhpcy5fYmFja2dyb3VuZEltYWdlPXQuX3JvdGF0ZTkwKHRoaXMubnVtOTBSb3RhdGlvbkluVmVydGljYWxNb2RlLCEwKSx0aGlzLl9tYXJrQXNEaXJ0eSgpKTp0Lm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlLmFkZE9uY2UoZnVuY3Rpb24oKXt2YXIgaT10Ll9yb3RhdGU5MChlLm51bTkwUm90YXRpb25JblZlcnRpY2FsTW9kZSwhMCk7ZS5fYmFja2dyb3VuZEltYWdlPWksaS5pc0xvYWRlZHx8aS5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7ZS5fbWFya0FzRGlydHkoKX0pLGUuX21hcmtBc0RpcnR5KCl9KToodGhpcy5fYmFja2dyb3VuZEltYWdlPXQsdCYmIXQuaXNMb2FkZWQmJnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe2UuX21hcmtBc0RpcnR5KCl9KSx0aGlzLl9tYXJrQXNEaXJ0eSgpKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJCYXNlSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3RodW1iQmFzZUltYWdlIT09dCYmKHRoaXMuX3RodW1iQmFzZUltYWdlPXQsdGhpcy5pc1ZlcnRpY2FsJiYwIT09dGhpcy5udW05MFJvdGF0aW9uSW5WZXJ0aWNhbE1vZGU/dC5pc0xvYWRlZD8odGhpcy5fdGh1bWJJbWFnZT10Ll9yb3RhdGU5MCgtdGhpcy5udW05MFJvdGF0aW9uSW5WZXJ0aWNhbE1vZGUsITApLHRoaXMuX21hcmtBc0RpcnR5KCkpOnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3ZhciBpPXQuX3JvdGF0ZTkwKC1lLm51bTkwUm90YXRpb25JblZlcnRpY2FsTW9kZSwhMCk7ZS5fdGh1bWJJbWFnZT1pLGkuaXNMb2FkZWR8fGkub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe2UuX21hcmtBc0RpcnR5KCl9KSxlLl9tYXJrQXNEaXJ0eSgpfSk6KHRoaXMuX3RodW1iSW1hZ2U9dCx0JiYhdC5pc0xvYWRlZCYmdC5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7ZS5fbWFya0FzRGlydHkoKX0pLHRoaXMuX21hcmtBc0RpcnR5KCkpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYkxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJMZW5ndGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aHVtYkxlbmd0aCE9PXQmJih0aGlzLl90aHVtYkxlbmd0aD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYkhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RodW1iTGVuZ3RoIT09dCYmKHRoaXMuX3RodW1iSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFySW1hZ2VIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckltYWdlSGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFySW1hZ2VIZWlnaHQhPT10JiYodGhpcy5fYmFySW1hZ2VIZWlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkltYWdlU2Nyb2xsQmFyXCJ9LGUucHJvdG90eXBlLl9nZXRUaHVtYlRoaWNrbmVzcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYldpZHRoLmlzUGl4ZWw/dGhpcy5fdGh1bWJXaWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzKnRoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCl9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpLHRoaXMuX3ByZXBhcmVSZW5kZXJpbmdEYXRhKFwicmVjdGFuZ2xlXCIpO3ZhciBlPXRoaXMuX2dldFRodW1iUG9zaXRpb24oKSxpPXRoaXMuX3JlbmRlckxlZnQscj10aGlzLl9yZW5kZXJUb3Asbj10aGlzLl9yZW5kZXJXaWR0aCxvPXRoaXMuX3JlbmRlckhlaWdodDt0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UmJih0aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyhpLHIsbixvKSx0aGlzLmlzVmVydGljYWw/KHRoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKGkrbiooMS10aGlzLl9iYXJJbWFnZUhlaWdodCkqLjUsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLG4qdGhpcy5fYmFySW1hZ2VIZWlnaHQsbyksdGhpcy5fdGVtcE1lYXN1cmUuaGVpZ2h0Kz10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyx0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSk6KHRoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQscitvKigxLXRoaXMuX2JhckltYWdlSGVpZ2h0KSouNSxuLG8qdGhpcy5fYmFySW1hZ2VIZWlnaHQpLHRoaXMuX3RlbXBNZWFzdXJlLndpZHRoKz10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyx0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSksdGhpcy5fYmFja2dyb3VuZEltYWdlLl9kcmF3KHQpKSx0aGlzLmlzVmVydGljYWw/dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMoaS10aGlzLl9lZmZlY3RpdmVCYXJPZmZzZXQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgqKDEtdGhpcy5fdGh1bWJIZWlnaHQpKi41LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtlLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKnRoaXMuX3RodW1iSGVpZ2h0LHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKTp0aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2UsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCooMS10aGlzLl90aHVtYkhlaWdodCkqLjUsdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KnRoaXMuX3RodW1iSGVpZ2h0KSx0aGlzLl90aHVtYkltYWdlJiYodGhpcy5fdGh1bWJJbWFnZS5fY3VycmVudE1lYXN1cmUuY29weUZyb20odGhpcy5fdGVtcE1lYXN1cmUpLHRoaXMuX3RodW1iSW1hZ2UuX2RyYXcodCkpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcj1mdW5jdGlvbih0LGUpezAhPXRoaXMucm90YXRpb24mJih0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXgudHJhbnNmb3JtQ29vcmRpbmF0ZXModCxlLHRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24pLHQ9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi54LGU9dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi55KSx0aGlzLl9maXJzdCYmKHRoaXMuX2ZpcnN0PSExLHRoaXMuX29yaWdpblg9dCx0aGlzLl9vcmlnaW5ZPWUsKHQ8dGhpcy5fdGVtcE1lYXN1cmUubGVmdHx8dD50aGlzLl90ZW1wTWVhc3VyZS5sZWZ0K3RoaXMuX3RlbXBNZWFzdXJlLndpZHRofHxlPHRoaXMuX3RlbXBNZWFzdXJlLnRvcHx8ZT50aGlzLl90ZW1wTWVhc3VyZS50b3ArdGhpcy5fdGVtcE1lYXN1cmUuaGVpZ2h0KSYmKHRoaXMuaXNWZXJ0aWNhbD90aGlzLnZhbHVlPXRoaXMubWluaW11bSsoMS0oZS10aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApL3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkqKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pOnRoaXMudmFsdWU9dGhpcy5taW5pbXVtKyh0LXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQpL3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKih0aGlzLm1heGltdW0tdGhpcy5taW5pbXVtKSkpO3ZhciBpPTA7aT10aGlzLmlzVmVydGljYWw/LShlLXRoaXMuX29yaWdpblkpLyh0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpOih0LXRoaXMuX29yaWdpblgpLyh0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyksdGhpcy52YWx1ZSs9aSoodGhpcy5tYXhpbXVtLXRoaXMubWluaW11bSksdGhpcy5fb3JpZ2luWD10LHRoaXMuX29yaWdpblk9ZX0sZS5wcm90b3R5cGUuX29uUG9pbnRlckRvd249ZnVuY3Rpb24oZSxpLHIsbil7cmV0dXJuIHRoaXMuX2ZpcnN0PSEwLHQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKX0sZX0oTCksej1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIuX2JhclNpemU9MjAsci5fcG9pbnRlcklzT3Zlcj0hMSxyLl93aGVlbFByZWNpc2lvbj0uMDUsci5fdGh1bWJMZW5ndGg9LjUsci5fdGh1bWJIZWlnaHQ9MSxyLl9iYXJJbWFnZUhlaWdodD0xLHIuX2hvcml6b250YWxCYXJJbWFnZUhlaWdodD0xLHIuX3ZlcnRpY2FsQmFySW1hZ2VIZWlnaHQ9MSxyLl9mb3JjZUhvcml6b250YWxCYXI9ITEsci5fZm9yY2VWZXJ0aWNhbEJhcj0hMSxyLl91c2VJbWFnZUJhcj1pfHwhMSxyLm9uRGlydHlPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3IuX2hvcml6b250YWxCYXJTcGFjZS5jb2xvcj1yLmNvbG9yLHIuX3ZlcnRpY2FsQmFyU3BhY2UuY29sb3I9ci5jb2xvcixyLl9kcmFnU3BhY2UuY29sb3I9ci5jb2xvcn0pLHIub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3IuX3BvaW50ZXJJc092ZXI9ITB9KSxyLm9uUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ci5fcG9pbnRlcklzT3Zlcj0hMX0pLHIuX2dyaWQ9bmV3IHgsci5fdXNlSW1hZ2VCYXI/KHIuX2hvcml6b250YWxCYXI9bmV3IFcsci5fdmVydGljYWxCYXI9bmV3IFcpOihyLl9ob3Jpem9udGFsQmFyPW5ldyBqLHIuX3ZlcnRpY2FsQmFyPW5ldyBqKSxyLl93aW5kb3c9bmV3IEYoXCJzY3JvbGxWaWV3ZXJfd2luZG93XCIpLHIuX3dpbmRvdy5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLl93aW5kb3cudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLHIuX2dyaWQuYWRkQ29sdW1uRGVmaW5pdGlvbigxKSxyLl9ncmlkLmFkZENvbHVtbkRlZmluaXRpb24oMCwhMCksci5fZ3JpZC5hZGRSb3dEZWZpbml0aW9uKDEpLHIuX2dyaWQuYWRkUm93RGVmaW5pdGlvbigwLCEwKSx0LnByb3RvdHlwZS5hZGRDb250cm9sLmNhbGwocixyLl9ncmlkKSxyLl9ncmlkLmFkZENvbnRyb2woci5fd2luZG93LDAsMCksci5fdmVydGljYWxCYXJTcGFjZT1uZXcgbSxyLl92ZXJ0aWNhbEJhclNwYWNlLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULHIuX3ZlcnRpY2FsQmFyU3BhY2UudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLHIuX3ZlcnRpY2FsQmFyU3BhY2UudGhpY2tuZXNzPTEsci5fZ3JpZC5hZGRDb250cm9sKHIuX3ZlcnRpY2FsQmFyU3BhY2UsMCwxKSxyLl9hZGRCYXIoci5fdmVydGljYWxCYXIsci5fdmVydGljYWxCYXJTcGFjZSwhMCxNYXRoLlBJKSxyLl9ob3Jpem9udGFsQmFyU3BhY2U9bmV3IG0sci5faG9yaXpvbnRhbEJhclNwYWNlLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULHIuX2hvcml6b250YWxCYXJTcGFjZS52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1Asci5faG9yaXpvbnRhbEJhclNwYWNlLnRoaWNrbmVzcz0xLHIuX2dyaWQuYWRkQ29udHJvbChyLl9ob3Jpem9udGFsQmFyU3BhY2UsMSwwKSxyLl9hZGRCYXIoci5faG9yaXpvbnRhbEJhcixyLl9ob3Jpem9udGFsQmFyU3BhY2UsITEsMCksci5fZHJhZ1NwYWNlPW5ldyBtLHIuX2RyYWdTcGFjZS50aGlja25lc3M9MSxyLl9ncmlkLmFkZENvbnRyb2woci5fZHJhZ1NwYWNlLDEsMSksci5fdXNlSW1hZ2VCYXJ8fChyLmJhckNvbG9yPVwiZ3JleVwiLHIuYmFyQmFja2dyb3VuZD1cInRyYW5zcGFyZW50XCIpLHJ9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsQmFyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsQmFyfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZlcnRpY2FsQmFyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJ0aWNhbEJhcn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0Pyh0aGlzLl93aW5kb3cuYWRkQ29udHJvbCh0KSx0aGlzKTp0aGlzfSxlLnByb3RvdHlwZS5yZW1vdmVDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl93aW5kb3cucmVtb3ZlQ29udHJvbCh0KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGlsZHJlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93LmNoaWxkcmVufSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9mbGFnRGVzY2VuZGFudHNBc01hdHJpeERpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9jaGlsZHJlbjt0PGUubGVuZ3RoO3QrKyl7ZVt0XS5fbWFya01hdHJpeEFzRGlydHkoKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZyZWV6ZUNvbnRyb2xzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aW5kb3cuZnJlZXplQ29udHJvbHN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl93aW5kb3cuZnJlZXplQ29udHJvbHM9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidWNrZXRXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93LmJ1Y2tldFdpZHRofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJ1Y2tldEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93LmJ1Y2tldEhlaWdodH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zZXRCdWNrZXRTaXplcz1mdW5jdGlvbih0LGUpe3RoaXMuX3dpbmRvdy5zZXRCdWNrZXRTaXplcyh0LGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmb3JjZUhvcml6b250YWxCYXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvcmNlSG9yaXpvbnRhbEJhcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2dyaWQuc2V0Um93RGVmaW5pdGlvbigxLHQ/dGhpcy5fYmFyU2l6ZTowLCEwKSx0aGlzLl9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZT10LHRoaXMuX2ZvcmNlSG9yaXpvbnRhbEJhcj10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZvcmNlVmVydGljYWxCYXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvcmNlVmVydGljYWxCYXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ncmlkLnNldENvbHVtbkRlZmluaXRpb24oMSx0P3RoaXMuX2JhclNpemU6MCwhMCksdGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlPXQsdGhpcy5fZm9yY2VWZXJ0aWNhbEJhcj10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnJlc2V0V2luZG93PWZ1bmN0aW9uKCl7dGhpcy5fd2luZG93LndpZHRoPVwiMTAwJVwiLHRoaXMuX3dpbmRvdy5oZWlnaHQ9XCIxMDAlXCJ9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiU2Nyb2xsVmlld2VyXCJ9LGUucHJvdG90eXBlLl9idWlsZENsaWVudFNpemVzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ob3N0LmlkZWFsUmF0aW87dGhpcy5fd2luZG93LnBhcmVudENsaWVudFdpZHRoPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLSh0aGlzLl92ZXJ0aWNhbEJhci5pc1Zpc2libGV8fHRoaXMuZm9yY2VWZXJ0aWNhbEJhcj90aGlzLl9iYXJTaXplKnQ6MCktMip0aGlzLnRoaWNrbmVzcyx0aGlzLl93aW5kb3cucGFyZW50Q2xpZW50SGVpZ2h0PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC0odGhpcy5faG9yaXpvbnRhbEJhci5pc1Zpc2libGV8fHRoaXMuZm9yY2VIb3Jpem9udGFsQmFyP3RoaXMuX2JhclNpemUqdDowKS0yKnRoaXMudGhpY2tuZXNzLHRoaXMuX2NsaWVudFdpZHRoPXRoaXMuX3dpbmRvdy5wYXJlbnRDbGllbnRXaWR0aCx0aGlzLl9jbGllbnRIZWlnaHQ9dGhpcy5fd2luZG93LnBhcmVudENsaWVudEhlaWdodH0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nLmNhbGwodGhpcyxlLGkpLHRoaXMuX2J1aWxkQ2xpZW50U2l6ZXMoKX0sZS5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlLmNhbGwodGhpcyksdGhpcy5fdXBkYXRlU2Nyb2xsZXIoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwid2hlZWxQcmVjaXNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3doZWVsUHJlY2lzaW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2hlZWxQcmVjaXNpb24hPT10JiYodDwwJiYodD0wKSx0PjEmJih0PTEpLHRoaXMuX3doZWVsUHJlY2lzaW9uPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNjcm9sbEJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvcml6b250YWxCYXJTcGFjZS5iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faG9yaXpvbnRhbEJhclNwYWNlLmJhY2tncm91bmQhPT10JiYodGhpcy5faG9yaXpvbnRhbEJhclNwYWNlLmJhY2tncm91bmQ9dCx0aGlzLl92ZXJ0aWNhbEJhclNwYWNlLmJhY2tncm91bmQ9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFyQ29sb3IhPT10JiYodGhpcy5fYmFyQ29sb3I9dCx0aGlzLl9ob3Jpem9udGFsQmFyLmNvbG9yPXQsdGhpcy5fdmVydGljYWxCYXIuY29sb3I9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFySW1hZ2V9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9iYXJJbWFnZSE9PXQpe3RoaXMuX2JhckltYWdlPXQ7dmFyIGU9dGhpcy5faG9yaXpvbnRhbEJhcixpPXRoaXMuX3ZlcnRpY2FsQmFyO2UudGh1bWJJbWFnZT10LGkudGh1bWJJbWFnZT10fX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsVGh1bWJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbEJhckltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faG9yaXpvbnRhbEJhckltYWdlIT09dCYmKHRoaXMuX2hvcml6b250YWxCYXJJbWFnZT10LHRoaXMuX2hvcml6b250YWxCYXIudGh1bWJJbWFnZT10KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2ZXJ0aWNhbFRodW1iSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnRpY2FsQmFySW1hZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92ZXJ0aWNhbEJhckltYWdlIT09dCYmKHRoaXMuX3ZlcnRpY2FsQmFySW1hZ2U9dCx0aGlzLl92ZXJ0aWNhbEJhci50aHVtYkltYWdlPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhclNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhclNpemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYXJTaXplIT09dCYmKHRoaXMuX2JhclNpemU9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX2hvcml6b250YWxCYXIuaXNWaXNpYmxlJiZ0aGlzLl9ncmlkLnNldFJvd0RlZmluaXRpb24oMSx0aGlzLl9iYXJTaXplLCEwKSx0aGlzLl92ZXJ0aWNhbEJhci5pc1Zpc2libGUmJnRoaXMuX2dyaWQuc2V0Q29sdW1uRGVmaW5pdGlvbigxLHRoaXMuX2JhclNpemUsITApKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYkxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJMZW5ndGh9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl90aHVtYkxlbmd0aCE9PXQpe3Q8PTAmJih0PS4xKSx0PjEmJih0PTEpLHRoaXMuX3RodW1iTGVuZ3RoPXQ7dmFyIGU9dGhpcy5faG9yaXpvbnRhbEJhcixpPXRoaXMuX3ZlcnRpY2FsQmFyO2UudGh1bWJMZW5ndGg9dCxpLnRodW1iTGVuZ3RoPXQsdGhpcy5fbWFya0FzRGlydHkoKX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iSGVpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fdGh1bWJIZWlnaHQhPT10KXt0PD0wJiYodD0uMSksdD4xJiYodD0xKSx0aGlzLl90aHVtYkhlaWdodD10O3ZhciBlPXRoaXMuX2hvcml6b250YWxCYXIsaT10aGlzLl92ZXJ0aWNhbEJhcjtlLnRodW1iSGVpZ2h0PXQsaS50aHVtYkhlaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCl9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckltYWdlSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJJbWFnZUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2JhckltYWdlSGVpZ2h0IT09dCl7dDw9MCYmKHQ9LjEpLHQ+MSYmKHQ9MSksdGhpcy5fYmFySW1hZ2VIZWlnaHQ9dDt2YXIgZT10aGlzLl9ob3Jpem9udGFsQmFyLGk9dGhpcy5fdmVydGljYWxCYXI7ZS5iYXJJbWFnZUhlaWdodD10LGkuYmFySW1hZ2VIZWlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsQmFySW1hZ2VIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvcml6b250YWxCYXJJbWFnZUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hvcml6b250YWxCYXJJbWFnZUhlaWdodCE9PXQmJih0PD0wJiYodD0uMSksdD4xJiYodD0xKSx0aGlzLl9ob3Jpem9udGFsQmFySW1hZ2VIZWlnaHQ9dCx0aGlzLl9ob3Jpem9udGFsQmFyLmJhckltYWdlSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmVydGljYWxCYXJJbWFnZUhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVydGljYWxCYXJJbWFnZUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZlcnRpY2FsQmFySW1hZ2VIZWlnaHQhPT10JiYodDw9MCYmKHQ9LjEpLHQ+MSYmKHQ9MSksdGhpcy5fdmVydGljYWxCYXJJbWFnZUhlaWdodD10LHRoaXMuX3ZlcnRpY2FsQmFyLmJhckltYWdlSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFyQmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFyQmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2JhckJhY2tncm91bmQhPT10KXt0aGlzLl9iYXJCYWNrZ3JvdW5kPXQ7dmFyIGU9dGhpcy5faG9yaXpvbnRhbEJhcixpPXRoaXMuX3ZlcnRpY2FsQmFyO2UuYmFja2dyb3VuZD10LGkuYmFja2dyb3VuZD10LHRoaXMuX2RyYWdTcGFjZS5iYWNrZ3JvdW5kPXR9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJCYWNrZ3JvdW5kSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYXJCYWNrZ3JvdW5kSW1hZ2UsdGhpcy5fYmFyQmFja2dyb3VuZEltYWdlPXQ7dmFyIGU9dGhpcy5faG9yaXpvbnRhbEJhcixpPXRoaXMuX3ZlcnRpY2FsQmFyO2UuYmFja2dyb3VuZEltYWdlPXQsaS5iYWNrZ3JvdW5kSW1hZ2U9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsQmFySW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvcml6b250YWxCYXJCYWNrZ3JvdW5kSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ob3Jpem9udGFsQmFyQmFja2dyb3VuZEltYWdlLHRoaXMuX2hvcml6b250YWxCYXJCYWNrZ3JvdW5kSW1hZ2U9dCx0aGlzLl9ob3Jpem9udGFsQmFyLmJhY2tncm91bmRJbWFnZT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZlcnRpY2FsQmFySW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnRpY2FsQmFyQmFja2dyb3VuZEltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdmVydGljYWxCYXJCYWNrZ3JvdW5kSW1hZ2UsdGhpcy5fdmVydGljYWxCYXJCYWNrZ3JvdW5kSW1hZ2U9dCx0aGlzLl92ZXJ0aWNhbEJhci5iYWNrZ3JvdW5kSW1hZ2U9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0V2luZG93UG9zaXRpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhvc3QuaWRlYWxSYXRpbyxlPXRoaXMuX3dpbmRvdy5fY3VycmVudE1lYXN1cmUud2lkdGgsaT10aGlzLl93aW5kb3cuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCxyPXRoaXMuX2NsaWVudFdpZHRoLWUsbj10aGlzLl9jbGllbnRIZWlnaHQtaSxvPXRoaXMuX2hvcml6b250YWxCYXIudmFsdWUvdCpyK1wicHhcIixzPXRoaXMuX3ZlcnRpY2FsQmFyLnZhbHVlL3QqbitcInB4XCI7byE9PXRoaXMuX3dpbmRvdy5sZWZ0JiYodGhpcy5fd2luZG93LmxlZnQ9byx0aGlzLmZyZWV6ZUNvbnRyb2xzfHwodGhpcy5fcmVidWlsZExheW91dD0hMCkpLHMhPT10aGlzLl93aW5kb3cudG9wJiYodGhpcy5fd2luZG93LnRvcD1zLHRoaXMuZnJlZXplQ29udHJvbHN8fCh0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKSl9LGUucHJvdG90eXBlLl91cGRhdGVTY3JvbGxlcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dpbmRvdy5fY3VycmVudE1lYXN1cmUud2lkdGgsZT10aGlzLl93aW5kb3cuX2N1cnJlbnRNZWFzdXJlLmhlaWdodDt0aGlzLl9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZSYmdDw9dGhpcy5fY2xpZW50V2lkdGgmJiF0aGlzLmZvcmNlSG9yaXpvbnRhbEJhcj8odGhpcy5fZ3JpZC5zZXRSb3dEZWZpbml0aW9uKDEsMCwhMCksdGhpcy5faG9yaXpvbnRhbEJhci5pc1Zpc2libGU9ITEsdGhpcy5faG9yaXpvbnRhbEJhci52YWx1ZT0wLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApOiF0aGlzLl9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZSYmKHQ+dGhpcy5fY2xpZW50V2lkdGh8fHRoaXMuZm9yY2VIb3Jpem9udGFsQmFyKSYmKHRoaXMuX2dyaWQuc2V0Um93RGVmaW5pdGlvbigxLHRoaXMuX2JhclNpemUsITApLHRoaXMuX2hvcml6b250YWxCYXIuaXNWaXNpYmxlPSEwLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApLHRoaXMuX3ZlcnRpY2FsQmFyLmlzVmlzaWJsZSYmZTw9dGhpcy5fY2xpZW50SGVpZ2h0JiYhdGhpcy5mb3JjZVZlcnRpY2FsQmFyPyh0aGlzLl9ncmlkLnNldENvbHVtbkRlZmluaXRpb24oMSwwLCEwKSx0aGlzLl92ZXJ0aWNhbEJhci5pc1Zpc2libGU9ITEsdGhpcy5fdmVydGljYWxCYXIudmFsdWU9MCx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKTohdGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlJiYoZT50aGlzLl9jbGllbnRIZWlnaHR8fHRoaXMuZm9yY2VWZXJ0aWNhbEJhcikmJih0aGlzLl9ncmlkLnNldENvbHVtbkRlZmluaXRpb24oMSx0aGlzLl9iYXJTaXplLCEwKSx0aGlzLl92ZXJ0aWNhbEJhci5pc1Zpc2libGU9ITAsdGhpcy5fcmVidWlsZExheW91dD0hMCksdGhpcy5fYnVpbGRDbGllbnRTaXplcygpO3ZhciBpPXRoaXMuaG9zdC5pZGVhbFJhdGlvO3RoaXMuX2hvcml6b250YWxCYXIudGh1bWJXaWR0aD0uOSp0aGlzLl90aHVtYkxlbmd0aCoodGhpcy5fY2xpZW50V2lkdGgvaSkrXCJweFwiLHRoaXMuX3ZlcnRpY2FsQmFyLnRodW1iV2lkdGg9LjkqdGhpcy5fdGh1bWJMZW5ndGgqKHRoaXMuX2NsaWVudEhlaWdodC9pKStcInB4XCJ9LGUucHJvdG90eXBlLl9saW5rPWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLl9saW5rLmNhbGwodGhpcyxlKSx0aGlzLl9hdHRhY2hXaGVlbCgpfSxlLnByb3RvdHlwZS5fYWRkQmFyPWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXM7dC5wYWRkaW5nTGVmdD0wLHQud2lkdGg9XCIxMDAlXCIsdC5oZWlnaHQ9XCIxMDAlXCIsdC5iYXJPZmZzZXQ9MCx0LnZhbHVlPTAsdC5tYXhpbXVtPTEsdC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSLHQudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLHQuaXNWZXJ0aWNhbD1pLHQucm90YXRpb249cix0LmlzVmlzaWJsZT0hMSxlLmFkZENvbnRyb2wodCksdC5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe24uX3NldFdpbmRvd1Bvc2l0aW9uKCl9KX0sZS5wcm90b3R5cGUuX2F0dGFjaFdoZWVsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9ob3N0JiYhdGhpcy5fb25XaGVlbE9ic2VydmVyJiYodGhpcy5fb25XaGVlbE9ic2VydmVyPXRoaXMub25XaGVlbE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKGUpe3QuX3BvaW50ZXJJc092ZXImJigxPT10Ll92ZXJ0aWNhbEJhci5pc1Zpc2libGUmJihlLnk8MCYmdC5fdmVydGljYWxCYXIudmFsdWU+MD90Ll92ZXJ0aWNhbEJhci52YWx1ZS09dC5fd2hlZWxQcmVjaXNpb246ZS55PjAmJnQuX3ZlcnRpY2FsQmFyLnZhbHVlPHQuX3ZlcnRpY2FsQmFyLm1heGltdW0mJih0Ll92ZXJ0aWNhbEJhci52YWx1ZSs9dC5fd2hlZWxQcmVjaXNpb24pKSwxPT10Ll9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZSYmKGUueDwwJiZ0Ll9ob3Jpem9udGFsQmFyLnZhbHVlPHQuX2hvcml6b250YWxCYXIubWF4aW11bT90Ll9ob3Jpem9udGFsQmFyLnZhbHVlKz10Ll93aGVlbFByZWNpc2lvbjplLng+MCYmdC5faG9yaXpvbnRhbEJhci52YWx1ZT4wJiYodC5faG9yaXpvbnRhbEJhci52YWx1ZS09dC5fd2hlZWxQcmVjaXNpb24pKSl9KSl9LGUucHJvdG90eXBlLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYz1mdW5jdGlvbihlKXt0aGlzLmlzSGlnaGxpZ2h0ZWQmJih0LnByb3RvdHlwZS5fcmVuZGVySGlnaGxpZ2h0U3BlY2lmaWMuY2FsbCh0aGlzLGUpLHRoaXMuX2dyaWQuX3JlbmRlckhpZ2hsaWdodFNwZWNpZmljKGUpLGUucmVzdG9yZSgpKX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMub25XaGVlbE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uV2hlZWxPYnNlcnZlciksdGhpcy5fb25XaGVlbE9ic2VydmVyPW51bGwsdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSxlfShtKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuU2Nyb2xsVmlld2VyXCJdPXo7dmFyIEc9ZnVuY3Rpb24oKXt9LFg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5vbktleVByZXNzT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGUuZGVmYXVsdEJ1dHRvbldpZHRoPVwiNDBweFwiLGUuZGVmYXVsdEJ1dHRvbkhlaWdodD1cIjQwcHhcIixlLmRlZmF1bHRCdXR0b25QYWRkaW5nTGVmdD1cIjJweFwiLGUuZGVmYXVsdEJ1dHRvblBhZGRpbmdSaWdodD1cIjJweFwiLGUuZGVmYXVsdEJ1dHRvblBhZGRpbmdUb3A9XCIycHhcIixlLmRlZmF1bHRCdXR0b25QYWRkaW5nQm90dG9tPVwiMnB4XCIsZS5kZWZhdWx0QnV0dG9uQ29sb3I9XCIjREREXCIsZS5kZWZhdWx0QnV0dG9uQmFja2dyb3VuZD1cIiMwNzA3MDdcIixlLnNoaWZ0QnV0dG9uQ29sb3I9XCIjNzc5OUZGXCIsZS5zZWxlY3RlZFNoaWZ0VGhpY2tuZXNzPTEsZS5zaGlmdFN0YXRlPTAsZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PW51bGwsZS5fY29ubmVjdGVkSW5wdXRUZXh0cz1bXSxlLl9vbktleVByZXNzT2JzZXJ2ZXI9bnVsbCxlfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJWaXJ0dWFsS2V5Ym9hcmRcIn0sZS5wcm90b3R5cGUuX2NyZWF0ZUtleT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMscj1PLkNyZWF0ZVNpbXBsZUJ1dHRvbih0LHQpO3JldHVybiByLndpZHRoPWUmJmUud2lkdGg/ZS53aWR0aDp0aGlzLmRlZmF1bHRCdXR0b25XaWR0aCxyLmhlaWdodD1lJiZlLmhlaWdodD9lLmhlaWdodDp0aGlzLmRlZmF1bHRCdXR0b25IZWlnaHQsci5jb2xvcj1lJiZlLmNvbG9yP2UuY29sb3I6dGhpcy5kZWZhdWx0QnV0dG9uQ29sb3Isci5iYWNrZ3JvdW5kPWUmJmUuYmFja2dyb3VuZD9lLmJhY2tncm91bmQ6dGhpcy5kZWZhdWx0QnV0dG9uQmFja2dyb3VuZCxyLnBhZGRpbmdMZWZ0PWUmJmUucGFkZGluZ0xlZnQ/ZS5wYWRkaW5nTGVmdDp0aGlzLmRlZmF1bHRCdXR0b25QYWRkaW5nTGVmdCxyLnBhZGRpbmdSaWdodD1lJiZlLnBhZGRpbmdSaWdodD9lLnBhZGRpbmdSaWdodDp0aGlzLmRlZmF1bHRCdXR0b25QYWRkaW5nUmlnaHQsci5wYWRkaW5nVG9wPWUmJmUucGFkZGluZ1RvcD9lLnBhZGRpbmdUb3A6dGhpcy5kZWZhdWx0QnV0dG9uUGFkZGluZ1RvcCxyLnBhZGRpbmdCb3R0b209ZSYmZS5wYWRkaW5nQm90dG9tP2UucGFkZGluZ0JvdHRvbTp0aGlzLmRlZmF1bHRCdXR0b25QYWRkaW5nQm90dG9tLHIudGhpY2tuZXNzPTAsci5pc0ZvY3VzSW52aXNpYmxlPSEwLHIuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcixyLnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHIuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsci5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSxyLm9uUG9pbnRlclVwT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtpLm9uS2V5UHJlc3NPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0KX0pLHJ9LGUucHJvdG90eXBlLmFkZEtleXNSb3c9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgQztpLmlzVmVydGljYWw9ITEsaS5pc0ZvY3VzSW52aXNpYmxlPSEwO2Zvcih2YXIgcj1udWxsLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIG89bnVsbDtlJiZlLmxlbmd0aD09PXQubGVuZ3RoJiYobz1lW25dKTt2YXIgcz10aGlzLl9jcmVhdGVLZXkodFtuXSxvKTsoIXJ8fHMuaGVpZ2h0SW5QaXhlbHM+ci5oZWlnaHRJblBpeGVscykmJihyPXMpLGkuYWRkQ29udHJvbChzKX1pLmhlaWdodD1yP3IuaGVpZ2h0OnRoaXMuZGVmYXVsdEJ1dHRvbkhlaWdodCx0aGlzLmFkZENvbnRyb2woaSl9LGUucHJvdG90eXBlLmFwcGx5U2hpZnRTdGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLmNoaWxkcmVuKWZvcih2YXIgZT0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLmNoaWxkcmVuW2VdO2lmKGkmJmkuY2hpbGRyZW4pZm9yKHZhciByPWksbj0wO248ci5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgbz1yLmNoaWxkcmVuW25dO2lmKG8mJm8uY2hpbGRyZW5bMF0pe3ZhciBzPW8uY2hpbGRyZW5bMF07XCLih6dcIj09PXMudGV4dCYmKG8uY29sb3I9dD90aGlzLnNoaWZ0QnV0dG9uQ29sb3I6dGhpcy5kZWZhdWx0QnV0dG9uQ29sb3Isby50aGlja25lc3M9dD4xP3RoaXMuc2VsZWN0ZWRTaGlmdFRoaWNrbmVzczowKSxzLnRleHQ9dD4wP3MudGV4dC50b1VwcGVyQ2FzZSgpOnMudGV4dC50b0xvd2VyQ2FzZSgpfX19fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb25uZWN0ZWRJbnB1dFRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHMuc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbnB1dD09PXR9KSl7bnVsbD09PXRoaXMuX29uS2V5UHJlc3NPYnNlcnZlciYmKHRoaXMuX29uS2V5UHJlc3NPYnNlcnZlcj10aGlzLm9uS2V5UHJlc3NPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtpZihlLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQpe3N3aXRjaChlLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQuX2hvc3QuZm9jdXNlZENvbnRyb2w9ZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0LHQpe2Nhc2VcIuKHp1wiOnJldHVybiBlLnNoaWZ0U3RhdGUrKyxlLnNoaWZ0U3RhdGU+MiYmKGUuc2hpZnRTdGF0ZT0wKSx2b2lkIGUuYXBwbHlTaGlmdFN0YXRlKGUuc2hpZnRTdGF0ZSk7Y2FzZVwi4oaQXCI6cmV0dXJuIHZvaWQgZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0LnByb2Nlc3NLZXkoOCk7Y2FzZVwi4oa1XCI6cmV0dXJuIHZvaWQgZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0LnByb2Nlc3NLZXkoMTMpfWUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dC5wcm9jZXNzS2V5KC0xLGUuc2hpZnRTdGF0ZT90LnRvVXBwZXJDYXNlKCk6dCksMT09PWUuc2hpZnRTdGF0ZSYmKGUuc2hpZnRTdGF0ZT0wLGUuYXBwbHlTaGlmdFN0YXRlKGUuc2hpZnRTdGF0ZSkpfX0pKSx0aGlzLmlzVmlzaWJsZT0hMSx0aGlzLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQ9dCx0Ll9jb25uZWN0ZWRWaXJ0dWFsS2V5Ym9hcmQ9dGhpczt2YXIgaT10Lm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dD10LHQuX2Nvbm5lY3RlZFZpcnR1YWxLZXlib2FyZD1lLGUuaXNWaXNpYmxlPSEwfSkscj10Lm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7dC5fY29ubmVjdGVkVmlydHVhbEtleWJvYXJkPW51bGwsZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PW51bGwsZS5pc1Zpc2libGU9ITF9KTt0aGlzLl9jb25uZWN0ZWRJbnB1dFRleHRzLnB1c2goe2lucHV0OnQsb25CbHVyT2JzZXJ2ZXI6cixvbkZvY3VzT2JzZXJ2ZXI6aX0pfX0sZS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQpe3ZhciBpPXRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlucHV0PT09dH0pOzE9PT1pLmxlbmd0aCYmKHRoaXMuX3JlbW92ZUNvbm5lY3RlZElucHV0T2JzZXJ2YWJsZXMoaVswXSksdGhpcy5fY29ubmVjdGVkSW5wdXRUZXh0cz10aGlzLl9jb25uZWN0ZWRJbnB1dFRleHRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pbnB1dCE9PXR9KSx0aGlzLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQ9PT10JiYodGhpcy5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PW51bGwpKX1lbHNlIHRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHMuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9yZW1vdmVDb25uZWN0ZWRJbnB1dE9ic2VydmFibGVzKHQpfSksdGhpcy5fY29ubmVjdGVkSW5wdXRUZXh0cz1bXTswPT09dGhpcy5fY29ubmVjdGVkSW5wdXRUZXh0cy5sZW5ndGgmJih0aGlzLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQ9bnVsbCx0aGlzLm9uS2V5UHJlc3NPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbktleVByZXNzT2JzZXJ2ZXIpLHRoaXMuX29uS2V5UHJlc3NPYnNlcnZlcj1udWxsKX0sZS5wcm90b3R5cGUuX3JlbW92ZUNvbm5lY3RlZElucHV0T2JzZXJ2YWJsZXM9ZnVuY3Rpb24odCl7dC5pbnB1dC5fY29ubmVjdGVkVmlydHVhbEtleWJvYXJkPW51bGwsdC5pbnB1dC5vbkZvY3VzT2JzZXJ2YWJsZS5yZW1vdmUodC5vbkZvY3VzT2JzZXJ2ZXIpLHQuaW5wdXQub25CbHVyT2JzZXJ2YWJsZS5yZW1vdmUodC5vbkJsdXJPYnNlcnZlcil9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5kaXNjb25uZWN0KCl9LGUuQ3JlYXRlRGVmYXVsdExheW91dD1mdW5jdGlvbih0KXt2YXIgaT1uZXcgZSh0KTtyZXR1cm4gaS5hZGRLZXlzUm93KFtcIjFcIixcIjJcIixcIjNcIixcIjRcIixcIjVcIixcIjZcIixcIjdcIixcIjhcIixcIjlcIixcIjBcIixcIuKGkFwiXSksaS5hZGRLZXlzUm93KFtcInFcIixcIndcIixcImVcIixcInJcIixcInRcIixcInlcIixcInVcIixcImlcIixcIm9cIixcInBcIl0pLGkuYWRkS2V5c1JvdyhbXCJhXCIsXCJzXCIsXCJkXCIsXCJmXCIsXCJnXCIsXCJoXCIsXCJqXCIsXCJrXCIsXCJsXCIsXCI7XCIsXCInXCIsXCLihrVcIl0pLGkuYWRkS2V5c1JvdyhbXCLih6dcIixcInpcIixcInhcIixcImNcIixcInZcIixcImJcIixcIm5cIixcIm1cIixcIixcIixcIi5cIixcIi9cIl0pLGkuYWRkS2V5c1JvdyhbXCIgXCJdLFt7d2lkdGg6XCIyMDBweFwifV0pLGl9LGV9KEMpO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5WaXJ0dWFsS2V5Ym9hcmRcIl09WDt2YXIgWT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl9jZWxsV2lkdGg9MjAsaS5fY2VsbEhlaWdodD0yMCxpLl9taW5vckxpbmVUaWNrbmVzcz0xLGkuX21pbm9yTGluZUNvbG9yPVwiRGFya0dyYXlcIixpLl9tYWpvckxpbmVUaWNrbmVzcz0yLGkuX21ham9yTGluZUNvbG9yPVwiV2hpdGVcIixpLl9tYWpvckxpbmVGcmVxdWVuY3k9NSxpLl9iYWNrZ3JvdW5kPVwiQmxhY2tcIixpLl9kaXNwbGF5TWFqb3JMaW5lcz0hMCxpLl9kaXNwbGF5TWlub3JMaW5lcz0hMCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzcGxheU1pbm9yTGluZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXlNaW5vckxpbmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlzcGxheU1pbm9yTGluZXMhPT10JiYodGhpcy5fZGlzcGxheU1pbm9yTGluZXM9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkaXNwbGF5TWFqb3JMaW5lc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzcGxheU1ham9yTGluZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNwbGF5TWFqb3JMaW5lcyE9PXQmJih0aGlzLl9kaXNwbGF5TWFqb3JMaW5lcz10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjZWxsV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NlbGxXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NlbGxXaWR0aD10LHRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2VsbEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VsbEhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NlbGxIZWlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1pbm9yTGluZVRpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taW5vckxpbmVUaWNrbmVzc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21pbm9yTGluZVRpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtaW5vckxpbmVDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWlub3JMaW5lQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9taW5vckxpbmVDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWFqb3JMaW5lVGlja25lc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ham9yTGluZVRpY2tuZXNzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWFqb3JMaW5lVGlja25lc3M9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1ham9yTGluZUNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYWpvckxpbmVDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21ham9yTGluZUNvbG9yPXQsdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYWpvckxpbmVGcmVxdWVuY3lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21ham9yTGluZUZyZXF1ZW5jeX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21ham9yTGluZUZyZXF1ZW5jeT10LHRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCxlKXtpZih0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9pc0VuYWJsZWQpe3RoaXMuX2JhY2tncm91bmQmJih0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSk7dmFyIGk9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvdGhpcy5fY2VsbFdpZHRoLHI9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0L3RoaXMuX2NlbGxIZWlnaHQsbj10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzIsbz10aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzI7aWYodGhpcy5fZGlzcGxheU1pbm9yTGluZXMpe3Quc3Ryb2tlU3R5bGU9dGhpcy5fbWlub3JMaW5lQ29sb3IsdC5saW5lV2lkdGg9dGhpcy5fbWlub3JMaW5lVGlja25lc3M7Zm9yKHZhciBzPS1pLzI7czxpLzI7cysrKXt2YXIgYT1uK3MqdGhpcy5jZWxsV2lkdGg7dC5iZWdpblBhdGgoKSx0Lm1vdmVUbyhhLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCksdC5saW5lVG8oYSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0LnN0cm9rZSgpfWZvcih2YXIgaD0tci8yO2g8ci8yO2grKyl7dmFyIGw9bytoKnRoaXMuY2VsbEhlaWdodDt0LmJlZ2luUGF0aCgpLHQubW92ZVRvKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsbCksdC5saW5lVG8odGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxsKSx0LnN0cm9rZSgpfX1pZih0aGlzLl9kaXNwbGF5TWFqb3JMaW5lcyl7dC5zdHJva2VTdHlsZT10aGlzLl9tYWpvckxpbmVDb2xvcix0LmxpbmVXaWR0aD10aGlzLl9tYWpvckxpbmVUaWNrbmVzcztmb3Iocz0taS8yK3RoaXMuX21ham9yTGluZUZyZXF1ZW5jeTtzPGkvMjtzKz10aGlzLl9tYWpvckxpbmVGcmVxdWVuY3kpe2E9bitzKnRoaXMuY2VsbFdpZHRoO3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8oYSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApLHQubGluZVRvKGEsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdC5zdHJva2UoKX1mb3IoaD0tci8yK3RoaXMuX21ham9yTGluZUZyZXF1ZW5jeTtoPHIvMjtoKz10aGlzLl9tYWpvckxpbmVGcmVxdWVuY3kpe2w9bytoKnRoaXMuY2VsbEhlaWdodDt0Lm1vdmVUbyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LGwpLHQubGluZVRvKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsbCksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfX19dC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiRGlzcGxheUdyaWRcIn0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkRpc3BsYXlHcmlkXCJdPVk7dmFyIFU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fdGVtcE1lYXN1cmU9bmV3IF8oMCwwLDAsMCksaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRpc3BsYXlUaHVtYlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzcGxheVRodW1iJiZudWxsIT10aGlzLnRodW1iSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNwbGF5VGh1bWIhPT10JiYodGhpcy5fZGlzcGxheVRodW1iPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFja2dyb3VuZEltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2JhY2tncm91bmRJbWFnZSE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kSW1hZ2U9dCx0JiYhdC5pc0xvYWRlZCYmdC5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX21hcmtBc0RpcnR5KCl9KSx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2YWx1ZUJhckltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZUJhckltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl92YWx1ZUJhckltYWdlIT09dCYmKHRoaXMuX3ZhbHVlQmFySW1hZ2U9dCx0JiYhdC5pc0xvYWRlZCYmdC5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX21hcmtBc0RpcnR5KCl9KSx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYkltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYkltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl90aHVtYkltYWdlIT09dCYmKHRoaXMuX3RodW1iSW1hZ2U9dCx0JiYhdC5pc0xvYWRlZCYmdC5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX21hcmtBc0RpcnR5KCl9KSx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkltYWdlQmFzZWRTbGlkZXJcIn0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCxlKXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9wcmVwYXJlUmVuZGVyaW5nRGF0YShcInJlY3RhbmdsZVwiKTt2YXIgaT10aGlzLl9nZXRUaHVtYlBvc2l0aW9uKCkscj10aGlzLl9yZW5kZXJMZWZ0LG49dGhpcy5fcmVuZGVyVG9wLG89dGhpcy5fcmVuZGVyV2lkdGgscz10aGlzLl9yZW5kZXJIZWlnaHQ7dGhpcy5fYmFja2dyb3VuZEltYWdlJiYodGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMocixuLG8scyksdGhpcy5pc1RodW1iQ2xhbXBlZCYmdGhpcy5kaXNwbGF5VGh1bWImJih0aGlzLmlzVmVydGljYWw/dGhpcy5fdGVtcE1lYXN1cmUuaGVpZ2h0Kz10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzczp0aGlzLl90ZW1wTWVhc3VyZS53aWR0aCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpLHRoaXMuX2JhY2tncm91bmRJbWFnZS5fY3VycmVudE1lYXN1cmUuY29weUZyb20odGhpcy5fdGVtcE1lYXN1cmUpLHRoaXMuX2JhY2tncm91bmRJbWFnZS5fZHJhdyh0KSksdGhpcy5fdmFsdWVCYXJJbWFnZSYmKHRoaXMuaXNWZXJ0aWNhbD90aGlzLmlzVGh1bWJDbGFtcGVkJiZ0aGlzLmRpc3BsYXlUaHVtYj90aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyhyLG4raSxvLHMtaSt0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMocixuK2ksbyxzLWkpOnRoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuZGlzcGxheVRodW1iP3RoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHIsbixpK3RoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLzIscyk6dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMocixuLGkscyksdGhpcy5fdmFsdWVCYXJJbWFnZS5fY3VycmVudE1lYXN1cmUuY29weUZyb20odGhpcy5fdGVtcE1lYXN1cmUpLHRoaXMuX3ZhbHVlQmFySW1hZ2UuX2RyYXcodCkpLHRoaXMuZGlzcGxheVRodW1iJiYodGhpcy5pc1ZlcnRpY2FsP3RoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHItdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKTp0aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2ksdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdGhpcy5fdGh1bWJJbWFnZS5fY3VycmVudE1lYXN1cmUuY29weUZyb20odGhpcy5fdGVtcE1lYXN1cmUpLHRoaXMuX3RodW1iSW1hZ2UuX2RyYXcodCkpLHQucmVzdG9yZSgpfSxlfShMKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuSW1hZ2VCYXNlZFNsaWRlclwiXT1VO3AuQWRkSGVhZGVyPWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPW5ldyBDKFwicGFuZWxcIiksbz0hcnx8ci5pc0hvcml6b250YWwscz0hcnx8ci5jb250cm9sRmlyc3Q7bi5pc1ZlcnRpY2FsPSFvO3ZhciBhPW5ldyB5KFwiaGVhZGVyXCIpO3JldHVybiBhLnRleHQ9ZSxhLnRleHRIb3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxvP2Eud2lkdGg9aTphLmhlaWdodD1pLHM/KG4uYWRkQ29udHJvbCh0KSxuLmFkZENvbnRyb2woYSksYS5wYWRkaW5nTGVmdD1cIjVweFwiKToobi5hZGRDb250cm9sKGEpLG4uYWRkQ29udHJvbCh0KSxhLnBhZGRpbmdSaWdodD1cIjVweFwiKSxhLnNoYWRvd0JsdXI9dC5zaGFkb3dCbHVyLGEuc2hhZG93Q29sb3I9dC5zaGFkb3dDb2xvcixhLnNoYWRvd09mZnNldFg9dC5zaGFkb3dPZmZzZXRYLGEuc2hhZG93T2Zmc2V0WT10LnNoYWRvd09mZnNldFksbn07dmFyIHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX2ZvbnRGYW1pbHk9XCJBcmlhbFwiLHRoaXMuX2ZvbnRTdHlsZT1cIlwiLHRoaXMuX2ZvbnRXZWlnaHQ9XCJcIix0aGlzLl9mb250U2l6ZT1uZXcgYSgxOCxhLlVOSVRNT0RFX1BJWEVMLCExKSx0aGlzLm9uQ2hhbmdlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLl9ob3N0PXR9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250U2l6ZS50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRTaXplLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fZm9udFNpemUuZnJvbVN0cmluZyh0KSYmdGhpcy5vbkNoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmb250RmFtaWx5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250RmFtaWx5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udEZhbWlseSE9PXQmJih0aGlzLl9mb250RmFtaWx5PXQsdGhpcy5vbkNoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udFN0eWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250U3R5bGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250U3R5bGUhPT10JiYodGhpcy5fZm9udFN0eWxlPXQsdGhpcy5vbkNoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udFdlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFdlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRXZWlnaHQhPT10JiYodGhpcy5fZm9udFdlaWdodD10LHRoaXMub25DaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcykpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLm9uQ2hhbmdlZE9ic2VydmFibGUuY2xlYXIoKX0sdH0oKSxLPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLHIsbixvLGEpe3ZvaWQgMD09PWkmJihpPTApLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPSExKSx2b2lkIDA9PT1hJiYoYT1zLlRleHR1cmUuTkVBUkVTVF9TQU1QTElOR01PREUpO3ZhciBoPXQuY2FsbCh0aGlzLGUse3dpZHRoOmksaGVpZ2h0OnJ9LG4sbyxhLHMuQ29uc3RhbnRzLlRFWFRVUkVGT1JNQVRfUkdCQSl8fHRoaXM7cmV0dXJuIGguX2lzRGlydHk9ITEsaC5fcm9vdENvbnRhaW5lcj1uZXcgZyhcInJvb3RcIiksaC5fbGFzdENvbnRyb2xPdmVyPXt9LGguX2xhc3RDb250cm9sRG93bj17fSxoLl9jYXB0dXJpbmdDb250cm9sPXt9LGguX2xpbmtlZENvbnRyb2xzPW5ldyBBcnJheSxoLl9pc0Z1bGxzY3JlZW49ITEsaC5fZnVsbHNjcmVlblZpZXdwb3J0PW5ldyBzLlZpZXdwb3J0KDAsMCwxLDEpLGguX2lkZWFsV2lkdGg9MCxoLl9pZGVhbEhlaWdodD0wLGguX3VzZVNtYWxsZXN0SWRlYWw9ITEsaC5fcmVuZGVyQXRJZGVhbFNpemU9ITEsaC5fYmxvY2tOZXh0Rm9jdXNDaGVjaz0hMSxoLl9yZW5kZXJTY2FsZT0xLGguX2N1cnNvckNoYW5nZWQ9ITEsaC5fZGVmYXVsdE1vdXNlUG9pbnRlcklkPTAsaC5fbnVtTGF5b3V0Q2FsbHM9MCxoLl9udW1SZW5kZXJDYWxscz0wLGguX2NsaXBib2FyZERhdGE9XCJcIixoLm9uQ2xpcGJvYXJkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGgub25Db250cm9sUGlja2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGgub25CZWdpbkxheW91dE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLm9uRW5kTGF5b3V0T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGgub25CZWdpblJlbmRlck9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLm9uRW5kUmVuZGVyT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGgucHJlbXVsQWxwaGE9ITEsaC5fdXNlSW52YWxpZGF0ZVJlY3RPcHRpbWl6YXRpb249ITAsaC5faW52YWxpZGF0ZWRSZWN0YW5nbGU9bnVsbCxoLl9jbGVhck1lYXN1cmU9bmV3IF8oMCwwLDAsMCksaC5vbkNsaXBib2FyZENvcHk9ZnVuY3Rpb24odCl7dmFyIGU9dCxpPW5ldyBzLkNsaXBib2FyZEluZm8ocy5DbGlwYm9hcmRFdmVudFR5cGVzLkNPUFksZSk7aC5vbkNsaXBib2FyZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGkpLGUucHJldmVudERlZmF1bHQoKX0saC5vbkNsaXBib2FyZEN1dD1mdW5jdGlvbih0KXt2YXIgZT10LGk9bmV3IHMuQ2xpcGJvYXJkSW5mbyhzLkNsaXBib2FyZEV2ZW50VHlwZXMuQ1VULGUpO2gub25DbGlwYm9hcmRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhpKSxlLnByZXZlbnREZWZhdWx0KCl9LGgub25DbGlwYm9hcmRQYXN0ZT1mdW5jdGlvbih0KXt2YXIgZT10LGk9bmV3IHMuQ2xpcGJvYXJkSW5mbyhzLkNsaXBib2FyZEV2ZW50VHlwZXMuUEFTVEUsZSk7aC5vbkNsaXBib2FyZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGkpLGUucHJldmVudERlZmF1bHQoKX0sKG49aC5nZXRTY2VuZSgpKSYmaC5fdGV4dHVyZT8oaC5fcm9vdEVsZW1lbnQ9bi5nZXRFbmdpbmUoKS5nZXRJbnB1dEVsZW1lbnQoKSxoLl9yZW5kZXJPYnNlcnZlcj1uLm9uQmVmb3JlQ2FtZXJhUmVuZGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7cmV0dXJuIGguX2NoZWNrVXBkYXRlKHQpfSksaC5fcHJlS2V5Ym9hcmRPYnNlcnZlcj1uLm9uUHJlS2V5Ym9hcmRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtoLl9mb2N1c2VkQ29udHJvbCYmKHQudHlwZT09PXMuS2V5Ym9hcmRFdmVudFR5cGVzLktFWURPV04mJmguX2ZvY3VzZWRDb250cm9sLnByb2Nlc3NLZXlib2FyZCh0LmV2ZW50KSx0LnNraXBPblBvaW50ZXJPYnNlcnZhYmxlPSEwKX0pLGguX3Jvb3RDb250YWluZXIuX2xpbmsoaCksaC5oYXNBbHBoYT0hMCxpJiZyfHwoaC5fcmVzaXplT2JzZXJ2ZXI9bi5nZXRFbmdpbmUoKS5vblJlc2l6ZU9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7cmV0dXJuIGguX29uUmVzaXplKCl9KSxoLl9vblJlc2l6ZSgpKSxoLl90ZXh0dXJlLmlzUmVhZHk9ITAsaCk6aH1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm51bUxheW91dENhbGxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9udW1MYXlvdXRDYWxsc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJudW1SZW5kZXJDYWxsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbnVtUmVuZGVyQ2FsbHN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVuZGVyU2NhbGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlclNjYWxlfSxzZXQ6ZnVuY3Rpb24odCl7dCE9PXRoaXMuX3JlbmRlclNjYWxlJiYodGhpcy5fcmVuZGVyU2NhbGU9dCx0aGlzLl9vblJlc2l6ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpZGVhbFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVhbFdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faWRlYWxXaWR0aCE9PXQmJih0aGlzLl9pZGVhbFdpZHRoPXQsdGhpcy5tYXJrQXNEaXJ0eSgpLHRoaXMuX3Jvb3RDb250YWluZXIuX21hcmtBbGxBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlkZWFsSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZGVhbEhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lkZWFsSGVpZ2h0IT09dCYmKHRoaXMuX2lkZWFsSGVpZ2h0PXQsdGhpcy5tYXJrQXNEaXJ0eSgpLHRoaXMuX3Jvb3RDb250YWluZXIuX21hcmtBbGxBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInVzZVNtYWxsZXN0SWRlYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZVNtYWxsZXN0SWRlYWx9LHNldDpmdW5jdGlvbih0KXt0aGlzLl91c2VTbWFsbGVzdElkZWFsIT09dCYmKHRoaXMuX3VzZVNtYWxsZXN0SWRlYWw9dCx0aGlzLm1hcmtBc0RpcnR5KCksdGhpcy5fcm9vdENvbnRhaW5lci5fbWFya0FsbEFzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVuZGVyQXRJZGVhbFNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlckF0SWRlYWxTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmVuZGVyQXRJZGVhbFNpemUhPT10JiYodGhpcy5fcmVuZGVyQXRJZGVhbFNpemU9dCx0aGlzLl9vblJlc2l6ZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpZGVhbFJhdGlvXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PTAsZT0wO3JldHVybiB0aGlzLl9pZGVhbFdpZHRoJiYodD10aGlzLmdldFNpemUoKS53aWR0aC90aGlzLl9pZGVhbFdpZHRoKSx0aGlzLl9pZGVhbEhlaWdodCYmKGU9dGhpcy5nZXRTaXplKCkuaGVpZ2h0L3RoaXMuX2lkZWFsSGVpZ2h0KSx0aGlzLl91c2VTbWFsbGVzdElkZWFsJiZ0aGlzLl9pZGVhbFdpZHRoJiZ0aGlzLl9pZGVhbEhlaWdodD93aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHQ/dDplOnRoaXMuX2lkZWFsV2lkdGg/dDp0aGlzLl9pZGVhbEhlaWdodD9lOjF9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGF5ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xheWVyVG9EaXNwb3NlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJvb3RDb250YWluZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0Q2hpbGRyZW49ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5fcm9vdENvbnRhaW5lcl19LGUucHJvdG90eXBlLmdldERlc2NlbmRhbnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXIuZ2V0RGVzY2VuZGFudHModCxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZm9jdXNlZENvbnRyb2xcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY3VzZWRDb250cm9sfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9jdXNlZENvbnRyb2whPXQmJih0aGlzLl9mb2N1c2VkQ29udHJvbCYmdGhpcy5fZm9jdXNlZENvbnRyb2wub25CbHVyKCksdCYmdC5vbkZvY3VzKCksdGhpcy5fZm9jdXNlZENvbnRyb2w9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNGb3JlZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiF0aGlzLmxheWVyfHwhdGhpcy5sYXllci5pc0JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLmxheWVyJiZ0aGlzLmxheWVyLmlzQmFja2dyb3VuZCE9PSF0JiYodGhpcy5sYXllci5pc0JhY2tncm91bmQ9IXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNsaXBib2FyZERhdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaXBib2FyZERhdGF9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jbGlwYm9hcmREYXRhPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJBZHZhbmNlZER5bmFtaWNUZXh0dXJlXCJ9LGUucHJvdG90eXBlLmV4ZWN1dGVPbkFsbENvbnRyb2xzPWZ1bmN0aW9uKHQsZSl7ZXx8KGU9dGhpcy5fcm9vdENvbnRhaW5lciksdChlKTtmb3IodmFyIGk9MCxyPWUuY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07bi5jaGlsZHJlbj90aGlzLmV4ZWN1dGVPbkFsbENvbnRyb2xzKHQsbik6dChuKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInVzZUludmFsaWRhdGVSZWN0T3B0aW1pemF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VJbnZhbGlkYXRlUmVjdE9wdGltaXphdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3VzZUludmFsaWRhdGVSZWN0T3B0aW1pemF0aW9uPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuaW52YWxpZGF0ZVJlY3Q9ZnVuY3Rpb24odCxlLGkscil7aWYodGhpcy5fdXNlSW52YWxpZGF0ZVJlY3RPcHRpbWl6YXRpb24paWYodGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUpe3ZhciBuPU1hdGguY2VpbChNYXRoLm1heCh0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS5sZWZ0K3RoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLndpZHRoLTEsaSkpLG89TWF0aC5jZWlsKE1hdGgubWF4KHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLnRvcCt0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS5oZWlnaHQtMSxyKSk7dGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUubGVmdD1NYXRoLmZsb29yKE1hdGgubWluKHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLmxlZnQsdCkpLHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLnRvcD1NYXRoLmZsb29yKE1hdGgubWluKHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLnRvcCxlKSksdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUud2lkdGg9bi10aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS5sZWZ0KzEsdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUuaGVpZ2h0PW8tdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUudG9wKzF9ZWxzZSB0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZT1uZXcgXyh0LGUsaS10KzEsci1lKzEpfSxlLnByb3RvdHlwZS5tYXJrQXNEaXJ0eT1mdW5jdGlvbigpe3RoaXMuX2lzRGlydHk9ITB9LGUucHJvdG90eXBlLmNyZWF0ZVN0eWxlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBxKHRoaXMpfSxlLnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyLmFkZENvbnRyb2wodCksdGhpc30sZS5wcm90b3R5cGUucmVtb3ZlQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcm9vdENvbnRhaW5lci5yZW1vdmVDb250cm9sKHQpLHRoaXN9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldFNjZW5lKCk7ZSYmKHRoaXMuX3Jvb3RFbGVtZW50PW51bGwsZS5vbkJlZm9yZUNhbWVyYVJlbmRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3JlbmRlck9ic2VydmVyKSx0aGlzLl9yZXNpemVPYnNlcnZlciYmZS5nZXRFbmdpbmUoKS5vblJlc2l6ZU9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3Jlc2l6ZU9ic2VydmVyKSx0aGlzLl9wb2ludGVyTW92ZU9ic2VydmVyJiZlLm9uUHJlUG9pbnRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3BvaW50ZXJNb3ZlT2JzZXJ2ZXIpLHRoaXMuX3BvaW50ZXJPYnNlcnZlciYmZS5vblBvaW50ZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9wb2ludGVyT2JzZXJ2ZXIpLHRoaXMuX3ByZUtleWJvYXJkT2JzZXJ2ZXImJmUub25QcmVLZXlib2FyZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3ByZUtleWJvYXJkT2JzZXJ2ZXIpLHRoaXMuX2NhbnZhc1BvaW50ZXJPdXRPYnNlcnZlciYmZS5nZXRFbmdpbmUoKS5vbkNhbnZhc1BvaW50ZXJPdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9jYW52YXNQb2ludGVyT3V0T2JzZXJ2ZXIpLHRoaXMuX2xheWVyVG9EaXNwb3NlJiYodGhpcy5fbGF5ZXJUb0Rpc3Bvc2UudGV4dHVyZT1udWxsLHRoaXMuX2xheWVyVG9EaXNwb3NlLmRpc3Bvc2UoKSx0aGlzLl9sYXllclRvRGlzcG9zZT1udWxsKSx0aGlzLl9yb290Q29udGFpbmVyLmRpc3Bvc2UoKSx0aGlzLm9uQ2xpcGJvYXJkT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Db250cm9sUGlja2VkT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25CZWdpblJlbmRlck9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uRW5kUmVuZGVyT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25CZWdpbkxheW91dE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uRW5kTGF5b3V0T2JzZXJ2YWJsZS5jbGVhcigpLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSl9LGUucHJvdG90eXBlLl9vblJlc2l6ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U2NlbmUoKTtpZih0KXt2YXIgZT10LmdldEVuZ2luZSgpLGk9dGhpcy5nZXRTaXplKCkscj1lLmdldFJlbmRlcldpZHRoKCkqdGhpcy5fcmVuZGVyU2NhbGUsbj1lLmdldFJlbmRlckhlaWdodCgpKnRoaXMuX3JlbmRlclNjYWxlO3RoaXMuX3JlbmRlckF0SWRlYWxTaXplJiYodGhpcy5faWRlYWxXaWR0aD8obj1uKnRoaXMuX2lkZWFsV2lkdGgvcixyPXRoaXMuX2lkZWFsV2lkdGgpOnRoaXMuX2lkZWFsSGVpZ2h0JiYocj1yKnRoaXMuX2lkZWFsSGVpZ2h0L24sbj10aGlzLl9pZGVhbEhlaWdodCkpLGkud2lkdGg9PT1yJiZpLmhlaWdodD09PW58fCh0aGlzLnNjYWxlVG8ocixuKSx0aGlzLm1hcmtBc0RpcnR5KCksKHRoaXMuX2lkZWFsV2lkdGh8fHRoaXMuX2lkZWFsSGVpZ2h0KSYmdGhpcy5fcm9vdENvbnRhaW5lci5fbWFya0FsbEFzRGlydHkoKSksdGhpcy5pbnZhbGlkYXRlUmVjdCgwLDAsaS53aWR0aC0xLGkuaGVpZ2h0LTEpfX0sZS5wcm90b3R5cGUuX2dldEdsb2JhbFZpZXdwb3J0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0RW5naW5lKCk7cmV0dXJuIHRoaXMuX2Z1bGxzY3JlZW5WaWV3cG9ydC50b0dsb2JhbChlLmdldFJlbmRlcldpZHRoKCksZS5nZXRSZW5kZXJIZWlnaHQoKSl9LGUucHJvdG90eXBlLmdldFByb2plY3RlZFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRTY2VuZSgpO2lmKCFpKXJldHVybiBzLlZlY3RvcjIuWmVybygpO3ZhciByPXRoaXMuX2dldEdsb2JhbFZpZXdwb3J0KGkpLG49cy5WZWN0b3IzLlByb2plY3QodCxlLGkuZ2V0VHJhbnNmb3JtTWF0cml4KCkscik7cmV0dXJuIG4uc2NhbGVJblBsYWNlKHRoaXMucmVuZGVyU2NhbGUpLG5ldyBzLlZlY3RvcjIobi54LG4ueSl9LGUucHJvdG90eXBlLl9jaGVja1VwZGF0ZT1mdW5jdGlvbih0KXtpZighdGhpcy5fbGF5ZXJUb0Rpc3Bvc2V8fDAhPSh0LmxheWVyTWFzayZ0aGlzLl9sYXllclRvRGlzcG9zZS5sYXllck1hc2spKXtpZih0aGlzLl9pc0Z1bGxzY3JlZW4mJnRoaXMuX2xpbmtlZENvbnRyb2xzLmxlbmd0aCl7dmFyIGU9dGhpcy5nZXRTY2VuZSgpO2lmKCFlKXJldHVybjtmb3IodmFyIGk9dGhpcy5fZ2V0R2xvYmFsVmlld3BvcnQoZSkscj0wLG49dGhpcy5fbGlua2VkQ29udHJvbHM7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07aWYoby5pc1Zpc2libGUpe3ZhciBhPW8uX2xpbmtlZE1lc2g7aWYoYSYmIWEuaXNEaXNwb3NlZCgpKXt2YXIgaD1hLmdldEJvdW5kaW5nSW5mbz9hLmdldEJvdW5kaW5nSW5mbygpLmJvdW5kaW5nU3BoZXJlLmNlbnRlcjpzLlZlY3RvcjMuWmVyb1JlYWRPbmx5LGw9cy5WZWN0b3IzLlByb2plY3QoaCxhLmdldFdvcmxkTWF0cml4KCksZS5nZXRUcmFuc2Zvcm1NYXRyaXgoKSxpKTtsLno8MHx8bC56PjE/by5ub3RSZW5kZXJhYmxlPSEwOihvLm5vdFJlbmRlcmFibGU9ITEsbC5zY2FsZUluUGxhY2UodGhpcy5yZW5kZXJTY2FsZSksby5fbW92ZVRvUHJvamVjdGVkUG9zaXRpb24obCkpfWVsc2Ugcy5Ub29scy5TZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtvLmxpbmtXaXRoTWVzaChudWxsKX0pfX19KHRoaXMuX2lzRGlydHl8fHRoaXMuX3Jvb3RDb250YWluZXIuaXNEaXJ0eSkmJih0aGlzLl9pc0RpcnR5PSExLHRoaXMuX3JlbmRlcigpLHRoaXMudXBkYXRlKCEwLHRoaXMucHJlbXVsQWxwaGEpKX19LGUucHJvdG90eXBlLl9yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNpemUoKSxlPXQud2lkdGgsaT10LmhlaWdodCxyPXRoaXMuZ2V0Q29udGV4dCgpO3IuZm9udD1cIjE4cHggQXJpYWxcIixyLnN0cm9rZVN0eWxlPVwid2hpdGVcIix0aGlzLm9uQmVnaW5MYXlvdXRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKTt2YXIgbj1uZXcgXygwLDAsZSxpKTt0aGlzLl9udW1MYXlvdXRDYWxscz0wLHRoaXMuX3Jvb3RDb250YWluZXIuX2xheW91dChuLHIpLHRoaXMub25FbmRMYXlvdXRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0aGlzLl9pc0RpcnR5PSExLHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlP3RoaXMuX2NsZWFyTWVhc3VyZS5jb3B5RnJvbSh0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZSk6dGhpcy5fY2xlYXJNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKDAsMCxlLGkpLHIuY2xlYXJSZWN0KHRoaXMuX2NsZWFyTWVhc3VyZS5sZWZ0LHRoaXMuX2NsZWFyTWVhc3VyZS50b3AsdGhpcy5fY2xlYXJNZWFzdXJlLndpZHRoLHRoaXMuX2NsZWFyTWVhc3VyZS5oZWlnaHQpLHRoaXMuX2JhY2tncm91bmQmJihyLnNhdmUoKSxyLmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHIuZmlsbFJlY3QodGhpcy5fY2xlYXJNZWFzdXJlLmxlZnQsdGhpcy5fY2xlYXJNZWFzdXJlLnRvcCx0aGlzLl9jbGVhck1lYXN1cmUud2lkdGgsdGhpcy5fY2xlYXJNZWFzdXJlLmhlaWdodCksci5yZXN0b3JlKCkpLHRoaXMub25CZWdpblJlbmRlck9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpLHRoaXMuX251bVJlbmRlckNhbGxzPTAsdGhpcy5fcm9vdENvbnRhaW5lci5fcmVuZGVyKHIsdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUpLHRoaXMub25FbmRSZW5kZXJPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZT1udWxsfSxlLnByb3RvdHlwZS5fY2hhbmdlQ3Vyc29yPWZ1bmN0aW9uKHQpe3RoaXMuX3Jvb3RFbGVtZW50JiYodGhpcy5fcm9vdEVsZW1lbnQuc3R5bGUuY3Vyc29yPXQsdGhpcy5fY3Vyc29yQ2hhbmdlZD0hMCl9LGUucHJvdG90eXBlLl9yZWdpc3Rlckxhc3RDb250cm9sRG93bj1mdW5jdGlvbih0LGUpe3RoaXMuX2xhc3RDb250cm9sRG93bltlXT10LHRoaXMub25Db250cm9sUGlja2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCl9LGUucHJvdG90eXBlLl9kb1BpY2tpbmc9ZnVuY3Rpb24odCxlLGkscixuLG8sYSl7dmFyIGg9dGhpcy5nZXRTY2VuZSgpO2lmKGgpe3ZhciBsPWguZ2V0RW5naW5lKCksdT10aGlzLmdldFNpemUoKTtpZih0aGlzLl9pc0Z1bGxzY3JlZW4pe3ZhciBjPShoLmNhbWVyYVRvVXNlRm9yUG9pbnRlcnN8fGguYWN0aXZlQ2FtZXJhKS52aWV3cG9ydDt0Kj11LndpZHRoLyhsLmdldFJlbmRlcldpZHRoKCkqYy53aWR0aCksZSo9dS5oZWlnaHQvKGwuZ2V0UmVuZGVySGVpZ2h0KCkqYy5oZWlnaHQpfXRoaXMuX2NhcHR1cmluZ0NvbnRyb2xbcl0/dGhpcy5fY2FwdHVyaW5nQ29udHJvbFtyXS5fcHJvY2Vzc09ic2VydmFibGVzKGksdCxlLHIsbik6KHRoaXMuX2N1cnNvckNoYW5nZWQ9ITEsdGhpcy5fcm9vdENvbnRhaW5lci5fcHJvY2Vzc1BpY2tpbmcodCxlLGkscixuLG8sYSl8fCh0aGlzLl9jaGFuZ2VDdXJzb3IoXCJcIiksaT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkUmJnRoaXMuX2xhc3RDb250cm9sT3ZlcltyXSYmKHRoaXMuX2xhc3RDb250cm9sT3ZlcltyXS5fb25Qb2ludGVyT3V0KHRoaXMuX2xhc3RDb250cm9sT3ZlcltyXSksZGVsZXRlIHRoaXMuX2xhc3RDb250cm9sT3ZlcltyXSkpLHRoaXMuX2N1cnNvckNoYW5nZWR8fHRoaXMuX2NoYW5nZUN1cnNvcihcIlwiKSx0aGlzLl9tYW5hZ2VGb2N1cygpKX19LGUucHJvdG90eXBlLl9jbGVhbkNvbnRyb2xBZnRlclJlbW92YWxGcm9tTGlzdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiB0KXtpZih0Lmhhc093blByb3BlcnR5KGkpKXRbaV09PT1lJiZkZWxldGUgdFtpXX19LGUucHJvdG90eXBlLl9jbGVhbkNvbnRyb2xBZnRlclJlbW92YWw9ZnVuY3Rpb24odCl7dGhpcy5fY2xlYW5Db250cm9sQWZ0ZXJSZW1vdmFsRnJvbUxpc3QodGhpcy5fbGFzdENvbnRyb2xEb3duLHQpLHRoaXMuX2NsZWFuQ29udHJvbEFmdGVyUmVtb3ZhbEZyb21MaXN0KHRoaXMuX2xhc3RDb250cm9sT3Zlcix0KX0sZS5wcm90b3R5cGUuYXR0YWNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuZ2V0U2NlbmUoKTtpZihlKXt2YXIgaT1uZXcgcy5WaWV3cG9ydCgwLDAsMCwwKTt0aGlzLl9wb2ludGVyTW92ZU9ic2VydmVyPWUub25QcmVQb2ludGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24ocixuKXtpZighZS5pc1BvaW50ZXJDYXB0dXJlZChyLmV2ZW50LnBvaW50ZXJJZCkmJihyLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFfHxyLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJVUHx8ci50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSRE9XTnx8ci50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSV0hFRUwpJiZlKXtyLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFJiZyLmV2ZW50LnBvaW50ZXJJZCYmKHQuX2RlZmF1bHRNb3VzZVBvaW50ZXJJZD1yLmV2ZW50LnBvaW50ZXJJZCk7dmFyIG89ZS5jYW1lcmFUb1VzZUZvclBvaW50ZXJzfHxlLmFjdGl2ZUNhbWVyYSxhPWUuZ2V0RW5naW5lKCk7bz9vLnZpZXdwb3J0LnRvR2xvYmFsVG9SZWYoYS5nZXRSZW5kZXJXaWR0aCgpLGEuZ2V0UmVuZGVySGVpZ2h0KCksaSk6KGkueD0wLGkueT0wLGkud2lkdGg9YS5nZXRSZW5kZXJXaWR0aCgpLGkuaGVpZ2h0PWEuZ2V0UmVuZGVySGVpZ2h0KCkpO3ZhciBoPWUucG9pbnRlclgvYS5nZXRIYXJkd2FyZVNjYWxpbmdMZXZlbCgpLWkueCxsPWUucG9pbnRlclkvYS5nZXRIYXJkd2FyZVNjYWxpbmdMZXZlbCgpLShhLmdldFJlbmRlckhlaWdodCgpLWkueS1pLmhlaWdodCk7dC5fc2hvdWxkQmxvY2tQb2ludGVyPSExO3ZhciB1PXIuZXZlbnQucG9pbnRlcklkfHx0Ll9kZWZhdWx0TW91c2VQb2ludGVySWQ7dC5fZG9QaWNraW5nKGgsbCxyLnR5cGUsdSxyLmV2ZW50LmJ1dHRvbixyLmV2ZW50LmRlbHRhWCxyLmV2ZW50LmRlbHRhWSksdC5fc2hvdWxkQmxvY2tQb2ludGVyJiYoci5za2lwT25Qb2ludGVyT2JzZXJ2YWJsZT10Ll9zaG91bGRCbG9ja1BvaW50ZXIpfX0pLHRoaXMuX2F0dGFjaFRvT25Qb2ludGVyT3V0KGUpfX0sZS5wcm90b3R5cGUucmVnaXN0ZXJDbGlwYm9hcmRFdmVudHM9ZnVuY3Rpb24oKXtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJjb3B5XCIsdGhpcy5vbkNsaXBib2FyZENvcHksITEpLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcImN1dFwiLHRoaXMub25DbGlwYm9hcmRDdXQsITEpLHNlbGYuYWRkRXZlbnRMaXN0ZW5lcihcInBhc3RlXCIsdGhpcy5vbkNsaXBib2FyZFBhc3RlLCExKX0sZS5wcm90b3R5cGUudW5SZWdpc3RlckNsaXBib2FyZEV2ZW50cz1mdW5jdGlvbigpe3NlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvcHlcIix0aGlzLm9uQ2xpcGJvYXJkQ29weSksc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY3V0XCIsdGhpcy5vbkNsaXBib2FyZEN1dCksc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFzdGVcIix0aGlzLm9uQ2xpcGJvYXJkUGFzdGUpfSxlLnByb3RvdHlwZS5hdHRhY2hUb01lc2g9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3ZvaWQgMD09PWUmJihlPSEwKTt2YXIgcj10aGlzLmdldFNjZW5lKCk7ciYmKHRoaXMuX3BvaW50ZXJPYnNlcnZlcj1yLm9uUG9pbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKGUscil7aWYoZS50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSTU9WRXx8ZS50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSVVB8fGUudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUkRPV04pe3ZhciBuPWUuZXZlbnQucG9pbnRlcklkfHxpLl9kZWZhdWx0TW91c2VQb2ludGVySWQ7aWYoZS5waWNrSW5mbyYmZS5waWNrSW5mby5oaXQmJmUucGlja0luZm8ucGlja2VkTWVzaD09PXQpe3ZhciBvPWUucGlja0luZm8uZ2V0VGV4dHVyZUNvb3JkaW5hdGVzKCk7aWYobyl7dmFyIGE9aS5nZXRTaXplKCk7aS5fZG9QaWNraW5nKG8ueCphLndpZHRoLCgxLW8ueSkqYS5oZWlnaHQsZS50eXBlLG4sZS5ldmVudC5idXR0b24pfX1lbHNlIGlmKGUudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUlVQKXtpZihpLl9sYXN0Q29udHJvbERvd25bbl0mJmkuX2xhc3RDb250cm9sRG93bltuXS5fZm9yY2VQb2ludGVyVXAobiksZGVsZXRlIGkuX2xhc3RDb250cm9sRG93bltuXSxpLmZvY3VzZWRDb250cm9sKXt2YXIgaD1pLmZvY3VzZWRDb250cm9sLmtlZXBzRm9jdXNXaXRoKCksbD0hMDtpZihoKWZvcih2YXIgdT0wLGM9aDt1PGMubGVuZ3RoO3UrKyl7dmFyIF89Y1t1XTtpZihpIT09Xy5faG9zdCl7dmFyIGQ9Xy5faG9zdDtpZihkLl9sYXN0Q29udHJvbE92ZXJbbl0mJmQuX2xhc3RDb250cm9sT3ZlcltuXS5pc0FzY2VuZGFudChfKSl7bD0hMTticmVha319fWwmJihpLmZvY3VzZWRDb250cm9sPW51bGwpfX1lbHNlIGUudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkUmJihpLl9sYXN0Q29udHJvbE92ZXJbbl0mJmkuX2xhc3RDb250cm9sT3ZlcltuXS5fb25Qb2ludGVyT3V0KGkuX2xhc3RDb250cm9sT3ZlcltuXSwhMCksZGVsZXRlIGkuX2xhc3RDb250cm9sT3ZlcltuXSl9fSksdC5lbmFibGVQb2ludGVyTW92ZUV2ZW50cz1lLHRoaXMuX2F0dGFjaFRvT25Qb2ludGVyT3V0KHIpKX0sZS5wcm90b3R5cGUubW92ZUZvY3VzVG9Db250cm9sPWZ1bmN0aW9uKHQpe3RoaXMuZm9jdXNlZENvbnRyb2w9dCx0aGlzLl9sYXN0UGlja2VkQ29udHJvbD10LHRoaXMuX2Jsb2NrTmV4dEZvY3VzQ2hlY2s9ITB9LGUucHJvdG90eXBlLl9tYW5hZ2VGb2N1cz1mdW5jdGlvbigpe2lmKHRoaXMuX2Jsb2NrTmV4dEZvY3VzQ2hlY2spcmV0dXJuIHRoaXMuX2Jsb2NrTmV4dEZvY3VzQ2hlY2s9ITEsdm9pZCh0aGlzLl9sYXN0UGlja2VkQ29udHJvbD10aGlzLl9mb2N1c2VkQ29udHJvbCk7aWYodGhpcy5fZm9jdXNlZENvbnRyb2wmJnRoaXMuX2ZvY3VzZWRDb250cm9sIT09dGhpcy5fbGFzdFBpY2tlZENvbnRyb2wpe2lmKHRoaXMuX2xhc3RQaWNrZWRDb250cm9sLmlzRm9jdXNJbnZpc2libGUpcmV0dXJuO3RoaXMuZm9jdXNlZENvbnRyb2w9bnVsbH19LGUucHJvdG90eXBlLl9hdHRhY2hUb09uUG9pbnRlck91dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2NhbnZhc1BvaW50ZXJPdXRPYnNlcnZlcj10LmdldEVuZ2luZSgpLm9uQ2FudmFzUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe2UuX2xhc3RDb250cm9sT3Zlclt0LnBvaW50ZXJJZF0mJmUuX2xhc3RDb250cm9sT3Zlclt0LnBvaW50ZXJJZF0uX29uUG9pbnRlck91dChlLl9sYXN0Q29udHJvbE92ZXJbdC5wb2ludGVySWRdKSxkZWxldGUgZS5fbGFzdENvbnRyb2xPdmVyW3QucG9pbnRlcklkXSxlLl9sYXN0Q29udHJvbERvd25bdC5wb2ludGVySWRdJiZlLl9sYXN0Q29udHJvbERvd25bdC5wb2ludGVySWRdIT09ZS5fY2FwdHVyaW5nQ29udHJvbFt0LnBvaW50ZXJJZF0mJihlLl9sYXN0Q29udHJvbERvd25bdC5wb2ludGVySWRdLl9mb3JjZVBvaW50ZXJVcCgpLGRlbGV0ZSBlLl9sYXN0Q29udHJvbERvd25bdC5wb2ludGVySWRdKX0pfSxlLkNyZWF0ZUZvck1lc2g9ZnVuY3Rpb24odCxpLHIsbixvKXt2b2lkIDA9PT1pJiYoaT0xMDI0KSx2b2lkIDA9PT1yJiYocj0xMDI0KSx2b2lkIDA9PT1uJiYobj0hMCksdm9pZCAwPT09byYmKG89ITEpO3ZhciBhPW5ldyBlKHQubmFtZStcIiBBZHZhbmNlZER5bmFtaWNUZXh0dXJlXCIsaSxyLHQuZ2V0U2NlbmUoKSwhMCxzLlRleHR1cmUuVFJJTElORUFSX1NBTVBMSU5HTU9ERSksaD1uZXcgcy5TdGFuZGFyZE1hdGVyaWFsKFwiQWR2YW5jZWREeW5hbWljVGV4dHVyZU1hdGVyaWFsXCIsdC5nZXRTY2VuZSgpKTtyZXR1cm4gaC5iYWNrRmFjZUN1bGxpbmc9ITEsaC5kaWZmdXNlQ29sb3I9cy5Db2xvcjMuQmxhY2soKSxoLnNwZWN1bGFyQ29sb3I9cy5Db2xvcjMuQmxhY2soKSxvPyhoLmRpZmZ1c2VUZXh0dXJlPWEsaC5lbWlzc2l2ZVRleHR1cmU9YSxhLmhhc0FscGhhPSEwKTooaC5lbWlzc2l2ZVRleHR1cmU9YSxoLm9wYWNpdHlUZXh0dXJlPWEpLHQubWF0ZXJpYWw9aCxhLmF0dGFjaFRvTWVzaCh0LG4pLGF9LGUuQ3JlYXRlRnVsbHNjcmVlblVJPWZ1bmN0aW9uKHQsaSxyLG4pe3ZvaWQgMD09PWkmJihpPSEwKSx2b2lkIDA9PT1yJiYocj1udWxsKSx2b2lkIDA9PT1uJiYobj1zLlRleHR1cmUuQklMSU5FQVJfU0FNUExJTkdNT0RFKTt2YXIgbz1uZXcgZSh0LDAsMCxyLCExLG4pLGE9bmV3IHMuTGF5ZXIodCtcIl9sYXllclwiLG51bGwsciwhaSk7cmV0dXJuIGEudGV4dHVyZT1vLG8uX2xheWVyVG9EaXNwb3NlPWEsby5faXNGdWxsc2NyZWVuPSEwLG8uYXR0YWNoKCksb30sZX0ocy5EeW5hbWljVGV4dHVyZSksWj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy50ZXh0dXJlPXQsdGhpcy5fY2FwdHVyZVJlbmRlclRpbWU9ITEsdGhpcy5fcmVuZGVyVGltZT1uZXcgcy5QZXJmQ291bnRlcix0aGlzLl9jYXB0dXJlTGF5b3V0VGltZT0hMSx0aGlzLl9sYXlvdXRUaW1lPW5ldyBzLlBlcmZDb3VudGVyLHRoaXMuX29uQmVnaW5SZW5kZXJPYnNlcnZlcj1udWxsLHRoaXMuX29uRW5kUmVuZGVyT2JzZXJ2ZXI9bnVsbCx0aGlzLl9vbkJlZ2luTGF5b3V0T2JzZXJ2ZXI9bnVsbCx0aGlzLl9vbkVuZExheW91dE9ic2VydmVyPW51bGx9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInJlbmRlclRpbWVDb3VudGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJUaW1lfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxheW91dFRpbWVDb3VudGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXlvdXRUaW1lfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNhcHR1cmVSZW5kZXJUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXB0dXJlUmVuZGVyVGltZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dCE9PXRoaXMuX2NhcHR1cmVSZW5kZXJUaW1lJiYodGhpcy5fY2FwdHVyZVJlbmRlclRpbWU9dCx0Pyh0aGlzLl9vbkJlZ2luUmVuZGVyT2JzZXJ2ZXI9dGhpcy50ZXh0dXJlLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX3JlbmRlclRpbWUuYmVnaW5Nb25pdG9yaW5nKCl9KSx0aGlzLl9vbkVuZFJlbmRlck9ic2VydmVyPXRoaXMudGV4dHVyZS5vbkVuZFJlbmRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ZS5fcmVuZGVyVGltZS5lbmRNb25pdG9yaW5nKCEwKX0pKToodGhpcy50ZXh0dXJlLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkJlZ2luUmVuZGVyT2JzZXJ2ZXIpLHRoaXMuX29uQmVnaW5SZW5kZXJPYnNlcnZlcj1udWxsLHRoaXMudGV4dHVyZS5vbkVuZFJlbmRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uRW5kUmVuZGVyT2JzZXJ2ZXIpLHRoaXMuX29uRW5kUmVuZGVyT2JzZXJ2ZXI9bnVsbCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNhcHR1cmVMYXlvdXRUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXB0dXJlTGF5b3V0VGltZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dCE9PXRoaXMuX2NhcHR1cmVMYXlvdXRUaW1lJiYodGhpcy5fY2FwdHVyZUxheW91dFRpbWU9dCx0Pyh0aGlzLl9vbkJlZ2luTGF5b3V0T2JzZXJ2ZXI9dGhpcy50ZXh0dXJlLm9uQmVnaW5MYXlvdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX2xheW91dFRpbWUuYmVnaW5Nb25pdG9yaW5nKCl9KSx0aGlzLl9vbkVuZExheW91dE9ic2VydmVyPXRoaXMudGV4dHVyZS5vbkVuZExheW91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ZS5fbGF5b3V0VGltZS5lbmRNb25pdG9yaW5nKCEwKX0pKToodGhpcy50ZXh0dXJlLm9uQmVnaW5MYXlvdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkJlZ2luTGF5b3V0T2JzZXJ2ZXIpLHRoaXMuX29uQmVnaW5MYXlvdXRPYnNlcnZlcj1udWxsLHRoaXMudGV4dHVyZS5vbkVuZExheW91dE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uRW5kTGF5b3V0T2JzZXJ2ZXIpLHRoaXMuX29uRW5kTGF5b3V0T2JzZXJ2ZXI9bnVsbCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLnRleHR1cmUub25CZWdpblJlbmRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uQmVnaW5SZW5kZXJPYnNlcnZlciksdGhpcy5fb25CZWdpblJlbmRlck9ic2VydmVyPW51bGwsdGhpcy50ZXh0dXJlLm9uRW5kUmVuZGVyT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25FbmRSZW5kZXJPYnNlcnZlciksdGhpcy5fb25FbmRSZW5kZXJPYnNlcnZlcj1udWxsLHRoaXMudGV4dHVyZS5vbkJlZ2luTGF5b3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25CZWdpbkxheW91dE9ic2VydmVyKSx0aGlzLl9vbkJlZ2luTGF5b3V0T2JzZXJ2ZXI9bnVsbCx0aGlzLnRleHR1cmUub25FbmRMYXlvdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkVuZExheW91dE9ic2VydmVyKSx0aGlzLl9vbkVuZExheW91dE9ic2VydmVyPW51bGwsdGhpcy50ZXh0dXJlPW51bGx9LHR9KCksSj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dm9pZCAwPT09dCYmKHQ9bnVsbCksdGhpcy5fbm9kZXM9e30sdGhpcy5fbm9kZVR5cGVzPXtlbGVtZW50OjEsYXR0cmlidXRlOjIsdGV4dDozfSx0aGlzLl9pc0xvYWRlZD0hMSx0aGlzLl9vYmplY3RBdHRyaWJ1dGVzPXt0ZXh0SG9yaXpvbnRhbEFsaWdubWVudDoxLHRleHRWZXJ0aWNhbEFsaWdubWVudDoyLGhvcml6b250YWxBbGlnbm1lbnQ6Myx2ZXJ0aWNhbEFsaWdubWVudDo0LHN0cmV0Y2g6NX0sdCYmKHRoaXMuX3BhcmVudENsYXNzPXQpfXJldHVybiB0LnByb3RvdHlwZS5fZ2V0Q2hhaW5FbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXdpbmRvdzt0aGlzLl9wYXJlbnRDbGFzcyYmKGU9dGhpcy5fcGFyZW50Q2xhc3MpO3ZhciBpPXQ7aT1pLnNwbGl0KFwiLlwiKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyllPWVbaVtyXV07cmV0dXJuIGV9LHQucHJvdG90eXBlLl9nZXRDbGFzc0F0dHJpYnV0ZT1mdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiLlwiKTtyZXR1cm4gcy5fVHlwZVN0b3JlLkdldENsYXNzKFwiQkFCWUxPTi5HVUkuXCIrZVswXSlbZVsxXV19LHQucHJvdG90eXBlLl9jcmVhdGVHdWlFbGVtZW50PWZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT1pJiYoaT0hMCk7dHJ5e3ZhciByPW5ldyhzLl9UeXBlU3RvcmUuR2V0Q2xhc3MoXCJCQUJZTE9OLkdVSS5cIit0Lm5vZGVOYW1lKSk7ZSYmaSYmZS5hZGRDb250cm9sKHIpO2Zvcih2YXIgbj0wO248dC5hdHRyaWJ1dGVzLmxlbmd0aDtuKyspaWYoIXQuYXR0cmlidXRlc1tuXS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJkYXRhc291cmNlXCIpKWlmKHQuYXR0cmlidXRlc1tuXS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJvYnNlcnZhYmxlXCIpKXt2YXIgbz10aGlzLl9nZXRDaGFpbkVsZW1lbnQodC5hdHRyaWJ1dGVzW25dLnZhbHVlKTtyW3QuYXR0cmlidXRlc1tuXS5uYW1lXS5hZGQobyl9ZWxzZSBpZihcImxpbmtXaXRoTWVzaFwiPT10LmF0dHJpYnV0ZXNbbl0ubmFtZSl0aGlzLl9wYXJlbnRDbGFzcz9yLmxpbmtXaXRoTWVzaCh0aGlzLl9wYXJlbnRDbGFzc1t0LmF0dHJpYnV0ZXNbbl0udmFsdWVdKTpyLmxpbmtXaXRoTWVzaCh3aW5kb3dbdC5hdHRyaWJ1dGVzW25dLnZhbHVlXSk7ZWxzZSBpZih0LmF0dHJpYnV0ZXNbbl0udmFsdWUuc3RhcnRzV2l0aChcInt7XCIpJiZ0LmF0dHJpYnV0ZXNbbl0udmFsdWUuZW5kc1dpdGgoXCJ9fVwiKSl7bz10aGlzLl9nZXRDaGFpbkVsZW1lbnQodC5hdHRyaWJ1dGVzW25dLnZhbHVlLnN1YnN0cmluZygyLHQuYXR0cmlidXRlc1tuXS52YWx1ZS5sZW5ndGgtMikpO3JbdC5hdHRyaWJ1dGVzW25dLm5hbWVdPW99ZWxzZSB0aGlzLl9vYmplY3RBdHRyaWJ1dGVzW3QuYXR0cmlidXRlc1tuXS5uYW1lXT9yW3QuYXR0cmlidXRlc1tuXS5uYW1lXT10aGlzLl9nZXRDbGFzc0F0dHJpYnV0ZSh0LmF0dHJpYnV0ZXNbbl0udmFsdWUpOlwidHJ1ZVwiPT10LmF0dHJpYnV0ZXNbbl0udmFsdWV8fFwiZmFsc2VcIj09dC5hdHRyaWJ1dGVzW25dLnZhbHVlP3JbdC5hdHRyaWJ1dGVzW25dLm5hbWVdPVwidHJ1ZVwiPT10LmF0dHJpYnV0ZXNbbl0udmFsdWU6clt0LmF0dHJpYnV0ZXNbbl0ubmFtZV09aXNOYU4oTnVtYmVyKHQuYXR0cmlidXRlc1tuXS52YWx1ZSkpP3QuYXR0cmlidXRlc1tuXS52YWx1ZTpOdW1iZXIodC5hdHRyaWJ1dGVzW25dLnZhbHVlKTtpZighdC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImlkXCIpKXJldHVybiB0aGlzLl9ub2Rlc1t0Lm5vZGVOYW1lK09iamVjdC5rZXlzKHRoaXMuX25vZGVzKS5sZW5ndGgrXCJfZ2VuXCJdPXIscjt2YXIgYT10LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaWRcIikudmFsdWU7aWYoYS5zdGFydHNXaXRoKFwie3tcIikmJmEuZW5kc1dpdGgoXCJ9fVwiKSYmKGE9dGhpcy5fZ2V0Q2hhaW5FbGVtZW50KGEuc3Vic3RyaW5nKDIsYS5sZW5ndGgtMikpKSx0aGlzLl9ub2Rlc1thXSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IER1cGxpY2F0ZSBJRCwgZXZlcnkgZWxlbWVudCBzaG91bGQgaGF2ZSBhbiB1bmlxdWUgSUQgYXR0cmlidXRlXCI7cmV0dXJuIHRoaXMuX25vZGVzW2FdPXIscn1jYXRjaChlKXt0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IEVycm9yIHBhcnNpbmcgQ29udHJvbCBcIit0Lm5vZGVOYW1lK1wiLFwiK2UrXCIuXCJ9fSx0LnByb3RvdHlwZS5fcGFyc2VHcmlkPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHIsbixvLHMsYSxoPXQuY2hpbGRyZW4sbD0hMSx1PS0xLGM9LTEsXz0wLGQ9MDtkPGgubGVuZ3RoO2QrKylpZihoW2RdLm5vZGVUeXBlPT10aGlzLl9ub2RlVHlwZXMuZWxlbWVudCl7aWYoXCJSb3dcIiE9aFtkXS5ub2RlTmFtZSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IEV4cGVjdGluZyBSb3cgbm9kZSwgcmVjZWl2ZWQgXCIraFtkXS5ub2RlTmFtZTtpZih1Kz0xLG89aFtkXS5jaGlsZHJlbiwhaFtkXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImhlaWdodFwiKSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IEhlaWdodCBtdXN0IGJlIGRlZmluZWQgZm9yIGdyaWQgcm93c1wiO249TnVtYmVyKGhbZF0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJoZWlnaHRcIikubm9kZVZhbHVlKSxsPSEhaFtkXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImlzUGl4ZWxcIikmJkpTT04ucGFyc2UoaFtkXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImlzUGl4ZWxcIikubm9kZVZhbHVlKSxlLmFkZFJvd0RlZmluaXRpb24obixsKTtmb3IodmFyIGY9MDtmPG8ubGVuZ3RoO2YrKylpZihvW2ZdLm5vZGVUeXBlPT10aGlzLl9ub2RlVHlwZXMuZWxlbWVudCl7aWYoXCJDb2x1bW5cIiE9b1tmXS5ub2RlTmFtZSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IEV4cGVjdGluZyBDb2x1bW4gbm9kZSwgcmVjZWl2ZWQgXCIrb1tmXS5ub2RlTmFtZTtpZihjKz0xLHU+MCYmYz5fKXRocm93XCJYbWxMb2FkZXIgRXhjZXB0aW9uIDogSW4gdGhlIEdyaWQgZWxlbWVudCwgdGhlIG51bWJlciBvZiBjb2x1bW5zIGlzIGRlZmluZWQgaW4gdGhlIGZpcnN0IHJvdywgZG8gbm90IGFkZCBtb3JlIGNvbHVtbnMgaW4gdGhlIHN1YnNlcXVlbnQgcm93cy5cIjtpZigwPT11KXtpZighb1tmXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcIndpZHRoXCIpKXRocm93XCJYbWxMb2FkZXIgRXhjZXB0aW9uIDogV2lkdGggbXVzdCBiZSBkZWZpbmVkIGZvciBhbGwgdGhlIGdyaWQgY29sdW1ucyBpbiB0aGUgZmlyc3Qgcm93XCI7cj1OdW1iZXIob1tmXS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcIndpZHRoXCIpLm5vZGVWYWx1ZSksbD0hIW9bZl0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpc1BpeGVsXCIpJiZKU09OLnBhcnNlKG9bZl0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpc1BpeGVsXCIpLm5vZGVWYWx1ZSksZS5hZGRDb2x1bW5EZWZpbml0aW9uKHIsbCl9cz1vW2ZdLmNoaWxkcmVuO2Zvcih2YXIgcD0wO3A8cy5sZW5ndGg7cCsrKXNbcF0ubm9kZVR5cGU9PXRoaXMuX25vZGVUeXBlcy5lbGVtZW50JiYoYT10aGlzLl9jcmVhdGVHdWlFbGVtZW50KHNbcF0sZSwhMSksZS5hZGRDb250cm9sKGEsdSxjKSxzW3BdLmZpcnN0Q2hpbGQmJnRoaXMuX3BhcnNlWG1sKHNbcF0uZmlyc3RDaGlsZCxhKSl9MD09dSYmKF89YyksYz0tMX10Lm5leHRTaWJsaW5nJiZ0aGlzLl9wYXJzZVhtbCh0Lm5leHRTaWJsaW5nLGkpfSx0LnByb3RvdHlwZS5fcGFyc2VFbGVtZW50PWZ1bmN0aW9uKHQsZSxpKXt0LmZpcnN0Q2hpbGQmJnRoaXMuX3BhcnNlWG1sKHQuZmlyc3RDaGlsZCxlKSx0Lm5leHRTaWJsaW5nJiZ0aGlzLl9wYXJzZVhtbCh0Lm5leHRTaWJsaW5nLGkpfSx0LnByb3RvdHlwZS5fcHJlcGFyZVNvdXJjZUVsZW1lbnQ9ZnVuY3Rpb24odCxlLGkscixuKXt0aGlzLl9wYXJlbnRDbGFzcz90aGlzLl9wYXJlbnRDbGFzc1tpXT1yW25dOndpbmRvd1tpXT1yW25dLHQuZmlyc3RDaGlsZCYmdGhpcy5fcGFyc2VYbWwodC5maXJzdENoaWxkLGUsITApfSx0LnByb3RvdHlwZS5fcGFyc2VFbGVtZW50c0Zyb21Tb3VyY2U9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJkYXRhU291cmNlXCIpLnZhbHVlO2lmKCFyLmluY2x1ZGVzKFwiIGluIFwiKSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IE1hbGZvcm1lZCBYTUwsIERhdGEgU291cmNlIG11c3QgaW5jbHVkZSBhbiBpblwiO3ZhciBuPSEwLG89ci5zcGxpdChcIiBpbiBcIik7aWYoby5sZW5ndGg8Mil0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IE1hbGZvcm1lZCBYTUwsIERhdGEgU291cmNlIG11c3QgYW4gaXRlcmF0b3IgYW5kIGEgc291cmNlXCI7dmFyIHM9b1sxXTtpZihzLnN0YXJ0c1dpdGgoXCJ7XCIpJiZzLmVuZHNXaXRoKFwifVwiKSYmKG49ITEpLCghbnx8cy5zdGFydHNXaXRoKFwiW1wiKSYmcy5lbmRzV2l0aChcIl1cIikpJiYocz1zLnN1YnN0cmluZygxLHMubGVuZ3RoLTEpKSxzPXRoaXMuX3BhcmVudENsYXNzP3RoaXMuX3BhcmVudENsYXNzW3NdOndpbmRvd1tzXSxuKWZvcih2YXIgYT0wO2E8cy5sZW5ndGg7YSsrKXRoaXMuX3ByZXBhcmVTb3VyY2VFbGVtZW50KHQsZSxvWzBdLHMsYSk7ZWxzZSBmb3IodmFyIGEgaW4gcyl0aGlzLl9wcmVwYXJlU291cmNlRWxlbWVudCh0LGUsb1swXSxzLGEpO3QubmV4dFNpYmxpbmcmJnRoaXMuX3BhcnNlWG1sKHQubmV4dFNpYmxpbmcsaSl9LHQucHJvdG90eXBlLl9wYXJzZVhtbD1mdW5jdGlvbih0LGUsaSl7aWYodm9pZCAwPT09aSYmKGk9ITEpLHQubm9kZVR5cGU9PXRoaXMuX25vZGVUeXBlcy5lbGVtZW50KXtpJiZ0LnNldEF0dHJpYnV0ZShcImlkXCIsZS5pZCsoZS5fY2hpbGRyZW4ubGVuZ3RoKzEpKTt2YXIgcj10aGlzLl9jcmVhdGVHdWlFbGVtZW50KHQsZSk7XCJHcmlkXCI9PXQubm9kZU5hbWU/dGhpcy5fcGFyc2VHcmlkKHQscixlKTp0LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZGF0YVNvdXJjZVwiKT90aGlzLl9wYXJzZUVsZW1lbnRzRnJvbVNvdXJjZSh0LHIsZSk6dGhpcy5fcGFyc2VFbGVtZW50KHQscixlKX1lbHNlIHQubmV4dFNpYmxpbmcmJnRoaXMuX3BhcnNlWG1sKHQubmV4dFNpYmxpbmcsZSxpKX0sdC5wcm90b3R5cGUuaXNMb2FkZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNMb2FkZWR9LHQucHJvdG90eXBlLmdldE5vZGVCeUlkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ub2Rlc1t0XX0sdC5wcm90b3R5cGUuZ2V0Tm9kZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZXN9LHQucHJvdG90eXBlLmxvYWRMYXlvdXQ9ZnVuY3Rpb24odCxlLGkpe3ZhciByPW5ldyBYTUxIdHRwUmVxdWVzdDtyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PXIucmVhZHlTdGF0ZSYmMjAwPT1yLnN0YXR1cyl7aWYoIXIucmVzcG9uc2VYTUwpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBYTUwgZmlsZSBpcyBtYWxmb3JtZWQgb3IgY29ycnVwdGVkLlwiO3ZhciB0PXIucmVzcG9uc2VYTUwuZG9jdW1lbnRFbGVtZW50O3RoaXMuX3BhcnNlWG1sKHQuZmlyc3RDaGlsZCxlKSx0aGlzLl9pc0xvYWRlZD0hMCxpJiZpKCl9fS5iaW5kKHRoaXMpLHIub3BlbihcIkdFVFwiLHQsITApLHIuc2VuZCgpfSx0fSgpLFE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPTApO3ZhciByPXQuY2FsbCh0aGlzLGUueCxlLnksZS56KXx8dGhpcztyZXR1cm4gci5idXR0b25JbmRleD1pLHJ9cmV0dXJuIG4oZSx0KSxlfShzLlZlY3RvcjMpLCQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMubmFtZT10LHRoaXMuX2Rvd25Db3VudD0wLHRoaXMuX2VudGVyQ291bnQ9LTEsdGhpcy5fZG93blBvaW50ZXJJZHM9e30sdGhpcy5faXNWaXNpYmxlPSEwLHRoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckRvd25PYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJVcE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5fYmVoYXZpb3JzPW5ldyBBcnJheX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicG9zaXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGU/dGhpcy5fbm9kZS5wb3NpdGlvbjpzLlZlY3RvcjMuWmVybygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbm9kZSYmKHRoaXMuX25vZGUucG9zaXRpb249dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2NhbGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZT90aGlzLl9ub2RlLnNjYWxpbmc6bmV3IHMuVmVjdG9yMygxLDEsMSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ub2RlJiYodGhpcy5fbm9kZS5zY2FsaW5nPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImJlaGF2aW9yc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmVoYXZpb3JzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmFkZEJlaGF2aW9yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoLTEhPT10aGlzLl9iZWhhdmlvcnMuaW5kZXhPZih0KSlyZXR1cm4gdGhpczt0LmluaXQoKTt2YXIgaT10aGlzLl9ob3N0LnNjZW5lO3JldHVybiBpLmlzTG9hZGluZz9pLm9uRGF0YUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3QuYXR0YWNoKGUpfSk6dC5hdHRhY2godGhpcyksdGhpcy5fYmVoYXZpb3JzLnB1c2godCksdGhpc30sdC5wcm90b3R5cGUucmVtb3ZlQmVoYXZpb3I9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYmVoYXZpb3JzLmluZGV4T2YodCk7cmV0dXJuLTE9PT1lP3RoaXM6KHRoaXMuX2JlaGF2aW9yc1tlXS5kZXRhY2goKSx0aGlzLl9iZWhhdmlvcnMuc3BsaWNlKGUsMSksdGhpcyl9LHQucHJvdG90eXBlLmdldEJlaGF2aW9yQnlOYW1lPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9dGhpcy5fYmVoYXZpb3JzO2U8aS5sZW5ndGg7ZSsrKXt2YXIgcj1pW2VdO2lmKHIubmFtZT09PXQpcmV0dXJuIHJ9cmV0dXJuIG51bGx9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzVmlzaWJsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpYmxlfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5faXNWaXNpYmxlIT09dCl7dGhpcy5faXNWaXNpYmxlPXQ7dmFyIGU9dGhpcy5tZXNoO2UmJmUuc2V0RW5hYmxlZCh0KX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidHlwZU5hbWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFR5cGVOYW1lKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFR5cGVOYW1lKCl9LHQucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQ29udHJvbDNEXCJ9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm5vZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibWVzaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9kZSBpbnN0YW5jZW9mIHMuQWJzdHJhY3RNZXNoP3RoaXMuX25vZGU6bnVsbH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5saW5rVG9UcmFuc2Zvcm1Ob2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ub2RlJiYodGhpcy5fbm9kZS5wYXJlbnQ9dCksdGhpc30sdC5wcm90b3R5cGUuX3ByZXBhcmVOb2RlPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9ub2RlKXtpZih0aGlzLl9ub2RlPXRoaXMuX2NyZWF0ZU5vZGUodCksIXRoaXMubm9kZSlyZXR1cm47dGhpcy5fbm9kZS5tZXRhZGF0YT10aGlzLHRoaXMuX25vZGUucG9zaXRpb249dGhpcy5wb3NpdGlvbix0aGlzLl9ub2RlLnNjYWxpbmc9dGhpcy5zY2FsaW5nO3ZhciBlPXRoaXMubWVzaDtlJiYoZS5pc1BpY2thYmxlPSEwLHRoaXMuX2FmZmVjdE1hdGVyaWFsKGUpKX19LHQucHJvdG90eXBlLl9jcmVhdGVOb2RlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSx0LnByb3RvdHlwZS5fYWZmZWN0TWF0ZXJpYWw9ZnVuY3Rpb24odCl7dC5tYXRlcmlhbD1udWxsfSx0LnByb3RvdHlwZS5fb25Qb2ludGVyTW92ZT1mdW5jdGlvbih0LGUpe3RoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKGUsLTEsdCx0aGlzKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlckVudGVyPWZ1bmN0aW9uKHQpe3JldHVybiEodGhpcy5fZW50ZXJDb3VudD4wKSYmKC0xPT09dGhpcy5fZW50ZXJDb3VudCYmKHRoaXMuX2VudGVyQ291bnQ9MCksdGhpcy5fZW50ZXJDb3VudCsrLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzLC0xLHQsdGhpcyksdGhpcy5wb2ludGVyRW50ZXJBbmltYXRpb24mJnRoaXMucG9pbnRlckVudGVyQW5pbWF0aW9uKCksITApfSx0LnByb3RvdHlwZS5fb25Qb2ludGVyT3V0PWZ1bmN0aW9uKHQpe3RoaXMuX2VudGVyQ291bnQ9MCx0aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMsLTEsdCx0aGlzKSx0aGlzLnBvaW50ZXJPdXRBbmltYXRpb24mJnRoaXMucG9pbnRlck91dEFuaW1hdGlvbigpfSx0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gMCE9PXRoaXMuX2Rvd25Db3VudD8odGhpcy5fZG93bkNvdW50KyssITEpOih0aGlzLl9kb3duQ291bnQrKyx0aGlzLl9kb3duUG9pbnRlcklkc1tpXT0hMCx0aGlzLm9uUG9pbnRlckRvd25PYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuZXcgUShlLHIpLC0xLHQsdGhpcyksdGhpcy5wb2ludGVyRG93bkFuaW1hdGlvbiYmdGhpcy5wb2ludGVyRG93bkFuaW1hdGlvbigpLCEwKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKHQsZSxpLHIsbil7dGhpcy5fZG93bkNvdW50LS0sZGVsZXRlIHRoaXMuX2Rvd25Qb2ludGVySWRzW2ldLHRoaXMuX2Rvd25Db3VudDwwP3RoaXMuX2Rvd25Db3VudD0wOjA9PXRoaXMuX2Rvd25Db3VudCYmKG4mJih0aGlzLl9lbnRlckNvdW50PjB8fC0xPT09dGhpcy5fZW50ZXJDb3VudCkmJnRoaXMub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuZXcgUShlLHIpLC0xLHQsdGhpcyksdGhpcy5vblBvaW50ZXJVcE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKG5ldyBRKGUsciksLTEsdCx0aGlzKSx0aGlzLnBvaW50ZXJVcEFuaW1hdGlvbiYmdGhpcy5wb2ludGVyVXBBbmltYXRpb24oKSl9LHQucHJvdG90eXBlLmZvcmNlUG9pbnRlclVwPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQmJih0PW51bGwpLG51bGwhPT10KXRoaXMuX29uUG9pbnRlclVwKHRoaXMscy5WZWN0b3IzLlplcm8oKSx0LDAsITApO2Vsc2V7Zm9yKHZhciBlIGluIHRoaXMuX2Rvd25Qb2ludGVySWRzKXRoaXMuX29uUG9pbnRlclVwKHRoaXMscy5WZWN0b3IzLlplcm8oKSwrZSwwLCEwKTt0aGlzLl9kb3duQ291bnQ+MCYmKHRoaXMuX2Rvd25Db3VudD0xLHRoaXMuX29uUG9pbnRlclVwKHRoaXMscy5WZWN0b3IzLlplcm8oKSwwLDAsITApKX19LHQucHJvdG90eXBlLl9wcm9jZXNzT2JzZXJ2YWJsZXM9ZnVuY3Rpb24odCxlLGkscil7aWYodD09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkUpe3RoaXMuX29uUG9pbnRlck1vdmUodGhpcyxlKTt2YXIgbj10aGlzLl9ob3N0Ll9sYXN0Q29udHJvbE92ZXJbaV07cmV0dXJuIG4mJm4hPT10aGlzJiZuLl9vblBvaW50ZXJPdXQodGhpcyksbiE9PXRoaXMmJnRoaXMuX29uUG9pbnRlckVudGVyKHRoaXMpLHRoaXMuX2hvc3QuX2xhc3RDb250cm9sT3ZlcltpXT10aGlzLCEwfXJldHVybiB0PT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSRE9XTj8odGhpcy5fb25Qb2ludGVyRG93bih0aGlzLGUsaSxyKSx0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25baV09dGhpcyx0aGlzLl9ob3N0Ll9sYXN0UGlja2VkQ29udHJvbD10aGlzLCEwKTp0PT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSVVAmJih0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25baV0mJnRoaXMuX2hvc3QuX2xhc3RDb250cm9sRG93bltpXS5fb25Qb2ludGVyVXAodGhpcyxlLGksciwhMCksZGVsZXRlIHRoaXMuX2hvc3QuX2xhc3RDb250cm9sRG93bltpXSwhMCl9LHQucHJvdG90eXBlLl9kaXNwb3NlTm9kZT1mdW5jdGlvbigpe3RoaXMuX25vZGUmJih0aGlzLl9ub2RlLmRpc3Bvc2UoKSx0aGlzLl9ub2RlPW51bGwpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblBvaW50ZXJNb3ZlT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblBvaW50ZXJDbGlja09ic2VydmFibGUuY2xlYXIoKSx0aGlzLl9kaXNwb3NlTm9kZSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5fYmVoYXZpb3JzO3Q8ZS5sZW5ndGg7dCsrKXtlW3RdLmRldGFjaCgpfX0sdH0oKSx0dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3JldHVybiB0LmNhbGwodGhpcyxlKXx8dGhpc31yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQWJzdHJhY3RCdXR0b24zRFwifSxlLnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHMuVHJhbnNmb3JtTm9kZShcImJ1dHRvblwiK3RoaXMubmFtZSl9LGV9KCQpLGV0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkuX2NvbnRlbnRSZXNvbHV0aW9uPTUxMixpLl9jb250ZW50U2NhbGVSYXRpbz0yLGkucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5tZXNoJiYoaS5fY3VycmVudE1hdGVyaWFsLmVtaXNzaXZlQ29sb3I9cy5Db2xvcjMuUmVkKCkpfSxpLnBvaW50ZXJPdXRBbmltYXRpb249ZnVuY3Rpb24oKXtpLl9jdXJyZW50TWF0ZXJpYWwuZW1pc3NpdmVDb2xvcj1zLkNvbG9yMy5CbGFjaygpfSxpLnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5tZXNoJiZpLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoLjk1KX0saS5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtpLm1lc2gmJmkubWVzaC5zY2FsaW5nLnNjYWxlSW5QbGFjZSgxLy45NSl9LGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb250ZW50UmVzb2x1dGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudFJlc29sdXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb250ZW50UmVzb2x1dGlvbiE9PXQmJih0aGlzLl9jb250ZW50UmVzb2x1dGlvbj10LHRoaXMuX3Jlc2V0Q29udGVudCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb250ZW50U2NhbGVSYXRpb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudFNjYWxlUmF0aW99LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb250ZW50U2NhbGVSYXRpbyE9PXQmJih0aGlzLl9jb250ZW50U2NhbGVSYXRpbz10LHRoaXMuX3Jlc2V0Q29udGVudCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZGlzcG9zZUZhY2FkZVRleHR1cmU9ZnVuY3Rpb24oKXt0aGlzLl9mYWNhZGVUZXh0dXJlJiYodGhpcy5fZmFjYWRlVGV4dHVyZS5kaXNwb3NlKCksdGhpcy5fZmFjYWRlVGV4dHVyZT1udWxsKX0sZS5wcm90b3R5cGUuX3Jlc2V0Q29udGVudD1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2VGYWNhZGVUZXh0dXJlKCksdGhpcy5jb250ZW50PXRoaXMuX2NvbnRlbnR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbnRlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb250ZW50PXQsdGhpcy5faG9zdCYmdGhpcy5faG9zdC51dGlsaXR5TGF5ZXImJih0aGlzLl9mYWNhZGVUZXh0dXJlP3RoaXMuX2ZhY2FkZVRleHR1cmUucm9vdENvbnRhaW5lci5jbGVhckNvbnRyb2xzKCk6KHRoaXMuX2ZhY2FkZVRleHR1cmU9bmV3IEsoXCJGYWNhZGVcIix0aGlzLl9jb250ZW50UmVzb2x1dGlvbix0aGlzLl9jb250ZW50UmVzb2x1dGlvbix0aGlzLl9ob3N0LnV0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZSwhMCxzLlRleHR1cmUuVFJJTElORUFSX1NBTVBMSU5HTU9ERSksdGhpcy5fZmFjYWRlVGV4dHVyZS5yb290Q29udGFpbmVyLnNjYWxlWD10aGlzLl9jb250ZW50U2NhbGVSYXRpbyx0aGlzLl9mYWNhZGVUZXh0dXJlLnJvb3RDb250YWluZXIuc2NhbGVZPXRoaXMuX2NvbnRlbnRTY2FsZVJhdGlvLHRoaXMuX2ZhY2FkZVRleHR1cmUucHJlbXVsQWxwaGE9ITApLHRoaXMuX2ZhY2FkZVRleHR1cmUuYWRkQ29udHJvbCh0KSx0aGlzLl9hcHBseUZhY2FkZSh0aGlzLl9mYWNhZGVUZXh0dXJlKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2FwcGx5RmFjYWRlPWZ1bmN0aW9uKHQpe3RoaXMuX2N1cnJlbnRNYXRlcmlhbC5lbWlzc2l2ZVRleHR1cmU9dH0sZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJCdXR0b24zRFwifSxlLnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEFycmF5KDYpLGk9MDtpPDY7aSsrKWVbaV09bmV3IHMuVmVjdG9yNCgwLDAsMCwwKTtyZXR1cm4gZVsxXT1uZXcgcy5WZWN0b3I0KDAsMCwxLDEpLHMuQm94QnVpbGRlci5DcmVhdGVCb3godGhpcy5uYW1lK1wiX3Jvb3RNZXNoXCIse3dpZHRoOjEsaGVpZ2h0OjEsZGVwdGg6LjA4LGZhY2VVVjplfSx0KX0sZS5wcm90b3R5cGUuX2FmZmVjdE1hdGVyaWFsPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBzLlN0YW5kYXJkTWF0ZXJpYWwodGhpcy5uYW1lK1wiTWF0ZXJpYWxcIix0LmdldFNjZW5lKCkpO2Uuc3BlY3VsYXJDb2xvcj1zLkNvbG9yMy5CbGFjaygpLHQubWF0ZXJpYWw9ZSx0aGlzLl9jdXJyZW50TWF0ZXJpYWw9ZSx0aGlzLl9yZXNldENvbnRlbnQoKX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kaXNwb3NlRmFjYWRlVGV4dHVyZSgpLHRoaXMuX2N1cnJlbnRNYXRlcmlhbCYmdGhpcy5fY3VycmVudE1hdGVyaWFsLmRpc3Bvc2UoKX0sZX0odHQpLGl0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkuX2Jsb2NrTGF5b3V0PSExLGkuX2NoaWxkcmVuPW5ldyBBcnJheSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hpbGRyZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVufSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJsb2NrTGF5b3V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ibG9ja0xheW91dH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Jsb2NrTGF5b3V0IT09dCYmKHRoaXMuX2Jsb2NrTGF5b3V0PXQsdGhpcy5fYmxvY2tMYXlvdXR8fHRoaXMuX2FycmFuZ2VDaGlsZHJlbigpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS51cGRhdGVMYXlvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJyYW5nZUNoaWxkcmVuKCksdGhpc30sZS5wcm90b3R5cGUuY29udGFpbnNDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybi0xIT09dGhpcy5fY2hpbGRyZW4uaW5kZXhPZih0KX0sZS5wcm90b3R5cGUuYWRkQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PXRoaXMuX2NoaWxkcmVuLmluZGV4T2YodCk/dGhpczoodC5wYXJlbnQ9dGhpcyx0Ll9ob3N0PXRoaXMuX2hvc3QsdGhpcy5fY2hpbGRyZW4ucHVzaCh0KSx0aGlzLl9ob3N0LnV0aWxpdHlMYXllciYmKHQuX3ByZXBhcmVOb2RlKHRoaXMuX2hvc3QudXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lKSx0Lm5vZGUmJih0Lm5vZGUucGFyZW50PXRoaXMubm9kZSksdGhpcy5ibG9ja0xheW91dHx8dGhpcy5fYXJyYW5nZUNoaWxkcmVuKCkpLHRoaXMpfSxlLnByb3RvdHlwZS5fYXJyYW5nZUNoaWxkcmVuPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHMuVHJhbnNmb3JtTm9kZShcIkNvbnRhaW5lck5vZGVcIix0KX0sZS5wcm90b3R5cGUucmVtb3ZlQ29udHJvbD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jaGlsZHJlbi5pbmRleE9mKHQpO3JldHVybi0xIT09ZSYmKHRoaXMuX2NoaWxkcmVuLnNwbGljZShlLDEpLHQucGFyZW50PW51bGwsdC5fZGlzcG9zZU5vZGUoKSksdGhpc30sZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJDb250YWluZXIzRFwifSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsaT10aGlzLl9jaGlsZHJlbjtlPGkubGVuZ3RoO2UrKyl7aVtlXS5kaXNwb3NlKCl9dGhpcy5fY2hpbGRyZW49W10sdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSxlLlVOU0VUX09SSUVOVEFUSU9OPTAsZS5GQUNFT1JJR0lOX09SSUVOVEFUSU9OPTEsZS5GQUNFT1JJR0lOUkVWRVJTRURfT1JJRU5UQVRJT049MixlLkZBQ0VGT1JXQVJEX09SSUVOVEFUSU9OPTMsZS5GQUNFRk9SV0FSRFJFVkVSU0VEX09SSUVOVEFUSU9OPTQsZX0oJCkscnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fY29sdW1ucz0xMCxlLl9yb3dzPTAsZS5fcm93VGhlbkNvbHVtPSEwLGUuX29yaWVudGF0aW9uPWl0LkZBQ0VPUklHSU5fT1JJRU5UQVRJT04sZS5tYXJnaW49MCxlfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib3JpZW50YXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9vcmllbnRhdGlvbiE9PXQmJih0aGlzLl9vcmllbnRhdGlvbj10LHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29sdW1uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sdW1uc30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fY29sdW1ucyE9PXQmJih0aGlzLl9jb2x1bW5zPXQsdGhpcy5fcm93VGhlbkNvbHVtPSEwLHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicm93c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm93c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fcm93cyE9PXQmJih0aGlzLl9yb3dzPXQsdGhpcy5fcm93VGhlbkNvbHVtPSExLHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2FycmFuZ2VDaGlsZHJlbj1mdW5jdGlvbigpe3RoaXMuX2NlbGxXaWR0aD0wLHRoaXMuX2NlbGxIZWlnaHQ9MDtmb3IodmFyIHQ9MCxlPTAsaT0wLHI9cy5NYXRyaXguSW52ZXJ0KHRoaXMubm9kZS5jb21wdXRlV29ybGRNYXRyaXgoITApKSxuPTAsbz10aGlzLl9jaGlsZHJlbjtuPG8ubGVuZ3RoO24rKyl7aWYoKG09b1tuXSkubWVzaCl7aSsrLG0ubWVzaC5jb21wdXRlV29ybGRNYXRyaXgoITApO3ZhciBhPW0ubWVzaC5nZXRIaWVyYXJjaHlCb3VuZGluZ1ZlY3RvcnMoKSxoPXMuVG1wVmVjdG9ycy5WZWN0b3IzWzBdLGw9cy5UbXBWZWN0b3JzLlZlY3RvcjNbMV07YS5tYXguc3VidHJhY3RUb1JlZihhLm1pbixsKSxsLnNjYWxlSW5QbGFjZSguNSkscy5WZWN0b3IzLlRyYW5zZm9ybU5vcm1hbFRvUmVmKGwscixoKSx0aGlzLl9jZWxsV2lkdGg9TWF0aC5tYXgodGhpcy5fY2VsbFdpZHRoLDIqaC54KSx0aGlzLl9jZWxsSGVpZ2h0PU1hdGgubWF4KHRoaXMuX2NlbGxIZWlnaHQsMipoLnkpfX10aGlzLl9jZWxsV2lkdGgrPTIqdGhpcy5tYXJnaW4sdGhpcy5fY2VsbEhlaWdodCs9Mip0aGlzLm1hcmdpbix0aGlzLl9yb3dUaGVuQ29sdW0/KGU9dGhpcy5fY29sdW1ucyx0PU1hdGguY2VpbChpL3RoaXMuX2NvbHVtbnMpKToodD10aGlzLl9yb3dzLGU9TWF0aC5jZWlsKGkvdGhpcy5fcm93cykpO3ZhciB1PS41KmUqdGhpcy5fY2VsbFdpZHRoLGM9LjUqdCp0aGlzLl9jZWxsSGVpZ2h0LF89W10sZD0wO2lmKHRoaXMuX3Jvd1RoZW5Db2x1bSlmb3IodmFyIGY9MDtmPHQ7ZisrKWZvcih2YXIgcD0wO3A8ZSYmKF8ucHVzaChuZXcgcy5WZWN0b3IzKHAqdGhpcy5fY2VsbFdpZHRoLXUrdGhpcy5fY2VsbFdpZHRoLzIsZip0aGlzLl9jZWxsSGVpZ2h0LWMrdGhpcy5fY2VsbEhlaWdodC8yLDApKSwhKCsrZD5pKSk7cCsrKTtlbHNlIGZvcihwPTA7cDxlO3ArKylmb3IoZj0wO2Y8dCYmKF8ucHVzaChuZXcgcy5WZWN0b3IzKHAqdGhpcy5fY2VsbFdpZHRoLXUrdGhpcy5fY2VsbFdpZHRoLzIsZip0aGlzLl9jZWxsSGVpZ2h0LWMrdGhpcy5fY2VsbEhlaWdodC8yLDApKSwhKCsrZD5pKSk7ZisrKTtkPTA7Zm9yKHZhciBnPTAsYj10aGlzLl9jaGlsZHJlbjtnPGIubGVuZ3RoO2crKyl7dmFyIG07KG09YltnXSkubWVzaCYmKHRoaXMuX21hcEdyaWROb2RlKG0sX1tkXSksZCsrKX10aGlzLl9maW5hbFByb2Nlc3NpbmcoKX0sZS5wcm90b3R5cGUuX2ZpbmFsUHJvY2Vzc2luZz1mdW5jdGlvbigpe30sZX0oaXQpLG50PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuX3JhZGl1cz01LGV9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyYWRpdXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhZGl1c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fcmFkaXVzIT09dCYmKHRoaXMuX3JhZGl1cz10LHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX21hcEdyaWROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5tZXNoO2lmKGkpe3ZhciByPXRoaXMuX2N5bGluZHJpY2FsTWFwcGluZyhlKTtzd2l0Y2godC5wb3NpdGlvbj1yLHRoaXMub3JpZW50YXRpb24pe2Nhc2UgaXQuRkFDRU9SSUdJTl9PUklFTlRBVElPTjppLmxvb2tBdChuZXcgcy5WZWN0b3IzKDIqci54LHIueSwyKnIueikpO2JyZWFrO2Nhc2UgaXQuRkFDRU9SSUdJTlJFVkVSU0VEX09SSUVOVEFUSU9OOmkubG9va0F0KG5ldyBzLlZlY3RvcjMoLXIueCxyLnksLXIueikpO2JyZWFrO2Nhc2UgaXQuRkFDRUZPUldBUkRfT1JJRU5UQVRJT046YnJlYWs7Y2FzZSBpdC5GQUNFRk9SV0FSRFJFVkVSU0VEX09SSUVOVEFUSU9OOmkucm90YXRlKHMuQXhpcy5ZLE1hdGguUEkscy5TcGFjZS5MT0NBTCl9fX0sZS5wcm90b3R5cGUuX2N5bGluZHJpY2FsTWFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgcy5WZWN0b3IzKDAsdC55LHRoaXMuX3JhZGl1cyksaT10LngvdGhpcy5fcmFkaXVzO3JldHVybiBzLk1hdHJpeC5Sb3RhdGlvbllhd1BpdGNoUm9sbFRvUmVmKGksMCwwLHMuVG1wVmVjdG9ycy5NYXRyaXhbMF0pLHMuVmVjdG9yMy5UcmFuc2Zvcm1Ob3JtYWwoZSxzLlRtcFZlY3RvcnMuTWF0cml4WzBdKX0sZX0ocnQpLG90PVwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcblxcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uO1xcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbDtcXG5hdHRyaWJ1dGUgdmVjMiB1djtcXG5cXG51bmlmb3JtIG1hdDQgd29ybGQ7XFxudW5pZm9ybSBtYXQ0IHZpZXdQcm9qZWN0aW9uO1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxuI2lmZGVmIEJPUkRFUlxcbnZhcnlpbmcgdmVjMiBzY2FsZUluZm87XFxudW5pZm9ybSBmbG9hdCBib3JkZXJXaWR0aDtcXG51bmlmb3JtIHZlYzMgc2NhbGVGYWN0b3I7XFxuI2VuZGlmXFxuI2lmZGVmIEhPVkVSTElHSFRcXG52YXJ5aW5nIHZlYzMgd29ybGRQb3NpdGlvbjtcXG4jZW5kaWZcXG52b2lkIG1haW4odm9pZCkge1xcbnZVVj11djtcXG4jaWZkZWYgQk9SREVSXFxudmVjMyBzY2FsZT1zY2FsZUZhY3RvcjtcXG5mbG9hdCBtaW5TY2FsZT1taW4obWluKHNjYWxlLngsc2NhbGUueSksc2NhbGUueik7XFxuZmxvYXQgbWF4U2NhbGU9bWF4KG1heChzY2FsZS54LHNjYWxlLnkpLHNjYWxlLnopO1xcbmZsb2F0IG1pbk92ZXJNaWRkbGVTY2FsZT1taW5TY2FsZS8oc2NhbGUueCtzY2FsZS55K3NjYWxlLnotbWluU2NhbGUtbWF4U2NhbGUpO1xcbmZsb2F0IGFyZWFZWj1zY2FsZS55KnNjYWxlLno7XFxuZmxvYXQgYXJlYVhaPXNjYWxlLngqc2NhbGUuejtcXG5mbG9hdCBhcmVhWFk9c2NhbGUueCpzY2FsZS55O1xcbmZsb2F0IHNjYWxlZEJvcmRlcldpZHRoPWJvcmRlcldpZHRoO1xcbmlmIChhYnMobm9ybWFsLngpID09IDEuMClcXG57XFxuc2NhbGUueD1zY2FsZS55O1xcbnNjYWxlLnk9c2NhbGUuejtcXG5pZiAoYXJlYVlaPmFyZWFYWiAmJiBhcmVhWVo+YXJlYVhZKVxcbntcXG5zY2FsZWRCb3JkZXJXaWR0aCo9bWluT3Zlck1pZGRsZVNjYWxlO1xcbn1cXG59XFxuZWxzZSBpZiAoYWJzKG5vcm1hbC55KSA9PSAxLjApXFxue1xcbnNjYWxlLng9c2NhbGUuejtcXG5pZiAoYXJlYVhaPmFyZWFYWSAmJiBhcmVhWFo+YXJlYVlaKVxcbntcXG5zY2FsZWRCb3JkZXJXaWR0aCo9bWluT3Zlck1pZGRsZVNjYWxlO1xcbn1cXG59XFxuZWxzZVxcbntcXG5pZiAoYXJlYVhZPmFyZWFZWiAmJiBhcmVhWFk+YXJlYVhaKVxcbntcXG5zY2FsZWRCb3JkZXJXaWR0aCo9bWluT3Zlck1pZGRsZVNjYWxlO1xcbn1cXG59XFxuZmxvYXQgc2NhbGVSYXRpbz1taW4oc2NhbGUueCxzY2FsZS55KS9tYXgoc2NhbGUueCxzY2FsZS55KTtcXG5pZiAoc2NhbGUueD5zY2FsZS55KVxcbntcXG5zY2FsZUluZm8ueD0xLjAtKHNjYWxlZEJvcmRlcldpZHRoKnNjYWxlUmF0aW8pO1xcbnNjYWxlSW5mby55PTEuMC1zY2FsZWRCb3JkZXJXaWR0aDtcXG59XFxuZWxzZVxcbntcXG5zY2FsZUluZm8ueD0xLjAtc2NhbGVkQm9yZGVyV2lkdGg7XFxuc2NhbGVJbmZvLnk9MS4wLShzY2FsZWRCb3JkZXJXaWR0aCpzY2FsZVJhdGlvKTtcXG59XFxuI2VuZGlmXFxudmVjNCB3b3JsZFBvcz13b3JsZCp2ZWM0KHBvc2l0aW9uLDEuMCk7XFxuI2lmZGVmIEhPVkVSTElHSFRcXG53b3JsZFBvc2l0aW9uPXdvcmxkUG9zLnh5ejtcXG4jZW5kaWZcXG5nbF9Qb3NpdGlvbj12aWV3UHJvamVjdGlvbip3b3JsZFBvcztcXG59XFxuXCI7cy5FZmZlY3QuU2hhZGVyc1N0b3JlLmZsdWVudFZlcnRleFNoYWRlcj1vdDt2YXIgc3Q9XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudmFyeWluZyB2ZWMyIHZVVjtcXG51bmlmb3JtIHZlYzQgYWxiZWRvQ29sb3I7XFxuI2lmZGVmIElOTkVSR0xPV1xcbnVuaWZvcm0gdmVjNCBpbm5lckdsb3dDb2xvcjtcXG4jZW5kaWZcXG4jaWZkZWYgQk9SREVSXFxudmFyeWluZyB2ZWMyIHNjYWxlSW5mbztcXG51bmlmb3JtIGZsb2F0IGVkZ2VTbW9vdGhpbmdWYWx1ZTtcXG51bmlmb3JtIGZsb2F0IGJvcmRlck1pblZhbHVlO1xcbiNlbmRpZlxcbiNpZmRlZiBIT1ZFUkxJR0hUXFxudmFyeWluZyB2ZWMzIHdvcmxkUG9zaXRpb247XFxudW5pZm9ybSB2ZWMzIGhvdmVyUG9zaXRpb247XFxudW5pZm9ybSB2ZWM0IGhvdmVyQ29sb3I7XFxudW5pZm9ybSBmbG9hdCBob3ZlclJhZGl1cztcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRVxcbnVuaWZvcm0gc2FtcGxlcjJEIGFsYmVkb1NhbXBsZXI7XFxuI2VuZGlmXFxudm9pZCBtYWluKHZvaWQpIHtcXG52ZWMzIGFsYmVkbz1hbGJlZG9Db2xvci5yZ2I7XFxuZmxvYXQgYWxwaGE9YWxiZWRvQ29sb3IuYTtcXG4jaWZkZWYgVEVYVFVSRVxcbmFsYmVkbz10ZXh0dXJlMkQoYWxiZWRvU2FtcGxlcix2VVYpLnJnYjtcXG4jZW5kaWZcXG4jaWZkZWYgSE9WRVJMSUdIVFxcbmZsb2F0IHBvaW50VG9Ib3Zlcj0oMS4wLWNsYW1wKGxlbmd0aChob3ZlclBvc2l0aW9uLXdvcmxkUG9zaXRpb24pL2hvdmVyUmFkaXVzLDAuLDEuKSkqaG92ZXJDb2xvci5hO1xcbmFsYmVkbz1jbGFtcChhbGJlZG8raG92ZXJDb2xvci5yZ2IqcG9pbnRUb0hvdmVyLDAuLDEuKTtcXG4jZWxzZVxcbmZsb2F0IHBvaW50VG9Ib3Zlcj0xLjA7XFxuI2VuZGlmXFxuI2lmZGVmIEJPUkRFUlxcbmZsb2F0IGJvcmRlclBvd2VyPTEwLjA7XFxuZmxvYXQgaW52ZXJzZUJvcmRlclBvd2VyPTEuMC9ib3JkZXJQb3dlcjtcXG52ZWMzIGJvcmRlckNvbG9yPWFsYmVkbypib3JkZXJQb3dlcjtcXG52ZWMyIGRpc3RhbmNlVG9FZGdlO1xcbmRpc3RhbmNlVG9FZGdlLng9YWJzKHZVVi54LTAuNSkqMi4wO1xcbmRpc3RhbmNlVG9FZGdlLnk9YWJzKHZVVi55LTAuNSkqMi4wO1xcbmZsb2F0IGJvcmRlclZhbHVlPW1heChzbW9vdGhzdGVwKHNjYWxlSW5mby54LWVkZ2VTbW9vdGhpbmdWYWx1ZSxzY2FsZUluZm8ueCtlZGdlU21vb3RoaW5nVmFsdWUsZGlzdGFuY2VUb0VkZ2UueCksXFxuc21vb3Roc3RlcChzY2FsZUluZm8ueS1lZGdlU21vb3RoaW5nVmFsdWUsc2NhbGVJbmZvLnkrZWRnZVNtb290aGluZ1ZhbHVlLGRpc3RhbmNlVG9FZGdlLnkpKTtcXG5ib3JkZXJDb2xvcj1ib3JkZXJDb2xvcipib3JkZXJWYWx1ZSptYXgoYm9yZGVyTWluVmFsdWUqaW52ZXJzZUJvcmRlclBvd2VyLHBvaW50VG9Ib3Zlcik7XFxuYWxiZWRvKz1ib3JkZXJDb2xvcjtcXG5hbHBoYT1tYXgoYWxwaGEsYm9yZGVyVmFsdWUpO1xcbiNlbmRpZlxcbiNpZmRlZiBJTk5FUkdMT1dcXG5cXG52ZWMyIHV2R2xvdz0odlVWLXZlYzIoMC41LDAuNSkpKihpbm5lckdsb3dDb2xvci5hKjIuMCk7XFxudXZHbG93PXV2R2xvdyp1dkdsb3c7XFxudXZHbG93PXV2R2xvdyp1dkdsb3c7XFxuYWxiZWRvKz1taXgodmVjMygwLjAsMC4wLDAuMCksaW5uZXJHbG93Q29sb3IucmdiLHV2R2xvdy54K3V2R2xvdy55KTtcXG4jZW5kaWZcXG5nbF9GcmFnQ29sb3I9dmVjNChhbGJlZG8sYWxwaGEpO1xcbn1cIjtzLkVmZmVjdC5TaGFkZXJzU3RvcmUuZmx1ZW50UGl4ZWxTaGFkZXI9c3Q7dmFyIGF0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuSU5ORVJHTE9XPSExLGUuQk9SREVSPSExLGUuSE9WRVJMSUdIVD0hMSxlLlRFWFRVUkU9ITEsZS5yZWJ1aWxkKCksZX1yZXR1cm4gbihlLHQpLGV9KHMuTWF0ZXJpYWxEZWZpbmVzKSxodD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIHI9dC5jYWxsKHRoaXMsZSxpKXx8dGhpcztyZXR1cm4gci5pbm5lckdsb3dDb2xvckludGVuc2l0eT0uNSxyLmlubmVyR2xvd0NvbG9yPW5ldyBzLkNvbG9yMygxLDEsMSksci5hbHBoYT0xLHIuYWxiZWRvQ29sb3I9bmV3IHMuQ29sb3IzKC4zLC4zNSwuNCksci5yZW5kZXJCb3JkZXJzPSExLHIuYm9yZGVyV2lkdGg9LjUsci5lZGdlU21vb3RoaW5nVmFsdWU9LjAyLHIuYm9yZGVyTWluVmFsdWU9LjEsci5yZW5kZXJIb3ZlckxpZ2h0PSExLHIuaG92ZXJSYWRpdXM9MSxyLmhvdmVyQ29sb3I9bmV3IHMuQ29sb3I0KC4zLC4zLC4zLDEpLHIuaG92ZXJQb3NpdGlvbj1zLlZlY3RvcjMuWmVybygpLHJ9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5uZWVkQWxwaGFCbGVuZGluZz1mdW5jdGlvbigpe3JldHVybiAxIT09dGhpcy5hbHBoYX0sZS5wcm90b3R5cGUubmVlZEFscGhhVGVzdGluZz1mdW5jdGlvbigpe3JldHVybiExfSxlLnByb3RvdHlwZS5nZXRBbHBoYVRlc3RUZXh0dXJlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmlzUmVhZHlGb3JTdWJNZXNoPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLmlzRnJvemVuJiZlLmVmZmVjdCYmZS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlSZWFkeSlyZXR1cm4hMDtlLl9tYXRlcmlhbERlZmluZXN8fChlLl9tYXRlcmlhbERlZmluZXM9bmV3IGF0KTt2YXIgcj10aGlzLmdldFNjZW5lKCksbj1lLl9tYXRlcmlhbERlZmluZXM7aWYoIXRoaXMuY2hlY2tSZWFkeU9uRXZlcnlDYWxsJiZlLmVmZmVjdCYmbi5fcmVuZGVySWQ9PT1yLmdldFJlbmRlcklkKCkpcmV0dXJuITA7aWYobi5fYXJlVGV4dHVyZXNEaXJ0eSlpZihuLklOTkVSR0xPVz10aGlzLmlubmVyR2xvd0NvbG9ySW50ZW5zaXR5PjAsbi5CT1JERVI9dGhpcy5yZW5kZXJCb3JkZXJzLG4uSE9WRVJMSUdIVD10aGlzLnJlbmRlckhvdmVyTGlnaHQsdGhpcy5fYWxiZWRvVGV4dHVyZSl7aWYoIXRoaXMuX2FsYmVkb1RleHR1cmUuaXNSZWFkeU9yTm90QmxvY2tpbmcoKSlyZXR1cm4hMTtuLlRFWFRVUkU9ITB9ZWxzZSBuLlRFWFRVUkU9ITE7dmFyIG89ci5nZXRFbmdpbmUoKTtpZihuLmlzRGlydHkpe24ubWFya0FzUHJvY2Vzc2VkKCksci5yZXNldENhY2hlZE1hdGVyaWFsKCk7dmFyIGE9W3MuVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZF07YS5wdXNoKHMuVmVydGV4QnVmZmVyLk5vcm1hbEtpbmQpLGEucHVzaChzLlZlcnRleEJ1ZmZlci5VVktpbmQpO3ZhciBoPVtcIndvcmxkXCIsXCJ2aWV3UHJvamVjdGlvblwiLFwiaW5uZXJHbG93Q29sb3JcIixcImFsYmVkb0NvbG9yXCIsXCJib3JkZXJXaWR0aFwiLFwiZWRnZVNtb290aGluZ1ZhbHVlXCIsXCJzY2FsZUZhY3RvclwiLFwiYm9yZGVyTWluVmFsdWVcIixcImhvdmVyQ29sb3JcIixcImhvdmVyUG9zaXRpb25cIixcImhvdmVyUmFkaXVzXCJdLGw9W1wiYWxiZWRvU2FtcGxlclwiXSx1PW5ldyBBcnJheTtzLk1hdGVyaWFsSGVscGVyLlByZXBhcmVVbmlmb3Jtc0FuZFNhbXBsZXJzTGlzdCh7dW5pZm9ybXNOYW1lczpoLHVuaWZvcm1CdWZmZXJzTmFtZXM6dSxzYW1wbGVyczpsLGRlZmluZXM6bixtYXhTaW11bHRhbmVvdXNMaWdodHM6NH0pO3ZhciBjPW4udG9TdHJpbmcoKTtlLnNldEVmZmVjdChyLmdldEVuZ2luZSgpLmNyZWF0ZUVmZmVjdChcImZsdWVudFwiLHthdHRyaWJ1dGVzOmEsdW5pZm9ybXNOYW1lczpoLHVuaWZvcm1CdWZmZXJzTmFtZXM6dSxzYW1wbGVyczpsLGRlZmluZXM6YyxmYWxsYmFja3M6bnVsbCxvbkNvbXBpbGVkOnRoaXMub25Db21waWxlZCxvbkVycm9yOnRoaXMub25FcnJvcixpbmRleFBhcmFtZXRlcnM6e21heFNpbXVsdGFuZW91c0xpZ2h0czo0fX0sbykpfXJldHVybiEoIWUuZWZmZWN0fHwhZS5lZmZlY3QuaXNSZWFkeSgpKSYmKG4uX3JlbmRlcklkPXIuZ2V0UmVuZGVySWQoKSxlLmVmZmVjdC5fd2FzUHJldmlvdXNseVJlYWR5PSEwLCEwKX0sZS5wcm90b3R5cGUuYmluZEZvclN1Yk1lc2g9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMuZ2V0U2NlbmUoKSxuPWkuX21hdGVyaWFsRGVmaW5lcztpZihuKXt2YXIgbz1pLmVmZmVjdDtvJiYodGhpcy5fYWN0aXZlRWZmZWN0PW8sdGhpcy5iaW5kT25seVdvcmxkTWF0cml4KHQpLHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRNYXRyaXgoXCJ2aWV3UHJvamVjdGlvblwiLHIuZ2V0VHJhbnNmb3JtTWF0cml4KCkpLHRoaXMuX211c3RSZWJpbmQocixvKSYmKHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRDb2xvcjQoXCJhbGJlZG9Db2xvclwiLHRoaXMuYWxiZWRvQ29sb3IsdGhpcy5hbHBoYSksbi5JTk5FUkdMT1cmJnRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRDb2xvcjQoXCJpbm5lckdsb3dDb2xvclwiLHRoaXMuaW5uZXJHbG93Q29sb3IsdGhpcy5pbm5lckdsb3dDb2xvckludGVuc2l0eSksbi5CT1JERVImJih0aGlzLl9hY3RpdmVFZmZlY3Quc2V0RmxvYXQoXCJib3JkZXJXaWR0aFwiLHRoaXMuYm9yZGVyV2lkdGgpLHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRGbG9hdChcImVkZ2VTbW9vdGhpbmdWYWx1ZVwiLHRoaXMuZWRnZVNtb290aGluZ1ZhbHVlKSx0aGlzLl9hY3RpdmVFZmZlY3Quc2V0RmxvYXQoXCJib3JkZXJNaW5WYWx1ZVwiLHRoaXMuYm9yZGVyTWluVmFsdWUpLGUuZ2V0Qm91bmRpbmdJbmZvKCkuYm91bmRpbmdCb3guZXh0ZW5kU2l6ZS5tdWx0aXBseVRvUmVmKGUuc2NhbGluZyxzLlRtcFZlY3RvcnMuVmVjdG9yM1swXSksdGhpcy5fYWN0aXZlRWZmZWN0LnNldFZlY3RvcjMoXCJzY2FsZUZhY3RvclwiLHMuVG1wVmVjdG9ycy5WZWN0b3IzWzBdKSksbi5IT1ZFUkxJR0hUJiYodGhpcy5fYWN0aXZlRWZmZWN0LnNldERpcmVjdENvbG9yNChcImhvdmVyQ29sb3JcIix0aGlzLmhvdmVyQ29sb3IpLHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRGbG9hdChcImhvdmVyUmFkaXVzXCIsdGhpcy5ob3ZlclJhZGl1cyksdGhpcy5fYWN0aXZlRWZmZWN0LnNldFZlY3RvcjMoXCJob3ZlclBvc2l0aW9uXCIsdGhpcy5ob3ZlclBvc2l0aW9uKSksbi5URVhUVVJFJiZ0aGlzLl9hY3RpdmVFZmZlY3Quc2V0VGV4dHVyZShcImFsYmVkb1NhbXBsZXJcIix0aGlzLl9hbGJlZG9UZXh0dXJlKSksdGhpcy5fYWZ0ZXJCaW5kKGUsdGhpcy5fYWN0aXZlRWZmZWN0KSl9fSxlLnByb3RvdHlwZS5nZXRBY3RpdmVUZXh0dXJlcz1mdW5jdGlvbigpe3JldHVybiB0LnByb3RvdHlwZS5nZXRBY3RpdmVUZXh0dXJlcy5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5oYXNUZXh0dXJlPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5wcm90b3R5cGUuaGFzVGV4dHVyZS5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKHQpe3ZhciBpPXRoaXM7cmV0dXJuIHMuU2VyaWFsaXphdGlvbkhlbHBlci5DbG9uZShmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0LGkuZ2V0U2NlbmUoKSl9LHRoaXMpfSxlLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgdD1zLlNlcmlhbGl6YXRpb25IZWxwZXIuU2VyaWFsaXplKHRoaXMpO3JldHVybiB0LmN1c3RvbVR5cGU9XCJCQUJZTE9OLkdVSS5GbHVlbnRNYXRlcmlhbFwiLHR9LGUucHJvdG90eXBlLmdldENsYXNzTmFtZT1mdW5jdGlvbigpe3JldHVyblwiRmx1ZW50TWF0ZXJpYWxcIn0sZS5QYXJzZT1mdW5jdGlvbih0LGkscil7cmV0dXJuIHMuU2VyaWFsaXphdGlvbkhlbHBlci5QYXJzZShmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0Lm5hbWUsaSl9LHQsaSxyKX0sbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpLE9iamVjdChzLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLGUucHJvdG90eXBlLFwiaW5uZXJHbG93Q29sb3JJbnRlbnNpdHlcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZUFzQ29sb3IzKSgpXSxlLnByb3RvdHlwZSxcImlubmVyR2xvd0NvbG9yXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemUpKCldLGUucHJvdG90eXBlLFwiYWxwaGFcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZUFzQ29sb3IzKSgpXSxlLnByb3RvdHlwZSxcImFsYmVkb0NvbG9yXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemUpKCksT2JqZWN0KHMuZXhwYW5kVG9Qcm9wZXJ0eSkoXCJfbWFya0FsbFN1Yk1lc2hlc0FzVGV4dHVyZXNEaXJ0eVwiKV0sZS5wcm90b3R5cGUsXCJyZW5kZXJCb3JkZXJzXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemUpKCldLGUucHJvdG90eXBlLFwiYm9yZGVyV2lkdGhcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZSkoKV0sZS5wcm90b3R5cGUsXCJlZGdlU21vb3RoaW5nVmFsdWVcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZSkoKV0sZS5wcm90b3R5cGUsXCJib3JkZXJNaW5WYWx1ZVwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpLE9iamVjdChzLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLGUucHJvdG90eXBlLFwicmVuZGVySG92ZXJMaWdodFwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpXSxlLnByb3RvdHlwZSxcImhvdmVyUmFkaXVzXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemVBc0NvbG9yNCkoKV0sZS5wcm90b3R5cGUsXCJob3ZlckNvbG9yXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemVBc1ZlY3RvcjMpKCldLGUucHJvdG90eXBlLFwiaG92ZXJQb3NpdGlvblwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplQXNUZXh0dXJlKShcImFsYmVkb1RleHR1cmVcIildLGUucHJvdG90eXBlLFwiX2FsYmVkb1RleHR1cmVcIix2b2lkIDApLG8oW09iamVjdChzLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzQW5kTWlzY0RpcnR5XCIpXSxlLnByb3RvdHlwZSxcImFsYmVkb1RleHR1cmVcIix2b2lkIDApLGV9KHMuUHVzaE1hdGVyaWFsKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuRmx1ZW50TWF0ZXJpYWxcIl09aHQ7dmFyIGx0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2b2lkIDA9PT1pJiYoaT0hMCk7dmFyIHI9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIHIuX3NoYXJlTWF0ZXJpYWxzPSEwLHIuX3NoYXJlTWF0ZXJpYWxzPWksci5wb2ludGVyRW50ZXJBbmltYXRpb249ZnVuY3Rpb24oKXtyLm1lc2gmJnIuX2Zyb250UGxhdGUuc2V0RW5hYmxlZCghMCl9LHIucG9pbnRlck91dEFuaW1hdGlvbj1mdW5jdGlvbigpe3IubWVzaCYmci5fZnJvbnRQbGF0ZS5zZXRFbmFibGVkKCExKX0scn1yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9kaXNwb3NlVG9vbHRpcD1mdW5jdGlvbigpe3RoaXMuX3Rvb2x0aXBGYWRlPW51bGwsdGhpcy5fdG9vbHRpcFRleHRCbG9jayYmdGhpcy5fdG9vbHRpcFRleHRCbG9jay5kaXNwb3NlKCksdGhpcy5fdG9vbHRpcFRleHR1cmUmJnRoaXMuX3Rvb2x0aXBUZXh0dXJlLmRpc3Bvc2UoKSx0aGlzLl90b29sdGlwTWVzaCYmdGhpcy5fdG9vbHRpcE1lc2guZGlzcG9zZSgpLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl90b29sdGlwSG92ZXJPYnNlcnZlciksdGhpcy5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl90b29sdGlwT3V0T2JzZXJ2ZXIpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyZW5kZXJpbmdHcm91cElkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrUGxhdGUucmVuZGVyaW5nR3JvdXBJZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tQbGF0ZS5yZW5kZXJpbmdHcm91cElkPXQsdGhpcy5fdGV4dFBsYXRlLnJlbmRlcmluZ0dyb3VwSWQ9dCx0aGlzLl9mcm9udFBsYXRlLnJlbmRlcmluZ0dyb3VwSWQ9dCx0aGlzLl90b29sdGlwTWVzaCYmKHRoaXMuX3Rvb2x0aXBNZXNoLnJlbmRlcmluZ0dyb3VwSWQ9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidG9vbHRpcFRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXBUZXh0QmxvY2s/dGhpcy5fdG9vbHRpcFRleHRCbG9jay50ZXh0Om51bGx9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQpe2lmKCF0aGlzLl90b29sdGlwRmFkZSl7dGhpcy5fdG9vbHRpcE1lc2g9cy5QbGFuZUJ1aWxkZXIuQ3JlYXRlUGxhbmUoXCJcIix7c2l6ZToxfSx0aGlzLl9iYWNrUGxhdGUuX3NjZW5lKTt2YXIgaT1zLlBsYW5lQnVpbGRlci5DcmVhdGVQbGFuZShcIlwiLHtzaXplOjEsc2lkZU9yaWVudGF0aW9uOnMuTWVzaC5ET1VCTEVTSURFfSx0aGlzLl9iYWNrUGxhdGUuX3NjZW5lKSxyPW5ldyBzLlN0YW5kYXJkTWF0ZXJpYWwoXCJcIix0aGlzLl9iYWNrUGxhdGUuX3NjZW5lKTtyLmRpZmZ1c2VDb2xvcj1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKFwiIzIxMjEyMVwiKSxpLm1hdGVyaWFsPXIsaS5pc1BpY2thYmxlPSExLHRoaXMuX3Rvb2x0aXBNZXNoLmFkZENoaWxkKGkpLGkucG9zaXRpb24uej0uMDUsdGhpcy5fdG9vbHRpcE1lc2guc2NhbGluZy55PTEvMyx0aGlzLl90b29sdGlwTWVzaC5wb3NpdGlvbi55PS43LHRoaXMuX3Rvb2x0aXBNZXNoLnBvc2l0aW9uLno9LS4xNSx0aGlzLl90b29sdGlwTWVzaC5pc1BpY2thYmxlPSExLHRoaXMuX3Rvb2x0aXBNZXNoLnBhcmVudD10aGlzLl9iYWNrUGxhdGUsdGhpcy5fdG9vbHRpcFRleHR1cmU9Sy5DcmVhdGVGb3JNZXNoKHRoaXMuX3Rvb2x0aXBNZXNoKSx0aGlzLl90b29sdGlwVGV4dEJsb2NrPW5ldyB5LHRoaXMuX3Rvb2x0aXBUZXh0QmxvY2suc2NhbGVZPTMsdGhpcy5fdG9vbHRpcFRleHRCbG9jay5jb2xvcj1cIndoaXRlXCIsdGhpcy5fdG9vbHRpcFRleHRCbG9jay5mb250U2l6ZT0xMzAsdGhpcy5fdG9vbHRpcFRleHR1cmUuYWRkQ29udHJvbCh0aGlzLl90b29sdGlwVGV4dEJsb2NrKSx0aGlzLl90b29sdGlwRmFkZT1uZXcgcy5GYWRlSW5PdXRCZWhhdmlvcix0aGlzLl90b29sdGlwRmFkZS5kZWxheT01MDAsdGhpcy5fdG9vbHRpcE1lc2guYWRkQmVoYXZpb3IodGhpcy5fdG9vbHRpcEZhZGUpLHRoaXMuX3Rvb2x0aXBIb3Zlck9ic2VydmVyPXRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX3Rvb2x0aXBGYWRlJiZlLl90b29sdGlwRmFkZS5mYWRlSW4oITApfSksdGhpcy5fdG9vbHRpcE91dE9ic2VydmVyPXRoaXMub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtlLl90b29sdGlwRmFkZSYmZS5fdG9vbHRpcEZhZGUuZmFkZUluKCExKX0pfXRoaXMuX3Rvb2x0aXBUZXh0QmxvY2smJih0aGlzLl90b29sdGlwVGV4dEJsb2NrLnRleHQ9dCl9ZWxzZSB0aGlzLl9kaXNwb3NlVG9vbHRpcCgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90ZXh0IT09dCYmKHRoaXMuX3RleHQ9dCx0aGlzLl9yZWJ1aWxkQ29udGVudCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpbWFnZVVybFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW1hZ2VVcmx9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pbWFnZVVybCE9PXQmJih0aGlzLl9pbWFnZVVybD10LHRoaXMuX3JlYnVpbGRDb250ZW50KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tNYXRlcmlhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja01hdGVyaWFsfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZyb250TWF0ZXJpYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zyb250TWF0ZXJpYWx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGxhdGVNYXRlcmlhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxhdGVNYXRlcmlhbH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzaGFyZU1hdGVyaWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcmVNYXRlcmlhbHN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJIb2xvZ3JhcGhpY0J1dHRvblwifSxlLnByb3RvdHlwZS5fcmVidWlsZENvbnRlbnQ9ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlRmFjYWRlVGV4dHVyZSgpO3ZhciB0PW5ldyBDO2lmKHQuaXNWZXJ0aWNhbD0hMCx0aGlzLl9pbWFnZVVybCl7dmFyIGU9bmV3IHY7ZS5zb3VyY2U9dGhpcy5faW1hZ2VVcmwsZS5wYWRkaW5nVG9wPVwiNDBweFwiLGUuaGVpZ2h0PVwiMTgwcHhcIixlLndpZHRoPVwiMTAwcHhcIixlLnBhZGRpbmdCb3R0b209XCI0MHB4XCIsdC5hZGRDb250cm9sKGUpfWlmKHRoaXMuX3RleHQpe3ZhciBpPW5ldyB5O2kudGV4dD10aGlzLl90ZXh0LGkuY29sb3I9XCJ3aGl0ZVwiLGkuaGVpZ2h0PVwiMzBweFwiLGkuZm9udFNpemU9MjQsdC5hZGRDb250cm9sKGkpfXRoaXMuX2Zyb250UGxhdGUmJih0aGlzLmNvbnRlbnQ9dCl9LGUucHJvdG90eXBlLl9jcmVhdGVOb2RlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9iYWNrUGxhdGU9cy5Cb3hCdWlsZGVyLkNyZWF0ZUJveCh0aGlzLm5hbWUrXCJCYWNrTWVzaFwiLHt3aWR0aDoxLGhlaWdodDoxLGRlcHRoOi4wOH0sZSksdGhpcy5fZnJvbnRQbGF0ZT1zLkJveEJ1aWxkZXIuQ3JlYXRlQm94KHRoaXMubmFtZStcIkZyb250TWVzaFwiLHt3aWR0aDoxLGhlaWdodDoxLGRlcHRoOi4wOH0sZSksdGhpcy5fZnJvbnRQbGF0ZS5wYXJlbnQ9dGhpcy5fYmFja1BsYXRlLHRoaXMuX2Zyb250UGxhdGUucG9zaXRpb24uej0tLjA4LHRoaXMuX2Zyb250UGxhdGUuaXNQaWNrYWJsZT0hMSx0aGlzLl9mcm9udFBsYXRlLnNldEVuYWJsZWQoITEpLHRoaXMuX3RleHRQbGF0ZT10LnByb3RvdHlwZS5fY3JlYXRlTm9kZS5jYWxsKHRoaXMsZSksdGhpcy5fdGV4dFBsYXRlLnBhcmVudD10aGlzLl9iYWNrUGxhdGUsdGhpcy5fdGV4dFBsYXRlLnBvc2l0aW9uLno9LS4wOCx0aGlzLl90ZXh0UGxhdGUuaXNQaWNrYWJsZT0hMSx0aGlzLl9iYWNrUGxhdGV9LGUucHJvdG90eXBlLl9hcHBseUZhY2FkZT1mdW5jdGlvbih0KXt0aGlzLl9wbGF0ZU1hdGVyaWFsLmVtaXNzaXZlVGV4dHVyZT10LHRoaXMuX3BsYXRlTWF0ZXJpYWwub3BhY2l0eVRleHR1cmU9dH0sZS5wcm90b3R5cGUuX2NyZWF0ZUJhY2tNYXRlcmlhbD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2JhY2tNYXRlcmlhbD1uZXcgaHQodGhpcy5uYW1lK1wiQmFjayBNYXRlcmlhbFwiLHQuZ2V0U2NlbmUoKSksdGhpcy5fYmFja01hdGVyaWFsLnJlbmRlckhvdmVyTGlnaHQ9ITAsdGhpcy5fcGlja2VkUG9pbnRPYnNlcnZlcj10aGlzLl9ob3N0Lm9uUGlja2VkUG9pbnRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7dD8oZS5fYmFja01hdGVyaWFsLmhvdmVyUG9zaXRpb249dCxlLl9iYWNrTWF0ZXJpYWwuaG92ZXJDb2xvci5hPTEpOmUuX2JhY2tNYXRlcmlhbC5ob3ZlckNvbG9yLmE9MH0pfSxlLnByb3RvdHlwZS5fY3JlYXRlRnJvbnRNYXRlcmlhbD1mdW5jdGlvbih0KXt0aGlzLl9mcm9udE1hdGVyaWFsPW5ldyBodCh0aGlzLm5hbWUrXCJGcm9udCBNYXRlcmlhbFwiLHQuZ2V0U2NlbmUoKSksdGhpcy5fZnJvbnRNYXRlcmlhbC5pbm5lckdsb3dDb2xvckludGVuc2l0eT0wLHRoaXMuX2Zyb250TWF0ZXJpYWwuYWxwaGE9LjUsdGhpcy5fZnJvbnRNYXRlcmlhbC5yZW5kZXJCb3JkZXJzPSEwfSxlLnByb3RvdHlwZS5fY3JlYXRlUGxhdGVNYXRlcmlhbD1mdW5jdGlvbih0KXt0aGlzLl9wbGF0ZU1hdGVyaWFsPW5ldyBzLlN0YW5kYXJkTWF0ZXJpYWwodGhpcy5uYW1lK1wiUGxhdGUgTWF0ZXJpYWxcIix0LmdldFNjZW5lKCkpLHRoaXMuX3BsYXRlTWF0ZXJpYWwuc3BlY3VsYXJDb2xvcj1zLkNvbG9yMy5CbGFjaygpfSxlLnByb3RvdHlwZS5fYWZmZWN0TWF0ZXJpYWw9ZnVuY3Rpb24odCl7dGhpcy5fc2hhcmVNYXRlcmlhbHM/KHRoaXMuX2hvc3QuX3NoYXJlZE1hdGVyaWFscy5iYWNrRmx1ZW50TWF0ZXJpYWw/dGhpcy5fYmFja01hdGVyaWFsPXRoaXMuX2hvc3QuX3NoYXJlZE1hdGVyaWFscy5iYWNrRmx1ZW50TWF0ZXJpYWw6KHRoaXMuX2NyZWF0ZUJhY2tNYXRlcmlhbCh0KSx0aGlzLl9ob3N0Ll9zaGFyZWRNYXRlcmlhbHMuYmFja0ZsdWVudE1hdGVyaWFsPXRoaXMuX2JhY2tNYXRlcmlhbCksdGhpcy5faG9zdC5fc2hhcmVkTWF0ZXJpYWxzLmZyb250Rmx1ZW50TWF0ZXJpYWw/dGhpcy5fZnJvbnRNYXRlcmlhbD10aGlzLl9ob3N0Ll9zaGFyZWRNYXRlcmlhbHMuZnJvbnRGbHVlbnRNYXRlcmlhbDoodGhpcy5fY3JlYXRlRnJvbnRNYXRlcmlhbCh0KSx0aGlzLl9ob3N0Ll9zaGFyZWRNYXRlcmlhbHMuZnJvbnRGbHVlbnRNYXRlcmlhbD10aGlzLl9mcm9udE1hdGVyaWFsKSk6KHRoaXMuX2NyZWF0ZUJhY2tNYXRlcmlhbCh0KSx0aGlzLl9jcmVhdGVGcm9udE1hdGVyaWFsKHQpKSx0aGlzLl9jcmVhdGVQbGF0ZU1hdGVyaWFsKHQpLHRoaXMuX2JhY2tQbGF0ZS5tYXRlcmlhbD10aGlzLl9iYWNrTWF0ZXJpYWwsdGhpcy5fZnJvbnRQbGF0ZS5tYXRlcmlhbD10aGlzLl9mcm9udE1hdGVyaWFsLHRoaXMuX3RleHRQbGF0ZS5tYXRlcmlhbD10aGlzLl9wbGF0ZU1hdGVyaWFsLHRoaXMuX3JlYnVpbGRDb250ZW50KCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGlzcG9zZVRvb2x0aXAoKSx0aGlzLnNoYXJlTWF0ZXJpYWxzfHwodGhpcy5fYmFja01hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzLl9mcm9udE1hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzLl9wbGF0ZU1hdGVyaWFsLmRpc3Bvc2UoKSx0aGlzLl9waWNrZWRQb2ludE9ic2VydmVyJiYodGhpcy5faG9zdC5vblBpY2tlZFBvaW50Q2hhbmdlZE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3BpY2tlZFBvaW50T2JzZXJ2ZXIpLHRoaXMuX3BpY2tlZFBvaW50T2JzZXJ2ZXI9bnVsbCkpfSxlfShldCksdXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciByPXQuY2FsbCh0aGlzLGkpfHx0aGlzO3JldHVybiByLl9jdXJyZW50TWVzaD1lLHIucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ci5tZXNoJiZyLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoMS4xKX0sci5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7ci5tZXNoJiZyLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoMS8xLjEpfSxyLnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ci5tZXNoJiZyLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoLjk1KX0sci5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtyLm1lc2gmJnIubWVzaC5zY2FsaW5nLnNjYWxlSW5QbGFjZSgxLy45NSl9LHJ9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIk1lc2hCdXR0b24zRFwifSxlLnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9jdXJyZW50TWVzaC5nZXRDaGlsZE1lc2hlcygpLmZvckVhY2goZnVuY3Rpb24odCl7dC5tZXRhZGF0YT1lfSksdGhpcy5fY3VycmVudE1lc2h9LGUucHJvdG90eXBlLl9hZmZlY3RNYXRlcmlhbD1mdW5jdGlvbih0KXt9LGV9KGV0KSxjdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9tYXBHcmlkTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQubWVzaDtpZihpKXt0LnBvc2l0aW9uPWUuY2xvbmUoKTt2YXIgcj1zLlRtcFZlY3RvcnMuVmVjdG9yM1swXTtzd2l0Y2goci5jb3B5RnJvbShlKSx0aGlzLm9yaWVudGF0aW9uKXtjYXNlIGl0LkZBQ0VPUklHSU5fT1JJRU5UQVRJT046Y2FzZSBpdC5GQUNFRk9SV0FSRF9PUklFTlRBVElPTjpyLmFkZEluUGxhY2UobmV3IHMuVmVjdG9yMygwLDAsMSkpLGkubG9va0F0KHIpO2JyZWFrO2Nhc2UgaXQuRkFDRUZPUldBUkRSRVZFUlNFRF9PUklFTlRBVElPTjpjYXNlIGl0LkZBQ0VPUklHSU5SRVZFUlNFRF9PUklFTlRBVElPTjpyLmFkZEluUGxhY2UobmV3IHMuVmVjdG9yMygwLDAsLTEpKSxpLmxvb2tBdChyKX19fSxlfShydCksX3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5faXRlcmF0aW9uPTEwMCxlfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXRlcmF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVyYXRpb259LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2l0ZXJhdGlvbiE9PXQmJih0aGlzLl9pdGVyYXRpb249dCxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9tYXBHcmlkTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQubWVzaCxyPXRoaXMuX3NjYXR0ZXJNYXBwaW5nKGUpO2lmKGkpe3N3aXRjaCh0aGlzLm9yaWVudGF0aW9uKXtjYXNlIGl0LkZBQ0VPUklHSU5fT1JJRU5UQVRJT046Y2FzZSBpdC5GQUNFRk9SV0FSRF9PUklFTlRBVElPTjppLmxvb2tBdChuZXcgcy5WZWN0b3IzKDAsMCwxKSk7YnJlYWs7Y2FzZSBpdC5GQUNFRk9SV0FSRFJFVkVSU0VEX09SSUVOVEFUSU9OOmNhc2UgaXQuRkFDRU9SSUdJTlJFVkVSU0VEX09SSUVOVEFUSU9OOmkubG9va0F0KG5ldyBzLlZlY3RvcjMoMCwwLC0xKSl9dC5wb3NpdGlvbj1yfX0sZS5wcm90b3R5cGUuX3NjYXR0ZXJNYXBwaW5nPWZ1bmN0aW9uKHQpe3JldHVybiB0Lng9KDEtMipNYXRoLnJhbmRvbSgpKSp0aGlzLl9jZWxsV2lkdGgsdC55PSgxLTIqTWF0aC5yYW5kb20oKSkqdGhpcy5fY2VsbEhlaWdodCx0fSxlLnByb3RvdHlwZS5fZmluYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MCxpPXRoaXMuX2NoaWxkcmVuO2U8aS5sZW5ndGg7ZSsrKXt2YXIgcj1pW2VdO3IubWVzaCYmdC5wdXNoKHIubWVzaCl9Zm9yKHZhciBuPTA7bjx0aGlzLl9pdGVyYXRpb247bisrKXt0LnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgaT10LnBvc2l0aW9uLmxlbmd0aFNxdWFyZWQoKSxyPWUucG9zaXRpb24ubGVuZ3RoU3F1YXJlZCgpO3JldHVybiBpPHI/MTppPnI/LTE6MH0pO2Zvcih2YXIgbz1NYXRoLnBvdyh0aGlzLm1hcmdpbiwyKSxhPU1hdGgubWF4KHRoaXMuX2NlbGxXaWR0aCx0aGlzLl9jZWxsSGVpZ2h0KSxoPXMuVG1wVmVjdG9ycy5WZWN0b3IyWzBdLGw9cy5UbXBWZWN0b3JzLlZlY3RvcjNbMF0sdT0wO3U8dC5sZW5ndGgtMTt1KyspZm9yKHZhciBjPXUrMTtjPHQubGVuZ3RoO2MrKylpZih1IT1jKXt0W2NdLnBvc2l0aW9uLnN1YnRyYWN0VG9SZWYodFt1XS5wb3NpdGlvbixsKSxoLng9bC54LGgueT1sLnk7dmFyIF89YSxkPWgubGVuZ3RoU3F1YXJlZCgpLW87KGQtPU1hdGgubWluKGQsbykpPE1hdGgucG93KF8sMikmJihoLm5vcm1hbGl6ZSgpLGwuc2NhbGVJblBsYWNlKC41KihfLU1hdGguc3FydChkKSkpLHRbY10ucG9zaXRpb24uYWRkSW5QbGFjZShsKSx0W3VdLnBvc2l0aW9uLnN1YnRyYWN0SW5QbGFjZShsKSl9fX0sZX0ocnQpLGR0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuX3JhZGl1cz01LGV9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyYWRpdXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhZGl1c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fcmFkaXVzIT09dCYmKHRoaXMuX3JhZGl1cz10LHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX21hcEdyaWROb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5tZXNoO2lmKGkpe3ZhciByPXRoaXMuX3NwaGVyaWNhbE1hcHBpbmcoZSk7c3dpdGNoKHQucG9zaXRpb249cix0aGlzLm9yaWVudGF0aW9uKXtjYXNlIGl0LkZBQ0VPUklHSU5fT1JJRU5UQVRJT046aS5sb29rQXQobmV3IHMuVmVjdG9yMygyKnIueCwyKnIueSwyKnIueikpO2JyZWFrO2Nhc2UgaXQuRkFDRU9SSUdJTlJFVkVSU0VEX09SSUVOVEFUSU9OOmkubG9va0F0KG5ldyBzLlZlY3RvcjMoLXIueCwtci55LC1yLnopKTticmVhaztjYXNlIGl0LkZBQ0VGT1JXQVJEX09SSUVOVEFUSU9OOmJyZWFrO2Nhc2UgaXQuRkFDRUZPUldBUkRSRVZFUlNFRF9PUklFTlRBVElPTjppLnJvdGF0ZShzLkF4aXMuWSxNYXRoLlBJLHMuU3BhY2UuTE9DQUwpfX19LGUucHJvdG90eXBlLl9zcGhlcmljYWxNYXBwaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBzLlZlY3RvcjMoMCwwLHRoaXMuX3JhZGl1cyksaT10LnkvdGhpcy5fcmFkaXVzLHI9LXQueC90aGlzLl9yYWRpdXM7cmV0dXJuIHMuTWF0cml4LlJvdGF0aW9uWWF3UGl0Y2hSb2xsVG9SZWYocixpLDAscy5UbXBWZWN0b3JzLk1hdHJpeFswXSkscy5WZWN0b3IzLlRyYW5zZm9ybU5vcm1hbChlLHMuVG1wVmVjdG9ycy5NYXRyaXhbMF0pfSxlfShydCksZnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9pc1ZlcnRpY2FsPSExLGkubWFyZ2luPS4xLGkuX2lzVmVydGljYWw9ZSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNWZXJ0aWNhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faXNWZXJ0aWNhbCE9PXQmJih0aGlzLl9pc1ZlcnRpY2FsPXQscy5Ub29scy5TZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlLl9hcnJhbmdlQ2hpbGRyZW4oKX0pKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fYXJyYW5nZUNoaWxkcmVuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9MCxpPTAscj0wLG49W10sbz1zLk1hdHJpeC5JbnZlcnQodGhpcy5ub2RlLmNvbXB1dGVXb3JsZE1hdHJpeCghMCkpLGE9MCxoPXRoaXMuX2NoaWxkcmVuO2E8aC5sZW5ndGg7YSsrKXtpZigoZj1oW2FdKS5tZXNoKXtyKyssZi5tZXNoLmNvbXB1dGVXb3JsZE1hdHJpeCghMCksZi5tZXNoLmdldFdvcmxkTWF0cml4KCkubXVsdGlwbHlUb1JlZihvLHMuVG1wVmVjdG9ycy5NYXRyaXhbMF0pO3ZhciBsPWYubWVzaC5nZXRCb3VuZGluZ0luZm8oKS5ib3VuZGluZ0JveCx1PXMuVmVjdG9yMy5UcmFuc2Zvcm1Ob3JtYWwobC5leHRlbmRTaXplLHMuVG1wVmVjdG9ycy5NYXRyaXhbMF0pO24ucHVzaCh1KSx0aGlzLl9pc1ZlcnRpY2FsP2krPXUueTplKz11Lnh9fXRoaXMuX2lzVmVydGljYWw/aSs9KHItMSkqdGhpcy5tYXJnaW4vMjplKz0oci0xKSp0aGlzLm1hcmdpbi8yLHQ9dGhpcy5faXNWZXJ0aWNhbD8taTotZTtmb3IodmFyIGM9MCxfPTAsZD10aGlzLl9jaGlsZHJlbjtfPGQubGVuZ3RoO18rKyl7dmFyIGY7aWYoKGY9ZFtfXSkubWVzaCl7ci0tO3U9bltjKytdO3RoaXMuX2lzVmVydGljYWw/KGYucG9zaXRpb24ueT10K3UueSxmLnBvc2l0aW9uLng9MCx0Kz0yKnUueSk6KGYucG9zaXRpb24ueD10K3UueCxmLnBvc2l0aW9uLnk9MCx0Kz0yKnUueCksdCs9cj4wP3RoaXMubWFyZ2luOjB9fX0sZX0oaXQpLHB0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2YXIgZT10aGlzO3RoaXMuX2xhc3RDb250cm9sT3Zlcj17fSx0aGlzLl9sYXN0Q29udHJvbERvd249e30sdGhpcy5vblBpY2tlZFBvaW50Q2hhbmdlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLl9zaGFyZWRNYXRlcmlhbHM9e30sdGhpcy5fc2NlbmU9dHx8cy5FbmdpbmVTdG9yZS5MYXN0Q3JlYXRlZFNjZW5lLHRoaXMuX3NjZW5lRGlzcG9zZU9ic2VydmVyPXRoaXMuX3NjZW5lLm9uRGlzcG9zZU9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ZS5fc2NlbmVEaXNwb3NlT2JzZXJ2ZXI9bnVsbCxlLl91dGlsaXR5TGF5ZXI9bnVsbCxlLmRpc3Bvc2UoKX0pLHRoaXMuX3V0aWxpdHlMYXllcj1uZXcgcy5VdGlsaXR5TGF5ZXJSZW5kZXJlcih0aGlzLl9zY2VuZSksdGhpcy5fdXRpbGl0eUxheWVyLm9ubHlDaGVja1BvaW50ZXJEb3duRXZlbnRzPSExLHRoaXMuX3V0aWxpdHlMYXllci5waWNrVXRpbGl0eVNjZW5lRmlyc3Q9ITEsdGhpcy5fdXRpbGl0eUxheWVyLm1haW5TY2VuZVRyYWNrZXJQcmVkaWNhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQubWV0YWRhdGEmJnQubWV0YWRhdGEuX25vZGV9LHRoaXMuX3Jvb3RDb250YWluZXI9bmV3IGl0KFwiUm9vdENvbnRhaW5lclwiKSx0aGlzLl9yb290Q29udGFpbmVyLl9ob3N0PXRoaXM7dmFyIGk9dGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lO3RoaXMuX3BvaW50ZXJPdXRPYnNlcnZlcj10aGlzLl91dGlsaXR5TGF5ZXIub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7ZS5faGFuZGxlUG9pbnRlck91dCh0LCEwKX0pLHRoaXMuX3BvaW50ZXJPYnNlcnZlcj1pLm9uUG9pbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQsaSl7ZS5fZG9QaWNraW5nKHQpfSksdGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lLmF1dG9DbGVhcj0hMSx0aGlzLl91dGlsaXR5TGF5ZXIudXRpbGl0eUxheWVyU2NlbmUuYXV0b0NsZWFyRGVwdGhBbmRTdGVuY2lsPSExLG5ldyBzLkhlbWlzcGhlcmljTGlnaHQoXCJoZW1pXCIscy5WZWN0b3IzLlVwKCksdGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2NlbmVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjZW5lfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInV0aWxpdHlMYXllclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXRpbGl0eUxheWVyfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9oYW5kbGVQb2ludGVyT3V0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fbGFzdENvbnRyb2xPdmVyW3RdO2kmJihpLl9vblBvaW50ZXJPdXQoaSksZGVsZXRlIHRoaXMuX2xhc3RDb250cm9sT3Zlclt0XSksZSYmdGhpcy5fbGFzdENvbnRyb2xEb3duW3RdJiYodGhpcy5fbGFzdENvbnRyb2xEb3duW3RdLmZvcmNlUG9pbnRlclVwKCksZGVsZXRlIHRoaXMuX2xhc3RDb250cm9sRG93blt0XSksdGhpcy5vblBpY2tlZFBvaW50Q2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKG51bGwpfSx0LnByb3RvdHlwZS5fZG9QaWNraW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl91dGlsaXR5TGF5ZXJ8fCF0aGlzLl91dGlsaXR5TGF5ZXIuc2hvdWxkUmVuZGVyfHwhdGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lLmFjdGl2ZUNhbWVyYSlyZXR1cm4hMTt2YXIgZT10LmV2ZW50LGk9ZS5wb2ludGVySWR8fDAscj1lLmJ1dHRvbixuPXQucGlja0luZm87aWYoIW58fCFuLmhpdClyZXR1cm4gdGhpcy5faGFuZGxlUG9pbnRlck91dChpLHQudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUlVQKSwhMTt2YXIgbz1uLnBpY2tlZE1lc2gubWV0YWRhdGE7cmV0dXJuIG4ucGlja2VkUG9pbnQmJnRoaXMub25QaWNrZWRQb2ludENoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuLnBpY2tlZFBvaW50KSxvLl9wcm9jZXNzT2JzZXJ2YWJsZXModC50eXBlLG4ucGlja2VkUG9pbnQsaSxyKXx8dC50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSTU9WRSYmKHRoaXMuX2xhc3RDb250cm9sT3ZlcltpXSYmdGhpcy5fbGFzdENvbnRyb2xPdmVyW2ldLl9vblBvaW50ZXJPdXQodGhpcy5fbGFzdENvbnRyb2xPdmVyW2ldKSxkZWxldGUgdGhpcy5fbGFzdENvbnRyb2xPdmVyW2ldKSx0LnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJVUCYmKHRoaXMuX2xhc3RDb250cm9sRG93bltlLnBvaW50ZXJJZF0mJih0aGlzLl9sYXN0Q29udHJvbERvd25bZS5wb2ludGVySWRdLmZvcmNlUG9pbnRlclVwKCksZGVsZXRlIHRoaXMuX2xhc3RDb250cm9sRG93bltlLnBvaW50ZXJJZF0pLFwidG91Y2hcIj09PWUucG9pbnRlclR5cGUmJnRoaXMuX2hhbmRsZVBvaW50ZXJPdXQoaSwhMSkpLCEwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJyb290Q29udGFpbmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNvbnRhaW5zQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcm9vdENvbnRhaW5lci5jb250YWluc0NvbnRyb2wodCl9LHQucHJvdG90eXBlLmFkZENvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXIuYWRkQ29udHJvbCh0KSx0aGlzfSx0LnByb3RvdHlwZS5yZW1vdmVDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyLnJlbW92ZUNvbnRyb2wodCksdGhpc30sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9yb290Q29udGFpbmVyLmRpc3Bvc2UoKSx0aGlzLl9zaGFyZWRNYXRlcmlhbHMpdGhpcy5fc2hhcmVkTWF0ZXJpYWxzLmhhc093blByb3BlcnR5KHQpJiZ0aGlzLl9zaGFyZWRNYXRlcmlhbHNbdF0uZGlzcG9zZSgpO3RoaXMuX3NoYXJlZE1hdGVyaWFscz17fSx0aGlzLl9wb2ludGVyT3V0T2JzZXJ2ZXImJnRoaXMuX3V0aWxpdHlMYXllciYmKHRoaXMuX3V0aWxpdHlMYXllci5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9wb2ludGVyT3V0T2JzZXJ2ZXIpLHRoaXMuX3BvaW50ZXJPdXRPYnNlcnZlcj1udWxsKSx0aGlzLm9uUGlja2VkUG9pbnRDaGFuZ2VkT2JzZXJ2YWJsZS5jbGVhcigpO3ZhciBlPXRoaXMuX3V0aWxpdHlMYXllcj90aGlzLl91dGlsaXR5TGF5ZXIudXRpbGl0eUxheWVyU2NlbmU6bnVsbDtlJiZ0aGlzLl9wb2ludGVyT2JzZXJ2ZXImJihlLm9uUG9pbnRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3BvaW50ZXJPYnNlcnZlciksdGhpcy5fcG9pbnRlck9ic2VydmVyPW51bGwpLHRoaXMuX3NjZW5lJiZ0aGlzLl9zY2VuZURpc3Bvc2VPYnNlcnZlciYmKHRoaXMuX3NjZW5lLm9uRGlzcG9zZU9ic2VydmFibGUucmVtb3ZlKHRoaXMuX3NjZW5lRGlzcG9zZU9ic2VydmVyKSx0aGlzLl9zY2VuZURpc3Bvc2VPYnNlcnZlcj1udWxsKSx0aGlzLl91dGlsaXR5TGF5ZXImJnRoaXMuX3V0aWxpdHlMYXllci5kaXNwb3NlKCl9LHR9KCk7aS5kKGUsXCJBZHZhbmNlZER5bmFtaWNUZXh0dXJlXCIsZnVuY3Rpb24oKXtyZXR1cm4gS30pLGkuZChlLFwiQWR2YW5jZWREeW5hbWljVGV4dHVyZUluc3RydW1lbnRhdGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIFp9KSxpLmQoZSxcIlZlY3RvcjJXaXRoSW5mb1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSxpLmQoZSxcIk1hdHJpeDJEXCIsZnVuY3Rpb24oKXtyZXR1cm4gZn0pLGkuZChlLFwiTWVhc3VyZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIF99KSxpLmQoZSxcIk11bHRpTGluZVBvaW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gQX0pLGkuZChlLFwiU3R5bGVcIixmdW5jdGlvbigpe3JldHVybiBxfSksaS5kKGUsXCJWYWx1ZUFuZFVuaXRcIixmdW5jdGlvbigpe3JldHVybiBhfSksaS5kKGUsXCJYbWxMb2FkZXJcIixmdW5jdGlvbigpe3JldHVybiBKfSksaS5kKGUsXCJCdXR0b25cIixmdW5jdGlvbigpe3JldHVybiBPfSksaS5kKGUsXCJDaGVja2JveFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHd9KSxpLmQoZSxcIkNvbG9yUGlja2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gTX0pLGkuZChlLFwiQ29udGFpbmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLGkuZChlLFwiQ29udHJvbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSxpLmQoZSxcIkVsbGlwc2VcIixmdW5jdGlvbigpe3JldHVybiBQfSksaS5kKGUsXCJHcmlkXCIsZnVuY3Rpb24oKXtyZXR1cm4geH0pLGkuZChlLFwiSW1hZ2VcIixmdW5jdGlvbigpe3JldHVybiB2fSksaS5kKGUsXCJJbnB1dFRleHRcIixmdW5jdGlvbigpe3JldHVybiBUfSksaS5kKGUsXCJJbnB1dFBhc3N3b3JkXCIsZnVuY3Rpb24oKXtyZXR1cm4ga30pLGkuZChlLFwiTGluZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSxpLmQoZSxcIk11bHRpTGluZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSxpLmQoZSxcIlJhZGlvQnV0dG9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gRX0pLGkuZChlLFwiU3RhY2tQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEN9KSxpLmQoZSxcIlNlbGVjdG9yR3JvdXBcIixmdW5jdGlvbigpe3JldHVybiBEfSksaS5kKGUsXCJDaGVja2JveEdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gQn0pLGkuZChlLFwiUmFkaW9Hcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJuIE59KSxpLmQoZSxcIlNsaWRlckdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gVn0pLGkuZChlLFwiU2VsZWN0aW9uUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiBIfSksaS5kKGUsXCJTY3JvbGxWaWV3ZXJcIixmdW5jdGlvbigpe3JldHVybiB6fSksaS5kKGUsXCJUZXh0V3JhcHBpbmdcIixmdW5jdGlvbigpe3JldHVybiBifSksaS5kKGUsXCJUZXh0QmxvY2tcIixmdW5jdGlvbigpe3JldHVybiB5fSksaS5kKGUsXCJLZXlQcm9wZXJ0eVNldFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEd9KSxpLmQoZSxcIlZpcnR1YWxLZXlib2FyZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFh9KSxpLmQoZSxcIlJlY3RhbmdsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIG19KSxpLmQoZSxcIkRpc3BsYXlHcmlkXCIsZnVuY3Rpb24oKXtyZXR1cm4gWX0pLGkuZChlLFwiQmFzZVNsaWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIEx9KSxpLmQoZSxcIlNsaWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIFJ9KSxpLmQoZSxcIkltYWdlQmFzZWRTbGlkZXJcIixmdW5jdGlvbigpe3JldHVybiBVfSksaS5kKGUsXCJTY3JvbGxCYXJcIixmdW5jdGlvbigpe3JldHVybiBqfSksaS5kKGUsXCJJbWFnZVNjcm9sbEJhclwiLGZ1bmN0aW9uKCl7cmV0dXJuIFd9KSxpLmQoZSxcIm5hbWVcIixmdW5jdGlvbigpe3JldHVyblwiU3RhdGljc1wifSksaS5kKGUsXCJHVUkzRE1hbmFnZXJcIixmdW5jdGlvbigpe3JldHVybiBwdH0pLGkuZChlLFwiVmVjdG9yM1dpdGhJbmZvXCIsZnVuY3Rpb24oKXtyZXR1cm4gUX0pLGkuZChlLFwiQWJzdHJhY3RCdXR0b24zRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHR0fSksaS5kKGUsXCJCdXR0b24zRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGV0fSksaS5kKGUsXCJDb250YWluZXIzRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGl0fSksaS5kKGUsXCJDb250cm9sM0RcIixmdW5jdGlvbigpe3JldHVybiAkfSksaS5kKGUsXCJDeWxpbmRlclBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gbnR9KSxpLmQoZSxcIkhvbG9ncmFwaGljQnV0dG9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gbHR9KSxpLmQoZSxcIk1lc2hCdXR0b24zRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHV0fSksaS5kKGUsXCJQbGFuZVBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSxpLmQoZSxcIlNjYXR0ZXJQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIF90fSksaS5kKGUsXCJTcGhlcmVQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGR0fSksaS5kKGUsXCJTdGFja1BhbmVsM0RcIixmdW5jdGlvbigpe3JldHVybiBmdH0pLGkuZChlLFwiVm9sdW1lQmFzZWRQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ0fSksaS5kKGUsXCJGbHVlbnRNYXRlcmlhbERlZmluZXNcIixmdW5jdGlvbigpe3JldHVybiBhdH0pLGkuZChlLFwiRmx1ZW50TWF0ZXJpYWxcIixmdW5jdGlvbigpe3JldHVybiBodH0pfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpLGZ1bmN0aW9uKHQpe3ZhciByPWkoMSk7aS5kKGUsXCJBZHZhbmNlZER5bmFtaWNUZXh0dXJlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5BZHZhbmNlZER5bmFtaWNUZXh0dXJlfSksaS5kKGUsXCJBZHZhbmNlZER5bmFtaWNUZXh0dXJlSW5zdHJ1bWVudGF0aW9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5BZHZhbmNlZER5bmFtaWNUZXh0dXJlSW5zdHJ1bWVudGF0aW9ufSksaS5kKGUsXCJWZWN0b3IyV2l0aEluZm9cIixmdW5jdGlvbigpe3JldHVybiByLlZlY3RvcjJXaXRoSW5mb30pLGkuZChlLFwiTWF0cml4MkRcIixmdW5jdGlvbigpe3JldHVybiByLk1hdHJpeDJEfSksaS5kKGUsXCJNZWFzdXJlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5NZWFzdXJlfSksaS5kKGUsXCJNdWx0aUxpbmVQb2ludFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuTXVsdGlMaW5lUG9pbnR9KSxpLmQoZSxcIlN0eWxlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TdHlsZX0pLGkuZChlLFwiVmFsdWVBbmRVbml0XCIsZnVuY3Rpb24oKXtyZXR1cm4gci5WYWx1ZUFuZFVuaXR9KSxpLmQoZSxcIlhtbExvYWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuWG1sTG9hZGVyfSksaS5kKGUsXCJHVUkzRE1hbmFnZXJcIixmdW5jdGlvbigpe3JldHVybiByLkdVSTNETWFuYWdlcn0pLGkuZChlLFwiVmVjdG9yM1dpdGhJbmZvXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5WZWN0b3IzV2l0aEluZm99KSxpLmQoZSxcIkJ1dHRvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQnV0dG9ufSksaS5kKGUsXCJDaGVja2JveFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ2hlY2tib3h9KSxpLmQoZSxcIkNvbG9yUGlja2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5Db2xvclBpY2tlcn0pLGkuZChlLFwiQ29udGFpbmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5Db250YWluZXJ9KSxpLmQoZSxcIkNvbnRyb2xcIixmdW5jdGlvbigpe3JldHVybiByLkNvbnRyb2x9KSxpLmQoZSxcIkVsbGlwc2VcIixmdW5jdGlvbigpe3JldHVybiByLkVsbGlwc2V9KSxpLmQoZSxcIkdyaWRcIixmdW5jdGlvbigpe3JldHVybiByLkdyaWR9KSxpLmQoZSxcIkltYWdlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5JbWFnZX0pLGkuZChlLFwiSW5wdXRUZXh0XCIsZnVuY3Rpb24oKXtyZXR1cm4gci5JbnB1dFRleHR9KSxpLmQoZSxcIklucHV0UGFzc3dvcmRcIixmdW5jdGlvbigpe3JldHVybiByLklucHV0UGFzc3dvcmR9KSxpLmQoZSxcIkxpbmVcIixmdW5jdGlvbigpe3JldHVybiByLkxpbmV9KSxpLmQoZSxcIk11bHRpTGluZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuTXVsdGlMaW5lfSksaS5kKGUsXCJSYWRpb0J1dHRvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuUmFkaW9CdXR0b259KSxpLmQoZSxcIlN0YWNrUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiByLlN0YWNrUGFuZWx9KSxpLmQoZSxcIlNlbGVjdG9yR3JvdXBcIixmdW5jdGlvbigpe3JldHVybiByLlNlbGVjdG9yR3JvdXB9KSxpLmQoZSxcIkNoZWNrYm94R3JvdXBcIixmdW5jdGlvbigpe3JldHVybiByLkNoZWNrYm94R3JvdXB9KSxpLmQoZSxcIlJhZGlvR3JvdXBcIixmdW5jdGlvbigpe3JldHVybiByLlJhZGlvR3JvdXB9KSxpLmQoZSxcIlNsaWRlckdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TbGlkZXJHcm91cH0pLGkuZChlLFwiU2VsZWN0aW9uUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiByLlNlbGVjdGlvblBhbmVsfSksaS5kKGUsXCJTY3JvbGxWaWV3ZXJcIixmdW5jdGlvbigpe3JldHVybiByLlNjcm9sbFZpZXdlcn0pLGkuZChlLFwiVGV4dFdyYXBwaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5UZXh0V3JhcHBpbmd9KSxpLmQoZSxcIlRleHRCbG9ja1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVGV4dEJsb2NrfSksaS5kKGUsXCJLZXlQcm9wZXJ0eVNldFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuS2V5UHJvcGVydHlTZXR9KSxpLmQoZSxcIlZpcnR1YWxLZXlib2FyZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVmlydHVhbEtleWJvYXJkfSksaS5kKGUsXCJSZWN0YW5nbGVcIixmdW5jdGlvbigpe3JldHVybiByLlJlY3RhbmdsZX0pLGkuZChlLFwiRGlzcGxheUdyaWRcIixmdW5jdGlvbigpe3JldHVybiByLkRpc3BsYXlHcmlkfSksaS5kKGUsXCJCYXNlU2xpZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5CYXNlU2xpZGVyfSksaS5kKGUsXCJTbGlkZXJcIixmdW5jdGlvbigpe3JldHVybiByLlNsaWRlcn0pLGkuZChlLFwiSW1hZ2VCYXNlZFNsaWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuSW1hZ2VCYXNlZFNsaWRlcn0pLGkuZChlLFwiU2Nyb2xsQmFyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TY3JvbGxCYXJ9KSxpLmQoZSxcIkltYWdlU2Nyb2xsQmFyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5JbWFnZVNjcm9sbEJhcn0pLGkuZChlLFwibmFtZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIubmFtZX0pLGkuZChlLFwiQWJzdHJhY3RCdXR0b24zRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQWJzdHJhY3RCdXR0b24zRH0pLGkuZChlLFwiQnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiByLkJ1dHRvbjNEfSksaS5kKGUsXCJDb250YWluZXIzRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ29udGFpbmVyM0R9KSxpLmQoZSxcIkNvbnRyb2wzRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ29udHJvbDNEfSksaS5kKGUsXCJDeWxpbmRlclBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5DeWxpbmRlclBhbmVsfSksaS5kKGUsXCJIb2xvZ3JhcGhpY0J1dHRvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuSG9sb2dyYXBoaWNCdXR0b259KSxpLmQoZSxcIk1lc2hCdXR0b24zRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuTWVzaEJ1dHRvbjNEfSksaS5kKGUsXCJQbGFuZVBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5QbGFuZVBhbmVsfSksaS5kKGUsXCJTY2F0dGVyUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiByLlNjYXR0ZXJQYW5lbH0pLGkuZChlLFwiU3BoZXJlUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiByLlNwaGVyZVBhbmVsfSksaS5kKGUsXCJTdGFja1BhbmVsM0RcIixmdW5jdGlvbigpe3JldHVybiByLlN0YWNrUGFuZWwzRH0pLGkuZChlLFwiVm9sdW1lQmFzZWRQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVm9sdW1lQmFzZWRQYW5lbH0pLGkuZChlLFwiRmx1ZW50TWF0ZXJpYWxEZWZpbmVzXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5GbHVlbnRNYXRlcmlhbERlZmluZXN9KSxpLmQoZSxcIkZsdWVudE1hdGVyaWFsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5GbHVlbnRNYXRlcmlhbH0pO3ZhciBuPXZvaWQgMCE9PXQ/dDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDA7dm9pZCAwIT09biYmKG4uQkFCWUxPTj1uLkJBQllMT058fHt9LG4uQkFCWUxPTi5HVUk9cil9LmNhbGwodGhpcyxpKDMpKX0sZnVuY3Rpb24odCxlKXt2YXIgaTtpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5e2k9aXx8bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKX1jYXRjaCh0KXtcIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiYoaT13aW5kb3cpfXQuZXhwb3J0cz1pfV0pfSk7IiwiY2xhc3MgU3lzdGVtTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy5fc3lzdGVtcyA9IFtdO1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zID0gW107IC8vIFN5c3RlbXMgdGhhdCBoYXZlIGBleGVjdXRlYCBtZXRob2RcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5sYXN0RXhlY3V0ZWRTeXN0ZW0gPSBudWxsO1xuICB9XG5cbiAgcmVnaXN0ZXJTeXN0ZW0oU3lzdGVtLCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5fc3lzdGVtcy5maW5kKHMgPT4gcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBTeXN0ZW0ubmFtZSkgIT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKGBTeXN0ZW0gJyR7U3lzdGVtLm5hbWV9JyBhbHJlYWR5IHJlZ2lzdGVyZWQuYCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgc3lzdGVtID0gbmV3IFN5c3RlbSh0aGlzLndvcmxkLCBhdHRyaWJ1dGVzKTtcbiAgICBpZiAoc3lzdGVtLmluaXQpIHN5c3RlbS5pbml0KCk7XG4gICAgc3lzdGVtLm9yZGVyID0gdGhpcy5fc3lzdGVtcy5sZW5ndGg7XG4gICAgdGhpcy5fc3lzdGVtcy5wdXNoKHN5c3RlbSk7XG4gICAgaWYgKHN5c3RlbS5leGVjdXRlKSB7XG4gICAgICB0aGlzLl9leGVjdXRlU3lzdGVtcy5wdXNoKHN5c3RlbSk7XG4gICAgICB0aGlzLnNvcnRTeXN0ZW1zKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc29ydFN5c3RlbXMoKSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5IHx8IGEub3JkZXIgLSBiLm9yZGVyO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0U3lzdGVtKFN5c3RlbSkge1xuICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zLmZpbmQocyA9PiBzIGluc3RhbmNlb2YgU3lzdGVtKTtcbiAgfVxuXG4gIGdldFN5c3RlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N5c3RlbXM7XG4gIH1cblxuICByZW1vdmVTeXN0ZW0oU3lzdGVtKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fc3lzdGVtcy5pbmRleE9mKFN5c3RlbSk7XG4gICAgaWYgKCF+aW5kZXgpIHJldHVybjtcblxuICAgIHRoaXMuX3N5c3RlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIGV4ZWN1dGVTeXN0ZW0oc3lzdGVtLCBkZWx0YSwgdGltZSkge1xuICAgIGlmIChzeXN0ZW0uaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGlmIChzeXN0ZW0uY2FuRXhlY3V0ZSgpKSB7XG4gICAgICAgIGxldCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgc3lzdGVtLmV4ZWN1dGUoZGVsdGEsIHRpbWUpO1xuICAgICAgICBzeXN0ZW0uZXhlY3V0ZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgdGhpcy5sYXN0RXhlY3V0ZWRTeXN0ZW0gPSBzeXN0ZW07XG4gICAgICAgIHN5c3RlbS5jbGVhckV2ZW50cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuZm9yRWFjaChzeXN0ZW0gPT4gc3lzdGVtLnN0b3AoKSk7XG4gIH1cblxuICBleGVjdXRlKGRlbHRhLCB0aW1lLCBmb3JjZVBsYXkpIHtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcy5mb3JFYWNoKFxuICAgICAgc3lzdGVtID0+XG4gICAgICAgIChmb3JjZVBsYXkgfHwgc3lzdGVtLmVuYWJsZWQpICYmIHRoaXMuZXhlY3V0ZVN5c3RlbShzeXN0ZW0sIGRlbHRhLCB0aW1lKVxuICAgICk7XG4gIH1cblxuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7XG4gICAgICBudW1TeXN0ZW1zOiB0aGlzLl9zeXN0ZW1zLmxlbmd0aCxcbiAgICAgIHN5c3RlbXM6IHt9XG4gICAgfTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fc3lzdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHN5c3RlbSA9IHRoaXMuX3N5c3RlbXNbaV07XG4gICAgICB2YXIgc3lzdGVtU3RhdHMgPSAoc3RhdHMuc3lzdGVtc1tzeXN0ZW0uY29uc3RydWN0b3IubmFtZV0gPSB7XG4gICAgICAgIHF1ZXJpZXM6IHt9XG4gICAgICB9KTtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gc3lzdGVtLmN0eCkge1xuICAgICAgICBzeXN0ZW1TdGF0cy5xdWVyaWVzW25hbWVdID0gc3lzdGVtLmN0eFtuYW1lXS5zdGF0cygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgRXZlbnREaXNwYXRjaGVyXG4gKi9cbmNsYXNzIEV2ZW50RGlzcGF0Y2hlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMuc3RhdHMgPSB7XG4gICAgICBmaXJlZDogMCxcbiAgICAgIGhhbmRsZWQ6IDBcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBldmVudCBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBDYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIGV2ZW50IGlzIGZpcmVkXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnROYW1lXSA9IFtdO1xuICAgIH1cblxuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudE5hbWVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBsaXN0IG9mIGxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIENhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAqL1xuICBoYXNFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV0uaW5kZXhPZihsaXN0ZW5lcikgIT09IC0xXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byByZW1vdmVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRcbiAgICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgIHZhciBsaXN0ZW5lckFycmF5ID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJBcnJheS5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaCBhbiBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGRpc3BhdGNoXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgKE9wdGlvbmFsKSBFbnRpdHkgdG8gZW1pdFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gY29tcG9uZW50XG4gICAqL1xuICBkaXNwYXRjaEV2ZW50KGV2ZW50TmFtZSwgZW50aXR5LCBjb21wb25lbnQpIHtcbiAgICB0aGlzLnN0YXRzLmZpcmVkKys7XG5cbiAgICB2YXIgbGlzdGVuZXJBcnJheSA9IHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBhcnJheSA9IGxpc3RlbmVyQXJyYXkuc2xpY2UoMCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyYXlbaV0uY2FsbCh0aGlzLCBlbnRpdHksIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHN0YXRzIGNvdW50ZXJzXG4gICAqL1xuICByZXNldENvdW50ZXJzKCkge1xuICAgIHRoaXMuc3RhdHMuZmlyZWQgPSB0aGlzLnN0YXRzLmhhbmRsZWQgPSAwO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBuYW1lIG9mIGEgY29tcG9uZW50XG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXROYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50Lm5hbWU7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgdmFsaWQgcHJvcGVydHkgbmFtZSBmb3IgdGhlIENvbXBvbmVudFxuICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29tcG9uZW50UHJvcGVydHlOYW1lKENvbXBvbmVudCkge1xuICB2YXIgbmFtZSA9IGdldE5hbWUoQ29tcG9uZW50KTtcbiAgcmV0dXJuIG5hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIEdldCBhIGtleSBmcm9tIGEgbGlzdCBvZiBjb21wb25lbnRzXG4gKiBAcGFyYW0ge0FycmF5KENvbXBvbmVudCl9IENvbXBvbmVudHMgQXJyYXkgb2YgY29tcG9uZW50cyB0byBnZW5lcmF0ZSB0aGUga2V5XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBxdWVyeUtleShDb21wb25lbnRzKSB7XG4gIHZhciBuYW1lcyA9IFtdO1xuICBmb3IgKHZhciBuID0gMDsgbiA8IENvbXBvbmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICB2YXIgVCA9IENvbXBvbmVudHNbbl07XG4gICAgaWYgKHR5cGVvZiBUID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB2YXIgb3BlcmF0b3IgPSBULm9wZXJhdG9yID09PSBcIm5vdFwiID8gXCIhXCIgOiBULm9wZXJhdG9yO1xuICAgICAgbmFtZXMucHVzaChvcGVyYXRvciArIGdldE5hbWUoVC5Db21wb25lbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZXMucHVzaChnZXROYW1lKFQpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZXMuc29ydCgpLmpvaW4oXCItXCIpO1xufVxuXG5jbGFzcyBRdWVyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5KENvbXBvbmVudCl9IENvbXBvbmVudHMgTGlzdCBvZiB0eXBlcyBvZiBjb21wb25lbnRzIHRvIHF1ZXJ5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihDb21wb25lbnRzLCBtYW5hZ2VyKSB7XG4gICAgdGhpcy5Db21wb25lbnRzID0gW107XG4gICAgdGhpcy5Ob3RDb21wb25lbnRzID0gW107XG5cbiAgICBDb21wb25lbnRzLmZvckVhY2goY29tcG9uZW50ID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHRoaXMuTm90Q29tcG9uZW50cy5wdXNoKGNvbXBvbmVudC5Db21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5Db21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLkNvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjcmVhdGUgYSBxdWVyeSB3aXRob3V0IGNvbXBvbmVudHNcIik7XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdGllcyA9IFtdO1xuXG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XG5cbiAgICAvLyBUaGlzIHF1ZXJ5IGlzIGJlaW5nIHVzZWQgYnkgYSByZWFjdGl2ZSBzeXN0ZW1cbiAgICB0aGlzLnJlYWN0aXZlID0gZmFsc2U7XG5cbiAgICB0aGlzLmtleSA9IHF1ZXJ5S2V5KENvbXBvbmVudHMpO1xuXG4gICAgLy8gRmlsbCB0aGUgcXVlcnkgd2l0aCB0aGUgZXhpc3RpbmcgZW50aXRpZXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hbmFnZXIuX2VudGl0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZW50aXR5ID0gbWFuYWdlci5fZW50aXRpZXNbaV07XG4gICAgICBpZiAodGhpcy5tYXRjaChlbnRpdHkpKSB7XG4gICAgICAgIC8vIEB0b2RvID8/PyB0aGlzLmFkZEVudGl0eShlbnRpdHkpOyA9PiBwcmV2ZW50aW5nIHRoZSBldmVudCB0byBiZSBnZW5lcmF0ZWRcbiAgICAgICAgZW50aXR5LnF1ZXJpZXMucHVzaCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBlbnRpdHkgdG8gdGhpcyBxdWVyeVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqL1xuICBhZGRFbnRpdHkoZW50aXR5KSB7XG4gICAgZW50aXR5LnF1ZXJpZXMucHVzaCh0aGlzKTtcbiAgICB0aGlzLmVudGl0aWVzLnB1c2goZW50aXR5KTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCwgZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZW50aXR5IGZyb20gdGhpcyBxdWVyeVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqL1xuICByZW1vdmVFbnRpdHkoZW50aXR5KSB7XG4gICAgbGV0IGluZGV4ID0gdGhpcy5lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG4gICAgaWYgKH5pbmRleCkge1xuICAgICAgdGhpcy5lbnRpdGllcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICBpbmRleCA9IGVudGl0eS5xdWVyaWVzLmluZGV4T2YodGhpcyk7XG4gICAgICBlbnRpdHkucXVlcmllcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBRdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQsXG4gICAgICAgIGVudGl0eVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBtYXRjaChlbnRpdHkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZW50aXR5Lmhhc0FsbENvbXBvbmVudHModGhpcy5Db21wb25lbnRzKSAmJlxuICAgICAgIWVudGl0eS5oYXNBbnlDb21wb25lbnRzKHRoaXMuTm90Q29tcG9uZW50cylcbiAgICApO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgcmVhY3RpdmU6IHRoaXMucmVhY3RpdmUsXG4gICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIGluY2x1ZGVkOiB0aGlzLkNvbXBvbmVudHMubWFwKEMgPT4gQy5uYW1lKSxcbiAgICAgICAgbm90OiB0aGlzLk5vdENvbXBvbmVudHMubWFwKEMgPT4gQy5uYW1lKVxuICAgICAgfSxcbiAgICAgIG51bUVudGl0aWVzOiB0aGlzLmVudGl0aWVzLmxlbmd0aFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHN0YXRzIGZvciB0aGlzIHF1ZXJ5XG4gICAqL1xuICBzdGF0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbnVtQ29tcG9uZW50czogdGhpcy5Db21wb25lbnRzLmxlbmd0aCxcbiAgICAgIG51bUVudGl0aWVzOiB0aGlzLmVudGl0aWVzLmxlbmd0aFxuICAgIH07XG4gIH1cbn1cblxuUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCA9IFwiUXVlcnkjRU5USVRZX0FEREVEXCI7XG5RdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQgPSBcIlF1ZXJ5I0VOVElUWV9SRU1PVkVEXCI7XG5RdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQgPSBcIlF1ZXJ5I0NPTVBPTkVOVF9DSEFOR0VEXCI7XG5cbnZhciBuZXh0SWQgPSAwO1xuXG5jbGFzcyBFbnRpdHkge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQgfHwgbnVsbDtcblxuICAgIC8vIFVuaXF1ZSBJRCBmb3IgdGhpcyBlbnRpdHlcbiAgICB0aGlzLmlkID0gbmV4dElkKys7XG5cbiAgICAvLyBMaXN0IG9mIGNvbXBvbmVudHMgdHlwZXMgdGhlIGVudGl0eSBoYXNcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlcyA9IFtdO1xuXG4gICAgLy8gSW5zdGFuY2Ugb2YgdGhlIGNvbXBvbmVudHNcbiAgICB0aGlzLl9jb21wb25lbnRzID0ge307XG5cbiAgICB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmUgPSB7fTtcblxuICAgIC8vIFF1ZXJpZXMgd2hlcmUgdGhlIGVudGl0eSBpcyBhZGRlZFxuICAgIHRoaXMucXVlcmllcyA9IFtdO1xuXG4gICAgLy8gVXNlZCBmb3IgZGVmZXJyZWQgcmVtb3ZhbFxuICAgIHRoaXMuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUgPSBbXTtcblxuICAgIHRoaXMuYWxpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIENPTVBPTkVOVFNcblxuICBnZXRDb21wb25lbnQoQ29tcG9uZW50LCBpbmNsdWRlUmVtb3ZlZCkge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzW0NvbXBvbmVudC5uYW1lXTtcblxuICAgIGlmICghY29tcG9uZW50ICYmIGluY2x1ZGVSZW1vdmVkID09PSB0cnVlKSB7XG4gICAgICBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmVbQ29tcG9uZW50Lm5hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiAgY29tcG9uZW50O1xuICB9XG5cbiAgZ2V0UmVtb3ZlZENvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5uYW1lXTtcbiAgfVxuXG4gIGdldENvbXBvbmVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHM7XG4gIH1cblxuICBnZXRDb21wb25lbnRzVG9SZW1vdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNUb1JlbW92ZTtcbiAgfVxuXG4gIGdldENvbXBvbmVudFR5cGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9Db21wb25lbnRUeXBlcztcbiAgfVxuXG4gIGdldE11dGFibGVDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX2NvbXBvbmVudHNbQ29tcG9uZW50Lm5hbWVdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5xdWVyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbaV07XG4gICAgICAvLyBAdG9kbyBhY2NlbGVyYXRlIHRoaXMgY2hlY2suIE1heWJlIGhhdmluZyBxdWVyeS5fQ29tcG9uZW50cyBhcyBhbiBvYmplY3RcbiAgICAgIGlmIChxdWVyeS5yZWFjdGl2ZSAmJiBxdWVyeS5Db21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAhPT0gLTEpIHtcbiAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VELFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgY29tcG9uZW50XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG4gIH1cblxuICBhZGRDb21wb25lbnQoQ29tcG9uZW50LCB2YWx1ZXMpIHtcbiAgICB0aGlzLl93b3JsZC5lbnRpdHlBZGRDb21wb25lbnQodGhpcywgQ29tcG9uZW50LCB2YWx1ZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVtb3ZlQ29tcG9uZW50KENvbXBvbmVudCwgZm9yY2VSZW1vdmUpIHtcbiAgICB0aGlzLl93b3JsZC5lbnRpdHlSZW1vdmVDb21wb25lbnQodGhpcywgQ29tcG9uZW50LCBmb3JjZVJlbW92ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBoYXNDb21wb25lbnQoQ29tcG9uZW50LCBpbmNsdWRlUmVtb3ZlZCkge1xuICAgIHJldHVybiAoXG4gICAgICAhIX50aGlzLl9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCkgfHxcbiAgICAgIChpbmNsdWRlUmVtb3ZlZCA9PT0gdHJ1ZSAmJiB0aGlzLmhhc1JlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSlcbiAgICApO1xuICB9XG5cbiAgaGFzUmVtb3ZlZENvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gISF+dGhpcy5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5pbmRleE9mKENvbXBvbmVudCk7XG4gIH1cblxuICBoYXNBbGxDb21wb25lbnRzKENvbXBvbmVudHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IENvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5oYXNDb21wb25lbnQoQ29tcG9uZW50c1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBoYXNBbnlDb21wb25lbnRzKENvbXBvbmVudHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IENvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmhhc0NvbXBvbmVudChDb21wb25lbnRzW2ldKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJlbW92ZUFsbENvbXBvbmVudHMoZm9yY2VSZW1vdmUpIHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQuZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyh0aGlzLCBmb3JjZVJlbW92ZSk7XG4gIH1cblxuICAvLyBFWFRSQVNcblxuICAvLyBJbml0aWFsaXplIHRoZSBlbnRpdHkuIFRvIGJlIHVzZWQgd2hlbiByZXR1cm5pbmcgYW4gZW50aXR5IHRvIHRoZSBwb29sXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuaWQgPSBuZXh0SWQrKztcbiAgICB0aGlzLl93b3JsZCA9IG51bGw7XG4gICAgdGhpcy5fQ29tcG9uZW50VHlwZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLnF1ZXJpZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9jb21wb25lbnRzID0ge307XG4gIH1cblxuICByZW1vdmUoZm9yY2VSZW1vdmUpIHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGQucmVtb3ZlRW50aXR5KHRoaXMsIGZvcmNlUmVtb3ZlKTtcbiAgfVxufVxuXG5jbGFzcyBPYmplY3RQb29sIHtcbiAgLy8gQHRvZG8gQWRkIGluaXRpYWwgc2l6ZVxuICBjb25zdHJ1Y3RvcihULCBpbml0aWFsU2l6ZSkge1xuICAgIHRoaXMuZnJlZUxpc3QgPSBbXTtcbiAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB0aGlzLlQgPSBUO1xuICAgIHRoaXMuaXNPYmplY3RQb29sID0gdHJ1ZTtcblxuICAgIHZhciBleHRyYUFyZ3MgPSBudWxsO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgZXh0cmFBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGV4dHJhQXJncy5zaGlmdCgpO1xuICAgIH1cblxuICAgIHRoaXMuY3JlYXRlRWxlbWVudCA9IGV4dHJhQXJnc1xuICAgICAgPyAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBUKC4uLmV4dHJhQXJncyk7XG4gICAgICAgIH1cbiAgICAgIDogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgVCgpO1xuICAgICAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBpbml0aWFsU2l6ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5leHBhbmQoaW5pdGlhbFNpemUpO1xuICAgIH1cbiAgfVxuXG4gIGFxdWlyZSgpIHtcbiAgICAvLyBHcm93IHRoZSBsaXN0IGJ5IDIwJWlzaCBpZiB3ZSdyZSBvdXRcbiAgICBpZiAodGhpcy5mcmVlTGlzdC5sZW5ndGggPD0gMCkge1xuICAgICAgdGhpcy5leHBhbmQoTWF0aC5yb3VuZCh0aGlzLmNvdW50ICogMC4yKSArIDEpO1xuICAgIH1cblxuICAgIHZhciBpdGVtID0gdGhpcy5mcmVlTGlzdC5wb3AoKTtcblxuICAgIHJldHVybiBpdGVtO1xuICB9XG5cbiAgcmVsZWFzZShpdGVtKSB7XG4gICAgaXRlbS5yZXNldCgpO1xuICAgIHRoaXMuZnJlZUxpc3QucHVzaChpdGVtKTtcbiAgfVxuXG4gIGV4cGFuZChjb3VudCkge1xuICAgIGZvciAodmFyIG4gPSAwOyBuIDwgY291bnQ7IG4rKykge1xuICAgICAgdGhpcy5mcmVlTGlzdC5wdXNoKHRoaXMuY3JlYXRlRWxlbWVudCgpKTtcbiAgICB9XG4gICAgdGhpcy5jb3VudCArPSBjb3VudDtcbiAgfVxuXG4gIHRvdGFsU2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgfVxuXG4gIHRvdGFsRnJlZSgpIHtcbiAgICByZXR1cm4gdGhpcy5mcmVlTGlzdC5sZW5ndGg7XG4gIH1cblxuICB0b3RhbFVzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQgLSB0aGlzLmZyZWVMaXN0Lmxlbmd0aDtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgUXVlcnlNYW5hZ2VyXG4gKi9cbmNsYXNzIFF1ZXJ5TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy5fd29ybGQgPSB3b3JsZDtcblxuICAgIC8vIFF1ZXJpZXMgaW5kZXhlZCBieSBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tcG9uZW50cyBpdCBoYXNcbiAgICB0aGlzLl9xdWVyaWVzID0ge307XG4gIH1cblxuICBvbkVudGl0eVJlbW92ZWQoZW50aXR5KSB7XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgIGlmIChlbnRpdHkucXVlcmllcy5pbmRleE9mKHF1ZXJ5KSAhPT0gLTEpIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlRW50aXR5KGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHdoZW4gYSBjb21wb25lbnQgaXMgYWRkZWQgdG8gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHRoYXQganVzdCBnb3QgdGhlIG5ldyBjb21wb25lbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudCBDb21wb25lbnQgYWRkZWQgdG8gdGhlIGVudGl0eVxuICAgKi9cbiAgb25FbnRpdHlDb21wb25lbnRBZGRlZChlbnRpdHksIENvbXBvbmVudCkge1xuICAgIC8vIEB0b2RvIFVzZSBiaXRtYXNrIGZvciBjaGVja2luZyBjb21wb25lbnRzP1xuXG4gICAgLy8gQ2hlY2sgZWFjaCBpbmRleGVkIHF1ZXJ5IHRvIHNlZSBpZiB3ZSBuZWVkIHRvIGFkZCB0aGlzIGVudGl0eSB0byB0aGUgbGlzdFxuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV07XG5cbiAgICAgIGlmIChcbiAgICAgICAgISF+cXVlcnkuTm90Q29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgJiZcbiAgICAgICAgfnF1ZXJ5LmVudGl0aWVzLmluZGV4T2YoZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZUVudGl0eShlbnRpdHkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBlbnRpdHkgb25seSBpZjpcbiAgICAgIC8vIENvbXBvbmVudCBpcyBpbiB0aGUgcXVlcnlcbiAgICAgIC8vIGFuZCBFbnRpdHkgaGFzIEFMTCB0aGUgY29tcG9uZW50cyBvZiB0aGUgcXVlcnlcbiAgICAgIC8vIGFuZCBFbnRpdHkgaXMgbm90IGFscmVhZHkgaW4gdGhlIHF1ZXJ5XG4gICAgICBpZiAoXG4gICAgICAgICF+cXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgfHxcbiAgICAgICAgIXF1ZXJ5Lm1hdGNoKGVudGl0eSkgfHxcbiAgICAgICAgfnF1ZXJ5LmVudGl0aWVzLmluZGV4T2YoZW50aXR5KVxuICAgICAgKVxuICAgICAgICBjb250aW51ZTtcblxuICAgICAgcXVlcnkuYWRkRW50aXR5KGVudGl0eSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHdoZW4gYSBjb21wb25lbnQgaXMgcmVtb3ZlZCBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB0byByZW1vdmUgdGhlIGNvbXBvbmVudCBmcm9tXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IHRvIHJlbW92ZSBmcm9tIHRoZSBlbnRpdHlcbiAgICovXG4gIG9uRW50aXR5Q29tcG9uZW50UmVtb3ZlZChlbnRpdHksIENvbXBvbmVudCkge1xuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV07XG5cbiAgICAgIGlmIChcbiAgICAgICAgISF+cXVlcnkuTm90Q29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgJiZcbiAgICAgICAgIX5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSkgJiZcbiAgICAgICAgcXVlcnkubWF0Y2goZW50aXR5KVxuICAgICAgKSB7XG4gICAgICAgIHF1ZXJ5LmFkZEVudGl0eShlbnRpdHkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhIX5xdWVyeS5Db21wb25lbnRzLmluZGV4T2YoQ29tcG9uZW50KSAmJlxuICAgICAgICAhIX5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSkgJiZcbiAgICAgICAgIXF1ZXJ5Lm1hdGNoKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5yZW1vdmVFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHF1ZXJ5IGZvciB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudHNcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudHMgQ29tcG9uZW50cyB0aGF0IHRoZSBxdWVyeSBzaG91bGQgaGF2ZVxuICAgKi9cbiAgZ2V0UXVlcnkoQ29tcG9uZW50cykge1xuICAgIHZhciBrZXkgPSBxdWVyeUtleShDb21wb25lbnRzKTtcbiAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW2tleV07XG4gICAgaWYgKCFxdWVyeSkge1xuICAgICAgdGhpcy5fcXVlcmllc1trZXldID0gcXVlcnkgPSBuZXcgUXVlcnkoQ29tcG9uZW50cywgdGhpcy5fd29ybGQpO1xuICAgIH1cbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHNvbWUgc3RhdHMgZnJvbSB0aGlzIGNsYXNzXG4gICAqL1xuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7fTtcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgc3RhdHNbcXVlcnlOYW1lXSA9IHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXS5zdGF0cygpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuY2xhc3MgU3lzdGVtU3RhdGVDb21wb25lbnQge31cblxuU3lzdGVtU3RhdGVDb21wb25lbnQuaXNTeXN0ZW1TdGF0ZUNvbXBvbmVudCA9IHRydWU7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBFbnRpdHlNYW5hZ2VyXG4gKi9cbmNsYXNzIEVudGl0eU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyID0gd29ybGQuY29tcG9uZW50c01hbmFnZXI7XG5cbiAgICAvLyBBbGwgdGhlIGVudGl0aWVzIGluIHRoaXMgaW5zdGFuY2VcbiAgICB0aGlzLl9lbnRpdGllcyA9IFtdO1xuXG4gICAgdGhpcy5fcXVlcnlNYW5hZ2VyID0gbmV3IFF1ZXJ5TWFuYWdlcih0aGlzKTtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlciA9IG5ldyBFdmVudERpc3BhdGNoZXIoKTtcbiAgICB0aGlzLl9lbnRpdHlQb29sID0gbmV3IE9iamVjdFBvb2woRW50aXR5KTtcblxuICAgIC8vIERlZmVycmVkIGRlbGV0aW9uXG4gICAgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUgPSBbXTtcbiAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUgPSBbXTtcbiAgICB0aGlzLmRlZmVycmVkUmVtb3ZhbEVuYWJsZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5udW1TdGF0ZUNvbXBvbmVudHMgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBlbnRpdHlcbiAgICovXG4gIGNyZWF0ZUVudGl0eSgpIHtcbiAgICB2YXIgZW50aXR5ID0gdGhpcy5fZW50aXR5UG9vbC5hcXVpcmUoKTtcbiAgICBlbnRpdHkuYWxpdmUgPSB0cnVlO1xuICAgIGVudGl0eS5fd29ybGQgPSB0aGlzO1xuICAgIHRoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEVOVElUWV9DUkVBVEVELCBlbnRpdHkpO1xuICAgIHJldHVybiBlbnRpdHk7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgd2hlcmUgdGhlIGNvbXBvbmVudCB3aWxsIGJlIGFkZGVkXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IHRvIGJlIGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyBPcHRpb25hbCB2YWx1ZXMgdG8gcmVwbGFjZSB0aGUgZGVmYXVsdCBhdHRyaWJ1dGVzXG4gICAqL1xuICBlbnRpdHlBZGRDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIHZhbHVlcykge1xuICAgIGlmICh+ZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCkpIHJldHVybjtcblxuICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMucHVzaChDb21wb25lbnQpO1xuXG4gICAgaWYgKENvbXBvbmVudC5fX3Byb3RvX18gPT09IFN5c3RlbVN0YXRlQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLm51bVN0YXRlQ29tcG9uZW50cysrO1xuICAgIH1cblxuICAgIHZhciBjb21wb25lbnRQb29sID0gdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5nZXRDb21wb25lbnRzUG9vbChcbiAgICAgIENvbXBvbmVudFxuICAgICk7XG4gICAgdmFyIGNvbXBvbmVudCA9IGNvbXBvbmVudFBvb2wuYXF1aXJlKCk7XG5cbiAgICBlbnRpdHkuX2NvbXBvbmVudHNbQ29tcG9uZW50Lm5hbWVdID0gY29tcG9uZW50O1xuXG4gICAgaWYgKHZhbHVlcykge1xuICAgICAgaWYgKGNvbXBvbmVudC5jb3B5KSB7XG4gICAgICAgIGNvbXBvbmVudC5jb3B5KHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhbHVlcykge1xuICAgICAgICAgIGNvbXBvbmVudFtuYW1lXSA9IHZhbHVlc1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlci5vbkVudGl0eUNvbXBvbmVudEFkZGVkKGVudGl0eSwgQ29tcG9uZW50KTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudEFkZGVkVG9FbnRpdHkoQ29tcG9uZW50KTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX0FEREVELCBlbnRpdHksIENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHdoaWNoIHdpbGwgZ2V0IHJlbW92ZWQgdGhlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0geyp9IENvbXBvbmVudCBDb21wb25lbnQgdG8gcmVtb3ZlIGZyb20gdGhlIGVudGl0eVxuICAgKiBAcGFyYW0ge0Jvb2x9IGltbWVkaWF0ZWx5IElmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgY29tcG9uZW50IGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZGVmZXJyZWQgKERlZmF1bHQgaXMgZmFsc2UpXG4gICAqL1xuICBlbnRpdHlSZW1vdmVDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCk7XG4gICAgaWYgKCF+aW5kZXgpIHJldHVybjtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX1JFTU9WRSwgZW50aXR5LCBDb21wb25lbnQpO1xuXG4gICAgaWYgKGltbWVkaWF0ZWx5KSB7XG4gICAgICB0aGlzLl9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jKGVudGl0eSwgQ29tcG9uZW50LCBpbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID09PSAwKVxuICAgICAgICB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG5cbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5wdXNoKENvbXBvbmVudCk7XG5cbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0TmFtZShDb21wb25lbnQpO1xuICAgICAgZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbY29tcG9uZW50TmFtZV0gPVxuICAgICAgICBlbnRpdHkuX2NvbXBvbmVudHNbY29tcG9uZW50TmFtZV07XG4gICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGVhY2ggaW5kZXhlZCBxdWVyeSB0byBzZWUgaWYgd2UgbmVlZCB0byByZW1vdmUgaXRcbiAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlDb21wb25lbnRSZW1vdmVkKGVudGl0eSwgQ29tcG9uZW50KTtcblxuICAgIGlmIChDb21wb25lbnQuX19wcm90b19fID09PSBTeXN0ZW1TdGF0ZUNvbXBvbmVudCkge1xuICAgICAgdGhpcy5udW1TdGF0ZUNvbXBvbmVudHMtLTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVudGl0eSB3YXMgYSBnaG9zdCB3YWl0aW5nIGZvciB0aGUgbGFzdCBzeXN0ZW0gc3RhdGUgY29tcG9uZW50IHRvIGJlIHJlbW92ZWRcbiAgICAgIGlmICh0aGlzLm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCAmJiAhZW50aXR5LmFsaXZlKSB7XG4gICAgICAgIGVudGl0eS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAvLyBSZW1vdmUgVCBsaXN0aW5nIG9uIGVudGl0eSBhbmQgcHJvcGVydHkgcmVmLCB0aGVuIGZyZWUgdGhlIGNvbXBvbmVudC5cbiAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdmFyIHByb3BOYW1lID0gY29tcG9uZW50UHJvcGVydHlOYW1lKENvbXBvbmVudCk7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXROYW1lKENvbXBvbmVudCk7XG4gICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5fY29tcG9uZW50c1tjb21wb25lbnROYW1lXTtcbiAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2xbcHJvcE5hbWVdLnJlbGVhc2UoY29tcG9uZW50KTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0aGUgY29tcG9uZW50cyBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSBmcm9tIHdoaWNoIHRoZSBjb21wb25lbnRzIHdpbGwgYmUgcmVtb3ZlZFxuICAgKi9cbiAgZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyhlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgbGV0IENvbXBvbmVudHMgPSBlbnRpdHkuX0NvbXBvbmVudFR5cGVzO1xuXG4gICAgZm9yIChsZXQgaiA9IENvbXBvbmVudHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgIGlmIChDb21wb25lbnRzW2pdLl9fcHJvdG9fXyAhPT0gU3lzdGVtU3RhdGVDb21wb25lbnQpXG4gICAgICAgIHRoaXMuZW50aXR5UmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50c1tqXSwgaW1tZWRpYXRlbHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVudGl0eSBmcm9tIHRoaXMgbWFuYWdlci4gSXQgd2lsbCBjbGVhciBhbHNvIGl0cyBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHRvIHJlbW92ZSBmcm9tIHRoZSBtYW5hZ2VyXG4gICAqIEBwYXJhbSB7Qm9vbH0gaW1tZWRpYXRlbHkgSWYgeW91IHdhbnQgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBkZWZlcnJlZCAoRGVmYXVsdCBpcyBmYWxzZSlcbiAgICovXG4gIHJlbW92ZUVudGl0eShlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuXG4gICAgaWYgKCF+aW5kZXgpIHRocm93IG5ldyBFcnJvcihcIlRyaWVkIHRvIHJlbW92ZSBlbnRpdHkgbm90IGluIGxpc3RcIik7XG5cbiAgICBlbnRpdHkuYWxpdmUgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCkge1xuICAgICAgLy8gUmVtb3ZlIGZyb20gZW50aXR5IGxpc3RcbiAgICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoRU5USVRZX1JFTU9WRUQsIGVudGl0eSk7XG4gICAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlSZW1vdmVkKGVudGl0eSk7XG4gICAgICBpZiAoaW1tZWRpYXRlbHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdHlSZW1vdmVBbGxDb21wb25lbnRzKGVudGl0eSwgaW1tZWRpYXRlbHkpO1xuICB9XG5cbiAgX3JlbGVhc2VFbnRpdHkoZW50aXR5LCBpbmRleCkge1xuICAgIHRoaXMuX2VudGl0aWVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAvLyBQcmV2ZW50IGFueSBhY2Nlc3MgYW5kIGZyZWVcbiAgICBlbnRpdHkuX3dvcmxkID0gbnVsbDtcbiAgICB0aGlzLl9lbnRpdHlQb29sLnJlbGVhc2UoZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGVudGl0aWVzIGZyb20gdGhpcyBtYW5hZ2VyXG4gICAqL1xuICByZW1vdmVBbGxFbnRpdGllcygpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5fZW50aXRpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMucmVtb3ZlRW50aXR5KHRoaXMuX2VudGl0aWVzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzRGVmZXJyZWRSZW1vdmFsKCkge1xuICAgIGlmICghdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzVG9SZW1vdmVbaV07XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG4gICAgICB0aGlzLl9yZWxlYXNlRW50aXR5KGVudGl0eSwgaW5kZXgpO1xuICAgIH1cbiAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZVtpXTtcbiAgICAgIHdoaWxlIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgQ29tcG9uZW50ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLnBvcCgpO1xuXG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGNvbXBvbmVudFByb3BlcnR5TmFtZShDb21wb25lbnQpO1xuICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldE5hbWUoQ29tcG9uZW50KTtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5fY29tcG9uZW50c1RvUmVtb3ZlW2NvbXBvbmVudE5hbWVdO1xuICAgICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbY29tcG9uZW50TmFtZV07XG4gICAgICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2xbcHJvcE5hbWVdLnJlbGVhc2UoY29tcG9uZW50KTtcbiAgICAgICAgdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5jb21wb25lbnRSZW1vdmVkRnJvbUVudGl0eShDb21wb25lbnQpO1xuXG4gICAgICAgIC8vdGhpcy5fZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcXVlcnkgYmFzZWQgb24gYSBsaXN0IG9mIGNvbXBvbmVudHNcbiAgICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIExpc3Qgb2YgY29tcG9uZW50cyB0aGF0IHdpbGwgZm9ybSB0aGUgcXVlcnlcbiAgICovXG4gIHF1ZXJ5Q29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuX3F1ZXJ5TWFuYWdlci5nZXRRdWVyeShDb21wb25lbnRzKTtcbiAgfVxuXG4gIC8vIEVYVFJBU1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gbnVtYmVyIG9mIGVudGl0aWVzXG4gICAqL1xuICBjb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXRpZXMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzb21lIHN0YXRzXG4gICAqL1xuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7XG4gICAgICBudW1FbnRpdGllczogdGhpcy5fZW50aXRpZXMubGVuZ3RoLFxuICAgICAgbnVtUXVlcmllczogT2JqZWN0LmtleXModGhpcy5fcXVlcnlNYW5hZ2VyLl9xdWVyaWVzKS5sZW5ndGgsXG4gICAgICBxdWVyaWVzOiB0aGlzLl9xdWVyeU1hbmFnZXIuc3RhdHMoKSxcbiAgICAgIG51bUNvbXBvbmVudFBvb2w6IE9iamVjdC5rZXlzKHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2wpXG4gICAgICAgIC5sZW5ndGgsXG4gICAgICBjb21wb25lbnRQb29sOiB7fSxcbiAgICAgIGV2ZW50RGlzcGF0Y2hlcjogdGhpcy5ldmVudERpc3BhdGNoZXIuc3RhdHNcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgY25hbWUgaW4gdGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbCkge1xuICAgICAgdmFyIHBvb2wgPSB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sW2NuYW1lXTtcbiAgICAgIHN0YXRzLmNvbXBvbmVudFBvb2xbY25hbWVdID0ge1xuICAgICAgICB1c2VkOiBwb29sLnRvdGFsVXNlZCgpLFxuICAgICAgICBzaXplOiBwb29sLmNvdW50XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG5jb25zdCBFTlRJVFlfQ1JFQVRFRCA9IFwiRW50aXR5TWFuYWdlciNFTlRJVFlfQ1JFQVRFXCI7XG5jb25zdCBFTlRJVFlfUkVNT1ZFRCA9IFwiRW50aXR5TWFuYWdlciNFTlRJVFlfUkVNT1ZFRFwiO1xuY29uc3QgQ09NUE9ORU5UX0FEREVEID0gXCJFbnRpdHlNYW5hZ2VyI0NPTVBPTkVOVF9BRERFRFwiO1xuY29uc3QgQ09NUE9ORU5UX1JFTU9WRSA9IFwiRW50aXR5TWFuYWdlciNDT01QT05FTlRfUkVNT1ZFXCI7XG5cbmNsYXNzIER1bW15T2JqZWN0UG9vbCB7XG4gIGNvbnN0cnVjdG9yKFQpIHtcbiAgICB0aGlzLmlzRHVtbXlPYmplY3RQb29sID0gdHJ1ZTtcbiAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB0aGlzLnVzZWQgPSAwO1xuICAgIHRoaXMuVCA9IFQ7XG4gIH1cblxuICBhcXVpcmUoKSB7XG4gICAgdGhpcy51c2VkKys7XG4gICAgdGhpcy5jb3VudCsrO1xuICAgIHJldHVybiBuZXcgdGhpcy5UKCk7XG4gIH1cblxuICByZWxlYXNlKCkge1xuICAgIHRoaXMudXNlZC0tO1xuICB9XG5cbiAgdG90YWxTaXplKCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50O1xuICB9XG5cbiAgdG90YWxGcmVlKCkge1xuICAgIHJldHVybiBJbmZpbml0eTtcbiAgfVxuXG4gIHRvdGFsVXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VkO1xuICB9XG59XG5cbmNsYXNzIENvbXBvbmVudE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLkNvbXBvbmVudHMgPSB7fTtcbiAgICB0aGlzLl9jb21wb25lbnRQb29sID0ge307XG4gICAgdGhpcy5udW1Db21wb25lbnRzID0ge307XG4gIH1cblxuICByZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICBpZiAodGhpcy5Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSkge1xuICAgICAgY29uc29sZS53YXJuKGBDb21wb25lbnQgdHlwZTogJyR7Q29tcG9uZW50Lm5hbWV9JyBhbHJlYWR5IHJlZ2lzdGVyZWQuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSA9IENvbXBvbmVudDtcbiAgICB0aGlzLm51bUNvbXBvbmVudHNbQ29tcG9uZW50Lm5hbWVdID0gMDtcbiAgfVxuXG4gIGNvbXBvbmVudEFkZGVkVG9FbnRpdHkoQ29tcG9uZW50KSB7XG4gICAgaWYgKCF0aGlzLkNvbXBvbmVudHNbQ29tcG9uZW50Lm5hbWVdKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSsrO1xuICB9XG5cbiAgY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkoQ29tcG9uZW50KSB7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXS0tO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50c1Bvb2woQ29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnRQcm9wZXJ0eU5hbWUoQ29tcG9uZW50KTtcblxuICAgIGlmICghdGhpcy5fY29tcG9uZW50UG9vbFtjb21wb25lbnROYW1lXSkge1xuICAgICAgaWYgKENvbXBvbmVudC5wcm90b3R5cGUucmVzZXQpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50UG9vbFtjb21wb25lbnROYW1lXSA9IG5ldyBPYmplY3RQb29sKENvbXBvbmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYENvbXBvbmVudCAnJHtDb21wb25lbnQubmFtZX0nIHdvbid0IGJlbmVmaXQgZnJvbSBwb29saW5nIGJlY2F1c2UgJ3Jlc2V0JyBtZXRob2Qgd2FzIG5vdCBpbXBsZW1lbmV0ZWQuYFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRQb29sW2NvbXBvbmVudE5hbWVdID0gbmV3IER1bW15T2JqZWN0UG9vbChDb21wb25lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRQb29sW2NvbXBvbmVudE5hbWVdO1xuICB9XG59XG5cbnZhciBuYW1lID0gXCJlY3N5XCI7XG52YXIgdmVyc2lvbiA9IFwiMC4yLjBcIjtcbnZhciBkZXNjcmlwdGlvbiA9IFwiRW50aXR5IENvbXBvbmVudCBTeXN0ZW0gaW4gSlNcIjtcbnZhciBtYWluID0gXCJidWlsZC9lY3N5LmpzXCI7XG52YXIgbW9kdWxlID0gXCJidWlsZC9lY3N5Lm1vZHVsZS5qc1wiO1xudmFyIHR5cGVzID0gXCJzcmMvaW5kZXguZC50c1wiO1xudmFyIHNjcmlwdHMgPSB7XG5cdGJ1aWxkOiBcInJvbGx1cCAtYyAmJiBucG0gcnVuIGRvY3NcIixcblx0ZG9jczogXCJybSBkb2NzL2FwaS9fc2lkZWJhci5tZDsgdHlwZWRvYyAtLXJlYWRtZSBub25lIC0tbW9kZSBmaWxlIC0tZXhjbHVkZUV4dGVybmFscyAtLXBsdWdpbiB0eXBlZG9jLXBsdWdpbi1tYXJrZG93biAgLS10aGVtZSBkb2NzL3RoZW1lIC0taGlkZVNvdXJjZXMgLS1oaWRlQnJlYWRjcnVtYnMgLS1vdXQgZG9jcy9hcGkvIC0taW5jbHVkZURlY2xhcmF0aW9ucyAtLWluY2x1ZGVzICdzcmMvKiovKi5kLnRzJyBzcmM7IHRvdWNoIGRvY3MvYXBpL19zaWRlYmFyLm1kXCIsXG5cdFwiZGV2OmRvY3NcIjogXCJub2RlbW9uIC1lIHRzIC14ICducG0gcnVuIGRvY3MnIC13IHNyY1wiLFxuXHRkZXY6IFwiY29uY3VycmVudGx5IC0tbmFtZXMgJ1JPTExVUCxET0NTLEhUVFAnIC1jICdiZ0JsdWUuYm9sZCxiZ1llbGxvdy5ib2xkLGJnR3JlZW4uYm9sZCcgJ3JvbGx1cCAtYyAtdyAtbSBpbmxpbmUnICducG0gcnVuIGRldjpkb2NzJyAnbnBtIHJ1biBkZXY6c2VydmVyJ1wiLFxuXHRcImRldjpzZXJ2ZXJcIjogXCJodHRwLXNlcnZlciAtYy0xIC1wIDgwODAgLS1jb3JzXCIsXG5cdGxpbnQ6IFwiZXNsaW50IHNyYyB0ZXN0IGV4YW1wbGVzXCIsXG5cdHN0YXJ0OiBcIm5wbSBydW4gZGV2XCIsXG5cdHRlc3Q6IFwiYXZhXCIsXG5cdHRyYXZpczogXCJucG0gcnVuIGxpbnQgJiYgbnBtIHJ1biB0ZXN0ICYmIG5wbSBydW4gYnVpbGRcIixcblx0XCJ3YXRjaDp0ZXN0XCI6IFwiYXZhIC0td2F0Y2hcIlxufTtcbnZhciByZXBvc2l0b3J5ID0ge1xuXHR0eXBlOiBcImdpdFwiLFxuXHR1cmw6IFwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9mZXJuYW5kb2pzZy9lY3N5LmdpdFwiXG59O1xudmFyIGtleXdvcmRzID0gW1xuXHRcImVjc1wiLFxuXHRcImVudGl0eSBjb21wb25lbnQgc3lzdGVtXCJcbl07XG52YXIgYXV0aG9yID0gXCJGZXJuYW5kbyBTZXJyYW5vIDxmZXJuYW5kb2pzZ0BnbWFpbC5jb20+IChodHRwOi8vZmVybmFuZG9qc2cuY29tKVwiO1xudmFyIGxpY2Vuc2UgPSBcIk1JVFwiO1xudmFyIGJ1Z3MgPSB7XG5cdHVybDogXCJodHRwczovL2dpdGh1Yi5jb20vZmVybmFuZG9qc2cvZWNzeS9pc3N1ZXNcIlxufTtcbnZhciBhdmEgPSB7XG5cdGZpbGVzOiBbXG5cdFx0XCJ0ZXN0LyoqLyoudGVzdC5qc1wiXG5cdF0sXG5cdHNvdXJjZXM6IFtcblx0XHRcInNyYy8qKi8qLmpzXCJcblx0XSxcblx0cmVxdWlyZTogW1xuXHRcdFwiYmFiZWwtcmVnaXN0ZXJcIixcblx0XHRcImVzbVwiXG5cdF1cbn07XG52YXIganNwbSA9IHtcblx0ZmlsZXM6IFtcblx0XHRcInBhY2thZ2UuanNvblwiLFxuXHRcdFwiTElDRU5TRVwiLFxuXHRcdFwiUkVBRE1FLm1kXCIsXG5cdFx0XCJidWlsZC9lY3N5LmpzXCIsXG5cdFx0XCJidWlsZC9lY3N5Lm1pbi5qc1wiLFxuXHRcdFwiYnVpbGQvZWNzeS5tb2R1bGUuanNcIlxuXHRdLFxuXHRkaXJlY3Rvcmllczoge1xuXHR9XG59O1xudmFyIGhvbWVwYWdlID0gXCJodHRwczovL2dpdGh1Yi5jb20vZmVybmFuZG9qc2cvZWNzeSNyZWFkbWVcIjtcbnZhciBkZXZEZXBlbmRlbmNpZXMgPSB7XG5cdGF2YTogXCJeMS40LjFcIixcblx0XCJiYWJlbC1jbGlcIjogXCJeNi4yNi4wXCIsXG5cdFwiYmFiZWwtY29yZVwiOiBcIl42LjI2LjNcIixcblx0XCJiYWJlbC1lc2xpbnRcIjogXCJeMTAuMC4zXCIsXG5cdFwiYmFiZWwtbG9hZGVyXCI6IFwiXjguMC42XCIsXG5cdGNvbmN1cnJlbnRseTogXCJeNC4xLjJcIixcblx0XCJkb2NzaWZ5LWNsaVwiOiBcIl40LjQuMFwiLFxuXHRlc2xpbnQ6IFwiXjUuMTYuMFwiLFxuXHRcImVzbGludC1jb25maWctcHJldHRpZXJcIjogXCJeNC4zLjBcIixcblx0XCJlc2xpbnQtcGx1Z2luLXByZXR0aWVyXCI6IFwiXjMuMS4xXCIsXG5cdFwiaHR0cC1zZXJ2ZXJcIjogXCJeMC4xMS4xXCIsXG5cdG5vZGVtb246IFwiXjEuMTkuNFwiLFxuXHRwcmV0dGllcjogXCJeMS4xOS4xXCIsXG5cdHJvbGx1cDogXCJeMS4yNy44XCIsXG5cdFwicm9sbHVwLXBsdWdpbi1qc29uXCI6IFwiXjQuMC4wXCIsXG5cdFwicm9sbHVwLXBsdWdpbi10ZXJzZXJcIjogXCJeNS4xLjJcIixcblx0dHlwZWRvYzogXCJeMC4xNS4zXCIsXG5cdFwidHlwZWRvYy1wbHVnaW4tbWFya2Rvd25cIjogXCJeMi4yLjExXCIsXG5cdHR5cGVzY3JpcHQ6IFwiXjMuNy4yXCJcbn07XG52YXIgcGpzb24gPSB7XG5cdG5hbWU6IG5hbWUsXG5cdHZlcnNpb246IHZlcnNpb24sXG5cdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcblx0bWFpbjogbWFpbixcblx0XCJqc25leHQ6bWFpblwiOiBcImJ1aWxkL2Vjc3kubW9kdWxlLmpzXCIsXG5cdG1vZHVsZTogbW9kdWxlLFxuXHR0eXBlczogdHlwZXMsXG5cdHNjcmlwdHM6IHNjcmlwdHMsXG5cdHJlcG9zaXRvcnk6IHJlcG9zaXRvcnksXG5cdGtleXdvcmRzOiBrZXl3b3Jkcyxcblx0YXV0aG9yOiBhdXRob3IsXG5cdGxpY2Vuc2U6IGxpY2Vuc2UsXG5cdGJ1Z3M6IGJ1Z3MsXG5cdGF2YTogYXZhLFxuXHRqc3BtOiBqc3BtLFxuXHRob21lcGFnZTogaG9tZXBhZ2UsXG5cdGRldkRlcGVuZGVuY2llczogZGV2RGVwZW5kZW5jaWVzXG59O1xuXG5jb25zdCBWZXJzaW9uID0gcGpzb24udmVyc2lvbjtcblxuY2xhc3MgV29ybGQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyID0gbmV3IENvbXBvbmVudE1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5lbnRpdHlNYW5hZ2VyID0gbmV3IEVudGl0eU1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5zeXN0ZW1NYW5hZ2VyID0gbmV3IFN5c3RlbU1hbmFnZXIodGhpcyk7XG5cbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5ldmVudFF1ZXVlcyA9IHt9O1xuXG4gICAgaWYgKHR5cGVvZiBDdXN0b21FdmVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7IHdvcmxkOiB0aGlzLCB2ZXJzaW9uOiBWZXJzaW9uIH1cbiAgICAgIH0pO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cblxuICAgIHRoaXMubGFzdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuXG4gIHJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIucmVnaXN0ZXJDb21wb25lbnQoQ29tcG9uZW50KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKFN5c3RlbSwgYXR0cmlidXRlcykge1xuICAgIHRoaXMuc3lzdGVtTWFuYWdlci5yZWdpc3RlclN5c3RlbShTeXN0ZW0sIGF0dHJpYnV0ZXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtTWFuYWdlci5nZXRTeXN0ZW0oU3lzdGVtQ2xhc3MpO1xuICB9XG5cbiAgZ2V0U3lzdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW1NYW5hZ2VyLmdldFN5c3RlbXMoKTtcbiAgfVxuXG4gIGV4ZWN1dGUoZGVsdGEsIHRpbWUpIHtcbiAgICBpZiAoIWRlbHRhKSB7XG4gICAgICBsZXQgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgZGVsdGEgPSB0aW1lIC0gdGhpcy5sYXN0VGltZTtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3lzdGVtTWFuYWdlci5leGVjdXRlKGRlbHRhLCB0aW1lKTtcbiAgICAgIHRoaXMuZW50aXR5TWFuYWdlci5wcm9jZXNzRGVmZXJyZWRSZW1vdmFsKCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGNyZWF0ZUVudGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRpdHlNYW5hZ2VyLmNyZWF0ZUVudGl0eSgpO1xuICB9XG5cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgZW50aXRpZXM6IHRoaXMuZW50aXR5TWFuYWdlci5zdGF0cygpLFxuICAgICAgc3lzdGVtOiB0aGlzLnN5c3RlbU1hbmFnZXIuc3RhdHMoKVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShzdGF0cywgbnVsbCwgMikpO1xuICB9XG59XG5cbmNsYXNzIFN5c3RlbSB7XG4gIGNhbkV4ZWN1dGUoKSB7XG4gICAgaWYgKHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fbWFuZGF0b3J5UXVlcmllc1tpXTtcbiAgICAgIGlmIChxdWVyeS5lbnRpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQsIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIC8vIEB0b2RvIEJldHRlciBuYW1pbmcgOilcbiAgICB0aGlzLl9xdWVyaWVzID0ge307XG4gICAgdGhpcy5xdWVyaWVzID0ge307XG5cbiAgICB0aGlzLnByaW9yaXR5ID0gMDtcblxuICAgIC8vIFVzZWQgZm9yIHN0YXRzXG4gICAgdGhpcy5leGVjdXRlVGltZSA9IDA7XG5cbiAgICBpZiAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLnByaW9yaXR5KSB7XG4gICAgICB0aGlzLnByaW9yaXR5ID0gYXR0cmlidXRlcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYW5kYXRvcnlRdWVyaWVzID0gW107XG5cbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgICAgdmFyIHF1ZXJ5Q29uZmlnID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIHZhciBDb21wb25lbnRzID0gcXVlcnlDb25maWcuY29tcG9uZW50cztcbiAgICAgICAgaWYgKCFDb21wb25lbnRzIHx8IENvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ2NvbXBvbmVudHMnIGF0dHJpYnV0ZSBjYW4ndCBiZSBlbXB0eSBpbiBhIHF1ZXJ5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMud29ybGQuZW50aXR5TWFuYWdlci5xdWVyeUNvbXBvbmVudHMoQ29tcG9uZW50cyk7XG4gICAgICAgIHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXSA9IHF1ZXJ5O1xuICAgICAgICBpZiAocXVlcnlDb25maWcubWFuZGF0b3J5ID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5wdXNoKHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXSA9IHtcbiAgICAgICAgICByZXN1bHRzOiBxdWVyeS5lbnRpdGllc1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlYWN0aXZlIGNvbmZpZ3VyYXRpb24gYWRkZWQvcmVtb3ZlZC9jaGFuZ2VkXG4gICAgICAgIHZhciB2YWxpZEV2ZW50cyA9IFtcImFkZGVkXCIsIFwicmVtb3ZlZFwiLCBcImNoYW5nZWRcIl07XG5cbiAgICAgICAgY29uc3QgZXZlbnRNYXBwaW5nID0ge1xuICAgICAgICAgIGFkZGVkOiBRdWVyeS5wcm90b3R5cGUuRU5USVRZX0FEREVELFxuICAgICAgICAgIHJlbW92ZWQ6IFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfUkVNT1ZFRCxcbiAgICAgICAgICBjaGFuZ2VkOiBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQgLy8gUXVlcnkucHJvdG90eXBlLkVOVElUWV9DSEFOR0VEXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHF1ZXJ5Q29uZmlnLmxpc3Rlbikge1xuICAgICAgICAgIHZhbGlkRXZlbnRzLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAgIC8vIElzIHRoZSBldmVudCBlbmFibGVkIG9uIHRoaXMgc3lzdGVtJ3MgcXVlcnk/XG4gICAgICAgICAgICBpZiAocXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV07XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJjaGFuZ2VkXCIpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5yZWFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBBbnkgY2hhbmdlIG9uIHRoZSBlbnRpdHkgZnJvbSB0aGUgY29tcG9uZW50cyBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudExpc3QuaW5kZXhPZihlbnRpdHkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LnB1c2goZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0gW10pO1xuICAgICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICAgICAgKGVudGl0eSwgY2hhbmdlZENvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbmRleE9mKGNoYW5nZWRDb21wb25lbnQuY29uc3RydWN0b3IpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRMaXN0ID0gKHRoaXMucXVlcmllc1txdWVyeU5hbWVdW2V2ZW50TmFtZV0gPSBbXSk7XG5cbiAgICAgICAgICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgIGV2ZW50TWFwcGluZ1tldmVudE5hbWVdLFxuICAgICAgICAgICAgICAgICAgZW50aXR5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQGZpeG1lIG92ZXJoZWFkP1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LnB1c2goZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuZXhlY3V0ZVRpbWUgPSAwO1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcGxheSgpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gQHF1ZXN0aW9uIHJlbmFtZSB0byBjbGVhciBxdWV1ZXM/XG4gIGNsZWFyRXZlbnRzKCkge1xuICAgIGZvciAobGV0IHF1ZXJ5TmFtZSBpbiB0aGlzLnF1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMucXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgaWYgKHF1ZXJ5LmFkZGVkKSB7XG4gICAgICAgIHF1ZXJ5LmFkZGVkLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAocXVlcnkucmVtb3ZlZCkge1xuICAgICAgICBxdWVyeS5yZW1vdmVkLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAocXVlcnkuY2hhbmdlZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShxdWVyeS5jaGFuZ2VkKSkge1xuICAgICAgICAgIHF1ZXJ5LmNoYW5nZWQubGVuZ3RoID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIHF1ZXJ5LmNoYW5nZWQpIHtcbiAgICAgICAgICAgIHF1ZXJ5LmNoYW5nZWRbbmFtZV0ubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgdmFyIGpzb24gPSB7XG4gICAgICBuYW1lOiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICBlbmFibGVkOiB0aGlzLmVuYWJsZWQsXG4gICAgICBleGVjdXRlVGltZTogdGhpcy5leGVjdXRlVGltZSxcbiAgICAgIHByaW9yaXR5OiB0aGlzLnByaW9yaXR5LFxuICAgICAgcXVlcmllczoge31cbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IucXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJpZXMgPSB0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXM7XG4gICAgICBmb3IgKGxldCBxdWVyeU5hbWUgaW4gcXVlcmllcykge1xuICAgICAgICBsZXQgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgICAgbGV0IHF1ZXJ5RGVmaW5pdGlvbiA9IHF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgICAgbGV0IGpzb25RdWVyeSA9IChqc29uLnF1ZXJpZXNbcXVlcnlOYW1lXSA9IHtcbiAgICAgICAgICBrZXk6IHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXS5rZXlcbiAgICAgICAgfSk7XG5cbiAgICAgICAganNvblF1ZXJ5Lm1hbmRhdG9yeSA9IHF1ZXJ5RGVmaW5pdGlvbi5tYW5kYXRvcnkgPT09IHRydWU7XG4gICAgICAgIGpzb25RdWVyeS5yZWFjdGl2ZSA9XG4gICAgICAgICAgcXVlcnlEZWZpbml0aW9uLmxpc3RlbiAmJlxuICAgICAgICAgIChxdWVyeURlZmluaXRpb24ubGlzdGVuLmFkZGVkID09PSB0cnVlIHx8XG4gICAgICAgICAgICBxdWVyeURlZmluaXRpb24ubGlzdGVuLnJlbW92ZWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4uY2hhbmdlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShxdWVyeURlZmluaXRpb24ubGlzdGVuLmNoYW5nZWQpKTtcblxuICAgICAgICBpZiAoanNvblF1ZXJ5LnJlYWN0aXZlKSB7XG4gICAgICAgICAganNvblF1ZXJ5Lmxpc3RlbiA9IHt9O1xuXG4gICAgICAgICAgY29uc3QgbWV0aG9kcyA9IFtcImFkZGVkXCIsIFwicmVtb3ZlZFwiLCBcImNoYW5nZWRcIl07XG4gICAgICAgICAgbWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICAgICAgICBpZiAocXVlcnlbbWV0aG9kXSkge1xuICAgICAgICAgICAgICBqc29uUXVlcnkubGlzdGVuW21ldGhvZF0gPSB7XG4gICAgICAgICAgICAgICAgZW50aXRpZXM6IHF1ZXJ5W21ldGhvZF0ubGVuZ3RoXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxufVxuXG5mdW5jdGlvbiBOb3QoQ29tcG9uZW50KSB7XG4gIHJldHVybiB7XG4gICAgb3BlcmF0b3I6IFwibm90XCIsXG4gICAgQ29tcG9uZW50OiBDb21wb25lbnRcbiAgfTtcbn1cblxuY2xhc3MgQ29tcG9uZW50IHt9XG5cbkNvbXBvbmVudC5pc0NvbXBvbmVudCA9IHRydWU7XG5cbmNsYXNzIFRhZ0NvbXBvbmVudCB7XG4gIHJlc2V0KCkge31cbn1cblxuVGFnQ29tcG9uZW50LmlzVGFnQ29tcG9uZW50ID0gdHJ1ZTtcblxuZnVuY3Rpb24gY3JlYXRlVHlwZSh0eXBlRGVmaW5pdGlvbikge1xuICB2YXIgbWFuZGF0b3J5RnVuY3Rpb25zID0gW1xuICAgIFwiY3JlYXRlXCIsXG4gICAgXCJyZXNldFwiLFxuICAgIFwiY2xlYXJcIlxuICAgIC8qXCJjb3B5XCIqL1xuICBdO1xuXG4gIHZhciB1bmRlZmluZWRGdW5jdGlvbnMgPSBtYW5kYXRvcnlGdW5jdGlvbnMuZmlsdGVyKGYgPT4ge1xuICAgIHJldHVybiAhdHlwZURlZmluaXRpb25bZl07XG4gIH0pO1xuXG4gIGlmICh1bmRlZmluZWRGdW5jdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBjcmVhdGVUeXBlIGV4cGVjdCB0eXBlIGRlZmluaXRpb24gdG8gaW1wbGVtZW50cyB0aGUgZm9sbG93aW5nIGZ1bmN0aW9uczogJHt1bmRlZmluZWRGdW5jdGlvbnMuam9pbihcbiAgICAgICAgXCIsIFwiXG4gICAgICApfWBcbiAgICApO1xuICB9XG5cbiAgdHlwZURlZmluaXRpb24uaXNUeXBlID0gdHJ1ZTtcbiAgcmV0dXJuIHR5cGVEZWZpbml0aW9uO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkIHR5cGVzXG4gKi9cbnZhciBUeXBlcyA9IHt9O1xuXG5UeXBlcy5OdW1iZXIgPSBjcmVhdGVUeXBlKHtcbiAgYmFzZVR5cGU6IE51bWJlcixcbiAgaXNTaW1wbGVUeXBlOiB0cnVlLFxuICBjcmVhdGU6IGRlZmF1bHRWYWx1ZSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIgPyBkZWZhdWx0VmFsdWUgOiAwO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldID0gMDtcbiAgICB9XG4gIH0sXG4gIGNsZWFyOiAoc3JjLCBrZXkpID0+IHtcbiAgICBzcmNba2V5XSA9IDA7XG4gIH1cbn0pO1xuXG5UeXBlcy5Cb29sZWFuID0gY3JlYXRlVHlwZSh7XG4gIGJhc2VUeXBlOiBCb29sZWFuLFxuICBpc1NpbXBsZVR5cGU6IHRydWUsXG4gIGNyZWF0ZTogZGVmYXVsdFZhbHVlID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRWYWx1ZSA6IGZhbHNlO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldID0gZmFsc2U7XG4gICAgfVxuICB9LFxuICBjbGVhcjogKHNyYywga2V5KSA9PiB7XG4gICAgc3JjW2tleV0gPSBmYWxzZTtcbiAgfVxufSk7XG5cblR5cGVzLlN0cmluZyA9IGNyZWF0ZVR5cGUoe1xuICBiYXNlVHlwZTogU3RyaW5nLFxuICBpc1NpbXBsZVR5cGU6IHRydWUsXG4gIGNyZWF0ZTogZGVmYXVsdFZhbHVlID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRWYWx1ZSA6IFwiXCI7XG4gIH0sXG4gIHJlc2V0OiAoc3JjLCBrZXksIGRlZmF1bHRWYWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzcmNba2V5XSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3JjW2tleV0gPSBcIlwiO1xuICAgIH1cbiAgfSxcbiAgY2xlYXI6IChzcmMsIGtleSkgPT4ge1xuICAgIHNyY1trZXldID0gXCJcIjtcbiAgfVxufSk7XG5cblR5cGVzLkFycmF5ID0gY3JlYXRlVHlwZSh7XG4gIGJhc2VUeXBlOiBBcnJheSxcbiAgY3JlYXRlOiBkZWZhdWx0VmFsdWUgPT4ge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlLnNsaWNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWUuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3JjW2tleV0ubGVuZ3RoID0gMDtcbiAgICB9XG4gIH0sXG4gIGNsZWFyOiAoc3JjLCBrZXkpID0+IHtcbiAgICBzcmNba2V5XS5sZW5ndGggPSAwO1xuICB9LFxuICBjb3B5OiAoc3JjLCBkc3QsIGtleSkgPT4ge1xuICAgIHNyY1trZXldID0gZHN0W2tleV0uc2xpY2UoKTtcbiAgfVxufSk7XG5cbnZhciBzdGFuZGFyZFR5cGVzID0ge1xuICBudW1iZXI6IFR5cGVzLk51bWJlcixcbiAgYm9vbGVhbjogVHlwZXMuQm9vbGVhbixcbiAgc3RyaW5nOiBUeXBlcy5TdHJpbmdcbn07XG5cbi8qKlxuICogVHJ5IHRvIGluZmVyIHRoZSB0eXBlIG9mIHRoZSB2YWx1ZVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfSBUeXBlIG9mIHRoZSBhdHRyaWJ1dGVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGluZmVyVHlwZSh2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gVHlwZXMuQXJyYXk7XG4gIH1cblxuICBpZiAoc3RhbmRhcmRUeXBlc1t0eXBlb2YgdmFsdWVdKSB7XG4gICAgcmV0dXJuIHN0YW5kYXJkVHlwZXNbdHlwZW9mIHZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRDbGFzcyhzY2hlbWEsIG5hbWUpIHtcbiAgLy92YXIgQ29tcG9uZW50ID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gZnVuY3Rpb24gJHtuYW1lfSgpIHt9YCkoKTtcbiAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgIGxldCB0eXBlID0gc2NoZW1hW2tleV0udHlwZTtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHNjaGVtYVtrZXldLnR5cGUgPSBpbmZlclR5cGUoc2NoZW1hW2tleV0uZGVmYXVsdCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIENvbXBvbmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIHZhciBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICBsZXQgdHlwZSA9IGF0dHIudHlwZTtcbiAgICAgIGlmICh0eXBlICYmIHR5cGUuaXNUeXBlKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHR5cGUuY3JlYXRlKGF0dHIuZGVmYXVsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW2tleV0gPSBhdHRyLmRlZmF1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQsIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pO1xuICB9XG5cbiAgQ29tcG9uZW50LnByb3RvdHlwZS5zY2hlbWEgPSBzY2hlbWE7XG5cbiAgdmFyIGtub3duVHlwZXMgPSB0cnVlO1xuICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgdmFyIGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICBpZiAoIWF0dHIudHlwZSkge1xuICAgICAgYXR0ci50eXBlID0gaW5mZXJUeXBlKGF0dHIuZGVmYXVsdCk7XG4gICAgfVxuXG4gICAgdmFyIHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFVua25vd24gdHlwZSBkZWZpbml0aW9uIGZvciBhdHRyaWJ1dGUgJyR7a2V5fSdgKTtcbiAgICAgIGtub3duVHlwZXMgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWtub3duVHlwZXMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgVGhpcyBjb21wb25lbnQgY2FuJ3QgdXNlIHBvb2xpbmcgYmVjYXVzZSBzb21lIGRhdGEgdHlwZXMgYXJlIG5vdCByZWdpc3RlcmVkLiBQbGVhc2UgcHJvdmlkZSBhIHR5cGUgY3JlYXRlZCB3aXRoICdjcmVhdGVUeXBlJ2BcbiAgICApO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHNjaGVtYSkge1xuICAgICAgbGV0IGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICAgIENvbXBvbmVudC5wcm90b3R5cGVba2V5XSA9IGF0dHIuZGVmYXVsdDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24oc3JjKSB7XG4gICAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgIGlmIChzcmNba2V5XSkge1xuICAgICAgICAgIGxldCB0eXBlID0gc2NoZW1hW2tleV0udHlwZTtcbiAgICAgICAgICBpZiAodHlwZS5pc1NpbXBsZVR5cGUpIHtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHNyY1trZXldO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZS5jb3B5KSB7XG4gICAgICAgICAgICB0eXBlLmNvcHkodGhpcywgc3JjLCBrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBAdG9kbyBEZXRlY3QgdGhhdCBpdCdzIG5vdCBwb3NzaWJsZSB0byBjb3B5IGFsbCB0aGUgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gYW5kIGp1c3QgYXZvaWQgY3JlYXRpbmcgdGhlIGNvcHkgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYFVua25vd24gY29weSBmdW5jdGlvbiBmb3IgYXR0cmlidXRlICcke2tleX0nIGRhdGEgdHlwZWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbXBvbmVudC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgbGV0IGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICAgICAgbGV0IHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgICAgIGlmICh0eXBlLnJlc2V0KSB0eXBlLnJlc2V0KHRoaXMsIGtleSwgYXR0ci5kZWZhdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgICAgICBsZXQgdHlwZSA9IHNjaGVtYVtrZXldLnR5cGU7XG4gICAgICAgIGlmICh0eXBlLmNsZWFyKSB0eXBlLmNsZWFyKHRoaXMsIGtleSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIGxldCBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICBsZXQgdHlwZSA9IGF0dHIudHlwZTtcbiAgICAgIENvbXBvbmVudC5wcm90b3R5cGVba2V5XSA9IGF0dHIuZGVmYXVsdDtcblxuICAgICAgaWYgKHR5cGUucmVzZXQpIHtcbiAgICAgICAgdHlwZS5yZXNldChDb21wb25lbnQucHJvdG90eXBlLCBrZXksIGF0dHIuZGVmYXVsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIENvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVJZChsZW5ndGgpIHtcbiAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gIHZhciBjaGFyYWN0ZXJzID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODlcIjtcbiAgdmFyIGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gaW5qZWN0U2NyaXB0KHNyYywgb25Mb2FkKSB7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAvLyBAdG9kbyBVc2UgbGluayB0byB0aGUgZWNzeS1kZXZ0b29scyByZXBvP1xuICBzY3JpcHQuc3JjID0gc3JjO1xuICBzY3JpcHQub25sb2FkID0gb25Mb2FkO1xuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59XG5cbi8qIGdsb2JhbCBQZWVyICovXG5cbmZ1bmN0aW9uIGhvb2tDb25zb2xlQW5kRXJyb3JzKGNvbm5lY3Rpb24pIHtcbiAgdmFyIHdyYXBGdW5jdGlvbnMgPSBbXCJlcnJvclwiLCBcIndhcm5pbmdcIiwgXCJsb2dcIl07XG4gIHdyYXBGdW5jdGlvbnMuZm9yRWFjaChrZXkgPT4ge1xuICAgIGlmICh0eXBlb2YgY29uc29sZVtrZXldID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhciBmbiA9IGNvbnNvbGVba2V5XS5iaW5kKGNvbnNvbGUpO1xuICAgICAgY29uc29sZVtrZXldID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgICAgICBtZXRob2Q6IFwiY29uc29sZVwiLFxuICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICBhcmdzOiBKU09OLnN0cmluZ2lmeShhcmdzKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfTtcbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZXJyb3IgPT4ge1xuICAgIGNvbm5lY3Rpb24uc2VuZCh7XG4gICAgICBtZXRob2Q6IFwiZXJyb3JcIixcbiAgICAgIGVycm9yOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5lcnJvci5zdGFja1xuICAgICAgfSlcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVSZW1vdGVJZEhUTUwocmVtb3RlSWQpIHtcbiAgbGV0IGluZm9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBpbmZvRGl2LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICAgIGNvbG9yOiAjYWFhO1xuICAgIGRpc3BsYXk6ZmxleDtcbiAgICBmb250LWZhbWlseTogQXJpYWw7XG4gICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgbGVmdDogMDtcbiAgICBvcGFjaXR5OiAwLjk7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAwO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB0b3A6IDA7XG4gIGA7XG5cbiAgaW5mb0Rpdi5pbm5lckhUTUwgPSBgT3BlbiBFQ1NZIGRldnRvb2xzIHRvIGNvbm5lY3QgdG8gdGhpcyBwYWdlIHVzaW5nIHRoZSBjb2RlOiZuYnNwOzxiIHN0eWxlPVwiY29sb3I6ICNmZmZcIj4ke3JlbW90ZUlkfTwvYj4mbmJzcDs8YnV0dG9uIG9uQ2xpY2s9XCJnZW5lcmF0ZU5ld0NvZGUoKVwiPkdlbmVyYXRlIG5ldyBjb2RlPC9idXR0b24+YDtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbmZvRGl2KTtcblxuICByZXR1cm4gaW5mb0Rpdjtcbn1cblxuZnVuY3Rpb24gZW5hYmxlUmVtb3RlRGV2dG9vbHMocmVtb3RlSWQpIHtcbiAgd2luZG93LmdlbmVyYXRlTmV3Q29kZSA9ICgpID0+IHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgcmVtb3RlSWQgPSBnZW5lcmF0ZUlkKDYpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImVjc3lSZW1vdGVJZFwiLCByZW1vdGVJZCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7XG4gIH07XG5cbiAgcmVtb3RlSWQgPSByZW1vdGVJZCB8fCB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlY3N5UmVtb3RlSWRcIik7XG4gIGlmICghcmVtb3RlSWQpIHtcbiAgICByZW1vdGVJZCA9IGdlbmVyYXRlSWQoNik7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWNzeVJlbW90ZUlkXCIsIHJlbW90ZUlkKTtcbiAgfVxuXG4gIGxldCBpbmZvRGl2ID0gaW5jbHVkZVJlbW90ZUlkSFRNTChyZW1vdGVJZCk7XG5cbiAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFNfSU5KRUNURUQgPSB0cnVlO1xuICB3aW5kb3cuX19FQ1NZX1JFTU9URV9ERVZUT09MUyA9IHt9O1xuXG4gIGxldCBWZXJzaW9uID0gXCJcIjtcblxuICAvLyBUaGlzIGlzIHVzZWQgdG8gY29sbGVjdCB0aGUgd29ybGRzIGNyZWF0ZWQgYmVmb3JlIHRoZSBjb21tdW5pY2F0aW9uIGlzIGJlaW5nIGVzdGFibGlzaGVkXG4gIGxldCB3b3JsZHNCZWZvcmVMb2FkaW5nID0gW107XG4gIGxldCBvbldvcmxkQ3JlYXRlZCA9IGUgPT4ge1xuICAgIHZhciB3b3JsZCA9IGUuZGV0YWlsLndvcmxkO1xuICAgIFZlcnNpb24gPSBlLmRldGFpbC52ZXJzaW9uO1xuICAgIHdvcmxkc0JlZm9yZUxvYWRpbmcucHVzaCh3b3JsZCk7XG4gIH07XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIG9uV29ybGRDcmVhdGVkKTtcblxuICBsZXQgb25Mb2FkZWQgPSAoKSA9PiB7XG4gICAgdmFyIHBlZXIgPSBuZXcgUGVlcihyZW1vdGVJZCk7XG4gICAgcGVlci5vbihcIm9wZW5cIiwgKC8qIGlkICovKSA9PiB7XG4gICAgICBwZWVyLm9uKFwiY29ubmVjdGlvblwiLCBjb25uZWN0aW9uID0+IHtcbiAgICAgICAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIGNvbm5lY3Rpb24ub24oXCJvcGVuXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGluZm9EaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgaW5mb0Rpdi5pbm5lckhUTUwgPSBcIkNvbm5lY3RlZFwiO1xuXG4gICAgICAgICAgLy8gUmVjZWl2ZSBtZXNzYWdlc1xuICAgICAgICAgIGNvbm5lY3Rpb24ub24oXCJkYXRhXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09IFwiaW5pdFwiKSB7XG4gICAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgc2NyaXB0IGlzIGluamVjdGVkIHdlIGRvbid0IG5lZWQgdG8gbGlzdGVuXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBcImVjc3ktd29ybGQtY3JlYXRlZFwiLFxuICAgICAgICAgICAgICAgICAgb25Xb3JsZENyZWF0ZWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHdvcmxkc0JlZm9yZUxvYWRpbmcuZm9yRWFjaCh3b3JsZCA9PiB7XG4gICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIiwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHsgd29ybGQ6IHdvcmxkLCB2ZXJzaW9uOiBWZXJzaW9uIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBzY3JpcHQuaW5uZXJIVE1MID0gZGF0YS5zY3JpcHQ7XG4gICAgICAgICAgICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCgpO1xuXG4gICAgICAgICAgICAgIGhvb2tDb25zb2xlQW5kRXJyb3JzKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiZXhlY3V0ZVNjcmlwdFwiKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGV2YWwoZGF0YS5zY3JpcHQpO1xuICAgICAgICAgICAgICBpZiAoZGF0YS5yZXR1cm5FdmFsKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldmFsUmV0dXJuXCIsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEluamVjdCBQZWVySlMgc2NyaXB0XG4gIGluamVjdFNjcmlwdChcbiAgICBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGVlcmpzQDAuMy4yMC9kaXN0L3BlZXIubWluLmpzXCIsXG4gICAgb25Mb2FkZWRcbiAgKTtcbn1cblxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcblxuLy8gQHRvZG8gUHJvdmlkZSBhIHdheSB0byBkaXNhYmxlIGl0IGlmIG5lZWRlZFxuaWYgKHVybFBhcmFtcy5oYXMoXCJlbmFibGUtcmVtb3RlLWRldnRvb2xzXCIpKSB7XG4gIGVuYWJsZVJlbW90ZURldnRvb2xzKCk7XG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgTm90LCBTeXN0ZW0sIFN5c3RlbVN0YXRlQ29tcG9uZW50LCBUYWdDb21wb25lbnQsIFR5cGVzLCBWZXJzaW9uLCBXb3JsZCwgY3JlYXRlQ29tcG9uZW50Q2xhc3MsIGNyZWF0ZVR5cGUsIGVuYWJsZVJlbW90ZURldnRvb2xzIH07XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgc3Vycm9nYXRlX3BhaXJzXzEgPSByZXF1aXJlKFwiLi9zdXJyb2dhdGUtcGFpcnNcIik7XG52YXIgSFRNTF9BTFBIQSA9IFsnYXBvcycsICduYnNwJywgJ2lleGNsJywgJ2NlbnQnLCAncG91bmQnLCAnY3VycmVuJywgJ3llbicsICdicnZiYXInLCAnc2VjdCcsICd1bWwnLCAnY29weScsICdvcmRmJywgJ2xhcXVvJywgJ25vdCcsICdzaHknLCAncmVnJywgJ21hY3InLCAnZGVnJywgJ3BsdXNtbicsICdzdXAyJywgJ3N1cDMnLCAnYWN1dGUnLCAnbWljcm8nLCAncGFyYScsICdtaWRkb3QnLCAnY2VkaWwnLCAnc3VwMScsICdvcmRtJywgJ3JhcXVvJywgJ2ZyYWMxNCcsICdmcmFjMTInLCAnZnJhYzM0JywgJ2lxdWVzdCcsICdBZ3JhdmUnLCAnQWFjdXRlJywgJ0FjaXJjJywgJ0F0aWxkZScsICdBdW1sJywgJ0FyaW5nJywgJ0FFbGlnJywgJ0NjZWRpbCcsICdFZ3JhdmUnLCAnRWFjdXRlJywgJ0VjaXJjJywgJ0V1bWwnLCAnSWdyYXZlJywgJ0lhY3V0ZScsICdJY2lyYycsICdJdW1sJywgJ0VUSCcsICdOdGlsZGUnLCAnT2dyYXZlJywgJ09hY3V0ZScsICdPY2lyYycsICdPdGlsZGUnLCAnT3VtbCcsICd0aW1lcycsICdPc2xhc2gnLCAnVWdyYXZlJywgJ1VhY3V0ZScsICdVY2lyYycsICdVdW1sJywgJ1lhY3V0ZScsICdUSE9STicsICdzemxpZycsICdhZ3JhdmUnLCAnYWFjdXRlJywgJ2FjaXJjJywgJ2F0aWxkZScsICdhdW1sJywgJ2FyaW5nJywgJ2FlbGlnJywgJ2NjZWRpbCcsICdlZ3JhdmUnLCAnZWFjdXRlJywgJ2VjaXJjJywgJ2V1bWwnLCAnaWdyYXZlJywgJ2lhY3V0ZScsICdpY2lyYycsICdpdW1sJywgJ2V0aCcsICdudGlsZGUnLCAnb2dyYXZlJywgJ29hY3V0ZScsICdvY2lyYycsICdvdGlsZGUnLCAnb3VtbCcsICdkaXZpZGUnLCAnb3NsYXNoJywgJ3VncmF2ZScsICd1YWN1dGUnLCAndWNpcmMnLCAndXVtbCcsICd5YWN1dGUnLCAndGhvcm4nLCAneXVtbCcsICdxdW90JywgJ2FtcCcsICdsdCcsICdndCcsICdPRWxpZycsICdvZWxpZycsICdTY2Fyb24nLCAnc2Nhcm9uJywgJ1l1bWwnLCAnY2lyYycsICd0aWxkZScsICdlbnNwJywgJ2Vtc3AnLCAndGhpbnNwJywgJ3p3bmonLCAnendqJywgJ2xybScsICdybG0nLCAnbmRhc2gnLCAnbWRhc2gnLCAnbHNxdW8nLCAncnNxdW8nLCAnc2JxdW8nLCAnbGRxdW8nLCAncmRxdW8nLCAnYmRxdW8nLCAnZGFnZ2VyJywgJ0RhZ2dlcicsICdwZXJtaWwnLCAnbHNhcXVvJywgJ3JzYXF1bycsICdldXJvJywgJ2Zub2YnLCAnQWxwaGEnLCAnQmV0YScsICdHYW1tYScsICdEZWx0YScsICdFcHNpbG9uJywgJ1pldGEnLCAnRXRhJywgJ1RoZXRhJywgJ0lvdGEnLCAnS2FwcGEnLCAnTGFtYmRhJywgJ011JywgJ051JywgJ1hpJywgJ09taWNyb24nLCAnUGknLCAnUmhvJywgJ1NpZ21hJywgJ1RhdScsICdVcHNpbG9uJywgJ1BoaScsICdDaGknLCAnUHNpJywgJ09tZWdhJywgJ2FscGhhJywgJ2JldGEnLCAnZ2FtbWEnLCAnZGVsdGEnLCAnZXBzaWxvbicsICd6ZXRhJywgJ2V0YScsICd0aGV0YScsICdpb3RhJywgJ2thcHBhJywgJ2xhbWJkYScsICdtdScsICdudScsICd4aScsICdvbWljcm9uJywgJ3BpJywgJ3JobycsICdzaWdtYWYnLCAnc2lnbWEnLCAndGF1JywgJ3Vwc2lsb24nLCAncGhpJywgJ2NoaScsICdwc2knLCAnb21lZ2EnLCAndGhldGFzeW0nLCAndXBzaWgnLCAncGl2JywgJ2J1bGwnLCAnaGVsbGlwJywgJ3ByaW1lJywgJ1ByaW1lJywgJ29saW5lJywgJ2ZyYXNsJywgJ3dlaWVycCcsICdpbWFnZScsICdyZWFsJywgJ3RyYWRlJywgJ2FsZWZzeW0nLCAnbGFycicsICd1YXJyJywgJ3JhcnInLCAnZGFycicsICdoYXJyJywgJ2NyYXJyJywgJ2xBcnInLCAndUFycicsICdyQXJyJywgJ2RBcnInLCAnaEFycicsICdmb3JhbGwnLCAncGFydCcsICdleGlzdCcsICdlbXB0eScsICduYWJsYScsICdpc2luJywgJ25vdGluJywgJ25pJywgJ3Byb2QnLCAnc3VtJywgJ21pbnVzJywgJ2xvd2FzdCcsICdyYWRpYycsICdwcm9wJywgJ2luZmluJywgJ2FuZycsICdhbmQnLCAnb3InLCAnY2FwJywgJ2N1cCcsICdpbnQnLCAndGhlcmU0JywgJ3NpbScsICdjb25nJywgJ2FzeW1wJywgJ25lJywgJ2VxdWl2JywgJ2xlJywgJ2dlJywgJ3N1YicsICdzdXAnLCAnbnN1YicsICdzdWJlJywgJ3N1cGUnLCAnb3BsdXMnLCAnb3RpbWVzJywgJ3BlcnAnLCAnc2RvdCcsICdsY2VpbCcsICdyY2VpbCcsICdsZmxvb3InLCAncmZsb29yJywgJ2xhbmcnLCAncmFuZycsICdsb3onLCAnc3BhZGVzJywgJ2NsdWJzJywgJ2hlYXJ0cycsICdkaWFtcyddO1xudmFyIEhUTUxfQ09ERVMgPSBbMzksIDE2MCwgMTYxLCAxNjIsIDE2MywgMTY0LCAxNjUsIDE2NiwgMTY3LCAxNjgsIDE2OSwgMTcwLCAxNzEsIDE3MiwgMTczLCAxNzQsIDE3NSwgMTc2LCAxNzcsIDE3OCwgMTc5LCAxODAsIDE4MSwgMTgyLCAxODMsIDE4NCwgMTg1LCAxODYsIDE4NywgMTg4LCAxODksIDE5MCwgMTkxLCAxOTIsIDE5MywgMTk0LCAxOTUsIDE5NiwgMTk3LCAxOTgsIDE5OSwgMjAwLCAyMDEsIDIwMiwgMjAzLCAyMDQsIDIwNSwgMjA2LCAyMDcsIDIwOCwgMjA5LCAyMTAsIDIxMSwgMjEyLCAyMTMsIDIxNCwgMjE1LCAyMTYsIDIxNywgMjE4LCAyMTksIDIyMCwgMjIxLCAyMjIsIDIyMywgMjI0LCAyMjUsIDIyNiwgMjI3LCAyMjgsIDIyOSwgMjMwLCAyMzEsIDIzMiwgMjMzLCAyMzQsIDIzNSwgMjM2LCAyMzcsIDIzOCwgMjM5LCAyNDAsIDI0MSwgMjQyLCAyNDMsIDI0NCwgMjQ1LCAyNDYsIDI0NywgMjQ4LCAyNDksIDI1MCwgMjUxLCAyNTIsIDI1MywgMjU0LCAyNTUsIDM0LCAzOCwgNjAsIDYyLCAzMzgsIDMzOSwgMzUyLCAzNTMsIDM3NiwgNzEwLCA3MzIsIDgxOTQsIDgxOTUsIDgyMDEsIDgyMDQsIDgyMDUsIDgyMDYsIDgyMDcsIDgyMTEsIDgyMTIsIDgyMTYsIDgyMTcsIDgyMTgsIDgyMjAsIDgyMjEsIDgyMjIsIDgyMjQsIDgyMjUsIDgyNDAsIDgyNDksIDgyNTAsIDgzNjQsIDQwMiwgOTEzLCA5MTQsIDkxNSwgOTE2LCA5MTcsIDkxOCwgOTE5LCA5MjAsIDkyMSwgOTIyLCA5MjMsIDkyNCwgOTI1LCA5MjYsIDkyNywgOTI4LCA5MjksIDkzMSwgOTMyLCA5MzMsIDkzNCwgOTM1LCA5MzYsIDkzNywgOTQ1LCA5NDYsIDk0NywgOTQ4LCA5NDksIDk1MCwgOTUxLCA5NTIsIDk1MywgOTU0LCA5NTUsIDk1NiwgOTU3LCA5NTgsIDk1OSwgOTYwLCA5NjEsIDk2MiwgOTYzLCA5NjQsIDk2NSwgOTY2LCA5NjcsIDk2OCwgOTY5LCA5NzcsIDk3OCwgOTgyLCA4MjI2LCA4MjMwLCA4MjQyLCA4MjQzLCA4MjU0LCA4MjYwLCA4NDcyLCA4NDY1LCA4NDc2LCA4NDgyLCA4NTAxLCA4NTkyLCA4NTkzLCA4NTk0LCA4NTk1LCA4NTk2LCA4NjI5LCA4NjU2LCA4NjU3LCA4NjU4LCA4NjU5LCA4NjYwLCA4NzA0LCA4NzA2LCA4NzA3LCA4NzA5LCA4NzExLCA4NzEyLCA4NzEzLCA4NzE1LCA4NzE5LCA4NzIxLCA4NzIyLCA4NzI3LCA4NzMwLCA4NzMzLCA4NzM0LCA4NzM2LCA4NzQzLCA4NzQ0LCA4NzQ1LCA4NzQ2LCA4NzQ3LCA4NzU2LCA4NzY0LCA4NzczLCA4Nzc2LCA4ODAwLCA4ODAxLCA4ODA0LCA4ODA1LCA4ODM0LCA4ODM1LCA4ODM2LCA4ODM4LCA4ODM5LCA4ODUzLCA4ODU1LCA4ODY5LCA4OTAxLCA4OTY4LCA4OTY5LCA4OTcwLCA4OTcxLCA5MDAxLCA5MDAyLCA5Njc0LCA5ODI0LCA5ODI3LCA5ODI5LCA5ODMwXTtcbnZhciBhbHBoYUluZGV4ID0ge307XG52YXIgbnVtSW5kZXggPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBsZW5ndGggPSBIVE1MX0FMUEhBLmxlbmd0aDtcbiAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgICB2YXIgYSA9IEhUTUxfQUxQSEFbaV07XG4gICAgICAgIHZhciBjID0gSFRNTF9DT0RFU1tpXTtcbiAgICAgICAgYWxwaGFJbmRleFthXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgIG51bUluZGV4W2NdID0gYTtcbiAgICAgICAgaSsrO1xuICAgIH1cbn0pKCk7XG52YXIgSHRtbDRFbnRpdGllcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIdG1sNEVudGl0aWVzKCkge1xuICAgIH1cbiAgICBIdG1sNEVudGl0aWVzLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8mKCM/W1xcd1xcZF0rKTs/L2csIGZ1bmN0aW9uIChzLCBlbnRpdHkpIHtcbiAgICAgICAgICAgIHZhciBjaHI7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmNoYXJBdCgwKSA9PT0gXCIjXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGVudGl0eS5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKSA9PT0gJ3gnID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoZW50aXR5LnN1YnN0cigyKSwgMTYpIDpcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoZW50aXR5LnN1YnN0cigxKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihjb2RlKSB8fCBjb2RlID49IC0zMjc2OCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA8PSA2NTUzNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNociA9IHN1cnJvZ2F0ZV9wYWlyc18xLmZyb21Db2RlUG9pbnQoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHIgPSBhbHBoYUluZGV4W2VudGl0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hyIHx8IHM7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSHRtbDRFbnRpdGllcy5kZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbDRFbnRpdGllcygpLmRlY29kZShzdHIpO1xuICAgIH07XG4gICAgSHRtbDRFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBhbHBoYSA9IG51bUluZGV4W3N0ci5jaGFyQ29kZUF0KGkpXTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYSA/IFwiJlwiICsgYWxwaGEgKyBcIjtcIiA6IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEh0bWw0RW50aXRpZXMuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw0RW50aXRpZXMoKS5lbmNvZGUoc3RyKTtcbiAgICB9O1xuICAgIEh0bWw0RW50aXRpZXMucHJvdG90eXBlLmVuY29kZU5vblVURiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgY2MgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIHZhciBhbHBoYSA9IG51bUluZGV4W2NjXTtcbiAgICAgICAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIiZcIiArIGFscGhhICsgXCI7XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjYyA8IDMyIHx8IGNjID4gMTI2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNjID49IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVGcm9tICYmIGNjIDw9IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVUbykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIHN1cnJvZ2F0ZV9wYWlyc18xLmdldENvZGVQb2ludChzdHIsIGkpICsgJzsnO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIGNjICsgJzsnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzdHIuY2hhckF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBIdG1sNEVudGl0aWVzLmVuY29kZU5vblVURiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sNEVudGl0aWVzKCkuZW5jb2RlTm9uVVRGKHN0cik7XG4gICAgfTtcbiAgICBIdG1sNEVudGl0aWVzLnByb3RvdHlwZS5lbmNvZGVOb25BU0NJSSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgaWYgKGMgPD0gMjU1KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0cltpKytdO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMgPj0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZUZyb20gJiYgYyA8PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlVG8pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIHN1cnJvZ2F0ZV9wYWlyc18xLmdldENvZGVQb2ludChzdHIsIGkpICsgJzsnO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgYyArICc7JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgSHRtbDRFbnRpdGllcy5lbmNvZGVOb25BU0NJSSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sNEVudGl0aWVzKCkuZW5jb2RlTm9uQVNDSUkoc3RyKTtcbiAgICB9O1xuICAgIHJldHVybiBIdG1sNEVudGl0aWVzO1xufSgpKTtcbmV4cG9ydHMuSHRtbDRFbnRpdGllcyA9IEh0bWw0RW50aXRpZXM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBzdXJyb2dhdGVfcGFpcnNfMSA9IHJlcXVpcmUoXCIuL3N1cnJvZ2F0ZS1wYWlyc1wiKTtcbnZhciBFTlRJVElFUyA9IFtbJ0FhY3V0ZScsIFsxOTNdXSwgWydhYWN1dGUnLCBbMjI1XV0sIFsnQWJyZXZlJywgWzI1OF1dLCBbJ2FicmV2ZScsIFsyNTldXSwgWydhYycsIFs4NzY2XV0sIFsnYWNkJywgWzg3NjddXSwgWydhY0UnLCBbODc2NiwgODE5XV0sIFsnQWNpcmMnLCBbMTk0XV0sIFsnYWNpcmMnLCBbMjI2XV0sIFsnYWN1dGUnLCBbMTgwXV0sIFsnQWN5JywgWzEwNDBdXSwgWydhY3knLCBbMTA3Ml1dLCBbJ0FFbGlnJywgWzE5OF1dLCBbJ2FlbGlnJywgWzIzMF1dLCBbJ2FmJywgWzgyODldXSwgWydBZnInLCBbMTIwMDY4XV0sIFsnYWZyJywgWzEyMDA5NF1dLCBbJ0FncmF2ZScsIFsxOTJdXSwgWydhZ3JhdmUnLCBbMjI0XV0sIFsnYWxlZnN5bScsIFs4NTAxXV0sIFsnYWxlcGgnLCBbODUwMV1dLCBbJ0FscGhhJywgWzkxM11dLCBbJ2FscGhhJywgWzk0NV1dLCBbJ0FtYWNyJywgWzI1Nl1dLCBbJ2FtYWNyJywgWzI1N11dLCBbJ2FtYWxnJywgWzEwODE1XV0sIFsnYW1wJywgWzM4XV0sIFsnQU1QJywgWzM4XV0sIFsnYW5kYW5kJywgWzEwODM3XV0sIFsnQW5kJywgWzEwODM1XV0sIFsnYW5kJywgWzg3NDNdXSwgWydhbmRkJywgWzEwODQ0XV0sIFsnYW5kc2xvcGUnLCBbMTA4NDBdXSwgWydhbmR2JywgWzEwODQyXV0sIFsnYW5nJywgWzg3MzZdXSwgWydhbmdlJywgWzEwNjYwXV0sIFsnYW5nbGUnLCBbODczNl1dLCBbJ2FuZ21zZGFhJywgWzEwNjY0XV0sIFsnYW5nbXNkYWInLCBbMTA2NjVdXSwgWydhbmdtc2RhYycsIFsxMDY2Nl1dLCBbJ2FuZ21zZGFkJywgWzEwNjY3XV0sIFsnYW5nbXNkYWUnLCBbMTA2NjhdXSwgWydhbmdtc2RhZicsIFsxMDY2OV1dLCBbJ2FuZ21zZGFnJywgWzEwNjcwXV0sIFsnYW5nbXNkYWgnLCBbMTA2NzFdXSwgWydhbmdtc2QnLCBbODczN11dLCBbJ2FuZ3J0JywgWzg3MzVdXSwgWydhbmdydHZiJywgWzg4OTRdXSwgWydhbmdydHZiZCcsIFsxMDY1M11dLCBbJ2FuZ3NwaCcsIFs4NzM4XV0sIFsnYW5nc3QnLCBbMTk3XV0sIFsnYW5nemFycicsIFs5MDg0XV0sIFsnQW9nb24nLCBbMjYwXV0sIFsnYW9nb24nLCBbMjYxXV0sIFsnQW9wZicsIFsxMjAxMjBdXSwgWydhb3BmJywgWzEyMDE0Nl1dLCBbJ2FwYWNpcicsIFsxMDg2M11dLCBbJ2FwJywgWzg3NzZdXSwgWydhcEUnLCBbMTA4NjRdXSwgWydhcGUnLCBbODc3OF1dLCBbJ2FwaWQnLCBbODc3OV1dLCBbJ2Fwb3MnLCBbMzldXSwgWydBcHBseUZ1bmN0aW9uJywgWzgyODldXSwgWydhcHByb3gnLCBbODc3Nl1dLCBbJ2FwcHJveGVxJywgWzg3NzhdXSwgWydBcmluZycsIFsxOTddXSwgWydhcmluZycsIFsyMjldXSwgWydBc2NyJywgWzExOTk2NF1dLCBbJ2FzY3InLCBbMTE5OTkwXV0sIFsnQXNzaWduJywgWzg3ODhdXSwgWydhc3QnLCBbNDJdXSwgWydhc3ltcCcsIFs4Nzc2XV0sIFsnYXN5bXBlcScsIFs4NzgxXV0sIFsnQXRpbGRlJywgWzE5NV1dLCBbJ2F0aWxkZScsIFsyMjddXSwgWydBdW1sJywgWzE5Nl1dLCBbJ2F1bWwnLCBbMjI4XV0sIFsnYXdjb25pbnQnLCBbODc1NV1dLCBbJ2F3aW50JywgWzEwNzY5XV0sIFsnYmFja2NvbmcnLCBbODc4MF1dLCBbJ2JhY2tlcHNpbG9uJywgWzEwMTRdXSwgWydiYWNrcHJpbWUnLCBbODI0NV1dLCBbJ2JhY2tzaW0nLCBbODc2NV1dLCBbJ2JhY2tzaW1lcScsIFs4OTA5XV0sIFsnQmFja3NsYXNoJywgWzg3MjZdXSwgWydCYXJ2JywgWzEwOTgzXV0sIFsnYmFydmVlJywgWzg4OTNdXSwgWydiYXJ3ZWQnLCBbODk2NV1dLCBbJ0JhcndlZCcsIFs4OTY2XV0sIFsnYmFyd2VkZ2UnLCBbODk2NV1dLCBbJ2JicmsnLCBbOTE0MV1dLCBbJ2Jicmt0YnJrJywgWzkxNDJdXSwgWydiY29uZycsIFs4NzgwXV0sIFsnQmN5JywgWzEwNDFdXSwgWydiY3knLCBbMTA3M11dLCBbJ2JkcXVvJywgWzgyMjJdXSwgWydiZWNhdXMnLCBbODc1N11dLCBbJ2JlY2F1c2UnLCBbODc1N11dLCBbJ0JlY2F1c2UnLCBbODc1N11dLCBbJ2JlbXB0eXYnLCBbMTA2NzJdXSwgWydiZXBzaScsIFsxMDE0XV0sIFsnYmVybm91JywgWzg0OTJdXSwgWydCZXJub3VsbGlzJywgWzg0OTJdXSwgWydCZXRhJywgWzkxNF1dLCBbJ2JldGEnLCBbOTQ2XV0sIFsnYmV0aCcsIFs4NTAyXV0sIFsnYmV0d2VlbicsIFs4ODEyXV0sIFsnQmZyJywgWzEyMDA2OV1dLCBbJ2JmcicsIFsxMjAwOTVdXSwgWydiaWdjYXAnLCBbODg5OF1dLCBbJ2JpZ2NpcmMnLCBbOTcxMV1dLCBbJ2JpZ2N1cCcsIFs4ODk5XV0sIFsnYmlnb2RvdCcsIFsxMDc1Ml1dLCBbJ2JpZ29wbHVzJywgWzEwNzUzXV0sIFsnYmlnb3RpbWVzJywgWzEwNzU0XV0sIFsnYmlnc3FjdXAnLCBbMTA3NThdXSwgWydiaWdzdGFyJywgWzk3MzNdXSwgWydiaWd0cmlhbmdsZWRvd24nLCBbOTY2MV1dLCBbJ2JpZ3RyaWFuZ2xldXAnLCBbOTY1MV1dLCBbJ2JpZ3VwbHVzJywgWzEwNzU2XV0sIFsnYmlndmVlJywgWzg4OTddXSwgWydiaWd3ZWRnZScsIFs4ODk2XV0sIFsnYmthcm93JywgWzEwNTA5XV0sIFsnYmxhY2tsb3plbmdlJywgWzEwNzMxXV0sIFsnYmxhY2tzcXVhcmUnLCBbOTY0Ml1dLCBbJ2JsYWNrdHJpYW5nbGUnLCBbOTY1Ml1dLCBbJ2JsYWNrdHJpYW5nbGVkb3duJywgWzk2NjJdXSwgWydibGFja3RyaWFuZ2xlbGVmdCcsIFs5NjY2XV0sIFsnYmxhY2t0cmlhbmdsZXJpZ2h0JywgWzk2NTZdXSwgWydibGFuaycsIFs5MjUxXV0sIFsnYmxrMTInLCBbOTYxOF1dLCBbJ2JsazE0JywgWzk2MTddXSwgWydibGszNCcsIFs5NjE5XV0sIFsnYmxvY2snLCBbOTYwOF1dLCBbJ2JuZScsIFs2MSwgODQyMV1dLCBbJ2JuZXF1aXYnLCBbODgwMSwgODQyMV1dLCBbJ2JOb3QnLCBbMTA5ODldXSwgWydibm90JywgWzg5NzZdXSwgWydCb3BmJywgWzEyMDEyMV1dLCBbJ2JvcGYnLCBbMTIwMTQ3XV0sIFsnYm90JywgWzg4NjldXSwgWydib3R0b20nLCBbODg2OV1dLCBbJ2Jvd3RpZScsIFs4OTA0XV0sIFsnYm94Ym94JywgWzEwNjk3XV0sIFsnYm94ZGwnLCBbOTQ4OF1dLCBbJ2JveGRMJywgWzk1NTddXSwgWydib3hEbCcsIFs5NTU4XV0sIFsnYm94REwnLCBbOTU1OV1dLCBbJ2JveGRyJywgWzk0ODRdXSwgWydib3hkUicsIFs5NTU0XV0sIFsnYm94RHInLCBbOTU1NV1dLCBbJ2JveERSJywgWzk1NTZdXSwgWydib3hoJywgWzk0NzJdXSwgWydib3hIJywgWzk1NTJdXSwgWydib3hoZCcsIFs5NTE2XV0sIFsnYm94SGQnLCBbOTU3Ml1dLCBbJ2JveGhEJywgWzk1NzNdXSwgWydib3hIRCcsIFs5NTc0XV0sIFsnYm94aHUnLCBbOTUyNF1dLCBbJ2JveEh1JywgWzk1NzVdXSwgWydib3hoVScsIFs5NTc2XV0sIFsnYm94SFUnLCBbOTU3N11dLCBbJ2JveG1pbnVzJywgWzg4NjNdXSwgWydib3hwbHVzJywgWzg4NjJdXSwgWydib3h0aW1lcycsIFs4ODY0XV0sIFsnYm94dWwnLCBbOTQ5Nl1dLCBbJ2JveHVMJywgWzk1NjNdXSwgWydib3hVbCcsIFs5NTY0XV0sIFsnYm94VUwnLCBbOTU2NV1dLCBbJ2JveHVyJywgWzk0OTJdXSwgWydib3h1UicsIFs5NTYwXV0sIFsnYm94VXInLCBbOTU2MV1dLCBbJ2JveFVSJywgWzk1NjJdXSwgWydib3h2JywgWzk0NzRdXSwgWydib3hWJywgWzk1NTNdXSwgWydib3h2aCcsIFs5NTMyXV0sIFsnYm94dkgnLCBbOTU3OF1dLCBbJ2JveFZoJywgWzk1NzldXSwgWydib3hWSCcsIFs5NTgwXV0sIFsnYm94dmwnLCBbOTUwOF1dLCBbJ2JveHZMJywgWzk1NjldXSwgWydib3hWbCcsIFs5NTcwXV0sIFsnYm94VkwnLCBbOTU3MV1dLCBbJ2JveHZyJywgWzk1MDBdXSwgWydib3h2UicsIFs5NTY2XV0sIFsnYm94VnInLCBbOTU2N11dLCBbJ2JveFZSJywgWzk1NjhdXSwgWydicHJpbWUnLCBbODI0NV1dLCBbJ2JyZXZlJywgWzcyOF1dLCBbJ0JyZXZlJywgWzcyOF1dLCBbJ2JydmJhcicsIFsxNjZdXSwgWydic2NyJywgWzExOTk5MV1dLCBbJ0JzY3InLCBbODQ5Ml1dLCBbJ2JzZW1pJywgWzgyNzFdXSwgWydic2ltJywgWzg3NjVdXSwgWydic2ltZScsIFs4OTA5XV0sIFsnYnNvbGInLCBbMTA2OTNdXSwgWydic29sJywgWzkyXV0sIFsnYnNvbGhzdWInLCBbMTAxODRdXSwgWydidWxsJywgWzgyMjZdXSwgWydidWxsZXQnLCBbODIyNl1dLCBbJ2J1bXAnLCBbODc4Ml1dLCBbJ2J1bXBFJywgWzEwOTI2XV0sIFsnYnVtcGUnLCBbODc4M11dLCBbJ0J1bXBlcScsIFs4NzgyXV0sIFsnYnVtcGVxJywgWzg3ODNdXSwgWydDYWN1dGUnLCBbMjYyXV0sIFsnY2FjdXRlJywgWzI2M11dLCBbJ2NhcGFuZCcsIFsxMDgyMF1dLCBbJ2NhcGJyY3VwJywgWzEwODI1XV0sIFsnY2FwY2FwJywgWzEwODI3XV0sIFsnY2FwJywgWzg3NDVdXSwgWydDYXAnLCBbODkxNF1dLCBbJ2NhcGN1cCcsIFsxMDgyM11dLCBbJ2NhcGRvdCcsIFsxMDgxNl1dLCBbJ0NhcGl0YWxEaWZmZXJlbnRpYWxEJywgWzg1MTddXSwgWydjYXBzJywgWzg3NDUsIDY1MDI0XV0sIFsnY2FyZXQnLCBbODI1N11dLCBbJ2Nhcm9uJywgWzcxMV1dLCBbJ0NheWxleXMnLCBbODQ5M11dLCBbJ2NjYXBzJywgWzEwODI5XV0sIFsnQ2Nhcm9uJywgWzI2OF1dLCBbJ2NjYXJvbicsIFsyNjldXSwgWydDY2VkaWwnLCBbMTk5XV0sIFsnY2NlZGlsJywgWzIzMV1dLCBbJ0NjaXJjJywgWzI2NF1dLCBbJ2NjaXJjJywgWzI2NV1dLCBbJ0Njb25pbnQnLCBbODc1Ml1dLCBbJ2NjdXBzJywgWzEwODI4XV0sIFsnY2N1cHNzbScsIFsxMDgzMl1dLCBbJ0Nkb3QnLCBbMjY2XV0sIFsnY2RvdCcsIFsyNjddXSwgWydjZWRpbCcsIFsxODRdXSwgWydDZWRpbGxhJywgWzE4NF1dLCBbJ2NlbXB0eXYnLCBbMTA2NzRdXSwgWydjZW50JywgWzE2Ml1dLCBbJ2NlbnRlcmRvdCcsIFsxODNdXSwgWydDZW50ZXJEb3QnLCBbMTgzXV0sIFsnY2ZyJywgWzEyMDA5Nl1dLCBbJ0NmcicsIFs4NDkzXV0sIFsnQ0hjeScsIFsxMDYzXV0sIFsnY2hjeScsIFsxMDk1XV0sIFsnY2hlY2snLCBbMTAwMDNdXSwgWydjaGVja21hcmsnLCBbMTAwMDNdXSwgWydDaGknLCBbOTM1XV0sIFsnY2hpJywgWzk2N11dLCBbJ2NpcmMnLCBbNzEwXV0sIFsnY2lyY2VxJywgWzg3OTFdXSwgWydjaXJjbGVhcnJvd2xlZnQnLCBbODYzNF1dLCBbJ2NpcmNsZWFycm93cmlnaHQnLCBbODYzNV1dLCBbJ2NpcmNsZWRhc3QnLCBbODg1OV1dLCBbJ2NpcmNsZWRjaXJjJywgWzg4NThdXSwgWydjaXJjbGVkZGFzaCcsIFs4ODYxXV0sIFsnQ2lyY2xlRG90JywgWzg4NTddXSwgWydjaXJjbGVkUicsIFsxNzRdXSwgWydjaXJjbGVkUycsIFs5NDE2XV0sIFsnQ2lyY2xlTWludXMnLCBbODg1NF1dLCBbJ0NpcmNsZVBsdXMnLCBbODg1M11dLCBbJ0NpcmNsZVRpbWVzJywgWzg4NTVdXSwgWydjaXInLCBbOTY3NV1dLCBbJ2NpckUnLCBbMTA2OTFdXSwgWydjaXJlJywgWzg3OTFdXSwgWydjaXJmbmludCcsIFsxMDc2OF1dLCBbJ2Npcm1pZCcsIFsxMDk5MV1dLCBbJ2NpcnNjaXInLCBbMTA2OTBdXSwgWydDbG9ja3dpc2VDb250b3VySW50ZWdyYWwnLCBbODc1NF1dLCBbJ2NsdWJzJywgWzk4MjddXSwgWydjbHVic3VpdCcsIFs5ODI3XV0sIFsnY29sb24nLCBbNThdXSwgWydDb2xvbicsIFs4NzU5XV0sIFsnQ29sb25lJywgWzEwODY4XV0sIFsnY29sb25lJywgWzg3ODhdXSwgWydjb2xvbmVxJywgWzg3ODhdXSwgWydjb21tYScsIFs0NF1dLCBbJ2NvbW1hdCcsIFs2NF1dLCBbJ2NvbXAnLCBbODcwNV1dLCBbJ2NvbXBmbicsIFs4NzI4XV0sIFsnY29tcGxlbWVudCcsIFs4NzA1XV0sIFsnY29tcGxleGVzJywgWzg0NTBdXSwgWydjb25nJywgWzg3NzNdXSwgWydjb25nZG90JywgWzEwODYxXV0sIFsnQ29uZ3J1ZW50JywgWzg4MDFdXSwgWydjb25pbnQnLCBbODc1MF1dLCBbJ0NvbmludCcsIFs4NzUxXV0sIFsnQ29udG91ckludGVncmFsJywgWzg3NTBdXSwgWydjb3BmJywgWzEyMDE0OF1dLCBbJ0NvcGYnLCBbODQ1MF1dLCBbJ2NvcHJvZCcsIFs4NzIwXV0sIFsnQ29wcm9kdWN0JywgWzg3MjBdXSwgWydjb3B5JywgWzE2OV1dLCBbJ0NPUFknLCBbMTY5XV0sIFsnY29weXNyJywgWzg0NzFdXSwgWydDb3VudGVyQ2xvY2t3aXNlQ29udG91ckludGVncmFsJywgWzg3NTVdXSwgWydjcmFycicsIFs4NjI5XV0sIFsnY3Jvc3MnLCBbMTAwMDddXSwgWydDcm9zcycsIFsxMDc5OV1dLCBbJ0NzY3InLCBbMTE5OTY2XV0sIFsnY3NjcicsIFsxMTk5OTJdXSwgWydjc3ViJywgWzEwOTU5XV0sIFsnY3N1YmUnLCBbMTA5NjFdXSwgWydjc3VwJywgWzEwOTYwXV0sIFsnY3N1cGUnLCBbMTA5NjJdXSwgWydjdGRvdCcsIFs4OTQzXV0sIFsnY3VkYXJybCcsIFsxMDU1Ml1dLCBbJ2N1ZGFycnInLCBbMTA1NDldXSwgWydjdWVwcicsIFs4OTI2XV0sIFsnY3Vlc2MnLCBbODkyN11dLCBbJ2N1bGFycicsIFs4NjMwXV0sIFsnY3VsYXJycCcsIFsxMDU1N11dLCBbJ2N1cGJyY2FwJywgWzEwODI0XV0sIFsnY3VwY2FwJywgWzEwODIyXV0sIFsnQ3VwQ2FwJywgWzg3ODFdXSwgWydjdXAnLCBbODc0Nl1dLCBbJ0N1cCcsIFs4OTE1XV0sIFsnY3VwY3VwJywgWzEwODI2XV0sIFsnY3VwZG90JywgWzg4NDVdXSwgWydjdXBvcicsIFsxMDgyMV1dLCBbJ2N1cHMnLCBbODc0NiwgNjUwMjRdXSwgWydjdXJhcnInLCBbODYzMV1dLCBbJ2N1cmFycm0nLCBbMTA1NTZdXSwgWydjdXJseWVxcHJlYycsIFs4OTI2XV0sIFsnY3VybHllcXN1Y2MnLCBbODkyN11dLCBbJ2N1cmx5dmVlJywgWzg5MTBdXSwgWydjdXJseXdlZGdlJywgWzg5MTFdXSwgWydjdXJyZW4nLCBbMTY0XV0sIFsnY3VydmVhcnJvd2xlZnQnLCBbODYzMF1dLCBbJ2N1cnZlYXJyb3dyaWdodCcsIFs4NjMxXV0sIFsnY3V2ZWUnLCBbODkxMF1dLCBbJ2N1d2VkJywgWzg5MTFdXSwgWydjd2NvbmludCcsIFs4NzU0XV0sIFsnY3dpbnQnLCBbODc1M11dLCBbJ2N5bGN0eScsIFs5MDA1XV0sIFsnZGFnZ2VyJywgWzgyMjRdXSwgWydEYWdnZXInLCBbODIyNV1dLCBbJ2RhbGV0aCcsIFs4NTA0XV0sIFsnZGFycicsIFs4NTk1XV0sIFsnRGFycicsIFs4NjA5XV0sIFsnZEFycicsIFs4NjU5XV0sIFsnZGFzaCcsIFs4MjA4XV0sIFsnRGFzaHYnLCBbMTA5ODBdXSwgWydkYXNodicsIFs4ODY3XV0sIFsnZGJrYXJvdycsIFsxMDUxMV1dLCBbJ2RibGFjJywgWzczM11dLCBbJ0RjYXJvbicsIFsyNzBdXSwgWydkY2Fyb24nLCBbMjcxXV0sIFsnRGN5JywgWzEwNDRdXSwgWydkY3knLCBbMTA3Nl1dLCBbJ2RkYWdnZXInLCBbODIyNV1dLCBbJ2RkYXJyJywgWzg2NTBdXSwgWydERCcsIFs4NTE3XV0sIFsnZGQnLCBbODUxOF1dLCBbJ0REb3RyYWhkJywgWzEwNTEzXV0sIFsnZGRvdHNlcScsIFsxMDg3MV1dLCBbJ2RlZycsIFsxNzZdXSwgWydEZWwnLCBbODcxMV1dLCBbJ0RlbHRhJywgWzkxNl1dLCBbJ2RlbHRhJywgWzk0OF1dLCBbJ2RlbXB0eXYnLCBbMTA2NzNdXSwgWydkZmlzaHQnLCBbMTA2MjNdXSwgWydEZnInLCBbMTIwMDcxXV0sIFsnZGZyJywgWzEyMDA5N11dLCBbJ2RIYXInLCBbMTA1OTddXSwgWydkaGFybCcsIFs4NjQzXV0sIFsnZGhhcnInLCBbODY0Ml1dLCBbJ0RpYWNyaXRpY2FsQWN1dGUnLCBbMTgwXV0sIFsnRGlhY3JpdGljYWxEb3QnLCBbNzI5XV0sIFsnRGlhY3JpdGljYWxEb3VibGVBY3V0ZScsIFs3MzNdXSwgWydEaWFjcml0aWNhbEdyYXZlJywgWzk2XV0sIFsnRGlhY3JpdGljYWxUaWxkZScsIFs3MzJdXSwgWydkaWFtJywgWzg5MDBdXSwgWydkaWFtb25kJywgWzg5MDBdXSwgWydEaWFtb25kJywgWzg5MDBdXSwgWydkaWFtb25kc3VpdCcsIFs5ODMwXV0sIFsnZGlhbXMnLCBbOTgzMF1dLCBbJ2RpZScsIFsxNjhdXSwgWydEaWZmZXJlbnRpYWxEJywgWzg1MThdXSwgWydkaWdhbW1hJywgWzk4OV1dLCBbJ2Rpc2luJywgWzg5NDZdXSwgWydkaXYnLCBbMjQ3XV0sIFsnZGl2aWRlJywgWzI0N11dLCBbJ2RpdmlkZW9udGltZXMnLCBbODkwM11dLCBbJ2Rpdm9ueCcsIFs4OTAzXV0sIFsnREpjeScsIFsxMDI2XV0sIFsnZGpjeScsIFsxMTA2XV0sIFsnZGxjb3JuJywgWzg5OTBdXSwgWydkbGNyb3AnLCBbODk3M11dLCBbJ2RvbGxhcicsIFszNl1dLCBbJ0RvcGYnLCBbMTIwMTIzXV0sIFsnZG9wZicsIFsxMjAxNDldXSwgWydEb3QnLCBbMTY4XV0sIFsnZG90JywgWzcyOV1dLCBbJ0RvdERvdCcsIFs4NDEyXV0sIFsnZG90ZXEnLCBbODc4NF1dLCBbJ2RvdGVxZG90JywgWzg3ODVdXSwgWydEb3RFcXVhbCcsIFs4Nzg0XV0sIFsnZG90bWludXMnLCBbODc2MF1dLCBbJ2RvdHBsdXMnLCBbODcyNF1dLCBbJ2RvdHNxdWFyZScsIFs4ODY1XV0sIFsnZG91YmxlYmFyd2VkZ2UnLCBbODk2Nl1dLCBbJ0RvdWJsZUNvbnRvdXJJbnRlZ3JhbCcsIFs4NzUxXV0sIFsnRG91YmxlRG90JywgWzE2OF1dLCBbJ0RvdWJsZURvd25BcnJvdycsIFs4NjU5XV0sIFsnRG91YmxlTGVmdEFycm93JywgWzg2NTZdXSwgWydEb3VibGVMZWZ0UmlnaHRBcnJvdycsIFs4NjYwXV0sIFsnRG91YmxlTGVmdFRlZScsIFsxMDk4MF1dLCBbJ0RvdWJsZUxvbmdMZWZ0QXJyb3cnLCBbMTAyMzJdXSwgWydEb3VibGVMb25nTGVmdFJpZ2h0QXJyb3cnLCBbMTAyMzRdXSwgWydEb3VibGVMb25nUmlnaHRBcnJvdycsIFsxMDIzM11dLCBbJ0RvdWJsZVJpZ2h0QXJyb3cnLCBbODY1OF1dLCBbJ0RvdWJsZVJpZ2h0VGVlJywgWzg4NzJdXSwgWydEb3VibGVVcEFycm93JywgWzg2NTddXSwgWydEb3VibGVVcERvd25BcnJvdycsIFs4NjYxXV0sIFsnRG91YmxlVmVydGljYWxCYXInLCBbODc0MV1dLCBbJ0Rvd25BcnJvd0JhcicsIFsxMDUxNV1dLCBbJ2Rvd25hcnJvdycsIFs4NTk1XV0sIFsnRG93bkFycm93JywgWzg1OTVdXSwgWydEb3duYXJyb3cnLCBbODY1OV1dLCBbJ0Rvd25BcnJvd1VwQXJyb3cnLCBbODY5M11dLCBbJ0Rvd25CcmV2ZScsIFs3ODVdXSwgWydkb3duZG93bmFycm93cycsIFs4NjUwXV0sIFsnZG93bmhhcnBvb25sZWZ0JywgWzg2NDNdXSwgWydkb3duaGFycG9vbnJpZ2h0JywgWzg2NDJdXSwgWydEb3duTGVmdFJpZ2h0VmVjdG9yJywgWzEwNTc2XV0sIFsnRG93bkxlZnRUZWVWZWN0b3InLCBbMTA1OTBdXSwgWydEb3duTGVmdFZlY3RvckJhcicsIFsxMDU4Ml1dLCBbJ0Rvd25MZWZ0VmVjdG9yJywgWzg2MzddXSwgWydEb3duUmlnaHRUZWVWZWN0b3InLCBbMTA1OTFdXSwgWydEb3duUmlnaHRWZWN0b3JCYXInLCBbMTA1ODNdXSwgWydEb3duUmlnaHRWZWN0b3InLCBbODY0MV1dLCBbJ0Rvd25UZWVBcnJvdycsIFs4NjE1XV0sIFsnRG93blRlZScsIFs4ODY4XV0sIFsnZHJia2Fyb3cnLCBbMTA1MTJdXSwgWydkcmNvcm4nLCBbODk5MV1dLCBbJ2RyY3JvcCcsIFs4OTcyXV0sIFsnRHNjcicsIFsxMTk5NjddXSwgWydkc2NyJywgWzExOTk5M11dLCBbJ0RTY3knLCBbMTAyOV1dLCBbJ2RzY3knLCBbMTEwOV1dLCBbJ2Rzb2wnLCBbMTA3NDJdXSwgWydEc3Ryb2snLCBbMjcyXV0sIFsnZHN0cm9rJywgWzI3M11dLCBbJ2R0ZG90JywgWzg5NDVdXSwgWydkdHJpJywgWzk2NjNdXSwgWydkdHJpZicsIFs5NjYyXV0sIFsnZHVhcnInLCBbODY5M11dLCBbJ2R1aGFyJywgWzEwNjA3XV0sIFsnZHdhbmdsZScsIFsxMDY2Ml1dLCBbJ0RaY3knLCBbMTAzOV1dLCBbJ2R6Y3knLCBbMTExOV1dLCBbJ2R6aWdyYXJyJywgWzEwMjM5XV0sIFsnRWFjdXRlJywgWzIwMV1dLCBbJ2VhY3V0ZScsIFsyMzNdXSwgWydlYXN0ZXInLCBbMTA4NjJdXSwgWydFY2Fyb24nLCBbMjgyXV0sIFsnZWNhcm9uJywgWzI4M11dLCBbJ0VjaXJjJywgWzIwMl1dLCBbJ2VjaXJjJywgWzIzNF1dLCBbJ2VjaXInLCBbODc5MF1dLCBbJ2Vjb2xvbicsIFs4Nzg5XV0sIFsnRWN5JywgWzEwNjldXSwgWydlY3knLCBbMTEwMV1dLCBbJ2VERG90JywgWzEwODcxXV0sIFsnRWRvdCcsIFsyNzhdXSwgWydlZG90JywgWzI3OV1dLCBbJ2VEb3QnLCBbODc4NV1dLCBbJ2VlJywgWzg1MTldXSwgWydlZkRvdCcsIFs4Nzg2XV0sIFsnRWZyJywgWzEyMDA3Ml1dLCBbJ2VmcicsIFsxMjAwOThdXSwgWydlZycsIFsxMDkwNl1dLCBbJ0VncmF2ZScsIFsyMDBdXSwgWydlZ3JhdmUnLCBbMjMyXV0sIFsnZWdzJywgWzEwOTAyXV0sIFsnZWdzZG90JywgWzEwOTA0XV0sIFsnZWwnLCBbMTA5MDVdXSwgWydFbGVtZW50JywgWzg3MTJdXSwgWydlbGludGVycycsIFs5MTkxXV0sIFsnZWxsJywgWzg0NjddXSwgWydlbHMnLCBbMTA5MDFdXSwgWydlbHNkb3QnLCBbMTA5MDNdXSwgWydFbWFjcicsIFsyNzRdXSwgWydlbWFjcicsIFsyNzVdXSwgWydlbXB0eScsIFs4NzA5XV0sIFsnZW1wdHlzZXQnLCBbODcwOV1dLCBbJ0VtcHR5U21hbGxTcXVhcmUnLCBbOTcyM11dLCBbJ2VtcHR5dicsIFs4NzA5XV0sIFsnRW1wdHlWZXJ5U21hbGxTcXVhcmUnLCBbOTY0M11dLCBbJ2Vtc3AxMycsIFs4MTk2XV0sIFsnZW1zcDE0JywgWzgxOTddXSwgWydlbXNwJywgWzgxOTVdXSwgWydFTkcnLCBbMzMwXV0sIFsnZW5nJywgWzMzMV1dLCBbJ2Vuc3AnLCBbODE5NF1dLCBbJ0VvZ29uJywgWzI4MF1dLCBbJ2VvZ29uJywgWzI4MV1dLCBbJ0VvcGYnLCBbMTIwMTI0XV0sIFsnZW9wZicsIFsxMjAxNTBdXSwgWydlcGFyJywgWzg5MTddXSwgWydlcGFyc2wnLCBbMTA3MjNdXSwgWydlcGx1cycsIFsxMDg2NV1dLCBbJ2Vwc2knLCBbOTQ5XV0sIFsnRXBzaWxvbicsIFs5MTddXSwgWydlcHNpbG9uJywgWzk0OV1dLCBbJ2Vwc2l2JywgWzEwMTNdXSwgWydlcWNpcmMnLCBbODc5MF1dLCBbJ2VxY29sb24nLCBbODc4OV1dLCBbJ2Vxc2ltJywgWzg3NzBdXSwgWydlcXNsYW50Z3RyJywgWzEwOTAyXV0sIFsnZXFzbGFudGxlc3MnLCBbMTA5MDFdXSwgWydFcXVhbCcsIFsxMDg2OV1dLCBbJ2VxdWFscycsIFs2MV1dLCBbJ0VxdWFsVGlsZGUnLCBbODc3MF1dLCBbJ2VxdWVzdCcsIFs4Nzk5XV0sIFsnRXF1aWxpYnJpdW0nLCBbODY1Ml1dLCBbJ2VxdWl2JywgWzg4MDFdXSwgWydlcXVpdkREJywgWzEwODcyXV0sIFsnZXF2cGFyc2wnLCBbMTA3MjVdXSwgWydlcmFycicsIFsxMDYwOV1dLCBbJ2VyRG90JywgWzg3ODddXSwgWydlc2NyJywgWzg0OTVdXSwgWydFc2NyJywgWzg0OTZdXSwgWydlc2RvdCcsIFs4Nzg0XV0sIFsnRXNpbScsIFsxMDg2N11dLCBbJ2VzaW0nLCBbODc3MF1dLCBbJ0V0YScsIFs5MTldXSwgWydldGEnLCBbOTUxXV0sIFsnRVRIJywgWzIwOF1dLCBbJ2V0aCcsIFsyNDBdXSwgWydFdW1sJywgWzIwM11dLCBbJ2V1bWwnLCBbMjM1XV0sIFsnZXVybycsIFs4MzY0XV0sIFsnZXhjbCcsIFszM11dLCBbJ2V4aXN0JywgWzg3MDddXSwgWydFeGlzdHMnLCBbODcwN11dLCBbJ2V4cGVjdGF0aW9uJywgWzg0OTZdXSwgWydleHBvbmVudGlhbGUnLCBbODUxOV1dLCBbJ0V4cG9uZW50aWFsRScsIFs4NTE5XV0sIFsnZmFsbGluZ2RvdHNlcScsIFs4Nzg2XV0sIFsnRmN5JywgWzEwNjBdXSwgWydmY3knLCBbMTA5Ml1dLCBbJ2ZlbWFsZScsIFs5NzkyXV0sIFsnZmZpbGlnJywgWzY0MjU5XV0sIFsnZmZsaWcnLCBbNjQyNTZdXSwgWydmZmxsaWcnLCBbNjQyNjBdXSwgWydGZnInLCBbMTIwMDczXV0sIFsnZmZyJywgWzEyMDA5OV1dLCBbJ2ZpbGlnJywgWzY0MjU3XV0sIFsnRmlsbGVkU21hbGxTcXVhcmUnLCBbOTcyNF1dLCBbJ0ZpbGxlZFZlcnlTbWFsbFNxdWFyZScsIFs5NjQyXV0sIFsnZmpsaWcnLCBbMTAyLCAxMDZdXSwgWydmbGF0JywgWzk4MzddXSwgWydmbGxpZycsIFs2NDI1OF1dLCBbJ2ZsdG5zJywgWzk2NDldXSwgWydmbm9mJywgWzQwMl1dLCBbJ0ZvcGYnLCBbMTIwMTI1XV0sIFsnZm9wZicsIFsxMjAxNTFdXSwgWydmb3JhbGwnLCBbODcwNF1dLCBbJ0ZvckFsbCcsIFs4NzA0XV0sIFsnZm9yaycsIFs4OTE2XV0sIFsnZm9ya3YnLCBbMTA5NjldXSwgWydGb3VyaWVydHJmJywgWzg0OTddXSwgWydmcGFydGludCcsIFsxMDc2NV1dLCBbJ2ZyYWMxMicsIFsxODldXSwgWydmcmFjMTMnLCBbODUzMV1dLCBbJ2ZyYWMxNCcsIFsxODhdXSwgWydmcmFjMTUnLCBbODUzM11dLCBbJ2ZyYWMxNicsIFs4NTM3XV0sIFsnZnJhYzE4JywgWzg1MzldXSwgWydmcmFjMjMnLCBbODUzMl1dLCBbJ2ZyYWMyNScsIFs4NTM0XV0sIFsnZnJhYzM0JywgWzE5MF1dLCBbJ2ZyYWMzNScsIFs4NTM1XV0sIFsnZnJhYzM4JywgWzg1NDBdXSwgWydmcmFjNDUnLCBbODUzNl1dLCBbJ2ZyYWM1NicsIFs4NTM4XV0sIFsnZnJhYzU4JywgWzg1NDFdXSwgWydmcmFjNzgnLCBbODU0Ml1dLCBbJ2ZyYXNsJywgWzgyNjBdXSwgWydmcm93bicsIFs4OTk0XV0sIFsnZnNjcicsIFsxMTk5OTVdXSwgWydGc2NyJywgWzg0OTddXSwgWydnYWN1dGUnLCBbNTAxXV0sIFsnR2FtbWEnLCBbOTE1XV0sIFsnZ2FtbWEnLCBbOTQ3XV0sIFsnR2FtbWFkJywgWzk4OF1dLCBbJ2dhbW1hZCcsIFs5ODldXSwgWydnYXAnLCBbMTA4ODZdXSwgWydHYnJldmUnLCBbMjg2XV0sIFsnZ2JyZXZlJywgWzI4N11dLCBbJ0djZWRpbCcsIFsyOTBdXSwgWydHY2lyYycsIFsyODRdXSwgWydnY2lyYycsIFsyODVdXSwgWydHY3knLCBbMTA0M11dLCBbJ2djeScsIFsxMDc1XV0sIFsnR2RvdCcsIFsyODhdXSwgWydnZG90JywgWzI4OV1dLCBbJ2dlJywgWzg4MDVdXSwgWydnRScsIFs4ODA3XV0sIFsnZ0VsJywgWzEwODkyXV0sIFsnZ2VsJywgWzg5MjNdXSwgWydnZXEnLCBbODgwNV1dLCBbJ2dlcXEnLCBbODgwN11dLCBbJ2dlcXNsYW50JywgWzEwODc4XV0sIFsnZ2VzY2MnLCBbMTA5MjFdXSwgWydnZXMnLCBbMTA4NzhdXSwgWydnZXNkb3QnLCBbMTA4ODBdXSwgWydnZXNkb3RvJywgWzEwODgyXV0sIFsnZ2VzZG90b2wnLCBbMTA4ODRdXSwgWydnZXNsJywgWzg5MjMsIDY1MDI0XV0sIFsnZ2VzbGVzJywgWzEwOTAwXV0sIFsnR2ZyJywgWzEyMDA3NF1dLCBbJ2dmcicsIFsxMjAxMDBdXSwgWydnZycsIFs4ODExXV0sIFsnR2cnLCBbODkyMV1dLCBbJ2dnZycsIFs4OTIxXV0sIFsnZ2ltZWwnLCBbODUwM11dLCBbJ0dKY3knLCBbMTAyN11dLCBbJ2dqY3knLCBbMTEwN11dLCBbJ2dsYScsIFsxMDkxN11dLCBbJ2dsJywgWzg4MjNdXSwgWydnbEUnLCBbMTA4OThdXSwgWydnbGonLCBbMTA5MTZdXSwgWydnbmFwJywgWzEwODkwXV0sIFsnZ25hcHByb3gnLCBbMTA4OTBdXSwgWydnbmUnLCBbMTA4ODhdXSwgWydnbkUnLCBbODgwOV1dLCBbJ2duZXEnLCBbMTA4ODhdXSwgWydnbmVxcScsIFs4ODA5XV0sIFsnZ25zaW0nLCBbODkzNV1dLCBbJ0dvcGYnLCBbMTIwMTI2XV0sIFsnZ29wZicsIFsxMjAxNTJdXSwgWydncmF2ZScsIFs5Nl1dLCBbJ0dyZWF0ZXJFcXVhbCcsIFs4ODA1XV0sIFsnR3JlYXRlckVxdWFsTGVzcycsIFs4OTIzXV0sIFsnR3JlYXRlckZ1bGxFcXVhbCcsIFs4ODA3XV0sIFsnR3JlYXRlckdyZWF0ZXInLCBbMTA5MTRdXSwgWydHcmVhdGVyTGVzcycsIFs4ODIzXV0sIFsnR3JlYXRlclNsYW50RXF1YWwnLCBbMTA4NzhdXSwgWydHcmVhdGVyVGlsZGUnLCBbODgxOV1dLCBbJ0dzY3InLCBbMTE5OTcwXV0sIFsnZ3NjcicsIFs4NDU4XV0sIFsnZ3NpbScsIFs4ODE5XV0sIFsnZ3NpbWUnLCBbMTA4OTRdXSwgWydnc2ltbCcsIFsxMDg5Nl1dLCBbJ2d0Y2MnLCBbMTA5MTldXSwgWydndGNpcicsIFsxMDg3NF1dLCBbJ2d0JywgWzYyXV0sIFsnR1QnLCBbNjJdXSwgWydHdCcsIFs4ODExXV0sIFsnZ3Rkb3QnLCBbODkxOV1dLCBbJ2d0bFBhcicsIFsxMDY0NV1dLCBbJ2d0cXVlc3QnLCBbMTA4NzZdXSwgWydndHJhcHByb3gnLCBbMTA4ODZdXSwgWydndHJhcnInLCBbMTA2MTZdXSwgWydndHJkb3QnLCBbODkxOV1dLCBbJ2d0cmVxbGVzcycsIFs4OTIzXV0sIFsnZ3RyZXFxbGVzcycsIFsxMDg5Ml1dLCBbJ2d0cmxlc3MnLCBbODgyM11dLCBbJ2d0cnNpbScsIFs4ODE5XV0sIFsnZ3ZlcnRuZXFxJywgWzg4MDksIDY1MDI0XV0sIFsnZ3ZuRScsIFs4ODA5LCA2NTAyNF1dLCBbJ0hhY2VrJywgWzcxMV1dLCBbJ2hhaXJzcCcsIFs4MjAyXV0sIFsnaGFsZicsIFsxODldXSwgWydoYW1pbHQnLCBbODQ1OV1dLCBbJ0hBUkRjeScsIFsxMDY2XV0sIFsnaGFyZGN5JywgWzEwOThdXSwgWydoYXJyY2lyJywgWzEwNTY4XV0sIFsnaGFycicsIFs4NTk2XV0sIFsnaEFycicsIFs4NjYwXV0sIFsnaGFycncnLCBbODYyMV1dLCBbJ0hhdCcsIFs5NF1dLCBbJ2hiYXInLCBbODQ2M11dLCBbJ0hjaXJjJywgWzI5Ml1dLCBbJ2hjaXJjJywgWzI5M11dLCBbJ2hlYXJ0cycsIFs5ODI5XV0sIFsnaGVhcnRzdWl0JywgWzk4MjldXSwgWydoZWxsaXAnLCBbODIzMF1dLCBbJ2hlcmNvbicsIFs4ODg5XV0sIFsnaGZyJywgWzEyMDEwMV1dLCBbJ0hmcicsIFs4NDYwXV0sIFsnSGlsYmVydFNwYWNlJywgWzg0NTldXSwgWydoa3NlYXJvdycsIFsxMDUzM11dLCBbJ2hrc3dhcm93JywgWzEwNTM0XV0sIFsnaG9hcnInLCBbODcwM11dLCBbJ2hvbXRodCcsIFs4NzYzXV0sIFsnaG9va2xlZnRhcnJvdycsIFs4NjE3XV0sIFsnaG9va3JpZ2h0YXJyb3cnLCBbODYxOF1dLCBbJ2hvcGYnLCBbMTIwMTUzXV0sIFsnSG9wZicsIFs4NDYxXV0sIFsnaG9yYmFyJywgWzgyMTNdXSwgWydIb3Jpem9udGFsTGluZScsIFs5NDcyXV0sIFsnaHNjcicsIFsxMTk5OTddXSwgWydIc2NyJywgWzg0NTldXSwgWydoc2xhc2gnLCBbODQ2M11dLCBbJ0hzdHJvaycsIFsyOTRdXSwgWydoc3Ryb2snLCBbMjk1XV0sIFsnSHVtcERvd25IdW1wJywgWzg3ODJdXSwgWydIdW1wRXF1YWwnLCBbODc4M11dLCBbJ2h5YnVsbCcsIFs4MjU5XV0sIFsnaHlwaGVuJywgWzgyMDhdXSwgWydJYWN1dGUnLCBbMjA1XV0sIFsnaWFjdXRlJywgWzIzN11dLCBbJ2ljJywgWzgyOTFdXSwgWydJY2lyYycsIFsyMDZdXSwgWydpY2lyYycsIFsyMzhdXSwgWydJY3knLCBbMTA0OF1dLCBbJ2ljeScsIFsxMDgwXV0sIFsnSWRvdCcsIFszMDRdXSwgWydJRWN5JywgWzEwNDVdXSwgWydpZWN5JywgWzEwNzddXSwgWydpZXhjbCcsIFsxNjFdXSwgWydpZmYnLCBbODY2MF1dLCBbJ2lmcicsIFsxMjAxMDJdXSwgWydJZnInLCBbODQ2NV1dLCBbJ0lncmF2ZScsIFsyMDRdXSwgWydpZ3JhdmUnLCBbMjM2XV0sIFsnaWknLCBbODUyMF1dLCBbJ2lpaWludCcsIFsxMDc2NF1dLCBbJ2lpaW50JywgWzg3NDldXSwgWydpaW5maW4nLCBbMTA3MTZdXSwgWydpaW90YScsIFs4NDg5XV0sIFsnSUpsaWcnLCBbMzA2XV0sIFsnaWpsaWcnLCBbMzA3XV0sIFsnSW1hY3InLCBbMjk4XV0sIFsnaW1hY3InLCBbMjk5XV0sIFsnaW1hZ2UnLCBbODQ2NV1dLCBbJ0ltYWdpbmFyeUknLCBbODUyMF1dLCBbJ2ltYWdsaW5lJywgWzg0NjRdXSwgWydpbWFncGFydCcsIFs4NDY1XV0sIFsnaW1hdGgnLCBbMzA1XV0sIFsnSW0nLCBbODQ2NV1dLCBbJ2ltb2YnLCBbODg4N11dLCBbJ2ltcGVkJywgWzQzN11dLCBbJ0ltcGxpZXMnLCBbODY1OF1dLCBbJ2luY2FyZScsIFs4NDUzXV0sIFsnaW4nLCBbODcxMl1dLCBbJ2luZmluJywgWzg3MzRdXSwgWydpbmZpbnRpZScsIFsxMDcxN11dLCBbJ2lub2RvdCcsIFszMDVdXSwgWydpbnRjYWwnLCBbODg5MF1dLCBbJ2ludCcsIFs4NzQ3XV0sIFsnSW50JywgWzg3NDhdXSwgWydpbnRlZ2VycycsIFs4NDg0XV0sIFsnSW50ZWdyYWwnLCBbODc0N11dLCBbJ2ludGVyY2FsJywgWzg4OTBdXSwgWydJbnRlcnNlY3Rpb24nLCBbODg5OF1dLCBbJ2ludGxhcmhrJywgWzEwNzc1XV0sIFsnaW50cHJvZCcsIFsxMDgxMl1dLCBbJ0ludmlzaWJsZUNvbW1hJywgWzgyOTFdXSwgWydJbnZpc2libGVUaW1lcycsIFs4MjkwXV0sIFsnSU9jeScsIFsxMDI1XV0sIFsnaW9jeScsIFsxMTA1XV0sIFsnSW9nb24nLCBbMzAyXV0sIFsnaW9nb24nLCBbMzAzXV0sIFsnSW9wZicsIFsxMjAxMjhdXSwgWydpb3BmJywgWzEyMDE1NF1dLCBbJ0lvdGEnLCBbOTIxXV0sIFsnaW90YScsIFs5NTNdXSwgWydpcHJvZCcsIFsxMDgxMl1dLCBbJ2lxdWVzdCcsIFsxOTFdXSwgWydpc2NyJywgWzExOTk5OF1dLCBbJ0lzY3InLCBbODQ2NF1dLCBbJ2lzaW4nLCBbODcxMl1dLCBbJ2lzaW5kb3QnLCBbODk0OV1dLCBbJ2lzaW5FJywgWzg5NTNdXSwgWydpc2lucycsIFs4OTQ4XV0sIFsnaXNpbnN2JywgWzg5NDddXSwgWydpc2ludicsIFs4NzEyXV0sIFsnaXQnLCBbODI5MF1dLCBbJ0l0aWxkZScsIFsyOTZdXSwgWydpdGlsZGUnLCBbMjk3XV0sIFsnSXVrY3knLCBbMTAzMF1dLCBbJ2l1a2N5JywgWzExMTBdXSwgWydJdW1sJywgWzIwN11dLCBbJ2l1bWwnLCBbMjM5XV0sIFsnSmNpcmMnLCBbMzA4XV0sIFsnamNpcmMnLCBbMzA5XV0sIFsnSmN5JywgWzEwNDldXSwgWydqY3knLCBbMTA4MV1dLCBbJ0pmcicsIFsxMjAwNzddXSwgWydqZnInLCBbMTIwMTAzXV0sIFsnam1hdGgnLCBbNTY3XV0sIFsnSm9wZicsIFsxMjAxMjldXSwgWydqb3BmJywgWzEyMDE1NV1dLCBbJ0pzY3InLCBbMTE5OTczXV0sIFsnanNjcicsIFsxMTk5OTldXSwgWydKc2VyY3knLCBbMTAzMl1dLCBbJ2pzZXJjeScsIFsxMTEyXV0sIFsnSnVrY3knLCBbMTAyOF1dLCBbJ2p1a2N5JywgWzExMDhdXSwgWydLYXBwYScsIFs5MjJdXSwgWydrYXBwYScsIFs5NTRdXSwgWydrYXBwYXYnLCBbMTAwOF1dLCBbJ0tjZWRpbCcsIFszMTBdXSwgWydrY2VkaWwnLCBbMzExXV0sIFsnS2N5JywgWzEwNTBdXSwgWydrY3knLCBbMTA4Ml1dLCBbJ0tmcicsIFsxMjAwNzhdXSwgWydrZnInLCBbMTIwMTA0XV0sIFsna2dyZWVuJywgWzMxMl1dLCBbJ0tIY3knLCBbMTA2MV1dLCBbJ2toY3knLCBbMTA5M11dLCBbJ0tKY3knLCBbMTAzNl1dLCBbJ2tqY3knLCBbMTExNl1dLCBbJ0tvcGYnLCBbMTIwMTMwXV0sIFsna29wZicsIFsxMjAxNTZdXSwgWydLc2NyJywgWzExOTk3NF1dLCBbJ2tzY3InLCBbMTIwMDAwXV0sIFsnbEFhcnInLCBbODY2Nl1dLCBbJ0xhY3V0ZScsIFszMTNdXSwgWydsYWN1dGUnLCBbMzE0XV0sIFsnbGFlbXB0eXYnLCBbMTA2NzZdXSwgWydsYWdyYW4nLCBbODQ2Nl1dLCBbJ0xhbWJkYScsIFs5MjNdXSwgWydsYW1iZGEnLCBbOTU1XV0sIFsnbGFuZycsIFsxMDIxNl1dLCBbJ0xhbmcnLCBbMTAyMThdXSwgWydsYW5nZCcsIFsxMDY0MV1dLCBbJ2xhbmdsZScsIFsxMDIxNl1dLCBbJ2xhcCcsIFsxMDg4NV1dLCBbJ0xhcGxhY2V0cmYnLCBbODQ2Nl1dLCBbJ2xhcXVvJywgWzE3MV1dLCBbJ2xhcnJiJywgWzg2NzZdXSwgWydsYXJyYmZzJywgWzEwNTI3XV0sIFsnbGFycicsIFs4NTkyXV0sIFsnTGFycicsIFs4NjA2XV0sIFsnbEFycicsIFs4NjU2XV0sIFsnbGFycmZzJywgWzEwNTI1XV0sIFsnbGFycmhrJywgWzg2MTddXSwgWydsYXJybHAnLCBbODYxOV1dLCBbJ2xhcnJwbCcsIFsxMDU1M11dLCBbJ2xhcnJzaW0nLCBbMTA2MTFdXSwgWydsYXJydGwnLCBbODYxMF1dLCBbJ2xhdGFpbCcsIFsxMDUyMV1dLCBbJ2xBdGFpbCcsIFsxMDUyM11dLCBbJ2xhdCcsIFsxMDkyM11dLCBbJ2xhdGUnLCBbMTA5MjVdXSwgWydsYXRlcycsIFsxMDkyNSwgNjUwMjRdXSwgWydsYmFycicsIFsxMDUwOF1dLCBbJ2xCYXJyJywgWzEwNTEwXV0sIFsnbGJicmsnLCBbMTAwOThdXSwgWydsYnJhY2UnLCBbMTIzXV0sIFsnbGJyYWNrJywgWzkxXV0sIFsnbGJya2UnLCBbMTA2MzVdXSwgWydsYnJrc2xkJywgWzEwNjM5XV0sIFsnbGJya3NsdScsIFsxMDYzN11dLCBbJ0xjYXJvbicsIFszMTddXSwgWydsY2Fyb24nLCBbMzE4XV0sIFsnTGNlZGlsJywgWzMxNV1dLCBbJ2xjZWRpbCcsIFszMTZdXSwgWydsY2VpbCcsIFs4OTY4XV0sIFsnbGN1YicsIFsxMjNdXSwgWydMY3knLCBbMTA1MV1dLCBbJ2xjeScsIFsxMDgzXV0sIFsnbGRjYScsIFsxMDU1MF1dLCBbJ2xkcXVvJywgWzgyMjBdXSwgWydsZHF1b3InLCBbODIyMl1dLCBbJ2xkcmRoYXInLCBbMTA1OTldXSwgWydsZHJ1c2hhcicsIFsxMDU3MV1dLCBbJ2xkc2gnLCBbODYyNl1dLCBbJ2xlJywgWzg4MDRdXSwgWydsRScsIFs4ODA2XV0sIFsnTGVmdEFuZ2xlQnJhY2tldCcsIFsxMDIxNl1dLCBbJ0xlZnRBcnJvd0JhcicsIFs4Njc2XV0sIFsnbGVmdGFycm93JywgWzg1OTJdXSwgWydMZWZ0QXJyb3cnLCBbODU5Ml1dLCBbJ0xlZnRhcnJvdycsIFs4NjU2XV0sIFsnTGVmdEFycm93UmlnaHRBcnJvdycsIFs4NjQ2XV0sIFsnbGVmdGFycm93dGFpbCcsIFs4NjEwXV0sIFsnTGVmdENlaWxpbmcnLCBbODk2OF1dLCBbJ0xlZnREb3VibGVCcmFja2V0JywgWzEwMjE0XV0sIFsnTGVmdERvd25UZWVWZWN0b3InLCBbMTA1OTNdXSwgWydMZWZ0RG93blZlY3RvckJhcicsIFsxMDU4NV1dLCBbJ0xlZnREb3duVmVjdG9yJywgWzg2NDNdXSwgWydMZWZ0Rmxvb3InLCBbODk3MF1dLCBbJ2xlZnRoYXJwb29uZG93bicsIFs4NjM3XV0sIFsnbGVmdGhhcnBvb251cCcsIFs4NjM2XV0sIFsnbGVmdGxlZnRhcnJvd3MnLCBbODY0N11dLCBbJ2xlZnRyaWdodGFycm93JywgWzg1OTZdXSwgWydMZWZ0UmlnaHRBcnJvdycsIFs4NTk2XV0sIFsnTGVmdHJpZ2h0YXJyb3cnLCBbODY2MF1dLCBbJ2xlZnRyaWdodGFycm93cycsIFs4NjQ2XV0sIFsnbGVmdHJpZ2h0aGFycG9vbnMnLCBbODY1MV1dLCBbJ2xlZnRyaWdodHNxdWlnYXJyb3cnLCBbODYyMV1dLCBbJ0xlZnRSaWdodFZlY3RvcicsIFsxMDU3NF1dLCBbJ0xlZnRUZWVBcnJvdycsIFs4NjEyXV0sIFsnTGVmdFRlZScsIFs4ODY3XV0sIFsnTGVmdFRlZVZlY3RvcicsIFsxMDU4Nl1dLCBbJ2xlZnR0aHJlZXRpbWVzJywgWzg5MDddXSwgWydMZWZ0VHJpYW5nbGVCYXInLCBbMTA3MDNdXSwgWydMZWZ0VHJpYW5nbGUnLCBbODg4Ml1dLCBbJ0xlZnRUcmlhbmdsZUVxdWFsJywgWzg4ODRdXSwgWydMZWZ0VXBEb3duVmVjdG9yJywgWzEwNTc3XV0sIFsnTGVmdFVwVGVlVmVjdG9yJywgWzEwNTkyXV0sIFsnTGVmdFVwVmVjdG9yQmFyJywgWzEwNTg0XV0sIFsnTGVmdFVwVmVjdG9yJywgWzg2MzldXSwgWydMZWZ0VmVjdG9yQmFyJywgWzEwNTc4XV0sIFsnTGVmdFZlY3RvcicsIFs4NjM2XV0sIFsnbEVnJywgWzEwODkxXV0sIFsnbGVnJywgWzg5MjJdXSwgWydsZXEnLCBbODgwNF1dLCBbJ2xlcXEnLCBbODgwNl1dLCBbJ2xlcXNsYW50JywgWzEwODc3XV0sIFsnbGVzY2MnLCBbMTA5MjBdXSwgWydsZXMnLCBbMTA4NzddXSwgWydsZXNkb3QnLCBbMTA4NzldXSwgWydsZXNkb3RvJywgWzEwODgxXV0sIFsnbGVzZG90b3InLCBbMTA4ODNdXSwgWydsZXNnJywgWzg5MjIsIDY1MDI0XV0sIFsnbGVzZ2VzJywgWzEwODk5XV0sIFsnbGVzc2FwcHJveCcsIFsxMDg4NV1dLCBbJ2xlc3Nkb3QnLCBbODkxOF1dLCBbJ2xlc3NlcWd0cicsIFs4OTIyXV0sIFsnbGVzc2VxcWd0cicsIFsxMDg5MV1dLCBbJ0xlc3NFcXVhbEdyZWF0ZXInLCBbODkyMl1dLCBbJ0xlc3NGdWxsRXF1YWwnLCBbODgwNl1dLCBbJ0xlc3NHcmVhdGVyJywgWzg4MjJdXSwgWydsZXNzZ3RyJywgWzg4MjJdXSwgWydMZXNzTGVzcycsIFsxMDkxM11dLCBbJ2xlc3NzaW0nLCBbODgxOF1dLCBbJ0xlc3NTbGFudEVxdWFsJywgWzEwODc3XV0sIFsnTGVzc1RpbGRlJywgWzg4MThdXSwgWydsZmlzaHQnLCBbMTA2MjBdXSwgWydsZmxvb3InLCBbODk3MF1dLCBbJ0xmcicsIFsxMjAwNzldXSwgWydsZnInLCBbMTIwMTA1XV0sIFsnbGcnLCBbODgyMl1dLCBbJ2xnRScsIFsxMDg5N11dLCBbJ2xIYXInLCBbMTA1OTRdXSwgWydsaGFyZCcsIFs4NjM3XV0sIFsnbGhhcnUnLCBbODYzNl1dLCBbJ2xoYXJ1bCcsIFsxMDYwMl1dLCBbJ2xoYmxrJywgWzk2MDRdXSwgWydMSmN5JywgWzEwMzNdXSwgWydsamN5JywgWzExMTNdXSwgWydsbGFycicsIFs4NjQ3XV0sIFsnbGwnLCBbODgxMF1dLCBbJ0xsJywgWzg5MjBdXSwgWydsbGNvcm5lcicsIFs4OTkwXV0sIFsnTGxlZnRhcnJvdycsIFs4NjY2XV0sIFsnbGxoYXJkJywgWzEwNjAzXV0sIFsnbGx0cmknLCBbOTcyMl1dLCBbJ0xtaWRvdCcsIFszMTldXSwgWydsbWlkb3QnLCBbMzIwXV0sIFsnbG1vdXN0YWNoZScsIFs5MTM2XV0sIFsnbG1vdXN0JywgWzkxMzZdXSwgWydsbmFwJywgWzEwODg5XV0sIFsnbG5hcHByb3gnLCBbMTA4ODldXSwgWydsbmUnLCBbMTA4ODddXSwgWydsbkUnLCBbODgwOF1dLCBbJ2xuZXEnLCBbMTA4ODddXSwgWydsbmVxcScsIFs4ODA4XV0sIFsnbG5zaW0nLCBbODkzNF1dLCBbJ2xvYW5nJywgWzEwMjIwXV0sIFsnbG9hcnInLCBbODcwMV1dLCBbJ2xvYnJrJywgWzEwMjE0XV0sIFsnbG9uZ2xlZnRhcnJvdycsIFsxMDIyOV1dLCBbJ0xvbmdMZWZ0QXJyb3cnLCBbMTAyMjldXSwgWydMb25nbGVmdGFycm93JywgWzEwMjMyXV0sIFsnbG9uZ2xlZnRyaWdodGFycm93JywgWzEwMjMxXV0sIFsnTG9uZ0xlZnRSaWdodEFycm93JywgWzEwMjMxXV0sIFsnTG9uZ2xlZnRyaWdodGFycm93JywgWzEwMjM0XV0sIFsnbG9uZ21hcHN0bycsIFsxMDIzNl1dLCBbJ2xvbmdyaWdodGFycm93JywgWzEwMjMwXV0sIFsnTG9uZ1JpZ2h0QXJyb3cnLCBbMTAyMzBdXSwgWydMb25ncmlnaHRhcnJvdycsIFsxMDIzM11dLCBbJ2xvb3BhcnJvd2xlZnQnLCBbODYxOV1dLCBbJ2xvb3BhcnJvd3JpZ2h0JywgWzg2MjBdXSwgWydsb3BhcicsIFsxMDYyOV1dLCBbJ0xvcGYnLCBbMTIwMTMxXV0sIFsnbG9wZicsIFsxMjAxNTddXSwgWydsb3BsdXMnLCBbMTA3OTddXSwgWydsb3RpbWVzJywgWzEwODA0XV0sIFsnbG93YXN0JywgWzg3MjddXSwgWydsb3diYXInLCBbOTVdXSwgWydMb3dlckxlZnRBcnJvdycsIFs4NjAxXV0sIFsnTG93ZXJSaWdodEFycm93JywgWzg2MDBdXSwgWydsb3onLCBbOTY3NF1dLCBbJ2xvemVuZ2UnLCBbOTY3NF1dLCBbJ2xvemYnLCBbMTA3MzFdXSwgWydscGFyJywgWzQwXV0sIFsnbHBhcmx0JywgWzEwNjQzXV0sIFsnbHJhcnInLCBbODY0Nl1dLCBbJ2xyY29ybmVyJywgWzg5OTFdXSwgWydscmhhcicsIFs4NjUxXV0sIFsnbHJoYXJkJywgWzEwNjA1XV0sIFsnbHJtJywgWzgyMDZdXSwgWydscnRyaScsIFs4ODk1XV0sIFsnbHNhcXVvJywgWzgyNDldXSwgWydsc2NyJywgWzEyMDAwMV1dLCBbJ0xzY3InLCBbODQ2Nl1dLCBbJ2xzaCcsIFs4NjI0XV0sIFsnTHNoJywgWzg2MjRdXSwgWydsc2ltJywgWzg4MThdXSwgWydsc2ltZScsIFsxMDg5M11dLCBbJ2xzaW1nJywgWzEwODk1XV0sIFsnbHNxYicsIFs5MV1dLCBbJ2xzcXVvJywgWzgyMTZdXSwgWydsc3F1b3InLCBbODIxOF1dLCBbJ0xzdHJvaycsIFszMjFdXSwgWydsc3Ryb2snLCBbMzIyXV0sIFsnbHRjYycsIFsxMDkxOF1dLCBbJ2x0Y2lyJywgWzEwODczXV0sIFsnbHQnLCBbNjBdXSwgWydMVCcsIFs2MF1dLCBbJ0x0JywgWzg4MTBdXSwgWydsdGRvdCcsIFs4OTE4XV0sIFsnbHRocmVlJywgWzg5MDddXSwgWydsdGltZXMnLCBbODkwNV1dLCBbJ2x0bGFycicsIFsxMDYxNF1dLCBbJ2x0cXVlc3QnLCBbMTA4NzVdXSwgWydsdHJpJywgWzk2NjddXSwgWydsdHJpZScsIFs4ODg0XV0sIFsnbHRyaWYnLCBbOTY2Nl1dLCBbJ2x0clBhcicsIFsxMDY0Nl1dLCBbJ2x1cmRzaGFyJywgWzEwNTcwXV0sIFsnbHVydWhhcicsIFsxMDU5OF1dLCBbJ2x2ZXJ0bmVxcScsIFs4ODA4LCA2NTAyNF1dLCBbJ2x2bkUnLCBbODgwOCwgNjUwMjRdXSwgWydtYWNyJywgWzE3NV1dLCBbJ21hbGUnLCBbOTc5NF1dLCBbJ21hbHQnLCBbMTAwMTZdXSwgWydtYWx0ZXNlJywgWzEwMDE2XV0sIFsnTWFwJywgWzEwNTAxXV0sIFsnbWFwJywgWzg2MTRdXSwgWydtYXBzdG8nLCBbODYxNF1dLCBbJ21hcHN0b2Rvd24nLCBbODYxNV1dLCBbJ21hcHN0b2xlZnQnLCBbODYxMl1dLCBbJ21hcHN0b3VwJywgWzg2MTNdXSwgWydtYXJrZXInLCBbOTY0Nl1dLCBbJ21jb21tYScsIFsxMDc5M11dLCBbJ01jeScsIFsxMDUyXV0sIFsnbWN5JywgWzEwODRdXSwgWydtZGFzaCcsIFs4MjEyXV0sIFsnbUREb3QnLCBbODc2Ml1dLCBbJ21lYXN1cmVkYW5nbGUnLCBbODczN11dLCBbJ01lZGl1bVNwYWNlJywgWzgyODddXSwgWydNZWxsaW50cmYnLCBbODQ5OV1dLCBbJ01mcicsIFsxMjAwODBdXSwgWydtZnInLCBbMTIwMTA2XV0sIFsnbWhvJywgWzg0ODddXSwgWydtaWNybycsIFsxODFdXSwgWydtaWRhc3QnLCBbNDJdXSwgWydtaWRjaXInLCBbMTA5OTJdXSwgWydtaWQnLCBbODczOV1dLCBbJ21pZGRvdCcsIFsxODNdXSwgWydtaW51c2InLCBbODg2M11dLCBbJ21pbnVzJywgWzg3MjJdXSwgWydtaW51c2QnLCBbODc2MF1dLCBbJ21pbnVzZHUnLCBbMTA3OTRdXSwgWydNaW51c1BsdXMnLCBbODcyM11dLCBbJ21sY3AnLCBbMTA5NzFdXSwgWydtbGRyJywgWzgyMzBdXSwgWydtbnBsdXMnLCBbODcyM11dLCBbJ21vZGVscycsIFs4ODcxXV0sIFsnTW9wZicsIFsxMjAxMzJdXSwgWydtb3BmJywgWzEyMDE1OF1dLCBbJ21wJywgWzg3MjNdXSwgWydtc2NyJywgWzEyMDAwMl1dLCBbJ01zY3InLCBbODQ5OV1dLCBbJ21zdHBvcycsIFs4NzY2XV0sIFsnTXUnLCBbOTI0XV0sIFsnbXUnLCBbOTU2XV0sIFsnbXVsdGltYXAnLCBbODg4OF1dLCBbJ211bWFwJywgWzg4ODhdXSwgWyduYWJsYScsIFs4NzExXV0sIFsnTmFjdXRlJywgWzMyM11dLCBbJ25hY3V0ZScsIFszMjRdXSwgWyduYW5nJywgWzg3MzYsIDg0MDJdXSwgWyduYXAnLCBbODc3N11dLCBbJ25hcEUnLCBbMTA4NjQsIDgyNF1dLCBbJ25hcGlkJywgWzg3NzksIDgyNF1dLCBbJ25hcG9zJywgWzMyOV1dLCBbJ25hcHByb3gnLCBbODc3N11dLCBbJ25hdHVyYWwnLCBbOTgzOF1dLCBbJ25hdHVyYWxzJywgWzg0NjldXSwgWyduYXR1cicsIFs5ODM4XV0sIFsnbmJzcCcsIFsxNjBdXSwgWyduYnVtcCcsIFs4NzgyLCA4MjRdXSwgWyduYnVtcGUnLCBbODc4MywgODI0XV0sIFsnbmNhcCcsIFsxMDgxOV1dLCBbJ05jYXJvbicsIFszMjddXSwgWyduY2Fyb24nLCBbMzI4XV0sIFsnTmNlZGlsJywgWzMyNV1dLCBbJ25jZWRpbCcsIFszMjZdXSwgWyduY29uZycsIFs4Nzc1XV0sIFsnbmNvbmdkb3QnLCBbMTA4NjEsIDgyNF1dLCBbJ25jdXAnLCBbMTA4MThdXSwgWydOY3knLCBbMTA1M11dLCBbJ25jeScsIFsxMDg1XV0sIFsnbmRhc2gnLCBbODIxMV1dLCBbJ25lYXJoaycsIFsxMDUzMl1dLCBbJ25lYXJyJywgWzg1OTldXSwgWyduZUFycicsIFs4NjYzXV0sIFsnbmVhcnJvdycsIFs4NTk5XV0sIFsnbmUnLCBbODgwMF1dLCBbJ25lZG90JywgWzg3ODQsIDgyNF1dLCBbJ05lZ2F0aXZlTWVkaXVtU3BhY2UnLCBbODIwM11dLCBbJ05lZ2F0aXZlVGhpY2tTcGFjZScsIFs4MjAzXV0sIFsnTmVnYXRpdmVUaGluU3BhY2UnLCBbODIwM11dLCBbJ05lZ2F0aXZlVmVyeVRoaW5TcGFjZScsIFs4MjAzXV0sIFsnbmVxdWl2JywgWzg4MDJdXSwgWyduZXNlYXInLCBbMTA1MzZdXSwgWyduZXNpbScsIFs4NzcwLCA4MjRdXSwgWydOZXN0ZWRHcmVhdGVyR3JlYXRlcicsIFs4ODExXV0sIFsnTmVzdGVkTGVzc0xlc3MnLCBbODgxMF1dLCBbJ25leGlzdCcsIFs4NzA4XV0sIFsnbmV4aXN0cycsIFs4NzA4XV0sIFsnTmZyJywgWzEyMDA4MV1dLCBbJ25mcicsIFsxMjAxMDddXSwgWyduZ0UnLCBbODgwNywgODI0XV0sIFsnbmdlJywgWzg4MTddXSwgWyduZ2VxJywgWzg4MTddXSwgWyduZ2VxcScsIFs4ODA3LCA4MjRdXSwgWyduZ2Vxc2xhbnQnLCBbMTA4NzgsIDgyNF1dLCBbJ25nZXMnLCBbMTA4NzgsIDgyNF1dLCBbJ25HZycsIFs4OTIxLCA4MjRdXSwgWyduZ3NpbScsIFs4ODIxXV0sIFsnbkd0JywgWzg4MTEsIDg0MDJdXSwgWyduZ3QnLCBbODgxNV1dLCBbJ25ndHInLCBbODgxNV1dLCBbJ25HdHYnLCBbODgxMSwgODI0XV0sIFsnbmhhcnInLCBbODYyMl1dLCBbJ25oQXJyJywgWzg2NTRdXSwgWyduaHBhcicsIFsxMDk5NF1dLCBbJ25pJywgWzg3MTVdXSwgWyduaXMnLCBbODk1Nl1dLCBbJ25pc2QnLCBbODk1NF1dLCBbJ25pdicsIFs4NzE1XV0sIFsnTkpjeScsIFsxMDM0XV0sIFsnbmpjeScsIFsxMTE0XV0sIFsnbmxhcnInLCBbODYwMl1dLCBbJ25sQXJyJywgWzg2NTNdXSwgWydubGRyJywgWzgyMjldXSwgWydubEUnLCBbODgwNiwgODI0XV0sIFsnbmxlJywgWzg4MTZdXSwgWydubGVmdGFycm93JywgWzg2MDJdXSwgWyduTGVmdGFycm93JywgWzg2NTNdXSwgWydubGVmdHJpZ2h0YXJyb3cnLCBbODYyMl1dLCBbJ25MZWZ0cmlnaHRhcnJvdycsIFs4NjU0XV0sIFsnbmxlcScsIFs4ODE2XV0sIFsnbmxlcXEnLCBbODgwNiwgODI0XV0sIFsnbmxlcXNsYW50JywgWzEwODc3LCA4MjRdXSwgWydubGVzJywgWzEwODc3LCA4MjRdXSwgWydubGVzcycsIFs4ODE0XV0sIFsnbkxsJywgWzg5MjAsIDgyNF1dLCBbJ25sc2ltJywgWzg4MjBdXSwgWyduTHQnLCBbODgxMCwgODQwMl1dLCBbJ25sdCcsIFs4ODE0XV0sIFsnbmx0cmknLCBbODkzOF1dLCBbJ25sdHJpZScsIFs4OTQwXV0sIFsnbkx0dicsIFs4ODEwLCA4MjRdXSwgWydubWlkJywgWzg3NDBdXSwgWydOb0JyZWFrJywgWzgyODhdXSwgWydOb25CcmVha2luZ1NwYWNlJywgWzE2MF1dLCBbJ25vcGYnLCBbMTIwMTU5XV0sIFsnTm9wZicsIFs4NDY5XV0sIFsnTm90JywgWzEwOTg4XV0sIFsnbm90JywgWzE3Ml1dLCBbJ05vdENvbmdydWVudCcsIFs4ODAyXV0sIFsnTm90Q3VwQ2FwJywgWzg4MTNdXSwgWydOb3REb3VibGVWZXJ0aWNhbEJhcicsIFs4NzQyXV0sIFsnTm90RWxlbWVudCcsIFs4NzEzXV0sIFsnTm90RXF1YWwnLCBbODgwMF1dLCBbJ05vdEVxdWFsVGlsZGUnLCBbODc3MCwgODI0XV0sIFsnTm90RXhpc3RzJywgWzg3MDhdXSwgWydOb3RHcmVhdGVyJywgWzg4MTVdXSwgWydOb3RHcmVhdGVyRXF1YWwnLCBbODgxN11dLCBbJ05vdEdyZWF0ZXJGdWxsRXF1YWwnLCBbODgwNywgODI0XV0sIFsnTm90R3JlYXRlckdyZWF0ZXInLCBbODgxMSwgODI0XV0sIFsnTm90R3JlYXRlckxlc3MnLCBbODgyNV1dLCBbJ05vdEdyZWF0ZXJTbGFudEVxdWFsJywgWzEwODc4LCA4MjRdXSwgWydOb3RHcmVhdGVyVGlsZGUnLCBbODgyMV1dLCBbJ05vdEh1bXBEb3duSHVtcCcsIFs4NzgyLCA4MjRdXSwgWydOb3RIdW1wRXF1YWwnLCBbODc4MywgODI0XV0sIFsnbm90aW4nLCBbODcxM11dLCBbJ25vdGluZG90JywgWzg5NDksIDgyNF1dLCBbJ25vdGluRScsIFs4OTUzLCA4MjRdXSwgWydub3RpbnZhJywgWzg3MTNdXSwgWydub3RpbnZiJywgWzg5NTFdXSwgWydub3RpbnZjJywgWzg5NTBdXSwgWydOb3RMZWZ0VHJpYW5nbGVCYXInLCBbMTA3MDMsIDgyNF1dLCBbJ05vdExlZnRUcmlhbmdsZScsIFs4OTM4XV0sIFsnTm90TGVmdFRyaWFuZ2xlRXF1YWwnLCBbODk0MF1dLCBbJ05vdExlc3MnLCBbODgxNF1dLCBbJ05vdExlc3NFcXVhbCcsIFs4ODE2XV0sIFsnTm90TGVzc0dyZWF0ZXInLCBbODgyNF1dLCBbJ05vdExlc3NMZXNzJywgWzg4MTAsIDgyNF1dLCBbJ05vdExlc3NTbGFudEVxdWFsJywgWzEwODc3LCA4MjRdXSwgWydOb3RMZXNzVGlsZGUnLCBbODgyMF1dLCBbJ05vdE5lc3RlZEdyZWF0ZXJHcmVhdGVyJywgWzEwOTE0LCA4MjRdXSwgWydOb3ROZXN0ZWRMZXNzTGVzcycsIFsxMDkxMywgODI0XV0sIFsnbm90bmknLCBbODcxNl1dLCBbJ25vdG5pdmEnLCBbODcxNl1dLCBbJ25vdG5pdmInLCBbODk1OF1dLCBbJ25vdG5pdmMnLCBbODk1N11dLCBbJ05vdFByZWNlZGVzJywgWzg4MzJdXSwgWydOb3RQcmVjZWRlc0VxdWFsJywgWzEwOTI3LCA4MjRdXSwgWydOb3RQcmVjZWRlc1NsYW50RXF1YWwnLCBbODkyOF1dLCBbJ05vdFJldmVyc2VFbGVtZW50JywgWzg3MTZdXSwgWydOb3RSaWdodFRyaWFuZ2xlQmFyJywgWzEwNzA0LCA4MjRdXSwgWydOb3RSaWdodFRyaWFuZ2xlJywgWzg5MzldXSwgWydOb3RSaWdodFRyaWFuZ2xlRXF1YWwnLCBbODk0MV1dLCBbJ05vdFNxdWFyZVN1YnNldCcsIFs4ODQ3LCA4MjRdXSwgWydOb3RTcXVhcmVTdWJzZXRFcXVhbCcsIFs4OTMwXV0sIFsnTm90U3F1YXJlU3VwZXJzZXQnLCBbODg0OCwgODI0XV0sIFsnTm90U3F1YXJlU3VwZXJzZXRFcXVhbCcsIFs4OTMxXV0sIFsnTm90U3Vic2V0JywgWzg4MzQsIDg0MDJdXSwgWydOb3RTdWJzZXRFcXVhbCcsIFs4ODQwXV0sIFsnTm90U3VjY2VlZHMnLCBbODgzM11dLCBbJ05vdFN1Y2NlZWRzRXF1YWwnLCBbMTA5MjgsIDgyNF1dLCBbJ05vdFN1Y2NlZWRzU2xhbnRFcXVhbCcsIFs4OTI5XV0sIFsnTm90U3VjY2VlZHNUaWxkZScsIFs4ODMxLCA4MjRdXSwgWydOb3RTdXBlcnNldCcsIFs4ODM1LCA4NDAyXV0sIFsnTm90U3VwZXJzZXRFcXVhbCcsIFs4ODQxXV0sIFsnTm90VGlsZGUnLCBbODc2OV1dLCBbJ05vdFRpbGRlRXF1YWwnLCBbODc3Ml1dLCBbJ05vdFRpbGRlRnVsbEVxdWFsJywgWzg3NzVdXSwgWydOb3RUaWxkZVRpbGRlJywgWzg3NzddXSwgWydOb3RWZXJ0aWNhbEJhcicsIFs4NzQwXV0sIFsnbnBhcmFsbGVsJywgWzg3NDJdXSwgWyducGFyJywgWzg3NDJdXSwgWyducGFyc2wnLCBbMTEwMDUsIDg0MjFdXSwgWyducGFydCcsIFs4NzA2LCA4MjRdXSwgWyducG9saW50JywgWzEwNzcyXV0sIFsnbnByJywgWzg4MzJdXSwgWyducHJjdWUnLCBbODkyOF1dLCBbJ25wcmVjJywgWzg4MzJdXSwgWyducHJlY2VxJywgWzEwOTI3LCA4MjRdXSwgWyducHJlJywgWzEwOTI3LCA4MjRdXSwgWyducmFycmMnLCBbMTA1NDcsIDgyNF1dLCBbJ25yYXJyJywgWzg2MDNdXSwgWyduckFycicsIFs4NjU1XV0sIFsnbnJhcnJ3JywgWzg2MDUsIDgyNF1dLCBbJ25yaWdodGFycm93JywgWzg2MDNdXSwgWyduUmlnaHRhcnJvdycsIFs4NjU1XV0sIFsnbnJ0cmknLCBbODkzOV1dLCBbJ25ydHJpZScsIFs4OTQxXV0sIFsnbnNjJywgWzg4MzNdXSwgWyduc2NjdWUnLCBbODkyOV1dLCBbJ25zY2UnLCBbMTA5MjgsIDgyNF1dLCBbJ05zY3InLCBbMTE5OTc3XV0sIFsnbnNjcicsIFsxMjAwMDNdXSwgWyduc2hvcnRtaWQnLCBbODc0MF1dLCBbJ25zaG9ydHBhcmFsbGVsJywgWzg3NDJdXSwgWyduc2ltJywgWzg3NjldXSwgWyduc2ltZScsIFs4NzcyXV0sIFsnbnNpbWVxJywgWzg3NzJdXSwgWyduc21pZCcsIFs4NzQwXV0sIFsnbnNwYXInLCBbODc0Ml1dLCBbJ25zcXN1YmUnLCBbODkzMF1dLCBbJ25zcXN1cGUnLCBbODkzMV1dLCBbJ25zdWInLCBbODgzNl1dLCBbJ25zdWJFJywgWzEwOTQ5LCA4MjRdXSwgWyduc3ViZScsIFs4ODQwXV0sIFsnbnN1YnNldCcsIFs4ODM0LCA4NDAyXV0sIFsnbnN1YnNldGVxJywgWzg4NDBdXSwgWyduc3Vic2V0ZXFxJywgWzEwOTQ5LCA4MjRdXSwgWyduc3VjYycsIFs4ODMzXV0sIFsnbnN1Y2NlcScsIFsxMDkyOCwgODI0XV0sIFsnbnN1cCcsIFs4ODM3XV0sIFsnbnN1cEUnLCBbMTA5NTAsIDgyNF1dLCBbJ25zdXBlJywgWzg4NDFdXSwgWyduc3Vwc2V0JywgWzg4MzUsIDg0MDJdXSwgWyduc3Vwc2V0ZXEnLCBbODg0MV1dLCBbJ25zdXBzZXRlcXEnLCBbMTA5NTAsIDgyNF1dLCBbJ250Z2wnLCBbODgyNV1dLCBbJ050aWxkZScsIFsyMDldXSwgWydudGlsZGUnLCBbMjQxXV0sIFsnbnRsZycsIFs4ODI0XV0sIFsnbnRyaWFuZ2xlbGVmdCcsIFs4OTM4XV0sIFsnbnRyaWFuZ2xlbGVmdGVxJywgWzg5NDBdXSwgWydudHJpYW5nbGVyaWdodCcsIFs4OTM5XV0sIFsnbnRyaWFuZ2xlcmlnaHRlcScsIFs4OTQxXV0sIFsnTnUnLCBbOTI1XV0sIFsnbnUnLCBbOTU3XV0sIFsnbnVtJywgWzM1XV0sIFsnbnVtZXJvJywgWzg0NzBdXSwgWydudW1zcCcsIFs4MTk5XV0sIFsnbnZhcCcsIFs4NzgxLCA4NDAyXV0sIFsnbnZkYXNoJywgWzg4NzZdXSwgWydudkRhc2gnLCBbODg3N11dLCBbJ25WZGFzaCcsIFs4ODc4XV0sIFsnblZEYXNoJywgWzg4NzldXSwgWydudmdlJywgWzg4MDUsIDg0MDJdXSwgWydudmd0JywgWzYyLCA4NDAyXV0sIFsnbnZIYXJyJywgWzEwNTAwXV0sIFsnbnZpbmZpbicsIFsxMDcxOF1dLCBbJ252bEFycicsIFsxMDQ5OF1dLCBbJ252bGUnLCBbODgwNCwgODQwMl1dLCBbJ252bHQnLCBbNjAsIDg0MDJdXSwgWydudmx0cmllJywgWzg4ODQsIDg0MDJdXSwgWydudnJBcnInLCBbMTA0OTldXSwgWydudnJ0cmllJywgWzg4ODUsIDg0MDJdXSwgWydudnNpbScsIFs4NzY0LCA4NDAyXV0sIFsnbndhcmhrJywgWzEwNTMxXV0sIFsnbndhcnInLCBbODU5OF1dLCBbJ253QXJyJywgWzg2NjJdXSwgWydud2Fycm93JywgWzg1OThdXSwgWydud25lYXInLCBbMTA1MzVdXSwgWydPYWN1dGUnLCBbMjExXV0sIFsnb2FjdXRlJywgWzI0M11dLCBbJ29hc3QnLCBbODg1OV1dLCBbJ09jaXJjJywgWzIxMl1dLCBbJ29jaXJjJywgWzI0NF1dLCBbJ29jaXInLCBbODg1OF1dLCBbJ09jeScsIFsxMDU0XV0sIFsnb2N5JywgWzEwODZdXSwgWydvZGFzaCcsIFs4ODYxXV0sIFsnT2RibGFjJywgWzMzNl1dLCBbJ29kYmxhYycsIFszMzddXSwgWydvZGl2JywgWzEwODA4XV0sIFsnb2RvdCcsIFs4ODU3XV0sIFsnb2Rzb2xkJywgWzEwNjg0XV0sIFsnT0VsaWcnLCBbMzM4XV0sIFsnb2VsaWcnLCBbMzM5XV0sIFsnb2ZjaXInLCBbMTA2ODddXSwgWydPZnInLCBbMTIwMDgyXV0sIFsnb2ZyJywgWzEyMDEwOF1dLCBbJ29nb24nLCBbNzMxXV0sIFsnT2dyYXZlJywgWzIxMF1dLCBbJ29ncmF2ZScsIFsyNDJdXSwgWydvZ3QnLCBbMTA2ODldXSwgWydvaGJhcicsIFsxMDY3N11dLCBbJ29obScsIFs5MzddXSwgWydvaW50JywgWzg3NTBdXSwgWydvbGFycicsIFs4NjM0XV0sIFsnb2xjaXInLCBbMTA2ODZdXSwgWydvbGNyb3NzJywgWzEwNjgzXV0sIFsnb2xpbmUnLCBbODI1NF1dLCBbJ29sdCcsIFsxMDY4OF1dLCBbJ09tYWNyJywgWzMzMl1dLCBbJ29tYWNyJywgWzMzM11dLCBbJ09tZWdhJywgWzkzN11dLCBbJ29tZWdhJywgWzk2OV1dLCBbJ09taWNyb24nLCBbOTI3XV0sIFsnb21pY3JvbicsIFs5NTldXSwgWydvbWlkJywgWzEwNjc4XV0sIFsnb21pbnVzJywgWzg4NTRdXSwgWydPb3BmJywgWzEyMDEzNF1dLCBbJ29vcGYnLCBbMTIwMTYwXV0sIFsnb3BhcicsIFsxMDY3OV1dLCBbJ09wZW5DdXJseURvdWJsZVF1b3RlJywgWzgyMjBdXSwgWydPcGVuQ3VybHlRdW90ZScsIFs4MjE2XV0sIFsnb3BlcnAnLCBbMTA2ODFdXSwgWydvcGx1cycsIFs4ODUzXV0sIFsnb3JhcnInLCBbODYzNV1dLCBbJ09yJywgWzEwODM2XV0sIFsnb3InLCBbODc0NF1dLCBbJ29yZCcsIFsxMDg0NV1dLCBbJ29yZGVyJywgWzg1MDBdXSwgWydvcmRlcm9mJywgWzg1MDBdXSwgWydvcmRmJywgWzE3MF1dLCBbJ29yZG0nLCBbMTg2XV0sIFsnb3JpZ29mJywgWzg4ODZdXSwgWydvcm9yJywgWzEwODM4XV0sIFsnb3JzbG9wZScsIFsxMDgzOV1dLCBbJ29ydicsIFsxMDg0M11dLCBbJ29TJywgWzk0MTZdXSwgWydPc2NyJywgWzExOTk3OF1dLCBbJ29zY3InLCBbODUwMF1dLCBbJ09zbGFzaCcsIFsyMTZdXSwgWydvc2xhc2gnLCBbMjQ4XV0sIFsnb3NvbCcsIFs4ODU2XV0sIFsnT3RpbGRlJywgWzIxM11dLCBbJ290aWxkZScsIFsyNDVdXSwgWydvdGltZXNhcycsIFsxMDgwNl1dLCBbJ090aW1lcycsIFsxMDgwN11dLCBbJ290aW1lcycsIFs4ODU1XV0sIFsnT3VtbCcsIFsyMTRdXSwgWydvdW1sJywgWzI0Nl1dLCBbJ292YmFyJywgWzkwMjFdXSwgWydPdmVyQmFyJywgWzgyNTRdXSwgWydPdmVyQnJhY2UnLCBbOTE4Ml1dLCBbJ092ZXJCcmFja2V0JywgWzkxNDBdXSwgWydPdmVyUGFyZW50aGVzaXMnLCBbOTE4MF1dLCBbJ3BhcmEnLCBbMTgyXV0sIFsncGFyYWxsZWwnLCBbODc0MV1dLCBbJ3BhcicsIFs4NzQxXV0sIFsncGFyc2ltJywgWzEwOTk1XV0sIFsncGFyc2wnLCBbMTEwMDVdXSwgWydwYXJ0JywgWzg3MDZdXSwgWydQYXJ0aWFsRCcsIFs4NzA2XV0sIFsnUGN5JywgWzEwNTVdXSwgWydwY3knLCBbMTA4N11dLCBbJ3BlcmNudCcsIFszN11dLCBbJ3BlcmlvZCcsIFs0Nl1dLCBbJ3Blcm1pbCcsIFs4MjQwXV0sIFsncGVycCcsIFs4ODY5XV0sIFsncGVydGVuaycsIFs4MjQxXV0sIFsnUGZyJywgWzEyMDA4M11dLCBbJ3BmcicsIFsxMjAxMDldXSwgWydQaGknLCBbOTM0XV0sIFsncGhpJywgWzk2Nl1dLCBbJ3BoaXYnLCBbOTgxXV0sIFsncGhtbWF0JywgWzg0OTldXSwgWydwaG9uZScsIFs5NzQyXV0sIFsnUGknLCBbOTI4XV0sIFsncGknLCBbOTYwXV0sIFsncGl0Y2hmb3JrJywgWzg5MTZdXSwgWydwaXYnLCBbOTgyXV0sIFsncGxhbmNrJywgWzg0NjNdXSwgWydwbGFuY2toJywgWzg0NjJdXSwgWydwbGFua3YnLCBbODQ2M11dLCBbJ3BsdXNhY2lyJywgWzEwNzg3XV0sIFsncGx1c2InLCBbODg2Ml1dLCBbJ3BsdXNjaXInLCBbMTA3ODZdXSwgWydwbHVzJywgWzQzXV0sIFsncGx1c2RvJywgWzg3MjRdXSwgWydwbHVzZHUnLCBbMTA3ODldXSwgWydwbHVzZScsIFsxMDg2Nl1dLCBbJ1BsdXNNaW51cycsIFsxNzddXSwgWydwbHVzbW4nLCBbMTc3XV0sIFsncGx1c3NpbScsIFsxMDc5MF1dLCBbJ3BsdXN0d28nLCBbMTA3OTFdXSwgWydwbScsIFsxNzddXSwgWydQb2luY2FyZXBsYW5lJywgWzg0NjBdXSwgWydwb2ludGludCcsIFsxMDc3M11dLCBbJ3BvcGYnLCBbMTIwMTYxXV0sIFsnUG9wZicsIFs4NDczXV0sIFsncG91bmQnLCBbMTYzXV0sIFsncHJhcCcsIFsxMDkzNV1dLCBbJ1ByJywgWzEwOTM5XV0sIFsncHInLCBbODgyNl1dLCBbJ3ByY3VlJywgWzg4MjhdXSwgWydwcmVjYXBwcm94JywgWzEwOTM1XV0sIFsncHJlYycsIFs4ODI2XV0sIFsncHJlY2N1cmx5ZXEnLCBbODgyOF1dLCBbJ1ByZWNlZGVzJywgWzg4MjZdXSwgWydQcmVjZWRlc0VxdWFsJywgWzEwOTI3XV0sIFsnUHJlY2VkZXNTbGFudEVxdWFsJywgWzg4MjhdXSwgWydQcmVjZWRlc1RpbGRlJywgWzg4MzBdXSwgWydwcmVjZXEnLCBbMTA5MjddXSwgWydwcmVjbmFwcHJveCcsIFsxMDkzN11dLCBbJ3ByZWNuZXFxJywgWzEwOTMzXV0sIFsncHJlY25zaW0nLCBbODkzNl1dLCBbJ3ByZScsIFsxMDkyN11dLCBbJ3ByRScsIFsxMDkzMV1dLCBbJ3ByZWNzaW0nLCBbODgzMF1dLCBbJ3ByaW1lJywgWzgyNDJdXSwgWydQcmltZScsIFs4MjQzXV0sIFsncHJpbWVzJywgWzg0NzNdXSwgWydwcm5hcCcsIFsxMDkzN11dLCBbJ3BybkUnLCBbMTA5MzNdXSwgWydwcm5zaW0nLCBbODkzNl1dLCBbJ3Byb2QnLCBbODcxOV1dLCBbJ1Byb2R1Y3QnLCBbODcxOV1dLCBbJ3Byb2ZhbGFyJywgWzkwMDZdXSwgWydwcm9mbGluZScsIFs4OTc4XV0sIFsncHJvZnN1cmYnLCBbODk3OV1dLCBbJ3Byb3AnLCBbODczM11dLCBbJ1Byb3BvcnRpb25hbCcsIFs4NzMzXV0sIFsnUHJvcG9ydGlvbicsIFs4NzU5XV0sIFsncHJvcHRvJywgWzg3MzNdXSwgWydwcnNpbScsIFs4ODMwXV0sIFsncHJ1cmVsJywgWzg4ODBdXSwgWydQc2NyJywgWzExOTk3OV1dLCBbJ3BzY3InLCBbMTIwMDA1XV0sIFsnUHNpJywgWzkzNl1dLCBbJ3BzaScsIFs5NjhdXSwgWydwdW5jc3AnLCBbODIwMF1dLCBbJ1FmcicsIFsxMjAwODRdXSwgWydxZnInLCBbMTIwMTEwXV0sIFsncWludCcsIFsxMDc2NF1dLCBbJ3FvcGYnLCBbMTIwMTYyXV0sIFsnUW9wZicsIFs4NDc0XV0sIFsncXByaW1lJywgWzgyNzldXSwgWydRc2NyJywgWzExOTk4MF1dLCBbJ3FzY3InLCBbMTIwMDA2XV0sIFsncXVhdGVybmlvbnMnLCBbODQ2MV1dLCBbJ3F1YXRpbnQnLCBbMTA3NzRdXSwgWydxdWVzdCcsIFs2M11dLCBbJ3F1ZXN0ZXEnLCBbODc5OV1dLCBbJ3F1b3QnLCBbMzRdXSwgWydRVU9UJywgWzM0XV0sIFsnckFhcnInLCBbODY2N11dLCBbJ3JhY2UnLCBbODc2NSwgODE3XV0sIFsnUmFjdXRlJywgWzM0MF1dLCBbJ3JhY3V0ZScsIFszNDFdXSwgWydyYWRpYycsIFs4NzMwXV0sIFsncmFlbXB0eXYnLCBbMTA2NzVdXSwgWydyYW5nJywgWzEwMjE3XV0sIFsnUmFuZycsIFsxMDIxOV1dLCBbJ3JhbmdkJywgWzEwNjQyXV0sIFsncmFuZ2UnLCBbMTA2NjFdXSwgWydyYW5nbGUnLCBbMTAyMTddXSwgWydyYXF1bycsIFsxODddXSwgWydyYXJyYXAnLCBbMTA2MTNdXSwgWydyYXJyYicsIFs4Njc3XV0sIFsncmFycmJmcycsIFsxMDUyOF1dLCBbJ3JhcnJjJywgWzEwNTQ3XV0sIFsncmFycicsIFs4NTk0XV0sIFsnUmFycicsIFs4NjA4XV0sIFsnckFycicsIFs4NjU4XV0sIFsncmFycmZzJywgWzEwNTI2XV0sIFsncmFycmhrJywgWzg2MThdXSwgWydyYXJybHAnLCBbODYyMF1dLCBbJ3JhcnJwbCcsIFsxMDU2NV1dLCBbJ3JhcnJzaW0nLCBbMTA2MTJdXSwgWydSYXJydGwnLCBbMTA1MThdXSwgWydyYXJydGwnLCBbODYxMV1dLCBbJ3JhcnJ3JywgWzg2MDVdXSwgWydyYXRhaWwnLCBbMTA1MjJdXSwgWydyQXRhaWwnLCBbMTA1MjRdXSwgWydyYXRpbycsIFs4NzU4XV0sIFsncmF0aW9uYWxzJywgWzg0NzRdXSwgWydyYmFycicsIFsxMDUwOV1dLCBbJ3JCYXJyJywgWzEwNTExXV0sIFsnUkJhcnInLCBbMTA1MTJdXSwgWydyYmJyaycsIFsxMDA5OV1dLCBbJ3JicmFjZScsIFsxMjVdXSwgWydyYnJhY2snLCBbOTNdXSwgWydyYnJrZScsIFsxMDYzNl1dLCBbJ3JicmtzbGQnLCBbMTA2MzhdXSwgWydyYnJrc2x1JywgWzEwNjQwXV0sIFsnUmNhcm9uJywgWzM0NF1dLCBbJ3JjYXJvbicsIFszNDVdXSwgWydSY2VkaWwnLCBbMzQyXV0sIFsncmNlZGlsJywgWzM0M11dLCBbJ3JjZWlsJywgWzg5NjldXSwgWydyY3ViJywgWzEyNV1dLCBbJ1JjeScsIFsxMDU2XV0sIFsncmN5JywgWzEwODhdXSwgWydyZGNhJywgWzEwNTUxXV0sIFsncmRsZGhhcicsIFsxMDYwMV1dLCBbJ3JkcXVvJywgWzgyMjFdXSwgWydyZHF1b3InLCBbODIyMV1dLCBbJ0Nsb3NlQ3VybHlEb3VibGVRdW90ZScsIFs4MjIxXV0sIFsncmRzaCcsIFs4NjI3XV0sIFsncmVhbCcsIFs4NDc2XV0sIFsncmVhbGluZScsIFs4NDc1XV0sIFsncmVhbHBhcnQnLCBbODQ3Nl1dLCBbJ3JlYWxzJywgWzg0NzddXSwgWydSZScsIFs4NDc2XV0sIFsncmVjdCcsIFs5NjQ1XV0sIFsncmVnJywgWzE3NF1dLCBbJ1JFRycsIFsxNzRdXSwgWydSZXZlcnNlRWxlbWVudCcsIFs4NzE1XV0sIFsnUmV2ZXJzZUVxdWlsaWJyaXVtJywgWzg2NTFdXSwgWydSZXZlcnNlVXBFcXVpbGlicml1bScsIFsxMDYwN11dLCBbJ3JmaXNodCcsIFsxMDYyMV1dLCBbJ3JmbG9vcicsIFs4OTcxXV0sIFsncmZyJywgWzEyMDExMV1dLCBbJ1JmcicsIFs4NDc2XV0sIFsnckhhcicsIFsxMDU5Nl1dLCBbJ3JoYXJkJywgWzg2NDFdXSwgWydyaGFydScsIFs4NjQwXV0sIFsncmhhcnVsJywgWzEwNjA0XV0sIFsnUmhvJywgWzkyOV1dLCBbJ3JobycsIFs5NjFdXSwgWydyaG92JywgWzEwMDldXSwgWydSaWdodEFuZ2xlQnJhY2tldCcsIFsxMDIxN11dLCBbJ1JpZ2h0QXJyb3dCYXInLCBbODY3N11dLCBbJ3JpZ2h0YXJyb3cnLCBbODU5NF1dLCBbJ1JpZ2h0QXJyb3cnLCBbODU5NF1dLCBbJ1JpZ2h0YXJyb3cnLCBbODY1OF1dLCBbJ1JpZ2h0QXJyb3dMZWZ0QXJyb3cnLCBbODY0NF1dLCBbJ3JpZ2h0YXJyb3d0YWlsJywgWzg2MTFdXSwgWydSaWdodENlaWxpbmcnLCBbODk2OV1dLCBbJ1JpZ2h0RG91YmxlQnJhY2tldCcsIFsxMDIxNV1dLCBbJ1JpZ2h0RG93blRlZVZlY3RvcicsIFsxMDU4OV1dLCBbJ1JpZ2h0RG93blZlY3RvckJhcicsIFsxMDU4MV1dLCBbJ1JpZ2h0RG93blZlY3RvcicsIFs4NjQyXV0sIFsnUmlnaHRGbG9vcicsIFs4OTcxXV0sIFsncmlnaHRoYXJwb29uZG93bicsIFs4NjQxXV0sIFsncmlnaHRoYXJwb29udXAnLCBbODY0MF1dLCBbJ3JpZ2h0bGVmdGFycm93cycsIFs4NjQ0XV0sIFsncmlnaHRsZWZ0aGFycG9vbnMnLCBbODY1Ml1dLCBbJ3JpZ2h0cmlnaHRhcnJvd3MnLCBbODY0OV1dLCBbJ3JpZ2h0c3F1aWdhcnJvdycsIFs4NjA1XV0sIFsnUmlnaHRUZWVBcnJvdycsIFs4NjE0XV0sIFsnUmlnaHRUZWUnLCBbODg2Nl1dLCBbJ1JpZ2h0VGVlVmVjdG9yJywgWzEwNTg3XV0sIFsncmlnaHR0aHJlZXRpbWVzJywgWzg5MDhdXSwgWydSaWdodFRyaWFuZ2xlQmFyJywgWzEwNzA0XV0sIFsnUmlnaHRUcmlhbmdsZScsIFs4ODgzXV0sIFsnUmlnaHRUcmlhbmdsZUVxdWFsJywgWzg4ODVdXSwgWydSaWdodFVwRG93blZlY3RvcicsIFsxMDU3NV1dLCBbJ1JpZ2h0VXBUZWVWZWN0b3InLCBbMTA1ODhdXSwgWydSaWdodFVwVmVjdG9yQmFyJywgWzEwNTgwXV0sIFsnUmlnaHRVcFZlY3RvcicsIFs4NjM4XV0sIFsnUmlnaHRWZWN0b3JCYXInLCBbMTA1NzldXSwgWydSaWdodFZlY3RvcicsIFs4NjQwXV0sIFsncmluZycsIFs3MzBdXSwgWydyaXNpbmdkb3RzZXEnLCBbODc4N11dLCBbJ3JsYXJyJywgWzg2NDRdXSwgWydybGhhcicsIFs4NjUyXV0sIFsncmxtJywgWzgyMDddXSwgWydybW91c3RhY2hlJywgWzkxMzddXSwgWydybW91c3QnLCBbOTEzN11dLCBbJ3JubWlkJywgWzEwOTkwXV0sIFsncm9hbmcnLCBbMTAyMjFdXSwgWydyb2FycicsIFs4NzAyXV0sIFsncm9icmsnLCBbMTAyMTVdXSwgWydyb3BhcicsIFsxMDYzMF1dLCBbJ3JvcGYnLCBbMTIwMTYzXV0sIFsnUm9wZicsIFs4NDc3XV0sIFsncm9wbHVzJywgWzEwNzk4XV0sIFsncm90aW1lcycsIFsxMDgwNV1dLCBbJ1JvdW5kSW1wbGllcycsIFsxMDYwOF1dLCBbJ3JwYXInLCBbNDFdXSwgWydycGFyZ3QnLCBbMTA2NDRdXSwgWydycHBvbGludCcsIFsxMDc3MF1dLCBbJ3JyYXJyJywgWzg2NDldXSwgWydScmlnaHRhcnJvdycsIFs4NjY3XV0sIFsncnNhcXVvJywgWzgyNTBdXSwgWydyc2NyJywgWzEyMDAwN11dLCBbJ1JzY3InLCBbODQ3NV1dLCBbJ3JzaCcsIFs4NjI1XV0sIFsnUnNoJywgWzg2MjVdXSwgWydyc3FiJywgWzkzXV0sIFsncnNxdW8nLCBbODIxN11dLCBbJ3JzcXVvcicsIFs4MjE3XV0sIFsnQ2xvc2VDdXJseVF1b3RlJywgWzgyMTddXSwgWydydGhyZWUnLCBbODkwOF1dLCBbJ3J0aW1lcycsIFs4OTA2XV0sIFsncnRyaScsIFs5NjU3XV0sIFsncnRyaWUnLCBbODg4NV1dLCBbJ3J0cmlmJywgWzk2NTZdXSwgWydydHJpbHRyaScsIFsxMDcwMl1dLCBbJ1J1bGVEZWxheWVkJywgWzEwNzQwXV0sIFsncnVsdWhhcicsIFsxMDYwMF1dLCBbJ3J4JywgWzg0NzhdXSwgWydTYWN1dGUnLCBbMzQ2XV0sIFsnc2FjdXRlJywgWzM0N11dLCBbJ3NicXVvJywgWzgyMThdXSwgWydzY2FwJywgWzEwOTM2XV0sIFsnU2Nhcm9uJywgWzM1Ml1dLCBbJ3NjYXJvbicsIFszNTNdXSwgWydTYycsIFsxMDk0MF1dLCBbJ3NjJywgWzg4MjddXSwgWydzY2N1ZScsIFs4ODI5XV0sIFsnc2NlJywgWzEwOTI4XV0sIFsnc2NFJywgWzEwOTMyXV0sIFsnU2NlZGlsJywgWzM1MF1dLCBbJ3NjZWRpbCcsIFszNTFdXSwgWydTY2lyYycsIFszNDhdXSwgWydzY2lyYycsIFszNDldXSwgWydzY25hcCcsIFsxMDkzOF1dLCBbJ3NjbkUnLCBbMTA5MzRdXSwgWydzY25zaW0nLCBbODkzN11dLCBbJ3NjcG9saW50JywgWzEwNzcxXV0sIFsnc2NzaW0nLCBbODgzMV1dLCBbJ1NjeScsIFsxMDU3XV0sIFsnc2N5JywgWzEwODldXSwgWydzZG90YicsIFs4ODY1XV0sIFsnc2RvdCcsIFs4OTAxXV0sIFsnc2RvdGUnLCBbMTA4NTRdXSwgWydzZWFyaGsnLCBbMTA1MzNdXSwgWydzZWFycicsIFs4NjAwXV0sIFsnc2VBcnInLCBbODY2NF1dLCBbJ3NlYXJyb3cnLCBbODYwMF1dLCBbJ3NlY3QnLCBbMTY3XV0sIFsnc2VtaScsIFs1OV1dLCBbJ3Nlc3dhcicsIFsxMDUzN11dLCBbJ3NldG1pbnVzJywgWzg3MjZdXSwgWydzZXRtbicsIFs4NzI2XV0sIFsnc2V4dCcsIFsxMDAzOF1dLCBbJ1NmcicsIFsxMjAwODZdXSwgWydzZnInLCBbMTIwMTEyXV0sIFsnc2Zyb3duJywgWzg5OTRdXSwgWydzaGFycCcsIFs5ODM5XV0sIFsnU0hDSGN5JywgWzEwNjVdXSwgWydzaGNoY3knLCBbMTA5N11dLCBbJ1NIY3knLCBbMTA2NF1dLCBbJ3NoY3knLCBbMTA5Nl1dLCBbJ1Nob3J0RG93bkFycm93JywgWzg1OTVdXSwgWydTaG9ydExlZnRBcnJvdycsIFs4NTkyXV0sIFsnc2hvcnRtaWQnLCBbODczOV1dLCBbJ3Nob3J0cGFyYWxsZWwnLCBbODc0MV1dLCBbJ1Nob3J0UmlnaHRBcnJvdycsIFs4NTk0XV0sIFsnU2hvcnRVcEFycm93JywgWzg1OTNdXSwgWydzaHknLCBbMTczXV0sIFsnU2lnbWEnLCBbOTMxXV0sIFsnc2lnbWEnLCBbOTYzXV0sIFsnc2lnbWFmJywgWzk2Ml1dLCBbJ3NpZ21hdicsIFs5NjJdXSwgWydzaW0nLCBbODc2NF1dLCBbJ3NpbWRvdCcsIFsxMDg1OF1dLCBbJ3NpbWUnLCBbODc3MV1dLCBbJ3NpbWVxJywgWzg3NzFdXSwgWydzaW1nJywgWzEwOTEwXV0sIFsnc2ltZ0UnLCBbMTA5MTJdXSwgWydzaW1sJywgWzEwOTA5XV0sIFsnc2ltbEUnLCBbMTA5MTFdXSwgWydzaW1uZScsIFs4Nzc0XV0sIFsnc2ltcGx1cycsIFsxMDc4OF1dLCBbJ3NpbXJhcnInLCBbMTA2MTBdXSwgWydzbGFycicsIFs4NTkyXV0sIFsnU21hbGxDaXJjbGUnLCBbODcyOF1dLCBbJ3NtYWxsc2V0bWludXMnLCBbODcyNl1dLCBbJ3NtYXNocCcsIFsxMDgwM11dLCBbJ3NtZXBhcnNsJywgWzEwNzI0XV0sIFsnc21pZCcsIFs4NzM5XV0sIFsnc21pbGUnLCBbODk5NV1dLCBbJ3NtdCcsIFsxMDkyMl1dLCBbJ3NtdGUnLCBbMTA5MjRdXSwgWydzbXRlcycsIFsxMDkyNCwgNjUwMjRdXSwgWydTT0ZUY3knLCBbMTA2OF1dLCBbJ3NvZnRjeScsIFsxMTAwXV0sIFsnc29sYmFyJywgWzkwMjNdXSwgWydzb2xiJywgWzEwNjkyXV0sIFsnc29sJywgWzQ3XV0sIFsnU29wZicsIFsxMjAxMzhdXSwgWydzb3BmJywgWzEyMDE2NF1dLCBbJ3NwYWRlcycsIFs5ODI0XV0sIFsnc3BhZGVzdWl0JywgWzk4MjRdXSwgWydzcGFyJywgWzg3NDFdXSwgWydzcWNhcCcsIFs4ODUxXV0sIFsnc3FjYXBzJywgWzg4NTEsIDY1MDI0XV0sIFsnc3FjdXAnLCBbODg1Ml1dLCBbJ3NxY3VwcycsIFs4ODUyLCA2NTAyNF1dLCBbJ1NxcnQnLCBbODczMF1dLCBbJ3Nxc3ViJywgWzg4NDddXSwgWydzcXN1YmUnLCBbODg0OV1dLCBbJ3Nxc3Vic2V0JywgWzg4NDddXSwgWydzcXN1YnNldGVxJywgWzg4NDldXSwgWydzcXN1cCcsIFs4ODQ4XV0sIFsnc3FzdXBlJywgWzg4NTBdXSwgWydzcXN1cHNldCcsIFs4ODQ4XV0sIFsnc3FzdXBzZXRlcScsIFs4ODUwXV0sIFsnc3F1YXJlJywgWzk2MzNdXSwgWydTcXVhcmUnLCBbOTYzM11dLCBbJ1NxdWFyZUludGVyc2VjdGlvbicsIFs4ODUxXV0sIFsnU3F1YXJlU3Vic2V0JywgWzg4NDddXSwgWydTcXVhcmVTdWJzZXRFcXVhbCcsIFs4ODQ5XV0sIFsnU3F1YXJlU3VwZXJzZXQnLCBbODg0OF1dLCBbJ1NxdWFyZVN1cGVyc2V0RXF1YWwnLCBbODg1MF1dLCBbJ1NxdWFyZVVuaW9uJywgWzg4NTJdXSwgWydzcXVhcmYnLCBbOTY0Ml1dLCBbJ3NxdScsIFs5NjMzXV0sIFsnc3F1ZicsIFs5NjQyXV0sIFsnc3JhcnInLCBbODU5NF1dLCBbJ1NzY3InLCBbMTE5OTgyXV0sIFsnc3NjcicsIFsxMjAwMDhdXSwgWydzc2V0bW4nLCBbODcyNl1dLCBbJ3NzbWlsZScsIFs4OTk1XV0sIFsnc3N0YXJmJywgWzg5MDJdXSwgWydTdGFyJywgWzg5MDJdXSwgWydzdGFyJywgWzk3MzRdXSwgWydzdGFyZicsIFs5NzMzXV0sIFsnc3RyYWlnaHRlcHNpbG9uJywgWzEwMTNdXSwgWydzdHJhaWdodHBoaScsIFs5ODFdXSwgWydzdHJucycsIFsxNzVdXSwgWydzdWInLCBbODgzNF1dLCBbJ1N1YicsIFs4OTEyXV0sIFsnc3ViZG90JywgWzEwOTQxXV0sIFsnc3ViRScsIFsxMDk0OV1dLCBbJ3N1YmUnLCBbODgzOF1dLCBbJ3N1YmVkb3QnLCBbMTA5NDddXSwgWydzdWJtdWx0JywgWzEwOTQ1XV0sIFsnc3VibkUnLCBbMTA5NTVdXSwgWydzdWJuZScsIFs4ODQyXV0sIFsnc3VicGx1cycsIFsxMDk0M11dLCBbJ3N1YnJhcnInLCBbMTA2MTddXSwgWydzdWJzZXQnLCBbODgzNF1dLCBbJ1N1YnNldCcsIFs4OTEyXV0sIFsnc3Vic2V0ZXEnLCBbODgzOF1dLCBbJ3N1YnNldGVxcScsIFsxMDk0OV1dLCBbJ1N1YnNldEVxdWFsJywgWzg4MzhdXSwgWydzdWJzZXRuZXEnLCBbODg0Ml1dLCBbJ3N1YnNldG5lcXEnLCBbMTA5NTVdXSwgWydzdWJzaW0nLCBbMTA5NTFdXSwgWydzdWJzdWInLCBbMTA5NjVdXSwgWydzdWJzdXAnLCBbMTA5NjNdXSwgWydzdWNjYXBwcm94JywgWzEwOTM2XV0sIFsnc3VjYycsIFs4ODI3XV0sIFsnc3VjY2N1cmx5ZXEnLCBbODgyOV1dLCBbJ1N1Y2NlZWRzJywgWzg4MjddXSwgWydTdWNjZWVkc0VxdWFsJywgWzEwOTI4XV0sIFsnU3VjY2VlZHNTbGFudEVxdWFsJywgWzg4MjldXSwgWydTdWNjZWVkc1RpbGRlJywgWzg4MzFdXSwgWydzdWNjZXEnLCBbMTA5MjhdXSwgWydzdWNjbmFwcHJveCcsIFsxMDkzOF1dLCBbJ3N1Y2NuZXFxJywgWzEwOTM0XV0sIFsnc3VjY25zaW0nLCBbODkzN11dLCBbJ3N1Y2NzaW0nLCBbODgzMV1dLCBbJ1N1Y2hUaGF0JywgWzg3MTVdXSwgWydzdW0nLCBbODcyMV1dLCBbJ1N1bScsIFs4NzIxXV0sIFsnc3VuZycsIFs5ODM0XV0sIFsnc3VwMScsIFsxODVdXSwgWydzdXAyJywgWzE3OF1dLCBbJ3N1cDMnLCBbMTc5XV0sIFsnc3VwJywgWzg4MzVdXSwgWydTdXAnLCBbODkxM11dLCBbJ3N1cGRvdCcsIFsxMDk0Ml1dLCBbJ3N1cGRzdWInLCBbMTA5NjhdXSwgWydzdXBFJywgWzEwOTUwXV0sIFsnc3VwZScsIFs4ODM5XV0sIFsnc3VwZWRvdCcsIFsxMDk0OF1dLCBbJ1N1cGVyc2V0JywgWzg4MzVdXSwgWydTdXBlcnNldEVxdWFsJywgWzg4MzldXSwgWydzdXBoc29sJywgWzEwMTg1XV0sIFsnc3VwaHN1YicsIFsxMDk2N11dLCBbJ3N1cGxhcnInLCBbMTA2MTldXSwgWydzdXBtdWx0JywgWzEwOTQ2XV0sIFsnc3VwbkUnLCBbMTA5NTZdXSwgWydzdXBuZScsIFs4ODQzXV0sIFsnc3VwcGx1cycsIFsxMDk0NF1dLCBbJ3N1cHNldCcsIFs4ODM1XV0sIFsnU3Vwc2V0JywgWzg5MTNdXSwgWydzdXBzZXRlcScsIFs4ODM5XV0sIFsnc3Vwc2V0ZXFxJywgWzEwOTUwXV0sIFsnc3Vwc2V0bmVxJywgWzg4NDNdXSwgWydzdXBzZXRuZXFxJywgWzEwOTU2XV0sIFsnc3Vwc2ltJywgWzEwOTUyXV0sIFsnc3Vwc3ViJywgWzEwOTY0XV0sIFsnc3Vwc3VwJywgWzEwOTY2XV0sIFsnc3dhcmhrJywgWzEwNTM0XV0sIFsnc3dhcnInLCBbODYwMV1dLCBbJ3N3QXJyJywgWzg2NjVdXSwgWydzd2Fycm93JywgWzg2MDFdXSwgWydzd253YXInLCBbMTA1MzhdXSwgWydzemxpZycsIFsyMjNdXSwgWydUYWInLCBbOV1dLCBbJ3RhcmdldCcsIFs4OTgyXV0sIFsnVGF1JywgWzkzMl1dLCBbJ3RhdScsIFs5NjRdXSwgWyd0YnJrJywgWzkxNDBdXSwgWydUY2Fyb24nLCBbMzU2XV0sIFsndGNhcm9uJywgWzM1N11dLCBbJ1RjZWRpbCcsIFszNTRdXSwgWyd0Y2VkaWwnLCBbMzU1XV0sIFsnVGN5JywgWzEwNThdXSwgWyd0Y3knLCBbMTA5MF1dLCBbJ3Rkb3QnLCBbODQxMV1dLCBbJ3RlbHJlYycsIFs4OTgxXV0sIFsnVGZyJywgWzEyMDA4N11dLCBbJ3RmcicsIFsxMjAxMTNdXSwgWyd0aGVyZTQnLCBbODc1Nl1dLCBbJ3RoZXJlZm9yZScsIFs4NzU2XV0sIFsnVGhlcmVmb3JlJywgWzg3NTZdXSwgWydUaGV0YScsIFs5MjBdXSwgWyd0aGV0YScsIFs5NTJdXSwgWyd0aGV0YXN5bScsIFs5NzddXSwgWyd0aGV0YXYnLCBbOTc3XV0sIFsndGhpY2thcHByb3gnLCBbODc3Nl1dLCBbJ3RoaWNrc2ltJywgWzg3NjRdXSwgWydUaGlja1NwYWNlJywgWzgyODcsIDgyMDJdXSwgWydUaGluU3BhY2UnLCBbODIwMV1dLCBbJ3RoaW5zcCcsIFs4MjAxXV0sIFsndGhrYXAnLCBbODc3Nl1dLCBbJ3Roa3NpbScsIFs4NzY0XV0sIFsnVEhPUk4nLCBbMjIyXV0sIFsndGhvcm4nLCBbMjU0XV0sIFsndGlsZGUnLCBbNzMyXV0sIFsnVGlsZGUnLCBbODc2NF1dLCBbJ1RpbGRlRXF1YWwnLCBbODc3MV1dLCBbJ1RpbGRlRnVsbEVxdWFsJywgWzg3NzNdXSwgWydUaWxkZVRpbGRlJywgWzg3NzZdXSwgWyd0aW1lc2JhcicsIFsxMDgwMV1dLCBbJ3RpbWVzYicsIFs4ODY0XV0sIFsndGltZXMnLCBbMjE1XV0sIFsndGltZXNkJywgWzEwODAwXV0sIFsndGludCcsIFs4NzQ5XV0sIFsndG9lYScsIFsxMDUzNl1dLCBbJ3RvcGJvdCcsIFs5MDE0XV0sIFsndG9wY2lyJywgWzEwOTkzXV0sIFsndG9wJywgWzg4NjhdXSwgWydUb3BmJywgWzEyMDEzOV1dLCBbJ3RvcGYnLCBbMTIwMTY1XV0sIFsndG9wZm9yaycsIFsxMDk3MF1dLCBbJ3Rvc2EnLCBbMTA1MzddXSwgWyd0cHJpbWUnLCBbODI0NF1dLCBbJ3RyYWRlJywgWzg0ODJdXSwgWydUUkFERScsIFs4NDgyXV0sIFsndHJpYW5nbGUnLCBbOTY1M11dLCBbJ3RyaWFuZ2xlZG93bicsIFs5NjYzXV0sIFsndHJpYW5nbGVsZWZ0JywgWzk2NjddXSwgWyd0cmlhbmdsZWxlZnRlcScsIFs4ODg0XV0sIFsndHJpYW5nbGVxJywgWzg3OTZdXSwgWyd0cmlhbmdsZXJpZ2h0JywgWzk2NTddXSwgWyd0cmlhbmdsZXJpZ2h0ZXEnLCBbODg4NV1dLCBbJ3RyaWRvdCcsIFs5NzA4XV0sIFsndHJpZScsIFs4Nzk2XV0sIFsndHJpbWludXMnLCBbMTA4MTBdXSwgWydUcmlwbGVEb3QnLCBbODQxMV1dLCBbJ3RyaXBsdXMnLCBbMTA4MDldXSwgWyd0cmlzYicsIFsxMDcwMV1dLCBbJ3RyaXRpbWUnLCBbMTA4MTFdXSwgWyd0cnBleml1bScsIFs5MTg2XV0sIFsnVHNjcicsIFsxMTk5ODNdXSwgWyd0c2NyJywgWzEyMDAwOV1dLCBbJ1RTY3knLCBbMTA2Ml1dLCBbJ3RzY3knLCBbMTA5NF1dLCBbJ1RTSGN5JywgWzEwMzVdXSwgWyd0c2hjeScsIFsxMTE1XV0sIFsnVHN0cm9rJywgWzM1OF1dLCBbJ3RzdHJvaycsIFszNTldXSwgWyd0d2l4dCcsIFs4ODEyXV0sIFsndHdvaGVhZGxlZnRhcnJvdycsIFs4NjA2XV0sIFsndHdvaGVhZHJpZ2h0YXJyb3cnLCBbODYwOF1dLCBbJ1VhY3V0ZScsIFsyMThdXSwgWyd1YWN1dGUnLCBbMjUwXV0sIFsndWFycicsIFs4NTkzXV0sIFsnVWFycicsIFs4NjA3XV0sIFsndUFycicsIFs4NjU3XV0sIFsnVWFycm9jaXInLCBbMTA1NjldXSwgWydVYnJjeScsIFsxMDM4XV0sIFsndWJyY3knLCBbMTExOF1dLCBbJ1VicmV2ZScsIFszNjRdXSwgWyd1YnJldmUnLCBbMzY1XV0sIFsnVWNpcmMnLCBbMjE5XV0sIFsndWNpcmMnLCBbMjUxXV0sIFsnVWN5JywgWzEwNTldXSwgWyd1Y3knLCBbMTA5MV1dLCBbJ3VkYXJyJywgWzg2NDVdXSwgWydVZGJsYWMnLCBbMzY4XV0sIFsndWRibGFjJywgWzM2OV1dLCBbJ3VkaGFyJywgWzEwNjA2XV0sIFsndWZpc2h0JywgWzEwNjIyXV0sIFsnVWZyJywgWzEyMDA4OF1dLCBbJ3VmcicsIFsxMjAxMTRdXSwgWydVZ3JhdmUnLCBbMjE3XV0sIFsndWdyYXZlJywgWzI0OV1dLCBbJ3VIYXInLCBbMTA1OTVdXSwgWyd1aGFybCcsIFs4NjM5XV0sIFsndWhhcnInLCBbODYzOF1dLCBbJ3VoYmxrJywgWzk2MDBdXSwgWyd1bGNvcm4nLCBbODk4OF1dLCBbJ3VsY29ybmVyJywgWzg5ODhdXSwgWyd1bGNyb3AnLCBbODk3NV1dLCBbJ3VsdHJpJywgWzk3MjBdXSwgWydVbWFjcicsIFszNjJdXSwgWyd1bWFjcicsIFszNjNdXSwgWyd1bWwnLCBbMTY4XV0sIFsnVW5kZXJCYXInLCBbOTVdXSwgWydVbmRlckJyYWNlJywgWzkxODNdXSwgWydVbmRlckJyYWNrZXQnLCBbOTE0MV1dLCBbJ1VuZGVyUGFyZW50aGVzaXMnLCBbOTE4MV1dLCBbJ1VuaW9uJywgWzg4OTldXSwgWydVbmlvblBsdXMnLCBbODg0Nl1dLCBbJ1VvZ29uJywgWzM3MF1dLCBbJ3VvZ29uJywgWzM3MV1dLCBbJ1VvcGYnLCBbMTIwMTQwXV0sIFsndW9wZicsIFsxMjAxNjZdXSwgWydVcEFycm93QmFyJywgWzEwNTE0XV0sIFsndXBhcnJvdycsIFs4NTkzXV0sIFsnVXBBcnJvdycsIFs4NTkzXV0sIFsnVXBhcnJvdycsIFs4NjU3XV0sIFsnVXBBcnJvd0Rvd25BcnJvdycsIFs4NjQ1XV0sIFsndXBkb3duYXJyb3cnLCBbODU5N11dLCBbJ1VwRG93bkFycm93JywgWzg1OTddXSwgWydVcGRvd25hcnJvdycsIFs4NjYxXV0sIFsnVXBFcXVpbGlicml1bScsIFsxMDYwNl1dLCBbJ3VwaGFycG9vbmxlZnQnLCBbODYzOV1dLCBbJ3VwaGFycG9vbnJpZ2h0JywgWzg2MzhdXSwgWyd1cGx1cycsIFs4ODQ2XV0sIFsnVXBwZXJMZWZ0QXJyb3cnLCBbODU5OF1dLCBbJ1VwcGVyUmlnaHRBcnJvdycsIFs4NTk5XV0sIFsndXBzaScsIFs5NjVdXSwgWydVcHNpJywgWzk3OF1dLCBbJ3Vwc2loJywgWzk3OF1dLCBbJ1Vwc2lsb24nLCBbOTMzXV0sIFsndXBzaWxvbicsIFs5NjVdXSwgWydVcFRlZUFycm93JywgWzg2MTNdXSwgWydVcFRlZScsIFs4ODY5XV0sIFsndXB1cGFycm93cycsIFs4NjQ4XV0sIFsndXJjb3JuJywgWzg5ODldXSwgWyd1cmNvcm5lcicsIFs4OTg5XV0sIFsndXJjcm9wJywgWzg5NzRdXSwgWydVcmluZycsIFszNjZdXSwgWyd1cmluZycsIFszNjddXSwgWyd1cnRyaScsIFs5NzIxXV0sIFsnVXNjcicsIFsxMTk5ODRdXSwgWyd1c2NyJywgWzEyMDAxMF1dLCBbJ3V0ZG90JywgWzg5NDRdXSwgWydVdGlsZGUnLCBbMzYwXV0sIFsndXRpbGRlJywgWzM2MV1dLCBbJ3V0cmknLCBbOTY1M11dLCBbJ3V0cmlmJywgWzk2NTJdXSwgWyd1dWFycicsIFs4NjQ4XV0sIFsnVXVtbCcsIFsyMjBdXSwgWyd1dW1sJywgWzI1Ml1dLCBbJ3V3YW5nbGUnLCBbMTA2NjNdXSwgWyd2YW5ncnQnLCBbMTA2NTJdXSwgWyd2YXJlcHNpbG9uJywgWzEwMTNdXSwgWyd2YXJrYXBwYScsIFsxMDA4XV0sIFsndmFybm90aGluZycsIFs4NzA5XV0sIFsndmFycGhpJywgWzk4MV1dLCBbJ3ZhcnBpJywgWzk4Ml1dLCBbJ3ZhcnByb3B0bycsIFs4NzMzXV0sIFsndmFycicsIFs4NTk3XV0sIFsndkFycicsIFs4NjYxXV0sIFsndmFycmhvJywgWzEwMDldXSwgWyd2YXJzaWdtYScsIFs5NjJdXSwgWyd2YXJzdWJzZXRuZXEnLCBbODg0MiwgNjUwMjRdXSwgWyd2YXJzdWJzZXRuZXFxJywgWzEwOTU1LCA2NTAyNF1dLCBbJ3ZhcnN1cHNldG5lcScsIFs4ODQzLCA2NTAyNF1dLCBbJ3ZhcnN1cHNldG5lcXEnLCBbMTA5NTYsIDY1MDI0XV0sIFsndmFydGhldGEnLCBbOTc3XV0sIFsndmFydHJpYW5nbGVsZWZ0JywgWzg4ODJdXSwgWyd2YXJ0cmlhbmdsZXJpZ2h0JywgWzg4ODNdXSwgWyd2QmFyJywgWzEwOTg0XV0sIFsnVmJhcicsIFsxMDk4N11dLCBbJ3ZCYXJ2JywgWzEwOTg1XV0sIFsnVmN5JywgWzEwNDJdXSwgWyd2Y3knLCBbMTA3NF1dLCBbJ3ZkYXNoJywgWzg4NjZdXSwgWyd2RGFzaCcsIFs4ODcyXV0sIFsnVmRhc2gnLCBbODg3M11dLCBbJ1ZEYXNoJywgWzg4NzVdXSwgWydWZGFzaGwnLCBbMTA5ODJdXSwgWyd2ZWViYXInLCBbODg5MV1dLCBbJ3ZlZScsIFs4NzQ0XV0sIFsnVmVlJywgWzg4OTddXSwgWyd2ZWVlcScsIFs4Nzk0XV0sIFsndmVsbGlwJywgWzg5NDJdXSwgWyd2ZXJiYXInLCBbMTI0XV0sIFsnVmVyYmFyJywgWzgyMTRdXSwgWyd2ZXJ0JywgWzEyNF1dLCBbJ1ZlcnQnLCBbODIxNF1dLCBbJ1ZlcnRpY2FsQmFyJywgWzg3MzldXSwgWydWZXJ0aWNhbExpbmUnLCBbMTI0XV0sIFsnVmVydGljYWxTZXBhcmF0b3InLCBbMTAwNzJdXSwgWydWZXJ0aWNhbFRpbGRlJywgWzg3NjhdXSwgWydWZXJ5VGhpblNwYWNlJywgWzgyMDJdXSwgWydWZnInLCBbMTIwMDg5XV0sIFsndmZyJywgWzEyMDExNV1dLCBbJ3ZsdHJpJywgWzg4ODJdXSwgWyd2bnN1YicsIFs4ODM0LCA4NDAyXV0sIFsndm5zdXAnLCBbODgzNSwgODQwMl1dLCBbJ1ZvcGYnLCBbMTIwMTQxXV0sIFsndm9wZicsIFsxMjAxNjddXSwgWyd2cHJvcCcsIFs4NzMzXV0sIFsndnJ0cmknLCBbODg4M11dLCBbJ1ZzY3InLCBbMTE5OTg1XV0sIFsndnNjcicsIFsxMjAwMTFdXSwgWyd2c3VibkUnLCBbMTA5NTUsIDY1MDI0XV0sIFsndnN1Ym5lJywgWzg4NDIsIDY1MDI0XV0sIFsndnN1cG5FJywgWzEwOTU2LCA2NTAyNF1dLCBbJ3ZzdXBuZScsIFs4ODQzLCA2NTAyNF1dLCBbJ1Z2ZGFzaCcsIFs4ODc0XV0sIFsndnppZ3phZycsIFsxMDY1MF1dLCBbJ1djaXJjJywgWzM3Ml1dLCBbJ3djaXJjJywgWzM3M11dLCBbJ3dlZGJhcicsIFsxMDg0N11dLCBbJ3dlZGdlJywgWzg3NDNdXSwgWydXZWRnZScsIFs4ODk2XV0sIFsnd2VkZ2VxJywgWzg3OTNdXSwgWyd3ZWllcnAnLCBbODQ3Ml1dLCBbJ1dmcicsIFsxMjAwOTBdXSwgWyd3ZnInLCBbMTIwMTE2XV0sIFsnV29wZicsIFsxMjAxNDJdXSwgWyd3b3BmJywgWzEyMDE2OF1dLCBbJ3dwJywgWzg0NzJdXSwgWyd3cicsIFs4NzY4XV0sIFsnd3JlYXRoJywgWzg3NjhdXSwgWydXc2NyJywgWzExOTk4Nl1dLCBbJ3dzY3InLCBbMTIwMDEyXV0sIFsneGNhcCcsIFs4ODk4XV0sIFsneGNpcmMnLCBbOTcxMV1dLCBbJ3hjdXAnLCBbODg5OV1dLCBbJ3hkdHJpJywgWzk2NjFdXSwgWydYZnInLCBbMTIwMDkxXV0sIFsneGZyJywgWzEyMDExN11dLCBbJ3hoYXJyJywgWzEwMjMxXV0sIFsneGhBcnInLCBbMTAyMzRdXSwgWydYaScsIFs5MjZdXSwgWyd4aScsIFs5NThdXSwgWyd4bGFycicsIFsxMDIyOV1dLCBbJ3hsQXJyJywgWzEwMjMyXV0sIFsneG1hcCcsIFsxMDIzNl1dLCBbJ3huaXMnLCBbODk1NV1dLCBbJ3hvZG90JywgWzEwNzUyXV0sIFsnWG9wZicsIFsxMjAxNDNdXSwgWyd4b3BmJywgWzEyMDE2OV1dLCBbJ3hvcGx1cycsIFsxMDc1M11dLCBbJ3hvdGltZScsIFsxMDc1NF1dLCBbJ3hyYXJyJywgWzEwMjMwXV0sIFsneHJBcnInLCBbMTAyMzNdXSwgWydYc2NyJywgWzExOTk4N11dLCBbJ3hzY3InLCBbMTIwMDEzXV0sIFsneHNxY3VwJywgWzEwNzU4XV0sIFsneHVwbHVzJywgWzEwNzU2XV0sIFsneHV0cmknLCBbOTY1MV1dLCBbJ3h2ZWUnLCBbODg5N11dLCBbJ3h3ZWRnZScsIFs4ODk2XV0sIFsnWWFjdXRlJywgWzIyMV1dLCBbJ3lhY3V0ZScsIFsyNTNdXSwgWydZQWN5JywgWzEwNzFdXSwgWyd5YWN5JywgWzExMDNdXSwgWydZY2lyYycsIFszNzRdXSwgWyd5Y2lyYycsIFszNzVdXSwgWydZY3knLCBbMTA2N11dLCBbJ3ljeScsIFsxMDk5XV0sIFsneWVuJywgWzE2NV1dLCBbJ1lmcicsIFsxMjAwOTJdXSwgWyd5ZnInLCBbMTIwMTE4XV0sIFsnWUljeScsIFsxMDMxXV0sIFsneWljeScsIFsxMTExXV0sIFsnWW9wZicsIFsxMjAxNDRdXSwgWyd5b3BmJywgWzEyMDE3MF1dLCBbJ1lzY3InLCBbMTE5OTg4XV0sIFsneXNjcicsIFsxMjAwMTRdXSwgWydZVWN5JywgWzEwNzBdXSwgWyd5dWN5JywgWzExMDJdXSwgWyd5dW1sJywgWzI1NV1dLCBbJ1l1bWwnLCBbMzc2XV0sIFsnWmFjdXRlJywgWzM3N11dLCBbJ3phY3V0ZScsIFszNzhdXSwgWydaY2Fyb24nLCBbMzgxXV0sIFsnemNhcm9uJywgWzM4Ml1dLCBbJ1pjeScsIFsxMDQ3XV0sIFsnemN5JywgWzEwNzldXSwgWydaZG90JywgWzM3OV1dLCBbJ3pkb3QnLCBbMzgwXV0sIFsnemVldHJmJywgWzg0ODhdXSwgWydaZXJvV2lkdGhTcGFjZScsIFs4MjAzXV0sIFsnWmV0YScsIFs5MThdXSwgWyd6ZXRhJywgWzk1MF1dLCBbJ3pmcicsIFsxMjAxMTldXSwgWydaZnInLCBbODQ4OF1dLCBbJ1pIY3knLCBbMTA0Nl1dLCBbJ3poY3knLCBbMTA3OF1dLCBbJ3ppZ3JhcnInLCBbODY2OV1dLCBbJ3pvcGYnLCBbMTIwMTcxXV0sIFsnWm9wZicsIFs4NDg0XV0sIFsnWnNjcicsIFsxMTk5ODldXSwgWyd6c2NyJywgWzEyMDAxNV1dLCBbJ3p3aicsIFs4MjA1XV0sIFsnenduaicsIFs4MjA0XV1dO1xudmFyIERFQ09ERV9PTkxZX0VOVElUSUVTID0gW1snTmV3TGluZScsIFsxMF1dXTtcbnZhciBhbHBoYUluZGV4ID0ge307XG52YXIgY2hhckluZGV4ID0ge307XG5jcmVhdGVJbmRleGVzKGFscGhhSW5kZXgsIGNoYXJJbmRleCk7XG52YXIgSHRtbDVFbnRpdGllcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIdG1sNUVudGl0aWVzKCkge1xuICAgIH1cbiAgICBIdG1sNUVudGl0aWVzLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8mKCM/W1xcd1xcZF0rKTs/L2csIGZ1bmN0aW9uIChzLCBlbnRpdHkpIHtcbiAgICAgICAgICAgIHZhciBjaHI7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmNoYXJBdCgwKSA9PT0gXCIjXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGVudGl0eS5jaGFyQXQoMSkgPT09ICd4JyA/XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGVudGl0eS5zdWJzdHIoMikudG9Mb3dlckNhc2UoKSwgMTYpIDpcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoZW50aXR5LnN1YnN0cigxKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihjb2RlKSB8fCBjb2RlID49IC0zMjc2OCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA8PSA2NTUzNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNociA9IHN1cnJvZ2F0ZV9wYWlyc18xLmZyb21Db2RlUG9pbnQoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHIgPSBhbHBoYUluZGV4W2VudGl0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hyIHx8IHM7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSHRtbDVFbnRpdGllcy5kZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbDVFbnRpdGllcygpLmRlY29kZShzdHIpO1xuICAgIH07XG4gICAgSHRtbDVFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjaGFySW5mbyA9IGNoYXJJbmRleFtzdHIuY2hhckNvZGVBdChpKV07XG4gICAgICAgICAgICBpZiAoY2hhckluZm8pIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBjaGFySW5mb1tzdHIuY2hhckNvZGVBdChpICsgMSldO1xuICAgICAgICAgICAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbHBoYSA9IGNoYXJJbmZvWycnXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIiZcIiArIGFscGhhICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ICs9IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw1RW50aXRpZXMoKS5lbmNvZGUoc3RyKTtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMucHJvdG90eXBlLmVuY29kZU5vblVURiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgdmFyIGNoYXJJbmZvID0gY2hhckluZGV4W2NdO1xuICAgICAgICAgICAgaWYgKGNoYXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFscGhhID0gY2hhckluZm9bc3RyLmNoYXJDb2RlQXQoaSArIDEpXTtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjaGFySW5mb1snJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCImXCIgKyBhbHBoYSArIFwiO1wiO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjIDwgMzIgfHwgYyA+IDEyNikge1xuICAgICAgICAgICAgICAgIGlmIChjID49IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVGcm9tICYmIGMgPD0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZVRvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgc3Vycm9nYXRlX3BhaXJzXzEuZ2V0Q29kZVBvaW50KHN0ciwgaSkgKyAnOyc7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgYyArICc7JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgSHRtbDVFbnRpdGllcy5lbmNvZGVOb25VVEYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbDVFbnRpdGllcygpLmVuY29kZU5vblVURihzdHIpO1xuICAgIH07XG4gICAgSHRtbDVFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlTm9uQVNDSUkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHN0ckxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIGlmIChjIDw9IDI1NSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzdHJbaSsrXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjID49IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVGcm9tICYmIGMgPD0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZVRvKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBzdXJyb2dhdGVfcGFpcnNfMS5nZXRDb2RlUG9pbnQoc3RyLCBpKSArICc7JztcbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIGMgKyAnOyc7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBIdG1sNUVudGl0aWVzLmVuY29kZU5vbkFTQ0lJID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw1RW50aXRpZXMoKS5lbmNvZGVOb25BU0NJSShzdHIpO1xuICAgIH07XG4gICAgcmV0dXJuIEh0bWw1RW50aXRpZXM7XG59KCkpO1xuZXhwb3J0cy5IdG1sNUVudGl0aWVzID0gSHRtbDVFbnRpdGllcztcbmZ1bmN0aW9uIGNyZWF0ZUluZGV4ZXMoYWxwaGFJbmRleCwgY2hhckluZGV4KSB7XG4gICAgdmFyIGkgPSBFTlRJVElFUy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICB2YXIgX2EgPSBFTlRJVElFU1tpXSwgYWxwaGEgPSBfYVswXSwgX2IgPSBfYVsxXSwgY2hyID0gX2JbMF0sIGNocjIgPSBfYlsxXTtcbiAgICAgICAgdmFyIGFkZENoYXIgPSAoY2hyIDwgMzIgfHwgY2hyID4gMTI2KSB8fCBjaHIgPT09IDYyIHx8IGNociA9PT0gNjAgfHwgY2hyID09PSAzOCB8fCBjaHIgPT09IDM0IHx8IGNociA9PT0gMzk7XG4gICAgICAgIHZhciBjaGFySW5mbyA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGFkZENoYXIpIHtcbiAgICAgICAgICAgIGNoYXJJbmZvID0gY2hhckluZGV4W2Nocl0gPSBjaGFySW5kZXhbY2hyXSB8fCB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hyMikge1xuICAgICAgICAgICAgYWxwaGFJbmRleFthbHBoYV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocikgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjIpO1xuICAgICAgICAgICAgYWRkQ2hhciAmJiAoY2hhckluZm9bY2hyMl0gPSBhbHBoYSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbHBoYUluZGV4W2FscGhhXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyKTtcbiAgICAgICAgICAgIGFkZENoYXIgJiYgKGNoYXJJbmZvWycnXSA9IGFscGhhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpID0gREVDT0RFX09OTFlfRU5USVRJRVMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIF9jID0gREVDT0RFX09OTFlfRU5USVRJRVNbaV0sIGFscGhhID0gX2NbMF0sIF9kID0gX2NbMV0sIGNociA9IF9kWzBdLCBjaHIyID0gX2RbMV07XG4gICAgICAgIGFscGhhSW5kZXhbYWxwaGFdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpICsgKGNocjIgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjIpIDogJycpO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHhtbF9lbnRpdGllc18xID0gcmVxdWlyZShcIi4veG1sLWVudGl0aWVzXCIpO1xuZXhwb3J0cy5YbWxFbnRpdGllcyA9IHhtbF9lbnRpdGllc18xLlhtbEVudGl0aWVzO1xudmFyIGh0bWw0X2VudGl0aWVzXzEgPSByZXF1aXJlKFwiLi9odG1sNC1lbnRpdGllc1wiKTtcbmV4cG9ydHMuSHRtbDRFbnRpdGllcyA9IGh0bWw0X2VudGl0aWVzXzEuSHRtbDRFbnRpdGllcztcbnZhciBodG1sNV9lbnRpdGllc18xID0gcmVxdWlyZShcIi4vaHRtbDUtZW50aXRpZXNcIik7XG5leHBvcnRzLkh0bWw1RW50aXRpZXMgPSBodG1sNV9lbnRpdGllc18xLkh0bWw1RW50aXRpZXM7XG5leHBvcnRzLkFsbEh0bWxFbnRpdGllcyA9IGh0bWw1X2VudGl0aWVzXzEuSHRtbDVFbnRpdGllcztcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5mcm9tQ29kZVBvaW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQgfHwgZnVuY3Rpb24gKGFzdHJhbENvZGVQb2ludCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKE1hdGguZmxvb3IoKGFzdHJhbENvZGVQb2ludCAtIDB4MTAwMDApIC8gMHg0MDApICsgMHhEODAwLCAoYXN0cmFsQ29kZVBvaW50IC0gMHgxMDAwMCkgJSAweDQwMCArIDB4REMwMCk7XG59O1xuZXhwb3J0cy5nZXRDb2RlUG9pbnQgPSBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0ID9cbiAgICBmdW5jdGlvbiAoaW5wdXQsIHBvc2l0aW9uKSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5jb2RlUG9pbnRBdChwb3NpdGlvbik7XG4gICAgfSA6XG4gICAgZnVuY3Rpb24gKGlucHV0LCBwb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gKGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24pIC0gMHhEODAwKSAqIDB4NDAwXG4gICAgICAgICAgICArIGlucHV0LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgfTtcbmV4cG9ydHMuaGlnaFN1cnJvZ2F0ZUZyb20gPSAweEQ4MDA7XG5leHBvcnRzLmhpZ2hTdXJyb2dhdGVUbyA9IDB4REJGRjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHN1cnJvZ2F0ZV9wYWlyc18xID0gcmVxdWlyZShcIi4vc3Vycm9nYXRlLXBhaXJzXCIpO1xudmFyIEFMUEhBX0lOREVYID0ge1xuICAgICcmbHQnOiAnPCcsXG4gICAgJyZndCc6ICc+JyxcbiAgICAnJnF1b3QnOiAnXCInLFxuICAgICcmYXBvcyc6ICdcXCcnLFxuICAgICcmYW1wJzogJyYnLFxuICAgICcmbHQ7JzogJzwnLFxuICAgICcmZ3Q7JzogJz4nLFxuICAgICcmcXVvdDsnOiAnXCInLFxuICAgICcmYXBvczsnOiAnXFwnJyxcbiAgICAnJmFtcDsnOiAnJidcbn07XG52YXIgQ0hBUl9JTkRFWCA9IHtcbiAgICA2MDogJ2x0JyxcbiAgICA2MjogJ2d0JyxcbiAgICAzNDogJ3F1b3QnLFxuICAgIDM5OiAnYXBvcycsXG4gICAgMzg6ICdhbXAnXG59O1xudmFyIENIQVJfU19JTkRFWCA9IHtcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICAnXFwnJzogJyZhcG9zOycsXG4gICAgJyYnOiAnJmFtcDsnXG59O1xudmFyIFhtbEVudGl0aWVzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFhtbEVudGl0aWVzKCkge1xuICAgIH1cbiAgICBYbWxFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWzw+XCInJl0vZywgZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBDSEFSX1NfSU5ERVhbc107XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMuZW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IFhtbEVudGl0aWVzKCkuZW5jb2RlKHN0cik7XG4gICAgfTtcbiAgICBYbWxFbnRpdGllcy5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvJiM/WzAtOWEtekEtWl0rOz8vZywgZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIGlmIChzLmNoYXJBdCgxKSA9PT0gJyMnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBzLmNoYXJBdCgyKS50b0xvd2VyQ2FzZSgpID09PSAneCcgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzLnN1YnN0cigzKSwgMTYpIDpcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocy5zdWJzdHIoMikpO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oY29kZSkgfHwgY29kZSA+PSAtMzI3NjgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPD0gNjU1MzUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1cnJvZ2F0ZV9wYWlyc18xLmZyb21Db2RlUG9pbnQoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEFMUEhBX0lOREVYW3NdIHx8IHM7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IFhtbEVudGl0aWVzKCkuZGVjb2RlKHN0cik7XG4gICAgfTtcbiAgICBYbWxFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlTm9uVVRGID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBDSEFSX0lOREVYW2NdO1xuICAgICAgICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiJlwiICsgYWxwaGEgKyBcIjtcIjtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA8IDMyIHx8IGMgPiAxMjYpIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA+PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlRnJvbSAmJiBjIDw9IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVUbykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIHN1cnJvZ2F0ZV9wYWlyc18xLmdldENvZGVQb2ludChzdHIsIGkpICsgJzsnO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIGMgKyAnOyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIFhtbEVudGl0aWVzLmVuY29kZU5vblVURiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYbWxFbnRpdGllcygpLmVuY29kZU5vblVURihzdHIpO1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMucHJvdG90eXBlLmVuY29kZU5vbkFTQ0lJID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBpZiAoYyA8PSAyNTUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyW2krK107XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA+PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlRnJvbSAmJiBjIDw9IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVUbykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgc3Vycm9nYXRlX3BhaXJzXzEuZ2V0Q29kZVBvaW50KHN0ciwgaSkgKyAnOyc7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBjICsgJzsnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBYbWxFbnRpdGllcy5lbmNvZGVOb25BU0NJSSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYbWxFbnRpdGllcygpLmVuY29kZU5vbkFTQ0lJKHN0cik7XG4gICAgfTtcbiAgICByZXR1cm4gWG1sRW50aXRpZXM7XG59KCkpO1xuZXhwb3J0cy5YbWxFbnRpdGllcyA9IFhtbEVudGl0aWVzO1xuIiwiLypcbiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWxcbipcbiogQ29weXJpZ2h0IChjKSAyMDEzIFRpbSBQZXJyeVxuKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4qL1xuKGZ1bmN0aW9uIChyb290LCBkZWZpbml0aW9uKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoZGVmaW5pdGlvbik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LmxvZyA9IGRlZmluaXRpb24oKTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFNsaWdodGx5IGR1YmlvdXMgdHJpY2tzIHRvIGN1dCBkb3duIG1pbmltaXplZCBmaWxlIHNpemVcbiAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uKCkge307XG4gICAgdmFyIHVuZGVmaW5lZFR5cGUgPSBcInVuZGVmaW5lZFwiO1xuICAgIHZhciBpc0lFID0gKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZFR5cGUpICYmICh0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gdW5kZWZpbmVkVHlwZSkgJiYgKFxuICAgICAgICAvVHJpZGVudFxcL3xNU0lFIC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICApO1xuXG4gICAgdmFyIGxvZ01ldGhvZHMgPSBbXG4gICAgICAgIFwidHJhY2VcIixcbiAgICAgICAgXCJkZWJ1Z1wiLFxuICAgICAgICBcImluZm9cIixcbiAgICAgICAgXCJ3YXJuXCIsXG4gICAgICAgIFwiZXJyb3JcIlxuICAgIF07XG5cbiAgICAvLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2XG4gICAgZnVuY3Rpb24gYmluZE1ldGhvZChvYmosIG1ldGhvZE5hbWUpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9ialttZXRob2ROYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QuYmluZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5iaW5kKG9iaik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKG1ldGhvZCwgb2JqKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KG1ldGhvZCwgW29iaiwgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyYWNlKCkgZG9lc24ndCBwcmludCB0aGUgbWVzc2FnZSBpbiBJRSwgc28gZm9yIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIHdyYXAgaXRcbiAgICBmdW5jdGlvbiB0cmFjZUZvcklFKCkge1xuICAgICAgICBpZiAoY29uc29sZS5sb2cpIHtcbiAgICAgICAgICAgIGlmIChjb25zb2xlLmxvZy5hcHBseSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEluIG9sZCBJRSwgbmF0aXZlIGNvbnNvbGUgbWV0aG9kcyB0aGVtc2VsdmVzIGRvbid0IGhhdmUgYXBwbHkoKS5cbiAgICAgICAgICAgICAgICBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkoY29uc29sZS5sb2csIFtjb25zb2xlLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uc29sZS50cmFjZSkgY29uc29sZS50cmFjZSgpO1xuICAgIH1cblxuICAgIC8vIEJ1aWxkIHRoZSBiZXN0IGxvZ2dpbmcgbWV0aG9kIHBvc3NpYmxlIGZvciB0aGlzIGVudlxuICAgIC8vIFdoZXJldmVyIHBvc3NpYmxlIHdlIHdhbnQgdG8gYmluZCwgbm90IHdyYXAsIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNlc1xuICAgIGZ1bmN0aW9uIHJlYWxNZXRob2QobWV0aG9kTmFtZSkge1xuICAgICAgICBpZiAobWV0aG9kTmFtZSA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgICAgbWV0aG9kTmFtZSA9ICdsb2cnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vIG1ldGhvZCBwb3NzaWJsZSwgZm9yIG5vdyAtIGZpeGVkIGxhdGVyIGJ5IGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXNcbiAgICAgICAgfSBlbHNlIGlmIChtZXRob2ROYW1lID09PSAndHJhY2UnICYmIGlzSUUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZUZvcklFO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnNvbGVbbWV0aG9kTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJpbmRNZXRob2QoY29uc29sZSwgbWV0aG9kTmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uc29sZS5sb2cgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGJpbmRNZXRob2QoY29uc29sZSwgJ2xvZycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGVzZSBwcml2YXRlIGZ1bmN0aW9ucyBhbHdheXMgbmVlZCBgdGhpc2AgdG8gYmUgc2V0IHByb3Blcmx5XG5cbiAgICBmdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHMobGV2ZWwsIGxvZ2dlck5hbWUpIHtcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2dNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IGxvZ01ldGhvZHNbaV07XG4gICAgICAgICAgICB0aGlzW21ldGhvZE5hbWVdID0gKGkgPCBsZXZlbCkgP1xuICAgICAgICAgICAgICAgIG5vb3AgOlxuICAgICAgICAgICAgICAgIHRoaXMubWV0aG9kRmFjdG9yeShtZXRob2ROYW1lLCBsZXZlbCwgbG9nZ2VyTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWZpbmUgbG9nLmxvZyBhcyBhbiBhbGlhcyBmb3IgbG9nLmRlYnVnXG4gICAgICAgIHRoaXMubG9nID0gdGhpcy5kZWJ1ZztcbiAgICB9XG5cbiAgICAvLyBJbiBvbGQgSUUgdmVyc2lvbnMsIHRoZSBjb25zb2xlIGlzbid0IHByZXNlbnQgdW50aWwgeW91IGZpcnN0IG9wZW4gaXQuXG4gICAgLy8gV2UgYnVpbGQgcmVhbE1ldGhvZCgpIHJlcGxhY2VtZW50cyBoZXJlIHRoYXQgcmVnZW5lcmF0ZSBsb2dnaW5nIG1ldGhvZHNcbiAgICBmdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKG1ldGhvZE5hbWUsIGxldmVsLCBsb2dnZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IHVuZGVmaW5lZFR5cGUpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLCBsZXZlbCwgbG9nZ2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpc1ttZXRob2ROYW1lXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIEJ5IGRlZmF1bHQsIHdlIHVzZSBjbG9zZWx5IGJvdW5kIHJlYWwgbWV0aG9kcyB3aGVyZXZlciBwb3NzaWJsZSwgYW5kXG4gICAgLy8gb3RoZXJ3aXNlIHdlIHdhaXQgZm9yIGEgY29uc29sZSB0byBhcHBlYXIsIGFuZCB0aGVuIHRyeSBhZ2Fpbi5cbiAgICBmdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShtZXRob2ROYW1lLCBsZXZlbCwgbG9nZ2VyTmFtZSkge1xuICAgICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgICByZXR1cm4gcmVhbE1ldGhvZChtZXRob2ROYW1lKSB8fFxuICAgICAgICAgICAgICAgZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIExvZ2dlcihuYW1lLCBkZWZhdWx0TGV2ZWwsIGZhY3RvcnkpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBjdXJyZW50TGV2ZWw7XG5cbiAgICAgIHZhciBzdG9yYWdlS2V5ID0gXCJsb2dsZXZlbFwiO1xuICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHN0b3JhZ2VLZXkgKz0gXCI6XCIgKyBuYW1lO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikge1xuICAgICAgICBzdG9yYWdlS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKGxldmVsTnVtKSB7XG4gICAgICAgICAgdmFyIGxldmVsTmFtZSA9IChsb2dNZXRob2RzW2xldmVsTnVtXSB8fCAnc2lsZW50JykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWRUeXBlIHx8ICFzdG9yYWdlS2V5KSByZXR1cm47XG5cbiAgICAgICAgICAvLyBVc2UgbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV0gPSBsZXZlbE5hbWU7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG5cbiAgICAgICAgICAvLyBVc2Ugc2Vzc2lvbiBjb29raWUgYXMgZmFsbGJhY2tcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY29va2llID1cbiAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RvcmFnZUtleSkgKyBcIj1cIiArIGxldmVsTmFtZSArIFwiO1wiO1xuICAgICAgICAgIH0gY2F0Y2ggKGlnbm9yZSkge31cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0UGVyc2lzdGVkTGV2ZWwoKSB7XG4gICAgICAgICAgdmFyIHN0b3JlZExldmVsO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IHVuZGVmaW5lZFR5cGUgfHwgIXN0b3JhZ2VLZXkpIHJldHVybjtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHN0b3JlZExldmVsID0gd2luZG93LmxvY2FsU3RvcmFnZVtzdG9yYWdlS2V5XTtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG5cbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZ1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVkTGV2ZWwgPT09IHVuZGVmaW5lZFR5cGUpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIHZhciBjb29raWUgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llO1xuICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gY29va2llLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0b3JhZ2VLZXkpICsgXCI9XCIpO1xuICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHN0b3JlZExldmVsID0gL14oW147XSspLy5leGVjKGNvb2tpZS5zbGljZShsb2NhdGlvbikpWzFdO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCBsZXZlbCBpcyBub3QgdmFsaWQsIHRyZWF0IGl0IGFzIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cbiAgICAgICAgICBpZiAoc2VsZi5sZXZlbHNbc3RvcmVkTGV2ZWxdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgc3RvcmVkTGV2ZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHN0b3JlZExldmVsO1xuICAgICAgfVxuXG4gICAgICAvKlxuICAgICAgICpcbiAgICAgICAqIFB1YmxpYyBsb2dnZXIgQVBJIC0gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbCBmb3IgZGV0YWlsc1xuICAgICAgICpcbiAgICAgICAqL1xuXG4gICAgICBzZWxmLm5hbWUgPSBuYW1lO1xuXG4gICAgICBzZWxmLmxldmVscyA9IHsgXCJUUkFDRVwiOiAwLCBcIkRFQlVHXCI6IDEsIFwiSU5GT1wiOiAyLCBcIldBUk5cIjogMyxcbiAgICAgICAgICBcIkVSUk9SXCI6IDQsIFwiU0lMRU5UXCI6IDV9O1xuXG4gICAgICBzZWxmLm1ldGhvZEZhY3RvcnkgPSBmYWN0b3J5IHx8IGRlZmF1bHRNZXRob2RGYWN0b3J5O1xuXG4gICAgICBzZWxmLmdldExldmVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBjdXJyZW50TGV2ZWw7XG4gICAgICB9O1xuXG4gICAgICBzZWxmLnNldExldmVsID0gZnVuY3Rpb24gKGxldmVsLCBwZXJzaXN0KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBsZXZlbCA9PT0gXCJzdHJpbmdcIiAmJiBzZWxmLmxldmVsc1tsZXZlbC50b1VwcGVyQ2FzZSgpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGxldmVsID0gc2VsZi5sZXZlbHNbbGV2ZWwudG9VcHBlckNhc2UoKV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwibnVtYmVyXCIgJiYgbGV2ZWwgPj0gMCAmJiBsZXZlbCA8PSBzZWxmLmxldmVscy5TSUxFTlQpIHtcbiAgICAgICAgICAgICAgY3VycmVudExldmVsID0gbGV2ZWw7XG4gICAgICAgICAgICAgIGlmIChwZXJzaXN0ICE9PSBmYWxzZSkgeyAgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgICAgICAgICAgICAgICAgcGVyc2lzdExldmVsSWZQb3NzaWJsZShsZXZlbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwoc2VsZiwgbGV2ZWwsIG5hbWUpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09IHVuZGVmaW5lZFR5cGUgJiYgbGV2ZWwgPCBzZWxmLmxldmVscy5TSUxFTlQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBcIk5vIGNvbnNvbGUgYXZhaWxhYmxlIGZvciBsb2dnaW5nXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBcImxvZy5zZXRMZXZlbCgpIGNhbGxlZCB3aXRoIGludmFsaWQgbGV2ZWw6IFwiICsgbGV2ZWw7XG4gICAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2VsZi5zZXREZWZhdWx0TGV2ZWwgPSBmdW5jdGlvbiAobGV2ZWwpIHtcbiAgICAgICAgICBpZiAoIWdldFBlcnNpc3RlZExldmVsKCkpIHtcbiAgICAgICAgICAgICAgc2VsZi5zZXRMZXZlbChsZXZlbCwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZW5hYmxlQWxsID0gZnVuY3Rpb24ocGVyc2lzdCkge1xuICAgICAgICAgIHNlbGYuc2V0TGV2ZWwoc2VsZi5sZXZlbHMuVFJBQ0UsIHBlcnNpc3QpO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5kaXNhYmxlQWxsID0gZnVuY3Rpb24ocGVyc2lzdCkge1xuICAgICAgICAgIHNlbGYuc2V0TGV2ZWwoc2VsZi5sZXZlbHMuU0lMRU5ULCBwZXJzaXN0KTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEluaXRpYWxpemUgd2l0aCB0aGUgcmlnaHQgbGV2ZWxcbiAgICAgIHZhciBpbml0aWFsTGV2ZWwgPSBnZXRQZXJzaXN0ZWRMZXZlbCgpO1xuICAgICAgaWYgKGluaXRpYWxMZXZlbCA9PSBudWxsKSB7XG4gICAgICAgICAgaW5pdGlhbExldmVsID0gZGVmYXVsdExldmVsID09IG51bGwgPyBcIldBUk5cIiA6IGRlZmF1bHRMZXZlbDtcbiAgICAgIH1cbiAgICAgIHNlbGYuc2V0TGV2ZWwoaW5pdGlhbExldmVsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKlxuICAgICAqIFRvcC1sZXZlbCBBUElcbiAgICAgKlxuICAgICAqL1xuXG4gICAgdmFyIGRlZmF1bHRMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbiAgICB2YXIgX2xvZ2dlcnNCeU5hbWUgPSB7fTtcbiAgICBkZWZhdWx0TG9nZ2VyLmdldExvZ2dlciA9IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lKSB7XG4gICAgICAgIGlmICgodHlwZW9mIG5hbWUgIT09IFwic3ltYm9sXCIgJiYgdHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHx8IG5hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXTtcbiAgICAgICAgaWYgKCFsb2dnZXIpIHtcbiAgICAgICAgICBsb2dnZXIgPSBfbG9nZ2Vyc0J5TmFtZVtuYW1lXSA9IG5ldyBMb2dnZXIoXG4gICAgICAgICAgICBuYW1lLCBkZWZhdWx0TG9nZ2VyLmdldExldmVsKCksIGRlZmF1bHRMb2dnZXIubWV0aG9kRmFjdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvZ2dlcjtcbiAgICB9O1xuXG4gICAgLy8gR3JhYiB0aGUgY3VycmVudCBnbG9iYWwgbG9nIHZhcmlhYmxlIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG4gICAgdmFyIF9sb2cgPSAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSkgPyB3aW5kb3cubG9nIDogdW5kZWZpbmVkO1xuICAgIGRlZmF1bHRMb2dnZXIubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkVHlwZSAmJlxuICAgICAgICAgICAgICAgd2luZG93LmxvZyA9PT0gZGVmYXVsdExvZ2dlcikge1xuICAgICAgICAgICAgd2luZG93LmxvZyA9IF9sb2c7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVmYXVsdExvZ2dlcjtcbiAgICB9O1xuXG4gICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXJzID0gZnVuY3Rpb24gZ2V0TG9nZ2VycygpIHtcbiAgICAgICAgcmV0dXJuIF9sb2dnZXJzQnlOYW1lO1xuICAgIH07XG5cbiAgICAvLyBFUzYgZGVmYXVsdCBleHBvcnQsIGZvciBjb21wYXRpYmlsaXR5XG4gICAgZGVmYXVsdExvZ2dlclsnZGVmYXVsdCddID0gZGVmYXVsdExvZ2dlcjtcblxuICAgIHJldHVybiBkZWZhdWx0TG9nZ2VyO1xufSkpO1xuIiwiLyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS40LjEgYnkgQG1hdGhpYXMgKi9cbjsoZnVuY3Rpb24ocm9vdCkge1xuXG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi9cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJlxuXHRcdCFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdHZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiZcblx0XHQhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKFxuXHRcdGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWxcblx0KSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LlxuXHQgKiBAbmFtZSBwdW55Y29kZVxuXHQgKiBAdHlwZSBPYmplY3Rcblx0ICovXG5cdHZhciBwdW55Y29kZSxcblxuXHQvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovXG5cdG1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTFcblxuXHQvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovXG5cdGJhc2UgPSAzNixcblx0dE1pbiA9IDEsXG5cdHRNYXggPSAyNixcblx0c2tldyA9IDM4LFxuXHRkYW1wID0gNzAwLFxuXHRpbml0aWFsQmlhcyA9IDcyLFxuXHRpbml0aWFsTiA9IDEyOCwgLy8gMHg4MFxuXHRkZWxpbWl0ZXIgPSAnLScsIC8vICdcXHgyRCdcblxuXHQvKiogUmVndWxhciBleHByZXNzaW9ucyAqL1xuXHRyZWdleFB1bnljb2RlID0gL154bi0tLyxcblx0cmVnZXhOb25BU0NJSSA9IC9bXlxceDIwLVxceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzXG5cdHJlZ2V4U2VwYXJhdG9ycyA9IC9bXFx4MkVcXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csIC8vIFJGQyAzNDkwIHNlcGFyYXRvcnNcblxuXHQvKiogRXJyb3IgbWVzc2FnZXMgKi9cblx0ZXJyb3JzID0ge1xuXHRcdCdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsXG5cdFx0J25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJyxcblx0XHQnaW52YWxpZC1pbnB1dCc6ICdJbnZhbGlkIGlucHV0J1xuXHR9LFxuXG5cdC8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi9cblx0YmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLFxuXHRmbG9vciA9IE1hdGguZmxvb3IsXG5cdHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsXG5cblx0LyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqL1xuXHRrZXk7XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS5cblx0ICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXJyb3IodHlwZSkge1xuXHRcdHRocm93IG5ldyBSYW5nZUVycm9yKGVycm9yc1t0eXBlXSk7XG5cdH1cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheVxuXHQgKiBpdGVtLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IGFycmF5IG9mIHZhbHVlcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXAoYXJyYXksIGZuKSB7XG5cdFx0dmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0d2hpbGUgKGxlbmd0aC0tKSB7XG5cdFx0XHRyZXN1bHRbbGVuZ3RoXSA9IGZuKGFycmF5W2xlbmd0aF0pO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgc2ltcGxlIGBBcnJheSNtYXBgLWxpa2Ugd3JhcHBlciB0byB3b3JrIHdpdGggZG9tYWluIG5hbWUgc3RyaW5ncyBvciBlbWFpbFxuXHQgKiBhZGRyZXNzZXMuXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeVxuXHQgKiBjaGFyYWN0ZXIuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgc3RyaW5nIG9mIGNoYXJhY3RlcnMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrXG5cdCAqIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwRG9tYWluKHN0cmluZywgZm4pIHtcblx0XHR2YXIgcGFydHMgPSBzdHJpbmcuc3BsaXQoJ0AnKTtcblx0XHR2YXIgcmVzdWx0ID0gJyc7XG5cdFx0aWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcblx0XHRcdC8vIEluIGVtYWlsIGFkZHJlc3Nlcywgb25seSB0aGUgZG9tYWluIG5hbWUgc2hvdWxkIGJlIHB1bnljb2RlZC4gTGVhdmVcblx0XHRcdC8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuXG5cdFx0XHRyZXN1bHQgPSBwYXJ0c1swXSArICdAJztcblx0XHRcdHN0cmluZyA9IHBhcnRzWzFdO1xuXHRcdH1cblx0XHQvLyBBdm9pZCBgc3BsaXQocmVnZXgpYCBmb3IgSUU4IGNvbXBhdGliaWxpdHkuIFNlZSAjMTcuXG5cdFx0c3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocmVnZXhTZXBhcmF0b3JzLCAnXFx4MkUnKTtcblx0XHR2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7XG5cdFx0dmFyIGVuY29kZWQgPSBtYXAobGFiZWxzLCBmbikuam9pbignLicpO1xuXHRcdHJldHVybiByZXN1bHQgKyBlbmNvZGVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgbnVtZXJpYyBjb2RlIHBvaW50cyBvZiBlYWNoIFVuaWNvZGVcblx0ICogY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuIFdoaWxlIEphdmFTY3JpcHQgdXNlcyBVQ1MtMiBpbnRlcm5hbGx5LFxuXHQgKiB0aGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhIHBhaXIgb2Ygc3Vycm9nYXRlIGhhbHZlcyAoZWFjaCBvZiB3aGljaFxuXHQgKiBVQ1MtMiBleHBvc2VzIGFzIHNlcGFyYXRlIGNoYXJhY3RlcnMpIGludG8gYSBzaW5nbGUgY29kZSBwb2ludCxcblx0ICogbWF0Y2hpbmcgVVRGLTE2LlxuXHQgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmVuY29kZWBcblx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGRlY29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nIFRoZSBVbmljb2RlIGlucHV0IHN0cmluZyAoVUNTLTIpLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgb2YgY29kZSBwb2ludHMuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZGVjb2RlKHN0cmluZykge1xuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAgY291bnRlciA9IDAsXG5cdFx0ICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGgsXG5cdFx0ICAgIHZhbHVlLFxuXHRcdCAgICBleHRyYTtcblx0XHR3aGlsZSAoY291bnRlciA8IGxlbmd0aCkge1xuXHRcdFx0dmFsdWUgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO1xuXHRcdFx0aWYgKHZhbHVlID49IDB4RDgwMCAmJiB2YWx1ZSA8PSAweERCRkYgJiYgY291bnRlciA8IGxlbmd0aCkge1xuXHRcdFx0XHQvLyBoaWdoIHN1cnJvZ2F0ZSwgYW5kIHRoZXJlIGlzIGEgbmV4dCBjaGFyYWN0ZXJcblx0XHRcdFx0ZXh0cmEgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO1xuXHRcdFx0XHRpZiAoKGV4dHJhICYgMHhGQzAwKSA9PSAweERDMDApIHsgLy8gbG93IHN1cnJvZ2F0ZVxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKCgodmFsdWUgJiAweDNGRikgPDwgMTApICsgKGV4dHJhICYgMHgzRkYpICsgMHgxMDAwMCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gdW5tYXRjaGVkIHN1cnJvZ2F0ZTsgb25seSBhcHBlbmQgdGhpcyBjb2RlIHVuaXQsIGluIGNhc2UgdGhlIG5leHRcblx0XHRcdFx0XHQvLyBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXJcblx0XHRcdFx0XHRvdXRwdXQucHVzaCh2YWx1ZSk7XG5cdFx0XHRcdFx0Y291bnRlci0tO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvdXRwdXQucHVzaCh2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIHN0cmluZyBiYXNlZCBvbiBhbiBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmRlY29kZWBcblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZW5jb2RlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGNvZGVQb2ludHMgVGhlIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBuZXcgVW5pY29kZSBzdHJpbmcgKFVDUy0yKS5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpIHtcblx0XHRyZXR1cm4gbWFwKGFycmF5LCBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0dmFyIG91dHB1dCA9ICcnO1xuXHRcdFx0aWYgKHZhbHVlID4gMHhGRkZGKSB7XG5cdFx0XHRcdHZhbHVlIC09IDB4MTAwMDA7XG5cdFx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApO1xuXHRcdFx0XHR2YWx1ZSA9IDB4REMwMCB8IHZhbHVlICYgMHgzRkY7XG5cdFx0XHR9XG5cdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlKTtcblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fSkuam9pbignJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBiYXNpYyBjb2RlIHBvaW50IGludG8gYSBkaWdpdC9pbnRlZ2VyLlxuXHQgKiBAc2VlIGBkaWdpdFRvQmFzaWMoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGNvZGVQb2ludCBUaGUgYmFzaWMgbnVtZXJpYyBjb2RlIHBvaW50IHZhbHVlLlxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQgKGZvciB1c2UgaW5cblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpbiB0aGUgcmFuZ2UgYDBgIHRvIGBiYXNlIC0gMWAsIG9yIGBiYXNlYCBpZlxuXHQgKiB0aGUgY29kZSBwb2ludCBkb2VzIG5vdCByZXByZXNlbnQgYSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2ljVG9EaWdpdChjb2RlUG9pbnQpIHtcblx0XHRpZiAoY29kZVBvaW50IC0gNDggPCAxMCkge1xuXHRcdFx0cmV0dXJuIGNvZGVQb2ludCAtIDIyO1xuXHRcdH1cblx0XHRpZiAoY29kZVBvaW50IC0gNjUgPCAyNikge1xuXHRcdFx0cmV0dXJuIGNvZGVQb2ludCAtIDY1O1xuXHRcdH1cblx0XHRpZiAoY29kZVBvaW50IC0gOTcgPCAyNikge1xuXHRcdFx0cmV0dXJuIGNvZGVQb2ludCAtIDk3O1xuXHRcdH1cblx0XHRyZXR1cm4gYmFzZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGRpZ2l0L2ludGVnZXIgaW50byBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEBzZWUgYGJhc2ljVG9EaWdpdCgpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGlnaXQgVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYmFzaWMgY29kZSBwb2ludCB3aG9zZSB2YWx1ZSAod2hlbiB1c2VkIGZvclxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGlzIGBkaWdpdGAsIHdoaWNoIG5lZWRzIHRvIGJlIGluIHRoZSByYW5nZVxuXHQgKiBgMGAgdG8gYGJhc2UgLSAxYC4gSWYgYGZsYWdgIGlzIG5vbi16ZXJvLCB0aGUgdXBwZXJjYXNlIGZvcm0gaXNcblx0ICogdXNlZDsgZWxzZSwgdGhlIGxvd2VyY2FzZSBmb3JtIGlzIHVzZWQuIFRoZSBiZWhhdmlvciBpcyB1bmRlZmluZWRcblx0ICogaWYgYGZsYWdgIGlzIG5vbi16ZXJvIGFuZCBgZGlnaXRgIGhhcyBubyB1cHBlcmNhc2UgZm9ybS5cblx0ICovXG5cdGZ1bmN0aW9uIGRpZ2l0VG9CYXNpYyhkaWdpdCwgZmxhZykge1xuXHRcdC8vICAwLi4yNSBtYXAgdG8gQVNDSUkgYS4ueiBvciBBLi5aXG5cdFx0Ly8gMjYuLjM1IG1hcCB0byBBU0NJSSAwLi45XG5cdFx0cmV0dXJuIGRpZ2l0ICsgMjIgKyA3NSAqIChkaWdpdCA8IDI2KSAtICgoZmxhZyAhPSAwKSA8PCA1KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBCaWFzIGFkYXB0YXRpb24gZnVuY3Rpb24gYXMgcGVyIHNlY3Rpb24gMy40IG9mIFJGQyAzNDkyLlxuXHQgKiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7XG5cdFx0dmFyIGsgPSAwO1xuXHRcdGRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7XG5cdFx0ZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpO1xuXHRcdGZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7XG5cdFx0XHRkZWx0YSA9IGZsb29yKGRlbHRhIC8gYmFzZU1pbnVzVE1pbik7XG5cdFx0fVxuXHRcdHJldHVybiBmbG9vcihrICsgKGJhc2VNaW51c1RNaW4gKyAxKSAqIGRlbHRhIC8gKGRlbHRhICsgc2tldykpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scyB0byBhIHN0cmluZyBvZiBVbmljb2RlXG5cdCAqIHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuXHRcdC8vIERvbid0IHVzZSBVQ1MtMlxuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXG5cdFx0ICAgIG91dCxcblx0XHQgICAgaSA9IDAsXG5cdFx0ICAgIG4gPSBpbml0aWFsTixcblx0XHQgICAgYmlhcyA9IGluaXRpYWxCaWFzLFxuXHRcdCAgICBiYXNpYyxcblx0XHQgICAgaixcblx0XHQgICAgaW5kZXgsXG5cdFx0ICAgIG9sZGksXG5cdFx0ICAgIHcsXG5cdFx0ICAgIGssXG5cdFx0ICAgIGRpZ2l0LFxuXHRcdCAgICB0LFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgYmFzZU1pbnVzVDtcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZVxuXHRcdC8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5XG5cdFx0Ly8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuXG5cblx0XHRiYXNpYyA9IGlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7XG5cdFx0aWYgKGJhc2ljIDwgMCkge1xuXHRcdFx0YmFzaWMgPSAwO1xuXHRcdH1cblxuXHRcdGZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7XG5cdFx0XHQvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnRcblx0XHRcdGlmIChpbnB1dC5jaGFyQ29kZUF0KGopID49IDB4ODApIHtcblx0XHRcdFx0ZXJyb3IoJ25vdC1iYXNpYycpO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBkZWNvZGluZyBsb29wOiBzdGFydCBqdXN0IGFmdGVyIHRoZSBsYXN0IGRlbGltaXRlciBpZiBhbnkgYmFzaWMgY29kZVxuXHRcdC8vIHBvaW50cyB3ZXJlIGNvcGllZDsgc3RhcnQgYXQgdGhlIGJlZ2lubmluZyBvdGhlcndpc2UuXG5cblx0XHRmb3IgKGluZGV4ID0gYmFzaWMgPiAwID8gYmFzaWMgKyAxIDogMDsgaW5kZXggPCBpbnB1dExlbmd0aDsgLyogbm8gZmluYWwgZXhwcmVzc2lvbiAqLykge1xuXG5cdFx0XHQvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuXG5cdFx0XHQvLyBEZWNvZGUgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlciBpbnRvIGBkZWx0YWAsXG5cdFx0XHQvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llclxuXHRcdFx0Ly8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmdcblx0XHRcdC8vIHZhbHVlIGF0IHRoZSBlbmQgdG8gb2J0YWluIGBkZWx0YWAuXG5cdFx0XHRmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cblx0XHRcdFx0aWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRpZ2l0ID0gYmFzaWNUb0RpZ2l0KGlucHV0LmNoYXJDb2RlQXQoaW5kZXgrKykpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA+PSBiYXNlIHx8IGRpZ2l0ID4gZmxvb3IoKG1heEludCAtIGkpIC8gdykpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGkgKz0gZGlnaXQgKiB3O1xuXHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPCB0KSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdGlmICh3ID4gZmxvb3IobWF4SW50IC8gYmFzZU1pbnVzVCkpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHcgKj0gYmFzZU1pbnVzVDtcblxuXHRcdFx0fVxuXG5cdFx0XHRvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTtcblx0XHRcdGJpYXMgPSBhZGFwdChpIC0gb2xkaSwgb3V0LCBvbGRpID09IDApO1xuXG5cdFx0XHQvLyBgaWAgd2FzIHN1cHBvc2VkIHRvIHdyYXAgYXJvdW5kIGZyb20gYG91dGAgdG8gYDBgLFxuXHRcdFx0Ly8gaW5jcmVtZW50aW5nIGBuYCBlYWNoIHRpbWUsIHNvIHdlJ2xsIGZpeCB0aGF0IG5vdzpcblx0XHRcdGlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdG4gKz0gZmxvb3IoaSAvIG91dCk7XG5cdFx0XHRpICU9IG91dDtcblxuXHRcdFx0Ly8gSW5zZXJ0IGBuYCBhdCBwb3NpdGlvbiBgaWAgb2YgdGhlIG91dHB1dFxuXHRcdFx0b3V0cHV0LnNwbGljZShpKyssIDAsIG4pO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVjczJlbmNvZGUob3V0cHV0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYVxuXHQgKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHtcblx0XHR2YXIgbixcblx0XHQgICAgZGVsdGEsXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50LFxuXHRcdCAgICBiYXNpY0xlbmd0aCxcblx0XHQgICAgYmlhcyxcblx0XHQgICAgaixcblx0XHQgICAgbSxcblx0XHQgICAgcSxcblx0XHQgICAgayxcblx0XHQgICAgdCxcblx0XHQgICAgY3VycmVudFZhbHVlLFxuXHRcdCAgICBvdXRwdXQgPSBbXSxcblx0XHQgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi9cblx0XHQgICAgaW5wdXRMZW5ndGgsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsXG5cdFx0ICAgIGJhc2VNaW51c1QsXG5cdFx0ICAgIHFNaW51c1Q7XG5cblx0XHQvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBVbmljb2RlXG5cdFx0aW5wdXQgPSB1Y3MyZGVjb2RlKGlucHV0KTtcblxuXHRcdC8vIENhY2hlIHRoZSBsZW5ndGhcblx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuXHRcdC8vIEluaXRpYWxpemUgdGhlIHN0YXRlXG5cdFx0biA9IGluaXRpYWxOO1xuXHRcdGRlbHRhID0gMDtcblx0XHRiaWFzID0gaW5pdGlhbEJpYXM7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzXG5cdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHtcblx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGhhbmRsZWRDUENvdW50ID0gYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoO1xuXG5cdFx0Ly8gYGhhbmRsZWRDUENvdW50YCBpcyB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIGhhbmRsZWQ7XG5cdFx0Ly8gYGJhc2ljTGVuZ3RoYCBpcyB0aGUgbnVtYmVyIG9mIGJhc2ljIGNvZGUgcG9pbnRzLlxuXG5cdFx0Ly8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyXG5cdFx0aWYgKGJhc2ljTGVuZ3RoKSB7XG5cdFx0XHRvdXRwdXQucHVzaChkZWxpbWl0ZXIpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZW5jb2RpbmcgbG9vcDpcblx0XHR3aGlsZSAoaGFuZGxlZENQQ291bnQgPCBpbnB1dExlbmd0aCkge1xuXG5cdFx0XHQvLyBBbGwgbm9uLWJhc2ljIGNvZGUgcG9pbnRzIDwgbiBoYXZlIGJlZW4gaGFuZGxlZCBhbHJlYWR5LiBGaW5kIHRoZSBuZXh0XG5cdFx0XHQvLyBsYXJnZXIgb25lOlxuXHRcdFx0Zm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7XG5cdFx0XHRcdFx0bSA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sXG5cdFx0XHQvLyBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvd1xuXHRcdFx0aGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxO1xuXHRcdFx0aWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdGRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7XG5cdFx0XHRuID0gbTtcblxuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7XG5cdFx0XHRcdFx0Ly8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXJcblx0XHRcdFx0XHRmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cdFx0XHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblx0XHRcdFx0XHRcdGlmIChxIDwgdCkge1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHFNaW51c1QgPSBxIC0gdDtcblx0XHRcdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKFxuXHRcdFx0XHRcdFx0XHRzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHQgKyBxTWludXNUICUgYmFzZU1pbnVzVCwgMCkpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7XG5cdFx0XHRcdFx0YmlhcyA9IGFkYXB0KGRlbHRhLCBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsIGhhbmRsZWRDUENvdW50ID09IGJhc2ljTGVuZ3RoKTtcblx0XHRcdFx0XHRkZWx0YSA9IDA7XG5cdFx0XHRcdFx0KytoYW5kbGVkQ1BDb3VudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQrK2RlbHRhO1xuXHRcdFx0KytuO1xuXG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQuam9pbignJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzc1xuXHQgKiB0byBVbmljb2RlLiBPbmx5IHRoZSBQdW55Y29kZWQgcGFydHMgb2YgdGhlIGlucHV0IHdpbGwgYmUgY29udmVydGVkLCBpLmUuXG5cdCAqIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IG9uIGEgc3RyaW5nIHRoYXQgaGFzIGFscmVhZHkgYmVlblxuXHQgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGVkIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogY29udmVydCB0byBVbmljb2RlLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgVW5pY29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gUHVueWNvZGVcblx0ICogc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9Vbmljb2RlKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyBkZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgVW5pY29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBQdW55Y29kZS4gT25seSB0aGUgbm9uLUFTQ0lJIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB3aWxsIGJlIGNvbnZlcnRlZCxcblx0ICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluXG5cdCAqIEFTQ0lJLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGFcblx0ICogVW5pY29kZSBzdHJpbmcuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBQdW55Y29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gZG9tYWluIG5hbWUgb3Jcblx0ICogZW1haWwgYWRkcmVzcy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleE5vbkFTQ0lJLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/ICd4bi0tJyArIGVuY29kZShzdHJpbmcpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqIERlZmluZSB0aGUgcHVibGljIEFQSSAqL1xuXHRwdW55Y29kZSA9IHtcblx0XHQvKipcblx0XHQgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgU3RyaW5nXG5cdFx0ICovXG5cdFx0J3ZlcnNpb24nOiAnMS40LjEnLFxuXHRcdC8qKlxuXHRcdCAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyXG5cdFx0ICogcmVwcmVzZW50YXRpb24gKFVDUy0yKSB0byBVbmljb2RlIGNvZGUgcG9pbnRzLCBhbmQgYmFjay5cblx0XHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBPYmplY3Rcblx0XHQgKi9cblx0XHQndWNzMic6IHtcblx0XHRcdCdkZWNvZGUnOiB1Y3MyZGVjb2RlLFxuXHRcdFx0J2VuY29kZSc6IHVjczJlbmNvZGVcblx0XHR9LFxuXHRcdCdkZWNvZGUnOiBkZWNvZGUsXG5cdFx0J2VuY29kZSc6IGVuY29kZSxcblx0XHQndG9BU0NJSSc6IHRvQVNDSUksXG5cdFx0J3RvVW5pY29kZSc6IHRvVW5pY29kZVxuXHR9O1xuXG5cdC8qKiBFeHBvc2UgYHB1bnljb2RlYCAqL1xuXHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRpZiAoXG5cdFx0dHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiZcblx0XHRkZWZpbmUuYW1kXG5cdCkge1xuXHRcdGRlZmluZSgncHVueWNvZGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBwdW55Y29kZTtcblx0XHR9KTtcblx0fSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG5cdFx0aWYgKG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzKSB7XG5cdFx0XHQvLyBpbiBOb2RlLmpzLCBpby5qcywgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAoa2V5IGluIHB1bnljb2RlKSB7XG5cdFx0XHRcdHB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Ly8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlclxuXHRcdHJvb3QucHVueWNvZGUgPSBwdW55Y29kZTtcblx0fVxuXG59KHRoaXMpKTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcbi8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDdcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIHZhciBvYmogPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcbiAgcXMgPSBxcy5zcGxpdChzZXApO1xuXG4gIHZhciBtYXhLZXlzID0gMTAwMDtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMubWF4S2V5cyA9PT0gJ251bWJlcicpIHtcbiAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuICB9XG5cbiAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcbiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG4gIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7XG4gICAgbGVuID0gbWF4S2V5cztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG4gICAgICAgIGlkeCA9IHguaW5kZXhPZihlcSksXG4gICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIG9ialtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgIG9ialtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RyaW5naWZ5UHJpbWl0aXZlID0gZnVuY3Rpb24odikge1xuICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiB2O1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gdiA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIGlzRmluaXRlKHYpID8gdiA6ICcnO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnJztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIGlmIChvYmogPT09IG51bGwpIHtcbiAgICBvYmogPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbWFwKG9iamVjdEtleXMob2JqKSwgZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGtzID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShrKSkgKyBlcTtcbiAgICAgIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgICAgcmV0dXJuIG1hcChvYmpba10sIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcbiAgICAgICAgfSkuam9pbihzZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcbiAgICAgIH1cbiAgICB9KS5qb2luKHNlcCk7XG5cbiAgfVxuXG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArXG4gICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbmZ1bmN0aW9uIG1hcCAoeHMsIGYpIHtcbiAgaWYgKHhzLm1hcCkgcmV0dXJuIHhzLm1hcChmKTtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVzLnB1c2goZih4c1tpXSwgaSkpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgcmVzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIiwiLyogc29ja2pzLWNsaWVudCB2MS41LjAgfCBodHRwOi8vc29ja2pzLm9yZyB8IE1JVCBsaWNlbnNlICovXG4oZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5Tb2NrSlMgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHRyYW5zcG9ydExpc3QgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC1saXN0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9tYWluJykodHJhbnNwb3J0TGlzdCk7XG5cbi8vIFRPRE8gY2FuJ3QgZ2V0IHJpZCBvZiB0aGlzIHVudGlsIGFsbCBzZXJ2ZXJzIGRvXG5pZiAoJ19zb2NranNfb25sb2FkJyBpbiBnbG9iYWwpIHtcbiAgc2V0VGltZW91dChnbG9iYWwuX3NvY2tqc19vbmxvYWQsIDEpO1xufVxuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuL21haW5cIjoxNCxcIi4vdHJhbnNwb3J0LWxpc3RcIjoxNn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50JylcbiAgO1xuXG5mdW5jdGlvbiBDbG9zZUV2ZW50KCkge1xuICBFdmVudC5jYWxsKHRoaXMpO1xuICB0aGlzLmluaXRFdmVudCgnY2xvc2UnLCBmYWxzZSwgZmFsc2UpO1xuICB0aGlzLndhc0NsZWFuID0gZmFsc2U7XG4gIHRoaXMuY29kZSA9IDA7XG4gIHRoaXMucmVhc29uID0gJyc7XG59XG5cbmluaGVyaXRzKENsb3NlRXZlbnQsIEV2ZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbG9zZUV2ZW50O1xuXG59LHtcIi4vZXZlbnRcIjo0LFwiaW5oZXJpdHNcIjo1N31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2V2ZW50dGFyZ2V0JylcbiAgO1xuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG59XG5cbmluaGVyaXRzKEV2ZW50RW1pdHRlciwgRXZlbnRUYXJnZXQpO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHR5cGUpIHtcbiAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJzW3R5cGVdO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICB9XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgICAsIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICBzZWxmLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICB0aGlzLm9uKHR5cGUsIGcpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0eXBlID0gYXJndW1lbnRzWzBdO1xuICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdO1xuICBpZiAoIWxpc3RlbmVycykge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBlcXVpdmFsZW50IG9mIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobCAtIDEpO1xuICBmb3IgKHZhciBhaSA9IDE7IGFpIDwgbDsgYWkrKykge1xuICAgIGFyZ3NbYWkgLSAxXSA9IGFyZ3VtZW50c1thaV07XG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gRXZlbnRUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG5cbm1vZHVsZS5leHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxufSx7XCIuL2V2ZW50dGFyZ2V0XCI6NSxcImluaGVyaXRzXCI6NTd9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gRXZlbnQoZXZlbnRUeXBlKSB7XG4gIHRoaXMudHlwZSA9IGV2ZW50VHlwZTtcbn1cblxuRXZlbnQucHJvdG90eXBlLmluaXRFdmVudCA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgY2FuQnViYmxlLCBjYW5jZWxhYmxlKSB7XG4gIHRoaXMudHlwZSA9IGV2ZW50VHlwZTtcbiAgdGhpcy5idWJibGVzID0gY2FuQnViYmxlO1xuICB0aGlzLmNhbmNlbGFibGUgPSBjYW5jZWxhYmxlO1xuICB0aGlzLnRpbWVTdGFtcCA9ICtuZXcgRGF0ZSgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbigpIHt9O1xuRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7fTtcblxuRXZlbnQuQ0FQVFVSSU5HX1BIQVNFID0gMTtcbkV2ZW50LkFUX1RBUkdFVCA9IDI7XG5FdmVudC5CVUJCTElOR19QSEFTRSA9IDM7XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnQ7XG5cbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vKiBTaW1wbGlmaWVkIGltcGxlbWVudGF0aW9uIG9mIERPTTIgRXZlbnRUYXJnZXQuXG4gKiAgIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLUV2ZW50cy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBFdmVudFRhcmdldCgpIHtcbiAgdGhpcy5fbGlzdGVuZXJzID0ge307XG59XG5cbkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIShldmVudFR5cGUgaW4gdGhpcy5fbGlzdGVuZXJzKSkge1xuICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdID0gW107XG4gIH1cbiAgdmFyIGFyciA9IHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdO1xuICAvLyAjNFxuICBpZiAoYXJyLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuICAgIC8vIE1ha2UgYSBjb3B5IHNvIGFzIG5vdCB0byBpbnRlcmZlcmUgd2l0aCBhIGN1cnJlbnQgZGlzcGF0Y2hFdmVudC5cbiAgICBhcnIgPSBhcnIuY29uY2F0KFtsaXN0ZW5lcl0pO1xuICB9XG4gIHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdID0gYXJyO1xufTtcblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudFR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBhcnIgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXTtcbiAgaWYgKCFhcnIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGlkeCA9IGFyci5pbmRleE9mKGxpc3RlbmVyKTtcbiAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICBpZiAoYXJyLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGFzIG5vdCB0byBpbnRlcmZlcmUgd2l0aCBhIGN1cnJlbnQgZGlzcGF0Y2hFdmVudC5cbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudFR5cGVdID0gYXJyLnNsaWNlKDAsIGlkeCkuY29uY2F0KGFyci5zbGljZShpZHggKyAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG59O1xuXG5FdmVudFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZXZlbnQgPSBhcmd1bWVudHNbMF07XG4gIHZhciB0ID0gZXZlbnQudHlwZTtcbiAgLy8gZXF1aXZhbGVudCBvZiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBbZXZlbnRdIDogQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgLy8gVE9ETzogVGhpcyBkb2Vzbid0IG1hdGNoIHRoZSByZWFsIGJlaGF2aW9yOyBwZXIgc3BlYywgb25mb28gZ2V0XG4gIC8vIHRoZWlyIHBsYWNlIGluIGxpbmUgZnJvbSB0aGUgL2ZpcnN0LyB0aW1lIHRoZXkncmUgc2V0IGZyb21cbiAgLy8gbm9uLW51bGwuIEFsdGhvdWdoIFdlYktpdCBidW1wcyBpdCB0byB0aGUgZW5kIGV2ZXJ5IHRpbWUgaXQnc1xuICAvLyBzZXQuXG4gIGlmICh0aGlzWydvbicgKyB0XSkge1xuICAgIHRoaXNbJ29uJyArIHRdLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG4gIGlmICh0IGluIHRoaXMuX2xpc3RlbmVycykge1xuICAgIC8vIEdyYWIgYSByZWZlcmVuY2UgdG8gdGhlIGxpc3RlbmVycyBsaXN0LiByZW1vdmVFdmVudExpc3RlbmVyIG1heSBhbHRlciB0aGUgbGlzdC5cbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzW3RdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50VGFyZ2V0O1xuXG59LHt9XSw2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpXG4gIDtcblxuZnVuY3Rpb24gVHJhbnNwb3J0TWVzc2FnZUV2ZW50KGRhdGEpIHtcbiAgRXZlbnQuY2FsbCh0aGlzKTtcbiAgdGhpcy5pbml0RXZlbnQoJ21lc3NhZ2UnLCBmYWxzZSwgZmFsc2UpO1xuICB0aGlzLmRhdGEgPSBkYXRhO1xufVxuXG5pbmhlcml0cyhUcmFuc3BvcnRNZXNzYWdlRXZlbnQsIEV2ZW50KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc3BvcnRNZXNzYWdlRXZlbnQ7XG5cbn0se1wiLi9ldmVudFwiOjQsXCJpbmhlcml0c1wiOjU3fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBpZnJhbWVVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvaWZyYW1lJylcbiAgO1xuXG5mdW5jdGlvbiBGYWNhZGVKUyh0cmFuc3BvcnQpIHtcbiAgdGhpcy5fdHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICB0cmFuc3BvcnQub24oJ21lc3NhZ2UnLCB0aGlzLl90cmFuc3BvcnRNZXNzYWdlLmJpbmQodGhpcykpO1xuICB0cmFuc3BvcnQub24oJ2Nsb3NlJywgdGhpcy5fdHJhbnNwb3J0Q2xvc2UuYmluZCh0aGlzKSk7XG59XG5cbkZhY2FkZUpTLnByb3RvdHlwZS5fdHJhbnNwb3J0Q2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgaWZyYW1lVXRpbHMucG9zdE1lc3NhZ2UoJ2MnLCBKU09OMy5zdHJpbmdpZnkoW2NvZGUsIHJlYXNvbl0pKTtcbn07XG5GYWNhZGVKUy5wcm90b3R5cGUuX3RyYW5zcG9ydE1lc3NhZ2UgPSBmdW5jdGlvbihmcmFtZSkge1xuICBpZnJhbWVVdGlscy5wb3N0TWVzc2FnZSgndCcsIGZyYW1lKTtcbn07XG5GYWNhZGVKUy5wcm90b3R5cGUuX3NlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHRoaXMuX3RyYW5zcG9ydC5zZW5kKGRhdGEpO1xufTtcbkZhY2FkZUpTLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fdHJhbnNwb3J0LmNsb3NlKCk7XG4gIHRoaXMuX3RyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRmFjYWRlSlM7XG5cbn0se1wiLi91dGlscy9pZnJhbWVcIjo0NyxcImpzb24zXCI6NTh9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1cmxVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXJsJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9ldmVudCcpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgRmFjYWRlSlMgPSByZXF1aXJlKCcuL2ZhY2FkZScpXG4gICwgSW5mb0lmcmFtZVJlY2VpdmVyID0gcmVxdWlyZSgnLi9pbmZvLWlmcmFtZS1yZWNlaXZlcicpXG4gICwgaWZyYW1lVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL2lmcmFtZScpXG4gICwgbG9jID0gcmVxdWlyZSgnLi9sb2NhdGlvbicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDppZnJhbWUtYm9vdHN0cmFwJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oU29ja0pTLCBhdmFpbGFibGVUcmFuc3BvcnRzKSB7XG4gIHZhciB0cmFuc3BvcnRNYXAgPSB7fTtcbiAgYXZhaWxhYmxlVHJhbnNwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKGF0KSB7XG4gICAgaWYgKGF0LmZhY2FkZVRyYW5zcG9ydCkge1xuICAgICAgdHJhbnNwb3J0TWFwW2F0LmZhY2FkZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lXSA9IGF0LmZhY2FkZVRyYW5zcG9ydDtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGhhcmQtY29kZWQgZm9yIHRoZSBpbmZvIGlmcmFtZVxuICAvLyBUT0RPIHNlZSBpZiB3ZSBjYW4gbWFrZSB0aGlzIG1vcmUgZHluYW1pY1xuICB0cmFuc3BvcnRNYXBbSW5mb0lmcmFtZVJlY2VpdmVyLnRyYW5zcG9ydE5hbWVdID0gSW5mb0lmcmFtZVJlY2VpdmVyO1xuICB2YXIgcGFyZW50T3JpZ2luO1xuXG4gIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuICBTb2NrSlMuYm9vdHN0cmFwX2lmcmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlICovXG4gICAgdmFyIGZhY2FkZTtcbiAgICBpZnJhbWVVdGlscy5jdXJyZW50V2luZG93SWQgPSBsb2MuaGFzaC5zbGljZSgxKTtcbiAgICB2YXIgb25NZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuc291cmNlICE9PSBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBwYXJlbnRPcmlnaW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHBhcmVudE9yaWdpbiA9IGUub3JpZ2luO1xuICAgICAgfVxuICAgICAgaWYgKGUub3JpZ2luICE9PSBwYXJlbnRPcmlnaW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaWZyYW1lTWVzc2FnZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmcmFtZU1lc3NhZ2UgPSBKU09OMy5wYXJzZShlLmRhdGEpO1xuICAgICAgfSBjYXRjaCAoaWdub3JlZCkge1xuICAgICAgICBkZWJ1ZygnYmFkIGpzb24nLCBlLmRhdGEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpZnJhbWVNZXNzYWdlLndpbmRvd0lkICE9PSBpZnJhbWVVdGlscy5jdXJyZW50V2luZG93SWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChpZnJhbWVNZXNzYWdlLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3MnOlxuICAgICAgICB2YXIgcDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwID0gSlNPTjMucGFyc2UoaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoaWdub3JlZCkge1xuICAgICAgICAgIGRlYnVnKCdiYWQganNvbicsIGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZlcnNpb24gPSBwWzBdO1xuICAgICAgICB2YXIgdHJhbnNwb3J0ID0gcFsxXTtcbiAgICAgICAgdmFyIHRyYW5zVXJsID0gcFsyXTtcbiAgICAgICAgdmFyIGJhc2VVcmwgPSBwWzNdO1xuICAgICAgICBkZWJ1Zyh2ZXJzaW9uLCB0cmFuc3BvcnQsIHRyYW5zVXJsLCBiYXNlVXJsKTtcbiAgICAgICAgLy8gY2hhbmdlIHRoaXMgdG8gc2VtdmVyIGxvZ2ljXG4gICAgICAgIGlmICh2ZXJzaW9uICE9PSBTb2NrSlMudmVyc2lvbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb21wYXRpYmxlIFNvY2tKUyEgTWFpbiBzaXRlIHVzZXM6JyArXG4gICAgICAgICAgICAgICAgICAgICcgXCInICsgdmVyc2lvbiArICdcIiwgdGhlIGlmcmFtZTonICtcbiAgICAgICAgICAgICAgICAgICAgJyBcIicgKyBTb2NrSlMudmVyc2lvbiArICdcIi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXJsVXRpbHMuaXNPcmlnaW5FcXVhbCh0cmFuc1VybCwgbG9jLmhyZWYpIHx8XG4gICAgICAgICAgICAhdXJsVXRpbHMuaXNPcmlnaW5FcXVhbChiYXNlVXJsLCBsb2MuaHJlZikpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhblxcJ3QgY29ubmVjdCB0byBkaWZmZXJlbnQgZG9tYWluIGZyb20gd2l0aGluIGFuICcgK1xuICAgICAgICAgICAgICAgICAgICAnaWZyYW1lLiAoJyArIGxvYy5ocmVmICsgJywgJyArIHRyYW5zVXJsICsgJywgJyArIGJhc2VVcmwgKyAnKScpO1xuICAgICAgICB9XG4gICAgICAgIGZhY2FkZSA9IG5ldyBGYWNhZGVKUyhuZXcgdHJhbnNwb3J0TWFwW3RyYW5zcG9ydF0odHJhbnNVcmwsIGJhc2VVcmwpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdtJzpcbiAgICAgICAgZmFjYWRlLl9zZW5kKGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYyc6XG4gICAgICAgIGlmIChmYWNhZGUpIHtcbiAgICAgICAgICBmYWNhZGUuX2Nsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmFjYWRlID0gbnVsbDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGV2ZW50VXRpbHMuYXR0YWNoRXZlbnQoJ21lc3NhZ2UnLCBvbk1lc3NhZ2UpO1xuXG4gICAgLy8gU3RhcnRcbiAgICBpZnJhbWVVdGlscy5wb3N0TWVzc2FnZSgncycpO1xuICB9O1xufTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcIi4vZmFjYWRlXCI6NyxcIi4vaW5mby1pZnJhbWUtcmVjZWl2ZXJcIjoxMCxcIi4vbG9jYXRpb25cIjoxMyxcIi4vdXRpbHMvZXZlbnRcIjo0NixcIi4vdXRpbHMvaWZyYW1lXCI6NDcsXCIuL3V0aWxzL3VybFwiOjUyLFwiZGVidWdcIjo1NSxcImpzb24zXCI6NTh9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBvYmplY3RVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvb2JqZWN0JylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmluZm8tYWpheCcpO1xufVxuXG5mdW5jdGlvbiBJbmZvQWpheCh1cmwsIEFqYXhPYmplY3QpIHtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgdDAgPSArbmV3IERhdGUoKTtcbiAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdHRVQnLCB1cmwpO1xuXG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgdmFyIGluZm8sIHJ0dDtcbiAgICBpZiAoc3RhdHVzID09PSAyMDApIHtcbiAgICAgIHJ0dCA9ICgrbmV3IERhdGUoKSkgLSB0MDtcbiAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaW5mbyA9IEpTT04zLnBhcnNlKHRleHQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFvYmplY3RVdGlscy5pc09iamVjdChpbmZvKSkge1xuICAgICAgICBpbmZvID0ge307XG4gICAgICB9XG4gICAgfVxuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcbiAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9KTtcbn1cblxuaW5oZXJpdHMoSW5mb0FqYXgsIEV2ZW50RW1pdHRlcik7XG5cbkluZm9BamF4LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB0aGlzLnhvLmNsb3NlKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluZm9BamF4O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi91dGlscy9vYmplY3RcIjo0OSxcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1NyxcImpzb24zXCI6NTh9XSwxMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94aHItbG9jYWwnKVxuICAsIEluZm9BamF4ID0gcmVxdWlyZSgnLi9pbmZvLWFqYXgnKVxuICA7XG5cbmZ1bmN0aW9uIEluZm9SZWNlaXZlcklmcmFtZSh0cmFuc1VybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHRoaXMuaXIgPSBuZXcgSW5mb0FqYXgodHJhbnNVcmwsIFhIUkxvY2FsT2JqZWN0KTtcbiAgdGhpcy5pci5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbihpbmZvLCBydHQpIHtcbiAgICBzZWxmLmlyID0gbnVsbDtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBKU09OMy5zdHJpbmdpZnkoW2luZm8sIHJ0dF0pKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKEluZm9SZWNlaXZlcklmcmFtZSwgRXZlbnRFbWl0dGVyKTtcblxuSW5mb1JlY2VpdmVySWZyYW1lLnRyYW5zcG9ydE5hbWUgPSAnaWZyYW1lLWluZm8tcmVjZWl2ZXInO1xuXG5JbmZvUmVjZWl2ZXJJZnJhbWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmlyKSB7XG4gICAgdGhpcy5pci5jbG9zZSgpO1xuICAgIHRoaXMuaXIgPSBudWxsO1xuICB9XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEluZm9SZWNlaXZlcklmcmFtZTtcblxufSx7XCIuL2luZm8tYWpheFwiOjksXCIuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWxvY2FsXCI6MzcsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1NyxcImpzb24zXCI6NTh9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3MsZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9ldmVudCcpXG4gICwgSWZyYW1lVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvaWZyYW1lJylcbiAgLCBJbmZvUmVjZWl2ZXJJZnJhbWUgPSByZXF1aXJlKCcuL2luZm8taWZyYW1lLXJlY2VpdmVyJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmluZm8taWZyYW1lJyk7XG59XG5cbmZ1bmN0aW9uIEluZm9JZnJhbWUoYmFzZVVybCwgdXJsKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdmFyIGdvID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlmciA9IHNlbGYuaWZyID0gbmV3IElmcmFtZVRyYW5zcG9ydChJbmZvUmVjZWl2ZXJJZnJhbWUudHJhbnNwb3J0TmFtZSwgdXJsLCBiYXNlVXJsKTtcblxuICAgIGlmci5vbmNlKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKSB7XG4gICAgICBpZiAobXNnKSB7XG4gICAgICAgIHZhciBkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGQgPSBKU09OMy5wYXJzZShtc2cpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgbXNnKTtcbiAgICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcpO1xuICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5mbyA9IGRbMF0sIHJ0dCA9IGRbMV07XG4gICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcbiAgICAgIH1cbiAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGlmci5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcbiAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBUT0RPIHRoaXMgc2VlbXMgdGhlIHNhbWUgYXMgdGhlICduZWVkQm9keScgZnJvbSB0cmFuc3BvcnRzXG4gIGlmICghZ2xvYmFsLmRvY3VtZW50LmJvZHkpIHtcbiAgICB1dGlscy5hdHRhY2hFdmVudCgnbG9hZCcsIGdvKTtcbiAgfSBlbHNlIHtcbiAgICBnbygpO1xuICB9XG59XG5cbmluaGVyaXRzKEluZm9JZnJhbWUsIEV2ZW50RW1pdHRlcik7XG5cbkluZm9JZnJhbWUuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gSWZyYW1lVHJhbnNwb3J0LmVuYWJsZWQoKTtcbn07XG5cbkluZm9JZnJhbWUucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmlmcikge1xuICAgIHRoaXMuaWZyLmNsb3NlKCk7XG4gIH1cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5pZnIgPSBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmZvSWZyYW1lO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0sdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuL2luZm8taWZyYW1lLXJlY2VpdmVyXCI6MTAsXCIuL3RyYW5zcG9ydC9pZnJhbWVcIjoyMixcIi4vdXRpbHMvZXZlbnRcIjo0NixcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1NyxcImpzb24zXCI6NTh9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3VybCcpXG4gICwgWERSID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvc2VuZGVyL3hkcicpXG4gICwgWEhSQ29ycyA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94aHItY29ycycpXG4gICwgWEhSTG9jYWwgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWxvY2FsJylcbiAgLCBYSFJGYWtlID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvc2VuZGVyL3hoci1mYWtlJylcbiAgLCBJbmZvSWZyYW1lID0gcmVxdWlyZSgnLi9pbmZvLWlmcmFtZScpXG4gICwgSW5mb0FqYXggPSByZXF1aXJlKCcuL2luZm8tYWpheCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDppbmZvLXJlY2VpdmVyJyk7XG59XG5cbmZ1bmN0aW9uIEluZm9SZWNlaXZlcihiYXNlVXJsLCB1cmxJbmZvKSB7XG4gIGRlYnVnKGJhc2VVcmwpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5kb1hocihiYXNlVXJsLCB1cmxJbmZvKTtcbiAgfSwgMCk7XG59XG5cbmluaGVyaXRzKEluZm9SZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuLy8gVE9ETyB0aGlzIGlzIGN1cnJlbnRseSBpZ25vcmluZyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgdHJhbnNwb3J0cyBhbmQgdGhlIHdoaXRlbGlzdFxuXG5JbmZvUmVjZWl2ZXIuX2dldFJlY2VpdmVyID0gZnVuY3Rpb24oYmFzZVVybCwgdXJsLCB1cmxJbmZvKSB7XG4gIC8vIGRldGVybWluZSBtZXRob2Qgb2YgQ09SUyBzdXBwb3J0IChpZiBuZWVkZWQpXG4gIGlmICh1cmxJbmZvLnNhbWVPcmlnaW4pIHtcbiAgICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWEhSTG9jYWwpO1xuICB9XG4gIGlmIChYSFJDb3JzLmVuYWJsZWQpIHtcbiAgICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWEhSQ29ycyk7XG4gIH1cbiAgaWYgKFhEUi5lbmFibGVkICYmIHVybEluZm8uc2FtZVNjaGVtZSkge1xuICAgIHJldHVybiBuZXcgSW5mb0FqYXgodXJsLCBYRFIpO1xuICB9XG4gIGlmIChJbmZvSWZyYW1lLmVuYWJsZWQoKSkge1xuICAgIHJldHVybiBuZXcgSW5mb0lmcmFtZShiYXNlVXJsLCB1cmwpO1xuICB9XG4gIHJldHVybiBuZXcgSW5mb0FqYXgodXJsLCBYSFJGYWtlKTtcbn07XG5cbkluZm9SZWNlaXZlci5wcm90b3R5cGUuZG9YaHIgPSBmdW5jdGlvbihiYXNlVXJsLCB1cmxJbmZvKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICAgICwgdXJsID0gdXJsVXRpbHMuYWRkUGF0aChiYXNlVXJsLCAnL2luZm8nKVxuICAgIDtcbiAgZGVidWcoJ2RvWGhyJywgdXJsKTtcblxuICB0aGlzLnhvID0gSW5mb1JlY2VpdmVyLl9nZXRSZWNlaXZlcihiYXNlVXJsLCB1cmwsIHVybEluZm8pO1xuXG4gIHRoaXMudGltZW91dFJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3RpbWVvdXQnKTtcbiAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcpO1xuICB9LCBJbmZvUmVjZWl2ZXIudGltZW91dCk7XG5cbiAgdGhpcy54by5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbihpbmZvLCBydHQpIHtcbiAgICBkZWJ1ZygnZmluaXNoJywgaW5mbywgcnR0KTtcbiAgICBzZWxmLl9jbGVhbnVwKHRydWUpO1xuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgaW5mbywgcnR0KTtcbiAgfSk7XG59O1xuXG5JbmZvUmVjZWl2ZXIucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24od2FzQ2xlYW4pIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRSZWYpO1xuICB0aGlzLnRpbWVvdXRSZWYgPSBudWxsO1xuICBpZiAoIXdhc0NsZWFuICYmIHRoaXMueG8pIHtcbiAgICB0aGlzLnhvLmNsb3NlKCk7XG4gIH1cbiAgdGhpcy54byA9IG51bGw7XG59O1xuXG5JbmZvUmVjZWl2ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjbG9zZScpO1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB0aGlzLl9jbGVhbnVwKGZhbHNlKTtcbn07XG5cbkluZm9SZWNlaXZlci50aW1lb3V0ID0gODAwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmZvUmVjZWl2ZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCIuL2luZm8tYWpheFwiOjksXCIuL2luZm8taWZyYW1lXCI6MTEsXCIuL3RyYW5zcG9ydC9zZW5kZXIveGRyXCI6MzQsXCIuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWNvcnNcIjozNSxcIi4vdHJhbnNwb3J0L3NlbmRlci94aHItZmFrZVwiOjM2LFwiLi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbFwiOjM3LFwiLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwubG9jYXRpb24gfHwge1xuICBvcmlnaW46ICdodHRwOi8vbG9jYWxob3N0OjgwJ1xuLCBwcm90b2NvbDogJ2h0dHA6J1xuLCBob3N0OiAnbG9jYWxob3N0J1xuLCBwb3J0OiA4MFxuLCBocmVmOiAnaHR0cDovL2xvY2FsaG9zdC8nXG4sIGhhc2g6ICcnXG59O1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7fV0sMTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnJlcXVpcmUoJy4vc2hpbXMnKTtcblxudmFyIFVSTCA9IHJlcXVpcmUoJ3VybC1wYXJzZScpXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgcmFuZG9tID0gcmVxdWlyZSgnLi91dGlscy9yYW5kb20nKVxuICAsIGVzY2FwZSA9IHJlcXVpcmUoJy4vdXRpbHMvZXNjYXBlJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXJsJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9ldmVudCcpXG4gICwgdHJhbnNwb3J0ID0gcmVxdWlyZSgnLi91dGlscy90cmFuc3BvcnQnKVxuICAsIG9iamVjdFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9vYmplY3QnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuL3V0aWxzL2Jyb3dzZXInKVxuICAsIGxvZyA9IHJlcXVpcmUoJy4vdXRpbHMvbG9nJylcbiAgLCBFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvZXZlbnQnKVxuICAsIEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9ldmVudC9ldmVudHRhcmdldCcpXG4gICwgbG9jID0gcmVxdWlyZSgnLi9sb2NhdGlvbicpXG4gICwgQ2xvc2VFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvY2xvc2UnKVxuICAsIFRyYW5zcG9ydE1lc3NhZ2VFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQvdHJhbnMtbWVzc2FnZScpXG4gICwgSW5mb1JlY2VpdmVyID0gcmVxdWlyZSgnLi9pbmZvLXJlY2VpdmVyJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50Om1haW4nKTtcbn1cblxudmFyIHRyYW5zcG9ydHM7XG5cbi8vIGZvbGxvdyBjb25zdHJ1Y3RvciBzdGVwcyBkZWZpbmVkIGF0IGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3dlYnNvY2tldHMvI3RoZS13ZWJzb2NrZXQtaW50ZXJmYWNlXG5mdW5jdGlvbiBTb2NrSlModXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNvY2tKUykpIHtcbiAgICByZXR1cm4gbmV3IFNvY2tKUyh1cmwsIHByb3RvY29scywgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1NvY2tKUzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50XCIpO1xuICB9XG4gIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNPTk5FQ1RJTkc7XG4gIHRoaXMuZXh0ZW5zaW9ucyA9ICcnO1xuICB0aGlzLnByb3RvY29sID0gJyc7XG5cbiAgLy8gbm9uLXN0YW5kYXJkIGV4dGVuc2lvblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG9wdGlvbnMucHJvdG9jb2xzX3doaXRlbGlzdCkge1xuICAgIGxvZy53YXJuKFwiJ3Byb3RvY29sc193aGl0ZWxpc3QnIGlzIERFUFJFQ0FURUQuIFVzZSAndHJhbnNwb3J0cycgaW5zdGVhZC5cIik7XG4gIH1cbiAgdGhpcy5fdHJhbnNwb3J0c1doaXRlbGlzdCA9IG9wdGlvbnMudHJhbnNwb3J0cztcbiAgdGhpcy5fdHJhbnNwb3J0T3B0aW9ucyA9IG9wdGlvbnMudHJhbnNwb3J0T3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5fdGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCAwO1xuXG4gIHZhciBzZXNzaW9uSWQgPSBvcHRpb25zLnNlc3Npb25JZCB8fCA4O1xuICBpZiAodHlwZW9mIHNlc3Npb25JZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuX2dlbmVyYXRlU2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZXNzaW9uSWQgPT09ICdudW1iZXInKSB7XG4gICAgdGhpcy5fZ2VuZXJhdGVTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByYW5kb20uc3RyaW5nKHNlc3Npb25JZCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJZiBzZXNzaW9uSWQgaXMgdXNlZCBpbiB0aGUgb3B0aW9ucywgaXQgbmVlZHMgdG8gYmUgYSBudW1iZXIgb3IgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHRoaXMuX3NlcnZlciA9IG9wdGlvbnMuc2VydmVyIHx8IHJhbmRvbS5udW1iZXJTdHJpbmcoMTAwMCk7XG5cbiAgLy8gU3RlcCAxIG9mIFdTIHNwZWMgLSBwYXJzZSBhbmQgdmFsaWRhdGUgdGhlIHVybC4gSXNzdWUgIzhcbiAgdmFyIHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcbiAgaWYgKCFwYXJzZWRVcmwuaG9zdCB8fCAhcGFyc2VkVXJsLnByb3RvY29sKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIFVSTCAnXCIgKyB1cmwgKyBcIicgaXMgaW52YWxpZFwiKTtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwuaGFzaCkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignVGhlIFVSTCBtdXN0IG5vdCBjb250YWluIGEgZnJhZ21lbnQnKTtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwucHJvdG9jb2wgIT09ICdodHRwOicgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSAnaHR0cHM6Jykge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBVUkwncyBzY2hlbWUgbXVzdCBiZSBlaXRoZXIgJ2h0dHA6JyBvciAnaHR0cHM6Jy4gJ1wiICsgcGFyc2VkVXJsLnByb3RvY29sICsgXCInIGlzIG5vdCBhbGxvd2VkLlwiKTtcbiAgfVxuXG4gIHZhciBzZWN1cmUgPSBwYXJzZWRVcmwucHJvdG9jb2wgPT09ICdodHRwczonO1xuICAvLyBTdGVwIDIgLSBkb24ndCBhbGxvdyBzZWN1cmUgb3JpZ2luIHdpdGggYW4gaW5zZWN1cmUgcHJvdG9jb2xcbiAgaWYgKGxvYy5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgIXNlY3VyZSkge1xuICAgIC8vIGV4Y2VwdGlvbiBpcyAxMjcuMC4wLjAvOCBhbmQgOjoxIHVybHNcbiAgICBpZiAoIXVybFV0aWxzLmlzTG9vcGJhY2tBZGRyKHBhcnNlZFVybC5ob3N0bmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJpdHlFcnJvcjogQW4gaW5zZWN1cmUgU29ja0pTIGNvbm5lY3Rpb24gbWF5IG5vdCBiZSBpbml0aWF0ZWQgZnJvbSBhIHBhZ2UgbG9hZGVkIG92ZXIgSFRUUFMnKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdGVwIDMgLSBjaGVjayBwb3J0IGFjY2VzcyAtIG5vIG5lZWQgaGVyZVxuICAvLyBTdGVwIDQgLSBwYXJzZSBwcm90b2NvbHMgYXJndW1lbnRcbiAgaWYgKCFwcm90b2NvbHMpIHtcbiAgICBwcm90b2NvbHMgPSBbXTtcbiAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShwcm90b2NvbHMpKSB7XG4gICAgcHJvdG9jb2xzID0gW3Byb3RvY29sc107XG4gIH1cblxuICAvLyBTdGVwIDUgLSBjaGVjayBwcm90b2NvbHMgYXJndW1lbnRcbiAgdmFyIHNvcnRlZFByb3RvY29scyA9IHByb3RvY29scy5zb3J0KCk7XG4gIHNvcnRlZFByb3RvY29scy5mb3JFYWNoKGZ1bmN0aW9uKHByb3RvLCBpKSB7XG4gICAgaWYgKCFwcm90bykge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIHByb3RvY29scyBlbnRyeSAnXCIgKyBwcm90byArIFwiJyBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG4gICAgaWYgKGkgPCAoc29ydGVkUHJvdG9jb2xzLmxlbmd0aCAtIDEpICYmIHByb3RvID09PSBzb3J0ZWRQcm90b2NvbHNbaSArIDFdKSB7XG4gICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgcHJvdG9jb2xzIGVudHJ5ICdcIiArIHByb3RvICsgXCInIGlzIGR1cGxpY2F0ZWQuXCIpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gU3RlcCA2IC0gY29udmVydCBvcmlnaW5cbiAgdmFyIG8gPSB1cmxVdGlscy5nZXRPcmlnaW4obG9jLmhyZWYpO1xuICB0aGlzLl9vcmlnaW4gPSBvID8gby50b0xvd2VyQ2FzZSgpIDogbnVsbDtcblxuICAvLyByZW1vdmUgdGhlIHRyYWlsaW5nIHNsYXNoXG4gIHBhcnNlZFVybC5zZXQoJ3BhdGhuYW1lJywgcGFyc2VkVXJsLnBhdGhuYW1lLnJlcGxhY2UoL1xcLyskLywgJycpKTtcblxuICAvLyBzdG9yZSB0aGUgc2FuaXRpemVkIHVybFxuICB0aGlzLnVybCA9IHBhcnNlZFVybC5ocmVmO1xuICBkZWJ1ZygndXNpbmcgdXJsJywgdGhpcy51cmwpO1xuXG4gIC8vIFN0ZXAgNyAtIHN0YXJ0IGNvbm5lY3Rpb24gaW4gYmFja2dyb3VuZFxuICAvLyBvYnRhaW4gc2VydmVyIGluZm9cbiAgLy8gaHR0cDovL3NvY2tqcy5naXRodWIuaW8vc29ja2pzLXByb3RvY29sL3NvY2tqcy1wcm90b2NvbC0wLjMuMy5odG1sI3NlY3Rpb24tMjZcbiAgdGhpcy5fdXJsSW5mbyA9IHtcbiAgICBudWxsT3JpZ2luOiAhYnJvd3Nlci5oYXNEb21haW4oKVxuICAsIHNhbWVPcmlnaW46IHVybFV0aWxzLmlzT3JpZ2luRXF1YWwodGhpcy51cmwsIGxvYy5ocmVmKVxuICAsIHNhbWVTY2hlbWU6IHVybFV0aWxzLmlzU2NoZW1lRXF1YWwodGhpcy51cmwsIGxvYy5ocmVmKVxuICB9O1xuXG4gIHRoaXMuX2lyID0gbmV3IEluZm9SZWNlaXZlcih0aGlzLnVybCwgdGhpcy5fdXJsSW5mbyk7XG4gIHRoaXMuX2lyLm9uY2UoJ2ZpbmlzaCcsIHRoaXMuX3JlY2VpdmVJbmZvLmJpbmQodGhpcykpO1xufVxuXG5pbmhlcml0cyhTb2NrSlMsIEV2ZW50VGFyZ2V0KTtcblxuZnVuY3Rpb24gdXNlclNldENvZGUoY29kZSkge1xuICByZXR1cm4gY29kZSA9PT0gMTAwMCB8fCAoY29kZSA+PSAzMDAwICYmIGNvZGUgPD0gNDk5OSk7XG59XG5cblNvY2tKUy5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgLy8gU3RlcCAxXG4gIGlmIChjb2RlICYmICF1c2VyU2V0Q29kZShjb2RlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZEFjY2Vzc0Vycm9yOiBJbnZhbGlkIGNvZGUnKTtcbiAgfVxuICAvLyBTdGVwIDIuNCBzdGF0ZXMgdGhlIG1heCBpcyAxMjMgYnl0ZXMsIGJ1dCB3ZSBhcmUganVzdCBjaGVja2luZyBsZW5ndGhcbiAgaWYgKHJlYXNvbiAmJiByZWFzb24ubGVuZ3RoID4gMTIzKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdyZWFzb24gYXJndW1lbnQgaGFzIGFuIGludmFsaWQgbGVuZ3RoJyk7XG4gIH1cblxuICAvLyBTdGVwIDMuMVxuICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ0xPU0lORyB8fCB0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DTE9TRUQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBUT0RPIGxvb2sgYXQgZG9jcyB0byBkZXRlcm1pbmUgaG93IHRvIHNldCB0aGlzXG4gIHZhciB3YXNDbGVhbiA9IHRydWU7XG4gIHRoaXMuX2Nsb3NlKGNvZGUgfHwgMTAwMCwgcmVhc29uIHx8ICdOb3JtYWwgY2xvc3VyZScsIHdhc0NsZWFuKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgLy8gIzEzIC0gY29udmVydCBhbnl0aGluZyBub24tc3RyaW5nIHRvIHN0cmluZ1xuICAvLyBUT0RPIHRoaXMgY3VycmVudGx5IHR1cm5zIG9iamVjdHMgaW50byBbb2JqZWN0IE9iamVjdF1cbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gIH1cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNPTk5FQ1RJTkcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yOiBUaGUgY29ubmVjdGlvbiBoYXMgbm90IGJlZW4gZXN0YWJsaXNoZWQgeWV0Jyk7XG4gIH1cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gU29ja0pTLk9QRU4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5fdHJhbnNwb3J0LnNlbmQoZXNjYXBlLnF1b3RlKGRhdGEpKTtcbn07XG5cblNvY2tKUy52ZXJzaW9uID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XG5cblNvY2tKUy5DT05ORUNUSU5HID0gMDtcblNvY2tKUy5PUEVOID0gMTtcblNvY2tKUy5DTE9TSU5HID0gMjtcblNvY2tKUy5DTE9TRUQgPSAzO1xuXG5Tb2NrSlMucHJvdG90eXBlLl9yZWNlaXZlSW5mbyA9IGZ1bmN0aW9uKGluZm8sIHJ0dCkge1xuICBkZWJ1ZygnX3JlY2VpdmVJbmZvJywgcnR0KTtcbiAgdGhpcy5faXIgPSBudWxsO1xuICBpZiAoIWluZm8pIHtcbiAgICB0aGlzLl9jbG9zZSgxMDAyLCAnQ2Fubm90IGNvbm5lY3QgdG8gc2VydmVyJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gZXN0YWJsaXNoIGEgcm91bmQtdHJpcCB0aW1lb3V0IChSVE8pIGJhc2VkIG9uIHRoZVxuICAvLyByb3VuZC10cmlwIHRpbWUgKFJUVClcbiAgdGhpcy5fcnRvID0gdGhpcy5jb3VudFJUTyhydHQpO1xuICAvLyBhbGxvdyBzZXJ2ZXIgdG8gb3ZlcnJpZGUgdXJsIHVzZWQgZm9yIHRoZSBhY3R1YWwgdHJhbnNwb3J0XG4gIHRoaXMuX3RyYW5zVXJsID0gaW5mby5iYXNlX3VybCA/IGluZm8uYmFzZV91cmwgOiB0aGlzLnVybDtcbiAgaW5mbyA9IG9iamVjdFV0aWxzLmV4dGVuZChpbmZvLCB0aGlzLl91cmxJbmZvKTtcbiAgZGVidWcoJ2luZm8nLCBpbmZvKTtcbiAgLy8gZGV0ZXJtaW5lIGxpc3Qgb2YgZGVzaXJlZCBhbmQgc3VwcG9ydGVkIHRyYW5zcG9ydHNcbiAgdmFyIGVuYWJsZWRUcmFuc3BvcnRzID0gdHJhbnNwb3J0cy5maWx0ZXJUb0VuYWJsZWQodGhpcy5fdHJhbnNwb3J0c1doaXRlbGlzdCwgaW5mbyk7XG4gIHRoaXMuX3RyYW5zcG9ydHMgPSBlbmFibGVkVHJhbnNwb3J0cy5tYWluO1xuICBkZWJ1Zyh0aGlzLl90cmFuc3BvcnRzLmxlbmd0aCArICcgZW5hYmxlZCB0cmFuc3BvcnRzJyk7XG5cbiAgdGhpcy5fY29ubmVjdCgpO1xufTtcblxuU29ja0pTLnByb3RvdHlwZS5fY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBUcmFuc3BvcnQgPSB0aGlzLl90cmFuc3BvcnRzLnNoaWZ0KCk7IFRyYW5zcG9ydDsgVHJhbnNwb3J0ID0gdGhpcy5fdHJhbnNwb3J0cy5zaGlmdCgpKSB7XG4gICAgZGVidWcoJ2F0dGVtcHQnLCBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSk7XG4gICAgaWYgKFRyYW5zcG9ydC5uZWVkQm9keSkge1xuICAgICAgaWYgKCFnbG9iYWwuZG9jdW1lbnQuYm9keSB8fFxuICAgICAgICAgICh0eXBlb2YgZ2xvYmFsLmRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICBnbG9iYWwuZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2NvbXBsZXRlJyAmJlxuICAgICAgICAgICAgZ2xvYmFsLmRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdpbnRlcmFjdGl2ZScpKSB7XG4gICAgICAgIGRlYnVnKCd3YWl0aW5nIGZvciBib2R5Jyk7XG4gICAgICAgIHRoaXMuX3RyYW5zcG9ydHMudW5zaGlmdChUcmFuc3BvcnQpO1xuICAgICAgICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdsb2FkJywgdGhpcy5fY29ubmVjdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0ZSB0aW1lb3V0IGJhc2VkIG9uIFJUTyBhbmQgcm91bmQgdHJpcHMuIERlZmF1bHQgdG8gNXNcbiAgICB2YXIgdGltZW91dE1zID0gTWF0aC5tYXgodGhpcy5fdGltZW91dCwgKHRoaXMuX3J0byAqIFRyYW5zcG9ydC5yb3VuZFRyaXBzKSB8fCA1MDAwKTtcbiAgICB0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX3RyYW5zcG9ydFRpbWVvdXQuYmluZCh0aGlzKSwgdGltZW91dE1zKTtcbiAgICBkZWJ1ZygndXNpbmcgdGltZW91dCcsIHRpbWVvdXRNcyk7XG5cbiAgICB2YXIgdHJhbnNwb3J0VXJsID0gdXJsVXRpbHMuYWRkUGF0aCh0aGlzLl90cmFuc1VybCwgJy8nICsgdGhpcy5fc2VydmVyICsgJy8nICsgdGhpcy5fZ2VuZXJhdGVTZXNzaW9uSWQoKSk7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLl90cmFuc3BvcnRPcHRpb25zW1RyYW5zcG9ydC50cmFuc3BvcnROYW1lXTtcbiAgICBkZWJ1ZygndHJhbnNwb3J0IHVybCcsIHRyYW5zcG9ydFVybCk7XG4gICAgdmFyIHRyYW5zcG9ydE9iaiA9IG5ldyBUcmFuc3BvcnQodHJhbnNwb3J0VXJsLCB0aGlzLl90cmFuc1VybCwgb3B0aW9ucyk7XG4gICAgdHJhbnNwb3J0T2JqLm9uKCdtZXNzYWdlJywgdGhpcy5fdHJhbnNwb3J0TWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgICB0cmFuc3BvcnRPYmoub25jZSgnY2xvc2UnLCB0aGlzLl90cmFuc3BvcnRDbG9zZS5iaW5kKHRoaXMpKTtcbiAgICB0cmFuc3BvcnRPYmoudHJhbnNwb3J0TmFtZSA9IFRyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydE9iajtcblxuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLl9jbG9zZSgyMDAwLCAnQWxsIHRyYW5zcG9ydHMgZmFpbGVkJywgZmFsc2UpO1xufTtcblxuU29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX3RyYW5zcG9ydFRpbWVvdXQnKTtcbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNPTk5FQ1RJTkcpIHtcbiAgICBpZiAodGhpcy5fdHJhbnNwb3J0KSB7XG4gICAgICB0aGlzLl90cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG5cbiAgICB0aGlzLl90cmFuc3BvcnRDbG9zZSgyMDA3LCAnVHJhbnNwb3J0IHRpbWVkIG91dCcpO1xuICB9XG59O1xuXG5Tb2NrSlMucHJvdG90eXBlLl90cmFuc3BvcnRNZXNzYWdlID0gZnVuY3Rpb24obXNnKSB7XG4gIGRlYnVnKCdfdHJhbnNwb3J0TWVzc2FnZScsIG1zZyk7XG4gIHZhciBzZWxmID0gdGhpc1xuICAgICwgdHlwZSA9IG1zZy5zbGljZSgwLCAxKVxuICAgICwgY29udGVudCA9IG1zZy5zbGljZSgxKVxuICAgICwgcGF5bG9hZFxuICAgIDtcblxuICAvLyBmaXJzdCBjaGVjayBmb3IgbWVzc2FnZXMgdGhhdCBkb24ndCBuZWVkIGEgcGF5bG9hZFxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdvJzpcbiAgICAgIHRoaXMuX29wZW4oKTtcbiAgICAgIHJldHVybjtcbiAgICBjYXNlICdoJzpcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2hlYXJ0YmVhdCcpKTtcbiAgICAgIGRlYnVnKCdoZWFydGJlYXQnLCB0aGlzLnRyYW5zcG9ydCk7XG4gICAgICByZXR1cm47XG4gIH1cblxuICBpZiAoY29udGVudCkge1xuICAgIHRyeSB7XG4gICAgICBwYXlsb2FkID0gSlNPTjMucGFyc2UoY29udGVudCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZGVidWcoJ2JhZCBqc29uJywgY29udGVudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAndW5kZWZpbmVkJykge1xuICAgIGRlYnVnKCdlbXB0eSBwYXlsb2FkJywgY29udGVudCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnYSc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgICAgICBwYXlsb2FkLmZvckVhY2goZnVuY3Rpb24ocCkge1xuICAgICAgICAgIGRlYnVnKCdtZXNzYWdlJywgc2VsZi50cmFuc3BvcnQsIHApO1xuICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChuZXcgVHJhbnNwb3J0TWVzc2FnZUV2ZW50KHApKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdtJzpcbiAgICAgIGRlYnVnKCdtZXNzYWdlJywgdGhpcy50cmFuc3BvcnQsIHBheWxvYWQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUcmFuc3BvcnRNZXNzYWdlRXZlbnQocGF5bG9hZCkpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYyc6XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSAmJiBwYXlsb2FkLmxlbmd0aCA9PT0gMikge1xuICAgICAgICB0aGlzLl9jbG9zZShwYXlsb2FkWzBdLCBwYXlsb2FkWzFdLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5Tb2NrSlMucHJvdG90eXBlLl90cmFuc3BvcnRDbG9zZSA9IGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuICBkZWJ1ZygnX3RyYW5zcG9ydENsb3NlJywgdGhpcy50cmFuc3BvcnQsIGNvZGUsIHJlYXNvbik7XG4gIGlmICh0aGlzLl90cmFuc3BvcnQpIHtcbiAgICB0aGlzLl90cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gbnVsbDtcbiAgICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7XG4gIH1cblxuICBpZiAoIXVzZXJTZXRDb2RlKGNvZGUpICYmIGNvZGUgIT09IDIwMDAgJiYgdGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ09OTkVDVElORykge1xuICAgIHRoaXMuX2Nvbm5lY3QoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzLl9jbG9zZShjb2RlLCByZWFzb24pO1xufTtcblxuU29ja0pTLnByb3RvdHlwZS5fb3BlbiA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX29wZW4nLCB0aGlzLl90cmFuc3BvcnQgJiYgdGhpcy5fdHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUsIHRoaXMucmVhZHlTdGF0ZSk7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zcG9ydFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RyYW5zcG9ydFRpbWVvdXRJZCk7XG4gICAgICB0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTb2NrSlMuT1BFTjtcbiAgICB0aGlzLnRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ29wZW4nKSk7XG4gICAgZGVidWcoJ2Nvbm5lY3RlZCcsIHRoaXMudHJhbnNwb3J0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUaGUgc2VydmVyIG1pZ2h0IGhhdmUgYmVlbiByZXN0YXJ0ZWQsIGFuZCBsb3N0IHRyYWNrIG9mIG91clxuICAgIC8vIGNvbm5lY3Rpb24uXG4gICAgdGhpcy5fY2xvc2UoMTAwNiwgJ1NlcnZlciBsb3N0IHNlc3Npb24nKTtcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24sIHdhc0NsZWFuKSB7XG4gIGRlYnVnKCdfY2xvc2UnLCB0aGlzLnRyYW5zcG9ydCwgY29kZSwgcmVhc29uLCB3YXNDbGVhbiwgdGhpcy5yZWFkeVN0YXRlKTtcbiAgdmFyIGZvcmNlRmFpbCA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLl9pcikge1xuICAgIGZvcmNlRmFpbCA9IHRydWU7XG4gICAgdGhpcy5faXIuY2xvc2UoKTtcbiAgICB0aGlzLl9pciA9IG51bGw7XG4gIH1cbiAgaWYgKHRoaXMuX3RyYW5zcG9ydCkge1xuICAgIHRoaXMuX3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICB9XG5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNMT1NFRCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZFN0YXRlRXJyb3I6IFNvY2tKUyBoYXMgYWxyZWFkeSBiZWVuIGNsb3NlZCcpO1xuICB9XG5cbiAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNMT1NJTkc7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLkNMT1NFRDtcblxuICAgIGlmIChmb3JjZUZhaWwpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2Vycm9yJykpO1xuICAgIH1cblxuICAgIHZhciBlID0gbmV3IENsb3NlRXZlbnQoJ2Nsb3NlJyk7XG4gICAgZS53YXNDbGVhbiA9IHdhc0NsZWFuIHx8IGZhbHNlO1xuICAgIGUuY29kZSA9IGNvZGUgfHwgMTAwMDtcbiAgICBlLnJlYXNvbiA9IHJlYXNvbjtcblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlKTtcbiAgICB0aGlzLm9ubWVzc2FnZSA9IHRoaXMub25jbG9zZSA9IHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgZGVidWcoJ2Rpc2Nvbm5lY3RlZCcpO1xuICB9LmJpbmQodGhpcyksIDApO1xufTtcblxuLy8gU2VlOiBodHRwOi8vd3d3LmVyZy5hYmRuLmFjLnVrL35nZXJyaXQvZGNjcC9ub3Rlcy9jY2lkMi9ydG9fZXN0aW1hdG9yL1xuLy8gYW5kIFJGQyAyOTg4LlxuU29ja0pTLnByb3RvdHlwZS5jb3VudFJUTyA9IGZ1bmN0aW9uKHJ0dCkge1xuICAvLyBJbiBhIGxvY2FsIGVudmlyb25tZW50LCB3aGVuIHVzaW5nIElFOC85IGFuZCB0aGUgYGpzb25wLXBvbGxpbmdgXG4gIC8vIHRyYW5zcG9ydCB0aGUgdGltZSBuZWVkZWQgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiAodGhlIHRpbWUgdGhhdCBwYXNzXG4gIC8vIGZyb20gdGhlIG9wZW5pbmcgb2YgdGhlIHRyYW5zcG9ydCB0byB0aGUgY2FsbCBvZiBgX2Rpc3BhdGNoT3BlbmApIGlzXG4gIC8vIGFyb3VuZCAyMDBtc2VjICh0aGUgbG93ZXIgYm91bmQgdXNlZCBpbiB0aGUgYXJ0aWNsZSBhYm92ZSkgYW5kIHRoaXNcbiAgLy8gY2F1c2VzIHNwdXJpb3VzIHRpbWVvdXRzLiBGb3IgdGhpcyByZWFzb24gd2UgY2FsY3VsYXRlIGEgdmFsdWUgc2xpZ2h0bHlcbiAgLy8gbGFyZ2VyIHRoYW4gdGhhdCB1c2VkIGluIHRoZSBhcnRpY2xlLlxuICBpZiAocnR0ID4gMTAwKSB7XG4gICAgcmV0dXJuIDQgKiBydHQ7IC8vIHJ0byA+IDQwMG1zZWNcbiAgfVxuICByZXR1cm4gMzAwICsgcnR0OyAvLyAzMDBtc2VjIDwgcnRvIDw9IDQwMG1zZWNcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuICB0cmFuc3BvcnRzID0gdHJhbnNwb3J0KGF2YWlsYWJsZVRyYW5zcG9ydHMpO1xuICByZXF1aXJlKCcuL2lmcmFtZS1ib290c3RyYXAnKShTb2NrSlMsIGF2YWlsYWJsZVRyYW5zcG9ydHMpO1xuICByZXR1cm4gU29ja0pTO1xufTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi9ldmVudC9jbG9zZVwiOjIsXCIuL2V2ZW50L2V2ZW50XCI6NCxcIi4vZXZlbnQvZXZlbnR0YXJnZXRcIjo1LFwiLi9ldmVudC90cmFucy1tZXNzYWdlXCI6NixcIi4vaWZyYW1lLWJvb3RzdHJhcFwiOjgsXCIuL2luZm8tcmVjZWl2ZXJcIjoxMixcIi4vbG9jYXRpb25cIjoxMyxcIi4vc2hpbXNcIjoxNSxcIi4vdXRpbHMvYnJvd3NlclwiOjQ0LFwiLi91dGlscy9lc2NhcGVcIjo0NSxcIi4vdXRpbHMvZXZlbnRcIjo0NixcIi4vdXRpbHMvbG9nXCI6NDgsXCIuL3V0aWxzL29iamVjdFwiOjQ5LFwiLi91dGlscy9yYW5kb21cIjo1MCxcIi4vdXRpbHMvdHJhbnNwb3J0XCI6NTEsXCIuL3V0aWxzL3VybFwiOjUyLFwiLi92ZXJzaW9uXCI6NTMsXCJkZWJ1Z1wiOjU1LFwiaW5oZXJpdHNcIjo1NyxcImpzb24zXCI6NTgsXCJ1cmwtcGFyc2VcIjo2MX1dLDE1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qIGVzbGludC1kaXNhYmxlICovXG4vKiBqc2NzOiBkaXNhYmxlICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHB1bGxlZCBzcGVjaWZpYyBzaGltcyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbVxuXG52YXIgQXJyYXlQcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGU7XG52YXIgT2JqZWN0UHJvdG90eXBlID0gT2JqZWN0LnByb3RvdHlwZTtcbnZhciBGdW5jdGlvblByb3RvdHlwZSA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbnZhciBTdHJpbmdQcm90b3R5cGUgPSBTdHJpbmcucHJvdG90eXBlO1xudmFyIGFycmF5X3NsaWNlID0gQXJyYXlQcm90b3R5cGUuc2xpY2U7XG5cbnZhciBfdG9TdHJpbmcgPSBPYmplY3RQcm90b3R5cGUudG9TdHJpbmc7XG52YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICByZXR1cm4gT2JqZWN0UHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn07XG52YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIF90b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xudmFyIGlzU3RyaW5nID0gZnVuY3Rpb24gaXNTdHJpbmcob2JqKSB7XG4gICAgcmV0dXJuIF90b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xufTtcblxudmFyIHN1cHBvcnRzRGVzY3JpcHRvcnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICd4Jywge30pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7IC8qIHRoaXMgaXMgRVMzICovXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59KCkpO1xuXG4vLyBEZWZpbmUgY29uZmlndXJhYmxlLCB3cml0YWJsZSBhbmQgbm9uLWVudW1lcmFibGUgcHJvcHNcbi8vIGlmIHRoZXkgZG9uJ3QgZXhpc3QuXG52YXIgZGVmaW5lUHJvcGVydHk7XG5pZiAoc3VwcG9ydHNEZXNjcmlwdG9ycykge1xuICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgbWV0aG9kLCBmb3JjZUFzc2lnbikge1xuICAgICAgICBpZiAoIWZvcmNlQXNzaWduICYmIChuYW1lIGluIG9iamVjdCkpIHsgcmV0dXJuOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIG5hbWUsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbWV0aG9kXG4gICAgICAgIH0pO1xuICAgIH07XG59IGVsc2Uge1xuICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgbWV0aG9kLCBmb3JjZUFzc2lnbikge1xuICAgICAgICBpZiAoIWZvcmNlQXNzaWduICYmIChuYW1lIGluIG9iamVjdCkpIHsgcmV0dXJuOyB9XG4gICAgICAgIG9iamVjdFtuYW1lXSA9IG1ldGhvZDtcbiAgICB9O1xufVxudmFyIGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqZWN0LCBtYXAsIGZvcmNlQXNzaWduKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBtYXApIHtcbiAgICAgICAgaWYgKE9iamVjdFByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1hcCwgbmFtZSkpIHtcbiAgICAgICAgICBkZWZpbmVQcm9wZXJ0eShvYmplY3QsIG5hbWUsIG1hcFtuYW1lXSwgZm9yY2VBc3NpZ24pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIHRvT2JqZWN0ID0gZnVuY3Rpb24gKG8pIHtcbiAgICBpZiAobyA9PSBudWxsKSB7IC8vIHRoaXMgbWF0Y2hlcyBib3RoIG51bGwgYW5kIHVuZGVmaW5lZFxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuJ3QgY29udmVydCBcIiArIG8gKyAnIHRvIG9iamVjdCcpO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0KG8pO1xufTtcblxuLy9cbi8vIFV0aWxcbi8vID09PT09PVxuLy9cblxuLy8gRVM1IDkuNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS40XG4vLyBodHRwOi8vanNwZXJmLmNvbS90by1pbnRlZ2VyXG5cbmZ1bmN0aW9uIHRvSW50ZWdlcihudW0pIHtcbiAgICB2YXIgbiA9ICtudW07XG4gICAgaWYgKG4gIT09IG4pIHsgLy8gaXNOYU5cbiAgICAgICAgbiA9IDA7XG4gICAgfSBlbHNlIGlmIChuICE9PSAwICYmIG4gIT09ICgxIC8gMCkgJiYgbiAhPT0gLSgxIC8gMCkpIHtcbiAgICAgICAgbiA9IChuID4gMCB8fCAtMSkgKiBNYXRoLmZsb29yKE1hdGguYWJzKG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIFRvVWludDMyKHgpIHtcbiAgICByZXR1cm4geCA+Pj4gMDtcbn1cblxuLy9cbi8vIEZ1bmN0aW9uXG4vLyA9PT09PT09PVxuLy9cblxuLy8gRVMtNSAxNS4zLjQuNVxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuMy40LjVcblxuZnVuY3Rpb24gRW1wdHkoKSB7fVxuXG5kZWZpbmVQcm9wZXJ0aWVzKEZ1bmN0aW9uUHJvdG90eXBlLCB7XG4gICAgYmluZDogZnVuY3Rpb24gYmluZCh0aGF0KSB7IC8vIC5sZW5ndGggaXMgMVxuICAgICAgICAvLyAxLiBMZXQgVGFyZ2V0IGJlIHRoZSB0aGlzIHZhbHVlLlxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcztcbiAgICAgICAgLy8gMi4gSWYgSXNDYWxsYWJsZShUYXJnZXQpIGlzIGZhbHNlLCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICghaXNGdW5jdGlvbih0YXJnZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICcgKyB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIExldCBBIGJlIGEgbmV3IChwb3NzaWJseSBlbXB0eSkgaW50ZXJuYWwgbGlzdCBvZiBhbGwgb2YgdGhlXG4gICAgICAgIC8vICAgYXJndW1lbnQgdmFsdWVzIHByb3ZpZGVkIGFmdGVyIHRoaXNBcmcgKGFyZzEsIGFyZzIgZXRjKSwgaW4gb3JkZXIuXG4gICAgICAgIC8vIFhYWCBzbGljZWRBcmdzIHdpbGwgc3RhbmQgaW4gZm9yIFwiQVwiIGlmIHVzZWRcbiAgICAgICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7IC8vIGZvciBub3JtYWwgY2FsbFxuICAgICAgICAvLyA0LiBMZXQgRiBiZSBhIG5ldyBuYXRpdmUgRUNNQVNjcmlwdCBvYmplY3QuXG4gICAgICAgIC8vIDExLiBTZXQgdGhlIFtbUHJvdG90eXBlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiB0byB0aGUgc3RhbmRhcmRcbiAgICAgICAgLy8gICBidWlsdC1pbiBGdW5jdGlvbiBwcm90b3R5cGUgb2JqZWN0IGFzIHNwZWNpZmllZCBpbiAxNS4zLjMuMS5cbiAgICAgICAgLy8gMTIuIFNldCB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiBhcyBkZXNjcmliZWQgaW5cbiAgICAgICAgLy8gICAxNS4zLjQuNS4xLlxuICAgICAgICAvLyAxMy4gU2V0IHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgIC8vICAgMTUuMy40LjUuMi5cbiAgICAgICAgLy8gMTQuIFNldCB0aGUgW1tIYXNJbnN0YW5jZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgIC8vICAgMTUuMy40LjUuMy5cbiAgICAgICAgdmFyIGJpbmRlciA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBib3VuZCkge1xuICAgICAgICAgICAgICAgIC8vIDE1LjMuNC41LjIgW1tDb25zdHJ1Y3RdXVxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kIG9mIGEgZnVuY3Rpb24gb2JqZWN0LFxuICAgICAgICAgICAgICAgIC8vIEYgdGhhdCB3YXMgY3JlYXRlZCB1c2luZyB0aGUgYmluZCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBhcmd1bWVudHMgRXh0cmFBcmdzLCB0aGUgZm9sbG93aW5nIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAgICAgICAgICAgICAvLyAxLiBMZXQgdGFyZ2V0IGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tUYXJnZXRGdW5jdGlvbl1dXG4gICAgICAgICAgICAgICAgLy8gICBpbnRlcm5hbCBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyAyLiBJZiB0YXJnZXQgaGFzIG5vIFtbQ29uc3RydWN0XV0gaW50ZXJuYWwgbWV0aG9kLCBhXG4gICAgICAgICAgICAgICAgLy8gICBUeXBlRXJyb3IgZXhjZXB0aW9uIGlzIHRocm93bi5cbiAgICAgICAgICAgICAgICAvLyAzLiBMZXQgYm91bmRBcmdzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZEFyZ3NdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gNC4gTGV0IGFyZ3MgYmUgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGVcbiAgICAgICAgICAgICAgICAvLyAgIGxpc3QgYm91bmRBcmdzIGluIHRoZSBzYW1lIG9yZGVyIGZvbGxvd2VkIGJ5IHRoZSBzYW1lXG4gICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuICAgICAgICAgICAgICAgIC8vIDUuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ29uc3RydWN0XV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIG1ldGhvZCBvZiB0YXJnZXQgcHJvdmlkaW5nIGFyZ3MgYXMgdGhlIGFyZ3VtZW50cy5cblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0YXJnZXQuYXBwbHkoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY29uY2F0KGFycmF5X3NsaWNlLmNhbGwoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIDE1LjMuNC41LjEgW1tDYWxsXV1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2Qgb2YgYSBmdW5jdGlvbiBvYmplY3QsIEYsXG4gICAgICAgICAgICAgICAgLy8gd2hpY2ggd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgdmFsdWUgYW5kIGEgbGlzdCBvZiBhcmd1bWVudHMgRXh0cmFBcmdzLCB0aGUgZm9sbG93aW5nXG4gICAgICAgICAgICAgICAgLy8gc3RlcHMgYXJlIHRha2VuOlxuICAgICAgICAgICAgICAgIC8vIDEuIExldCBib3VuZEFyZ3MgYmUgdGhlIHZhbHVlIG9mIEYncyBbW0JvdW5kQXJnc11dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAvLyAyLiBMZXQgYm91bmRUaGlzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZFRoaXNdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMy4gTGV0IHRhcmdldCBiZSB0aGUgdmFsdWUgb2YgRidzIFtbVGFyZ2V0RnVuY3Rpb25dXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gNC4gTGV0IGFyZ3MgYmUgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGVcbiAgICAgICAgICAgICAgICAvLyAgIGxpc3QgYm91bmRBcmdzIGluIHRoZSBzYW1lIG9yZGVyIGZvbGxvd2VkIGJ5IHRoZSBzYW1lXG4gICAgICAgICAgICAgICAgLy8gICB2YWx1ZXMgYXMgdGhlIGxpc3QgRXh0cmFBcmdzIGluIHRoZSBzYW1lIG9yZGVyLlxuICAgICAgICAgICAgICAgIC8vIDUuIFJldHVybiB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIFtbQ2FsbF1dIGludGVybmFsIG1ldGhvZFxuICAgICAgICAgICAgICAgIC8vICAgb2YgdGFyZ2V0IHByb3ZpZGluZyBib3VuZFRoaXMgYXMgdGhlIHRoaXMgdmFsdWUgYW5kXG4gICAgICAgICAgICAgICAgLy8gICBwcm92aWRpbmcgYXJncyBhcyB0aGUgYXJndW1lbnRzLlxuXG4gICAgICAgICAgICAgICAgLy8gZXF1aXY6IHRhcmdldC5jYWxsKHRoaXMsIC4uLmJvdW5kQXJncywgLi4uYXJncylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICB0aGF0LFxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMTUuIElmIHRoZSBbW0NsYXNzXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgVGFyZ2V0IGlzIFwiRnVuY3Rpb25cIiwgdGhlblxuICAgICAgICAvLyAgICAgYS4gTGV0IEwgYmUgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBUYXJnZXQgbWludXMgdGhlIGxlbmd0aCBvZiBBLlxuICAgICAgICAvLyAgICAgYi4gU2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gZWl0aGVyIDAgb3IgTCwgd2hpY2hldmVyIGlzXG4gICAgICAgIC8vICAgICAgIGxhcmdlci5cbiAgICAgICAgLy8gMTYuIEVsc2Ugc2V0IHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gMC5cblxuICAgICAgICB2YXIgYm91bmRMZW5ndGggPSBNYXRoLm1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuXG4gICAgICAgIC8vIDE3LiBTZXQgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGxlbmd0aCBvd24gcHJvcGVydHkgb2YgRiB0byB0aGUgdmFsdWVzXG4gICAgICAgIC8vICAgc3BlY2lmaWVkIGluIDE1LjMuNS4xLlxuICAgICAgICB2YXIgYm91bmRBcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYm91bmRBcmdzLnB1c2goJyQnICsgaSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBYWFggQnVpbGQgYSBkeW5hbWljIGZ1bmN0aW9uIHdpdGggZGVzaXJlZCBhbW91bnQgb2YgYXJndW1lbnRzIGlzIHRoZSBvbmx5XG4gICAgICAgIC8vIHdheSB0byBzZXQgdGhlIGxlbmd0aCBwcm9wZXJ0eSBvZiBhIGZ1bmN0aW9uLlxuICAgICAgICAvLyBJbiBlbnZpcm9ubWVudHMgd2hlcmUgQ29udGVudCBTZWN1cml0eSBQb2xpY2llcyBlbmFibGVkIChDaHJvbWUgZXh0ZW5zaW9ucyxcbiAgICAgICAgLy8gZm9yIGV4LikgYWxsIHVzZSBvZiBldmFsIG9yIEZ1bmN0aW9uIGNvc3RydWN0b3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgLy8gSG93ZXZlciBpbiBhbGwgb2YgdGhlc2UgZW52aXJvbm1lbnRzIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIGV4aXN0c1xuICAgICAgICAvLyBhbmQgc28gdGhpcyBjb2RlIHdpbGwgbmV2ZXIgYmUgZXhlY3V0ZWQuXG4gICAgICAgIHZhciBib3VuZCA9IEZ1bmN0aW9uKCdiaW5kZXInLCAncmV0dXJuIGZ1bmN0aW9uICgnICsgYm91bmRBcmdzLmpvaW4oJywnKSArICcpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0nKShiaW5kZXIpO1xuXG4gICAgICAgIGlmICh0YXJnZXQucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSB0YXJnZXQucHJvdG90eXBlO1xuICAgICAgICAgICAgYm91bmQucHJvdG90eXBlID0gbmV3IEVtcHR5KCk7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCBkYW5nbGluZyByZWZlcmVuY2VzLlxuICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gMTguIFNldCB0aGUgW1tFeHRlbnNpYmxlXV0gaW50ZXJuYWwgcHJvcGVydHkgb2YgRiB0byB0cnVlLlxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gMTkuIExldCB0aHJvd2VyIGJlIHRoZSBbW1Rocm93VHlwZUVycm9yXV0gZnVuY3Rpb24gT2JqZWN0ICgxMy4yLjMpLlxuICAgICAgICAvLyAyMC4gQ2FsbCB0aGUgW1tEZWZpbmVPd25Qcm9wZXJ0eV1dIGludGVybmFsIG1ldGhvZCBvZiBGIHdpdGhcbiAgICAgICAgLy8gICBhcmd1bWVudHMgXCJjYWxsZXJcIiwgUHJvcGVydHlEZXNjcmlwdG9yIHtbW0dldF1dOiB0aHJvd2VyLCBbW1NldF1dOlxuICAgICAgICAvLyAgIHRocm93ZXIsIFtbRW51bWVyYWJsZV1dOiBmYWxzZSwgW1tDb25maWd1cmFibGVdXTogZmFsc2V9LCBhbmRcbiAgICAgICAgLy8gICBmYWxzZS5cbiAgICAgICAgLy8gMjEuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG4gICAgICAgIC8vICAgYXJndW1lbnRzIFwiYXJndW1lbnRzXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlcixcbiAgICAgICAgLy8gICBbW1NldF1dOiB0aHJvd2VyLCBbW0VudW1lcmFibGVdXTogZmFsc2UsIFtbQ29uZmlndXJhYmxlXV06IGZhbHNlfSxcbiAgICAgICAgLy8gICBhbmQgZmFsc2UuXG5cbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyBOT1RFIEZ1bmN0aW9uIG9iamVjdHMgY3JlYXRlZCB1c2luZyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBkbyBub3RcbiAgICAgICAgLy8gaGF2ZSBhIHByb3RvdHlwZSBwcm9wZXJ0eSBvciB0aGUgW1tDb2RlXV0sIFtbRm9ybWFsUGFyYW1ldGVyc11dLCBhbmRcbiAgICAgICAgLy8gW1tTY29wZV1dIGludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICAgIC8vIFhYWCBjYW4ndCBkZWxldGUgcHJvdG90eXBlIGluIHB1cmUtanMuXG5cbiAgICAgICAgLy8gMjIuIFJldHVybiBGLlxuICAgICAgICByZXR1cm4gYm91bmQ7XG4gICAgfVxufSk7XG5cbi8vXG4vLyBBcnJheVxuLy8gPT09PT1cbi8vXG5cbi8vIEVTNSAxNS40LjMuMlxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNC4zLjJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2lzQXJyYXlcbmRlZmluZVByb3BlcnRpZXMoQXJyYXksIHsgaXNBcnJheTogaXNBcnJheSB9KTtcblxuXG52YXIgYm94ZWRTdHJpbmcgPSBPYmplY3QoJ2EnKTtcbnZhciBzcGxpdFN0cmluZyA9IGJveGVkU3RyaW5nWzBdICE9PSAnYScgfHwgISgwIGluIGJveGVkU3RyaW5nKTtcblxudmFyIHByb3Blcmx5Qm94ZXNDb250ZXh0ID0gZnVuY3Rpb24gcHJvcGVybHlCb3hlZChtZXRob2QpIHtcbiAgICAvLyBDaGVjayBub2RlIDAuNi4yMSBidWcgd2hlcmUgdGhpcmQgcGFyYW1ldGVyIGlzIG5vdCBib3hlZFxuICAgIHZhciBwcm9wZXJseUJveGVzTm9uU3RyaWN0ID0gdHJ1ZTtcbiAgICB2YXIgcHJvcGVybHlCb3hlc1N0cmljdCA9IHRydWU7XG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgICBtZXRob2QuY2FsbCgnZm9vJywgZnVuY3Rpb24gKF8sIF9fLCBjb250ZXh0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnKSB7IHByb3Blcmx5Qm94ZXNOb25TdHJpY3QgPSBmYWxzZTsgfVxuICAgICAgICB9KTtcblxuICAgICAgICBtZXRob2QuY2FsbChbMV0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIHByb3Blcmx5Qm94ZXNTdHJpY3QgPSB0eXBlb2YgdGhpcyA9PT0gJ3N0cmluZyc7XG4gICAgICAgIH0sICd4Jyk7XG4gICAgfVxuICAgIHJldHVybiAhIW1ldGhvZCAmJiBwcm9wZXJseUJveGVzTm9uU3RyaWN0ICYmIHByb3Blcmx5Qm94ZXNTdHJpY3Q7XG59O1xuXG5kZWZpbmVQcm9wZXJ0aWVzKEFycmF5UHJvdG90eXBlLCB7XG4gICAgZm9yRWFjaDogZnVuY3Rpb24gZm9yRWFjaChmdW4gLyosIHRoaXNwKi8pIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgc2VsZiA9IHNwbGl0U3RyaW5nICYmIGlzU3RyaW5nKHRoaXMpID8gdGhpcy5zcGxpdCgnJykgOiBvYmplY3QsXG4gICAgICAgICAgICB0aGlzcCA9IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgICAgIGkgPSAtMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIC8vIElmIG5vIGNhbGxiYWNrIGZ1bmN0aW9uIG9yIGlmIGNhbGxiYWNrIGlzIG5vdCBhIGNhbGxhYmxlIGZ1bmN0aW9uXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihmdW4pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IC8vIFRPRE8gbWVzc2FnZVxuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKCsraSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZikge1xuICAgICAgICAgICAgICAgIC8vIEludm9rZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBjYWxsLCBwYXNzaW5nIGFyZ3VtZW50czpcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0LCBwcm9wZXJ0eSB2YWx1ZSwgcHJvcGVydHkga2V5LCB0aGlzQXJnIG9iamVjdFxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHRcbiAgICAgICAgICAgICAgICBmdW4uY2FsbCh0aGlzcCwgc2VsZltpXSwgaSwgb2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0sICFwcm9wZXJseUJveGVzQ29udGV4dChBcnJheVByb3RvdHlwZS5mb3JFYWNoKSk7XG5cbi8vIEVTNSAxNS40LjQuMTRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuNC4xNFxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZlxudmFyIGhhc0ZpcmVmb3gySW5kZXhPZkJ1ZyA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mICYmIFswLCAxXS5pbmRleE9mKDEsIDIpICE9PSAtMTtcbmRlZmluZVByb3BlcnRpZXMoQXJyYXlQcm90b3R5cGUsIHtcbiAgICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mKHNvdWdodCAvKiwgZnJvbUluZGV4ICovICkge1xuICAgICAgICB2YXIgc2VsZiA9IHNwbGl0U3RyaW5nICYmIGlzU3RyaW5nKHRoaXMpID8gdGhpcy5zcGxpdCgnJykgOiB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaSA9IHRvSW50ZWdlcihhcmd1bWVudHNbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaGFuZGxlIG5lZ2F0aXZlIGluZGljZXNcbiAgICAgICAgaSA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heCgwLCBsZW5ndGggKyBpKTtcbiAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgaW4gc2VsZiAmJiBzZWxmW2ldID09PSBzb3VnaHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufSwgaGFzRmlyZWZveDJJbmRleE9mQnVnKTtcblxuLy9cbi8vIFN0cmluZ1xuLy8gPT09PT09XG4vL1xuXG4vLyBFUzUgMTUuNS40LjE0XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS41LjQuMTRcblxuLy8gW2J1Z2ZpeCwgSUUgbHQgOSwgZmlyZWZveCA0LCBLb25xdWVyb3IsIE9wZXJhLCBvYnNjdXJlIGJyb3dzZXJzXVxuLy8gTWFueSBicm93c2VycyBkbyBub3Qgc3BsaXQgcHJvcGVybHkgd2l0aCByZWd1bGFyIGV4cHJlc3Npb25zIG9yIHRoZXlcbi8vIGRvIG5vdCBwZXJmb3JtIHRoZSBzcGxpdCBjb3JyZWN0bHkgdW5kZXIgb2JzY3VyZSBjb25kaXRpb25zLlxuLy8gU2VlIGh0dHA6Ly9ibG9nLnN0ZXZlbmxldml0aGFuLmNvbS9hcmNoaXZlcy9jcm9zcy1icm93c2VyLXNwbGl0XG4vLyBJJ3ZlIHRlc3RlZCBpbiBtYW55IGJyb3dzZXJzIGFuZCB0aGlzIHNlZW1zIHRvIGNvdmVyIHRoZSBkZXZpYW50IG9uZXM6XG4vLyAgICAnYWInLnNwbGl0KC8oPzphYikqLykgc2hvdWxkIGJlIFtcIlwiLCBcIlwiXSwgbm90IFtcIlwiXVxuLy8gICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pIHNob3VsZCBiZSBbXCJcIiwgXCIuXCIsIFwiXCIsIFwiXCJdLCBub3QgW1wiXCIsIFwiXCJdXG4vLyAgICAndGVzc3QnLnNwbGl0KC8ocykqLykgc2hvdWxkIGJlIFtcInRcIiwgdW5kZWZpbmVkLCBcImVcIiwgXCJzXCIsIFwidFwiXSwgbm90XG4vLyAgICAgICBbdW5kZWZpbmVkLCBcInRcIiwgdW5kZWZpbmVkLCBcImVcIiwgLi4uXVxuLy8gICAgJycuc3BsaXQoLy4/Lykgc2hvdWxkIGJlIFtdLCBub3QgW1wiXCJdXG4vLyAgICAnLicuc3BsaXQoLygpKCkvKSBzaG91bGQgYmUgW1wiLlwiXSwgbm90IFtcIlwiLCBcIlwiLCBcIi5cIl1cblxudmFyIHN0cmluZ19zcGxpdCA9IFN0cmluZ1Byb3RvdHlwZS5zcGxpdDtcbmlmIChcbiAgICAnYWInLnNwbGl0KC8oPzphYikqLykubGVuZ3RoICE9PSAyIHx8XG4gICAgJy4nLnNwbGl0KC8oLj8pKC4/KS8pLmxlbmd0aCAhPT0gNCB8fFxuICAgICd0ZXNzdCcuc3BsaXQoLyhzKSovKVsxXSA9PT0gJ3QnIHx8XG4gICAgJ3Rlc3QnLnNwbGl0KC8oPzopLywgLTEpLmxlbmd0aCAhPT0gNCB8fFxuICAgICcnLnNwbGl0KC8uPy8pLmxlbmd0aCB8fFxuICAgICcuJy5zcGxpdCgvKCkoKS8pLmxlbmd0aCA+IDFcbikge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb21wbGlhbnRFeGVjTnBjZyA9IC8oKT8/Ly5leGVjKCcnKVsxXSA9PT0gdm9pZCAwOyAvLyBOUENHOiBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cFxuXG4gICAgICAgIFN0cmluZ1Byb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICAgICAgICB2YXIgc3RyaW5nID0gdGhpcztcbiAgICAgICAgICAgIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCAmJiBsaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBuYXRpdmUgc3BsaXRcbiAgICAgICAgICAgIGlmIChfdG9TdHJpbmcuY2FsbChzZXBhcmF0b3IpICE9PSAnW29iamVjdCBSZWdFeHBdJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmdfc3BsaXQuY2FsbCh0aGlzLCBzZXBhcmF0b3IsIGxpbWl0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IFtdLFxuICAgICAgICAgICAgICAgIGZsYWdzID0gKHNlcGFyYXRvci5pZ25vcmVDYXNlID8gJ2knIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXBhcmF0b3IubXVsdGlsaW5lICA/ICdtJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLmV4dGVuZGVkICAgPyAneCcgOiAnJykgKyAvLyBQcm9wb3NlZCBmb3IgRVM2XG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLnN0aWNreSAgICAgPyAneScgOiAnJyksIC8vIEZpcmVmb3ggMytcbiAgICAgICAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gMCxcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGBnbG9iYWxgIGFuZCBhdm9pZCBgbGFzdEluZGV4YCBpc3N1ZXMgYnkgd29ya2luZyB3aXRoIGEgY29weVxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjIsIG1hdGNoLCBsYXN0SW5kZXgsIGxhc3RMZW5ndGg7XG4gICAgICAgICAgICBzZXBhcmF0b3IgPSBuZXcgUmVnRXhwKHNlcGFyYXRvci5zb3VyY2UsIGZsYWdzICsgJ2cnKTtcbiAgICAgICAgICAgIHN0cmluZyArPSAnJzsgLy8gVHlwZS1jb252ZXJ0XG4gICAgICAgICAgICBpZiAoIWNvbXBsaWFudEV4ZWNOcGNnKSB7XG4gICAgICAgICAgICAgICAgLy8gRG9lc24ndCBuZWVkIGZsYWdzIGd5LCBidXQgdGhleSBkb24ndCBodXJ0XG4gICAgICAgICAgICAgICAgc2VwYXJhdG9yMiA9IG5ldyBSZWdFeHAoJ14nICsgc2VwYXJhdG9yLnNvdXJjZSArICckKD8hXFxcXHMpJywgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogVmFsdWVzIGZvciBgbGltaXRgLCBwZXIgdGhlIHNwZWM6XG4gICAgICAgICAgICAgKiBJZiB1bmRlZmluZWQ6IDQyOTQ5NjcyOTUgLy8gTWF0aC5wb3coMiwgMzIpIC0gMVxuICAgICAgICAgICAgICogSWYgMCwgSW5maW5pdHksIG9yIE5hTjogMFxuICAgICAgICAgICAgICogSWYgcG9zaXRpdmUgbnVtYmVyOiBsaW1pdCA9IE1hdGguZmxvb3IobGltaXQpOyBpZiAobGltaXQgPiA0Mjk0OTY3Mjk1KSBsaW1pdCAtPSA0Mjk0OTY3Mjk2O1xuICAgICAgICAgICAgICogSWYgbmVnYXRpdmUgbnVtYmVyOiA0Mjk0OTY3Mjk2IC0gTWF0aC5mbG9vcihNYXRoLmFicyhsaW1pdCkpXG4gICAgICAgICAgICAgKiBJZiBvdGhlcjogVHlwZS1jb252ZXJ0LCB0aGVuIHVzZSB0aGUgYWJvdmUgcnVsZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGltaXQgPSBsaW1pdCA9PT0gdm9pZCAwID9cbiAgICAgICAgICAgICAgICAtMSA+Pj4gMCA6IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcbiAgICAgICAgICAgICAgICBUb1VpbnQzMihsaW1pdCk7XG4gICAgICAgICAgICB3aGlsZSAobWF0Y2ggPSBzZXBhcmF0b3IuZXhlYyhzdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gYHNlcGFyYXRvci5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyXG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+IGxhc3RMYXN0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgsIG1hdGNoLmluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZyAmJiBtYXRjaC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXS5yZXBsYWNlKHNlcGFyYXRvcjIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFtpXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoLmluZGV4IDwgc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlQcm90b3R5cGUucHVzaC5hcHBseShvdXRwdXQsIG1hdGNoLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsYXN0TGVuZ3RoID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsYXN0TGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlcGFyYXRvci5sYXN0SW5kZXggPT09IG1hdGNoLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcGFyYXRvci5sYXN0SW5kZXgrKzsgLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0TGFzdEluZGV4ID09PSBzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RMZW5ndGggfHwgIXNlcGFyYXRvci50ZXN0KCcnKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChzdHJpbmcuc2xpY2UobGFzdExhc3RJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dC5sZW5ndGggPiBsaW1pdCA/IG91dHB1dC5zbGljZSgwLCBsaW1pdCkgOiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgfSgpKTtcblxuLy8gW2J1Z2ZpeCwgY2hyb21lXVxuLy8gSWYgc2VwYXJhdG9yIGlzIHVuZGVmaW5lZCwgdGhlbiB0aGUgcmVzdWx0IGFycmF5IGNvbnRhaW5zIGp1c3Qgb25lIFN0cmluZyxcbi8vIHdoaWNoIGlzIHRoZSB0aGlzIHZhbHVlIChjb252ZXJ0ZWQgdG8gYSBTdHJpbmcpLiBJZiBsaW1pdCBpcyBub3QgdW5kZWZpbmVkLFxuLy8gdGhlbiB0aGUgb3V0cHV0IGFycmF5IGlzIHRydW5jYXRlZCBzbyB0aGF0IGl0IGNvbnRhaW5zIG5vIG1vcmUgdGhhbiBsaW1pdFxuLy8gZWxlbWVudHMuXG4vLyBcIjBcIi5zcGxpdCh1bmRlZmluZWQsIDApIC0+IFtdXG59IGVsc2UgaWYgKCcwJy5zcGxpdCh2b2lkIDAsIDApLmxlbmd0aCkge1xuICAgIFN0cmluZ1Byb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uIHNwbGl0KHNlcGFyYXRvciwgbGltaXQpIHtcbiAgICAgICAgaWYgKHNlcGFyYXRvciA9PT0gdm9pZCAwICYmIGxpbWl0ID09PSAwKSB7IHJldHVybiBbXTsgfVxuICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmNhbGwodGhpcywgc2VwYXJhdG9yLCBsaW1pdCk7XG4gICAgfTtcbn1cblxuLy8gRUNNQS0yNjIsIDNyZCBCLjIuM1xuLy8gTm90IGFuIEVDTUFTY3JpcHQgc3RhbmRhcmQsIGFsdGhvdWdoIEVDTUFTY3JpcHQgM3JkIEVkaXRpb24gaGFzIGFcbi8vIG5vbi1ub3JtYXRpdmUgc2VjdGlvbiBzdWdnZXN0aW5nIHVuaWZvcm0gc2VtYW50aWNzIGFuZCBpdCBzaG91bGQgYmVcbi8vIG5vcm1hbGl6ZWQgYWNyb3NzIGFsbCBicm93c2Vyc1xuLy8gW2J1Z2ZpeCwgSUUgbHQgOV0gSUUgPCA5IHN1YnN0cigpIHdpdGggbmVnYXRpdmUgdmFsdWUgbm90IHdvcmtpbmcgaW4gSUVcbnZhciBzdHJpbmdfc3Vic3RyID0gU3RyaW5nUHJvdG90eXBlLnN1YnN0cjtcbnZhciBoYXNOZWdhdGl2ZVN1YnN0ckJ1ZyA9ICcnLnN1YnN0ciAmJiAnMGInLnN1YnN0cigtMSkgIT09ICdiJztcbmRlZmluZVByb3BlcnRpZXMoU3RyaW5nUHJvdG90eXBlLCB7XG4gICAgc3Vic3RyOiBmdW5jdGlvbiBzdWJzdHIoc3RhcnQsIGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nX3N1YnN0ci5jYWxsKFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIHN0YXJ0IDwgMCA/ICgoc3RhcnQgPSB0aGlzLmxlbmd0aCArIHN0YXJ0KSA8IDAgPyAwIDogc3RhcnQpIDogc3RhcnQsXG4gICAgICAgICAgICBsZW5ndGhcbiAgICAgICAgKTtcbiAgICB9XG59LCBoYXNOZWdhdGl2ZVN1YnN0ckJ1Zyk7XG5cbn0se31dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBbXG4gIC8vIHN0cmVhbWluZyB0cmFuc3BvcnRzXG4gIHJlcXVpcmUoJy4vdHJhbnNwb3J0L3dlYnNvY2tldCcpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L3hoci1zdHJlYW1pbmcnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC94ZHItc3RyZWFtaW5nJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvZXZlbnRzb3VyY2UnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9saWIvaWZyYW1lLXdyYXAnKShyZXF1aXJlKCcuL3RyYW5zcG9ydC9ldmVudHNvdXJjZScpKVxuXG4gIC8vIHBvbGxpbmcgdHJhbnNwb3J0c1xuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9odG1sZmlsZScpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2xpYi9pZnJhbWUtd3JhcCcpKHJlcXVpcmUoJy4vdHJhbnNwb3J0L2h0bWxmaWxlJykpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L3hoci1wb2xsaW5nJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQveGRyLXBvbGxpbmcnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9saWIvaWZyYW1lLXdyYXAnKShyZXF1aXJlKCcuL3RyYW5zcG9ydC94aHItcG9sbGluZycpKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9qc29ucC1wb2xsaW5nJylcbl07XG5cbn0se1wiLi90cmFuc3BvcnQvZXZlbnRzb3VyY2VcIjoyMCxcIi4vdHJhbnNwb3J0L2h0bWxmaWxlXCI6MjEsXCIuL3RyYW5zcG9ydC9qc29ucC1wb2xsaW5nXCI6MjMsXCIuL3RyYW5zcG9ydC9saWIvaWZyYW1lLXdyYXBcIjoyNixcIi4vdHJhbnNwb3J0L3dlYnNvY2tldFwiOjM4LFwiLi90cmFuc3BvcnQveGRyLXBvbGxpbmdcIjozOSxcIi4vdHJhbnNwb3J0L3hkci1zdHJlYW1pbmdcIjo0MCxcIi4vdHJhbnNwb3J0L3hoci1wb2xsaW5nXCI6NDEsXCIuL3RyYW5zcG9ydC94aHItc3RyZWFtaW5nXCI6NDJ9XSwxNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3MsZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZXZlbnQnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBYSFIgPSBnbG9iYWwuWE1MSHR0cFJlcXVlc3RcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmJyb3dzZXI6eGhyJyk7XG59XG5cbmZ1bmN0aW9uIEFic3RyYWN0WEhST2JqZWN0KG1ldGhvZCwgdXJsLCBwYXlsb2FkLCBvcHRzKSB7XG4gIGRlYnVnKG1ldGhvZCwgdXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9zdGFydChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyk7XG4gIH0sIDApO1xufVxuXG5pbmhlcml0cyhBYnN0cmFjdFhIUk9iamVjdCwgRXZlbnRFbWl0dGVyKTtcblxuQWJzdHJhY3RYSFJPYmplY3QucHJvdG90eXBlLl9zdGFydCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwYXlsb2FkLCBvcHRzKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB0cnkge1xuICAgIHRoaXMueGhyID0gbmV3IFhIUigpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICB9XG5cbiAgaWYgKCF0aGlzLnhocikge1xuICAgIGRlYnVnKCdubyB4aHInKTtcbiAgICB0aGlzLmVtaXQoJ2ZpbmlzaCcsIDAsICdubyB4aHIgc3VwcG9ydCcpO1xuICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzZXZlcmFsIGJyb3dzZXJzIGNhY2hlIFBPU1RzXG4gIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ3Q9JyArICgrbmV3IERhdGUoKSkpO1xuXG4gIC8vIEV4cGxvcmVyIHRlbmRzIHRvIGtlZXAgY29ubmVjdGlvbiBvcGVuLCBldmVuIGFmdGVyIHRoZVxuICAvLyB0YWIgZ2V0cyBjbG9zZWQ6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzUyODBcbiAgdGhpcy51bmxvYWRSZWYgPSB1dGlscy51bmxvYWRBZGQoZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3VubG9hZCBjbGVhbnVwJyk7XG4gICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcbiAgfSk7XG4gIHRyeSB7XG4gICAgdGhpcy54aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgaWYgKHRoaXMudGltZW91dCAmJiAndGltZW91dCcgaW4gdGhpcy54aHIpIHtcbiAgICAgIHRoaXMueGhyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7XG4gICAgICB0aGlzLnhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZGVidWcoJ3hociB0aW1lb3V0Jyk7XG4gICAgICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuICAgICAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgICAgIH07XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZGVidWcoJ2V4Y2VwdGlvbicsIGUpO1xuICAgIC8vIElFIHJhaXNlcyBhbiBleGNlcHRpb24gb24gd3JvbmcgcG9ydC5cbiAgICB0aGlzLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcbiAgICB0aGlzLl9jbGVhbnVwKGZhbHNlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoKCFvcHRzIHx8ICFvcHRzLm5vQ3JlZGVudGlhbHMpICYmIEFic3RyYWN0WEhST2JqZWN0LnN1cHBvcnRzQ09SUykge1xuICAgIGRlYnVnKCd3aXRoQ3JlZGVudGlhbHMnKTtcbiAgICAvLyBNb3ppbGxhIGRvY3Mgc2F5cyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9YTUxIdHRwUmVxdWVzdCA6XG4gICAgLy8gXCJUaGlzIG5ldmVyIGFmZmVjdHMgc2FtZS1zaXRlIHJlcXVlc3RzLlwiXG5cbiAgICB0aGlzLnhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICB9XG4gIGlmIChvcHRzICYmIG9wdHMuaGVhZGVycykge1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMueGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBvcHRzLmhlYWRlcnNba2V5XSk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNlbGYueGhyKSB7XG4gICAgICB2YXIgeCA9IHNlbGYueGhyO1xuICAgICAgdmFyIHRleHQsIHN0YXR1cztcbiAgICAgIGRlYnVnKCdyZWFkeVN0YXRlJywgeC5yZWFkeVN0YXRlKTtcbiAgICAgIHN3aXRjaCAoeC5yZWFkeVN0YXRlKSB7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIC8vIElFIGRvZXNuJ3QgbGlrZSBwZWVraW5nIGludG8gcmVzcG9uc2VUZXh0IG9yIHN0YXR1c1xuICAgICAgICAvLyBvbiBNaWNyb3NvZnQuWE1MSFRUUCBhbmQgcmVhZHlzdGF0ZT0zXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgc3RhdHVzID0geC5zdGF0dXM7XG4gICAgICAgICAgdGV4dCA9IHgucmVzcG9uc2VUZXh0O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgICB9XG4gICAgICAgIGRlYnVnKCdzdGF0dXMnLCBzdGF0dXMpO1xuICAgICAgICAvLyBJRSByZXR1cm5zIDEyMjMgZm9yIDIwNDogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTQ1MFxuICAgICAgICBpZiAoc3RhdHVzID09PSAxMjIzKSB7XG4gICAgICAgICAgc3RhdHVzID0gMjA0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSUUgZG9lcyByZXR1cm4gcmVhZHlzdGF0ZSA9PSAzIGZvciA0MDQgYW5zd2Vycy5cbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwICYmIHRleHQgJiYgdGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGVidWcoJ2NodW5rJyk7XG4gICAgICAgICAgc2VsZi5lbWl0KCdjaHVuaycsIHN0YXR1cywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHN0YXR1cyA9IHguc3RhdHVzO1xuICAgICAgICBkZWJ1Zygnc3RhdHVzJywgc3RhdHVzKTtcbiAgICAgICAgLy8gSUUgcmV0dXJucyAxMjIzIGZvciAyMDQ6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzE0NTBcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMTIyMykge1xuICAgICAgICAgIHN0YXR1cyA9IDIwNDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJRSByZXR1cm5zIHRoaXMgZm9yIGEgYmFkIHBvcnRcbiAgICAgICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9hYTM4Mzc3MCh2PXZzLjg1KS5hc3B4XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDEyMDA1IHx8IHN0YXR1cyA9PT0gMTIwMjkpIHtcbiAgICAgICAgICBzdGF0dXMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cywgeC5yZXNwb25zZVRleHQpO1xuICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIHN0YXR1cywgeC5yZXNwb25zZVRleHQpO1xuICAgICAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHRyeSB7XG4gICAgc2VsZi54aHIuc2VuZChwYXlsb2FkKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuICAgIHNlbGYuX2NsZWFudXAoZmFsc2UpO1xuICB9XG59O1xuXG5BYnN0cmFjdFhIUk9iamVjdC5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbihhYm9ydCkge1xuICBkZWJ1ZygnY2xlYW51cCcpO1xuICBpZiAoIXRoaXMueGhyKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIHV0aWxzLnVubG9hZERlbCh0aGlzLnVubG9hZFJlZik7XG5cbiAgLy8gSUUgbmVlZHMgdGhpcyBmaWVsZCB0byBiZSBhIGZ1bmN0aW9uXG4gIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge307XG4gIGlmICh0aGlzLnhoci5vbnRpbWVvdXQpIHtcbiAgICB0aGlzLnhoci5vbnRpbWVvdXQgPSBudWxsO1xuICB9XG5cbiAgaWYgKGFib3J0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMueGhyLmFib3J0KCk7XG4gICAgfSBjYXRjaCAoeCkge1xuICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgIH1cbiAgfVxuICB0aGlzLnVubG9hZFJlZiA9IHRoaXMueGhyID0gbnVsbDtcbn07XG5cbkFic3RyYWN0WEhST2JqZWN0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5fY2xlYW51cCh0cnVlKTtcbn07XG5cbkFic3RyYWN0WEhST2JqZWN0LmVuYWJsZWQgPSAhIVhIUjtcbi8vIG92ZXJyaWRlIFhNTEh0dHBSZXF1ZXN0IGZvciBJRTYvN1xuLy8gb2JmdXNjYXRlIHRvIGF2b2lkIGZpcmV3YWxsc1xudmFyIGF4byA9IFsnQWN0aXZlJ10uY29uY2F0KCdPYmplY3QnKS5qb2luKCdYJyk7XG5pZiAoIUFic3RyYWN0WEhST2JqZWN0LmVuYWJsZWQgJiYgKGF4byBpbiBnbG9iYWwpKSB7XG4gIGRlYnVnKCdvdmVycmlkaW5nIHhtbGh0dHByZXF1ZXN0Jyk7XG4gIFhIUiA9IGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbmV3IGdsb2JhbFtheG9dKCdNaWNyb3NvZnQuWE1MSFRUUCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgQWJzdHJhY3RYSFJPYmplY3QuZW5hYmxlZCA9ICEhbmV3IFhIUigpO1xufVxuXG52YXIgY29ycyA9IGZhbHNlO1xudHJ5IHtcbiAgY29ycyA9ICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYSFIoKTtcbn0gY2F0Y2ggKGlnbm9yZWQpIHtcbiAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxufVxuXG5BYnN0cmFjdFhIUk9iamVjdC5zdXBwb3J0c0NPUlMgPSBjb3JzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFic3RyYWN0WEhST2JqZWN0O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0sdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuLi8uLi91dGlscy9ldmVudFwiOjQ2LFwiLi4vLi4vdXRpbHMvdXJsXCI6NTIsXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwxODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG5tb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5FdmVudFNvdXJjZTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDE5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIERyaXZlciA9IGdsb2JhbC5XZWJTb2NrZXQgfHwgZ2xvYmFsLk1veldlYlNvY2tldDtcbmlmIChEcml2ZXIpIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBXZWJTb2NrZXRCcm93c2VyRHJpdmVyKHVybCkge1xuXHRcdHJldHVybiBuZXcgRHJpdmVyKHVybCk7XG5cdH07XG59IGVsc2Uge1xuXHRtb2R1bGUuZXhwb3J0cyA9IHVuZGVmaW5lZDtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDIwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIEV2ZW50U291cmNlUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL2V2ZW50c291cmNlJylcbiAgLCBYSFJDb3JzT2JqZWN0ID0gcmVxdWlyZSgnLi9zZW5kZXIveGhyLWNvcnMnKVxuICAsIEV2ZW50U291cmNlRHJpdmVyID0gcmVxdWlyZSgnZXZlbnRzb3VyY2UnKVxuICA7XG5cbmZ1bmN0aW9uIEV2ZW50U291cmNlVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG4gIGlmICghRXZlbnRTb3VyY2VUcmFuc3BvcnQuZW5hYmxlZCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cblxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9ldmVudHNvdXJjZScsIEV2ZW50U291cmNlUmVjZWl2ZXIsIFhIUkNvcnNPYmplY3QpO1xufVxuXG5pbmhlcml0cyhFdmVudFNvdXJjZVRyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuRXZlbnRTb3VyY2VUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gISFFdmVudFNvdXJjZURyaXZlcjtcbn07XG5cbkV2ZW50U291cmNlVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAnZXZlbnRzb3VyY2UnO1xuRXZlbnRTb3VyY2VUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRTb3VyY2VUcmFuc3BvcnQ7XG5cbn0se1wiLi9saWIvYWpheC1iYXNlZFwiOjI0LFwiLi9yZWNlaXZlci9ldmVudHNvdXJjZVwiOjI5LFwiLi9zZW5kZXIveGhyLWNvcnNcIjozNSxcImV2ZW50c291cmNlXCI6MTgsXCJpbmhlcml0c1wiOjU3fV0sMjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgSHRtbGZpbGVSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXIvaHRtbGZpbGUnKVxuICAsIFhIUkxvY2FsT2JqZWN0ID0gcmVxdWlyZSgnLi9zZW5kZXIveGhyLWxvY2FsJylcbiAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSByZXF1aXJlKCcuL2xpYi9hamF4LWJhc2VkJylcbiAgO1xuXG5mdW5jdGlvbiBIdG1sRmlsZVRyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIUh0bWxmaWxlUmVjZWl2ZXIuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL2h0bWxmaWxlJywgSHRtbGZpbGVSZWNlaXZlciwgWEhSTG9jYWxPYmplY3QpO1xufVxuXG5pbmhlcml0cyhIdG1sRmlsZVRyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuSHRtbEZpbGVUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKGluZm8pIHtcbiAgcmV0dXJuIEh0bWxmaWxlUmVjZWl2ZXIuZW5hYmxlZCAmJiBpbmZvLnNhbWVPcmlnaW47XG59O1xuXG5IdG1sRmlsZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2h0bWxmaWxlJztcbkh0bWxGaWxlVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEh0bWxGaWxlVHJhbnNwb3J0O1xuXG59LHtcIi4vbGliL2FqYXgtYmFzZWRcIjoyNCxcIi4vcmVjZWl2ZXIvaHRtbGZpbGVcIjozMCxcIi4vc2VuZGVyL3hoci1sb2NhbFwiOjM3LFwiaW5oZXJpdHNcIjo1N31dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbi8vIEZldyBjb29sIHRyYW5zcG9ydHMgZG8gd29yayBvbmx5IGZvciBzYW1lLW9yaWdpbi4gSW4gb3JkZXIgdG8gbWFrZVxuLy8gdGhlbSB3b3JrIGNyb3NzLWRvbWFpbiB3ZSBzaGFsbCB1c2UgaWZyYW1lLCBzZXJ2ZWQgZnJvbSB0aGVcbi8vIHJlbW90ZSBkb21haW4uIE5ldyBicm93c2VycyBoYXZlIGNhcGFiaWxpdGllcyB0byBjb21tdW5pY2F0ZSB3aXRoXG4vLyBjcm9zcyBkb21haW4gaWZyYW1lIHVzaW5nIHBvc3RNZXNzYWdlKCkuIEluIElFIGl0IHdhcyBpbXBsZW1lbnRlZFxuLy8gZnJvbSBJRSA4KywgYnV0IG9mIGNvdXJzZSwgSUUgZ290IHNvbWUgZGV0YWlscyB3cm9uZzpcbi8vICAgIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9jYzE5NzAxNSh2PVZTLjg1KS5hc3B4XG4vLyAgICBodHRwOi8vc3RldmVzb3VkZXJzLmNvbS9taXNjL3Rlc3QtcG9zdG1lc3NhZ2UucGhwXG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vdmVyc2lvbicpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91cmwnKVxuICAsIGlmcmFtZVV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvaWZyYW1lJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvZXZlbnQnKVxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JhbmRvbScpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp0cmFuc3BvcnQ6aWZyYW1lJyk7XG59XG5cbmZ1bmN0aW9uIElmcmFtZVRyYW5zcG9ydCh0cmFuc3BvcnQsIHRyYW5zVXJsLCBiYXNlVXJsKSB7XG4gIGlmICghSWZyYW1lVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5vcmlnaW4gPSB1cmxVdGlscy5nZXRPcmlnaW4oYmFzZVVybCk7XG4gIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gIHRoaXMudHJhbnNVcmwgPSB0cmFuc1VybDtcbiAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gIHRoaXMud2luZG93SWQgPSByYW5kb20uc3RyaW5nKDgpO1xuXG4gIHZhciBpZnJhbWVVcmwgPSB1cmxVdGlscy5hZGRQYXRoKGJhc2VVcmwsICcvaWZyYW1lLmh0bWwnKSArICcjJyArIHRoaXMud2luZG93SWQ7XG4gIGRlYnVnKHRyYW5zcG9ydCwgdHJhbnNVcmwsIGlmcmFtZVVybCk7XG5cbiAgdGhpcy5pZnJhbWVPYmogPSBpZnJhbWVVdGlscy5jcmVhdGVJZnJhbWUoaWZyYW1lVXJsLCBmdW5jdGlvbihyKSB7XG4gICAgZGVidWcoJ2VyciBjYWxsYmFjaycpO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCAxMDA2LCAnVW5hYmxlIHRvIGxvYWQgYW4gaWZyYW1lICgnICsgciArICcpJyk7XG4gICAgc2VsZi5jbG9zZSgpO1xuICB9KTtcblxuICB0aGlzLm9ubWVzc2FnZUNhbGxiYWNrID0gdGhpcy5fbWVzc2FnZS5iaW5kKHRoaXMpO1xuICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdtZXNzYWdlJywgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayk7XG59XG5cbmluaGVyaXRzKElmcmFtZVRyYW5zcG9ydCwgRXZlbnRFbWl0dGVyKTtcblxuSWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgaWYgKHRoaXMuaWZyYW1lT2JqKSB7XG4gICAgZXZlbnRVdGlscy5kZXRhY2hFdmVudCgnbWVzc2FnZScsIHRoaXMub25tZXNzYWdlQ2FsbGJhY2spO1xuICAgIHRyeSB7XG4gICAgICAvLyBXaGVuIHRoZSBpZnJhbWUgaXMgbm90IGxvYWRlZCwgSUUgcmFpc2VzIGFuIGV4Y2VwdGlvblxuICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuICAgICAgdGhpcy5wb3N0TWVzc2FnZSgnYycpO1xuICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICB9XG4gICAgdGhpcy5pZnJhbWVPYmouY2xlYW51cCgpO1xuICAgIHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcbiAgICB0aGlzLm9ubWVzc2FnZUNhbGxiYWNrID0gdGhpcy5pZnJhbWVPYmogPSBudWxsO1xuICB9XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQucHJvdG90eXBlLl9tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICBkZWJ1ZygnbWVzc2FnZScsIGUuZGF0YSk7XG4gIGlmICghdXJsVXRpbHMuaXNPcmlnaW5FcXVhbChlLm9yaWdpbiwgdGhpcy5vcmlnaW4pKSB7XG4gICAgZGVidWcoJ25vdCBzYW1lIG9yaWdpbicsIGUub3JpZ2luLCB0aGlzLm9yaWdpbik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGlmcmFtZU1lc3NhZ2U7XG4gIHRyeSB7XG4gICAgaWZyYW1lTWVzc2FnZSA9IEpTT04zLnBhcnNlKGUuZGF0YSk7XG4gIH0gY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICBkZWJ1ZygnYmFkIGpzb24nLCBlLmRhdGEpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpZnJhbWVNZXNzYWdlLndpbmRvd0lkICE9PSB0aGlzLndpbmRvd0lkKSB7XG4gICAgZGVidWcoJ21pc21hdGNoZWQgd2luZG93IGlkJywgaWZyYW1lTWVzc2FnZS53aW5kb3dJZCwgdGhpcy53aW5kb3dJZCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3dpdGNoIChpZnJhbWVNZXNzYWdlLnR5cGUpIHtcbiAgY2FzZSAncyc6XG4gICAgdGhpcy5pZnJhbWVPYmoubG9hZGVkKCk7XG4gICAgLy8gd2luZG93IGdsb2JhbCBkZXBlbmRlbmN5XG4gICAgdGhpcy5wb3N0TWVzc2FnZSgncycsIEpTT04zLnN0cmluZ2lmeShbXG4gICAgICB2ZXJzaW9uXG4gICAgLCB0aGlzLnRyYW5zcG9ydFxuICAgICwgdGhpcy50cmFuc1VybFxuICAgICwgdGhpcy5iYXNlVXJsXG4gICAgXSkpO1xuICAgIGJyZWFrO1xuICBjYXNlICd0JzpcbiAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgIGJyZWFrO1xuICBjYXNlICdjJzpcbiAgICB2YXIgY2RhdGE7XG4gICAgdHJ5IHtcbiAgICAgIGNkYXRhID0gSlNPTjMucGFyc2UoaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICBkZWJ1ZygnYmFkIGpzb24nLCBpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgY2RhdGFbMF0sIGNkYXRhWzFdKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgYnJlYWs7XG4gIH1cbn07XG5cbklmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG4gIGRlYnVnKCdwb3N0TWVzc2FnZScsIHR5cGUsIGRhdGEpO1xuICB0aGlzLmlmcmFtZU9iai5wb3N0KEpTT04zLnN0cmluZ2lmeSh7XG4gICAgd2luZG93SWQ6IHRoaXMud2luZG93SWRcbiAgLCB0eXBlOiB0eXBlXG4gICwgZGF0YTogZGF0YSB8fCAnJ1xuICB9KSwgdGhpcy5vcmlnaW4pO1xufTtcblxuSWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICBkZWJ1Zygnc2VuZCcsIG1lc3NhZ2UpO1xuICB0aGlzLnBvc3RNZXNzYWdlKCdtJywgbWVzc2FnZSk7XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gaWZyYW1lVXRpbHMuaWZyYW1lRW5hYmxlZDtcbn07XG5cbklmcmFtZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2lmcmFtZSc7XG5JZnJhbWVUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cbm1vZHVsZS5leHBvcnRzID0gSWZyYW1lVHJhbnNwb3J0O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi4vdXRpbHMvZXZlbnRcIjo0NixcIi4uL3V0aWxzL2lmcmFtZVwiOjQ3LFwiLi4vdXRpbHMvcmFuZG9tXCI6NTAsXCIuLi91dGlscy91cmxcIjo1MixcIi4uL3ZlcnNpb25cIjo1MyxcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1NyxcImpzb24zXCI6NTh9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbi8vIFRoZSBzaW1wbGVzdCBhbmQgbW9zdCByb2J1c3QgdHJhbnNwb3J0LCB1c2luZyB0aGUgd2VsbC1rbm93IGNyb3NzXG4vLyBkb21haW4gaGFjayAtIEpTT05QLiBUaGlzIHRyYW5zcG9ydCBpcyBxdWl0ZSBpbmVmZmljaWVudCAtIG9uZVxuLy8gbWVzc2FnZSBjb3VsZCB1c2UgdXAgdG8gb25lIGh0dHAgcmVxdWVzdC4gQnV0IGF0IGxlYXN0IGl0IHdvcmtzIGFsbW9zdFxuLy8gZXZlcnl3aGVyZS5cbi8vIEtub3duIGxpbWl0YXRpb25zOlxuLy8gICBvIHlvdSB3aWxsIGdldCBhIHNwaW5uaW5nIGN1cnNvclxuLy8gICBvIGZvciBLb25xdWVyb3IgYSBkdW1iIHRpbWVyIGlzIG5lZWRlZCB0byBkZXRlY3QgZXJyb3JzXG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBTZW5kZXJSZWNlaXZlciA9IHJlcXVpcmUoJy4vbGliL3NlbmRlci1yZWNlaXZlcicpXG4gICwgSnNvbnBSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXIvanNvbnAnKVxuICAsIGpzb25wU2VuZGVyID0gcmVxdWlyZSgnLi9zZW5kZXIvanNvbnAnKVxuICA7XG5cbmZ1bmN0aW9uIEpzb25QVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG4gIGlmICghSnNvblBUcmFuc3BvcnQuZW5hYmxlZCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cbiAgU2VuZGVyUmVjZWl2ZXIuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9qc29ucCcsIGpzb25wU2VuZGVyLCBKc29ucFJlY2VpdmVyKTtcbn1cblxuaW5oZXJpdHMoSnNvblBUcmFuc3BvcnQsIFNlbmRlclJlY2VpdmVyKTtcblxuSnNvblBUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gISFnbG9iYWwuZG9jdW1lbnQ7XG59O1xuXG5Kc29uUFRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2pzb25wLXBvbGxpbmcnO1xuSnNvblBUcmFuc3BvcnQucm91bmRUcmlwcyA9IDE7XG5Kc29uUFRyYW5zcG9ydC5uZWVkQm9keSA9IHRydWU7XG5cbm1vZHVsZS5leHBvcnRzID0gSnNvblBUcmFuc3BvcnQ7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4vbGliL3NlbmRlci1yZWNlaXZlclwiOjI4LFwiLi9yZWNlaXZlci9qc29ucFwiOjMxLFwiLi9zZW5kZXIvanNvbnBcIjozMyxcImluaGVyaXRzXCI6NTd9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIFNlbmRlclJlY2VpdmVyID0gcmVxdWlyZSgnLi9zZW5kZXItcmVjZWl2ZXInKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6YWpheC1iYXNlZCcpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBamF4U2VuZGVyKEFqYXhPYmplY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHVybCwgcGF5bG9hZCwgY2FsbGJhY2spIHtcbiAgICBkZWJ1ZygnY3JlYXRlIGFqYXggc2VuZGVyJywgdXJsLCBwYXlsb2FkKTtcbiAgICB2YXIgb3B0ID0ge307XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0LmhlYWRlcnMgPSB7J0NvbnRlbnQtdHlwZSc6ICd0ZXh0L3BsYWluJ307XG4gICAgfVxuICAgIHZhciBhamF4VXJsID0gdXJsVXRpbHMuYWRkUGF0aCh1cmwsICcveGhyX3NlbmQnKTtcbiAgICB2YXIgeG8gPSBuZXcgQWpheE9iamVjdCgnUE9TVCcsIGFqYXhVcmwsIHBheWxvYWQsIG9wdCk7XG4gICAgeG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICBkZWJ1ZygnZmluaXNoJywgc3RhdHVzKTtcbiAgICAgIHhvID0gbnVsbDtcblxuICAgICAgaWYgKHN0YXR1cyAhPT0gMjAwICYmIHN0YXR1cyAhPT0gMjA0KSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ2h0dHAgc3RhdHVzICcgKyBzdGF0dXMpKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ2Fib3J0Jyk7XG4gICAgICB4by5jbG9zZSgpO1xuICAgICAgeG8gPSBudWxsO1xuXG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdBYm9ydGVkJyk7XG4gICAgICBlcnIuY29kZSA9IDEwMDA7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIEFqYXhCYXNlZFRyYW5zcG9ydCh0cmFuc1VybCwgdXJsU3VmZml4LCBSZWNlaXZlciwgQWpheE9iamVjdCkge1xuICBTZW5kZXJSZWNlaXZlci5jYWxsKHRoaXMsIHRyYW5zVXJsLCB1cmxTdWZmaXgsIGNyZWF0ZUFqYXhTZW5kZXIoQWpheE9iamVjdCksIFJlY2VpdmVyLCBBamF4T2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoQWpheEJhc2VkVHJhbnNwb3J0LCBTZW5kZXJSZWNlaXZlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gQWpheEJhc2VkVHJhbnNwb3J0O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi4vLi4vdXRpbHMvdXJsXCI6NTIsXCIuL3NlbmRlci1yZWNlaXZlclwiOjI4LFwiZGVidWdcIjo1NSxcImluaGVyaXRzXCI6NTd9XSwyNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpidWZmZXJlZC1zZW5kZXInKTtcbn1cblxuZnVuY3Rpb24gQnVmZmVyZWRTZW5kZXIodXJsLCBzZW5kZXIpIHtcbiAgZGVidWcodXJsKTtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG4gIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICB0aGlzLnNlbmRlciA9IHNlbmRlcjtcbiAgdGhpcy51cmwgPSB1cmw7XG59XG5cbmluaGVyaXRzKEJ1ZmZlcmVkU2VuZGVyLCBFdmVudEVtaXR0ZXIpO1xuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgZGVidWcoJ3NlbmQnLCBtZXNzYWdlKTtcbiAgdGhpcy5zZW5kQnVmZmVyLnB1c2gobWVzc2FnZSk7XG4gIGlmICghdGhpcy5zZW5kU3RvcCkge1xuICAgIHRoaXMuc2VuZFNjaGVkdWxlKCk7XG4gIH1cbn07XG5cbi8vIEZvciBwb2xsaW5nIHRyYW5zcG9ydHMgaW4gYSBzaXR1YXRpb24gd2hlbiBpbiB0aGUgbWVzc2FnZSBjYWxsYmFjayxcbi8vIG5ldyBtZXNzYWdlIGlzIGJlaW5nIHNlbmQuIElmIHRoZSBzZW5kaW5nIGNvbm5lY3Rpb24gd2FzIHN0YXJ0ZWRcbi8vIGJlZm9yZSByZWNlaXZpbmcgb25lLCBpdCBpcyBwb3NzaWJsZSB0byBzYXR1cmF0ZSB0aGUgbmV0d29yayBhbmRcbi8vIHRpbWVvdXQgZHVlIHRvIHRoZSBsYWNrIG9mIHJlY2VpdmluZyBzb2NrZXQuIFRvIGF2b2lkIHRoYXQgd2UgZGVsYXlcbi8vIHNlbmRpbmcgbWVzc2FnZXMgYnkgc29tZSBzbWFsbCB0aW1lLCBpbiBvcmRlciB0byBsZXQgcmVjZWl2aW5nXG4vLyBjb25uZWN0aW9uIGJlIHN0YXJ0ZWQgYmVmb3JlaGFuZC4gVGhpcyBpcyBvbmx5IGEgaGFsZm1lYXN1cmUgYW5kXG4vLyBkb2VzIG5vdCBmaXggdGhlIGJpZyBwcm9ibGVtLCBidXQgaXQgZG9lcyBtYWtlIHRoZSB0ZXN0cyBnbyBtb3JlXG4vLyBzdGFibGUgb24gc2xvdyBuZXR3b3Jrcy5cbkJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5zZW5kU2NoZWR1bGVXYWl0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdzZW5kU2NoZWR1bGVXYWl0Jyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHRyZWY7XG4gIHRoaXMuc2VuZFN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnc2VuZFN0b3AnKTtcbiAgICBzZWxmLnNlbmRTdG9wID0gbnVsbDtcbiAgICBjbGVhclRpbWVvdXQodHJlZik7XG4gIH07XG4gIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd0aW1lb3V0Jyk7XG4gICAgc2VsZi5zZW5kU3RvcCA9IG51bGw7XG4gICAgc2VsZi5zZW5kU2NoZWR1bGUoKTtcbiAgfSwgMjUpO1xufTtcblxuQnVmZmVyZWRTZW5kZXIucHJvdG90eXBlLnNlbmRTY2hlZHVsZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1Zygnc2VuZFNjaGVkdWxlJywgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgdmFyIHBheWxvYWQgPSAnWycgKyB0aGlzLnNlbmRCdWZmZXIuam9pbignLCcpICsgJ10nO1xuICAgIHRoaXMuc2VuZFN0b3AgPSB0aGlzLnNlbmRlcih0aGlzLnVybCwgcGF5bG9hZCwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBzZWxmLnNlbmRTdG9wID0gbnVsbDtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZGVidWcoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgc2VsZi5lbWl0KCdjbG9zZScsIGVyci5jb2RlIHx8IDEwMDYsICdTZW5kaW5nIGVycm9yOiAnICsgZXJyKTtcbiAgICAgICAgc2VsZi5jbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5zZW5kU2NoZWR1bGVXYWl0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gIH1cbn07XG5cbkJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbkJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5fY2xlYW51cCgpO1xuICBpZiAodGhpcy5zZW5kU3RvcCkge1xuICAgIHRoaXMuc2VuZFN0b3AoKTtcbiAgICB0aGlzLnNlbmRTdG9wID0gbnVsbDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCdWZmZXJlZFNlbmRlcjtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDI2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIElmcmFtZVRyYW5zcG9ydCA9IHJlcXVpcmUoJy4uL2lmcmFtZScpXG4gICwgb2JqZWN0VXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9vYmplY3QnKVxuICA7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7XG5cbiAgZnVuY3Rpb24gSWZyYW1lV3JhcFRyYW5zcG9ydCh0cmFuc1VybCwgYmFzZVVybCkge1xuICAgIElmcmFtZVRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zcG9ydC50cmFuc3BvcnROYW1lLCB0cmFuc1VybCwgYmFzZVVybCk7XG4gIH1cblxuICBpbmhlcml0cyhJZnJhbWVXcmFwVHJhbnNwb3J0LCBJZnJhbWVUcmFuc3BvcnQpO1xuXG4gIElmcmFtZVdyYXBUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKHVybCwgaW5mbykge1xuICAgIGlmICghZ2xvYmFsLmRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGlmcmFtZUluZm8gPSBvYmplY3RVdGlscy5leHRlbmQoe30sIGluZm8pO1xuICAgIGlmcmFtZUluZm8uc2FtZU9yaWdpbiA9IHRydWU7XG4gICAgcmV0dXJuIHRyYW5zcG9ydC5lbmFibGVkKGlmcmFtZUluZm8pICYmIElmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCk7XG4gIH07XG5cbiAgSWZyYW1lV3JhcFRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2lmcmFtZS0nICsgdHJhbnNwb3J0LnRyYW5zcG9ydE5hbWU7XG4gIElmcmFtZVdyYXBUcmFuc3BvcnQubmVlZEJvZHkgPSB0cnVlO1xuICBJZnJhbWVXcmFwVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSBJZnJhbWVUcmFuc3BvcnQucm91bmRUcmlwcyArIHRyYW5zcG9ydC5yb3VuZFRyaXBzIC0gMTsgLy8gaHRtbCwgamF2YXNjcmlwdCAoMikgKyB0cmFuc3BvcnQgLSBubyBDT1JTICgxKVxuXG4gIElmcmFtZVdyYXBUcmFuc3BvcnQuZmFjYWRlVHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuXG4gIHJldHVybiBJZnJhbWVXcmFwVHJhbnNwb3J0O1xufTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi4vLi4vdXRpbHMvb2JqZWN0XCI6NDksXCIuLi9pZnJhbWVcIjoyMixcImluaGVyaXRzXCI6NTd9XSwyNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpwb2xsaW5nJyk7XG59XG5cbmZ1bmN0aW9uIFBvbGxpbmcoUmVjZWl2ZXIsIHJlY2VpdmVVcmwsIEFqYXhPYmplY3QpIHtcbiAgZGVidWcocmVjZWl2ZVVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB0aGlzLlJlY2VpdmVyID0gUmVjZWl2ZXI7XG4gIHRoaXMucmVjZWl2ZVVybCA9IHJlY2VpdmVVcmw7XG4gIHRoaXMuQWpheE9iamVjdCA9IEFqYXhPYmplY3Q7XG4gIHRoaXMuX3NjaGVkdWxlUmVjZWl2ZXIoKTtcbn1cblxuaW5oZXJpdHMoUG9sbGluZywgRXZlbnRFbWl0dGVyKTtcblxuUG9sbGluZy5wcm90b3R5cGUuX3NjaGVkdWxlUmVjZWl2ZXIgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19zY2hlZHVsZVJlY2VpdmVyJyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHBvbGwgPSB0aGlzLnBvbGwgPSBuZXcgdGhpcy5SZWNlaXZlcih0aGlzLnJlY2VpdmVVcmwsIHRoaXMuQWpheE9iamVjdCk7XG5cbiAgcG9sbC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuICAgIGRlYnVnKCdtZXNzYWdlJywgbXNnKTtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBtc2cpO1xuICB9KTtcblxuICBwb2xsLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gICAgZGVidWcoJ2Nsb3NlJywgY29kZSwgcmVhc29uLCBzZWxmLnBvbGxJc0Nsb3NpbmcpO1xuICAgIHNlbGYucG9sbCA9IHBvbGwgPSBudWxsO1xuXG4gICAgaWYgKCFzZWxmLnBvbGxJc0Nsb3NpbmcpIHtcbiAgICAgIGlmIChyZWFzb24gPT09ICduZXR3b3JrJykge1xuICAgICAgICBzZWxmLl9zY2hlZHVsZVJlY2VpdmVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgY29kZSB8fCAxMDA2LCByZWFzb24pO1xuICAgICAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG5Qb2xsaW5nLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5wb2xsSXNDbG9zaW5nID0gdHJ1ZTtcbiAgaWYgKHRoaXMucG9sbCkge1xuICAgIHRoaXMucG9sbC5hYm9ydCgpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvbGxpbmc7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIEJ1ZmZlcmVkU2VuZGVyID0gcmVxdWlyZSgnLi9idWZmZXJlZC1zZW5kZXInKVxuICAsIFBvbGxpbmcgPSByZXF1aXJlKCcuL3BvbGxpbmcnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6c2VuZGVyLXJlY2VpdmVyJyk7XG59XG5cbmZ1bmN0aW9uIFNlbmRlclJlY2VpdmVyKHRyYW5zVXJsLCB1cmxTdWZmaXgsIHNlbmRlckZ1bmMsIFJlY2VpdmVyLCBBamF4T2JqZWN0KSB7XG4gIHZhciBwb2xsVXJsID0gdXJsVXRpbHMuYWRkUGF0aCh0cmFuc1VybCwgdXJsU3VmZml4KTtcbiAgZGVidWcocG9sbFVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgQnVmZmVyZWRTZW5kZXIuY2FsbCh0aGlzLCB0cmFuc1VybCwgc2VuZGVyRnVuYyk7XG5cbiAgdGhpcy5wb2xsID0gbmV3IFBvbGxpbmcoUmVjZWl2ZXIsIHBvbGxVcmwsIEFqYXhPYmplY3QpO1xuICB0aGlzLnBvbGwub24oJ21lc3NhZ2UnLCBmdW5jdGlvbihtc2cpIHtcbiAgICBkZWJ1ZygncG9sbCBtZXNzYWdlJywgbXNnKTtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBtc2cpO1xuICB9KTtcbiAgdGhpcy5wb2xsLm9uY2UoJ2Nsb3NlJywgZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gICAgZGVidWcoJ3BvbGwgY2xvc2UnLCBjb2RlLCByZWFzb24pO1xuICAgIHNlbGYucG9sbCA9IG51bGw7XG4gICAgc2VsZi5lbWl0KCdjbG9zZScsIGNvZGUsIHJlYXNvbik7XG4gICAgc2VsZi5jbG9zZSgpO1xuICB9KTtcbn1cblxuaW5oZXJpdHMoU2VuZGVyUmVjZWl2ZXIsIEJ1ZmZlcmVkU2VuZGVyKTtcblxuU2VuZGVyUmVjZWl2ZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIEJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5jbG9zZS5jYWxsKHRoaXMpO1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgaWYgKHRoaXMucG9sbCkge1xuICAgIHRoaXMucG9sbC5hYm9ydCgpO1xuICAgIHRoaXMucG9sbCA9IG51bGw7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2VuZGVyUmVjZWl2ZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCIuLi8uLi91dGlscy91cmxcIjo1MixcIi4vYnVmZmVyZWQtc2VuZGVyXCI6MjUsXCIuL3BvbGxpbmdcIjoyNyxcImRlYnVnXCI6NTUsXCJpbmhlcml0c1wiOjU3fV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIEV2ZW50U291cmNlRHJpdmVyID0gcmVxdWlyZSgnZXZlbnRzb3VyY2UnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6ZXZlbnRzb3VyY2UnKTtcbn1cblxuZnVuY3Rpb24gRXZlbnRTb3VyY2VSZWNlaXZlcih1cmwpIHtcbiAgZGVidWcodXJsKTtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZXMgPSB0aGlzLmVzID0gbmV3IEV2ZW50U291cmNlRHJpdmVyKHVybCk7XG4gIGVzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnbWVzc2FnZScsIGUuZGF0YSk7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZGVjb2RlVVJJKGUuZGF0YSkpO1xuICB9O1xuICBlcy5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdlcnJvcicsIGVzLnJlYWR5U3RhdGUsIGUpO1xuICAgIC8vIEVTIG9uIHJlY29ubmVjdGlvbiBoYXMgcmVhZHlTdGF0ZSA9IDAgb3IgMS5cbiAgICAvLyBvbiBuZXR3b3JrIGVycm9yIGl0J3MgQ0xPU0VEID0gMlxuICAgIHZhciByZWFzb24gPSAoZXMucmVhZHlTdGF0ZSAhPT0gMiA/ICduZXR3b3JrJyA6ICdwZXJtYW5lbnQnKTtcbiAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgc2VsZi5fY2xvc2UocmVhc29uKTtcbiAgfTtcbn1cblxuaW5oZXJpdHMoRXZlbnRTb3VyY2VSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuRXZlbnRTb3VyY2VSZWNlaXZlci5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Fib3J0Jyk7XG4gIHRoaXMuX2NsZWFudXAoKTtcbiAgdGhpcy5fY2xvc2UoJ3VzZXInKTtcbn07XG5cbkV2ZW50U291cmNlUmVjZWl2ZXIucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjbGVhbnVwJyk7XG4gIHZhciBlcyA9IHRoaXMuZXM7XG4gIGlmIChlcykge1xuICAgIGVzLm9ubWVzc2FnZSA9IGVzLm9uZXJyb3IgPSBudWxsO1xuICAgIGVzLmNsb3NlKCk7XG4gICAgdGhpcy5lcyA9IG51bGw7XG4gIH1cbn07XG5cbkV2ZW50U291cmNlUmVjZWl2ZXIucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICBkZWJ1ZygnY2xvc2UnLCByZWFzb24pO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIC8vIFNhZmFyaSBhbmQgY2hyb21lIDwgMTUgY3Jhc2ggaWYgd2UgY2xvc2Ugd2luZG93IGJlZm9yZVxuICAvLyB3YWl0aW5nIGZvciBFUyBjbGVhbnVwLiBTZWU6XG4gIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD04OTE1NVxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBudWxsLCByZWFzb24pO1xuICAgIHNlbGYucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIH0sIDIwMCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50U291cmNlUmVjZWl2ZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImV2ZW50c291cmNlXCI6MTgsXCJpbmhlcml0c1wiOjU3fV0sMzA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBpZnJhbWVVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2lmcmFtZScpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3JhbmRvbScpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjpodG1sZmlsZScpO1xufVxuXG5mdW5jdGlvbiBIdG1sZmlsZVJlY2VpdmVyKHVybCkge1xuICBkZWJ1Zyh1cmwpO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZnJhbWVVdGlscy5wb2xsdXRlR2xvYmFsTmFtZXNwYWNlKCk7XG5cbiAgdGhpcy5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoNik7XG4gIHVybCA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybCwgJ2M9JyArIGRlY29kZVVSSUNvbXBvbmVudChpZnJhbWVVdGlscy5XUHJlZml4ICsgJy4nICsgdGhpcy5pZCkpO1xuXG4gIGRlYnVnKCd1c2luZyBodG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkKTtcbiAgdmFyIGNvbnN0cnVjdEZ1bmMgPSBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCA/XG4gICAgICBpZnJhbWVVdGlscy5jcmVhdGVIdG1sZmlsZSA6IGlmcmFtZVV0aWxzLmNyZWF0ZUlmcmFtZTtcblxuICBnbG9iYWxbaWZyYW1lVXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0gPSB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ3N0YXJ0Jyk7XG4gICAgICBzZWxmLmlmcmFtZU9iai5sb2FkZWQoKTtcbiAgICB9XG4gICwgbWVzc2FnZTogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgZGVidWcoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIGRhdGEpO1xuICAgIH1cbiAgLCBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdzdG9wJyk7XG4gICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICBzZWxmLl9jbG9zZSgnbmV0d29yaycpO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5pZnJhbWVPYmogPSBjb25zdHJ1Y3RGdW5jKHVybCwgZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ2NhbGxiYWNrJyk7XG4gICAgc2VsZi5fY2xlYW51cCgpO1xuICAgIHNlbGYuX2Nsb3NlKCdwZXJtYW5lbnQnKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKEh0bWxmaWxlUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbkh0bWxmaWxlUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdhYm9ydCcpO1xuICB0aGlzLl9jbGVhbnVwKCk7XG4gIHRoaXMuX2Nsb3NlKCd1c2VyJyk7XG59O1xuXG5IdG1sZmlsZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgaWYgKHRoaXMuaWZyYW1lT2JqKSB7XG4gICAgdGhpcy5pZnJhbWVPYmouY2xlYW51cCgpO1xuICAgIHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcbiAgfVxuICBkZWxldGUgZ2xvYmFsW2lmcmFtZVV0aWxzLldQcmVmaXhdW3RoaXMuaWRdO1xufTtcblxuSHRtbGZpbGVSZWNlaXZlci5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIGRlYnVnKCdfY2xvc2UnLCByZWFzb24pO1xuICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbkh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkID0gZmFsc2U7XG5cbi8vIG9iZnVzY2F0ZSB0byBhdm9pZCBmaXJld2FsbHNcbnZhciBheG8gPSBbJ0FjdGl2ZSddLmNvbmNhdCgnT2JqZWN0Jykuam9pbignWCcpO1xuaWYgKGF4byBpbiBnbG9iYWwpIHtcbiAgdHJ5IHtcbiAgICBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCA9ICEhbmV3IGdsb2JhbFtheG9dKCdodG1sZmlsZScpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICB9XG59XG5cbkh0bWxmaWxlUmVjZWl2ZXIuZW5hYmxlZCA9IEh0bWxmaWxlUmVjZWl2ZXIuaHRtbGZpbGVFbmFibGVkIHx8IGlmcmFtZVV0aWxzLmlmcmFtZUVuYWJsZWQ7XG5cbm1vZHVsZS5leHBvcnRzID0gSHRtbGZpbGVSZWNlaXZlcjtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi4vLi4vdXRpbHMvaWZyYW1lXCI6NDcsXCIuLi8uLi91dGlscy9yYW5kb21cIjo1MCxcIi4uLy4uL3V0aWxzL3VybFwiOjUyLFwiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2lmcmFtZScpXG4gICwgcmFuZG9tID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvcmFuZG9tJylcbiAgLCBicm93c2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvYnJvd3NlcicpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy91cmwnKVxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6anNvbnAnKTtcbn1cblxuZnVuY3Rpb24gSnNvbnBSZWNlaXZlcih1cmwpIHtcbiAgZGVidWcodXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB1dGlscy5wb2xsdXRlR2xvYmFsTmFtZXNwYWNlKCk7XG5cbiAgdGhpcy5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoNik7XG4gIHZhciB1cmxXaXRoSWQgPSB1cmxVdGlscy5hZGRRdWVyeSh1cmwsICdjPScgKyBlbmNvZGVVUklDb21wb25lbnQodXRpbHMuV1ByZWZpeCArICcuJyArIHRoaXMuaWQpKTtcblxuICBnbG9iYWxbdXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0gPSB0aGlzLl9jYWxsYmFjay5iaW5kKHRoaXMpO1xuICB0aGlzLl9jcmVhdGVTY3JpcHQodXJsV2l0aElkKTtcblxuICAvLyBGYWxsYmFjayBtb3N0bHkgZm9yIEtvbnF1ZXJvciAtIHN0dXBpZCB0aW1lciwgMzUgc2Vjb25kcyBzaGFsbCBiZSBwbGVudHkuXG4gIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndGltZW91dCcpO1xuICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5ICh0aW1lb3V0KScpKTtcbiAgfSwgSnNvbnBSZWNlaXZlci50aW1lb3V0KTtcbn1cblxuaW5oZXJpdHMoSnNvbnBSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Fib3J0Jyk7XG4gIGlmIChnbG9iYWxbdXRpbHMuV1ByZWZpeF1bdGhpcy5pZF0pIHtcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdKU09OUCB1c2VyIGFib3J0ZWQgcmVhZCcpO1xuICAgIGVyci5jb2RlID0gMTAwMDtcbiAgICB0aGlzLl9hYm9ydChlcnIpO1xuICB9XG59O1xuXG5Kc29ucFJlY2VpdmVyLnRpbWVvdXQgPSAzNTAwMDtcbkpzb25wUmVjZWl2ZXIuc2NyaXB0RXJyb3JUaW1lb3V0ID0gMTAwMDtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX2NhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICBkZWJ1ZygnX2NhbGxiYWNrJywgZGF0YSk7XG4gIHRoaXMuX2NsZWFudXAoKTtcblxuICBpZiAodGhpcy5hYm9ydGluZykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChkYXRhKSB7XG4gICAgZGVidWcoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgfVxuICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgJ25ldHdvcmsnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9hYm9ydCA9IGZ1bmN0aW9uKGVycikge1xuICBkZWJ1ZygnX2Fib3J0JywgZXJyKTtcbiAgdGhpcy5fY2xlYW51cCgpO1xuICB0aGlzLmFib3J0aW5nID0gdHJ1ZTtcbiAgdGhpcy5lbWl0KCdjbG9zZScsIGVyci5jb2RlLCBlcnIubWVzc2FnZSk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5Kc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcbiAgaWYgKHRoaXMuc2NyaXB0Mikge1xuICAgIHRoaXMuc2NyaXB0Mi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0Mik7XG4gICAgdGhpcy5zY3JpcHQyID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5zY3JpcHQpIHtcbiAgICB2YXIgc2NyaXB0ID0gdGhpcy5zY3JpcHQ7XG4gICAgLy8gVW5mb3J0dW5hdGVseSwgeW91IGNhbid0IHJlYWxseSBhYm9ydCBzY3JpcHQgbG9hZGluZyBvZlxuICAgIC8vIHRoZSBzY3JpcHQuXG4gICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gc2NyaXB0Lm9uZXJyb3IgPVxuICAgICAgICBzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9uY2xpY2sgPSBudWxsO1xuICAgIHRoaXMuc2NyaXB0ID0gbnVsbDtcbiAgfVxuICBkZWxldGUgZ2xvYmFsW3V0aWxzLldQcmVmaXhdW3RoaXMuaWRdO1xufTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX3NjcmlwdEVycm9yID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdfc2NyaXB0RXJyb3InKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAodGhpcy5lcnJvclRpbWVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBpZiAoIXNlbGYubG9hZGVkT2theSkge1xuICAgICAgc2VsZi5fYWJvcnQobmV3IEVycm9yKCdKU09OUCBzY3JpcHQgbG9hZGVkIGFibm9ybWFsbHkgKG9uZXJyb3IpJykpO1xuICAgIH1cbiAgfSwgSnNvbnBSZWNlaXZlci5zY3JpcHRFcnJvclRpbWVvdXQpO1xufTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX2NyZWF0ZVNjcmlwdCA9IGZ1bmN0aW9uKHVybCkge1xuICBkZWJ1ZygnX2NyZWF0ZVNjcmlwdCcsIHVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHNjcmlwdCA9IHRoaXMuc2NyaXB0ID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICB2YXIgc2NyaXB0MjsgIC8vIE9wZXJhIHN5bmNocm9ub3VzIGxvYWQgdHJpY2suXG5cbiAgc2NyaXB0LmlkID0gJ2EnICsgcmFuZG9tLnN0cmluZyg4KTtcbiAgc2NyaXB0LnNyYyA9IHVybDtcbiAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgc2NyaXB0LmNoYXJzZXQgPSAnVVRGLTgnO1xuICBzY3JpcHQub25lcnJvciA9IHRoaXMuX3NjcmlwdEVycm9yLmJpbmQodGhpcyk7XG4gIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25sb2FkJyk7XG4gICAgc2VsZi5fYWJvcnQobmV3IEVycm9yKCdKU09OUCBzY3JpcHQgbG9hZGVkIGFibm9ybWFsbHkgKG9ubG9hZCknKSk7XG4gIH07XG5cbiAgLy8gSUU5IGZpcmVzICdlcnJvcicgZXZlbnQgYWZ0ZXIgb25yZWFkeXN0YXRlY2hhbmdlIG9yIGJlZm9yZSwgaW4gcmFuZG9tIG9yZGVyLlxuICAvLyBVc2UgbG9hZGVkT2theSB0byBkZXRlcm1pbmUgaWYgYWN0dWFsbHkgZXJyb3JlZFxuICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIHNjcmlwdC5yZWFkeVN0YXRlKTtcbiAgICBpZiAoL2xvYWRlZHxjbG9zZWQvLnRlc3Qoc2NyaXB0LnJlYWR5U3RhdGUpKSB7XG4gICAgICBpZiAoc2NyaXB0ICYmIHNjcmlwdC5odG1sRm9yICYmIHNjcmlwdC5vbmNsaWNrKSB7XG4gICAgICAgIHNlbGYubG9hZGVkT2theSA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gSW4gSUUsIGFjdHVhbGx5IGV4ZWN1dGUgdGhlIHNjcmlwdC5cbiAgICAgICAgICBzY3JpcHQub25jbGljaygpO1xuICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2NyaXB0KSB7XG4gICAgICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbnJlYWR5c3RhdGVjaGFuZ2UpJykpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgLy8gSUU6IGV2ZW50L2h0bWxGb3Ivb25jbGljayB0cmljay5cbiAgLy8gT25lIGNhbid0IHJlbHkgb24gcHJvcGVyIG9yZGVyIGZvciBvbnJlYWR5c3RhdGVjaGFuZ2UuIEluIG9yZGVyIHRvXG4gIC8vIG1ha2Ugc3VyZSwgc2V0IGEgJ2h0bWxGb3InIGFuZCAnZXZlbnQnIHByb3BlcnRpZXMsIHNvIHRoYXRcbiAgLy8gc2NyaXB0IGNvZGUgd2lsbCBiZSBpbnN0YWxsZWQgYXMgJ29uY2xpY2snIGhhbmRsZXIgZm9yIHRoZVxuICAvLyBzY3JpcHQgb2JqZWN0LiBMYXRlciwgb25yZWFkeXN0YXRlY2hhbmdlLCBtYW51YWxseSBleGVjdXRlIHRoaXNcbiAgLy8gY29kZS4gRkYgYW5kIENocm9tZSBkb2Vzbid0IHdvcmsgd2l0aCAnZXZlbnQnIGFuZCAnaHRtbEZvcidcbiAgLy8gc2V0LiBGb3IgcmVmZXJlbmNlIHNlZTpcbiAgLy8gICBodHRwOi8vamF1Ym91cmcubmV0LzIwMTAvMDcvbG9hZGluZy1zY3JpcHQtYXMtb25jbGljay1oYW5kbGVyLW9mLmh0bWxcbiAgLy8gQWxzbywgcmVhZCBvbiB0aGF0IGFib3V0IHNjcmlwdCBvcmRlcmluZzpcbiAgLy8gICBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvRHluYW1pY19TY3JpcHRfRXhlY3V0aW9uX09yZGVyXG4gIGlmICh0eXBlb2Ygc2NyaXB0LmFzeW5jID09PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcbiAgICAvLyBBY2NvcmRpbmcgdG8gbW96aWxsYSBkb2NzLCBpbiByZWNlbnQgYnJvd3NlcnMgc2NyaXB0LmFzeW5jIGRlZmF1bHRzXG4gICAgLy8gdG8gJ3RydWUnLCBzbyB3ZSBtYXkgdXNlIGl0IHRvIGRldGVjdCBhIGdvb2QgYnJvd3NlcjpcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9IVE1ML0VsZW1lbnQvc2NyaXB0XG4gICAgaWYgKCFicm93c2VyLmlzT3BlcmEoKSkge1xuICAgICAgLy8gTmFpdmVseSBhc3N1bWUgd2UncmUgaW4gSUVcbiAgICAgIHRyeSB7XG4gICAgICAgIHNjcmlwdC5odG1sRm9yID0gc2NyaXB0LmlkO1xuICAgICAgICBzY3JpcHQuZXZlbnQgPSAnb25jbGljayc7XG4gICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICAgIH1cbiAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9wZXJhLCBzZWNvbmQgc3luYyBzY3JpcHQgaGFja1xuICAgICAgc2NyaXB0MiA9IHRoaXMuc2NyaXB0MiA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdDIudGV4dCA9IFwidHJ5e3ZhciBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ1wiICsgc2NyaXB0LmlkICsgXCInKTsgaWYoYSlhLm9uZXJyb3IoKTt9Y2F0Y2goeCl7fTtcIjtcbiAgICAgIHNjcmlwdC5hc3luYyA9IHNjcmlwdDIuYXN5bmMgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBzY3JpcHQuYXN5bmMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgfVxuXG4gIHZhciBoZWFkID0gZ2xvYmFsLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIGhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgaGVhZC5maXJzdENoaWxkKTtcbiAgaWYgKHNjcmlwdDIpIHtcbiAgICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQyLCBoZWFkLmZpcnN0Q2hpbGQpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpzb25wUmVjZWl2ZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uLy4uL3V0aWxzL2Jyb3dzZXJcIjo0NCxcIi4uLy4uL3V0aWxzL2lmcmFtZVwiOjQ3LFwiLi4vLi4vdXRpbHMvcmFuZG9tXCI6NTAsXCIuLi8uLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnJlY2VpdmVyOnhocicpO1xufVxuXG5mdW5jdGlvbiBYaHJSZWNlaXZlcih1cmwsIEFqYXhPYmplY3QpIHtcbiAgZGVidWcodXJsKTtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB0aGlzLmJ1ZmZlclBvc2l0aW9uID0gMDtcblxuICB0aGlzLnhvID0gbmV3IEFqYXhPYmplY3QoJ1BPU1QnLCB1cmwsIG51bGwpO1xuICB0aGlzLnhvLm9uKCdjaHVuaycsIHRoaXMuX2NodW5rSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgdGhpcy54by5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbihzdGF0dXMsIHRleHQpIHtcbiAgICBkZWJ1ZygnZmluaXNoJywgc3RhdHVzLCB0ZXh0KTtcbiAgICBzZWxmLl9jaHVua0hhbmRsZXIoc3RhdHVzLCB0ZXh0KTtcbiAgICBzZWxmLnhvID0gbnVsbDtcbiAgICB2YXIgcmVhc29uID0gc3RhdHVzID09PSAyMDAgPyAnbmV0d29yaycgOiAncGVybWFuZW50JztcbiAgICBkZWJ1ZygnY2xvc2UnLCByZWFzb24pO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBudWxsLCByZWFzb24pO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKFhoclJlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXG5YaHJSZWNlaXZlci5wcm90b3R5cGUuX2NodW5rSGFuZGxlciA9IGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuICBkZWJ1ZygnX2NodW5rSGFuZGxlcicsIHN0YXR1cyk7XG4gIGlmIChzdGF0dXMgIT09IDIwMCB8fCAhdGV4dCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZvciAodmFyIGlkeCA9IC0xOyA7IHRoaXMuYnVmZmVyUG9zaXRpb24gKz0gaWR4ICsgMSkge1xuICAgIHZhciBidWYgPSB0ZXh0LnNsaWNlKHRoaXMuYnVmZmVyUG9zaXRpb24pO1xuICAgIGlkeCA9IGJ1Zi5pbmRleE9mKCdcXG4nKTtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciBtc2cgPSBidWYuc2xpY2UoMCwgaWR4KTtcbiAgICBpZiAobXNnKSB7XG4gICAgICBkZWJ1ZygnbWVzc2FnZScsIG1zZyk7XG4gICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBtc2cpO1xuICAgIH1cbiAgfVxufTtcblxuWGhyUmVjZWl2ZXIucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdfY2xlYW51cCcpO1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xufTtcblxuWGhyUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdhYm9ydCcpO1xuICBpZiAodGhpcy54bykge1xuICAgIHRoaXMueG8uY2xvc2UoKTtcbiAgICBkZWJ1ZygnY2xvc2UnKTtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJywgbnVsbCwgJ3VzZXInKTtcbiAgICB0aGlzLnhvID0gbnVsbDtcbiAgfVxuICB0aGlzLl9jbGVhbnVwKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFhoclJlY2VpdmVyO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMzM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciByYW5kb20gPSByZXF1aXJlKCcuLi8uLi91dGlscy9yYW5kb20nKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnNlbmRlcjpqc29ucCcpO1xufVxuXG52YXIgZm9ybSwgYXJlYTtcblxuZnVuY3Rpb24gY3JlYXRlSWZyYW1lKGlkKSB7XG4gIGRlYnVnKCdjcmVhdGVJZnJhbWUnLCBpZCk7XG4gIHRyeSB7XG4gICAgLy8gaWU2IGR5bmFtaWMgaWZyYW1lcyB3aXRoIHRhcmdldD1cIlwiIHN1cHBvcnQgKHRoYW5rcyBDaHJpcyBMYW1iYWNoZXIpXG4gICAgcmV0dXJuIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8aWZyYW1lIG5hbWU9XCInICsgaWQgKyAnXCI+Jyk7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICB2YXIgaWZyYW1lID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5uYW1lID0gaWQ7XG4gICAgcmV0dXJuIGlmcmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVGb3JtKCkge1xuICBkZWJ1ZygnY3JlYXRlRm9ybScpO1xuICBmb3JtID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBmb3JtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgZm9ybS5tZXRob2QgPSAnUE9TVCc7XG4gIGZvcm0uZW5jdHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICBmb3JtLmFjY2VwdENoYXJzZXQgPSAnVVRGLTgnO1xuXG4gIGFyZWEgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgYXJlYS5uYW1lID0gJ2QnO1xuICBmb3JtLmFwcGVuZENoaWxkKGFyZWEpO1xuXG4gIGdsb2JhbC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVybCwgcGF5bG9hZCwgY2FsbGJhY2spIHtcbiAgZGVidWcodXJsLCBwYXlsb2FkKTtcbiAgaWYgKCFmb3JtKSB7XG4gICAgY3JlYXRlRm9ybSgpO1xuICB9XG4gIHZhciBpZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoOCk7XG4gIGZvcm0udGFyZ2V0ID0gaWQ7XG4gIGZvcm0uYWN0aW9uID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsVXRpbHMuYWRkUGF0aCh1cmwsICcvanNvbnBfc2VuZCcpLCAnaT0nICsgaWQpO1xuXG4gIHZhciBpZnJhbWUgPSBjcmVhdGVJZnJhbWUoaWQpO1xuICBpZnJhbWUuaWQgPSBpZDtcbiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuICB0cnkge1xuICAgIGFyZWEudmFsdWUgPSBwYXlsb2FkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gc2VyaW91c2x5IGJyb2tlbiBicm93c2VycyBnZXQgaGVyZVxuICB9XG4gIGZvcm0uc3VibWl0KCk7XG5cbiAgdmFyIGNvbXBsZXRlZCA9IGZ1bmN0aW9uKGVycikge1xuICAgIGRlYnVnKCdjb21wbGV0ZWQnLCBpZCwgZXJyKTtcbiAgICBpZiAoIWlmcmFtZS5vbmVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBpZnJhbWUub25lcnJvciA9IGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuICAgIC8vIE9wZXJhIG1pbmkgZG9lc24ndCBsaWtlIGlmIHdlIEdDIGlmcmFtZVxuICAgIC8vIGltbWVkaWF0ZWx5LCB0aHVzIHRoaXMgdGltZW91dC5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ2NsZWFuaW5nIHVwJywgaWQpO1xuICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgIGlmcmFtZSA9IG51bGw7XG4gICAgfSwgNTAwKTtcbiAgICBhcmVhLnZhbHVlID0gJyc7XG4gICAgLy8gSXQgaXMgbm90IHBvc3NpYmxlIHRvIGRldGVjdCBpZiB0aGUgaWZyYW1lIHN1Y2NlZWRlZCBvclxuICAgIC8vIGZhaWxlZCB0byBzdWJtaXQgb3VyIGZvcm0uXG4gICAgY2FsbGJhY2soZXJyKTtcbiAgfTtcbiAgaWZyYW1lLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGlkKTtcbiAgICBjb21wbGV0ZWQoKTtcbiAgfTtcbiAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdvbmxvYWQnLCBpZCk7XG4gICAgY29tcGxldGVkKCk7XG4gIH07XG4gIGlmcmFtZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgZGVidWcoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGlkLCBpZnJhbWUucmVhZHlTdGF0ZSwgZSk7XG4gICAgaWYgKGlmcmFtZS5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICBjb21wbGV0ZWQoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygnYWJvcnRlZCcsIGlkKTtcbiAgICBjb21wbGV0ZWQobmV3IEVycm9yKCdBYm9ydGVkJykpO1xuICB9O1xufTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi4vLi4vdXRpbHMvcmFuZG9tXCI6NTAsXCIuLi8uLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTV9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3MsZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIGV2ZW50VXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9ldmVudCcpXG4gICwgYnJvd3NlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2Jyb3dzZXInKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnNlbmRlcjp4ZHInKTtcbn1cblxuLy8gUmVmZXJlbmNlczpcbi8vICAgaHR0cDovL2FqYXhpYW4uY29tL2FyY2hpdmVzLzEwMC1saW5lLWFqYXgtd3JhcHBlclxuLy8gICBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvY2MyODgwNjAodj1WUy44NSkuYXNweFxuXG5mdW5jdGlvbiBYRFJPYmplY3QobWV0aG9kLCB1cmwsIHBheWxvYWQpIHtcbiAgZGVidWcobWV0aG9kLCB1cmwpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5fc3RhcnQobWV0aG9kLCB1cmwsIHBheWxvYWQpO1xuICB9LCAwKTtcbn1cblxuaW5oZXJpdHMoWERST2JqZWN0LCBFdmVudEVtaXR0ZXIpO1xuXG5YRFJPYmplY3QucHJvdG90eXBlLl9zdGFydCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwYXlsb2FkKSB7XG4gIGRlYnVnKCdfc3RhcnQnKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgeGRyID0gbmV3IGdsb2JhbC5YRG9tYWluUmVxdWVzdCgpO1xuICAvLyBJRSBjYWNoZXMgZXZlbiBQT1NUc1xuICB1cmwgPSB1cmxVdGlscy5hZGRRdWVyeSh1cmwsICd0PScgKyAoK25ldyBEYXRlKCkpKTtcblxuICB4ZHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdvbmVycm9yJyk7XG4gICAgc2VsZi5fZXJyb3IoKTtcbiAgfTtcbiAgeGRyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdvbnRpbWVvdXQnKTtcbiAgICBzZWxmLl9lcnJvcigpO1xuICB9O1xuICB4ZHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdwcm9ncmVzcycsIHhkci5yZXNwb25zZVRleHQpO1xuICAgIHNlbGYuZW1pdCgnY2h1bmsnLCAyMDAsIHhkci5yZXNwb25zZVRleHQpO1xuICB9O1xuICB4ZHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ2xvYWQnKTtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDIwMCwgeGRyLnJlc3BvbnNlVGV4dCk7XG4gICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gIH07XG4gIHRoaXMueGRyID0geGRyO1xuICB0aGlzLnVubG9hZFJlZiA9IGV2ZW50VXRpbHMudW5sb2FkQWRkKGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuX2NsZWFudXAodHJ1ZSk7XG4gIH0pO1xuICB0cnkge1xuICAgIC8vIEZhaWxzIHdpdGggQWNjZXNzRGVuaWVkIGlmIHBvcnQgbnVtYmVyIGlzIGJvZ3VzXG4gICAgdGhpcy54ZHIub3BlbihtZXRob2QsIHVybCk7XG4gICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgdGhpcy54ZHIudGltZW91dCA9IHRoaXMudGltZW91dDtcbiAgICB9XG4gICAgdGhpcy54ZHIuc2VuZChwYXlsb2FkKTtcbiAgfSBjYXRjaCAoeCkge1xuICAgIHRoaXMuX2Vycm9yKCk7XG4gIH1cbn07XG5cblhEUk9iamVjdC5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZW1pdCgnZmluaXNoJywgMCwgJycpO1xuICB0aGlzLl9jbGVhbnVwKGZhbHNlKTtcbn07XG5cblhEUk9iamVjdC5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbihhYm9ydCkge1xuICBkZWJ1ZygnY2xlYW51cCcsIGFib3J0KTtcbiAgaWYgKCF0aGlzLnhkcikge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICBldmVudFV0aWxzLnVubG9hZERlbCh0aGlzLnVubG9hZFJlZik7XG5cbiAgdGhpcy54ZHIub250aW1lb3V0ID0gdGhpcy54ZHIub25lcnJvciA9IHRoaXMueGRyLm9ucHJvZ3Jlc3MgPSB0aGlzLnhkci5vbmxvYWQgPSBudWxsO1xuICBpZiAoYWJvcnQpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy54ZHIuYWJvcnQoKTtcbiAgICB9IGNhdGNoICh4KSB7XG4gICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgfVxuICB9XG4gIHRoaXMudW5sb2FkUmVmID0gdGhpcy54ZHIgPSBudWxsO1xufTtcblxuWERST2JqZWN0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5fY2xlYW51cCh0cnVlKTtcbn07XG5cbi8vIElFIDgvOSBpZiB0aGUgcmVxdWVzdCB0YXJnZXQgdXNlcyB0aGUgc2FtZSBzY2hlbWUgLSAjNzlcblhEUk9iamVjdC5lbmFibGVkID0gISEoZ2xvYmFsLlhEb21haW5SZXF1ZXN0ICYmIGJyb3dzZXIuaGFzRG9tYWluKCkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFhEUk9iamVjdDtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi4vLi4vdXRpbHMvYnJvd3NlclwiOjQ0LFwiLi4vLi4vdXRpbHMvZXZlbnRcIjo0NixcIi4uLy4uL3V0aWxzL3VybFwiOjUyLFwiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMzU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgWGhyRHJpdmVyID0gcmVxdWlyZSgnLi4vZHJpdmVyL3hocicpXG4gIDtcblxuZnVuY3Rpb24gWEhSQ29yc09iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuICBYaHJEcml2ZXIuY2FsbCh0aGlzLCBtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyk7XG59XG5cbmluaGVyaXRzKFhIUkNvcnNPYmplY3QsIFhockRyaXZlcik7XG5cblhIUkNvcnNPYmplY3QuZW5hYmxlZCA9IFhockRyaXZlci5lbmFibGVkICYmIFhockRyaXZlci5zdXBwb3J0c0NPUlM7XG5cbm1vZHVsZS5leHBvcnRzID0gWEhSQ29yc09iamVjdDtcblxufSx7XCIuLi9kcml2ZXIveGhyXCI6MTcsXCJpbmhlcml0c1wiOjU3fV0sMzY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gIDtcblxuZnVuY3Rpb24gWEhSRmFrZSgvKiBtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cyAqLykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHRoaXMudG8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZW1pdCgnZmluaXNoJywgMjAwLCAne30nKTtcbiAgfSwgWEhSRmFrZS50aW1lb3V0KTtcbn1cblxuaW5oZXJpdHMoWEhSRmFrZSwgRXZlbnRFbWl0dGVyKTtcblxuWEhSRmFrZS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgY2xlYXJUaW1lb3V0KHRoaXMudG8pO1xufTtcblxuWEhSRmFrZS50aW1lb3V0ID0gMjAwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBYSFJGYWtlO1xuXG59LHtcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMzc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgWGhyRHJpdmVyID0gcmVxdWlyZSgnLi4vZHJpdmVyL3hocicpXG4gIDtcblxuZnVuY3Rpb24gWEhSTG9jYWxPYmplY3QobWV0aG9kLCB1cmwsIHBheWxvYWQgLyosIG9wdHMgKi8pIHtcbiAgWGhyRHJpdmVyLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIHBheWxvYWQsIHtcbiAgICBub0NyZWRlbnRpYWxzOiB0cnVlXG4gIH0pO1xufVxuXG5pbmhlcml0cyhYSFJMb2NhbE9iamVjdCwgWGhyRHJpdmVyKTtcblxuWEhSTG9jYWxPYmplY3QuZW5hYmxlZCA9IFhockRyaXZlci5lbmFibGVkO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFhIUkxvY2FsT2JqZWN0O1xuXG59LHtcIi4uL2RyaXZlci94aHJcIjoxNyxcImluaGVyaXRzXCI6NTd9XSwzODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy9ldmVudCcpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy91cmwnKVxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIFdlYnNvY2tldERyaXZlciA9IHJlcXVpcmUoJy4vZHJpdmVyL3dlYnNvY2tldCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp3ZWJzb2NrZXQnKTtcbn1cblxuZnVuY3Rpb24gV2ViU29ja2V0VHJhbnNwb3J0KHRyYW5zVXJsLCBpZ25vcmUsIG9wdGlvbnMpIHtcbiAgaWYgKCFXZWJTb2NrZXRUcmFuc3BvcnQuZW5hYmxlZCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cblxuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgZGVidWcoJ2NvbnN0cnVjdG9yJywgdHJhbnNVcmwpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHVybCA9IHVybFV0aWxzLmFkZFBhdGgodHJhbnNVcmwsICcvd2Vic29ja2V0Jyk7XG4gIGlmICh1cmwuc2xpY2UoMCwgNSkgPT09ICdodHRwcycpIHtcbiAgICB1cmwgPSAnd3NzJyArIHVybC5zbGljZSg1KTtcbiAgfSBlbHNlIHtcbiAgICB1cmwgPSAnd3MnICsgdXJsLnNsaWNlKDQpO1xuICB9XG4gIHRoaXMudXJsID0gdXJsO1xuXG4gIHRoaXMud3MgPSBuZXcgV2Vic29ja2V0RHJpdmVyKHRoaXMudXJsLCBbXSwgb3B0aW9ucyk7XG4gIHRoaXMud3Mub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdtZXNzYWdlIGV2ZW50JywgZS5kYXRhKTtcbiAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBlLmRhdGEpO1xuICB9O1xuICAvLyBGaXJlZm94IGhhcyBhbiBpbnRlcmVzdGluZyBidWcuIElmIGEgd2Vic29ja2V0IGNvbm5lY3Rpb24gaXNcbiAgLy8gY3JlYXRlZCBhZnRlciBvbnVubG9hZCwgaXQgc3RheXMgYWxpdmUgZXZlbiB3aGVuIHVzZXJcbiAgLy8gbmF2aWdhdGVzIGF3YXkgZnJvbSB0aGUgcGFnZS4gSW4gc3VjaCBzaXR1YXRpb24gbGV0J3MgbGllIC1cbiAgLy8gbGV0J3Mgbm90IG9wZW4gdGhlIHdzIGNvbm5lY3Rpb24gYXQgYWxsLiBTZWU6XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zb2NranMvc29ja2pzLWNsaWVudC9pc3N1ZXMvMjhcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk2MDg1XG4gIHRoaXMudW5sb2FkUmVmID0gdXRpbHMudW5sb2FkQWRkKGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd1bmxvYWQnKTtcbiAgICBzZWxmLndzLmNsb3NlKCk7XG4gIH0pO1xuICB0aGlzLndzLm9uY2xvc2UgPSBmdW5jdGlvbihlKSB7XG4gICAgZGVidWcoJ2Nsb3NlIGV2ZW50JywgZS5jb2RlLCBlLnJlYXNvbik7XG4gICAgc2VsZi5lbWl0KCdjbG9zZScsIGUuY29kZSwgZS5yZWFzb24pO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgfTtcbiAgdGhpcy53cy5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdlcnJvciBldmVudCcsIGUpO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCAxMDA2LCAnV2ViU29ja2V0IGNvbm5lY3Rpb24gYnJva2VuJyk7XG4gICAgc2VsZi5fY2xlYW51cCgpO1xuICB9O1xufVxuXG5pbmhlcml0cyhXZWJTb2NrZXRUcmFuc3BvcnQsIEV2ZW50RW1pdHRlcik7XG5cbldlYlNvY2tldFRyYW5zcG9ydC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgdmFyIG1zZyA9ICdbJyArIGRhdGEgKyAnXSc7XG4gIGRlYnVnKCdzZW5kJywgbXNnKTtcbiAgdGhpcy53cy5zZW5kKG1zZyk7XG59O1xuXG5XZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjbG9zZScpO1xuICB2YXIgd3MgPSB0aGlzLndzO1xuICB0aGlzLl9jbGVhbnVwKCk7XG4gIGlmICh3cykge1xuICAgIHdzLmNsb3NlKCk7XG4gIH1cbn07XG5cbldlYlNvY2tldFRyYW5zcG9ydC5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIHZhciB3cyA9IHRoaXMud3M7XG4gIGlmICh3cykge1xuICAgIHdzLm9ubWVzc2FnZSA9IHdzLm9uY2xvc2UgPSB3cy5vbmVycm9yID0gbnVsbDtcbiAgfVxuICB1dGlscy51bmxvYWREZWwodGhpcy51bmxvYWRSZWYpO1xuICB0aGlzLnVubG9hZFJlZiA9IHRoaXMud3MgPSBudWxsO1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xufTtcblxuV2ViU29ja2V0VHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2VuYWJsZWQnKTtcbiAgcmV0dXJuICEhV2Vic29ja2V0RHJpdmVyO1xufTtcbldlYlNvY2tldFRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3dlYnNvY2tldCc7XG5cbi8vIEluIHRoZW9yeSwgd3Mgc2hvdWxkIHJlcXVpcmUgMSByb3VuZCB0cmlwLiBCdXQgaW4gY2hyb21lLCB0aGlzIGlzXG4vLyBub3QgdmVyeSBzdGFibGUgb3ZlciBTU0wuIE1vc3QgbGlrZWx5IGEgd3MgY29ubmVjdGlvbiByZXF1aXJlcyBhXG4vLyBzZXBhcmF0ZSBTU0wgY29ubmVjdGlvbiwgaW4gd2hpY2ggY2FzZSAyIHJvdW5kIHRyaXBzIGFyZSBhblxuLy8gYWJzb2x1dGUgbWludW11bS5cbldlYlNvY2tldFRyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXRUcmFuc3BvcnQ7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCIuLi91dGlscy9ldmVudFwiOjQ2LFwiLi4vdXRpbHMvdXJsXCI6NTIsXCIuL2RyaXZlci93ZWJzb2NrZXRcIjoxOSxcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIFhkclN0cmVhbWluZ1RyYW5zcG9ydCA9IHJlcXVpcmUoJy4veGRyLXN0cmVhbWluZycpXG4gICwgWGhyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL3hocicpXG4gICwgWERST2JqZWN0ID0gcmVxdWlyZSgnLi9zZW5kZXIveGRyJylcbiAgO1xuXG5mdW5jdGlvbiBYZHJQb2xsaW5nVHJhbnNwb3J0KHRyYW5zVXJsKSB7XG4gIGlmICghWERST2JqZWN0LmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy94aHInLCBYaHJSZWNlaXZlciwgWERST2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoWGRyUG9sbGluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuWGRyUG9sbGluZ1RyYW5zcG9ydC5lbmFibGVkID0gWGRyU3RyZWFtaW5nVHJhbnNwb3J0LmVuYWJsZWQ7XG5YZHJQb2xsaW5nVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAneGRyLXBvbGxpbmcnO1xuWGRyUG9sbGluZ1RyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjsgLy8gcHJlZmxpZ2h0LCBhamF4XG5cbm1vZHVsZS5leHBvcnRzID0gWGRyUG9sbGluZ1RyYW5zcG9ydDtcblxufSx7XCIuL2xpYi9hamF4LWJhc2VkXCI6MjQsXCIuL3JlY2VpdmVyL3hoclwiOjMyLFwiLi9zZW5kZXIveGRyXCI6MzQsXCIuL3hkci1zdHJlYW1pbmdcIjo0MCxcImluaGVyaXRzXCI6NTd9XSw0MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSByZXF1aXJlKCcuL2xpYi9hamF4LWJhc2VkJylcbiAgLCBYaHJSZWNlaXZlciA9IHJlcXVpcmUoJy4vcmVjZWl2ZXIveGhyJylcbiAgLCBYRFJPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94ZHInKVxuICA7XG5cbi8vIEFjY29yZGluZyB0bzpcbi8vICAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNjQxNTA3L2RldGVjdC1icm93c2VyLXN1cHBvcnQtZm9yLWNyb3NzLWRvbWFpbi14bWxodHRwcmVxdWVzdHNcbi8vICAgaHR0cDovL2hhY2tzLm1vemlsbGEub3JnLzIwMDkvMDcvY3Jvc3Mtc2l0ZS14bWxodHRwcmVxdWVzdC13aXRoLWNvcnMvXG5cbmZ1bmN0aW9uIFhkclN0cmVhbWluZ1RyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIVhEUk9iamVjdC5lbmFibGVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cbiAgQWpheEJhc2VkVHJhbnNwb3J0LmNhbGwodGhpcywgdHJhbnNVcmwsICcveGhyX3N0cmVhbWluZycsIFhoclJlY2VpdmVyLCBYRFJPYmplY3QpO1xufVxuXG5pbmhlcml0cyhYZHJTdHJlYW1pbmdUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cblhkclN0cmVhbWluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuICBpZiAoaW5mby5jb29raWVfbmVlZGVkIHx8IGluZm8ubnVsbE9yaWdpbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gWERST2JqZWN0LmVuYWJsZWQgJiYgaW5mby5zYW1lU2NoZW1lO1xufTtcblxuWGRyU3RyZWFtaW5nVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAneGRyLXN0cmVhbWluZyc7XG5YZHJTdHJlYW1pbmdUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7IC8vIHByZWZsaWdodCwgYWpheFxuXG5tb2R1bGUuZXhwb3J0cyA9IFhkclN0cmVhbWluZ1RyYW5zcG9ydDtcblxufSx7XCIuL2xpYi9hamF4LWJhc2VkXCI6MjQsXCIuL3JlY2VpdmVyL3hoclwiOjMyLFwiLi9zZW5kZXIveGRyXCI6MzQsXCJpbmhlcml0c1wiOjU3fV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gICwgWGhyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL3hocicpXG4gICwgWEhSQ29yc09iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1jb3JzJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1sb2NhbCcpXG4gIDtcblxuZnVuY3Rpb24gWGhyUG9sbGluZ1RyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIVhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgIVhIUkNvcnNPYmplY3QuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocicsIFhoclJlY2VpdmVyLCBYSFJDb3JzT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoWGhyUG9sbGluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuWGhyUG9sbGluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuICBpZiAoaW5mby5udWxsT3JpZ2luKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKFhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgaW5mby5zYW1lT3JpZ2luKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIFhIUkNvcnNPYmplY3QuZW5hYmxlZDtcbn07XG5cblhoclBvbGxpbmdUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd4aHItcG9sbGluZyc7XG5YaHJQb2xsaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxubW9kdWxlLmV4cG9ydHMgPSBYaHJQb2xsaW5nVHJhbnNwb3J0O1xuXG59LHtcIi4vbGliL2FqYXgtYmFzZWRcIjoyNCxcIi4vcmVjZWl2ZXIveGhyXCI6MzIsXCIuL3NlbmRlci94aHItY29yc1wiOjM1LFwiLi9zZW5kZXIveGhyLWxvY2FsXCI6MzcsXCJpbmhlcml0c1wiOjU3fV0sNDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gICwgWGhyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL3hocicpXG4gICwgWEhSQ29yc09iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1jb3JzJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgYnJvd3NlciA9IHJlcXVpcmUoJy4uL3V0aWxzL2Jyb3dzZXInKVxuICA7XG5cbmZ1bmN0aW9uIFhoclN0cmVhbWluZ1RyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIVhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgJiYgIVhIUkNvcnNPYmplY3QuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocl9zdHJlYW1pbmcnLCBYaHJSZWNlaXZlciwgWEhSQ29yc09iamVjdCk7XG59XG5cbmluaGVyaXRzKFhoclN0cmVhbWluZ1RyYW5zcG9ydCwgQWpheEJhc2VkVHJhbnNwb3J0KTtcblxuWGhyU3RyZWFtaW5nVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbihpbmZvKSB7XG4gIGlmIChpbmZvLm51bGxPcmlnaW4pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gT3BlcmEgZG9lc24ndCBzdXBwb3J0IHhoci1zdHJlYW1pbmcgIzYwXG4gIC8vIEJ1dCBpdCBtaWdodCBiZSBhYmxlIHRvICM5MlxuICBpZiAoYnJvd3Nlci5pc09wZXJhKCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gWEhSQ29yc09iamVjdC5lbmFibGVkO1xufTtcblxuWGhyU3RyZWFtaW5nVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAneGhyLXN0cmVhbWluZyc7XG5YaHJTdHJlYW1pbmdUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7IC8vIHByZWZsaWdodCwgYWpheFxuXG4vLyBTYWZhcmkgZ2V0cyBjb25mdXNlZCB3aGVuIGEgc3RyZWFtaW5nIGFqYXggcmVxdWVzdCBpcyBzdGFydGVkXG4vLyBiZWZvcmUgb25sb2FkLiBUaGlzIGNhdXNlcyB0aGUgbG9hZCBpbmRpY2F0b3IgdG8gc3BpbiBpbmRlZmluZXRlbHkuXG4vLyBPbmx5IHJlcXVpcmUgYm9keSB3aGVuIHVzZWQgaW4gYSBicm93c2VyXG5YaHJTdHJlYW1pbmdUcmFuc3BvcnQubmVlZEJvZHkgPSAhIWdsb2JhbC5kb2N1bWVudDtcblxubW9kdWxlLmV4cG9ydHMgPSBYaHJTdHJlYW1pbmdUcmFuc3BvcnQ7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uL3V0aWxzL2Jyb3dzZXJcIjo0NCxcIi4vbGliL2FqYXgtYmFzZWRcIjoyNCxcIi4vcmVjZWl2ZXIveGhyXCI6MzIsXCIuL3NlbmRlci94aHItY29yc1wiOjM1LFwiLi9zZW5kZXIveGhyLWxvY2FsXCI6MzcsXCJpbmhlcml0c1wiOjU3fV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG5pZiAoZ2xvYmFsLmNyeXB0byAmJiBnbG9iYWwuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICBtb2R1bGUuZXhwb3J0cy5yYW5kb21CeXRlcyA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgZ2xvYmFsLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpO1xuICAgIHJldHVybiBieXRlcztcbiAgfTtcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzLnJhbmRvbUJ5dGVzID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdmFyIGJ5dGVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG4gIH07XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHt9XSw0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc09wZXJhOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZ2xvYmFsLm5hdmlnYXRvciAmJlxuICAgICAgL29wZXJhL2kudGVzdChnbG9iYWwubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIH1cblxuLCBpc0tvbnF1ZXJvcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5uYXZpZ2F0b3IgJiZcbiAgICAgIC9rb25xdWVyb3IvaS50ZXN0KGdsb2JhbC5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgfVxuXG4gIC8vICMxODcgd3JhcCBkb2N1bWVudC5kb21haW4gaW4gdHJ5L2NhdGNoIGJlY2F1c2Ugb2YgV1A4IGZyb20gZmlsZTovLy9cbiwgaGFzRG9tYWluOiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gbm9uLWJyb3dzZXIgY2xpZW50IGFsd2F5cyBoYXMgYSBkb21haW5cbiAgICBpZiAoIWdsb2JhbC5kb2N1bWVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAhIWdsb2JhbC5kb2N1bWVudC5kb21haW47XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDQ1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKTtcblxuLy8gU29tZSBleHRyYSBjaGFyYWN0ZXJzIHRoYXQgQ2hyb21lIGdldHMgd3JvbmcsIGFuZCBzdWJzdGl0dXRlcyB3aXRoXG4vLyBzb21ldGhpbmcgZWxzZSBvbiB0aGUgd2lyZS5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4LCBuby1taXNsZWFkaW5nLWNoYXJhY3Rlci1jbGFzc1xudmFyIGV4dHJhRXNjYXBhYmxlID0gL1tcXHgwMC1cXHgxZlxcdWQ4MDAtXFx1ZGZmZlxcdWZmZmVcXHVmZmZmXFx1MDMwMC1cXHUwMzMzXFx1MDMzZC1cXHUwMzQ2XFx1MDM0YS1cXHUwMzRjXFx1MDM1MC1cXHUwMzUyXFx1MDM1Ny1cXHUwMzU4XFx1MDM1Yy1cXHUwMzYyXFx1MDM3NFxcdTAzN2VcXHUwMzg3XFx1MDU5MS1cXHUwNWFmXFx1MDVjNFxcdTA2MTAtXFx1MDYxN1xcdTA2NTMtXFx1MDY1NFxcdTA2NTctXFx1MDY1YlxcdTA2NWQtXFx1MDY1ZVxcdTA2ZGYtXFx1MDZlMlxcdTA2ZWItXFx1MDZlY1xcdTA3MzBcXHUwNzMyLVxcdTA3MzNcXHUwNzM1LVxcdTA3MzZcXHUwNzNhXFx1MDczZFxcdTA3M2YtXFx1MDc0MVxcdTA3NDNcXHUwNzQ1XFx1MDc0N1xcdTA3ZWItXFx1MDdmMVxcdTA5NTFcXHUwOTU4LVxcdTA5NWZcXHUwOWRjLVxcdTA5ZGRcXHUwOWRmXFx1MGEzM1xcdTBhMzZcXHUwYTU5LVxcdTBhNWJcXHUwYTVlXFx1MGI1Yy1cXHUwYjVkXFx1MGUzOC1cXHUwZTM5XFx1MGY0M1xcdTBmNGRcXHUwZjUyXFx1MGY1N1xcdTBmNWNcXHUwZjY5XFx1MGY3Mi1cXHUwZjc2XFx1MGY3OFxcdTBmODAtXFx1MGY4M1xcdTBmOTNcXHUwZjlkXFx1MGZhMlxcdTBmYTdcXHUwZmFjXFx1MGZiOVxcdTE5MzktXFx1MTkzYVxcdTFhMTdcXHUxYjZiXFx1MWNkYS1cXHUxY2RiXFx1MWRjMC1cXHUxZGNmXFx1MWRmY1xcdTFkZmVcXHUxZjcxXFx1MWY3M1xcdTFmNzVcXHUxZjc3XFx1MWY3OVxcdTFmN2JcXHUxZjdkXFx1MWZiYlxcdTFmYmVcXHUxZmM5XFx1MWZjYlxcdTFmZDNcXHUxZmRiXFx1MWZlM1xcdTFmZWJcXHUxZmVlLVxcdTFmZWZcXHUxZmY5XFx1MWZmYlxcdTFmZmRcXHUyMDAwLVxcdTIwMDFcXHUyMGQwLVxcdTIwZDFcXHUyMGQ0LVxcdTIwZDdcXHUyMGU3LVxcdTIwZTlcXHUyMTI2XFx1MjEyYS1cXHUyMTJiXFx1MjMyOS1cXHUyMzJhXFx1MmFkY1xcdTMwMmItXFx1MzAyY1xcdWFhYjItXFx1YWFiM1xcdWY5MDAtXFx1ZmEwZFxcdWZhMTBcXHVmYTEyXFx1ZmExNS1cXHVmYTFlXFx1ZmEyMFxcdWZhMjJcXHVmYTI1LVxcdWZhMjZcXHVmYTJhLVxcdWZhMmRcXHVmYTMwLVxcdWZhNmRcXHVmYTcwLVxcdWZhZDlcXHVmYjFkXFx1ZmIxZlxcdWZiMmEtXFx1ZmIzNlxcdWZiMzgtXFx1ZmIzY1xcdWZiM2VcXHVmYjQwLVxcdWZiNDFcXHVmYjQzLVxcdWZiNDRcXHVmYjQ2LVxcdWZiNGVcXHVmZmYwLVxcdWZmZmZdL2dcbiAgLCBleHRyYUxvb2t1cDtcblxuLy8gVGhpcyBtYXkgYmUgcXVpdGUgc2xvdywgc28gbGV0J3MgZGVsYXkgdW50aWwgdXNlciBhY3R1YWxseSB1c2VzIGJhZFxuLy8gY2hhcmFjdGVycy5cbnZhciB1bnJvbGxMb29rdXAgPSBmdW5jdGlvbihlc2NhcGFibGUpIHtcbiAgdmFyIGk7XG4gIHZhciB1bnJvbGxlZCA9IHt9O1xuICB2YXIgYyA9IFtdO1xuICBmb3IgKGkgPSAwOyBpIDwgNjU1MzY7IGkrKykge1xuICAgIGMucHVzaCggU3RyaW5nLmZyb21DaGFyQ29kZShpKSApO1xuICB9XG4gIGVzY2FwYWJsZS5sYXN0SW5kZXggPSAwO1xuICBjLmpvaW4oJycpLnJlcGxhY2UoZXNjYXBhYmxlLCBmdW5jdGlvbihhKSB7XG4gICAgdW5yb2xsZWRbIGEgXSA9ICdcXFxcdScgKyAoJzAwMDAnICsgYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO1xuICAgIHJldHVybiAnJztcbiAgfSk7XG4gIGVzY2FwYWJsZS5sYXN0SW5kZXggPSAwO1xuICByZXR1cm4gdW5yb2xsZWQ7XG59O1xuXG4vLyBRdW90ZSBzdHJpbmcsIGFsc28gdGFraW5nIGNhcmUgb2YgdW5pY29kZSBjaGFyYWN0ZXJzIHRoYXQgYnJvd3NlcnNcbi8vIG9mdGVuIGJyZWFrLiBFc3BlY2lhbGx5LCB0YWtlIGNhcmUgb2YgdW5pY29kZSBzdXJyb2dhdGVzOlxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NYXBwaW5nX29mX1VuaWNvZGVfY2hhcmFjdGVycyNTdXJyb2dhdGVzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcXVvdGU6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHZhciBxdW90ZWQgPSBKU09OMy5zdHJpbmdpZnkoc3RyaW5nKTtcblxuICAgIC8vIEluIG1vc3QgY2FzZXMgdGhpcyBzaG91bGQgYmUgdmVyeSBmYXN0IGFuZCBnb29kIGVub3VnaC5cbiAgICBleHRyYUVzY2FwYWJsZS5sYXN0SW5kZXggPSAwO1xuICAgIGlmICghZXh0cmFFc2NhcGFibGUudGVzdChxdW90ZWQpKSB7XG4gICAgICByZXR1cm4gcXVvdGVkO1xuICAgIH1cblxuICAgIGlmICghZXh0cmFMb29rdXApIHtcbiAgICAgIGV4dHJhTG9va3VwID0gdW5yb2xsTG9va3VwKGV4dHJhRXNjYXBhYmxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcXVvdGVkLnJlcGxhY2UoZXh0cmFFc2NhcGFibGUsIGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiBleHRyYUxvb2t1cFthXTtcbiAgICB9KTtcbiAgfVxufTtcblxufSx7XCJqc29uM1wiOjU4fV0sNDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZG9tID0gcmVxdWlyZSgnLi9yYW5kb20nKTtcblxudmFyIG9uVW5sb2FkID0ge31cbiAgLCBhZnRlclVubG9hZCA9IGZhbHNlXG4gICAgLy8gZGV0ZWN0IGdvb2dsZSBjaHJvbWUgcGFja2FnZWQgYXBwcyBiZWNhdXNlIHRoZXkgZG9uJ3QgYWxsb3cgdGhlICd1bmxvYWQnIGV2ZW50XG4gICwgaXNDaHJvbWVQYWNrYWdlZEFwcCA9IGdsb2JhbC5jaHJvbWUgJiYgZ2xvYmFsLmNocm9tZS5hcHAgJiYgZ2xvYmFsLmNocm9tZS5hcHAucnVudGltZVxuICA7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhdHRhY2hFdmVudDogZnVuY3Rpb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLmRvY3VtZW50ICYmIGdsb2JhbC5hdHRhY2hFdmVudCkge1xuICAgICAgLy8gSUUgcXVpcmtzLlxuICAgICAgLy8gQWNjb3JkaW5nIHRvOiBodHRwOi8vc3RldmVzb3VkZXJzLmNvbS9taXNjL3Rlc3QtcG9zdG1lc3NhZ2UucGhwXG4gICAgICAvLyB0aGUgbWVzc2FnZSBnZXRzIGRlbGl2ZXJlZCBvbmx5IHRvICdkb2N1bWVudCcsIG5vdCAnd2luZG93Jy5cbiAgICAgIGdsb2JhbC5kb2N1bWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgIC8vIEkgZ2V0ICd3aW5kb3cnIGZvciBpZTguXG4gICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiwgZGV0YWNoRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBnbG9iYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5kb2N1bWVudCAmJiBnbG9iYWwuZGV0YWNoRXZlbnQpIHtcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgIGdsb2JhbC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuLCB1bmxvYWRBZGQ6IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgaWYgKGlzQ2hyb21lUGFja2FnZWRBcHApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciByZWYgPSByYW5kb20uc3RyaW5nKDgpO1xuICAgIG9uVW5sb2FkW3JlZl0gPSBsaXN0ZW5lcjtcbiAgICBpZiAoYWZ0ZXJVbmxvYWQpIHtcbiAgICAgIHNldFRpbWVvdXQodGhpcy50cmlnZ2VyVW5sb2FkQ2FsbGJhY2tzLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlZjtcbiAgfVxuXG4sIHVubG9hZERlbDogZnVuY3Rpb24ocmVmKSB7XG4gICAgaWYgKHJlZiBpbiBvblVubG9hZCkge1xuICAgICAgZGVsZXRlIG9uVW5sb2FkW3JlZl07XG4gICAgfVxuICB9XG5cbiwgdHJpZ2dlclVubG9hZENhbGxiYWNrczogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgcmVmIGluIG9uVW5sb2FkKSB7XG4gICAgICBvblVubG9hZFtyZWZdKCk7XG4gICAgICBkZWxldGUgb25VbmxvYWRbcmVmXTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciB1bmxvYWRUcmlnZ2VyZWQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKGFmdGVyVW5sb2FkKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGFmdGVyVW5sb2FkID0gdHJ1ZTtcbiAgbW9kdWxlLmV4cG9ydHMudHJpZ2dlclVubG9hZENhbGxiYWNrcygpO1xufTtcblxuLy8gJ3VubG9hZCcgYWxvbmUgaXMgbm90IHJlbGlhYmxlIGluIG9wZXJhIHdpdGhpbiBhbiBpZnJhbWUsIGJ1dCB3ZVxuLy8gY2FuJ3QgdXNlIGBiZWZvcmV1bmxvYWRgIGFzIElFIGZpcmVzIGl0IG9uIGphdmFzY3JpcHQ6IGxpbmtzLlxuaWYgKCFpc0Nocm9tZVBhY2thZ2VkQXBwKSB7XG4gIG1vZHVsZS5leHBvcnRzLmF0dGFjaEV2ZW50KCd1bmxvYWQnLCB1bmxvYWRUcmlnZ2VyZWQpO1xufVxuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuL3JhbmRvbVwiOjUwfV0sNDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBldmVudFV0aWxzID0gcmVxdWlyZSgnLi9ldmVudCcpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgYnJvd3NlciA9IHJlcXVpcmUoJy4vYnJvd3NlcicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp1dGlsczppZnJhbWUnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFdQcmVmaXg6ICdfanAnXG4sIGN1cnJlbnRXaW5kb3dJZDogbnVsbFxuXG4sIHBvbGx1dGVHbG9iYWxOYW1lc3BhY2U6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghKG1vZHVsZS5leHBvcnRzLldQcmVmaXggaW4gZ2xvYmFsKSkge1xuICAgICAgZ2xvYmFsW21vZHVsZS5leHBvcnRzLldQcmVmaXhdID0ge307XG4gICAgfVxuICB9XG5cbiwgcG9zdE1lc3NhZ2U6IGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHtcbiAgICBpZiAoZ2xvYmFsLnBhcmVudCAhPT0gZ2xvYmFsKSB7XG4gICAgICBnbG9iYWwucGFyZW50LnBvc3RNZXNzYWdlKEpTT04zLnN0cmluZ2lmeSh7XG4gICAgICAgIHdpbmRvd0lkOiBtb2R1bGUuZXhwb3J0cy5jdXJyZW50V2luZG93SWRcbiAgICAgICwgdHlwZTogdHlwZVxuICAgICAgLCBkYXRhOiBkYXRhIHx8ICcnXG4gICAgICB9KSwgJyonKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWcoJ0Nhbm5vdCBwb3N0TWVzc2FnZSwgbm8gcGFyZW50IHdpbmRvdy4nLCB0eXBlLCBkYXRhKTtcbiAgICB9XG4gIH1cblxuLCBjcmVhdGVJZnJhbWU6IGZ1bmN0aW9uKGlmcmFtZVVybCwgZXJyb3JDYWxsYmFjaykge1xuICAgIHZhciBpZnJhbWUgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgdmFyIHRyZWYsIHVubG9hZFJlZjtcbiAgICB2YXIgdW5hdHRhY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCd1bmF0dGFjaCcpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuICAgICAgLy8gRXhwbG9yZXIgaGFkIHByb2JsZW1zIHdpdGggdGhhdC5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICB9XG4gICAgICBpZnJhbWUub25lcnJvciA9IG51bGw7XG4gICAgfTtcbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgZGVidWcoJ2NsZWFudXAnKTtcbiAgICAgIGlmIChpZnJhbWUpIHtcbiAgICAgICAgdW5hdHRhY2goKTtcbiAgICAgICAgLy8gVGhpcyB0aW1lb3V0IG1ha2VzIGNocm9tZSBmaXJlIG9uYmVmb3JldW5sb2FkIGV2ZW50XG4gICAgICAgIC8vIHdpdGhpbiBpZnJhbWUuIFdpdGhvdXQgdGhlIHRpbWVvdXQgaXQgZ29lcyBzdHJhaWdodCB0b1xuICAgICAgICAvLyBvbnVubG9hZC5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgICAgICBpZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZnJhbWUgPSBudWxsO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgZXZlbnRVdGlscy51bmxvYWREZWwodW5sb2FkUmVmKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBvbmVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgICBkZWJ1Zygnb25lcnJvcicsIGVycik7XG4gICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgZXJyb3JDYWxsYmFjayhlcnIpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHBvc3QgPSBmdW5jdGlvbihtc2csIG9yaWdpbikge1xuICAgICAgZGVidWcoJ3Bvc3QnLCBtc2csIG9yaWdpbik7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLCBJRSByYWlzZXMgYW4gZXhjZXB0aW9uXG4gICAgICAgICAgLy8gb24gJ2NvbnRlbnRXaW5kb3cnLlxuICAgICAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgb3JpZ2luKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICAgIH1cbiAgICAgIH0sIDApO1xuICAgIH07XG5cbiAgICBpZnJhbWUuc3JjID0gaWZyYW1lVXJsO1xuICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgaWZyYW1lLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIG9uZXJyb3IoJ29uZXJyb3InKTtcbiAgICB9O1xuICAgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdvbmxvYWQnKTtcbiAgICAgIC8vIGBvbmxvYWRgIGlzIHRyaWdnZXJlZCBiZWZvcmUgc2NyaXB0cyBvbiB0aGUgaWZyYW1lIGFyZVxuICAgICAgLy8gZXhlY3V0ZWQuIEdpdmUgaXQgZmV3IHNlY29uZHMgdG8gYWN0dWFsbHkgbG9hZCBzdHVmZi5cbiAgICAgIGNsZWFyVGltZW91dCh0cmVmKTtcbiAgICAgIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBvbmVycm9yKCdvbmxvYWQgdGltZW91dCcpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfTtcbiAgICBnbG9iYWwuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIHRyZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgb25lcnJvcigndGltZW91dCcpO1xuICAgIH0sIDE1MDAwKTtcbiAgICB1bmxvYWRSZWYgPSBldmVudFV0aWxzLnVubG9hZEFkZChjbGVhbnVwKTtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zdDogcG9zdFxuICAgICwgY2xlYW51cDogY2xlYW51cFxuICAgICwgbG9hZGVkOiB1bmF0dGFjaFxuICAgIH07XG4gIH1cblxuLyogZXNsaW50IG5vLXVuZGVmOiBcIm9mZlwiLCBuZXctY2FwOiBcIm9mZlwiICovXG4sIGNyZWF0ZUh0bWxmaWxlOiBmdW5jdGlvbihpZnJhbWVVcmwsIGVycm9yQ2FsbGJhY2spIHtcbiAgICB2YXIgYXhvID0gWydBY3RpdmUnXS5jb25jYXQoJ09iamVjdCcpLmpvaW4oJ1gnKTtcbiAgICB2YXIgZG9jID0gbmV3IGdsb2JhbFtheG9dKCdodG1sZmlsZScpO1xuICAgIHZhciB0cmVmLCB1bmxvYWRSZWY7XG4gICAgdmFyIGlmcmFtZTtcbiAgICB2YXIgdW5hdHRhY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0cmVmKTtcbiAgICAgIGlmcmFtZS5vbmVycm9yID0gbnVsbDtcbiAgICB9O1xuICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZG9jKSB7XG4gICAgICAgIHVuYXR0YWNoKCk7XG4gICAgICAgIGV2ZW50VXRpbHMudW5sb2FkRGVsKHVubG9hZFJlZik7XG4gICAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICAgIGlmcmFtZSA9IGRvYyA9IG51bGw7XG4gICAgICAgIENvbGxlY3RHYXJiYWdlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uKHIpIHtcbiAgICAgIGRlYnVnKCdvbmVycm9yJywgcik7XG4gICAgICBpZiAoZG9jKSB7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgZXJyb3JDYWxsYmFjayhyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBwb3N0ID0gZnVuY3Rpb24obXNnLCBvcmlnaW4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLCBJRSByYWlzZXMgYW4gZXhjZXB0aW9uXG4gICAgICAgIC8vIG9uICdjb250ZW50V2luZG93Jy5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoaWZyYW1lICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1zZywgb3JpZ2luKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDApO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICB9XG4gICAgfTtcblxuICAgIGRvYy5vcGVuKCk7XG4gICAgZG9jLndyaXRlKCc8aHRtbD48cycgKyAnY3JpcHQ+JyArXG4gICAgICAgICAgICAgICdkb2N1bWVudC5kb21haW49XCInICsgZ2xvYmFsLmRvY3VtZW50LmRvbWFpbiArICdcIjsnICtcbiAgICAgICAgICAgICAgJzwvcycgKyAnY3JpcHQ+PC9odG1sPicpO1xuICAgIGRvYy5jbG9zZSgpO1xuICAgIGRvYy5wYXJlbnRXaW5kb3dbbW9kdWxlLmV4cG9ydHMuV1ByZWZpeF0gPSBnbG9iYWxbbW9kdWxlLmV4cG9ydHMuV1ByZWZpeF07XG4gICAgdmFyIGMgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQoYyk7XG4gICAgaWZyYW1lID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGMuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICBpZnJhbWUuc3JjID0gaWZyYW1lVXJsO1xuICAgIGlmcmFtZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBvbmVycm9yKCdvbmVycm9yJyk7XG4gICAgfTtcbiAgICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG9uZXJyb3IoJ3RpbWVvdXQnKTtcbiAgICB9LCAxNTAwMCk7XG4gICAgdW5sb2FkUmVmID0gZXZlbnRVdGlscy51bmxvYWRBZGQoY2xlYW51cCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc3Q6IHBvc3RcbiAgICAsIGNsZWFudXA6IGNsZWFudXBcbiAgICAsIGxvYWRlZDogdW5hdHRhY2hcbiAgICB9O1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5pZnJhbWVFbmFibGVkID0gZmFsc2U7XG5pZiAoZ2xvYmFsLmRvY3VtZW50KSB7XG4gIC8vIHBvc3RNZXNzYWdlIG1pc2JlaGF2ZXMgaW4ga29ucXVlcm9yIDQuNi41IC0gdGhlIG1lc3NhZ2VzIGFyZSBkZWxpdmVyZWQgd2l0aFxuICAvLyBodWdlIGRlbGF5LCBvciBub3QgYXQgYWxsLlxuICBtb2R1bGUuZXhwb3J0cy5pZnJhbWVFbmFibGVkID0gKHR5cGVvZiBnbG9iYWwucG9zdE1lc3NhZ2UgPT09ICdmdW5jdGlvbicgfHxcbiAgICB0eXBlb2YgZ2xvYmFsLnBvc3RNZXNzYWdlID09PSAnb2JqZWN0JykgJiYgKCFicm93c2VyLmlzS29ucXVlcm9yKCkpO1xufVxuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0sdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuL2Jyb3dzZXJcIjo0NCxcIi4vZXZlbnRcIjo0NixcImRlYnVnXCI6NTUsXCJqc29uM1wiOjU4fV0sNDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbG9nT2JqZWN0ID0ge307XG5bJ2xvZycsICdkZWJ1ZycsICd3YXJuJ10uZm9yRWFjaChmdW5jdGlvbiAobGV2ZWwpIHtcbiAgdmFyIGxldmVsRXhpc3RzO1xuXG4gIHRyeSB7XG4gICAgbGV2ZWxFeGlzdHMgPSBnbG9iYWwuY29uc29sZSAmJiBnbG9iYWwuY29uc29sZVtsZXZlbF0gJiYgZ2xvYmFsLmNvbnNvbGVbbGV2ZWxdLmFwcGx5O1xuICB9IGNhdGNoKGUpIHtcbiAgICAvLyBkbyBub3RoaW5nXG4gIH1cblxuICBsb2dPYmplY3RbbGV2ZWxdID0gbGV2ZWxFeGlzdHMgPyBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5jb25zb2xlW2xldmVsXS5hcHBseShnbG9iYWwuY29uc29sZSwgYXJndW1lbnRzKTtcbiAgfSA6IChsZXZlbCA9PT0gJ2xvZycgPyBmdW5jdGlvbiAoKSB7fSA6IGxvZ09iamVjdC5sb2cpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbG9nT2JqZWN0O1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7fV0sNDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNPYmplY3Q6IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlID09PSAnb2JqZWN0JyAmJiAhIW9iajtcbiAgfVxuXG4sIGV4dGVuZDogZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCF0aGlzLmlzT2JqZWN0KG9iaikpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIHZhciBzb3VyY2UsIHByb3A7XG4gICAgZm9yICh2YXIgaSA9IDEsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yIChwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwgcHJvcCkpIHtcbiAgICAgICAgICBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufTtcblxufSx7fV0sNTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbi8vIFRoaXMgc3RyaW5nIGhhcyBsZW5ndGggMzIsIGEgcG93ZXIgb2YgMiwgc28gdGhlIG1vZHVsdXMgZG9lc24ndCBpbnRyb2R1Y2UgYVxuLy8gYmlhcy5cbnZhciBfcmFuZG9tU3RyaW5nQ2hhcnMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDUnO1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHN0cmluZzogZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdmFyIG1heCA9IF9yYW5kb21TdHJpbmdDaGFycy5sZW5ndGg7XG4gICAgdmFyIGJ5dGVzID0gY3J5cHRvLnJhbmRvbUJ5dGVzKGxlbmd0aCk7XG4gICAgdmFyIHJldCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldC5wdXNoKF9yYW5kb21TdHJpbmdDaGFycy5zdWJzdHIoYnl0ZXNbaV0gJSBtYXgsIDEpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldC5qb2luKCcnKTtcbiAgfVxuXG4sIG51bWJlcjogZnVuY3Rpb24obWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heCk7XG4gIH1cblxuLCBudW1iZXJTdHJpbmc6IGZ1bmN0aW9uKG1heCkge1xuICAgIHZhciB0ID0gKCcnICsgKG1heCAtIDEpKS5sZW5ndGg7XG4gICAgdmFyIHAgPSBuZXcgQXJyYXkodCArIDEpLmpvaW4oJzAnKTtcbiAgICByZXR1cm4gKHAgKyB0aGlzLm51bWJlcihtYXgpKS5zbGljZSgtdCk7XG4gIH1cbn07XG5cbn0se1wiY3J5cHRvXCI6NDN9XSw1MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnV0aWxzOnRyYW5zcG9ydCcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGF2YWlsYWJsZVRyYW5zcG9ydHMpIHtcbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXJUb0VuYWJsZWQ6IGZ1bmN0aW9uKHRyYW5zcG9ydHNXaGl0ZWxpc3QsIGluZm8pIHtcbiAgICAgIHZhciB0cmFuc3BvcnRzID0ge1xuICAgICAgICBtYWluOiBbXVxuICAgICAgLCBmYWNhZGU6IFtdXG4gICAgICB9O1xuICAgICAgaWYgKCF0cmFuc3BvcnRzV2hpdGVsaXN0KSB7XG4gICAgICAgIHRyYW5zcG9ydHNXaGl0ZWxpc3QgPSBbXTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRyYW5zcG9ydHNXaGl0ZWxpc3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRyYW5zcG9ydHNXaGl0ZWxpc3QgPSBbdHJhbnNwb3J0c1doaXRlbGlzdF07XG4gICAgICB9XG5cbiAgICAgIGF2YWlsYWJsZVRyYW5zcG9ydHMuZm9yRWFjaChmdW5jdGlvbih0cmFucykge1xuICAgICAgICBpZiAoIXRyYW5zKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zLnRyYW5zcG9ydE5hbWUgPT09ICd3ZWJzb2NrZXQnICYmIGluZm8ud2Vic29ja2V0ID09PSBmYWxzZSkge1xuICAgICAgICAgIGRlYnVnKCdkaXNhYmxlZCBmcm9tIHNlcnZlcicsICd3ZWJzb2NrZXQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNwb3J0c1doaXRlbGlzdC5sZW5ndGggJiZcbiAgICAgICAgICAgIHRyYW5zcG9ydHNXaGl0ZWxpc3QuaW5kZXhPZih0cmFucy50cmFuc3BvcnROYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgICBkZWJ1Zygnbm90IGluIHdoaXRlbGlzdCcsIHRyYW5zLnRyYW5zcG9ydE5hbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFucy5lbmFibGVkKGluZm8pKSB7XG4gICAgICAgICAgZGVidWcoJ2VuYWJsZWQnLCB0cmFucy50cmFuc3BvcnROYW1lKTtcbiAgICAgICAgICB0cmFuc3BvcnRzLm1haW4ucHVzaCh0cmFucyk7XG4gICAgICAgICAgaWYgKHRyYW5zLmZhY2FkZVRyYW5zcG9ydCkge1xuICAgICAgICAgICAgdHJhbnNwb3J0cy5mYWNhZGUucHVzaCh0cmFucy5mYWNhZGVUcmFuc3BvcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWJ1ZygnZGlzYWJsZWQnLCB0cmFucy50cmFuc3BvcnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJhbnNwb3J0cztcbiAgICB9XG4gIH07XG59O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiZGVidWdcIjo1NX1dLDUyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBVUkwgPSByZXF1aXJlKCd1cmwtcGFyc2UnKTtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp1dGlsczp1cmwnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldE9yaWdpbjogZnVuY3Rpb24odXJsKSB7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBwID0gbmV3IFVSTCh1cmwpO1xuICAgIGlmIChwLnByb3RvY29sID09PSAnZmlsZTonKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgcG9ydCA9IHAucG9ydDtcbiAgICBpZiAoIXBvcnQpIHtcbiAgICAgIHBvcnQgPSAocC5wcm90b2NvbCA9PT0gJ2h0dHBzOicpID8gJzQ0MycgOiAnODAnO1xuICAgIH1cblxuICAgIHJldHVybiBwLnByb3RvY29sICsgJy8vJyArIHAuaG9zdG5hbWUgKyAnOicgKyBwb3J0O1xuICB9XG5cbiwgaXNPcmlnaW5FcXVhbDogZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciByZXMgPSB0aGlzLmdldE9yaWdpbihhKSA9PT0gdGhpcy5nZXRPcmlnaW4oYik7XG4gICAgZGVidWcoJ3NhbWUnLCBhLCBiLCByZXMpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuLCBpc1NjaGVtZUVxdWFsOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIChhLnNwbGl0KCc6JylbMF0gPT09IGIuc3BsaXQoJzonKVswXSk7XG4gIH1cblxuLCBhZGRQYXRoOiBmdW5jdGlvbiAodXJsLCBwYXRoKSB7XG4gICAgdmFyIHFzID0gdXJsLnNwbGl0KCc/Jyk7XG4gICAgcmV0dXJuIHFzWzBdICsgcGF0aCArIChxc1sxXSA/ICc/JyArIHFzWzFdIDogJycpO1xuICB9XG5cbiwgYWRkUXVlcnk6IGZ1bmN0aW9uICh1cmwsIHEpIHtcbiAgICByZXR1cm4gdXJsICsgKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gKCc/JyArIHEpIDogKCcmJyArIHEpKTtcbiAgfVxuXG4sIGlzTG9vcGJhY2tBZGRyOiBmdW5jdGlvbiAoYWRkcikge1xuICAgIHJldHVybiAvXjEyN1xcLihbMC05XXsxLDN9KVxcLihbMC05XXsxLDN9KVxcLihbMC05XXsxLDN9KSQvaS50ZXN0KGFkZHIpIHx8IC9eXFxbOjoxXFxdJC8udGVzdChhZGRyKTtcbiAgfVxufTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcImRlYnVnXCI6NTUsXCJ1cmwtcGFyc2VcIjo2MX1dLDUzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbm1vZHVsZS5leHBvcnRzID0gJzEuNS4wJztcblxufSx7fV0sNTQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG5cbn0se31dLDU1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5leHBvcnRzLmxvZyA9IGxvZztcbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG4vKipcbiAqIENvbG9ycy5cbiAqL1xuXG5leHBvcnRzLmNvbG9ycyA9IFsnIzAwMDBDQycsICcjMDAwMEZGJywgJyMwMDMzQ0MnLCAnIzAwMzNGRicsICcjMDA2NkNDJywgJyMwMDY2RkYnLCAnIzAwOTlDQycsICcjMDA5OUZGJywgJyMwMENDMDAnLCAnIzAwQ0MzMycsICcjMDBDQzY2JywgJyMwMENDOTknLCAnIzAwQ0NDQycsICcjMDBDQ0ZGJywgJyMzMzAwQ0MnLCAnIzMzMDBGRicsICcjMzMzM0NDJywgJyMzMzMzRkYnLCAnIzMzNjZDQycsICcjMzM2NkZGJywgJyMzMzk5Q0MnLCAnIzMzOTlGRicsICcjMzNDQzAwJywgJyMzM0NDMzMnLCAnIzMzQ0M2NicsICcjMzNDQzk5JywgJyMzM0NDQ0MnLCAnIzMzQ0NGRicsICcjNjYwMENDJywgJyM2NjAwRkYnLCAnIzY2MzNDQycsICcjNjYzM0ZGJywgJyM2NkNDMDAnLCAnIzY2Q0MzMycsICcjOTkwMENDJywgJyM5OTAwRkYnLCAnIzk5MzNDQycsICcjOTkzM0ZGJywgJyM5OUNDMDAnLCAnIzk5Q0MzMycsICcjQ0MwMDAwJywgJyNDQzAwMzMnLCAnI0NDMDA2NicsICcjQ0MwMDk5JywgJyNDQzAwQ0MnLCAnI0NDMDBGRicsICcjQ0MzMzAwJywgJyNDQzMzMzMnLCAnI0NDMzM2NicsICcjQ0MzMzk5JywgJyNDQzMzQ0MnLCAnI0NDMzNGRicsICcjQ0M2NjAwJywgJyNDQzY2MzMnLCAnI0NDOTkwMCcsICcjQ0M5OTMzJywgJyNDQ0NDMDAnLCAnI0NDQ0MzMycsICcjRkYwMDAwJywgJyNGRjAwMzMnLCAnI0ZGMDA2NicsICcjRkYwMDk5JywgJyNGRjAwQ0MnLCAnI0ZGMDBGRicsICcjRkYzMzAwJywgJyNGRjMzMzMnLCAnI0ZGMzM2NicsICcjRkYzMzk5JywgJyNGRjMzQ0MnLCAnI0ZGMzNGRicsICcjRkY2NjAwJywgJyNGRjY2MzMnLCAnI0ZGOTkwMCcsICcjRkY5OTMzJywgJyNGRkNDMDAnLCAnI0ZGQ0MzMyddO1xuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcblxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuICAvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG4gIC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG4gIC8vIGV4cGxpY2l0bHlcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cblxuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goLyhlZGdlfHRyaWRlbnQpXFwvKFxcZCspLykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcbiAgLy8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblxuXG4gIHJldHVybiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UgfHwgLy8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCB3aW5kb3cuY29uc29sZS5leGNlcHRpb24gJiYgd2luZG93LmNvbnNvbGUudGFibGUpIHx8IC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1Rvb2xzL1dlYl9Db25zb2xlI1N0eWxpbmdfbWVzc2FnZXNcbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSA+PSAzMSB8fCAvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pO1xufVxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuICBhcmdzWzBdID0gKHRoaXMudXNlQ29sb3JzID8gJyVjJyA6ICcnKSArIHRoaXMubmFtZXNwYWNlICsgKHRoaXMudXNlQ29sb3JzID8gJyAlYycgOiAnICcpICsgYXJnc1swXSArICh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArICcrJyArIG1vZHVsZS5leHBvcnRzLmh1bWFuaXplKHRoaXMuZGlmZik7XG5cbiAgaWYgKCF0aGlzLnVzZUNvbG9ycykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcbiAgYXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0Jyk7IC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG4gIC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cbiAgLy8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGxhc3RDID0gMDtcbiAgYXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgIGlmIChtYXRjaCA9PT0gJyUlJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGluZGV4Kys7XG5cbiAgICBpZiAobWF0Y2ggPT09ICclYycpIHtcbiAgICAgIC8vIFdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuICAgICAgLy8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcbiAgICAgIGxhc3RDID0gaW5kZXg7XG4gICAgfVxuICB9KTtcbiAgYXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuLyoqXG4gKiBJbnZva2VzIGBjb25zb2xlLmxvZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUubG9nYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5cbmZ1bmN0aW9uIGxvZygpIHtcbiAgdmFyIF9jb25zb2xlO1xuXG4gIC8vIFRoaXMgaGFja2VyeSBpcyByZXF1aXJlZCBmb3IgSUU4LzksIHdoZXJlXG4gIC8vIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uIGRvZXNuJ3QgaGF2ZSAnYXBwbHknXG4gIHJldHVybiAodHlwZW9mIGNvbnNvbGUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjb25zb2xlKSkgPT09ICdvYmplY3QnICYmIGNvbnNvbGUubG9nICYmIChfY29uc29sZSA9IGNvbnNvbGUpLmxvZy5hcHBseShfY29uc29sZSwgYXJndW1lbnRzKTtcbn1cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG4gIHRyeSB7XG4gICAgaWYgKG5hbWVzcGFjZXMpIHtcbiAgICAgIGV4cG9ydHMuc3RvcmFnZS5zZXRJdGVtKCdkZWJ1ZycsIG5hbWVzcGFjZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7Ly8gU3dhbGxvd1xuICAgIC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuICB9XG59XG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgdmFyIHI7XG5cbiAgdHJ5IHtcbiAgICByID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7fSAvLyBTd2FsbG93XG4gIC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuICAvLyBJZiBkZWJ1ZyBpc24ndCBzZXQgaW4gTFMsIGFuZCB3ZSdyZSBpbiBFbGVjdHJvbiwgdHJ5IHRvIGxvYWQgJERFQlVHXG5cblxuICBpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcbiAgICByID0gcHJvY2Vzcy5lbnYuREVCVUc7XG4gIH1cblxuICByZXR1cm4gcjtcbn1cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG4gIHRyeSB7XG4gICAgLy8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuICAgIC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHsvLyBTd2FsbG93XG4gICAgLy8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xudmFyIGZvcm1hdHRlcnMgPSBtb2R1bGUuZXhwb3J0cy5mb3JtYXR0ZXJzO1xuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG4gIH1cbn07XG5cblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcIi4vY29tbW9uXCI6NTZ9XSw1NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICovXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcbiAgY3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1ZztcbiAgY3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuICBjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG4gIGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuICBjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG4gIGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuICBjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG4gIE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgY3JlYXRlRGVidWdba2V5XSA9IGVudltrZXldO1xuICB9KTtcbiAgLyoqXG4gICogQWN0aXZlIGBkZWJ1Z2AgaW5zdGFuY2VzLlxuICAqL1xuXG4gIGNyZWF0ZURlYnVnLmluc3RhbmNlcyA9IFtdO1xuICAvKipcbiAgKiBUaGUgY3VycmVudGx5IGFjdGl2ZSBkZWJ1ZyBtb2RlIG5hbWVzLCBhbmQgbmFtZXMgdG8gc2tpcC5cbiAgKi9cblxuICBjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuICBjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuICAvKipcbiAgKiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG4gICpcbiAgKiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG4gICovXG5cbiAgY3JlYXRlRGVidWcuZm9ybWF0dGVycyA9IHt9O1xuICAvKipcbiAgKiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG4gICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuICAqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG4gIGZ1bmN0aW9uIHNlbGVjdENvbG9yKG5hbWVzcGFjZSkge1xuICAgIHZhciBoYXNoID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcbiAgfVxuXG4gIGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yID0gc2VsZWN0Q29sb3I7XG4gIC8qKlxuICAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICAqXG4gICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAqIEBhcGkgcHVibGljXG4gICovXG5cbiAgZnVuY3Rpb24gY3JlYXRlRGVidWcobmFtZXNwYWNlKSB7XG4gICAgdmFyIHByZXZUaW1lO1xuXG4gICAgZnVuY3Rpb24gZGVidWcoKSB7XG4gICAgICAvLyBEaXNhYmxlZD9cbiAgICAgIGlmICghZGVidWcuZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VsZiA9IGRlYnVnOyAvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXG4gICAgICB2YXIgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcbiAgICAgIHZhciBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG4gICAgICBzZWxmLmRpZmYgPSBtcztcbiAgICAgIHNlbGYucHJldiA9IHByZXZUaW1lO1xuICAgICAgc2VsZi5jdXJyID0gY3VycjtcbiAgICAgIHByZXZUaW1lID0gY3VycjtcbiAgICAgIGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cbiAgICAgICAgYXJncy51bnNoaWZ0KCclTycpO1xuICAgICAgfSAvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXG5cbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICBhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgZnVuY3Rpb24gKG1hdGNoLCBmb3JtYXQpIHtcbiAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuICAgICAgICBpZiAobWF0Y2ggPT09ICclJScpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICB2YXIgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbCA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTsgLy8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXG4gICAgICAgICAgYXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGluZGV4LS07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICB9KTsgLy8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblxuICAgICAgY3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuICAgICAgdmFyIGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuICAgICAgbG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgfVxuXG4gICAgZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuICAgIGRlYnVnLmVuYWJsZWQgPSBjcmVhdGVEZWJ1Zy5lbmFibGVkKG5hbWVzcGFjZSk7XG4gICAgZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG4gICAgZGVidWcuY29sb3IgPSBzZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuICAgIGRlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgIGRlYnVnLmV4dGVuZCA9IGV4dGVuZDsgLy8gRGVidWcuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG4gICAgLy8gZGVidWcucmF3TG9nID0gcmF3TG9nO1xuICAgIC8vIGVudi1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgZGVidWcgaW5zdGFuY2VzXG5cbiAgICBpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuICAgIH1cblxuICAgIGNyZWF0ZURlYnVnLmluc3RhbmNlcy5wdXNoKGRlYnVnKTtcbiAgICByZXR1cm4gZGVidWc7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHZhciBpbmRleCA9IGNyZWF0ZURlYnVnLmluc3RhbmNlcy5pbmRleE9mKHRoaXMpO1xuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgY3JlYXRlRGVidWcuaW5zdGFuY2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBleHRlbmQobmFtZXNwYWNlLCBkZWxpbWl0ZXIpIHtcbiAgICByZXR1cm4gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcbiAgfVxuICAvKipcbiAgKiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG4gICogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cbiAgKlxuICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gICogQGFwaSBwdWJsaWNcbiAgKi9cblxuXG4gIGZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG4gICAgY3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTtcbiAgICBjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuICAgIGNyZWF0ZURlYnVnLnNraXBzID0gW107XG4gICAgdmFyIGk7XG4gICAgdmFyIHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJykuc3BsaXQoL1tcXHMsXSsvKTtcbiAgICB2YXIgbGVuID0gc3BsaXQubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoIXNwbGl0W2ldKSB7XG4gICAgICAgIC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csICcuKj8nKTtcblxuICAgICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuICAgICAgICBjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobmV3IFJlZ0V4cCgnXicgKyBuYW1lc3BhY2VzICsgJyQnKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGNyZWF0ZURlYnVnLmluc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGluc3RhbmNlID0gY3JlYXRlRGVidWcuaW5zdGFuY2VzW2ldO1xuICAgICAgaW5zdGFuY2UuZW5hYmxlZCA9IGNyZWF0ZURlYnVnLmVuYWJsZWQoaW5zdGFuY2UubmFtZXNwYWNlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG4gICpcbiAgKiBAYXBpIHB1YmxpY1xuICAqL1xuXG5cbiAgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBjcmVhdGVEZWJ1Zy5lbmFibGUoJycpO1xuICB9XG4gIC8qKlxuICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgKlxuICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICogQHJldHVybiB7Qm9vbGVhbn1cbiAgKiBAYXBpIHB1YmxpY1xuICAqL1xuXG5cbiAgZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gICAgaWYgKG5hbWVbbmFtZS5sZW5ndGggLSAxXSA9PT0gJyonKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgbGVuO1xuXG4gICAgZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjcmVhdGVEZWJ1Zy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBjcmVhdGVEZWJ1Zy5uYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGNyZWF0ZURlYnVnLm5hbWVzW2ldLnRlc3QobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAqIENvZXJjZSBgdmFsYC5cbiAgKlxuICAqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuICAqIEByZXR1cm4ge01peGVkfVxuICAqIEBhcGkgcHJpdmF0ZVxuICAqL1xuXG5cbiAgZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsO1xuICB9XG5cbiAgY3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG4gIHJldHVybiBjcmVhdGVEZWJ1Zztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXR1cDtcblxuXG59LHtcIm1zXCI6NTR9XSw1NzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5pZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBpZiAoc3VwZXJDdG9yKSB7XG4gICAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcbiAgICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGlmIChzdXBlckN0b3IpIHtcbiAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZVxuICAgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gICAgfVxuICB9XG59XG5cbn0se31dLDU4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbi8qISBKU09OIHYzLjMuMiB8IGh0dHBzOi8vYmVzdGllanMuZ2l0aHViLmlvL2pzb24zIHwgQ29weXJpZ2h0IDIwMTItMjAxNSwgS2l0IENhbWJyaWRnZSwgQmVuamFtaW4gVGFuIHwgaHR0cDovL2tpdC5taXQtbGljZW5zZS5vcmcgKi9cbjsoZnVuY3Rpb24gKCkge1xuICAvLyBEZXRlY3QgdGhlIGBkZWZpbmVgIGZ1bmN0aW9uIGV4cG9zZWQgYnkgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLiBUaGVcbiAgLy8gc3RyaWN0IGBkZWZpbmVgIGNoZWNrIGlzIG5lY2Vzc2FyeSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIGByLmpzYC5cbiAgdmFyIGlzTG9hZGVyID0gdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQ7XG5cbiAgLy8gQSBzZXQgb2YgdHlwZXMgdXNlZCB0byBkaXN0aW5ndWlzaCBvYmplY3RzIGZyb20gcHJpbWl0aXZlcy5cbiAgdmFyIG9iamVjdFR5cGVzID0ge1xuICAgIFwiZnVuY3Rpb25cIjogdHJ1ZSxcbiAgICBcIm9iamVjdFwiOiB0cnVlXG4gIH07XG5cbiAgLy8gRGV0ZWN0IHRoZSBgZXhwb3J0c2Agb2JqZWN0IGV4cG9zZWQgYnkgQ29tbW9uSlMgaW1wbGVtZW50YXRpb25zLlxuICB2YXIgZnJlZUV4cG9ydHMgPSBvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4gIC8vIFVzZSB0aGUgYGdsb2JhbGAgb2JqZWN0IGV4cG9zZWQgYnkgTm9kZSAoaW5jbHVkaW5nIEJyb3dzZXJpZnkgdmlhXG4gIC8vIGBpbnNlcnQtbW9kdWxlLWdsb2JhbHNgKSwgTmFyd2hhbCwgYW5kIFJpbmdvIGFzIHRoZSBkZWZhdWx0IGNvbnRleHQsXG4gIC8vIGFuZCB0aGUgYHdpbmRvd2Agb2JqZWN0IGluIGJyb3dzZXJzLiBSaGlubyBleHBvcnRzIGEgYGdsb2JhbGAgZnVuY3Rpb25cbiAgLy8gaW5zdGVhZC5cbiAgdmFyIHJvb3QgPSBvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cgfHwgdGhpcyxcbiAgICAgIGZyZWVHbG9iYWwgPSBmcmVlRXhwb3J0cyAmJiBvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiB0eXBlb2YgZ2xvYmFsID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsO1xuXG4gIGlmIChmcmVlR2xvYmFsICYmIChmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fCBmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWwpKSB7XG4gICAgcm9vdCA9IGZyZWVHbG9iYWw7XG4gIH1cblxuICAvLyBQdWJsaWM6IEluaXRpYWxpemVzIEpTT04gMyB1c2luZyB0aGUgZ2l2ZW4gYGNvbnRleHRgIG9iamVjdCwgYXR0YWNoaW5nIHRoZVxuICAvLyBgc3RyaW5naWZ5YCBhbmQgYHBhcnNlYCBmdW5jdGlvbnMgdG8gdGhlIHNwZWNpZmllZCBgZXhwb3J0c2Agb2JqZWN0LlxuICBmdW5jdGlvbiBydW5JbkNvbnRleHQoY29udGV4dCwgZXhwb3J0cykge1xuICAgIGNvbnRleHQgfHwgKGNvbnRleHQgPSByb290Lk9iamVjdCgpKTtcbiAgICBleHBvcnRzIHx8IChleHBvcnRzID0gcm9vdC5PYmplY3QoKSk7XG5cbiAgICAvLyBOYXRpdmUgY29uc3RydWN0b3IgYWxpYXNlcy5cbiAgICB2YXIgTnVtYmVyID0gY29udGV4dC5OdW1iZXIgfHwgcm9vdC5OdW1iZXIsXG4gICAgICAgIFN0cmluZyA9IGNvbnRleHQuU3RyaW5nIHx8IHJvb3QuU3RyaW5nLFxuICAgICAgICBPYmplY3QgPSBjb250ZXh0Lk9iamVjdCB8fCByb290Lk9iamVjdCxcbiAgICAgICAgRGF0ZSA9IGNvbnRleHQuRGF0ZSB8fCByb290LkRhdGUsXG4gICAgICAgIFN5bnRheEVycm9yID0gY29udGV4dC5TeW50YXhFcnJvciB8fCByb290LlN5bnRheEVycm9yLFxuICAgICAgICBUeXBlRXJyb3IgPSBjb250ZXh0LlR5cGVFcnJvciB8fCByb290LlR5cGVFcnJvcixcbiAgICAgICAgTWF0aCA9IGNvbnRleHQuTWF0aCB8fCByb290Lk1hdGgsXG4gICAgICAgIG5hdGl2ZUpTT04gPSBjb250ZXh0LkpTT04gfHwgcm9vdC5KU09OO1xuXG4gICAgLy8gRGVsZWdhdGUgdG8gdGhlIG5hdGl2ZSBgc3RyaW5naWZ5YCBhbmQgYHBhcnNlYCBpbXBsZW1lbnRhdGlvbnMuXG4gICAgaWYgKHR5cGVvZiBuYXRpdmVKU09OID09IFwib2JqZWN0XCIgJiYgbmF0aXZlSlNPTikge1xuICAgICAgZXhwb3J0cy5zdHJpbmdpZnkgPSBuYXRpdmVKU09OLnN0cmluZ2lmeTtcbiAgICAgIGV4cG9ydHMucGFyc2UgPSBuYXRpdmVKU09OLnBhcnNlO1xuICAgIH1cblxuICAgIC8vIENvbnZlbmllbmNlIGFsaWFzZXMuXG4gICAgdmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgZ2V0Q2xhc3MgPSBvYmplY3RQcm90by50b1N0cmluZyxcbiAgICAgICAgaXNQcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5LFxuICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAvLyBJbnRlcm5hbDogQ29udGFpbnMgYHRyeS4uLmNhdGNoYCBsb2dpYyB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucy5cbiAgICAvLyBUaGlzIHByZXZlbnRzIG90aGVyIGZ1bmN0aW9ucyBmcm9tIGJlaW5nIGRlb3B0aW1pemVkLlxuICAgIGZ1bmN0aW9uIGF0dGVtcHQoZnVuYywgZXJyb3JGdW5jKSB7XG4gICAgICB0cnkge1xuICAgICAgICBmdW5jKCk7XG4gICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgaWYgKGVycm9yRnVuYykge1xuICAgICAgICAgIGVycm9yRnVuYygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGVzdCB0aGUgYERhdGUjZ2V0VVRDKmAgbWV0aG9kcy4gQmFzZWQgb24gd29yayBieSBAWWFmZmxlLlxuICAgIHZhciBpc0V4dGVuZGVkID0gbmV3IERhdGUoLTM1MDk4MjczMzQ1NzMyOTIpO1xuICAgIGF0dGVtcHQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gVGhlIGBnZXRVVENGdWxsWWVhcmAsIGBNb250aGAsIGFuZCBgRGF0ZWAgbWV0aG9kcyByZXR1cm4gbm9uc2Vuc2ljYWxcbiAgICAgIC8vIHJlc3VsdHMgZm9yIGNlcnRhaW4gZGF0ZXMgaW4gT3BlcmEgPj0gMTAuNTMuXG4gICAgICBpc0V4dGVuZGVkID0gaXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpID09IC0xMDkyNTIgJiYgaXNFeHRlbmRlZC5nZXRVVENNb250aCgpID09PSAwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDRGF0ZSgpID09PSAxICYmXG4gICAgICAgIGlzRXh0ZW5kZWQuZ2V0VVRDSG91cnMoKSA9PSAxMCAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbnV0ZXMoKSA9PSAzNyAmJiBpc0V4dGVuZGVkLmdldFVUQ1NlY29uZHMoKSA9PSA2ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgPT0gNzA4O1xuICAgIH0pO1xuXG4gICAgLy8gSW50ZXJuYWw6IERldGVybWluZXMgd2hldGhlciB0aGUgbmF0aXZlIGBKU09OLnN0cmluZ2lmeWAgYW5kIGBwYXJzZWBcbiAgICAvLyBpbXBsZW1lbnRhdGlvbnMgYXJlIHNwZWMtY29tcGxpYW50LiBCYXNlZCBvbiB3b3JrIGJ5IEtlbiBTbnlkZXIuXG4gICAgZnVuY3Rpb24gaGFzKG5hbWUpIHtcbiAgICAgIGlmIChoYXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAvLyBSZXR1cm4gY2FjaGVkIGZlYXR1cmUgdGVzdCByZXN1bHQuXG4gICAgICAgIHJldHVybiBoYXNbbmFtZV07XG4gICAgICB9XG4gICAgICB2YXIgaXNTdXBwb3J0ZWQ7XG4gICAgICBpZiAobmFtZSA9PSBcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKSB7XG4gICAgICAgIC8vIElFIDw9IDcgZG9lc24ndCBzdXBwb3J0IGFjY2Vzc2luZyBzdHJpbmcgY2hhcmFjdGVycyB1c2luZyBzcXVhcmVcbiAgICAgICAgLy8gYnJhY2tldCBub3RhdGlvbi4gSUUgOCBvbmx5IHN1cHBvcnRzIHRoaXMgZm9yIHByaW1pdGl2ZXMuXG4gICAgICAgIGlzU3VwcG9ydGVkID0gXCJhXCJbMF0gIT0gXCJhXCI7XG4gICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJqc29uXCIpIHtcbiAgICAgICAgLy8gSW5kaWNhdGVzIHdoZXRoZXIgYm90aCBgSlNPTi5zdHJpbmdpZnlgIGFuZCBgSlNPTi5wYXJzZWAgYXJlXG4gICAgICAgIC8vIHN1cHBvcnRlZC5cbiAgICAgICAgaXNTdXBwb3J0ZWQgPSBoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiBoYXMoXCJkYXRlLXNlcmlhbGl6YXRpb25cIikgJiYgaGFzKFwianNvbi1wYXJzZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSBcImRhdGUtc2VyaWFsaXphdGlvblwiKSB7XG4gICAgICAgIC8vIEluZGljYXRlcyB3aGV0aGVyIGBEYXRlYHMgY2FuIGJlIHNlcmlhbGl6ZWQgYWNjdXJhdGVseSBieSBgSlNPTi5zdHJpbmdpZnlgLlxuICAgICAgICBpc1N1cHBvcnRlZCA9IGhhcyhcImpzb24tc3RyaW5naWZ5XCIpICYmIGlzRXh0ZW5kZWQ7XG4gICAgICAgIGlmIChpc1N1cHBvcnRlZCkge1xuICAgICAgICAgIHZhciBzdHJpbmdpZnkgPSBleHBvcnRzLnN0cmluZ2lmeTtcbiAgICAgICAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzU3VwcG9ydGVkID1cbiAgICAgICAgICAgICAgLy8gSlNPTiAyLCBQcm90b3R5cGUgPD0gMS43LCBhbmQgb2xkZXIgV2ViS2l0IGJ1aWxkcyBpbmNvcnJlY3RseVxuICAgICAgICAgICAgICAvLyBzZXJpYWxpemUgZXh0ZW5kZWQgeWVhcnMuXG4gICAgICAgICAgICAgIHN0cmluZ2lmeShuZXcgRGF0ZSgtOC42NGUxNSkpID09ICdcIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWlwiJyAmJlxuICAgICAgICAgICAgICAvLyBUaGUgbWlsbGlzZWNvbmRzIGFyZSBvcHRpb25hbCBpbiBFUyA1LCBidXQgcmVxdWlyZWQgaW4gNS4xLlxuICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoOC42NGUxNSkpID09ICdcIisyNzU3NjAtMDktMTNUMDA6MDA6MDAuMDAwWlwiJyAmJlxuICAgICAgICAgICAgICAvLyBGaXJlZm94IDw9IDExLjAgaW5jb3JyZWN0bHkgc2VyaWFsaXplcyB5ZWFycyBwcmlvciB0byAwIGFzIG5lZ2F0aXZlXG4gICAgICAgICAgICAgIC8vIGZvdXItZGlnaXQgeWVhcnMgaW5zdGVhZCBvZiBzaXgtZGlnaXQgeWVhcnMuIENyZWRpdHM6IEBZYWZmbGUuXG4gICAgICAgICAgICAgIHN0cmluZ2lmeShuZXcgRGF0ZSgtNjIxOTg3NTUyZTUpKSA9PSAnXCItMDAwMDAxLTAxLTAxVDAwOjAwOjAwLjAwMFpcIicgJiZcbiAgICAgICAgICAgICAgLy8gU2FmYXJpIDw9IDUuMS41IGFuZCBPcGVyYSA+PSAxMC41MyBpbmNvcnJlY3RseSBzZXJpYWxpemUgbWlsbGlzZWNvbmRcbiAgICAgICAgICAgICAgLy8gdmFsdWVzIGxlc3MgdGhhbiAxMDAwLiBDcmVkaXRzOiBAWWFmZmxlLlxuICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoLTEpKSA9PSAnXCIxOTY5LTEyLTMxVDIzOjU5OjU5Ljk5OVpcIic7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2YWx1ZSwgc2VyaWFsaXplZCA9ICd7XCJhXCI6WzEsdHJ1ZSxmYWxzZSxudWxsLFwiXFxcXHUwMDAwXFxcXGJcXFxcblxcXFxmXFxcXHJcXFxcdFwiXX0nO1xuICAgICAgICAvLyBUZXN0IGBKU09OLnN0cmluZ2lmeWAuXG4gICAgICAgIGlmIChuYW1lID09IFwianNvbi1zdHJpbmdpZnlcIikge1xuICAgICAgICAgIHZhciBzdHJpbmdpZnkgPSBleHBvcnRzLnN0cmluZ2lmeSwgc3RyaW5naWZ5U3VwcG9ydGVkID0gdHlwZW9mIHN0cmluZ2lmeSA9PSBcImZ1bmN0aW9uXCI7XG4gICAgICAgICAgaWYgKHN0cmluZ2lmeVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgLy8gQSB0ZXN0IGZ1bmN0aW9uIG9iamVjdCB3aXRoIGEgY3VzdG9tIGB0b0pTT05gIG1ldGhvZC5cbiAgICAgICAgICAgICh2YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9KS50b0pTT04gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF0dGVtcHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPVxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggMy4xYjEgYW5kIGIyIHNlcmlhbGl6ZSBzdHJpbmcsIG51bWJlciwgYW5kIGJvb2xlYW5cbiAgICAgICAgICAgICAgICAvLyBwcmltaXRpdmVzIGFzIG9iamVjdCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoMCkgPT09IFwiMFwiICYmXG4gICAgICAgICAgICAgICAgLy8gRkYgMy4xYjEsIGIyLCBhbmQgSlNPTiAyIHNlcmlhbGl6ZSB3cmFwcGVkIHByaW1pdGl2ZXMgYXMgb2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gbGl0ZXJhbHMuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBOdW1iZXIoKSkgPT09IFwiMFwiICYmXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBTdHJpbmcoKSkgPT0gJ1wiXCInICYmXG4gICAgICAgICAgICAgICAgLy8gRkYgMy4xYjEsIDIgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIHZhbHVlIGlzIGBudWxsYCwgYHVuZGVmaW5lZGAsIG9yXG4gICAgICAgICAgICAgICAgLy8gZG9lcyBub3QgZGVmaW5lIGEgY2Fub25pY2FsIEpTT04gcmVwcmVzZW50YXRpb24gKHRoaXMgYXBwbGllcyB0b1xuICAgICAgICAgICAgICAgIC8vIG9iamVjdHMgd2l0aCBgdG9KU09OYCBwcm9wZXJ0aWVzIGFzIHdlbGwsICp1bmxlc3MqIHRoZXkgYXJlIG5lc3RlZFxuICAgICAgICAgICAgICAgIC8vIHdpdGhpbiBhbiBvYmplY3Qgb3IgYXJyYXkpLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShnZXRDbGFzcykgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIC8vIElFIDggc2VyaWFsaXplcyBgdW5kZWZpbmVkYCBhcyBgXCJ1bmRlZmluZWRcImAuIFNhZmFyaSA8PSA1LjEuNyBhbmRcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMyBwYXNzIHRoaXMgdGVzdC5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkodW5kZWZpbmVkKSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIDw9IDUuMS43IGFuZCBGRiAzLjFiMyB0aHJvdyBgRXJyb3JgcyBhbmQgYFR5cGVFcnJvcmBzLFxuICAgICAgICAgICAgICAgIC8vIHJlc3BlY3RpdmVseSwgaWYgdGhlIHZhbHVlIGlzIG9taXR0ZWQgZW50aXJlbHkuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KCkgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIHRocm93IGFuIGVycm9yIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBub3QgYSBudW1iZXIsXG4gICAgICAgICAgICAgICAgLy8gc3RyaW5nLCBhcnJheSwgb2JqZWN0LCBCb29sZWFuLCBvciBgbnVsbGAgbGl0ZXJhbC4gVGhpcyBhcHBsaWVzIHRvXG4gICAgICAgICAgICAgICAgLy8gb2JqZWN0cyB3aXRoIGN1c3RvbSBgdG9KU09OYCBtZXRob2RzIGFzIHdlbGwsIHVubGVzcyB0aGV5IGFyZSBuZXN0ZWRcbiAgICAgICAgICAgICAgICAvLyBpbnNpZGUgb2JqZWN0IG9yIGFycmF5IGxpdGVyYWxzLiBZVUkgMy4wLjBiMSBpZ25vcmVzIGN1c3RvbSBgdG9KU09OYFxuICAgICAgICAgICAgICAgIC8vIG1ldGhvZHMgZW50aXJlbHkuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KHZhbHVlKSA9PT0gXCIxXCIgJiZcbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoW3ZhbHVlXSkgPT0gXCJbMV1cIiAmJlxuICAgICAgICAgICAgICAgIC8vIFByb3RvdHlwZSA8PSAxLjYuMSBzZXJpYWxpemVzIGBbdW5kZWZpbmVkXWAgYXMgYFwiW11cImAgaW5zdGVhZCBvZlxuICAgICAgICAgICAgICAgIC8vIGBcIltudWxsXVwiYC5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoW3VuZGVmaW5lZF0pID09IFwiW251bGxdXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBZVUkgMy4wLjBiMSBmYWlscyB0byBzZXJpYWxpemUgYG51bGxgIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShudWxsKSA9PSBcIm51bGxcIiAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIGhhbHRzIHNlcmlhbGl6YXRpb24gaWYgYW4gYXJyYXkgY29udGFpbnMgYSBmdW5jdGlvbjpcbiAgICAgICAgICAgICAgICAvLyBgWzEsIHRydWUsIGdldENsYXNzLCAxXWAgc2VyaWFsaXplcyBhcyBcIlsxLHRydWUsXSxcIi4gRkYgMy4xYjNcbiAgICAgICAgICAgICAgICAvLyBlbGlkZXMgbm9uLUpTT04gdmFsdWVzIGZyb20gb2JqZWN0cyBhbmQgYXJyYXlzLCB1bmxlc3MgdGhleVxuICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoW3VuZGVmaW5lZCwgZ2V0Q2xhc3MsIG51bGxdKSA9PSBcIltudWxsLG51bGwsbnVsbF1cIiAmJlxuICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBzZXJpYWxpemF0aW9uIHRlc3QuIEZGIDMuMWIxIHVzZXMgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2VzXG4gICAgICAgICAgICAgICAgLy8gd2hlcmUgY2hhcmFjdGVyIGVzY2FwZSBjb2RlcyBhcmUgZXhwZWN0ZWQgKGUuZy4sIGBcXGJgID0+IGBcXHUwMDA4YCkuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KHsgXCJhXCI6IFt2YWx1ZSwgdHJ1ZSwgZmFsc2UsIG51bGwsIFwiXFx4MDBcXGJcXG5cXGZcXHJcXHRcIl0gfSkgPT0gc2VyaWFsaXplZCAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxIGFuZCBiMiBpZ25vcmUgdGhlIGBmaWx0ZXJgIGFuZCBgd2lkdGhgIGFyZ3VtZW50cy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkobnVsbCwgdmFsdWUpID09PSBcIjFcIiAmJlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShbMSwgMl0sIG51bGwsIDEpID09IFwiW1xcbiAxLFxcbiAyXFxuXVwiO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzdHJpbmdpZnlTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1N1cHBvcnRlZCA9IHN0cmluZ2lmeVN1cHBvcnRlZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUZXN0IGBKU09OLnBhcnNlYC5cbiAgICAgICAgaWYgKG5hbWUgPT0gXCJqc29uLXBhcnNlXCIpIHtcbiAgICAgICAgICB2YXIgcGFyc2UgPSBleHBvcnRzLnBhcnNlLCBwYXJzZVN1cHBvcnRlZDtcbiAgICAgICAgICBpZiAodHlwZW9mIHBhcnNlID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgYXR0ZW1wdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCBiMiB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhIGJhcmUgbGl0ZXJhbCBpcyBwcm92aWRlZC5cbiAgICAgICAgICAgICAgLy8gQ29uZm9ybWluZyBpbXBsZW1lbnRhdGlvbnMgc2hvdWxkIGFsc28gY29lcmNlIHRoZSBpbml0aWFsIGFyZ3VtZW50IHRvXG4gICAgICAgICAgICAgIC8vIGEgc3RyaW5nIHByaW9yIHRvIHBhcnNpbmcuXG4gICAgICAgICAgICAgIGlmIChwYXJzZShcIjBcIikgPT09IDAgJiYgIXBhcnNlKGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBwYXJzaW5nIHRlc3QuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZShzZXJpYWxpemVkKTtcbiAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9IHZhbHVlW1wiYVwiXS5sZW5ndGggPT0gNSAmJiB2YWx1ZVtcImFcIl1bMF0gPT09IDE7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpIDw9IDUuMS4yIGFuZCBGRiAzLjFiMSBhbGxvdyB1bmVzY2FwZWQgdGFicyBpbiBzdHJpbmdzLlxuICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9ICFwYXJzZSgnXCJcXHRcIicpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBpZiAocGFyc2VTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gRkYgNC4wIGFuZCA0LjAuMSBhbGxvdyBsZWFkaW5nIGArYCBzaWducyBhbmQgbGVhZGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGRlY2ltYWwgcG9pbnRzLiBGRiA0LjAsIDQuMC4xLCBhbmQgSUUgOS0xMCBhbHNvIGFsbG93XG4gICAgICAgICAgICAgICAgICAgICAgLy8gY2VydGFpbiBvY3RhbCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICAgICAgICBwYXJzZVN1cHBvcnRlZCA9IHBhcnNlKFwiMDFcIikgIT09IDE7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEZGIDQuMCwgNC4wLjEsIGFuZCBSaGlubyAxLjdSMy1SNCBhbGxvdyB0cmFpbGluZyBkZWNpbWFsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gcG9pbnRzLiBUaGVzZSBlbnZpcm9ubWVudHMsIGFsb25nIHdpdGggRkYgMy4xYjEgYW5kIDIsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gYWxzbyBhbGxvdyB0cmFpbGluZyBjb21tYXMgaW4gSlNPTiBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjEuXCIpICE9PSAxO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1N1cHBvcnRlZCA9IHBhcnNlU3VwcG9ydGVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzW25hbWVdID0gISFpc1N1cHBvcnRlZDtcbiAgICB9XG4gICAgaGFzW1wiYnVnLXN0cmluZy1jaGFyLWluZGV4XCJdID0gaGFzW1wiZGF0ZS1zZXJpYWxpemF0aW9uXCJdID0gaGFzW1wianNvblwiXSA9IGhhc1tcImpzb24tc3RyaW5naWZ5XCJdID0gaGFzW1wianNvbi1wYXJzZVwiXSA9IG51bGw7XG5cbiAgICBpZiAoIWhhcyhcImpzb25cIikpIHtcbiAgICAgIC8vIENvbW1vbiBgW1tDbGFzc11dYCBuYW1lIGFsaWFzZXMuXG4gICAgICB2YXIgZnVuY3Rpb25DbGFzcyA9IFwiW29iamVjdCBGdW5jdGlvbl1cIixcbiAgICAgICAgICBkYXRlQ2xhc3MgPSBcIltvYmplY3QgRGF0ZV1cIixcbiAgICAgICAgICBudW1iZXJDbGFzcyA9IFwiW29iamVjdCBOdW1iZXJdXCIsXG4gICAgICAgICAgc3RyaW5nQ2xhc3MgPSBcIltvYmplY3QgU3RyaW5nXVwiLFxuICAgICAgICAgIGFycmF5Q2xhc3MgPSBcIltvYmplY3QgQXJyYXldXCIsXG4gICAgICAgICAgYm9vbGVhbkNsYXNzID0gXCJbb2JqZWN0IEJvb2xlYW5dXCI7XG5cbiAgICAgIC8vIERldGVjdCBpbmNvbXBsZXRlIHN1cHBvcnQgZm9yIGFjY2Vzc2luZyBzdHJpbmcgY2hhcmFjdGVycyBieSBpbmRleC5cbiAgICAgIHZhciBjaGFySW5kZXhCdWdneSA9IGhhcyhcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiKTtcblxuICAgICAgLy8gSW50ZXJuYWw6IE5vcm1hbGl6ZXMgdGhlIGBmb3IuLi5pbmAgaXRlcmF0aW9uIGFsZ29yaXRobSBhY3Jvc3NcbiAgICAgIC8vIGVudmlyb25tZW50cy4gRWFjaCBlbnVtZXJhdGVkIGtleSBpcyB5aWVsZGVkIHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi5cbiAgICAgIHZhciBmb3JPd24gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgc2l6ZSA9IDAsIFByb3BlcnRpZXMsIGRvbnRFbnVtcywgcHJvcGVydHk7XG5cbiAgICAgICAgLy8gVGVzdHMgZm9yIGJ1Z3MgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQncyBgZm9yLi4uaW5gIGFsZ29yaXRobS4gVGhlXG4gICAgICAgIC8vIGB2YWx1ZU9mYCBwcm9wZXJ0eSBpbmhlcml0cyB0aGUgbm9uLWVudW1lcmFibGUgZmxhZyBmcm9tXG4gICAgICAgIC8vIGBPYmplY3QucHJvdG90eXBlYCBpbiBvbGRlciB2ZXJzaW9ucyBvZiBJRSwgTmV0c2NhcGUsIGFuZCBNb3ppbGxhLlxuICAgICAgICAoUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlT2YgPSAwO1xuICAgICAgICB9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7XG5cbiAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBgUHJvcGVydGllc2AgY2xhc3MuXG4gICAgICAgIGRvbnRFbnVtcyA9IG5ldyBQcm9wZXJ0aWVzKCk7XG4gICAgICAgIGZvciAocHJvcGVydHkgaW4gZG9udEVudW1zKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGFsbCBwcm9wZXJ0aWVzIGluaGVyaXRlZCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC5cbiAgICAgICAgICBpZiAoaXNQcm9wZXJ0eS5jYWxsKGRvbnRFbnVtcywgcHJvcGVydHkpKSB7XG4gICAgICAgICAgICBzaXplKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFByb3BlcnRpZXMgPSBkb250RW51bXMgPSBudWxsO1xuXG4gICAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgaXRlcmF0aW9uIGFsZ29yaXRobS5cbiAgICAgICAgaWYgKCFzaXplKSB7XG4gICAgICAgICAgLy8gQSBsaXN0IG9mIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXMgaW5oZXJpdGVkIGZyb20gYE9iamVjdC5wcm90b3R5cGVgLlxuICAgICAgICAgIGRvbnRFbnVtcyA9IFtcInZhbHVlT2ZcIiwgXCJ0b1N0cmluZ1wiLCBcInRvTG9jYWxlU3RyaW5nXCIsIFwicHJvcGVydHlJc0VudW1lcmFibGVcIiwgXCJpc1Byb3RvdHlwZU9mXCIsIFwiaGFzT3duUHJvcGVydHlcIiwgXCJjb25zdHJ1Y3RvclwiXTtcbiAgICAgICAgICAvLyBJRSA8PSA4LCBNb3ppbGxhIDEuMCwgYW5kIE5ldHNjYXBlIDYuMiBpZ25vcmUgc2hhZG93ZWQgbm9uLWVudW1lcmFibGVcbiAgICAgICAgICAvLyBwcm9wZXJ0aWVzLlxuICAgICAgICAgIGZvck93biA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IGdldENsYXNzLmNhbGwob2JqZWN0KSA9PSBmdW5jdGlvbkNsYXNzLCBwcm9wZXJ0eSwgbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGhhc1Byb3BlcnR5ID0gIWlzRnVuY3Rpb24gJiYgdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciAhPSBcImZ1bmN0aW9uXCIgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eV0gJiYgb2JqZWN0Lmhhc093blByb3BlcnR5IHx8IGlzUHJvcGVydHk7XG4gICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAvLyBHZWNrbyA8PSAxLjAgZW51bWVyYXRlcyB0aGUgYHByb3RvdHlwZWAgcHJvcGVydHkgb2YgZnVuY3Rpb25zIHVuZGVyXG4gICAgICAgICAgICAgIC8vIGNlcnRhaW4gY29uZGl0aW9uczsgSUUgZG9lcyBub3QuXG4gICAgICAgICAgICAgIGlmICghKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gXCJwcm90b3R5cGVcIikgJiYgaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFudWFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayBmb3IgZWFjaCBub24tZW51bWVyYWJsZSBwcm9wZXJ0eS5cbiAgICAgICAgICAgIGZvciAobGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDsgcHJvcGVydHkgPSBkb250RW51bXNbLS1sZW5ndGhdOykge1xuICAgICAgICAgICAgICBpZiAoaGFzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gYnVncyBkZXRlY3RlZDsgdXNlIHRoZSBzdGFuZGFyZCBgZm9yLi4uaW5gIGFsZ29yaXRobS5cbiAgICAgICAgICBmb3JPd24gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcywgcHJvcGVydHksIGlzQ29uc3RydWN0b3I7XG4gICAgICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICBpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSAmJiAhKGlzQ29uc3RydWN0b3IgPSBwcm9wZXJ0eSA9PT0gXCJjb25zdHJ1Y3RvclwiKSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFudWFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayBmb3IgdGhlIGBjb25zdHJ1Y3RvcmAgcHJvcGVydHkgZHVlIHRvXG4gICAgICAgICAgICAvLyBjcm9zcy1lbnZpcm9ubWVudCBpbmNvbnNpc3RlbmNpZXMuXG4gICAgICAgICAgICBpZiAoaXNDb25zdHJ1Y3RvciB8fCBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LCAocHJvcGVydHkgPSBcImNvbnN0cnVjdG9yXCIpKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9yT3duKG9iamVjdCwgY2FsbGJhY2spO1xuICAgICAgfTtcblxuICAgICAgLy8gUHVibGljOiBTZXJpYWxpemVzIGEgSmF2YVNjcmlwdCBgdmFsdWVgIGFzIGEgSlNPTiBzdHJpbmcuIFRoZSBvcHRpb25hbFxuICAgICAgLy8gYGZpbHRlcmAgYXJndW1lbnQgbWF5IHNwZWNpZnkgZWl0aGVyIGEgZnVuY3Rpb24gdGhhdCBhbHRlcnMgaG93IG9iamVjdCBhbmRcbiAgICAgIC8vIGFycmF5IG1lbWJlcnMgYXJlIHNlcmlhbGl6ZWQsIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgYW5kIG51bWJlcnMgdGhhdFxuICAgICAgLy8gaW5kaWNhdGVzIHdoaWNoIHByb3BlcnRpZXMgc2hvdWxkIGJlIHNlcmlhbGl6ZWQuIFRoZSBvcHRpb25hbCBgd2lkdGhgXG4gICAgICAvLyBhcmd1bWVudCBtYXkgYmUgZWl0aGVyIGEgc3RyaW5nIG9yIG51bWJlciB0aGF0IHNwZWNpZmllcyB0aGUgaW5kZW50YXRpb25cbiAgICAgIC8vIGxldmVsIG9mIHRoZSBvdXRwdXQuXG4gICAgICBpZiAoIWhhcyhcImpzb24tc3RyaW5naWZ5XCIpICYmICFoYXMoXCJkYXRlLXNlcmlhbGl6YXRpb25cIikpIHtcbiAgICAgICAgLy8gSW50ZXJuYWw6IEEgbWFwIG9mIGNvbnRyb2wgY2hhcmFjdGVycyBhbmQgdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy5cbiAgICAgICAgdmFyIEVzY2FwZXMgPSB7XG4gICAgICAgICAgOTI6IFwiXFxcXFxcXFxcIixcbiAgICAgICAgICAzNDogJ1xcXFxcIicsXG4gICAgICAgICAgODogXCJcXFxcYlwiLFxuICAgICAgICAgIDEyOiBcIlxcXFxmXCIsXG4gICAgICAgICAgMTA6IFwiXFxcXG5cIixcbiAgICAgICAgICAxMzogXCJcXFxcclwiLFxuICAgICAgICAgIDk6IFwiXFxcXHRcIlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBDb252ZXJ0cyBgdmFsdWVgIGludG8gYSB6ZXJvLXBhZGRlZCBzdHJpbmcgc3VjaCB0aGF0IGl0c1xuICAgICAgICAvLyBsZW5ndGggaXMgYXQgbGVhc3QgZXF1YWwgdG8gYHdpZHRoYC4gVGhlIGB3aWR0aGAgbXVzdCBiZSA8PSA2LlxuICAgICAgICB2YXIgbGVhZGluZ1plcm9lcyA9IFwiMDAwMDAwXCI7XG4gICAgICAgIHZhciB0b1BhZGRlZFN0cmluZyA9IGZ1bmN0aW9uICh3aWR0aCwgdmFsdWUpIHtcbiAgICAgICAgICAvLyBUaGUgYHx8IDBgIGV4cHJlc3Npb24gaXMgbmVjZXNzYXJ5IHRvIHdvcmsgYXJvdW5kIGEgYnVnIGluXG4gICAgICAgICAgLy8gT3BlcmEgPD0gNy41NHUyIHdoZXJlIGAwID09IC0wYCwgYnV0IGBTdHJpbmcoLTApICE9PSBcIjBcImAuXG4gICAgICAgICAgcmV0dXJuIChsZWFkaW5nWmVyb2VzICsgKHZhbHVlIHx8IDApKS5zbGljZSgtd2lkdGgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBTZXJpYWxpemVzIGEgZGF0ZSBvYmplY3QuXG4gICAgICAgIHZhciBzZXJpYWxpemVEYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGdldERhdGEsIHllYXIsIG1vbnRoLCBkYXRlLCB0aW1lLCBob3VycywgbWludXRlcywgc2Vjb25kcywgbWlsbGlzZWNvbmRzO1xuICAgICAgICAgIC8vIERlZmluZSBhZGRpdGlvbmFsIHV0aWxpdHkgbWV0aG9kcyBpZiB0aGUgYERhdGVgIG1ldGhvZHMgYXJlIGJ1Z2d5LlxuICAgICAgICAgIGlmICghaXNFeHRlbmRlZCkge1xuICAgICAgICAgICAgdmFyIGZsb29yID0gTWF0aC5mbG9vcjtcbiAgICAgICAgICAgIC8vIEEgbWFwcGluZyBiZXR3ZWVuIHRoZSBtb250aHMgb2YgdGhlIHllYXIgYW5kIHRoZSBudW1iZXIgb2YgZGF5cyBiZXR3ZWVuXG4gICAgICAgICAgICAvLyBKYW51YXJ5IDFzdCBhbmQgdGhlIGZpcnN0IG9mIHRoZSByZXNwZWN0aXZlIG1vbnRoLlxuICAgICAgICAgICAgdmFyIE1vbnRocyA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XG4gICAgICAgICAgICAvLyBJbnRlcm5hbDogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiB0aGUgVW5peCBlcG9jaCBhbmQgdGhlXG4gICAgICAgICAgICAvLyBmaXJzdCBkYXkgb2YgdGhlIGdpdmVuIG1vbnRoLlxuICAgICAgICAgICAgdmFyIGdldERheSA9IGZ1bmN0aW9uICh5ZWFyLCBtb250aCkge1xuICAgICAgICAgICAgICByZXR1cm4gTW9udGhzW21vbnRoXSArIDM2NSAqICh5ZWFyIC0gMTk3MCkgKyBmbG9vcigoeWVhciAtIDE5NjkgKyAobW9udGggPSArKG1vbnRoID4gMSkpKSAvIDQpIC0gZmxvb3IoKHllYXIgLSAxOTAxICsgbW9udGgpIC8gMTAwKSArIGZsb29yKCh5ZWFyIC0gMTYwMSArIG1vbnRoKSAvIDQwMCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2V0RGF0YSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBNYW51YWxseSBjb21wdXRlIHRoZSB5ZWFyLCBtb250aCwgZGF0ZSwgaG91cnMsIG1pbnV0ZXMsXG4gICAgICAgICAgICAgIC8vIHNlY29uZHMsIGFuZCBtaWxsaXNlY29uZHMgaWYgdGhlIGBnZXRVVEMqYCBtZXRob2RzIGFyZVxuICAgICAgICAgICAgICAvLyBidWdneS4gQWRhcHRlZCBmcm9tIEBZYWZmbGUncyBgZGF0ZS1zaGltYCBwcm9qZWN0LlxuICAgICAgICAgICAgICBkYXRlID0gZmxvb3IodmFsdWUgLyA4NjRlNSk7XG4gICAgICAgICAgICAgIGZvciAoeWVhciA9IGZsb29yKGRhdGUgLyAzNjUuMjQyNSkgKyAxOTcwIC0gMTsgZ2V0RGF5KHllYXIgKyAxLCAwKSA8PSBkYXRlOyB5ZWFyKyspO1xuICAgICAgICAgICAgICBmb3IgKG1vbnRoID0gZmxvb3IoKGRhdGUgLSBnZXREYXkoeWVhciwgMCkpIC8gMzAuNDIpOyBnZXREYXkoeWVhciwgbW9udGggKyAxKSA8PSBkYXRlOyBtb250aCsrKTtcbiAgICAgICAgICAgICAgZGF0ZSA9IDEgKyBkYXRlIC0gZ2V0RGF5KHllYXIsIG1vbnRoKTtcbiAgICAgICAgICAgICAgLy8gVGhlIGB0aW1lYCB2YWx1ZSBzcGVjaWZpZXMgdGhlIHRpbWUgd2l0aGluIHRoZSBkYXkgKHNlZSBFU1xuICAgICAgICAgICAgICAvLyA1LjEgc2VjdGlvbiAxNS45LjEuMikuIFRoZSBmb3JtdWxhIGAoQSAlIEIgKyBCKSAlIEJgIGlzIHVzZWRcbiAgICAgICAgICAgICAgLy8gdG8gY29tcHV0ZSBgQSBtb2R1bG8gQmAsIGFzIHRoZSBgJWAgb3BlcmF0b3IgZG9lcyBub3RcbiAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZCB0byB0aGUgYG1vZHVsb2Agb3BlcmF0aW9uIGZvciBuZWdhdGl2ZSBudW1iZXJzLlxuICAgICAgICAgICAgICB0aW1lID0gKHZhbHVlICUgODY0ZTUgKyA4NjRlNSkgJSA4NjRlNTtcbiAgICAgICAgICAgICAgLy8gVGhlIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIGFyZSBvYnRhaW5lZCBieVxuICAgICAgICAgICAgICAvLyBkZWNvbXBvc2luZyB0aGUgdGltZSB3aXRoaW4gdGhlIGRheS4gU2VlIHNlY3Rpb24gMTUuOS4xLjEwLlxuICAgICAgICAgICAgICBob3VycyA9IGZsb29yKHRpbWUgLyAzNmU1KSAlIDI0O1xuICAgICAgICAgICAgICBtaW51dGVzID0gZmxvb3IodGltZSAvIDZlNCkgJSA2MDtcbiAgICAgICAgICAgICAgc2Vjb25kcyA9IGZsb29yKHRpbWUgLyAxZTMpICUgNjA7XG4gICAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IHRpbWUgJSAxZTM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXREYXRhID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHllYXIgPSB2YWx1ZS5nZXRVVENGdWxsWWVhcigpO1xuICAgICAgICAgICAgICBtb250aCA9IHZhbHVlLmdldFVUQ01vbnRoKCk7XG4gICAgICAgICAgICAgIGRhdGUgPSB2YWx1ZS5nZXRVVENEYXRlKCk7XG4gICAgICAgICAgICAgIGhvdXJzID0gdmFsdWUuZ2V0VVRDSG91cnMoKTtcbiAgICAgICAgICAgICAgbWludXRlcyA9IHZhbHVlLmdldFVUQ01pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgc2Vjb25kcyA9IHZhbHVlLmdldFVUQ1NlY29uZHMoKTtcbiAgICAgICAgICAgICAgbWlsbGlzZWNvbmRzID0gdmFsdWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXJpYWxpemVEYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPiAtMSAvIDAgJiYgdmFsdWUgPCAxIC8gMCkge1xuICAgICAgICAgICAgICAvLyBEYXRlcyBhcmUgc2VyaWFsaXplZCBhY2NvcmRpbmcgdG8gdGhlIGBEYXRlI3RvSlNPTmAgbWV0aG9kXG4gICAgICAgICAgICAgIC8vIHNwZWNpZmllZCBpbiBFUyA1LjEgc2VjdGlvbiAxNS45LjUuNDQuIFNlZSBzZWN0aW9uIDE1LjkuMS4xNVxuICAgICAgICAgICAgICAvLyBmb3IgdGhlIElTTyA4NjAxIGRhdGUgdGltZSBzdHJpbmcgZm9ybWF0LlxuICAgICAgICAgICAgICBnZXREYXRhKHZhbHVlKTtcbiAgICAgICAgICAgICAgLy8gU2VyaWFsaXplIGV4dGVuZGVkIHllYXJzIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgdmFsdWUgPSAoeWVhciA8PSAwIHx8IHllYXIgPj0gMWU0ID8gKHllYXIgPCAwID8gXCItXCIgOiBcIitcIikgKyB0b1BhZGRlZFN0cmluZyg2LCB5ZWFyIDwgMCA/IC15ZWFyIDogeWVhcikgOiB0b1BhZGRlZFN0cmluZyg0LCB5ZWFyKSkgK1xuICAgICAgICAgICAgICBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1vbnRoICsgMSkgKyBcIi1cIiArIHRvUGFkZGVkU3RyaW5nKDIsIGRhdGUpICtcbiAgICAgICAgICAgICAgLy8gTW9udGhzLCBkYXRlcywgaG91cnMsIG1pbnV0ZXMsIGFuZCBzZWNvbmRzIHNob3VsZCBoYXZlIHR3b1xuICAgICAgICAgICAgICAvLyBkaWdpdHM7IG1pbGxpc2Vjb25kcyBzaG91bGQgaGF2ZSB0aHJlZS5cbiAgICAgICAgICAgICAgXCJUXCIgKyB0b1BhZGRlZFN0cmluZygyLCBob3VycykgKyBcIjpcIiArIHRvUGFkZGVkU3RyaW5nKDIsIG1pbnV0ZXMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBzZWNvbmRzKSArXG4gICAgICAgICAgICAgIC8vIE1pbGxpc2Vjb25kcyBhcmUgb3B0aW9uYWwgaW4gRVMgNS4wLCBidXQgcmVxdWlyZWQgaW4gNS4xLlxuICAgICAgICAgICAgICBcIi5cIiArIHRvUGFkZGVkU3RyaW5nKDMsIG1pbGxpc2Vjb25kcykgKyBcIlpcIjtcbiAgICAgICAgICAgICAgeWVhciA9IG1vbnRoID0gZGF0ZSA9IGhvdXJzID0gbWludXRlcyA9IHNlY29uZHMgPSBtaWxsaXNlY29uZHMgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUodmFsdWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEZvciBlbnZpcm9ubWVudHMgd2l0aCBgSlNPTi5zdHJpbmdpZnlgIGJ1dCBidWdneSBkYXRlIHNlcmlhbGl6YXRpb24sXG4gICAgICAgIC8vIHdlIG92ZXJyaWRlIHRoZSBuYXRpdmUgYERhdGUjdG9KU09OYCBpbXBsZW1lbnRhdGlvbiB3aXRoIGFcbiAgICAgICAgLy8gc3BlYy1jb21wbGlhbnQgb25lLlxuICAgICAgICBpZiAoaGFzKFwianNvbi1zdHJpbmdpZnlcIikgJiYgIWhhcyhcImRhdGUtc2VyaWFsaXphdGlvblwiKSkge1xuICAgICAgICAgIC8vIEludGVybmFsOiB0aGUgYERhdGUjdG9KU09OYCBpbXBsZW1lbnRhdGlvbiB1c2VkIHRvIG92ZXJyaWRlIHRoZSBuYXRpdmUgb25lLlxuICAgICAgICAgIGZ1bmN0aW9uIGRhdGVUb0pTT04gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUodGhpcyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUHVibGljOiBgSlNPTi5zdHJpbmdpZnlgLiBTZWUgRVMgNS4xIHNlY3Rpb24gMTUuMTIuMy5cbiAgICAgICAgICB2YXIgbmF0aXZlU3RyaW5naWZ5ID0gZXhwb3J0cy5zdHJpbmdpZnk7XG4gICAgICAgICAgZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbiAoc291cmNlLCBmaWx0ZXIsIHdpZHRoKSB7XG4gICAgICAgICAgICB2YXIgbmF0aXZlVG9KU09OID0gRGF0ZS5wcm90b3R5cGUudG9KU09OO1xuICAgICAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZGF0ZVRvSlNPTjtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBuYXRpdmVTdHJpbmdpZnkoc291cmNlLCBmaWx0ZXIsIHdpZHRoKTtcbiAgICAgICAgICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IG5hdGl2ZVRvSlNPTjtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEludGVybmFsOiBEb3VibGUtcXVvdGVzIGEgc3RyaW5nIGB2YWx1ZWAsIHJlcGxhY2luZyBhbGwgQVNDSUkgY29udHJvbFxuICAgICAgICAgIC8vIGNoYXJhY3RlcnMgKGNoYXJhY3RlcnMgd2l0aCBjb2RlIHVuaXQgdmFsdWVzIGJldHdlZW4gMCBhbmQgMzEpIHdpdGhcbiAgICAgICAgICAvLyB0aGVpciBlc2NhcGVkIGVxdWl2YWxlbnRzLiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZVxuICAgICAgICAgIC8vIGBRdW90ZSh2YWx1ZSlgIG9wZXJhdGlvbiBkZWZpbmVkIGluIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMuXG4gICAgICAgICAgdmFyIHVuaWNvZGVQcmVmaXggPSBcIlxcXFx1MDBcIjtcbiAgICAgICAgICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uIChjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGNoYXJhY3Rlci5jaGFyQ29kZUF0KDApLCBlc2NhcGVkID0gRXNjYXBlc1tjaGFyQ29kZV07XG4gICAgICAgICAgICBpZiAoZXNjYXBlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmljb2RlUHJlZml4ICsgdG9QYWRkZWRTdHJpbmcoMiwgY2hhckNvZGUudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciByZUVzY2FwZSA9IC9bXFx4MDAtXFx4MWZcXHgyMlxceDVjXS9nO1xuICAgICAgICAgIHZhciBxdW90ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmVFc2NhcGUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgIHJldHVybiAnXCInICtcbiAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIHJlRXNjYXBlLnRlc3QodmFsdWUpXG4gICAgICAgICAgICAgICAgICA/IHZhbHVlLnJlcGxhY2UocmVFc2NhcGUsIGVzY2FwZUNoYXIpXG4gICAgICAgICAgICAgICAgICA6IHZhbHVlXG4gICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAnXCInO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBJbnRlcm5hbDogUmVjdXJzaXZlbHkgc2VyaWFsaXplcyBhbiBvYmplY3QuIEltcGxlbWVudHMgdGhlXG4gICAgICAgICAgLy8gYFN0cihrZXksIGhvbGRlcilgLCBgSk8odmFsdWUpYCwgYW5kIGBKQSh2YWx1ZSlgIG9wZXJhdGlvbnMuXG4gICAgICAgICAgdmFyIHNlcmlhbGl6ZSA9IGZ1bmN0aW9uIChwcm9wZXJ0eSwgb2JqZWN0LCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUsIHR5cGUsIGNsYXNzTmFtZSwgcmVzdWx0cywgZWxlbWVudCwgaW5kZXgsIGxlbmd0aCwgcHJlZml4LCByZXN1bHQ7XG4gICAgICAgICAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8gTmVjZXNzYXJ5IGZvciBob3N0IG9iamVjdCBzdXBwb3J0LlxuICAgICAgICAgICAgICB2YWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuZ2V0VVRDRnVsbFllYXIgJiYgZ2V0Q2xhc3MuY2FsbCh2YWx1ZSkgPT0gZGF0ZUNsYXNzICYmIHZhbHVlLnRvSlNPTiA9PT0gRGF0ZS5wcm90b3R5cGUudG9KU09OKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzZXJpYWxpemVEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUudG9KU09OID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9KU09OKHByb3BlcnR5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIC8vIElmIGEgcmVwbGFjZW1lbnQgZnVuY3Rpb24gd2FzIHByb3ZpZGVkLCBjYWxsIGl0IHRvIG9idGFpbiB0aGUgdmFsdWVcbiAgICAgICAgICAgICAgLy8gZm9yIHNlcmlhbGl6YXRpb24uXG4gICAgICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suY2FsbChvYmplY3QsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFeGl0IGVhcmx5IGlmIHZhbHVlIGlzIGB1bmRlZmluZWRgIG9yIGBudWxsYC5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB2YWx1ZSA6IFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgICAgICAgIC8vIE9ubHkgY2FsbCBgZ2V0Q2xhc3NgIGlmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QuXG4gICAgICAgICAgICBpZiAodHlwZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChjbGFzc05hbWUgfHwgdHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgICBjYXNlIGJvb2xlYW5DbGFzczpcbiAgICAgICAgICAgICAgICAvLyBCb29sZWFucyBhcmUgcmVwcmVzZW50ZWQgbGl0ZXJhbGx5LlxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgdmFsdWU7XG4gICAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgICAgY2FzZSBudW1iZXJDbGFzczpcbiAgICAgICAgICAgICAgICAvLyBKU09OIG51bWJlcnMgbXVzdCBiZSBmaW5pdGUuIGBJbmZpbml0eWAgYW5kIGBOYU5gIGFyZSBzZXJpYWxpemVkIGFzXG4gICAgICAgICAgICAgICAgLy8gYFwibnVsbFwiYC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPiAtMSAvIDAgJiYgdmFsdWUgPCAxIC8gMCA/IFwiXCIgKyB2YWx1ZSA6IFwibnVsbFwiO1xuICAgICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgIGNhc2Ugc3RyaW5nQ2xhc3M6XG4gICAgICAgICAgICAgICAgLy8gU3RyaW5ncyBhcmUgZG91YmxlLXF1b3RlZCBhbmQgZXNjYXBlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gcXVvdGUoXCJcIiArIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGlzIGlzIGEgbGluZWFyIHNlYXJjaDsgcGVyZm9ybWFuY2VcbiAgICAgICAgICAgICAgLy8gaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mIHVuaXF1ZSBuZXN0ZWQgb2JqZWN0cy5cbiAgICAgICAgICAgICAgZm9yIChsZW5ndGggPSBzdGFjay5sZW5ndGg7IGxlbmd0aC0tOykge1xuICAgICAgICAgICAgICAgIGlmIChzdGFja1tsZW5ndGhdID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgLy8gQ3ljbGljIHN0cnVjdHVyZXMgY2Fubm90IGJlIHNlcmlhbGl6ZWQgYnkgYEpTT04uc3RyaW5naWZ5YC5cbiAgICAgICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBBZGQgdGhlIG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgICAgICAgICAgIHN0YWNrLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwgYW5kIGluZGVudCBvbmUgYWRkaXRpb25hbCBsZXZlbC5cbiAgICAgICAgICAgICAgcHJlZml4ID0gaW5kZW50YXRpb247XG4gICAgICAgICAgICAgIGluZGVudGF0aW9uICs9IHdoaXRlc3BhY2U7XG4gICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gYXJyYXlDbGFzcykge1xuICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBhcnJheSBlbGVtZW50cy5cbiAgICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IHNlcmlhbGl6ZShpbmRleCwgdmFsdWUsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spO1xuICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGVsZW1lbnQgPT09IHVuZGVmaW5lZCA/IFwibnVsbFwiIDogZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdHMubGVuZ3RoID8gKHdoaXRlc3BhY2UgPyBcIltcXG5cIiArIGluZGVudGF0aW9uICsgcmVzdWx0cy5qb2luKFwiLFxcblwiICsgaW5kZW50YXRpb24pICsgXCJcXG5cIiArIHByZWZpeCArIFwiXVwiIDogKFwiW1wiICsgcmVzdWx0cy5qb2luKFwiLFwiKSArIFwiXVwiKSkgOiBcIltdXCI7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgc2VyaWFsaXplIG9iamVjdCBtZW1iZXJzLiBNZW1iZXJzIGFyZSBzZWxlY3RlZCBmcm9tXG4gICAgICAgICAgICAgICAgLy8gZWl0aGVyIGEgdXNlci1zcGVjaWZpZWQgbGlzdCBvZiBwcm9wZXJ0eSBuYW1lcywgb3IgdGhlIG9iamVjdFxuICAgICAgICAgICAgICAgIC8vIGl0c2VsZi5cbiAgICAgICAgICAgICAgICBmb3JPd24ocHJvcGVydGllcyB8fCB2YWx1ZSwgZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNlcmlhbGl6ZShwcm9wZXJ0eSwgdmFsdWUsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCB3aGl0ZXNwYWNlLCBpbmRlbnRhdGlvbiwgc3RhY2spO1xuICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY2NvcmRpbmcgdG8gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMzogXCJJZiBgZ2FwYCB7d2hpdGVzcGFjZX1cbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgbm90IHRoZSBlbXB0eSBzdHJpbmcsIGxldCBgbWVtYmVyYCB7cXVvdGUocHJvcGVydHkpICsgXCI6XCJ9XG4gICAgICAgICAgICAgICAgICAgIC8vIGJlIHRoZSBjb25jYXRlbmF0aW9uIG9mIGBtZW1iZXJgIGFuZCB0aGUgYHNwYWNlYCBjaGFyYWN0ZXIuXCJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIFwiYHNwYWNlYCBjaGFyYWN0ZXJcIiByZWZlcnMgdG8gdGhlIGxpdGVyYWwgc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhcmFjdGVyLCBub3QgdGhlIGBzcGFjZWAge3dpZHRofSBhcmd1bWVudCBwcm92aWRlZCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBgSlNPTi5zdHJpbmdpZnlgLlxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocXVvdGUocHJvcGVydHkpICsgXCI6XCIgKyAod2hpdGVzcGFjZSA/IFwiIFwiIDogXCJcIikgKyBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/ICh3aGl0ZXNwYWNlID8gXCJ7XFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIn1cIiA6IChcIntcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIn1cIikpIDogXCJ7fVwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgb2JqZWN0IGZyb20gdGhlIHRyYXZlcnNlZCBvYmplY3Qgc3RhY2suXG4gICAgICAgICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBQdWJsaWM6IGBKU09OLnN0cmluZ2lmeWAuIFNlZSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLlxuICAgICAgICAgIGV4cG9ydHMuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKHNvdXJjZSwgZmlsdGVyLCB3aWR0aCkge1xuICAgICAgICAgICAgdmFyIHdoaXRlc3BhY2UsIGNhbGxiYWNrLCBwcm9wZXJ0aWVzLCBjbGFzc05hbWU7XG4gICAgICAgICAgICBpZiAob2JqZWN0VHlwZXNbdHlwZW9mIGZpbHRlcl0gJiYgZmlsdGVyKSB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwoZmlsdGVyKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBmdW5jdGlvbkNsYXNzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmaWx0ZXI7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBwcm9wZXJ0eSBuYW1lcyBhcnJheSBpbnRvIGEgbWFrZXNoaWZ0IHNldC5cbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGggPSBmaWx0ZXIubGVuZ3RoLCB2YWx1ZTsgaW5kZXggPCBsZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IGZpbHRlcltpbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBcIltvYmplY3QgU3RyaW5nXVwiIHx8IGNsYXNzTmFtZSA9PSBcIltvYmplY3QgTnVtYmVyXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNbdmFsdWVdID0gMTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aWR0aCkge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHdpZHRoKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSBudW1iZXJDbGFzcykge1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGB3aWR0aGAgdG8gYW4gaW50ZWdlciBhbmQgY3JlYXRlIGEgc3RyaW5nIGNvbnRhaW5pbmdcbiAgICAgICAgICAgICAgICAvLyBgd2lkdGhgIG51bWJlciBvZiBzcGFjZSBjaGFyYWN0ZXJzLlxuICAgICAgICAgICAgICAgIGlmICgod2lkdGggLT0gd2lkdGggJSAxKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGlmICh3aWR0aCA+IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gMTA7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBmb3IgKHdoaXRlc3BhY2UgPSBcIlwiOyB3aGl0ZXNwYWNlLmxlbmd0aCA8IHdpZHRoOykge1xuICAgICAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlICs9IFwiIFwiO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlID0gd2lkdGgubGVuZ3RoIDw9IDEwID8gd2lkdGggOiB3aWR0aC5zbGljZSgwLCAxMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9wZXJhIDw9IDcuNTR1MiBkaXNjYXJkcyB0aGUgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCBlbXB0eSBzdHJpbmcga2V5c1xuICAgICAgICAgICAgLy8gKGBcIlwiYCkgb25seSBpZiB0aGV5IGFyZSB1c2VkIGRpcmVjdGx5IHdpdGhpbiBhbiBvYmplY3QgbWVtYmVyIGxpc3RcbiAgICAgICAgICAgIC8vIChlLmcuLCBgIShcIlwiIGluIHsgXCJcIjogMX0pYCkuXG4gICAgICAgICAgICByZXR1cm4gc2VyaWFsaXplKFwiXCIsICh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHNvdXJjZSwgdmFsdWUpLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgXCJcIiwgW10pO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUHVibGljOiBQYXJzZXMgYSBKU09OIHNvdXJjZSBzdHJpbmcuXG4gICAgICBpZiAoIWhhcyhcImpzb24tcGFyc2VcIikpIHtcbiAgICAgICAgdmFyIGZyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IEEgbWFwIG9mIGVzY2FwZWQgY29udHJvbCBjaGFyYWN0ZXJzIGFuZCB0aGVpciB1bmVzY2FwZWRcbiAgICAgICAgLy8gZXF1aXZhbGVudHMuXG4gICAgICAgIHZhciBVbmVzY2FwZXMgPSB7XG4gICAgICAgICAgOTI6IFwiXFxcXFwiLFxuICAgICAgICAgIDM0OiAnXCInLFxuICAgICAgICAgIDQ3OiBcIi9cIixcbiAgICAgICAgICA5ODogXCJcXGJcIixcbiAgICAgICAgICAxMTY6IFwiXFx0XCIsXG4gICAgICAgICAgMTEwOiBcIlxcblwiLFxuICAgICAgICAgIDEwMjogXCJcXGZcIixcbiAgICAgICAgICAxMTQ6IFwiXFxyXCJcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogU3RvcmVzIHRoZSBwYXJzZXIgc3RhdGUuXG4gICAgICAgIHZhciBJbmRleCwgU291cmNlO1xuXG4gICAgICAgIC8vIEludGVybmFsOiBSZXNldHMgdGhlIHBhcnNlciBzdGF0ZSBhbmQgdGhyb3dzIGEgYFN5bnRheEVycm9yYC5cbiAgICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIEluZGV4ID0gU291cmNlID0gbnVsbDtcbiAgICAgICAgICB0aHJvdyBTeW50YXhFcnJvcigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBSZXR1cm5zIHRoZSBuZXh0IHRva2VuLCBvciBgXCIkXCJgIGlmIHRoZSBwYXJzZXIgaGFzIHJlYWNoZWRcbiAgICAgICAgLy8gdGhlIGVuZCBvZiB0aGUgc291cmNlIHN0cmluZy4gQSB0b2tlbiBtYXkgYmUgYSBzdHJpbmcsIG51bWJlciwgYG51bGxgXG4gICAgICAgIC8vIGxpdGVyYWwsIG9yIEJvb2xlYW4gbGl0ZXJhbC5cbiAgICAgICAgdmFyIGxleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc291cmNlID0gU291cmNlLCBsZW5ndGggPSBzb3VyY2UubGVuZ3RoLCB2YWx1ZSwgYmVnaW4sIHBvc2l0aW9uLCBpc1NpZ25lZCwgY2hhckNvZGU7XG4gICAgICAgICAgd2hpbGUgKEluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhckNvZGUpIHtcbiAgICAgICAgICAgICAgY2FzZSA5OiBjYXNlIDEwOiBjYXNlIDEzOiBjYXNlIDMyOlxuICAgICAgICAgICAgICAgIC8vIFNraXAgd2hpdGVzcGFjZSB0b2tlbnMsIGluY2x1ZGluZyB0YWJzLCBjYXJyaWFnZSByZXR1cm5zLCBsaW5lXG4gICAgICAgICAgICAgICAgLy8gZmVlZHMsIGFuZCBzcGFjZSBjaGFyYWN0ZXJzLlxuICAgICAgICAgICAgICAgIEluZGV4Kys7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgMTIzOiBjYXNlIDEyNTogY2FzZSA5MTogY2FzZSA5MzogY2FzZSA1ODogY2FzZSA0NDpcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBhIHB1bmN0dWF0b3IgdG9rZW4gKGB7YCwgYH1gLCBgW2AsIGBdYCwgYDpgLCBvciBgLGApIGF0XG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjaGFySW5kZXhCdWdneSA/IHNvdXJjZS5jaGFyQXQoSW5kZXgpIDogc291cmNlW0luZGV4XTtcbiAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgY2FzZSAzNDpcbiAgICAgICAgICAgICAgICAvLyBgXCJgIGRlbGltaXRzIGEgSlNPTiBzdHJpbmc7IGFkdmFuY2UgdG8gdGhlIG5leHQgY2hhcmFjdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIGJlZ2luIHBhcnNpbmcgdGhlIHN0cmluZy4gU3RyaW5nIHRva2VucyBhcmUgcHJlZml4ZWQgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbCBgQGAgY2hhcmFjdGVyIHRvIGRpc3Rpbmd1aXNoIHRoZW0gZnJvbSBwdW5jdHVhdG9ycyBhbmRcbiAgICAgICAgICAgICAgICAvLyBlbmQtb2Ytc3RyaW5nIHRva2Vucy5cbiAgICAgICAgICAgICAgICBmb3IgKHZhbHVlID0gXCJAXCIsIEluZGV4Kys7IEluZGV4IDwgbGVuZ3RoOykge1xuICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG4gICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPCAzMikge1xuICAgICAgICAgICAgICAgICAgICAvLyBVbmVzY2FwZWQgQVNDSUkgY29udHJvbCBjaGFyYWN0ZXJzICh0aG9zZSB3aXRoIGEgY29kZSB1bml0XG4gICAgICAgICAgICAgICAgICAgIC8vIGxlc3MgdGhhbiB0aGUgc3BhY2UgY2hhcmFjdGVyKSBhcmUgbm90IHBlcm1pdHRlZC5cbiAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhckNvZGUgPT0gOTIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSByZXZlcnNlIHNvbGlkdXMgKGBcXGApIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYW4gZXNjYXBlZFxuICAgICAgICAgICAgICAgICAgICAvLyBjb250cm9sIGNoYXJhY3RlciAoaW5jbHVkaW5nIGBcImAsIGBcXGAsIGFuZCBgL2ApIG9yIFVuaWNvZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNjYXBlIHNlcXVlbmNlLlxuICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoYXJDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MjogY2FzZSAzNDogY2FzZSA0NzogY2FzZSA5ODogY2FzZSAxMTY6IGNhc2UgMTEwOiBjYXNlIDEwMjogY2FzZSAxMTQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZpdmUgZXNjYXBlZCBjb250cm9sIGNoYXJhY3RlcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBVbmVzY2FwZXNbY2hhckNvZGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE3OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYFxcdWAgbWFya3MgdGhlIGJlZ2lubmluZyBvZiBhIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0byB0aGUgZmlyc3QgY2hhcmFjdGVyIGFuZCB2YWxpZGF0ZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvdXItZGlnaXQgY29kZSBwb2ludC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luID0gKytJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocG9zaXRpb24gPSBJbmRleCArIDQ7IEluZGV4IDwgcG9zaXRpb247IEluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdmFsaWQgc2VxdWVuY2UgY29tcHJpc2VzIGZvdXIgaGV4ZGlnaXRzIChjYXNlLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnNlbnNpdGl2ZSkgdGhhdCBmb3JtIGEgc2luZ2xlIGhleGFkZWNpbWFsIHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1NyB8fCBjaGFyQ29kZSA+PSA5NyAmJiBjaGFyQ29kZSA8PSAxMDIgfHwgY2hhckNvZGUgPj0gNjUgJiYgY2hhckNvZGUgPD0gNzApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZpdmUgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gZnJvbUNoYXJDb2RlKFwiMHhcIiArIHNvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSAzNCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEFuIHVuZXNjYXBlZCBkb3VibGUtcXVvdGUgY2hhcmFjdGVyIG1hcmtzIHRoZSBlbmQgb2YgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgLy8gc3RyaW5nLlxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBiZWdpbiA9IEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBPcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiBjYXNlIHdoZXJlIGEgc3RyaW5nIGlzIHZhbGlkLlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hhckNvZGUgPj0gMzIgJiYgY2hhckNvZGUgIT0gOTIgJiYgY2hhckNvZGUgIT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgc3RyaW5nIGFzLWlzLlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSA9PSAzNCkge1xuICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0byB0aGUgbmV4dCBjaGFyYWN0ZXIgYW5kIHJldHVybiB0aGUgcmV2aXZlZCBzdHJpbmcuXG4gICAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBVbnRlcm1pbmF0ZWQgc3RyaW5nLlxuICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgbnVtYmVycyBhbmQgbGl0ZXJhbHMuXG4gICAgICAgICAgICAgICAgYmVnaW4gPSBJbmRleDtcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHBhc3QgdGhlIG5lZ2F0aXZlIHNpZ24sIGlmIG9uZSBpcyBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlID09IDQ1KSB7XG4gICAgICAgICAgICAgICAgICBpc1NpZ25lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBhbiBpbnRlZ2VyIG9yIGZsb2F0aW5nLXBvaW50IHZhbHVlLlxuICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgICAgICAgLy8gTGVhZGluZyB6ZXJvZXMgYXJlIGludGVycHJldGVkIGFzIG9jdGFsIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlID09IDQ4ICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCArIDEpKSwgY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElsbGVnYWwgb2N0YWwgbGl0ZXJhbC5cbiAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlzU2lnbmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW50ZWdlciBjb21wb25lbnQuXG4gICAgICAgICAgICAgICAgICBmb3IgKDsgSW5kZXggPCBsZW5ndGggJiYgKChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KTsgSW5kZXgrKyk7XG4gICAgICAgICAgICAgICAgICAvLyBGbG9hdHMgY2Fubm90IGNvbnRhaW4gYSBsZWFkaW5nIGRlY2ltYWwgcG9pbnQ7IGhvd2V2ZXIsIHRoaXNcbiAgICAgICAgICAgICAgICAgIC8vIGNhc2UgaXMgYWxyZWFkeSBhY2NvdW50ZWQgZm9yIGJ5IHRoZSBwYXJzZXIuXG4gICAgICAgICAgICAgICAgICBpZiAoc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpID09IDQ2KSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gKytJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGRlY2ltYWwgY29tcG9uZW50LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgcG9zaXRpb24gPCBsZW5ndGg7IHBvc2l0aW9uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPCA0OCB8fCBjaGFyQ29kZSA+IDU3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09IEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWxsZWdhbCB0cmFpbGluZyBkZWNpbWFsLlxuICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSW5kZXggPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIGV4cG9uZW50cy4gVGhlIGBlYCBkZW5vdGluZyB0aGUgZXhwb25lbnQgaXNcbiAgICAgICAgICAgICAgICAgIC8vIGNhc2UtaW5zZW5zaXRpdmUuXG4gICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcbiAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSAxMDEgfHwgY2hhckNvZGUgPT0gNjkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBwYXN0IHRoZSBzaWduIGZvbGxvd2luZyB0aGUgZXhwb25lbnQsIGlmIG9uZSBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0MyB8fCBjaGFyQ29kZSA9PSA0NSkge1xuICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGV4cG9uZW50aWFsIGNvbXBvbmVudC5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChwb3NpdGlvbiA9IEluZGV4OyBwb3NpdGlvbiA8IGxlbmd0aDsgcG9zaXRpb24rKykge1xuICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQocG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA8IDQ4IHx8IGNoYXJDb2RlID4gNTcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT0gSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBJbGxlZ2FsIGVtcHR5IGV4cG9uZW50LlxuICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSW5kZXggPSBwb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8vIENvZXJjZSB0aGUgcGFyc2VkIHZhbHVlIHRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gICAgICAgICAgICAgICAgICByZXR1cm4gK3NvdXJjZS5zbGljZShiZWdpbiwgSW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBBIG5lZ2F0aXZlIHNpZ24gbWF5IG9ubHkgcHJlY2VkZSBudW1iZXJzLlxuICAgICAgICAgICAgICAgIGlmIChpc1NpZ25lZCkge1xuICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYHRydWVgLCBgZmFsc2VgLCBhbmQgYG51bGxgIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gc291cmNlLnNsaWNlKEluZGV4LCBJbmRleCArIDQpO1xuICAgICAgICAgICAgICAgIGlmICh0ZW1wID09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICAgICAgICBJbmRleCArPSA0O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wID09IFwiZmFsc1wiICYmIHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4ICsgNCApID09IDEwMSkge1xuICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRlbXAgPT0gXCJudWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDQ7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVW5yZWNvZ25pemVkIHRva2VuLlxuICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFJldHVybiB0aGUgc2VudGluZWwgYCRgIGNoYXJhY3RlciBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkIHRoZSBlbmRcbiAgICAgICAgICAvLyBvZiB0aGUgc291cmNlIHN0cmluZy5cbiAgICAgICAgICByZXR1cm4gXCIkXCI7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IFBhcnNlcyBhIEpTT04gYHZhbHVlYCB0b2tlbi5cbiAgICAgICAgdmFyIGdldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciByZXN1bHRzLCBoYXNNZW1iZXJzO1xuICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIiRcIikge1xuICAgICAgICAgICAgLy8gVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQuXG4gICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICgoY2hhckluZGV4QnVnZ3kgPyB2YWx1ZS5jaGFyQXQoMCkgOiB2YWx1ZVswXSkgPT0gXCJAXCIpIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBzZW50aW5lbCBgQGAgY2hhcmFjdGVyLlxuICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQYXJzZSBvYmplY3QgYW5kIGFycmF5IGxpdGVyYWxzLlxuICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiW1wiKSB7XG4gICAgICAgICAgICAgIC8vIFBhcnNlcyBhIEpTT04gYXJyYXksIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IGFycmF5LlxuICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGxleCgpO1xuICAgICAgICAgICAgICAgIC8vIEEgY2xvc2luZyBzcXVhcmUgYnJhY2tldCBtYXJrcyB0aGUgZW5kIG9mIHRoZSBhcnJheSBsaXRlcmFsLlxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBhcnJheSBsaXRlcmFsIGNvbnRhaW5zIGVsZW1lbnRzLCB0aGUgY3VycmVudCB0b2tlblxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBiZSBhIGNvbW1hIHNlcGFyYXRpbmcgdGhlIHByZXZpb3VzIGVsZW1lbnQgZnJvbSB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXh0LlxuICAgICAgICAgICAgICAgIGlmIChoYXNNZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gVW5leHBlY3RlZCB0cmFpbGluZyBgLGAgaW4gYXJyYXkgbGl0ZXJhbC5cbiAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBBIGAsYCBtdXN0IHNlcGFyYXRlIGVhY2ggYXJyYXkgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaGFzTWVtYmVycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEVsaXNpb25zIGFuZCBsZWFkaW5nIGNvbW1hcyBhcmUgbm90IHBlcm1pdHRlZC5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChnZXQodmFsdWUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgLy8gUGFyc2VzIGEgSlNPTiBvYmplY3QsIHJldHVybmluZyBhIG5ldyBKYXZhU2NyaXB0IG9iamVjdC5cbiAgICAgICAgICAgICAgcmVzdWx0cyA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcbiAgICAgICAgICAgICAgICAvLyBBIGNsb3NpbmcgY3VybHkgYnJhY2UgbWFya3MgdGhlIGVuZCBvZiB0aGUgb2JqZWN0IGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwifVwiKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9iamVjdCBsaXRlcmFsIGNvbnRhaW5zIG1lbWJlcnMsIHRoZSBjdXJyZW50IHRva2VuXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGEgY29tbWEgc2VwYXJhdG9yLlxuICAgICAgICAgICAgICAgIGlmIChoYXNNZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwifVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gVW5leHBlY3RlZCB0cmFpbGluZyBgLGAgaW4gb2JqZWN0IGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBgLGAgbXVzdCBzZXBhcmF0ZSBlYWNoIG9iamVjdCBtZW1iZXIuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGhhc01lbWJlcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBMZWFkaW5nIGNvbW1hcyBhcmUgbm90IHBlcm1pdHRlZCwgb2JqZWN0IHByb3BlcnR5IG5hbWVzIG11c3QgYmVcbiAgICAgICAgICAgICAgICAvLyBkb3VibGUtcXVvdGVkIHN0cmluZ3MsIGFuZCBhIGA6YCBtdXN0IHNlcGFyYXRlIGVhY2ggcHJvcGVydHlcbiAgICAgICAgICAgICAgICAvLyBuYW1lIGFuZCB2YWx1ZS5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCIsXCIgfHwgdHlwZW9mIHZhbHVlICE9IFwic3RyaW5nXCIgfHwgKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuY2hhckF0KDApIDogdmFsdWVbMF0pICE9IFwiQFwiIHx8IGxleCgpICE9IFwiOlwiKSB7XG4gICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRzW3ZhbHVlLnNsaWNlKDEpXSA9IGdldChsZXgoKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVbmV4cGVjdGVkIHRva2VuIGVuY291bnRlcmVkLlxuICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBVcGRhdGVzIGEgdHJhdmVyc2VkIG9iamVjdCBtZW1iZXIuXG4gICAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbiAoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IHdhbGsoc291cmNlLCBwcm9wZXJ0eSwgY2FsbGJhY2spO1xuICAgICAgICAgIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzb3VyY2VbcHJvcGVydHldO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2VbcHJvcGVydHldID0gZWxlbWVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IFJlY3Vyc2l2ZWx5IHRyYXZlcnNlcyBhIHBhcnNlZCBKU09OIG9iamVjdCwgaW52b2tpbmcgdGhlXG4gICAgICAgIC8vIGBjYWxsYmFja2AgZnVuY3Rpb24gZm9yIGVhY2ggdmFsdWUuIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlXG4gICAgICAgIC8vIGBXYWxrKGhvbGRlciwgbmFtZSlgIG9wZXJhdGlvbiBkZWZpbmVkIGluIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjIuXG4gICAgICAgIHZhciB3YWxrID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XSwgbGVuZ3RoO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJvYmplY3RcIiAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gYGZvck93bmAgY2FuJ3QgYmUgdXNlZCB0byB0cmF2ZXJzZSBhbiBhcnJheSBpbiBPcGVyYSA8PSA4LjU0XG4gICAgICAgICAgICAvLyBiZWNhdXNlIGl0cyBgT2JqZWN0I2hhc093blByb3BlcnR5YCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGBmYWxzZWBcbiAgICAgICAgICAgIC8vIGZvciBhcnJheSBpbmRpY2VzIChlLmcuLCBgIVsxLCAyLCAzXS5oYXNPd25Qcm9wZXJ0eShcIjBcIilgKS5cbiAgICAgICAgICAgIGlmIChnZXRDbGFzcy5jYWxsKHZhbHVlKSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgIGZvciAobGVuZ3RoID0gdmFsdWUubGVuZ3RoOyBsZW5ndGgtLTspIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUoZ2V0Q2xhc3MsIGZvck93biwgdmFsdWUsIGxlbmd0aCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3JPd24odmFsdWUsIGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZSh2YWx1ZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHNvdXJjZSwgcHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQdWJsaWM6IGBKU09OLnBhcnNlYC4gU2VlIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjIuXG4gICAgICAgIGV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaykge1xuICAgICAgICAgIHZhciByZXN1bHQsIHZhbHVlO1xuICAgICAgICAgIEluZGV4ID0gMDtcbiAgICAgICAgICBTb3VyY2UgPSBcIlwiICsgc291cmNlO1xuICAgICAgICAgIHJlc3VsdCA9IGdldChsZXgoKSk7XG4gICAgICAgICAgLy8gSWYgYSBKU09OIHN0cmluZyBjb250YWlucyBtdWx0aXBsZSB0b2tlbnMsIGl0IGlzIGludmFsaWQuXG4gICAgICAgICAgaWYgKGxleCgpICE9IFwiJFwiKSB7XG4gICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZXNldCB0aGUgcGFyc2VyIHN0YXRlLlxuICAgICAgICAgIEluZGV4ID0gU291cmNlID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sgJiYgZ2V0Q2xhc3MuY2FsbChjYWxsYmFjaykgPT0gZnVuY3Rpb25DbGFzcyA/IHdhbGsoKHZhbHVlID0ge30sIHZhbHVlW1wiXCJdID0gcmVzdWx0LCB2YWx1ZSksIFwiXCIsIGNhbGxiYWNrKSA6IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnRzLnJ1bkluQ29udGV4dCA9IHJ1bkluQ29udGV4dDtcbiAgICByZXR1cm4gZXhwb3J0cztcbiAgfVxuXG4gIGlmIChmcmVlRXhwb3J0cyAmJiAhaXNMb2FkZXIpIHtcbiAgICAvLyBFeHBvcnQgZm9yIENvbW1vbkpTIGVudmlyb25tZW50cy5cbiAgICBydW5JbkNvbnRleHQocm9vdCwgZnJlZUV4cG9ydHMpO1xuICB9IGVsc2Uge1xuICAgIC8vIEV4cG9ydCBmb3Igd2ViIGJyb3dzZXJzIGFuZCBKYXZhU2NyaXB0IGVuZ2luZXMuXG4gICAgdmFyIG5hdGl2ZUpTT04gPSByb290LkpTT04sXG4gICAgICAgIHByZXZpb3VzSlNPTiA9IHJvb3QuSlNPTjMsXG4gICAgICAgIGlzUmVzdG9yZWQgPSBmYWxzZTtcblxuICAgIHZhciBKU09OMyA9IHJ1bkluQ29udGV4dChyb290LCAocm9vdC5KU09OMyA9IHtcbiAgICAgIC8vIFB1YmxpYzogUmVzdG9yZXMgdGhlIG9yaWdpbmFsIHZhbHVlIG9mIHRoZSBnbG9iYWwgYEpTT05gIG9iamVjdCBhbmRcbiAgICAgIC8vIHJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGBKU09OM2Agb2JqZWN0LlxuICAgICAgXCJub0NvbmZsaWN0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc1Jlc3RvcmVkKSB7XG4gICAgICAgICAgaXNSZXN0b3JlZCA9IHRydWU7XG4gICAgICAgICAgcm9vdC5KU09OID0gbmF0aXZlSlNPTjtcbiAgICAgICAgICByb290LkpTT04zID0gcHJldmlvdXNKU09OO1xuICAgICAgICAgIG5hdGl2ZUpTT04gPSBwcmV2aW91c0pTT04gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OMztcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICByb290LkpTT04gPSB7XG4gICAgICBcInBhcnNlXCI6IEpTT04zLnBhcnNlLFxuICAgICAgXCJzdHJpbmdpZnlcIjogSlNPTjMuc3RyaW5naWZ5XG4gICAgfTtcbiAgfVxuXG4gIC8vIEV4cG9ydCBmb3IgYXN5bmNocm9ub3VzIG1vZHVsZSBsb2FkZXJzLlxuICBpZiAoaXNMb2FkZXIpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEpTT04zO1xuICAgIH0pO1xuICB9XG59KS5jYWxsKHRoaXMpO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7fV0sNTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuICAsIHVuZGVmO1xuXG4vKipcbiAqIERlY29kZSBhIFVSSSBlbmNvZGVkIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFVSSSBlbmNvZGVkIHN0cmluZy5cbiAqIEByZXR1cm5zIHtTdHJpbmd8TnVsbH0gVGhlIGRlY29kZWQgc3RyaW5nLlxuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoaW5wdXQucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmNvZGUgYSBnaXZlbiBpbnB1dC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyB0aGF0IG5lZWRzIHRvIGJlIGVuY29kZWQuXG4gKiBAcmV0dXJucyB7U3RyaW5nfE51bGx9IFRoZSBlbmNvZGVkIHN0cmluZy5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGlucHV0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogU2ltcGxlIHF1ZXJ5IHN0cmluZyBwYXJzZXIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHF1ZXJ5IFRoZSBxdWVyeSBzdHJpbmcgdGhhdCBuZWVkcyB0byBiZSBwYXJzZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICogQGFwaSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnkpIHtcbiAgdmFyIHBhcnNlciA9IC8oW149PyZdKyk9PyhbXiZdKikvZ1xuICAgICwgcmVzdWx0ID0ge31cbiAgICAsIHBhcnQ7XG5cbiAgd2hpbGUgKHBhcnQgPSBwYXJzZXIuZXhlYyhxdWVyeSkpIHtcbiAgICB2YXIga2V5ID0gZGVjb2RlKHBhcnRbMV0pXG4gICAgICAsIHZhbHVlID0gZGVjb2RlKHBhcnRbMl0pO1xuXG4gICAgLy9cbiAgICAvLyBQcmV2ZW50IG92ZXJyaWRpbmcgb2YgZXhpc3RpbmcgcHJvcGVydGllcy4gVGhpcyBlbnN1cmVzIHRoYXQgYnVpbGQtaW5cbiAgICAvLyBtZXRob2RzIGxpa2UgYHRvU3RyaW5nYCBvciBfX3Byb3RvX18gYXJlIG5vdCBvdmVycmlkZW4gYnkgbWFsaWNpb3VzXG4gICAgLy8gcXVlcnlzdHJpbmdzLlxuICAgIC8vXG4gICAgLy8gSW4gdGhlIGNhc2UgaWYgZmFpbGVkIGRlY29kaW5nLCB3ZSB3YW50IHRvIG9taXQgdGhlIGtleS92YWx1ZSBwYWlyc1xuICAgIC8vIGZyb20gdGhlIHJlc3VsdC5cbiAgICAvL1xuICAgIGlmIChrZXkgPT09IG51bGwgfHwgdmFsdWUgPT09IG51bGwgfHwga2V5IGluIHJlc3VsdCkgY29udGludWU7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGEgcXVlcnkgc3RyaW5nIHRvIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9iamVjdCB0aGF0IHNob3VsZCBiZSB0cmFuc2Zvcm1lZC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcmVmaXggT3B0aW9uYWwgcHJlZml4LlxuICogQHJldHVybnMge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5naWZ5KG9iaiwgcHJlZml4KSB7XG4gIHByZWZpeCA9IHByZWZpeCB8fCAnJztcblxuICB2YXIgcGFpcnMgPSBbXVxuICAgICwgdmFsdWVcbiAgICAsIGtleTtcblxuICAvL1xuICAvLyBPcHRpb25hbGx5IHByZWZpeCB3aXRoIGEgJz8nIGlmIG5lZWRlZFxuICAvL1xuICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBwcmVmaXgpIHByZWZpeCA9ICc/JztcblxuICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzLmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICB2YWx1ZSA9IG9ialtrZXldO1xuXG4gICAgICAvL1xuICAgICAgLy8gRWRnZSBjYXNlcyB3aGVyZSB3ZSBhY3R1YWxseSB3YW50IHRvIGVuY29kZSB0aGUgdmFsdWUgdG8gYW4gZW1wdHlcbiAgICAgIC8vIHN0cmluZyBpbnN0ZWFkIG9mIHRoZSBzdHJpbmdpZmllZCB2YWx1ZS5cbiAgICAgIC8vXG4gICAgICBpZiAoIXZhbHVlICYmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWYgfHwgaXNOYU4odmFsdWUpKSkge1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuXG4gICAgICBrZXkgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcbiAgICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblxuICAgICAgLy9cbiAgICAgIC8vIElmIHdlIGZhaWxlZCB0byBlbmNvZGUgdGhlIHN0cmluZ3MsIHdlIHNob3VsZCBiYWlsIG91dCBhcyB3ZSBkb24ndFxuICAgICAgLy8gd2FudCB0byBhZGQgaW52YWxpZCBzdHJpbmdzIHRvIHRoZSBxdWVyeS5cbiAgICAgIC8vXG4gICAgICBpZiAoa2V5ID09PSBudWxsIHx8IHZhbHVlID09PSBudWxsKSBjb250aW51ZTtcbiAgICAgIHBhaXJzLnB1c2goa2V5ICsnPScrIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFpcnMubGVuZ3RoID8gcHJlZml4ICsgcGFpcnMuam9pbignJicpIDogJyc7XG59XG5cbi8vXG4vLyBFeHBvc2UgdGhlIG1vZHVsZS5cbi8vXG5leHBvcnRzLnN0cmluZ2lmeSA9IHF1ZXJ5c3RyaW5naWZ5O1xuZXhwb3J0cy5wYXJzZSA9IHF1ZXJ5c3RyaW5nO1xuXG59LHt9XSw2MDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ2hlY2sgaWYgd2UncmUgcmVxdWlyZWQgdG8gYWRkIGEgcG9ydCBudW1iZXIuXG4gKlxuICogQHNlZSBodHRwczovL3VybC5zcGVjLndoYXR3Zy5vcmcvI2RlZmF1bHQtcG9ydFxuICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBwb3J0IFBvcnQgbnVtYmVyIHdlIG5lZWQgdG8gY2hlY2tcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm90b2NvbCBQcm90b2NvbCB3ZSBuZWVkIHRvIGNoZWNrIGFnYWluc3QuXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gSXMgaXQgYSBkZWZhdWx0IHBvcnQgZm9yIHRoZSBnaXZlbiBwcm90b2NvbFxuICogQGFwaSBwcml2YXRlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWlyZWQocG9ydCwgcHJvdG9jb2wpIHtcbiAgcHJvdG9jb2wgPSBwcm90b2NvbC5zcGxpdCgnOicpWzBdO1xuICBwb3J0ID0gK3BvcnQ7XG5cbiAgaWYgKCFwb3J0KSByZXR1cm4gZmFsc2U7XG5cbiAgc3dpdGNoIChwcm90b2NvbCkge1xuICAgIGNhc2UgJ2h0dHAnOlxuICAgIGNhc2UgJ3dzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gODA7XG5cbiAgICBjYXNlICdodHRwcyc6XG4gICAgY2FzZSAnd3NzJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNDQzO1xuXG4gICAgY2FzZSAnZnRwJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gMjE7XG5cbiAgICBjYXNlICdnb3BoZXInOlxuICAgIHJldHVybiBwb3J0ICE9PSA3MDtcblxuICAgIGNhc2UgJ2ZpbGUnOlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBwb3J0ICE9PSAwO1xufTtcblxufSx7fV0sNjE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVxdWlyZWQgPSByZXF1aXJlKCdyZXF1aXJlcy1wb3J0JylcbiAgLCBxcyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5naWZ5JylcbiAgLCBzbGFzaGVzID0gL15bQS1aYS16XVtBLVphLXowLTkrLS5dKjpcXC9cXC8vXG4gICwgcHJvdG9jb2xyZSA9IC9eKFthLXpdW2EtejAtOS4rLV0qOik/KFxcL1xcLyk/KFtcXFNcXHNdKikvaVxuICAsIHdoaXRlc3BhY2UgPSAnW1xcXFx4MDlcXFxceDBBXFxcXHgwQlxcXFx4MENcXFxceDBEXFxcXHgyMFxcXFx4QTBcXFxcdTE2ODBcXFxcdTE4MEVcXFxcdTIwMDBcXFxcdTIwMDFcXFxcdTIwMDJcXFxcdTIwMDNcXFxcdTIwMDRcXFxcdTIwMDVcXFxcdTIwMDZcXFxcdTIwMDdcXFxcdTIwMDhcXFxcdTIwMDlcXFxcdTIwMEFcXFxcdTIwMkZcXFxcdTIwNUZcXFxcdTMwMDBcXFxcdTIwMjhcXFxcdTIwMjlcXFxcdUZFRkZdJ1xuICAsIGxlZnQgPSBuZXcgUmVnRXhwKCdeJysgd2hpdGVzcGFjZSArJysnKTtcblxuLyoqXG4gKiBUcmltIGEgZ2l2ZW4gc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIHRyaW0uXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRyaW1MZWZ0KHN0cikge1xuICByZXR1cm4gKHN0ciA/IHN0ciA6ICcnKS50b1N0cmluZygpLnJlcGxhY2UobGVmdCwgJycpO1xufVxuXG4vKipcbiAqIFRoZXNlIGFyZSB0aGUgcGFyc2UgcnVsZXMgZm9yIHRoZSBVUkwgcGFyc2VyLCBpdCBpbmZvcm1zIHRoZSBwYXJzZXJcbiAqIGFib3V0OlxuICpcbiAqIDAuIFRoZSBjaGFyIGl0IE5lZWRzIHRvIHBhcnNlLCBpZiBpdCdzIGEgc3RyaW5nIGl0IHNob3VsZCBiZSBkb25lIHVzaW5nXG4gKiAgICBpbmRleE9mLCBSZWdFeHAgdXNpbmcgZXhlYyBhbmQgTmFOIG1lYW5zIHNldCBhcyBjdXJyZW50IHZhbHVlLlxuICogMS4gVGhlIHByb3BlcnR5IHdlIHNob3VsZCBzZXQgd2hlbiBwYXJzaW5nIHRoaXMgdmFsdWUuXG4gKiAyLiBJbmRpY2F0aW9uIGlmIGl0J3MgYmFja3dhcmRzIG9yIGZvcndhcmQgcGFyc2luZywgd2hlbiBzZXQgYXMgbnVtYmVyIGl0J3NcbiAqICAgIHRoZSB2YWx1ZSBvZiBleHRyYSBjaGFycyB0aGF0IHNob3VsZCBiZSBzcGxpdCBvZmYuXG4gKiAzLiBJbmhlcml0IGZyb20gbG9jYXRpb24gaWYgbm9uIGV4aXN0aW5nIGluIHRoZSBwYXJzZXIuXG4gKiA0LiBgdG9Mb3dlckNhc2VgIHRoZSByZXN1bHRpbmcgdmFsdWUuXG4gKi9cbnZhciBydWxlcyA9IFtcbiAgWycjJywgJ2hhc2gnXSwgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnPycsICdxdWVyeSddLCAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBmdW5jdGlvbiBzYW5pdGl6ZShhZGRyZXNzKSB7ICAgICAgICAgIC8vIFNhbml0aXplIHdoYXQgaXMgbGVmdCBvZiB0aGUgYWRkcmVzc1xuICAgIHJldHVybiBhZGRyZXNzLnJlcGxhY2UoJ1xcXFwnLCAnLycpO1xuICB9LFxuICBbJy8nLCAncGF0aG5hbWUnXSwgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgWydAJywgJ2F1dGgnLCAxXSwgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGZyb250LlxuICBbTmFOLCAnaG9zdCcsIHVuZGVmaW5lZCwgMSwgMV0sICAgICAgIC8vIFNldCBsZWZ0IG92ZXIgdmFsdWUuXG4gIFsvOihcXGQrKSQvLCAncG9ydCcsIHVuZGVmaW5lZCwgMV0sICAgIC8vIFJlZ0V4cCB0aGUgYmFjay5cbiAgW05hTiwgJ2hvc3RuYW1lJywgdW5kZWZpbmVkLCAxLCAxXSAgICAvLyBTZXQgbGVmdCBvdmVyLlxuXTtcblxuLyoqXG4gKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBub3QgYmUgY29waWVkIG9yIGluaGVyaXRlZCBmcm9tLiBUaGlzIGlzIG9ubHkgbmVlZGVkXG4gKiBmb3IgYWxsIG5vbiBibG9iIFVSTCdzIGFzIGEgYmxvYiBVUkwgZG9lcyBub3QgaW5jbHVkZSBhIGhhc2gsIG9ubHkgdGhlXG4gKiBvcmlnaW4uXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBpZ25vcmUgPSB7IGhhc2g6IDEsIHF1ZXJ5OiAxIH07XG5cbi8qKlxuICogVGhlIGxvY2F0aW9uIG9iamVjdCBkaWZmZXJzIHdoZW4geW91ciBjb2RlIGlzIGxvYWRlZCB0aHJvdWdoIGEgbm9ybWFsIHBhZ2UsXG4gKiBXb3JrZXIgb3IgdGhyb3VnaCBhIHdvcmtlciB1c2luZyBhIGJsb2IuIEFuZCB3aXRoIHRoZSBibG9iYmxlIGJlZ2lucyB0aGVcbiAqIHRyb3VibGUgYXMgdGhlIGxvY2F0aW9uIG9iamVjdCB3aWxsIGNvbnRhaW4gdGhlIFVSTCBvZiB0aGUgYmxvYiwgbm90IHRoZVxuICogbG9jYXRpb24gb2YgdGhlIHBhZ2Ugd2hlcmUgb3VyIGNvZGUgaXMgbG9hZGVkIGluLiBUaGUgYWN0dWFsIG9yaWdpbiBpc1xuICogZW5jb2RlZCBpbiB0aGUgYHBhdGhuYW1lYCBzbyB3ZSBjYW4gdGhhbmtmdWxseSBnZW5lcmF0ZSBhIGdvb2QgXCJkZWZhdWx0XCJcbiAqIGxvY2F0aW9uIGZyb20gaXQgc28gd2UgY2FuIGdlbmVyYXRlIHByb3BlciByZWxhdGl2ZSBVUkwncyBhZ2Fpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGxvYyBPcHRpb25hbCBkZWZhdWx0IGxvY2F0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGxvbGNhdGlvbiBvYmplY3QuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGxvbGNhdGlvbihsb2MpIHtcbiAgdmFyIGdsb2JhbFZhcjtcblxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIGdsb2JhbFZhciA9IHdpbmRvdztcbiAgZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIGdsb2JhbFZhciA9IGdsb2JhbDtcbiAgZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSBnbG9iYWxWYXIgPSBzZWxmO1xuICBlbHNlIGdsb2JhbFZhciA9IHt9O1xuXG4gIHZhciBsb2NhdGlvbiA9IGdsb2JhbFZhci5sb2NhdGlvbiB8fCB7fTtcbiAgbG9jID0gbG9jIHx8IGxvY2F0aW9uO1xuXG4gIHZhciBmaW5hbGRlc3RpbmF0aW9uID0ge31cbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jXG4gICAgLCBrZXk7XG5cbiAgaWYgKCdibG9iOicgPT09IGxvYy5wcm90b2NvbCkge1xuICAgIGZpbmFsZGVzdGluYXRpb24gPSBuZXcgVXJsKHVuZXNjYXBlKGxvYy5wYXRobmFtZSksIHt9KTtcbiAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZSkge1xuICAgIGZpbmFsZGVzdGluYXRpb24gPSBuZXcgVXJsKGxvYywge30pO1xuICAgIGZvciAoa2V5IGluIGlnbm9yZSkgZGVsZXRlIGZpbmFsZGVzdGluYXRpb25ba2V5XTtcbiAgfSBlbHNlIGlmICgnb2JqZWN0JyA9PT0gdHlwZSkge1xuICAgIGZvciAoa2V5IGluIGxvYykge1xuICAgICAgaWYgKGtleSBpbiBpZ25vcmUpIGNvbnRpbnVlO1xuICAgICAgZmluYWxkZXN0aW5hdGlvbltrZXldID0gbG9jW2tleV07XG4gICAgfVxuXG4gICAgaWYgKGZpbmFsZGVzdGluYXRpb24uc2xhc2hlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaW5hbGRlc3RpbmF0aW9uLnNsYXNoZXMgPSBzbGFzaGVzLnRlc3QobG9jLmhyZWYpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaW5hbGRlc3RpbmF0aW9uO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIFByb3RvY29sRXh0cmFjdFxuICogQHR5cGUgT2JqZWN0XG4gKiBAcHJvcGVydHkge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgbWF0Y2hlZCBpbiB0aGUgVVJMLCBpbiBsb3dlcmNhc2UuXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IHNsYXNoZXMgYHRydWVgIGlmIHByb3RvY29sIGlzIGZvbGxvd2VkIGJ5IFwiLy9cIiwgZWxzZSBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtTdHJpbmd9IHJlc3QgUmVzdCBvZiB0aGUgVVJMIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICovXG5cbi8qKlxuICogRXh0cmFjdCBwcm90b2NvbCBpbmZvcm1hdGlvbiBmcm9tIGEgVVJMIHdpdGgvd2l0aG91dCBkb3VibGUgc2xhc2ggKFwiLy9cIikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3MgVVJMIHdlIHdhbnQgdG8gZXh0cmFjdCBmcm9tLlxuICogQHJldHVybiB7UHJvdG9jb2xFeHRyYWN0fSBFeHRyYWN0ZWQgaW5mb3JtYXRpb24uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2woYWRkcmVzcykge1xuICBhZGRyZXNzID0gdHJpbUxlZnQoYWRkcmVzcyk7XG4gIHZhciBtYXRjaCA9IHByb3RvY29scmUuZXhlYyhhZGRyZXNzKTtcblxuICByZXR1cm4ge1xuICAgIHByb3RvY29sOiBtYXRjaFsxXSA/IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgOiAnJyxcbiAgICBzbGFzaGVzOiAhIW1hdGNoWzJdLFxuICAgIHJlc3Q6IG1hdGNoWzNdXG4gIH07XG59XG5cbi8qKlxuICogUmVzb2x2ZSBhIHJlbGF0aXZlIFVSTCBwYXRobmFtZSBhZ2FpbnN0IGEgYmFzZSBVUkwgcGF0aG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHJlbGF0aXZlIFBhdGhuYW1lIG9mIHRoZSByZWxhdGl2ZSBVUkwuXG4gKiBAcGFyYW0ge1N0cmluZ30gYmFzZSBQYXRobmFtZSBvZiB0aGUgYmFzZSBVUkwuXG4gKiBAcmV0dXJuIHtTdHJpbmd9IFJlc29sdmVkIHBhdGhuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZShyZWxhdGl2ZSwgYmFzZSkge1xuICBpZiAocmVsYXRpdmUgPT09ICcnKSByZXR1cm4gYmFzZTtcblxuICB2YXIgcGF0aCA9IChiYXNlIHx8ICcvJykuc3BsaXQoJy8nKS5zbGljZSgwLCAtMSkuY29uY2F0KHJlbGF0aXZlLnNwbGl0KCcvJykpXG4gICAgLCBpID0gcGF0aC5sZW5ndGhcbiAgICAsIGxhc3QgPSBwYXRoW2kgLSAxXVxuICAgICwgdW5zaGlmdCA9IGZhbHNlXG4gICAgLCB1cCA9IDA7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChwYXRoW2ldID09PSAnLicpIHtcbiAgICAgIHBhdGguc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAocGF0aFtpXSA9PT0gJy4uJykge1xuICAgICAgcGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIGlmIChpID09PSAwKSB1bnNoaWZ0ID0gdHJ1ZTtcbiAgICAgIHBhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICBpZiAodW5zaGlmdCkgcGF0aC51bnNoaWZ0KCcnKTtcbiAgaWYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSBwYXRoLnB1c2goJycpO1xuXG4gIHJldHVybiBwYXRoLmpvaW4oJy8nKTtcbn1cblxuLyoqXG4gKiBUaGUgYWN0dWFsIFVSTCBpbnN0YW5jZS4gSW5zdGVhZCBvZiByZXR1cm5pbmcgYW4gb2JqZWN0IHdlJ3ZlIG9wdGVkLWluIHRvXG4gKiBjcmVhdGUgYW4gYWN0dWFsIGNvbnN0cnVjdG9yIGFzIGl0J3MgbXVjaCBtb3JlIG1lbW9yeSBlZmZpY2llbnQgYW5kXG4gKiBmYXN0ZXIgYW5kIGl0IHBsZWFzZXMgbXkgT0NELlxuICpcbiAqIEl0IGlzIHdvcnRoIG5vdGluZyB0aGF0IHdlIHNob3VsZCBub3QgdXNlIGBVUkxgIGFzIGNsYXNzIG5hbWUgdG8gcHJldmVudFxuICogY2xhc2hlcyB3aXRoIHRoZSBnbG9iYWwgVVJMIGluc3RhbmNlIHRoYXQgZ290IGludHJvZHVjZWQgaW4gYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBVUkwgd2Ugd2FudCB0byBwYXJzZS5cbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gW2xvY2F0aW9uXSBMb2NhdGlvbiBkZWZhdWx0cyBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IFtwYXJzZXJdIFBhcnNlciBmb3IgdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIFVybChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKSB7XG4gIGFkZHJlc3MgPSB0cmltTGVmdChhZGRyZXNzKTtcblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVXJsKSkge1xuICAgIHJldHVybiBuZXcgVXJsKGFkZHJlc3MsIGxvY2F0aW9uLCBwYXJzZXIpO1xuICB9XG5cbiAgdmFyIHJlbGF0aXZlLCBleHRyYWN0ZWQsIHBhcnNlLCBpbnN0cnVjdGlvbiwgaW5kZXgsIGtleVxuICAgICwgaW5zdHJ1Y3Rpb25zID0gcnVsZXMuc2xpY2UoKVxuICAgICwgdHlwZSA9IHR5cGVvZiBsb2NhdGlvblxuICAgICwgdXJsID0gdGhpc1xuICAgICwgaSA9IDA7XG5cbiAgLy9cbiAgLy8gVGhlIGZvbGxvd2luZyBpZiBzdGF0ZW1lbnRzIGFsbG93cyB0aGlzIG1vZHVsZSB0d28gaGF2ZSBjb21wYXRpYmlsaXR5IHdpdGhcbiAgLy8gMiBkaWZmZXJlbnQgQVBJOlxuICAvL1xuICAvLyAxLiBOb2RlLmpzJ3MgYHVybC5wYXJzZWAgYXBpIHdoaWNoIGFjY2VwdHMgYSBVUkwsIGJvb2xlYW4gYXMgYXJndW1lbnRzXG4gIC8vICAgIHdoZXJlIHRoZSBib29sZWFuIGluZGljYXRlcyB0aGF0IHRoZSBxdWVyeSBzdHJpbmcgc2hvdWxkIGFsc28gYmUgcGFyc2VkLlxuICAvL1xuICAvLyAyLiBUaGUgYFVSTGAgaW50ZXJmYWNlIG9mIHRoZSBicm93c2VyIHdoaWNoIGFjY2VwdHMgYSBVUkwsIG9iamVjdCBhc1xuICAvLyAgICBhcmd1bWVudHMuIFRoZSBzdXBwbGllZCBvYmplY3Qgd2lsbCBiZSB1c2VkIGFzIGRlZmF1bHQgdmFsdWVzIC8gZmFsbC1iYWNrXG4gIC8vICAgIGZvciByZWxhdGl2ZSBwYXRocy5cbiAgLy9cbiAgaWYgKCdvYmplY3QnICE9PSB0eXBlICYmICdzdHJpbmcnICE9PSB0eXBlKSB7XG4gICAgcGFyc2VyID0gbG9jYXRpb247XG4gICAgbG9jYXRpb24gPSBudWxsO1xuICB9XG5cbiAgaWYgKHBhcnNlciAmJiAnZnVuY3Rpb24nICE9PSB0eXBlb2YgcGFyc2VyKSBwYXJzZXIgPSBxcy5wYXJzZTtcblxuICBsb2NhdGlvbiA9IGxvbGNhdGlvbihsb2NhdGlvbik7XG5cbiAgLy9cbiAgLy8gRXh0cmFjdCBwcm90b2NvbCBpbmZvcm1hdGlvbiBiZWZvcmUgcnVubmluZyB0aGUgaW5zdHJ1Y3Rpb25zLlxuICAvL1xuICBleHRyYWN0ZWQgPSBleHRyYWN0UHJvdG9jb2woYWRkcmVzcyB8fCAnJyk7XG4gIHJlbGF0aXZlID0gIWV4dHJhY3RlZC5wcm90b2NvbCAmJiAhZXh0cmFjdGVkLnNsYXNoZXM7XG4gIHVybC5zbGFzaGVzID0gZXh0cmFjdGVkLnNsYXNoZXMgfHwgcmVsYXRpdmUgJiYgbG9jYXRpb24uc2xhc2hlcztcbiAgdXJsLnByb3RvY29sID0gZXh0cmFjdGVkLnByb3RvY29sIHx8IGxvY2F0aW9uLnByb3RvY29sIHx8ICcnO1xuICBhZGRyZXNzID0gZXh0cmFjdGVkLnJlc3Q7XG5cbiAgLy9cbiAgLy8gV2hlbiB0aGUgYXV0aG9yaXR5IGNvbXBvbmVudCBpcyBhYnNlbnQgdGhlIFVSTCBzdGFydHMgd2l0aCBhIHBhdGhcbiAgLy8gY29tcG9uZW50LlxuICAvL1xuICBpZiAoIWV4dHJhY3RlZC5zbGFzaGVzKSBpbnN0cnVjdGlvbnNbM10gPSBbLyguKikvLCAncGF0aG5hbWUnXTtcblxuICBmb3IgKDsgaSA8IGluc3RydWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb25zW2ldO1xuXG4gICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYWRkcmVzcyA9IGluc3RydWN0aW9uKGFkZHJlc3MpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcGFyc2UgPSBpbnN0cnVjdGlvblswXTtcbiAgICBrZXkgPSBpbnN0cnVjdGlvblsxXTtcblxuICAgIGlmIChwYXJzZSAhPT0gcGFyc2UpIHtcbiAgICAgIHVybFtrZXldID0gYWRkcmVzcztcbiAgICB9IGVsc2UgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgcGFyc2UpIHtcbiAgICAgIGlmICh+KGluZGV4ID0gYWRkcmVzcy5pbmRleE9mKHBhcnNlKSkpIHtcbiAgICAgICAgaWYgKCdudW1iZXInID09PSB0eXBlb2YgaW5zdHJ1Y3Rpb25bMl0pIHtcbiAgICAgICAgICB1cmxba2V5XSA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKGluZGV4ICsgaW5zdHJ1Y3Rpb25bMl0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVybFtrZXldID0gYWRkcmVzcy5zbGljZShpbmRleCk7XG4gICAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgoaW5kZXggPSBwYXJzZS5leGVjKGFkZHJlc3MpKSkge1xuICAgICAgdXJsW2tleV0gPSBpbmRleFsxXTtcbiAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKDAsIGluZGV4LmluZGV4KTtcbiAgICB9XG5cbiAgICB1cmxba2V5XSA9IHVybFtrZXldIHx8IChcbiAgICAgIHJlbGF0aXZlICYmIGluc3RydWN0aW9uWzNdID8gbG9jYXRpb25ba2V5XSB8fCAnJyA6ICcnXG4gICAgKTtcblxuICAgIC8vXG4gICAgLy8gSG9zdG5hbWUsIGhvc3QgYW5kIHByb3RvY29sIHNob3VsZCBiZSBsb3dlcmNhc2VkIHNvIHRoZXkgY2FuIGJlIHVzZWQgdG9cbiAgICAvLyBjcmVhdGUgYSBwcm9wZXIgYG9yaWdpbmAuXG4gICAgLy9cbiAgICBpZiAoaW5zdHJ1Y3Rpb25bNF0pIHVybFtrZXldID0gdXJsW2tleV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8vXG4gIC8vIEFsc28gcGFyc2UgdGhlIHN1cHBsaWVkIHF1ZXJ5IHN0cmluZyBpbiB0byBhbiBvYmplY3QuIElmIHdlJ3JlIHN1cHBsaWVkXG4gIC8vIHdpdGggYSBjdXN0b20gcGFyc2VyIGFzIGZ1bmN0aW9uIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgYnVpbGQtaW5cbiAgLy8gcGFyc2VyLlxuICAvL1xuICBpZiAocGFyc2VyKSB1cmwucXVlcnkgPSBwYXJzZXIodXJsLnF1ZXJ5KTtcblxuICAvL1xuICAvLyBJZiB0aGUgVVJMIGlzIHJlbGF0aXZlLCByZXNvbHZlIHRoZSBwYXRobmFtZSBhZ2FpbnN0IHRoZSBiYXNlIFVSTC5cbiAgLy9cbiAgaWYgKFxuICAgICAgcmVsYXRpdmVcbiAgICAmJiBsb2NhdGlvbi5zbGFzaGVzXG4gICAgJiYgdXJsLnBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nXG4gICAgJiYgKHVybC5wYXRobmFtZSAhPT0gJycgfHwgbG9jYXRpb24ucGF0aG5hbWUgIT09ICcnKVxuICApIHtcbiAgICB1cmwucGF0aG5hbWUgPSByZXNvbHZlKHVybC5wYXRobmFtZSwgbG9jYXRpb24ucGF0aG5hbWUpO1xuICB9XG5cbiAgLy9cbiAgLy8gV2Ugc2hvdWxkIG5vdCBhZGQgcG9ydCBudW1iZXJzIGlmIHRoZXkgYXJlIGFscmVhZHkgdGhlIGRlZmF1bHQgcG9ydCBudW1iZXJcbiAgLy8gZm9yIGEgZ2l2ZW4gcHJvdG9jb2wuIEFzIHRoZSBob3N0IGFsc28gY29udGFpbnMgdGhlIHBvcnQgbnVtYmVyIHdlJ3JlIGdvaW5nXG4gIC8vIG92ZXJyaWRlIGl0IHdpdGggdGhlIGhvc3RuYW1lIHdoaWNoIGNvbnRhaW5zIG5vIHBvcnQgbnVtYmVyLlxuICAvL1xuICBpZiAoIXJlcXVpcmVkKHVybC5wb3J0LCB1cmwucHJvdG9jb2wpKSB7XG4gICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWU7XG4gICAgdXJsLnBvcnQgPSAnJztcbiAgfVxuXG4gIC8vXG4gIC8vIFBhcnNlIGRvd24gdGhlIGBhdXRoYCBmb3IgdGhlIHVzZXJuYW1lIGFuZCBwYXNzd29yZC5cbiAgLy9cbiAgdXJsLnVzZXJuYW1lID0gdXJsLnBhc3N3b3JkID0gJyc7XG4gIGlmICh1cmwuYXV0aCkge1xuICAgIGluc3RydWN0aW9uID0gdXJsLmF1dGguc3BsaXQoJzonKTtcbiAgICB1cmwudXNlcm5hbWUgPSBpbnN0cnVjdGlvblswXSB8fCAnJztcbiAgICB1cmwucGFzc3dvcmQgPSBpbnN0cnVjdGlvblsxXSB8fCAnJztcbiAgfVxuXG4gIHVybC5vcmlnaW4gPSB1cmwucHJvdG9jb2wgJiYgdXJsLmhvc3QgJiYgdXJsLnByb3RvY29sICE9PSAnZmlsZTonXG4gICAgPyB1cmwucHJvdG9jb2wgKycvLycrIHVybC5ob3N0XG4gICAgOiAnbnVsbCc7XG5cbiAgLy9cbiAgLy8gVGhlIGhyZWYgaXMganVzdCB0aGUgY29tcGlsZWQgcmVzdWx0LlxuICAvL1xuICB1cmwuaHJlZiA9IHVybC50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgY29udmVuaWVuY2UgbWV0aG9kIGZvciBjaGFuZ2luZyBwcm9wZXJ0aWVzIGluIHRoZSBVUkwgaW5zdGFuY2UgdG9cbiAqIGluc3VyZSB0aGF0IHRoZXkgYWxsIHByb3BhZ2F0ZSBjb3JyZWN0bHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhcnQgICAgICAgICAgUHJvcGVydHkgd2UgbmVlZCB0byBhZGp1c3QuXG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZSAgICAgICAgICBUaGUgbmV3bHkgYXNzaWduZWQgdmFsdWUuXG4gKiBAcGFyYW0ge0Jvb2xlYW58RnVuY3Rpb259IGZuICBXaGVuIHNldHRpbmcgdGhlIHF1ZXJ5LCBpdCB3aWxsIGJlIHRoZSBmdW5jdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZCB0byBwYXJzZSB0aGUgcXVlcnkuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaGVuIHNldHRpbmcgdGhlIHByb3RvY29sLCBkb3VibGUgc2xhc2ggd2lsbCBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZCBmcm9tIHRoZSBmaW5hbCB1cmwgaWYgaXQgaXMgdHJ1ZS5cbiAqIEByZXR1cm5zIHtVUkx9IFVSTCBpbnN0YW5jZSBmb3IgY2hhaW5pbmcuXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHNldChwYXJ0LCB2YWx1ZSwgZm4pIHtcbiAgdmFyIHVybCA9IHRoaXM7XG5cbiAgc3dpdGNoIChwYXJ0KSB7XG4gICAgY2FzZSAncXVlcnknOlxuICAgICAgaWYgKCdzdHJpbmcnID09PSB0eXBlb2YgdmFsdWUgJiYgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlID0gKGZuIHx8IHFzLnBhcnNlKSh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdwb3J0JzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAoIXJlcXVpcmVkKHZhbHVlLCB1cmwucHJvdG9jb2wpKSB7XG4gICAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgICAgICB1cmxbcGFydF0gPSAnJztcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgdXJsLmhvc3QgPSB1cmwuaG9zdG5hbWUgKyc6JysgdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnaG9zdG5hbWUnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICh1cmwucG9ydCkgdmFsdWUgKz0gJzonKyB1cmwucG9ydDtcbiAgICAgIHVybC5ob3N0ID0gdmFsdWU7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvc3QnOlxuICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG5cbiAgICAgIGlmICgvOlxcZCskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgIHVybC5wb3J0ID0gdmFsdWUucG9wKCk7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlLmpvaW4oJzonKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybC5ob3N0bmFtZSA9IHZhbHVlO1xuICAgICAgICB1cmwucG9ydCA9ICcnO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3Byb3RvY29sJzpcbiAgICAgIHVybC5wcm90b2NvbCA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgICB1cmwuc2xhc2hlcyA9ICFmbjtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncGF0aG5hbWUnOlxuICAgIGNhc2UgJ2hhc2gnOlxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHZhciBjaGFyID0gcGFydCA9PT0gJ3BhdGhuYW1lJyA/ICcvJyA6ICcjJztcbiAgICAgICAgdXJsW3BhcnRdID0gdmFsdWUuY2hhckF0KDApICE9PSBjaGFyID8gY2hhciArIHZhbHVlIDogdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpbnMgPSBydWxlc1tpXTtcblxuICAgIGlmIChpbnNbNF0pIHVybFtpbnNbMV1dID0gdXJsW2luc1sxXV0udG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIHVybC5vcmlnaW4gPSB1cmwucHJvdG9jb2wgJiYgdXJsLmhvc3QgJiYgdXJsLnByb3RvY29sICE9PSAnZmlsZTonXG4gICAgPyB1cmwucHJvdG9jb2wgKycvLycrIHVybC5ob3N0XG4gICAgOiAnbnVsbCc7XG5cbiAgdXJsLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcblxuICByZXR1cm4gdXJsO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgcHJvcGVydGllcyBiYWNrIGluIHRvIGEgdmFsaWQgYW5kIGZ1bGwgVVJMIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdHJpbmdpZnkgT3B0aW9uYWwgcXVlcnkgc3RyaW5naWZ5IGZ1bmN0aW9uLlxuICogQHJldHVybnMge1N0cmluZ30gQ29tcGlsZWQgdmVyc2lvbiBvZiB0aGUgVVJMLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyhzdHJpbmdpZnkpIHtcbiAgaWYgKCFzdHJpbmdpZnkgfHwgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHN0cmluZ2lmeSkgc3RyaW5naWZ5ID0gcXMuc3RyaW5naWZ5O1xuXG4gIHZhciBxdWVyeVxuICAgICwgdXJsID0gdGhpc1xuICAgICwgcHJvdG9jb2wgPSB1cmwucHJvdG9jb2w7XG5cbiAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLmNoYXJBdChwcm90b2NvbC5sZW5ndGggLSAxKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cbiAgdmFyIHJlc3VsdCA9IHByb3RvY29sICsgKHVybC5zbGFzaGVzID8gJy8vJyA6ICcnKTtcblxuICBpZiAodXJsLnVzZXJuYW1lKSB7XG4gICAgcmVzdWx0ICs9IHVybC51c2VybmFtZTtcbiAgICBpZiAodXJsLnBhc3N3b3JkKSByZXN1bHQgKz0gJzonKyB1cmwucGFzc3dvcmQ7XG4gICAgcmVzdWx0ICs9ICdAJztcbiAgfVxuXG4gIHJlc3VsdCArPSB1cmwuaG9zdCArIHVybC5wYXRobmFtZTtcblxuICBxdWVyeSA9ICdvYmplY3QnID09PSB0eXBlb2YgdXJsLnF1ZXJ5ID8gc3RyaW5naWZ5KHVybC5xdWVyeSkgOiB1cmwucXVlcnk7XG4gIGlmIChxdWVyeSkgcmVzdWx0ICs9ICc/JyAhPT0gcXVlcnkuY2hhckF0KDApID8gJz8nKyBxdWVyeSA6IHF1ZXJ5O1xuXG4gIGlmICh1cmwuaGFzaCkgcmVzdWx0ICs9IHVybC5oYXNoO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblVybC5wcm90b3R5cGUgPSB7IHNldDogc2V0LCB0b1N0cmluZzogdG9TdHJpbmcgfTtcblxuLy9cbi8vIEV4cG9zZSB0aGUgVVJMIHBhcnNlciBhbmQgc29tZSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdGhhdCBtaWdodCBiZSB1c2VmdWwgZm9yXG4vLyBvdGhlcnMgb3IgdGVzdGluZy5cbi8vXG5VcmwuZXh0cmFjdFByb3RvY29sID0gZXh0cmFjdFByb3RvY29sO1xuVXJsLmxvY2F0aW9uID0gbG9sY2F0aW9uO1xuVXJsLnRyaW1MZWZ0ID0gdHJpbUxlZnQ7XG5VcmwucXMgPSBxcztcblxubW9kdWxlLmV4cG9ydHMgPSBVcmw7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcInF1ZXJ5c3RyaW5naWZ5XCI6NTksXCJyZXF1aXJlcy1wb3J0XCI6NjB9XX0se30sWzFdKSgxKVxufSk7XG5cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c29ja2pzLmpzLm1hcFxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHB1bnljb2RlID0gcmVxdWlyZSgncHVueWNvZGUnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmV4cG9ydHMucGFyc2UgPSB1cmxQYXJzZTtcbmV4cG9ydHMucmVzb2x2ZSA9IHVybFJlc29sdmU7XG5leHBvcnRzLnJlc29sdmVPYmplY3QgPSB1cmxSZXNvbHZlT2JqZWN0O1xuZXhwb3J0cy5mb3JtYXQgPSB1cmxGb3JtYXQ7XG5cbmV4cG9ydHMuVXJsID0gVXJsO1xuXG5mdW5jdGlvbiBVcmwoKSB7XG4gIHRoaXMucHJvdG9jb2wgPSBudWxsO1xuICB0aGlzLnNsYXNoZXMgPSBudWxsO1xuICB0aGlzLmF1dGggPSBudWxsO1xuICB0aGlzLmhvc3QgPSBudWxsO1xuICB0aGlzLnBvcnQgPSBudWxsO1xuICB0aGlzLmhvc3RuYW1lID0gbnVsbDtcbiAgdGhpcy5oYXNoID0gbnVsbDtcbiAgdGhpcy5zZWFyY2ggPSBudWxsO1xuICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgdGhpcy5wYXRobmFtZSA9IG51bGw7XG4gIHRoaXMucGF0aCA9IG51bGw7XG4gIHRoaXMuaHJlZiA9IG51bGw7XG59XG5cbi8vIFJlZmVyZW5jZTogUkZDIDM5ODYsIFJGQyAxODA4LCBSRkMgMjM5NlxuXG4vLyBkZWZpbmUgdGhlc2UgaGVyZSBzbyBhdCBsZWFzdCB0aGV5IG9ubHkgaGF2ZSB0byBiZVxuLy8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuXG52YXIgcHJvdG9jb2xQYXR0ZXJuID0gL14oW2EtejAtOS4rLV0rOikvaSxcbiAgICBwb3J0UGF0dGVybiA9IC86WzAtOV0qJC8sXG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIGEgc2ltcGxlIHBhdGggVVJMXG4gICAgc2ltcGxlUGF0aFBhdHRlcm4gPSAvXihcXC9cXC8/KD8hXFwvKVteXFw/XFxzXSopKFxcP1teXFxzXSopPyQvLFxuXG4gICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgcmVzZXJ2ZWQgZm9yIGRlbGltaXRpbmcgVVJMcy5cbiAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLlxuICAgIGRlbGltcyA9IFsnPCcsICc+JywgJ1wiJywgJ2AnLCAnICcsICdcXHInLCAnXFxuJywgJ1xcdCddLFxuXG4gICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgbm90IGFsbG93ZWQgZm9yIHZhcmlvdXMgcmVhc29ucy5cbiAgICB1bndpc2UgPSBbJ3snLCAnfScsICd8JywgJ1xcXFwnLCAnXicsICdgJ10uY29uY2F0KGRlbGltcyksXG5cbiAgICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuXG4gICAgYXV0b0VzY2FwZSA9IFsnXFwnJ10uY29uY2F0KHVud2lzZSksXG4gICAgLy8gQ2hhcmFjdGVycyB0aGF0IGFyZSBuZXZlciBldmVyIGFsbG93ZWQgaW4gYSBob3N0bmFtZS5cbiAgICAvLyBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlXG4gICAgLy8gYXJlIHRoZSBvbmVzIHRoYXQgYXJlICpleHBlY3RlZCogdG8gYmUgc2Vlbiwgc28gd2UgZmFzdC1wYXRoXG4gICAgLy8gdGhlbS5cbiAgICBub25Ib3N0Q2hhcnMgPSBbJyUnLCAnLycsICc/JywgJzsnLCAnIyddLmNvbmNhdChhdXRvRXNjYXBlKSxcbiAgICBob3N0RW5kaW5nQ2hhcnMgPSBbJy8nLCAnPycsICcjJ10sXG4gICAgaG9zdG5hbWVNYXhMZW4gPSAyNTUsXG4gICAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eWythLXowLTlBLVpfLV17MCw2M30kLyxcbiAgICBob3N0bmFtZVBhcnRTdGFydCA9IC9eKFsrYS16MC05QS1aXy1dezAsNjN9KSguKikkLyxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBjYW4gYWxsb3cgXCJ1bnNhZmVcIiBhbmQgXCJ1bndpc2VcIiBjaGFycy5cbiAgICB1bnNhZmVQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IG5ldmVyIGhhdmUgYSBob3N0bmFtZS5cbiAgICBob3N0bGVzc1Byb3RvY29sID0ge1xuICAgICAgJ2phdmFzY3JpcHQnOiB0cnVlLFxuICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuICAgIH0sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgYWx3YXlzIGNvbnRhaW4gYSAvLyBiaXQuXG4gICAgc2xhc2hlZFByb3RvY29sID0ge1xuICAgICAgJ2h0dHAnOiB0cnVlLFxuICAgICAgJ2h0dHBzJzogdHJ1ZSxcbiAgICAgICdmdHAnOiB0cnVlLFxuICAgICAgJ2dvcGhlcic6IHRydWUsXG4gICAgICAnZmlsZSc6IHRydWUsXG4gICAgICAnaHR0cDonOiB0cnVlLFxuICAgICAgJ2h0dHBzOic6IHRydWUsXG4gICAgICAnZnRwOic6IHRydWUsXG4gICAgICAnZ29waGVyOic6IHRydWUsXG4gICAgICAnZmlsZTonOiB0cnVlXG4gICAgfSxcbiAgICBxdWVyeXN0cmluZyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5nJyk7XG5cbmZ1bmN0aW9uIHVybFBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKHVybCAmJiB1dGlsLmlzT2JqZWN0KHVybCkgJiYgdXJsIGluc3RhbmNlb2YgVXJsKSByZXR1cm4gdXJsO1xuXG4gIHZhciB1ID0gbmV3IFVybDtcbiAgdS5wYXJzZSh1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KTtcbiAgcmV0dXJuIHU7XG59XG5cblVybC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbih1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7XG4gIGlmICghdXRpbC5pc1N0cmluZyh1cmwpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgXCIgKyB0eXBlb2YgdXJsKTtcbiAgfVxuXG4gIC8vIENvcHkgY2hyb21lLCBJRSwgb3BlcmEgYmFja3NsYXNoLWhhbmRsaW5nIGJlaGF2aW9yLlxuICAvLyBCYWNrIHNsYXNoZXMgYmVmb3JlIHRoZSBxdWVyeSBzdHJpbmcgZ2V0IGNvbnZlcnRlZCB0byBmb3J3YXJkIHNsYXNoZXNcbiAgLy8gU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjU5MTZcbiAgdmFyIHF1ZXJ5SW5kZXggPSB1cmwuaW5kZXhPZignPycpLFxuICAgICAgc3BsaXR0ZXIgPVxuICAgICAgICAgIChxdWVyeUluZGV4ICE9PSAtMSAmJiBxdWVyeUluZGV4IDwgdXJsLmluZGV4T2YoJyMnKSkgPyAnPycgOiAnIycsXG4gICAgICB1U3BsaXQgPSB1cmwuc3BsaXQoc3BsaXR0ZXIpLFxuICAgICAgc2xhc2hSZWdleCA9IC9cXFxcL2c7XG4gIHVTcGxpdFswXSA9IHVTcGxpdFswXS5yZXBsYWNlKHNsYXNoUmVnZXgsICcvJyk7XG4gIHVybCA9IHVTcGxpdC5qb2luKHNwbGl0dGVyKTtcblxuICB2YXIgcmVzdCA9IHVybDtcblxuICAvLyB0cmltIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAvLyBUaGlzIGlzIHRvIHN1cHBvcnQgcGFyc2Ugc3R1ZmYgbGlrZSBcIiAgaHR0cDovL2Zvby5jb20gIFxcblwiXG4gIHJlc3QgPSByZXN0LnRyaW0oKTtcblxuICBpZiAoIXNsYXNoZXNEZW5vdGVIb3N0ICYmIHVybC5zcGxpdCgnIycpLmxlbmd0aCA9PT0gMSkge1xuICAgIC8vIFRyeSBmYXN0IHBhdGggcmVnZXhwXG4gICAgdmFyIHNpbXBsZVBhdGggPSBzaW1wbGVQYXRoUGF0dGVybi5leGVjKHJlc3QpO1xuICAgIGlmIChzaW1wbGVQYXRoKSB7XG4gICAgICB0aGlzLnBhdGggPSByZXN0O1xuICAgICAgdGhpcy5ocmVmID0gcmVzdDtcbiAgICAgIHRoaXMucGF0aG5hbWUgPSBzaW1wbGVQYXRoWzFdO1xuICAgICAgaWYgKHNpbXBsZVBhdGhbMl0pIHtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSBzaW1wbGVQYXRoWzJdO1xuICAgICAgICBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnNlYXJjaC5zdWJzdHIoMSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnNlYXJjaC5zdWJzdHIoMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgICAgICB0aGlzLnNlYXJjaCA9ICcnO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0ge307XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cblxuICB2YXIgcHJvdG8gPSBwcm90b2NvbFBhdHRlcm4uZXhlYyhyZXN0KTtcbiAgaWYgKHByb3RvKSB7XG4gICAgcHJvdG8gPSBwcm90b1swXTtcbiAgICB2YXIgbG93ZXJQcm90byA9IHByb3RvLnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy5wcm90b2NvbCA9IGxvd2VyUHJvdG87XG4gICAgcmVzdCA9IHJlc3Quc3Vic3RyKHByb3RvLmxlbmd0aCk7XG4gIH1cblxuICAvLyBmaWd1cmUgb3V0IGlmIGl0J3MgZ290IGEgaG9zdFxuICAvLyB1c2VyQHNlcnZlciBpcyAqYWx3YXlzKiBpbnRlcnByZXRlZCBhcyBhIGhvc3RuYW1lLCBhbmQgdXJsXG4gIC8vIHJlc29sdXRpb24gd2lsbCB0cmVhdCAvL2Zvby9iYXIgYXMgaG9zdD1mb28scGF0aD1iYXIgYmVjYXVzZSB0aGF0J3NcbiAgLy8gaG93IHRoZSBicm93c2VyIHJlc29sdmVzIHJlbGF0aXZlIFVSTHMuXG4gIGlmIChzbGFzaGVzRGVub3RlSG9zdCB8fCBwcm90byB8fCByZXN0Lm1hdGNoKC9eXFwvXFwvW15AXFwvXStAW15AXFwvXSsvKSkge1xuICAgIHZhciBzbGFzaGVzID0gcmVzdC5zdWJzdHIoMCwgMikgPT09ICcvLyc7XG4gICAgaWYgKHNsYXNoZXMgJiYgIShwcm90byAmJiBob3N0bGVzc1Byb3RvY29sW3Byb3RvXSkpIHtcbiAgICAgIHJlc3QgPSByZXN0LnN1YnN0cigyKTtcbiAgICAgIHRoaXMuc2xhc2hlcyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFob3N0bGVzc1Byb3RvY29sW3Byb3RvXSAmJlxuICAgICAgKHNsYXNoZXMgfHwgKHByb3RvICYmICFzbGFzaGVkUHJvdG9jb2xbcHJvdG9dKSkpIHtcblxuICAgIC8vIHRoZXJlJ3MgYSBob3N0bmFtZS5cbiAgICAvLyB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgLywgPywgOywgb3IgIyBlbmRzIHRoZSBob3N0LlxuICAgIC8vXG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gQCBpbiB0aGUgaG9zdG5hbWUsIHRoZW4gbm9uLWhvc3QgY2hhcnMgKmFyZSogYWxsb3dlZFxuICAgIC8vIHRvIHRoZSBsZWZ0IG9mIHRoZSBsYXN0IEAgc2lnbiwgdW5sZXNzIHNvbWUgaG9zdC1lbmRpbmcgY2hhcmFjdGVyXG4gICAgLy8gY29tZXMgKmJlZm9yZSogdGhlIEAtc2lnbi5cbiAgICAvLyBVUkxzIGFyZSBvYm5veGlvdXMuXG4gICAgLy9cbiAgICAvLyBleDpcbiAgICAvLyBodHRwOi8vYUBiQGMvID0+IHVzZXI6YUBiIGhvc3Q6Y1xuICAgIC8vIGh0dHA6Ly9hQGI/QGMgPT4gdXNlcjphIGhvc3Q6YyBwYXRoOi8/QGNcblxuICAgIC8vIHYwLjEyIFRPRE8oaXNhYWNzKTogVGhpcyBpcyBub3QgcXVpdGUgaG93IENocm9tZSBkb2VzIHRoaW5ncy5cbiAgICAvLyBSZXZpZXcgb3VyIHRlc3QgY2FzZSBhZ2FpbnN0IGJyb3dzZXJzIG1vcmUgY29tcHJlaGVuc2l2ZWx5LlxuXG4gICAgLy8gZmluZCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYW55IGhvc3RFbmRpbmdDaGFyc1xuICAgIHZhciBob3N0RW5kID0gLTE7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob3N0RW5kaW5nQ2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2YoaG9zdEVuZGluZ0NoYXJzW2ldKTtcbiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcbiAgICAgICAgaG9zdEVuZCA9IGhlYztcbiAgICB9XG5cbiAgICAvLyBhdCB0aGlzIHBvaW50LCBlaXRoZXIgd2UgaGF2ZSBhbiBleHBsaWNpdCBwb2ludCB3aGVyZSB0aGVcbiAgICAvLyBhdXRoIHBvcnRpb24gY2Fubm90IGdvIHBhc3QsIG9yIHRoZSBsYXN0IEAgY2hhciBpcyB0aGUgZGVjaWRlci5cbiAgICB2YXIgYXV0aCwgYXRTaWduO1xuICAgIGlmIChob3N0RW5kID09PSAtMSkge1xuICAgICAgLy8gYXRTaWduIGNhbiBiZSBhbnl3aGVyZS5cbiAgICAgIGF0U2lnbiA9IHJlc3QubGFzdEluZGV4T2YoJ0AnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYXRTaWduIG11c3QgYmUgaW4gYXV0aCBwb3J0aW9uLlxuICAgICAgLy8gaHR0cDovL2FAYi9jQGQgPT4gaG9zdDpiIGF1dGg6YSBwYXRoOi9jQGRcbiAgICAgIGF0U2lnbiA9IHJlc3QubGFzdEluZGV4T2YoJ0AnLCBob3N0RW5kKTtcbiAgICB9XG5cbiAgICAvLyBOb3cgd2UgaGF2ZSBhIHBvcnRpb24gd2hpY2ggaXMgZGVmaW5pdGVseSB0aGUgYXV0aC5cbiAgICAvLyBQdWxsIHRoYXQgb2ZmLlxuICAgIGlmIChhdFNpZ24gIT09IC0xKSB7XG4gICAgICBhdXRoID0gcmVzdC5zbGljZSgwLCBhdFNpZ24pO1xuICAgICAgcmVzdCA9IHJlc3Quc2xpY2UoYXRTaWduICsgMSk7XG4gICAgICB0aGlzLmF1dGggPSBkZWNvZGVVUklDb21wb25lbnQoYXV0aCk7XG4gICAgfVxuXG4gICAgLy8gdGhlIGhvc3QgaXMgdGhlIHJlbWFpbmluZyB0byB0aGUgbGVmdCBvZiB0aGUgZmlyc3Qgbm9uLWhvc3QgY2hhclxuICAgIGhvc3RFbmQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihub25Ib3N0Q2hhcnNbaV0pO1xuICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuICAgICAgICBob3N0RW5kID0gaGVjO1xuICAgIH1cbiAgICAvLyBpZiB3ZSBzdGlsbCBoYXZlIG5vdCBoaXQgaXQsIHRoZW4gdGhlIGVudGlyZSB0aGluZyBpcyBhIGhvc3QuXG4gICAgaWYgKGhvc3RFbmQgPT09IC0xKVxuICAgICAgaG9zdEVuZCA9IHJlc3QubGVuZ3RoO1xuXG4gICAgdGhpcy5ob3N0ID0gcmVzdC5zbGljZSgwLCBob3N0RW5kKTtcbiAgICByZXN0ID0gcmVzdC5zbGljZShob3N0RW5kKTtcblxuICAgIC8vIHB1bGwgb3V0IHBvcnQuXG4gICAgdGhpcy5wYXJzZUhvc3QoKTtcblxuICAgIC8vIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsXG4gICAgLy8gc28gZXZlbiBpZiBpdCdzIGVtcHR5LCBpdCBoYXMgdG8gYmUgcHJlc2VudC5cbiAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZSB8fCAnJztcblxuICAgIC8vIGlmIGhvc3RuYW1lIGJlZ2lucyB3aXRoIFsgYW5kIGVuZHMgd2l0aCBdXG4gICAgLy8gYXNzdW1lIHRoYXQgaXQncyBhbiBJUHY2IGFkZHJlc3MuXG4gICAgdmFyIGlwdjZIb3N0bmFtZSA9IHRoaXMuaG9zdG5hbWVbMF0gPT09ICdbJyAmJlxuICAgICAgICB0aGlzLmhvc3RuYW1lW3RoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMV0gPT09ICddJztcblxuICAgIC8vIHZhbGlkYXRlIGEgbGl0dGxlLlxuICAgIGlmICghaXB2Nkhvc3RuYW1lKSB7XG4gICAgICB2YXIgaG9zdHBhcnRzID0gdGhpcy5ob3N0bmFtZS5zcGxpdCgvXFwuLyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGhvc3RwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHBhcnQgPSBob3N0cGFydHNbaV07XG4gICAgICAgIGlmICghcGFydCkgY29udGludWU7XG4gICAgICAgIGlmICghcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgIHZhciBuZXdwYXJ0ID0gJyc7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGsgPSBwYXJ0Lmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgICAgaWYgKHBhcnQuY2hhckNvZGVBdChqKSA+IDEyNykge1xuICAgICAgICAgICAgICAvLyB3ZSByZXBsYWNlIG5vbi1BU0NJSSBjaGFyIHdpdGggYSB0ZW1wb3JhcnkgcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0aGlzIHRvIG1ha2Ugc3VyZSBzaXplIG9mIGhvc3RuYW1lIGlzIG5vdFxuICAgICAgICAgICAgICAvLyBicm9rZW4gYnkgcmVwbGFjaW5nIG5vbi1BU0NJSSBieSBub3RoaW5nXG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gJ3gnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbmV3cGFydCArPSBwYXJ0W2pdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB3ZSB0ZXN0IGFnYWluIHdpdGggQVNDSUkgY2hhciBvbmx5XG4gICAgICAgICAgaWYgKCFuZXdwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRQYXJ0cyA9IGhvc3RwYXJ0cy5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgIHZhciBub3RIb3N0ID0gaG9zdHBhcnRzLnNsaWNlKGkgKyAxKTtcbiAgICAgICAgICAgIHZhciBiaXQgPSBwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFN0YXJ0KTtcbiAgICAgICAgICAgIGlmIChiaXQpIHtcbiAgICAgICAgICAgICAgdmFsaWRQYXJ0cy5wdXNoKGJpdFsxXSk7XG4gICAgICAgICAgICAgIG5vdEhvc3QudW5zaGlmdChiaXRbMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vdEhvc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJlc3QgPSAnLycgKyBub3RIb3N0LmpvaW4oJy4nKSArIHJlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhvc3RuYW1lID0gdmFsaWRQYXJ0cy5qb2luKCcuJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5ob3N0bmFtZS5sZW5ndGggPiBob3N0bmFtZU1heExlbikge1xuICAgICAgdGhpcy5ob3N0bmFtZSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBob3N0bmFtZXMgYXJlIGFsd2F5cyBsb3dlciBjYXNlLlxuICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBpZiAoIWlwdjZIb3N0bmFtZSkge1xuICAgICAgLy8gSUROQSBTdXBwb3J0OiBSZXR1cm5zIGEgcHVueWNvZGVkIHJlcHJlc2VudGF0aW9uIG9mIFwiZG9tYWluXCIuXG4gICAgICAvLyBJdCBvbmx5IGNvbnZlcnRzIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB0aGF0XG4gICAgICAvLyBoYXZlIG5vbi1BU0NJSSBjaGFyYWN0ZXJzLCBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmXG4gICAgICAvLyB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQgYWxyZWFkeSBpcyBBU0NJSS1vbmx5LlxuICAgICAgdGhpcy5ob3N0bmFtZSA9IHB1bnljb2RlLnRvQVNDSUkodGhpcy5ob3N0bmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIHAgPSB0aGlzLnBvcnQgPyAnOicgKyB0aGlzLnBvcnQgOiAnJztcbiAgICB2YXIgaCA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG4gICAgdGhpcy5ob3N0ID0gaCArIHA7XG4gICAgdGhpcy5ocmVmICs9IHRoaXMuaG9zdDtcblxuICAgIC8vIHN0cmlwIFsgYW5kIF0gZnJvbSB0aGUgaG9zdG5hbWVcbiAgICAvLyB0aGUgaG9zdCBmaWVsZCBzdGlsbCByZXRhaW5zIHRoZW0sIHRob3VnaFxuICAgIGlmIChpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnN1YnN0cigxLCB0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgaWYgKHJlc3RbMF0gIT09ICcvJykge1xuICAgICAgICByZXN0ID0gJy8nICsgcmVzdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBub3cgcmVzdCBpcyBzZXQgdG8gdGhlIHBvc3QtaG9zdCBzdHVmZi5cbiAgLy8gY2hvcCBvZmYgYW55IGRlbGltIGNoYXJzLlxuICBpZiAoIXVuc2FmZVByb3RvY29sW2xvd2VyUHJvdG9dKSB7XG5cbiAgICAvLyBGaXJzdCwgbWFrZSAxMDAlIHN1cmUgdGhhdCBhbnkgXCJhdXRvRXNjYXBlXCIgY2hhcnMgZ2V0XG4gICAgLy8gZXNjYXBlZCwgZXZlbiBpZiBlbmNvZGVVUklDb21wb25lbnQgZG9lc24ndCB0aGluayB0aGV5XG4gICAgLy8gbmVlZCB0byBiZS5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF1dG9Fc2NhcGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgYWUgPSBhdXRvRXNjYXBlW2ldO1xuICAgICAgaWYgKHJlc3QuaW5kZXhPZihhZSkgPT09IC0xKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIHZhciBlc2MgPSBlbmNvZGVVUklDb21wb25lbnQoYWUpO1xuICAgICAgaWYgKGVzYyA9PT0gYWUpIHtcbiAgICAgICAgZXNjID0gZXNjYXBlKGFlKTtcbiAgICAgIH1cbiAgICAgIHJlc3QgPSByZXN0LnNwbGl0KGFlKS5qb2luKGVzYyk7XG4gICAgfVxuICB9XG5cblxuICAvLyBjaG9wIG9mZiBmcm9tIHRoZSB0YWlsIGZpcnN0LlxuICB2YXIgaGFzaCA9IHJlc3QuaW5kZXhPZignIycpO1xuICBpZiAoaGFzaCAhPT0gLTEpIHtcbiAgICAvLyBnb3QgYSBmcmFnbWVudCBzdHJpbmcuXG4gICAgdGhpcy5oYXNoID0gcmVzdC5zdWJzdHIoaGFzaCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgaGFzaCk7XG4gIH1cbiAgdmFyIHFtID0gcmVzdC5pbmRleE9mKCc/Jyk7XG4gIGlmIChxbSAhPT0gLTEpIHtcbiAgICB0aGlzLnNlYXJjaCA9IHJlc3Quc3Vic3RyKHFtKTtcbiAgICB0aGlzLnF1ZXJ5ID0gcmVzdC5zdWJzdHIocW0gKyAxKTtcbiAgICBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMucXVlcnkpO1xuICAgIH1cbiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBxbSk7XG4gIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykge1xuICAgIC8vIG5vIHF1ZXJ5IHN0cmluZywgYnV0IHBhcnNlUXVlcnlTdHJpbmcgc3RpbGwgcmVxdWVzdGVkXG4gICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICB0aGlzLnF1ZXJ5ID0ge307XG4gIH1cbiAgaWYgKHJlc3QpIHRoaXMucGF0aG5hbWUgPSByZXN0O1xuICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmXG4gICAgICB0aGlzLmhvc3RuYW1lICYmICF0aGlzLnBhdGhuYW1lKSB7XG4gICAgdGhpcy5wYXRobmFtZSA9ICcvJztcbiAgfVxuXG4gIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgaWYgKHRoaXMucGF0aG5hbWUgfHwgdGhpcy5zZWFyY2gpIHtcbiAgICB2YXIgcCA9IHRoaXMucGF0aG5hbWUgfHwgJyc7XG4gICAgdmFyIHMgPSB0aGlzLnNlYXJjaCB8fCAnJztcbiAgICB0aGlzLnBhdGggPSBwICsgcztcbiAgfVxuXG4gIC8vIGZpbmFsbHksIHJlY29uc3RydWN0IHRoZSBocmVmIGJhc2VkIG9uIHdoYXQgaGFzIGJlZW4gdmFsaWRhdGVkLlxuICB0aGlzLmhyZWYgPSB0aGlzLmZvcm1hdCgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGZvcm1hdCBhIHBhcnNlZCBvYmplY3QgaW50byBhIHVybCBzdHJpbmdcbmZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHtcbiAgLy8gZW5zdXJlIGl0J3MgYW4gb2JqZWN0LCBhbmQgbm90IGEgc3RyaW5nIHVybC5cbiAgLy8gSWYgaXQncyBhbiBvYmosIHRoaXMgaXMgYSBuby1vcC5cbiAgLy8gdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5nc1xuICAvLyB0byBjbGVhbiB1cCBwb3RlbnRpYWxseSB3b25reSB1cmxzLlxuICBpZiAodXRpbC5pc1N0cmluZyhvYmopKSBvYmogPSB1cmxQYXJzZShvYmopO1xuICBpZiAoIShvYmogaW5zdGFuY2VvZiBVcmwpKSByZXR1cm4gVXJsLnByb3RvdHlwZS5mb3JtYXQuY2FsbChvYmopO1xuICByZXR1cm4gb2JqLmZvcm1hdCgpO1xufVxuXG5VcmwucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXV0aCA9IHRoaXMuYXV0aCB8fCAnJztcbiAgaWYgKGF1dGgpIHtcbiAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIGF1dGggPSBhdXRoLnJlcGxhY2UoLyUzQS9pLCAnOicpO1xuICAgIGF1dGggKz0gJ0AnO1xuICB9XG5cbiAgdmFyIHByb3RvY29sID0gdGhpcy5wcm90b2NvbCB8fCAnJyxcbiAgICAgIHBhdGhuYW1lID0gdGhpcy5wYXRobmFtZSB8fCAnJyxcbiAgICAgIGhhc2ggPSB0aGlzLmhhc2ggfHwgJycsXG4gICAgICBob3N0ID0gZmFsc2UsXG4gICAgICBxdWVyeSA9ICcnO1xuXG4gIGlmICh0aGlzLmhvc3QpIHtcbiAgICBob3N0ID0gYXV0aCArIHRoaXMuaG9zdDtcbiAgfSBlbHNlIGlmICh0aGlzLmhvc3RuYW1lKSB7XG4gICAgaG9zdCA9IGF1dGggKyAodGhpcy5ob3N0bmFtZS5pbmRleE9mKCc6JykgPT09IC0xID9cbiAgICAgICAgdGhpcy5ob3N0bmFtZSA6XG4gICAgICAgICdbJyArIHRoaXMuaG9zdG5hbWUgKyAnXScpO1xuICAgIGlmICh0aGlzLnBvcnQpIHtcbiAgICAgIGhvc3QgKz0gJzonICsgdGhpcy5wb3J0O1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLnF1ZXJ5ICYmXG4gICAgICB1dGlsLmlzT2JqZWN0KHRoaXMucXVlcnkpICYmXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnF1ZXJ5KS5sZW5ndGgpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeSh0aGlzLnF1ZXJ5KTtcbiAgfVxuXG4gIHZhciBzZWFyY2ggPSB0aGlzLnNlYXJjaCB8fCAocXVlcnkgJiYgKCc/JyArIHF1ZXJ5KSkgfHwgJyc7XG5cbiAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLnN1YnN0cigtMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonO1xuXG4gIC8vIG9ubHkgdGhlIHNsYXNoZWRQcm90b2NvbHMgZ2V0IHRoZSAvLy4gIE5vdCBtYWlsdG86LCB4bXBwOiwgZXRjLlxuICAvLyB1bmxlc3MgdGhleSBoYWQgdGhlbSB0byBiZWdpbiB3aXRoLlxuICBpZiAodGhpcy5zbGFzaGVzIHx8XG4gICAgICAoIXByb3RvY29sIHx8IHNsYXNoZWRQcm90b2NvbFtwcm90b2NvbF0pICYmIGhvc3QgIT09IGZhbHNlKSB7XG4gICAgaG9zdCA9ICcvLycgKyAoaG9zdCB8fCAnJyk7XG4gICAgaWYgKHBhdGhuYW1lICYmIHBhdGhuYW1lLmNoYXJBdCgwKSAhPT0gJy8nKSBwYXRobmFtZSA9ICcvJyArIHBhdGhuYW1lO1xuICB9IGVsc2UgaWYgKCFob3N0KSB7XG4gICAgaG9zdCA9ICcnO1xuICB9XG5cbiAgaWYgKGhhc2ggJiYgaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgaGFzaCA9ICcjJyArIGhhc2g7XG4gIGlmIChzZWFyY2ggJiYgc2VhcmNoLmNoYXJBdCgwKSAhPT0gJz8nKSBzZWFyY2ggPSAnPycgKyBzZWFyY2g7XG5cbiAgcGF0aG5hbWUgPSBwYXRobmFtZS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7XG4gIH0pO1xuICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgnIycsICclMjMnKTtcblxuICByZXR1cm4gcHJvdG9jb2wgKyBob3N0ICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZShzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlKHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcbiAgcmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdCh1cmxQYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpKS5mb3JtYXQoKTtcbn07XG5cbmZ1bmN0aW9uIHVybFJlc29sdmVPYmplY3Qoc291cmNlLCByZWxhdGl2ZSkge1xuICBpZiAoIXNvdXJjZSkgcmV0dXJuIHJlbGF0aXZlO1xuICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZU9iamVjdChyZWxhdGl2ZSk7XG59XG5cblVybC5wcm90b3R5cGUucmVzb2x2ZU9iamVjdCA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG4gIGlmICh1dGlsLmlzU3RyaW5nKHJlbGF0aXZlKSkge1xuICAgIHZhciByZWwgPSBuZXcgVXJsKCk7XG4gICAgcmVsLnBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgcmVsYXRpdmUgPSByZWw7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gbmV3IFVybCgpO1xuICB2YXIgdGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTtcbiAgZm9yICh2YXIgdGsgPSAwOyB0ayA8IHRrZXlzLmxlbmd0aDsgdGsrKykge1xuICAgIHZhciB0a2V5ID0gdGtleXNbdGtdO1xuICAgIHJlc3VsdFt0a2V5XSA9IHRoaXNbdGtleV07XG4gIH1cblxuICAvLyBoYXNoIGlzIGFsd2F5cyBvdmVycmlkZGVuLCBubyBtYXR0ZXIgd2hhdC5cbiAgLy8gZXZlbiBocmVmPVwiXCIgd2lsbCByZW1vdmUgaXQuXG4gIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDtcblxuICAvLyBpZiB0aGUgcmVsYXRpdmUgdXJsIGlzIGVtcHR5LCB0aGVuIHRoZXJlJ3Mgbm90aGluZyBsZWZ0IHRvIGRvIGhlcmUuXG4gIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykge1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBocmVmcyBsaWtlIC8vZm9vL2JhciBhbHdheXMgY3V0IHRvIHRoZSBwcm90b2NvbC5cbiAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgLy8gdGFrZSBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgcHJvdG9jb2wgZnJvbSByZWxhdGl2ZVxuICAgIHZhciBya2V5cyA9IE9iamVjdC5rZXlzKHJlbGF0aXZlKTtcbiAgICBmb3IgKHZhciByayA9IDA7IHJrIDwgcmtleXMubGVuZ3RoOyByaysrKSB7XG4gICAgICB2YXIgcmtleSA9IHJrZXlzW3JrXTtcbiAgICAgIGlmIChya2V5ICE9PSAncHJvdG9jb2wnKVxuICAgICAgICByZXN1bHRbcmtleV0gPSByZWxhdGl2ZVtya2V5XTtcbiAgICB9XG5cbiAgICAvL3VybFBhcnNlIGFwcGVuZHMgdHJhaWxpbmcgLyB0byB1cmxzIGxpa2UgaHR0cDovL3d3dy5leGFtcGxlLmNvbVxuICAgIGlmIChzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSAmJlxuICAgICAgICByZXN1bHQuaG9zdG5hbWUgJiYgIXJlc3VsdC5wYXRobmFtZSkge1xuICAgICAgcmVzdWx0LnBhdGggPSByZXN1bHQucGF0aG5hbWUgPSAnLyc7XG4gICAgfVxuXG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmIChyZWxhdGl2ZS5wcm90b2NvbCAmJiByZWxhdGl2ZS5wcm90b2NvbCAhPT0gcmVzdWx0LnByb3RvY29sKSB7XG4gICAgLy8gaWYgaXQncyBhIGtub3duIHVybCBwcm90b2NvbCwgdGhlbiBjaGFuZ2luZ1xuICAgIC8vIHRoZSBwcm90b2NvbCBkb2VzIHdlaXJkIHRoaW5nc1xuICAgIC8vIGZpcnN0LCBpZiBpdCdzIG5vdCBmaWxlOiwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBob3N0LFxuICAgIC8vIGFuZCBpZiB0aGVyZSB3YXMgYSBwYXRoXG4gICAgLy8gdG8gYmVnaW4gd2l0aCwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBwYXRoLlxuICAgIC8vIGlmIGl0IGlzIGZpbGU6LCB0aGVuIHRoZSBob3N0IGlzIGRyb3BwZWQsXG4gICAgLy8gYmVjYXVzZSB0aGF0J3Mga25vd24gdG8gYmUgaG9zdGxlc3MuXG4gICAgLy8gYW55dGhpbmcgZWxzZSBpcyBhc3N1bWVkIHRvIGJlIGFic29sdXRlLlxuICAgIGlmICghc2xhc2hlZFByb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7XG4gICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHtcbiAgICAgICAgdmFyIGsgPSBrZXlzW3ZdO1xuICAgICAgICByZXN1bHRba10gPSByZWxhdGl2ZVtrXTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXN1bHQucHJvdG9jb2wgPSByZWxhdGl2ZS5wcm90b2NvbDtcbiAgICBpZiAoIXJlbGF0aXZlLmhvc3QgJiYgIWhvc3RsZXNzUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7XG4gICAgICB2YXIgcmVsUGF0aCA9IChyZWxhdGl2ZS5wYXRobmFtZSB8fCAnJykuc3BsaXQoJy8nKTtcbiAgICAgIHdoaWxlIChyZWxQYXRoLmxlbmd0aCAmJiAhKHJlbGF0aXZlLmhvc3QgPSByZWxQYXRoLnNoaWZ0KCkpKTtcbiAgICAgIGlmICghcmVsYXRpdmUuaG9zdCkgcmVsYXRpdmUuaG9zdCA9ICcnO1xuICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0bmFtZSkgcmVsYXRpdmUuaG9zdG5hbWUgPSAnJztcbiAgICAgIGlmIChyZWxQYXRoWzBdICE9PSAnJykgcmVsUGF0aC51bnNoaWZ0KCcnKTtcbiAgICAgIGlmIChyZWxQYXRoLmxlbmd0aCA8IDIpIHJlbFBhdGgudW5zaGlmdCgnJyk7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxQYXRoLmpvaW4oJy8nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsYXRpdmUucGF0aG5hbWU7XG4gICAgfVxuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgcmVzdWx0Lmhvc3QgPSByZWxhdGl2ZS5ob3N0IHx8ICcnO1xuICAgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aDtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSByZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0O1xuICAgIHJlc3VsdC5wb3J0ID0gcmVsYXRpdmUucG9ydDtcbiAgICAvLyB0byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmIChyZXN1bHQucGF0aG5hbWUgfHwgcmVzdWx0LnNlYXJjaCkge1xuICAgICAgdmFyIHAgPSByZXN1bHQucGF0aG5hbWUgfHwgJyc7XG4gICAgICB2YXIgcyA9IHJlc3VsdC5zZWFyY2ggfHwgJyc7XG4gICAgICByZXN1bHQucGF0aCA9IHAgKyBzO1xuICAgIH1cbiAgICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHZhciBpc1NvdXJjZUFicyA9IChyZXN1bHQucGF0aG5hbWUgJiYgcmVzdWx0LnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSxcbiAgICAgIGlzUmVsQWJzID0gKFxuICAgICAgICAgIHJlbGF0aXZlLmhvc3QgfHxcbiAgICAgICAgICByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJ1xuICAgICAgKSxcbiAgICAgIG11c3RFbmRBYnMgPSAoaXNSZWxBYnMgfHwgaXNTb3VyY2VBYnMgfHxcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5ob3N0ICYmIHJlbGF0aXZlLnBhdGhuYW1lKSksXG4gICAgICByZW1vdmVBbGxEb3RzID0gbXVzdEVuZEFicyxcbiAgICAgIHNyY1BhdGggPSByZXN1bHQucGF0aG5hbWUgJiYgcmVzdWx0LnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG4gICAgICByZWxQYXRoID0gcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICAgIHBzeWNob3RpYyA9IHJlc3VsdC5wcm90b2NvbCAmJiAhc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF07XG5cbiAgLy8gaWYgdGhlIHVybCBpcyBhIG5vbi1zbGFzaGVkIHVybCwgdGhlbiByZWxhdGl2ZVxuICAvLyBsaW5rcyBsaWtlIC4uLy4uIHNob3VsZCBiZSBhYmxlXG4gIC8vIHRvIGNyYXdsIHVwIHRvIHRoZSBob3N0bmFtZSwgYXMgd2VsbC4gIFRoaXMgaXMgc3RyYW5nZS5cbiAgLy8gcmVzdWx0LnByb3RvY29sIGhhcyBhbHJlYWR5IGJlZW4gc2V0IGJ5IG5vdy5cbiAgLy8gTGF0ZXIgb24sIHB1dCB0aGUgZmlyc3QgcGF0aCBwYXJ0IGludG8gdGhlIGhvc3QgZmllbGQuXG4gIGlmIChwc3ljaG90aWMpIHtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSAnJztcbiAgICByZXN1bHQucG9ydCA9IG51bGw7XG4gICAgaWYgKHJlc3VsdC5ob3N0KSB7XG4gICAgICBpZiAoc3JjUGF0aFswXSA9PT0gJycpIHNyY1BhdGhbMF0gPSByZXN1bHQuaG9zdDtcbiAgICAgIGVsc2Ugc3JjUGF0aC51bnNoaWZ0KHJlc3VsdC5ob3N0KTtcbiAgICB9XG4gICAgcmVzdWx0Lmhvc3QgPSAnJztcbiAgICBpZiAocmVsYXRpdmUucHJvdG9jb2wpIHtcbiAgICAgIHJlbGF0aXZlLmhvc3RuYW1lID0gbnVsbDtcbiAgICAgIHJlbGF0aXZlLnBvcnQgPSBudWxsO1xuICAgICAgaWYgKHJlbGF0aXZlLmhvc3QpIHtcbiAgICAgICAgaWYgKHJlbFBhdGhbMF0gPT09ICcnKSByZWxQYXRoWzBdID0gcmVsYXRpdmUuaG9zdDtcbiAgICAgICAgZWxzZSByZWxQYXRoLnVuc2hpZnQocmVsYXRpdmUuaG9zdCk7XG4gICAgICB9XG4gICAgICByZWxhdGl2ZS5ob3N0ID0gbnVsbDtcbiAgICB9XG4gICAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgJiYgKHJlbFBhdGhbMF0gPT09ICcnIHx8IHNyY1BhdGhbMF0gPT09ICcnKTtcbiAgfVxuXG4gIGlmIChpc1JlbEFicykge1xuICAgIC8vIGl0J3MgYWJzb2x1dGUuXG4gICAgcmVzdWx0Lmhvc3QgPSAocmVsYXRpdmUuaG9zdCB8fCByZWxhdGl2ZS5ob3N0ID09PSAnJykgP1xuICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdCA6IHJlc3VsdC5ob3N0O1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IChyZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0bmFtZSA9PT0gJycpID9cbiAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZS5ob3N0bmFtZSA6IHJlc3VsdC5ob3N0bmFtZTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIHNyY1BhdGggPSByZWxQYXRoO1xuICAgIC8vIGZhbGwgdGhyb3VnaCB0byB0aGUgZG90LWhhbmRsaW5nIGJlbG93LlxuICB9IGVsc2UgaWYgKHJlbFBhdGgubGVuZ3RoKSB7XG4gICAgLy8gaXQncyByZWxhdGl2ZVxuICAgIC8vIHRocm93IGF3YXkgdGhlIGV4aXN0aW5nIGZpbGUsIGFuZCB0YWtlIHRoZSBuZXcgcGF0aCBpbnN0ZWFkLlxuICAgIGlmICghc3JjUGF0aCkgc3JjUGF0aCA9IFtdO1xuICAgIHNyY1BhdGgucG9wKCk7XG4gICAgc3JjUGF0aCA9IHNyY1BhdGguY29uY2F0KHJlbFBhdGgpO1xuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gIH0gZWxzZSBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQocmVsYXRpdmUuc2VhcmNoKSkge1xuICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC5cbiAgICAvLyBsaWtlIGhyZWY9Jz9mb28nLlxuICAgIC8vIFB1dCB0aGlzIGFmdGVyIHRoZSBvdGhlciB0d28gY2FzZXMgYmVjYXVzZSBpdCBzaW1wbGlmaWVzIHRoZSBib29sZWFuc1xuICAgIGlmIChwc3ljaG90aWMpIHtcbiAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlc3VsdC5ob3N0ID0gc3JjUGF0aC5zaGlmdCgpO1xuICAgICAgLy9vY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdFxuICAgICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKVxuICAgICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlO1xuICAgICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG4gICAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG4gICAgfVxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgLy8gbm8gcGF0aCBhdCBhbGwuICBlYXN5LlxuICAgIC8vIHdlJ3ZlIGFscmVhZHkgaGFuZGxlZCB0aGUgb3RoZXIgc3R1ZmYgYWJvdmUuXG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gJy8nICsgcmVzdWx0LnNlYXJjaDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnBhdGggPSBudWxsO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaWYgYSB1cmwgRU5EcyBpbiAuIG9yIC4uLCB0aGVuIGl0IG11c3QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG4gIC8vIGhvd2V2ZXIsIGlmIGl0IGVuZHMgaW4gYW55dGhpbmcgZWxzZSBub24tc2xhc2h5LFxuICAvLyB0aGVuIGl0IG11c3QgTk9UIGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICB2YXIgbGFzdCA9IHNyY1BhdGguc2xpY2UoLTEpWzBdO1xuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IChcbiAgICAgIChyZXN1bHQuaG9zdCB8fCByZWxhdGl2ZS5ob3N0IHx8IHNyY1BhdGgubGVuZ3RoID4gMSkgJiZcbiAgICAgIChsYXN0ID09PSAnLicgfHwgbGFzdCA9PT0gJy4uJykgfHwgbGFzdCA9PT0gJycpO1xuXG4gIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXJcbiAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDBcbiAgdmFyIHVwID0gMDtcbiAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIGxhc3QgPSBzcmNQYXRoW2ldO1xuICAgIGlmIChsYXN0ID09PSAnLicpIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgcGF0aCBpcyBhbGxvd2VkIHRvIGdvIGFib3ZlIHRoZSByb290LCByZXN0b3JlIGxlYWRpbmcgLi5zXG4gIGlmICghbXVzdEVuZEFicyAmJiAhcmVtb3ZlQWxsRG90cykge1xuICAgIGZvciAoOyB1cC0tOyB1cCkge1xuICAgICAgc3JjUGF0aC51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChtdXN0RW5kQWJzICYmIHNyY1BhdGhbMF0gIT09ICcnICYmXG4gICAgICAoIXNyY1BhdGhbMF0gfHwgc3JjUGF0aFswXS5jaGFyQXQoMCkgIT09ICcvJykpIHtcbiAgICBzcmNQYXRoLnVuc2hpZnQoJycpO1xuICB9XG5cbiAgaWYgKGhhc1RyYWlsaW5nU2xhc2ggJiYgKHNyY1BhdGguam9pbignLycpLnN1YnN0cigtMSkgIT09ICcvJykpIHtcbiAgICBzcmNQYXRoLnB1c2goJycpO1xuICB9XG5cbiAgdmFyIGlzQWJzb2x1dGUgPSBzcmNQYXRoWzBdID09PSAnJyB8fFxuICAgICAgKHNyY1BhdGhbMF0gJiYgc3JjUGF0aFswXS5jaGFyQXQoMCkgPT09ICcvJyk7XG5cbiAgLy8gcHV0IHRoZSBob3N0IGJhY2tcbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlc3VsdC5ob3N0ID0gaXNBYnNvbHV0ZSA/ICcnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1BhdGgubGVuZ3RoID8gc3JjUGF0aC5zaGlmdCgpIDogJyc7XG4gICAgLy9vY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdFxuICAgIC8vdGhpcyBlc3BlY2lhbGx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpXG4gICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID9cbiAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICBpZiAoYXV0aEluSG9zdCkge1xuICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICB9XG4gIH1cblxuICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyB8fCAocmVzdWx0Lmhvc3QgJiYgc3JjUGF0aC5sZW5ndGgpO1xuXG4gIGlmIChtdXN0RW5kQWJzICYmICFpc0Fic29sdXRlKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcbiAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQucGF0aG5hbWUgPSBzcmNQYXRoLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8vdG8gc3VwcG9ydCByZXF1ZXN0Lmh0dHBcbiAgaWYgKCF1dGlsLmlzTnVsbChyZXN1bHQucGF0aG5hbWUpIHx8ICF1dGlsLmlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG4gIH1cbiAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoIHx8IHJlc3VsdC5hdXRoO1xuICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG4gIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuVXJsLnByb3RvdHlwZS5wYXJzZUhvc3QgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7XG4gIHZhciBwb3J0ID0gcG9ydFBhdHRlcm4uZXhlYyhob3N0KTtcbiAgaWYgKHBvcnQpIHtcbiAgICBwb3J0ID0gcG9ydFswXTtcbiAgICBpZiAocG9ydCAhPT0gJzonKSB7XG4gICAgICB0aGlzLnBvcnQgPSBwb3J0LnN1YnN0cigxKTtcbiAgICB9XG4gICAgaG9zdCA9IGhvc3Quc3Vic3RyKDAsIGhvc3QubGVuZ3RoIC0gcG9ydC5sZW5ndGgpO1xuICB9XG4gIGlmIChob3N0KSB0aGlzLmhvc3RuYW1lID0gaG9zdDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc1N0cmluZzogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHR5cGVvZihhcmcpID09PSAnc3RyaW5nJztcbiAgfSxcbiAgaXNPYmplY3Q6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xuICB9LFxuICBpc051bGw6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBhcmcgPT09IG51bGw7XG4gIH0sXG4gIGlzTnVsbE9yVW5kZWZpbmVkOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gYXJnID09IG51bGw7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG4vKiBlc2xpbnQtZGlzYWJsZVxuICBuby11bnVzZWQtdmFyc1xuKi9cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJhc2VDbGllbnQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VDbGllbnQpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEJhc2VDbGllbnQsIG51bGwsIFt7XG4gICAga2V5OiBcImdldENsaWVudFBhdGhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50UGF0aChvcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBuZWVkcyBpbXBsZW1lbnRhdGlvbicpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBCYXNlQ2xpZW50O1xufSgpOyIsIid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlXG4gIG5vLXVudXNlZC12YXJzXG4qL1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbnZhciBTb2NrSlMgPSByZXF1aXJlKCdzb2NranMtY2xpZW50L2Rpc3Qvc29ja2pzJyk7XG5cbnZhciBCYXNlQ2xpZW50ID0gcmVxdWlyZSgnLi9CYXNlQ2xpZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQmFzZUNsaWVudCkge1xuICBfaW5oZXJpdHMoU29ja0pTQ2xpZW50LCBfQmFzZUNsaWVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTb2NrSlNDbGllbnQpO1xuXG4gIGZ1bmN0aW9uIFNvY2tKU0NsaWVudCh1cmwpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU29ja0pTQ2xpZW50KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgX3RoaXMuc29jayA9IG5ldyBTb2NrSlModXJsKTtcblxuICAgIF90aGlzLnNvY2sub25lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsvLyBUT0RPOiB1c2UgbG9nZ2VyIHRvIGxvZyB0aGUgZXJyb3IgZXZlbnQgb25jZSBjbGllbnQgYW5kIGNsaWVudC1zcmNcbiAgICAgIC8vIGFyZSByZW9yZ2FuaXplZCB0byBoYXZlIHRoZSBzYW1lIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNvY2tKU0NsaWVudCwgW3tcbiAgICBrZXk6IFwib25PcGVuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3BlbihmKSB7XG4gICAgICB0aGlzLnNvY2sub25vcGVuID0gZjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25DbG9zZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsb3NlKGYpIHtcbiAgICAgIHRoaXMuc29jay5vbmNsb3NlID0gZjtcbiAgICB9IC8vIGNhbGwgZiB3aXRoIHRoZSBtZXNzYWdlIHN0cmluZyBhcyB0aGUgZmlyc3QgYXJndW1lbnRcblxuICB9LCB7XG4gICAga2V5OiBcIm9uTWVzc2FnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1lc3NhZ2UoZikge1xuICAgICAgdGhpcy5zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGYoZS5kYXRhKTtcbiAgICAgIH07XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiZ2V0Q2xpZW50UGF0aFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGllbnRQYXRoKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXF1aXJlLnJlc29sdmUoJy4vU29ja0pTQ2xpZW50Jyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNvY2tKU0NsaWVudDtcbn0oQmFzZUNsaWVudCk7IiwiJ3VzZSBzdHJpY3QnO1xuLyogZ2xvYmFsIF9fcmVzb3VyY2VRdWVyeSBXb3JrZXJHbG9iYWxTY29wZSBzZWxmICovXG5cbi8qIGVzbGludCBwcmVmZXItZGVzdHJ1Y3R1cmluZzogb2ZmICovXG5cbnZhciBzdHJpcEFuc2kgPSByZXF1aXJlKCdzdHJpcC1hbnNpJyk7XG5cbnZhciBzb2NrZXQgPSByZXF1aXJlKCcuL3NvY2tldCcpO1xuXG52YXIgb3ZlcmxheSA9IHJlcXVpcmUoJy4vb3ZlcmxheScpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL3V0aWxzL2xvZycpLFxuICAgIGxvZyA9IF9yZXF1aXJlLmxvZyxcbiAgICBzZXRMb2dMZXZlbCA9IF9yZXF1aXJlLnNldExvZ0xldmVsO1xuXG52YXIgc2VuZE1lc3NhZ2UgPSByZXF1aXJlKCcuL3V0aWxzL3NlbmRNZXNzYWdlJyk7XG5cbnZhciByZWxvYWRBcHAgPSByZXF1aXJlKCcuL3V0aWxzL3JlbG9hZEFwcCcpO1xuXG52YXIgY3JlYXRlU29ja2V0VXJsID0gcmVxdWlyZSgnLi91dGlscy9jcmVhdGVTb2NrZXRVcmwnKTtcblxudmFyIHN0YXR1cyA9IHtcbiAgaXNVbmxvYWRpbmc6IGZhbHNlLFxuICBjdXJyZW50SGFzaDogJydcbn07XG52YXIgb3B0aW9ucyA9IHtcbiAgaG90OiBmYWxzZSxcbiAgaG90UmVsb2FkOiB0cnVlLFxuICBsaXZlUmVsb2FkOiBmYWxzZSxcbiAgaW5pdGlhbDogdHJ1ZSxcbiAgdXNlV2FybmluZ092ZXJsYXk6IGZhbHNlLFxuICB1c2VFcnJvck92ZXJsYXk6IGZhbHNlLFxuICB1c2VQcm9ncmVzczogZmFsc2Vcbn07XG52YXIgc29ja2V0VXJsID0gY3JlYXRlU29ja2V0VXJsKF9fcmVzb3VyY2VRdWVyeSk7XG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgc3RhdHVzLmlzVW5sb2FkaW5nID0gdHJ1ZTtcbn0pO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgdmFyIHFzID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC50b0xvd2VyQ2FzZSgpO1xuICBvcHRpb25zLmhvdFJlbG9hZCA9IHFzLmluZGV4T2YoJ2hvdHJlbG9hZD1mYWxzZScpID09PSAtMTtcbn1cblxudmFyIG9uU29ja2V0TWVzc2FnZSA9IHtcbiAgaG90OiBmdW5jdGlvbiBob3QoKSB7XG4gICAgb3B0aW9ucy5ob3QgPSB0cnVlO1xuICAgIGxvZy5pbmZvKCdbV0RTXSBIb3QgTW9kdWxlIFJlcGxhY2VtZW50IGVuYWJsZWQuJyk7XG4gIH0sXG4gIGxpdmVSZWxvYWQ6IGZ1bmN0aW9uIGxpdmVSZWxvYWQoKSB7XG4gICAgb3B0aW9ucy5saXZlUmVsb2FkID0gdHJ1ZTtcbiAgICBsb2cuaW5mbygnW1dEU10gTGl2ZSBSZWxvYWRpbmcgZW5hYmxlZC4nKTtcbiAgfSxcbiAgaW52YWxpZDogZnVuY3Rpb24gaW52YWxpZCgpIHtcbiAgICBsb2cuaW5mbygnW1dEU10gQXBwIHVwZGF0ZWQuIFJlY29tcGlsaW5nLi4uJyk7IC8vIGZpeGVzICMxMDQyLiBvdmVybGF5IGRvZXNuJ3QgY2xlYXIgaWYgZXJyb3JzIGFyZSBmaXhlZCBidXQgd2FybmluZ3MgcmVtYWluLlxuXG4gICAgaWYgKG9wdGlvbnMudXNlV2FybmluZ092ZXJsYXkgfHwgb3B0aW9ucy51c2VFcnJvck92ZXJsYXkpIHtcbiAgICAgIG92ZXJsYXkuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBzZW5kTWVzc2FnZSgnSW52YWxpZCcpO1xuICB9LFxuICBoYXNoOiBmdW5jdGlvbiBoYXNoKF9oYXNoKSB7XG4gICAgc3RhdHVzLmN1cnJlbnRIYXNoID0gX2hhc2g7XG4gIH0sXG4gICdzdGlsbC1vayc6IGZ1bmN0aW9uIHN0aWxsT2soKSB7XG4gICAgbG9nLmluZm8oJ1tXRFNdIE5vdGhpbmcgY2hhbmdlZC4nKTtcblxuICAgIGlmIChvcHRpb25zLnVzZVdhcm5pbmdPdmVybGF5IHx8IG9wdGlvbnMudXNlRXJyb3JPdmVybGF5KSB7XG4gICAgICBvdmVybGF5LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgc2VuZE1lc3NhZ2UoJ1N0aWxsT2snKTtcbiAgfSxcbiAgJ2xvZy1sZXZlbCc6IGZ1bmN0aW9uIGxvZ0xldmVsKGxldmVsKSB7XG4gICAgdmFyIGhvdEN0eCA9IHJlcXVpcmUuY29udGV4dCgnd2VicGFjay9ob3QnLCBmYWxzZSwgL15cXC5cXC9sb2ckLyk7XG5cbiAgICBpZiAoaG90Q3R4LmtleXMoKS5pbmRleE9mKCcuL2xvZycpICE9PSAtMSkge1xuICAgICAgaG90Q3R4KCcuL2xvZycpLnNldExvZ0xldmVsKGxldmVsKTtcbiAgICB9XG5cbiAgICBzZXRMb2dMZXZlbChsZXZlbCk7XG4gIH0sXG4gIG92ZXJsYXk6IGZ1bmN0aW9uIG92ZXJsYXkodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIG9wdGlvbnMudXNlV2FybmluZ092ZXJsYXkgPSBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy51c2VFcnJvck92ZXJsYXkgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgICAgb3B0aW9ucy51c2VXYXJuaW5nT3ZlcmxheSA9IHZhbHVlLndhcm5pbmdzO1xuICAgICAgICBvcHRpb25zLnVzZUVycm9yT3ZlcmxheSA9IHZhbHVlLmVycm9ycztcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHByb2dyZXNzOiBmdW5jdGlvbiBwcm9ncmVzcyhfcHJvZ3Jlc3MpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy51c2VQcm9ncmVzcyA9IF9wcm9ncmVzcztcbiAgICB9XG4gIH0sXG4gICdwcm9ncmVzcy11cGRhdGUnOiBmdW5jdGlvbiBwcm9ncmVzc1VwZGF0ZShkYXRhKSB7XG4gICAgaWYgKG9wdGlvbnMudXNlUHJvZ3Jlc3MpIHtcbiAgICAgIGxvZy5pbmZvKFwiW1dEU10gXCIuY29uY2F0KGRhdGEucGVyY2VudCwgXCIlIC0gXCIpLmNvbmNhdChkYXRhLm1zZywgXCIuXCIpKTtcbiAgICB9XG5cbiAgICBzZW5kTWVzc2FnZSgnUHJvZ3Jlc3MnLCBkYXRhKTtcbiAgfSxcbiAgb2s6IGZ1bmN0aW9uIG9rKCkge1xuICAgIHNlbmRNZXNzYWdlKCdPaycpO1xuXG4gICAgaWYgKG9wdGlvbnMudXNlV2FybmluZ092ZXJsYXkgfHwgb3B0aW9ucy51c2VFcnJvck92ZXJsYXkpIHtcbiAgICAgIG92ZXJsYXkuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pbml0aWFsKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbml0aWFsID0gZmFsc2U7XG4gICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJldHVybi1hc3NpZ25cblxuXG4gICAgcmVsb2FkQXBwKG9wdGlvbnMsIHN0YXR1cyk7XG4gIH0sXG4gICdjb250ZW50LWNoYW5nZWQnOiBmdW5jdGlvbiBjb250ZW50Q2hhbmdlZCgpIHtcbiAgICBsb2cuaW5mbygnW1dEU10gQ29udGVudCBiYXNlIGNoYW5nZWQuIFJlbG9hZGluZy4uLicpO1xuICAgIHNlbGYubG9jYXRpb24ucmVsb2FkKCk7XG4gIH0sXG4gIHdhcm5pbmdzOiBmdW5jdGlvbiB3YXJuaW5ncyhfd2FybmluZ3MpIHtcbiAgICBsb2cud2FybignW1dEU10gV2FybmluZ3Mgd2hpbGUgY29tcGlsaW5nLicpO1xuXG4gICAgdmFyIHN0cmlwcGVkV2FybmluZ3MgPSBfd2FybmluZ3MubWFwKGZ1bmN0aW9uICh3YXJuaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaXBBbnNpKHdhcm5pbmcpO1xuICAgIH0pO1xuXG4gICAgc2VuZE1lc3NhZ2UoJ1dhcm5pbmdzJywgc3RyaXBwZWRXYXJuaW5ncyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlwcGVkV2FybmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxvZy53YXJuKHN0cmlwcGVkV2FybmluZ3NbaV0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnVzZVdhcm5pbmdPdmVybGF5KSB7XG4gICAgICBvdmVybGF5LnNob3dNZXNzYWdlKF93YXJuaW5ncyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaW5pdGlhbCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW5pdGlhbCA9IGZhbHNlO1xuICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cblxuICAgIHJlbG9hZEFwcChvcHRpb25zLCBzdGF0dXMpO1xuICB9LFxuICBlcnJvcnM6IGZ1bmN0aW9uIGVycm9ycyhfZXJyb3JzKSB7XG4gICAgbG9nLmVycm9yKCdbV0RTXSBFcnJvcnMgd2hpbGUgY29tcGlsaW5nLiBSZWxvYWQgcHJldmVudGVkLicpO1xuXG4gICAgdmFyIHN0cmlwcGVkRXJyb3JzID0gX2Vycm9ycy5tYXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gc3RyaXBBbnNpKGVycm9yKTtcbiAgICB9KTtcblxuICAgIHNlbmRNZXNzYWdlKCdFcnJvcnMnLCBzdHJpcHBlZEVycm9ycyk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlwcGVkRXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsb2cuZXJyb3Ioc3RyaXBwZWRFcnJvcnNbaV0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnVzZUVycm9yT3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5zaG93TWVzc2FnZShfZXJyb3JzKTtcbiAgICB9XG5cbiAgICBvcHRpb25zLmluaXRpYWwgPSBmYWxzZTtcbiAgfSxcbiAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgIGxvZy5lcnJvcihfZXJyb3IpO1xuICB9LFxuICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgbG9nLmVycm9yKCdbV0RTXSBEaXNjb25uZWN0ZWQhJyk7XG4gICAgc2VuZE1lc3NhZ2UoJ0Nsb3NlJyk7XG4gIH1cbn07XG5zb2NrZXQoc29ja2V0VXJsLCBvblNvY2tldE1lc3NhZ2UpOyIsIid1c2Ugc3RyaWN0JzsgLy8gVGhlIGVycm9yIG92ZXJsYXkgaXMgaW5zcGlyZWQgKGFuZCBtb3N0bHkgY29waWVkKSBmcm9tIENyZWF0ZSBSZWFjdCBBcHAgKGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9va2luY3ViYXRvci9jcmVhdGUtcmVhY3QtYXBwKVxuLy8gVGhleSwgaW4gdHVybiwgZ290IGluc3BpcmVkIGJ5IHdlYnBhY2staG90LW1pZGRsZXdhcmUgKGh0dHBzOi8vZ2l0aHViLmNvbS9nbGVuamFtaW4vd2VicGFjay1ob3QtbWlkZGxld2FyZSkuXG5cbnZhciBhbnNpSFRNTCA9IHJlcXVpcmUoJ2Fuc2ktaHRtbCcpO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCdodG1sLWVudGl0aWVzJyksXG4gICAgQWxsSHRtbEVudGl0aWVzID0gX3JlcXVpcmUuQWxsSHRtbEVudGl0aWVzO1xuXG52YXIgZW50aXRpZXMgPSBuZXcgQWxsSHRtbEVudGl0aWVzKCk7XG52YXIgY29sb3JzID0ge1xuICByZXNldDogWyd0cmFuc3BhcmVudCcsICd0cmFuc3BhcmVudCddLFxuICBibGFjazogJzE4MTgxOCcsXG4gIHJlZDogJ0UzNjA0OScsXG4gIGdyZWVuOiAnQjNDQjc0JyxcbiAgeWVsbG93OiAnRkZEMDgwJyxcbiAgYmx1ZTogJzdDQUZDMicsXG4gIG1hZ2VudGE6ICc3RkFDQ0EnLFxuICBjeWFuOiAnQzNDMkVGJyxcbiAgbGlnaHRncmV5OiAnRUJFN0UzJyxcbiAgZGFya2dyZXk6ICc2RDc4OTEnXG59O1xudmFyIG92ZXJsYXlJZnJhbWUgPSBudWxsO1xudmFyIG92ZXJsYXlEaXYgPSBudWxsO1xudmFyIGxhc3RPbk92ZXJsYXlEaXZSZWFkeSA9IG51bGw7XG5hbnNpSFRNTC5zZXRDb2xvcnMoY29sb3JzKTtcblxuZnVuY3Rpb24gY3JlYXRlT3ZlcmxheUlmcmFtZShvbklmcmFtZUxvYWQpIHtcbiAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICBpZnJhbWUuaWQgPSAnd2VicGFjay1kZXYtc2VydmVyLWNsaWVudC1vdmVybGF5JztcbiAgaWZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XG4gIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gIGlmcmFtZS5zdHlsZS5sZWZ0ID0gMDtcbiAgaWZyYW1lLnN0eWxlLnRvcCA9IDA7XG4gIGlmcmFtZS5zdHlsZS5yaWdodCA9IDA7XG4gIGlmcmFtZS5zdHlsZS5ib3R0b20gPSAwO1xuICBpZnJhbWUuc3R5bGUud2lkdGggPSAnMTAwdncnO1xuICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEwMHZoJztcbiAgaWZyYW1lLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgaWZyYW1lLnN0eWxlLnpJbmRleCA9IDk5OTk5OTk5OTk7XG4gIGlmcmFtZS5vbmxvYWQgPSBvbklmcmFtZUxvYWQ7XG4gIHJldHVybiBpZnJhbWU7XG59XG5cbmZ1bmN0aW9uIGFkZE92ZXJsYXlEaXZUbyhpZnJhbWUpIHtcbiAgdmFyIGRpdiA9IGlmcmFtZS5jb250ZW50RG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdi5pZCA9ICd3ZWJwYWNrLWRldi1zZXJ2ZXItY2xpZW50LW92ZXJsYXktZGl2JztcbiAgZGl2LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgZGl2LnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JztcbiAgZGl2LnN0eWxlLmxlZnQgPSAwO1xuICBkaXYuc3R5bGUudG9wID0gMDtcbiAgZGl2LnN0eWxlLnJpZ2h0ID0gMDtcbiAgZGl2LnN0eWxlLmJvdHRvbSA9IDA7XG4gIGRpdi5zdHlsZS53aWR0aCA9ICcxMDB2dyc7XG4gIGRpdi5zdHlsZS5oZWlnaHQgPSAnMTAwdmgnO1xuICBkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwgMCwgMCwgMC44NSknO1xuICBkaXYuc3R5bGUuY29sb3IgPSAnI0U4RThFOCc7XG4gIGRpdi5zdHlsZS5mb250RmFtaWx5ID0gJ01lbmxvLCBDb25zb2xhcywgbW9ub3NwYWNlJztcbiAgZGl2LnN0eWxlLmZvbnRTaXplID0gJ2xhcmdlJztcbiAgZGl2LnN0eWxlLnBhZGRpbmcgPSAnMnJlbSc7XG4gIGRpdi5zdHlsZS5saW5lSGVpZ2h0ID0gJzEuMic7XG4gIGRpdi5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZS13cmFwJztcbiAgZGl2LnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuICBpZnJhbWUuY29udGVudERvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgcmV0dXJuIGRpdjtcbn1cblxuZnVuY3Rpb24gZW5zdXJlT3ZlcmxheURpdkV4aXN0cyhvbk92ZXJsYXlEaXZSZWFkeSkge1xuICBpZiAob3ZlcmxheURpdikge1xuICAgIC8vIEV2ZXJ5dGhpbmcgaXMgcmVhZHksIGNhbGwgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkuXG4gICAgb25PdmVybGF5RGl2UmVhZHkob3ZlcmxheURpdik7XG4gICAgcmV0dXJuO1xuICB9IC8vIENyZWF0aW5nIGFuIGlmcmFtZSBtYXkgYmUgYXN5bmNocm9ub3VzIHNvIHdlJ2xsIHNjaGVkdWxlIHRoZSBjYWxsYmFjay5cbiAgLy8gSW4gY2FzZSBvZiBtdWx0aXBsZSBjYWxscywgbGFzdCBjYWxsYmFjayB3aW5zLlxuXG5cbiAgbGFzdE9uT3ZlcmxheURpdlJlYWR5ID0gb25PdmVybGF5RGl2UmVhZHk7XG5cbiAgaWYgKG92ZXJsYXlJZnJhbWUpIHtcbiAgICAvLyBXZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgaXQuXG4gICAgcmV0dXJuO1xuICB9IC8vIENyZWF0ZSBpZnJhbWUgYW5kLCB3aGVuIGl0IGlzIHJlYWR5LCBhIGRpdiBpbnNpZGUgaXQuXG5cblxuICBvdmVybGF5SWZyYW1lID0gY3JlYXRlT3ZlcmxheUlmcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgb3ZlcmxheURpdiA9IGFkZE92ZXJsYXlEaXZUbyhvdmVybGF5SWZyYW1lKTsgLy8gTm93IHdlIGNhbiB0YWxrIVxuXG4gICAgbGFzdE9uT3ZlcmxheURpdlJlYWR5KG92ZXJsYXlEaXYpO1xuICB9KTsgLy8gWmFsZ28gYWxlcnQ6IG9uSWZyYW1lTG9hZCgpIHdpbGwgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5XG4gIC8vIG9yIGFzeW5jaHJvbm91c2x5IGRlcGVuZGluZyBvbiB0aGUgYnJvd3Nlci5cbiAgLy8gV2UgZGVsYXkgYWRkaW5nIGl0IHNvIGBvdmVybGF5SWZyYW1lYCBpcyBzZXQgd2hlbiBgb25JZnJhbWVMb2FkYCBmaXJlcy5cblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXlJZnJhbWUpO1xufSAvLyBTdWNjZXNzZnVsIGNvbXBpbGF0aW9uLlxuXG5cbmZ1bmN0aW9uIGNsZWFyKCkge1xuICBpZiAoIW92ZXJsYXlEaXYpIHtcbiAgICAvLyBJdCBpcyBub3QgdGhlcmUgaW4gdGhlIGZpcnN0IHBsYWNlLlxuICAgIHJldHVybjtcbiAgfSAvLyBDbGVhbiB1cCBhbmQgcmVzZXQgaW50ZXJuYWwgc3RhdGUuXG5cblxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXlJZnJhbWUpO1xuICBvdmVybGF5RGl2ID0gbnVsbDtcbiAgb3ZlcmxheUlmcmFtZSA9IG51bGw7XG4gIGxhc3RPbk92ZXJsYXlEaXZSZWFkeSA9IG51bGw7XG59IC8vIENvbXBpbGF0aW9uIHdpdGggZXJyb3JzIChlLmcuIHN5bnRheCBlcnJvciBvciBtaXNzaW5nIG1vZHVsZXMpLlxuXG5cbmZ1bmN0aW9uIHNob3dNZXNzYWdlKG1lc3NhZ2VzKSB7XG4gIGVuc3VyZU92ZXJsYXlEaXZFeGlzdHMoZnVuY3Rpb24gKGRpdikge1xuICAgIC8vIE1ha2UgaXQgbG9vayBzaW1pbGFyIHRvIG91ciB0ZXJtaW5hbC5cbiAgICBkaXYuaW5uZXJIVE1MID0gXCI8c3BhbiBzdHlsZT1cXFwiY29sb3I6ICNcIi5jb25jYXQoY29sb3JzLnJlZCwgXCJcXFwiPkZhaWxlZCB0byBjb21waWxlLjwvc3Bhbj48YnI+PGJyPlwiKS5jb25jYXQoYW5zaUhUTUwoZW50aXRpZXMuZW5jb2RlKG1lc3NhZ2VzWzBdKSkpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNsZWFyOiBjbGVhcixcbiAgc2hvd01lc3NhZ2U6IHNob3dNZXNzYWdlXG59OyIsIid1c2Ugc3RyaWN0Jztcbi8qIGdsb2JhbCBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXyAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZVxuICBjYW1lbGNhc2VcbiovXG4vLyB0aGlzIFNvY2tKU0NsaWVudCBpcyBoZXJlIGFzIGEgZGVmYXVsdCBmYWxsYmFjaywgaW4gY2FzZSBpbmxpbmUgbW9kZVxuLy8gaXMgb2ZmIG9yIHRoZSBjbGllbnQgaXMgbm90IGluamVjdGVkLiBUaGlzIHdpbGwgYmUgc3dpdGNoZWQgdG9cbi8vIFdlYnNvY2tldENsaWVudCB3aGVuIGl0IGJlY29tZXMgdGhlIGRlZmF1bHRcbi8vIGltcG9ydGFudDogdGhlIHBhdGggdG8gU29ja0pTQ2xpZW50IGhlcmUgaXMgbWFkZSB0byB3b3JrIGluIHRoZSAnY2xpZW50J1xuLy8gZGlyZWN0b3J5LCBidXQgaXMgdXBkYXRlZCB2aWEgdGhlIHdlYnBhY2sgY29tcGlsYXRpb24gd2hlbiBjb21waWxlZCBmcm9tXG4vLyB0aGUgJ2NsaWVudC1zcmMnIGRpcmVjdG9yeVxuXG52YXIgQ2xpZW50ID0gdHlwZW9mIF9fd2VicGFja19kZXZfc2VydmVyX2NsaWVudF9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19kZXZfc2VydmVyX2NsaWVudF9fIDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnJlc29sdmVkXG5yZXF1aXJlKCcuL2NsaWVudHMvU29ja0pTQ2xpZW50Jyk7XG52YXIgcmV0cmllcyA9IDA7XG52YXIgY2xpZW50ID0gbnVsbDtcblxudmFyIHNvY2tldCA9IGZ1bmN0aW9uIGluaXRTb2NrZXQodXJsLCBoYW5kbGVycykge1xuICBjbGllbnQgPSBuZXcgQ2xpZW50KHVybCk7XG4gIGNsaWVudC5vbk9wZW4oZnVuY3Rpb24gKCkge1xuICAgIHJldHJpZXMgPSAwO1xuICB9KTtcbiAgY2xpZW50Lm9uQ2xvc2UoZnVuY3Rpb24gKCkge1xuICAgIGlmIChyZXRyaWVzID09PSAwKSB7XG4gICAgICBoYW5kbGVycy5jbG9zZSgpO1xuICAgIH0gLy8gVHJ5IHRvIHJlY29ubmVjdC5cblxuXG4gICAgY2xpZW50ID0gbnVsbDsgLy8gQWZ0ZXIgMTAgcmV0cmllcyBzdG9wIHRyeWluZywgdG8gcHJldmVudCBsb2dzcGFtLlxuXG4gICAgaWYgKHJldHJpZXMgPD0gMTApIHtcbiAgICAgIC8vIEV4cG9uZW50aWFsbHkgaW5jcmVhc2UgdGltZW91dCB0byByZWNvbm5lY3QuXG4gICAgICAvLyBSZXNwZWN0ZnVsbHkgY29waWVkIGZyb20gdGhlIHBhY2thZ2UgYGdvdGAuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbWl4ZWQtb3BlcmF0b3JzLCBuby1yZXN0cmljdGVkLXByb3BlcnRpZXNcbiAgICAgIHZhciByZXRyeUluTXMgPSAxMDAwICogTWF0aC5wb3coMiwgcmV0cmllcykgKyBNYXRoLnJhbmRvbSgpICogMTAwO1xuICAgICAgcmV0cmllcyArPSAxO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNvY2tldCh1cmwsIGhhbmRsZXJzKTtcbiAgICAgIH0sIHJldHJ5SW5Ncyk7XG4gICAgfVxuICB9KTtcbiAgY2xpZW50Lm9uTWVzc2FnZShmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBtc2cgPSBKU09OLnBhcnNlKGRhdGEpO1xuXG4gICAgaWYgKGhhbmRsZXJzW21zZy50eXBlXSkge1xuICAgICAgaGFuZGxlcnNbbXNnLnR5cGVdKG1zZy5kYXRhKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBzb2NrZXQ7IiwiJ3VzZSBzdHJpY3QnO1xuLyogZ2xvYmFsIHNlbGYgKi9cblxudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xuXG52YXIgZ2V0Q3VycmVudFNjcmlwdFNvdXJjZSA9IHJlcXVpcmUoJy4vZ2V0Q3VycmVudFNjcmlwdFNvdXJjZScpO1xuXG5mdW5jdGlvbiBjcmVhdGVTb2NrZXRVcmwocmVzb3VyY2VRdWVyeSwgY3VycmVudExvY2F0aW9uKSB7XG4gIHZhciB1cmxQYXJ0cztcblxuICBpZiAodHlwZW9mIHJlc291cmNlUXVlcnkgPT09ICdzdHJpbmcnICYmIHJlc291cmNlUXVlcnkgIT09ICcnKSB7XG4gICAgLy8gSWYgdGhpcyBidW5kbGUgaXMgaW5saW5lZCwgdXNlIHRoZSByZXNvdXJjZSBxdWVyeSB0byBnZXQgdGhlIGNvcnJlY3QgdXJsLlxuICAgIC8vIGZvcm1hdCBpcyBsaWtlIGA/aHR0cDovLzAuMC4wLjA6ODA5NiZzb2NrUG9ydD04MDk3JnNvY2tIb3N0PWxvY2FsaG9zdGBcbiAgICB1cmxQYXJ0cyA9IHVybC5wYXJzZShyZXNvdXJjZVF1ZXJ5IC8vIHN0cmlwIGxlYWRpbmcgYD9gIGZyb20gcXVlcnkgc3RyaW5nIHRvIGdldCBhIHZhbGlkIFVSTFxuICAgIC5zdWJzdHIoMSkgLy8gcmVwbGFjZSBmaXJzdCBgJmAgd2l0aCBgP2AgdG8gaGF2ZSBhIHZhbGlkIHF1ZXJ5IHN0cmluZ1xuICAgIC5yZXBsYWNlKCcmJywgJz8nKSwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gRWxzZSwgZ2V0IHRoZSB1cmwgZnJvbSB0aGUgPHNjcmlwdD4gdGhpcyBmaWxlIHdhcyBjYWxsZWQgd2l0aC5cbiAgICB2YXIgc2NyaXB0SG9zdCA9IGdldEN1cnJlbnRTY3JpcHRTb3VyY2UoKTtcbiAgICB1cmxQYXJ0cyA9IHVybC5wYXJzZShzY3JpcHRIb3N0IHx8ICcvJywgdHJ1ZSwgdHJ1ZSk7XG4gIH0gLy8gVXNlIHBhcmFtZXRlciB0byBhbGxvdyBwYXNzaW5nIGxvY2F0aW9uIGluIHVuaXQgdGVzdHNcblxuXG4gIGlmICh0eXBlb2YgY3VycmVudExvY2F0aW9uID09PSAnc3RyaW5nJyAmJiBjdXJyZW50TG9jYXRpb24gIT09ICcnKSB7XG4gICAgY3VycmVudExvY2F0aW9uID0gdXJsLnBhcnNlKGN1cnJlbnRMb2NhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudExvY2F0aW9uID0gc2VsZi5sb2NhdGlvbjtcbiAgfVxuXG4gIHJldHVybiBnZXRTb2NrZXRVcmwodXJsUGFydHMsIGN1cnJlbnRMb2NhdGlvbik7XG59XG4vKlxuICogR2V0cyBzb2NrZXQgVVJMIGJhc2VkIG9uIFNjcmlwdCBTb3VyY2UvTG9jYXRpb25cbiAqIChzY3JpcHRTcmM6IFVSTCwgbG9jYXRpb246IFVSTCkgLT4gVVJMXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRTb2NrZXRVcmwodXJsUGFydHMsIGxvYykge1xuICB2YXIgYXV0aCA9IHVybFBhcnRzLmF1dGgsXG4gICAgICBxdWVyeSA9IHVybFBhcnRzLnF1ZXJ5O1xuICB2YXIgaG9zdG5hbWUgPSB1cmxQYXJ0cy5ob3N0bmFtZSxcbiAgICAgIHByb3RvY29sID0gdXJsUGFydHMucHJvdG9jb2wsXG4gICAgICBwb3J0ID0gdXJsUGFydHMucG9ydDtcblxuICBpZiAoIXBvcnQgfHwgcG9ydCA9PT0gJzAnKSB7XG4gICAgcG9ydCA9IGxvYy5wb3J0O1xuICB9IC8vIGNoZWNrIGlwdjQgYW5kIGlwdjYgYGFsbCBob3N0bmFtZWBcbiAgLy8gd2h5IGRvIHdlIG5lZWQgdGhpcyBjaGVjaz9cbiAgLy8gaG9zdG5hbWUgbi9hIGZvciBmaWxlIHByb3RvY29sIChleGFtcGxlLCB3aGVuIHVzaW5nIGVsZWN0cm9uLCBpb25pYylcbiAgLy8gc2VlOiBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay93ZWJwYWNrLWRldi1zZXJ2ZXIvcHVsbC8zODRcblxuXG4gIGlmICgoaG9zdG5hbWUgPT09ICcwLjAuMC4wJyB8fCBob3N0bmFtZSA9PT0gJzo6JykgJiYgbG9jLmhvc3RuYW1lICYmIGxvYy5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPT09IDApIHtcbiAgICBob3N0bmFtZSA9IGxvYy5ob3N0bmFtZTtcbiAgfSAvLyBgaG9zdG5hbWVgIGNhbiBiZSBlbXB0eSB3aGVuIHRoZSBzY3JpcHQgcGF0aCBpcyByZWxhdGl2ZS4gSW4gdGhhdCBjYXNlLCBzcGVjaWZ5aW5nXG4gIC8vIGEgcHJvdG9jb2wgd291bGQgcmVzdWx0IGluIGFuIGludmFsaWQgVVJMLlxuICAvLyBXaGVuIGh0dHBzIGlzIHVzZWQgaW4gdGhlIGFwcCwgc2VjdXJlIHdlYnNvY2tldHMgYXJlIGFsd2F5cyBuZWNlc3NhcnlcbiAgLy8gYmVjYXVzZSB0aGUgYnJvd3NlciBkb2Vzbid0IGFjY2VwdCBub24tc2VjdXJlIHdlYnNvY2tldHMuXG5cblxuICBpZiAoaG9zdG5hbWUgJiYgaG9zdG5hbWUgIT09ICcxMjcuMC4wLjEnICYmIChsb2MucHJvdG9jb2wgPT09ICdodHRwczonIHx8IHVybFBhcnRzLmhvc3RuYW1lID09PSAnMC4wLjAuMCcpKSB7XG4gICAgcHJvdG9jb2wgPSBsb2MucHJvdG9jb2w7XG4gIH0gLy8gYWxsIG9mIHRoZXNlIHNvY2sgdXJsIHBhcmFtcyBhcmUgb3B0aW9uYWxseSBwYXNzZWQgaW4gdGhyb3VnaFxuICAvLyByZXNvdXJjZVF1ZXJ5LCBzbyB3ZSBuZWVkIHRvIGZhbGwgYmFjayB0byB0aGUgZGVmYXVsdCBpZlxuICAvLyB0aGV5IGFyZSBub3QgcHJvdmlkZWRcblxuXG4gIHZhciBzb2NrSG9zdCA9IHF1ZXJ5LnNvY2tIb3N0IHx8IGhvc3RuYW1lO1xuICB2YXIgc29ja1BhdGggPSBxdWVyeS5zb2NrUGF0aCB8fCAnL3NvY2tqcy1ub2RlJztcbiAgdmFyIHNvY2tQb3J0ID0gcXVlcnkuc29ja1BvcnQgfHwgcG9ydDtcblxuICBpZiAoc29ja1BvcnQgPT09ICdsb2NhdGlvbicpIHtcbiAgICBzb2NrUG9ydCA9IGxvYy5wb3J0O1xuICB9XG5cbiAgcmV0dXJuIHVybC5mb3JtYXQoe1xuICAgIHByb3RvY29sOiBwcm90b2NvbCxcbiAgICBhdXRoOiBhdXRoLFxuICAgIGhvc3RuYW1lOiBzb2NrSG9zdCxcbiAgICBwb3J0OiBzb2NrUG9ydCxcbiAgICAvLyBJZiBzb2NrUGF0aCBpcyBwcm92aWRlZCBpdCdsbCBiZSBwYXNzZWQgaW4gdmlhIHRoZSByZXNvdXJjZVF1ZXJ5IGFzIGFcbiAgICAvLyBxdWVyeSBwYXJhbSBzbyBpdCBoYXMgdG8gYmUgcGFyc2VkIG91dCBvZiB0aGUgcXVlcnlzdHJpbmcgaW4gb3JkZXIgZm9yIHRoZVxuICAgIC8vIGNsaWVudCB0byBvcGVuIHRoZSBzb2NrZXQgdG8gdGhlIGNvcnJlY3QgbG9jYXRpb24uXG4gICAgcGF0aG5hbWU6IHNvY2tQYXRoXG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZVNvY2tldFVybDsiLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldEN1cnJlbnRTY3JpcHRTb3VyY2UoKSB7XG4gIC8vIGBkb2N1bWVudC5jdXJyZW50U2NyaXB0YCBpcyB0aGUgbW9zdCBhY2N1cmF0ZSB3YXkgdG8gZmluZCB0aGUgY3VycmVudCBzY3JpcHQsXG4gIC8vIGJ1dCBpcyBub3Qgc3VwcG9ydGVkIGluIGFsbCBicm93c2Vycy5cbiAgaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICB9IC8vIEZhbGwgYmFjayB0byBnZXR0aW5nIGFsbCBzY3JpcHRzIGluIHRoZSBkb2N1bWVudC5cblxuXG4gIHZhciBzY3JpcHRFbGVtZW50cyA9IGRvY3VtZW50LnNjcmlwdHMgfHwgW107XG4gIHZhciBjdXJyZW50U2NyaXB0ID0gc2NyaXB0RWxlbWVudHNbc2NyaXB0RWxlbWVudHMubGVuZ3RoIC0gMV07XG5cbiAgaWYgKGN1cnJlbnRTY3JpcHQpIHtcbiAgICByZXR1cm4gY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICB9IC8vIEZhaWwgYXMgdGhlcmUgd2FzIG5vIHNjcmlwdCB0byB1c2UuXG5cblxuICB0aHJvdyBuZXcgRXJyb3IoJ1tXRFNdIEZhaWxlZCB0byBnZXQgY3VycmVudCBzY3JpcHQgc291cmNlLicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEN1cnJlbnRTY3JpcHRTb3VyY2U7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbG9nID0gcmVxdWlyZSgnbG9nbGV2ZWwnKS5nZXRMb2dnZXIoJ3dlYnBhY2stZGV2LXNlcnZlcicpO1xuXG52YXIgSU5GTyA9ICdpbmZvJztcbnZhciBXQVJOID0gJ3dhcm4nO1xudmFyIEVSUk9SID0gJ2Vycm9yJztcbnZhciBERUJVRyA9ICdkZWJ1Zyc7XG52YXIgVFJBQ0UgPSAndHJhY2UnO1xudmFyIFNJTEVOVCA9ICdzaWxlbnQnOyAvLyBkZXByZWNhdGVkXG4vLyBUT0RPOiByZW1vdmUgdGhlc2UgYXQgbWFqb3IgcmVsZWFzZWRcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3dlYnBhY2stZGV2LXNlcnZlci9wdWxsLzE4MjVcblxudmFyIFdBUk5JTkcgPSAnd2FybmluZyc7XG52YXIgTk9ORSA9ICdub25lJzsgLy8gU2V0IHRoZSBkZWZhdWx0IGxvZyBsZXZlbFxuXG5sb2cuc2V0RGVmYXVsdExldmVsKElORk8pO1xuXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xuICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgY2FzZSBJTkZPOlxuICAgIGNhc2UgV0FSTjpcbiAgICBjYXNlIEVSUk9SOlxuICAgIGNhc2UgREVCVUc6XG4gICAgY2FzZSBUUkFDRTpcbiAgICAgIGxvZy5zZXRMZXZlbChsZXZlbCk7XG4gICAgICBicmVhaztcbiAgICAvLyBkZXByZWNhdGVkXG5cbiAgICBjYXNlIFdBUk5JTkc6XG4gICAgICAvLyBsb2dsZXZlbCdzIHdhcm5pbmcgbmFtZSBpcyBkaWZmZXJlbnQgZnJvbSB3ZWJwYWNrJ3NcbiAgICAgIGxvZy5zZXRMZXZlbCgnd2FybicpO1xuICAgICAgYnJlYWs7XG4gICAgLy8gZGVwcmVjYXRlZFxuXG4gICAgY2FzZSBOT05FOlxuICAgIGNhc2UgU0lMRU5UOlxuICAgICAgbG9nLmRpc2FibGVBbGwoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGxvZy5lcnJvcihcIltXRFNdIFVua25vd24gY2xpZW50TG9nTGV2ZWwgJ1wiLmNvbmNhdChsZXZlbCwgXCInXCIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbG9nOiBsb2csXG4gIHNldExvZ0xldmVsOiBzZXRMb2dMZXZlbFxufTsiLCIndXNlIHN0cmljdCc7XG4vKiBnbG9iYWwgV29ya2VyR2xvYmFsU2NvcGUgc2VsZiAqL1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL2xvZycpLFxuICAgIGxvZyA9IF9yZXF1aXJlLmxvZztcblxuZnVuY3Rpb24gcmVsb2FkQXBwKF9yZWYsIF9yZWYyKSB7XG4gIHZhciBob3RSZWxvYWQgPSBfcmVmLmhvdFJlbG9hZCxcbiAgICAgIGhvdCA9IF9yZWYuaG90LFxuICAgICAgbGl2ZVJlbG9hZCA9IF9yZWYubGl2ZVJlbG9hZDtcbiAgdmFyIGlzVW5sb2FkaW5nID0gX3JlZjIuaXNVbmxvYWRpbmcsXG4gICAgICBjdXJyZW50SGFzaCA9IF9yZWYyLmN1cnJlbnRIYXNoO1xuXG4gIGlmIChpc1VubG9hZGluZyB8fCAhaG90UmVsb2FkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGhvdCkge1xuICAgIGxvZy5pbmZvKCdbV0RTXSBBcHAgaG90IHVwZGF0ZS4uLicpO1xuXG4gICAgdmFyIGhvdEVtaXR0ZXIgPSByZXF1aXJlKCd3ZWJwYWNrL2hvdC9lbWl0dGVyJyk7XG5cbiAgICBob3RFbWl0dGVyLmVtaXQoJ3dlYnBhY2tIb3RVcGRhdGUnLCBjdXJyZW50SGFzaCk7XG5cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYud2luZG93KSB7XG4gICAgICAvLyBicm9hZGNhc3QgdXBkYXRlIHRvIHdpbmRvd1xuICAgICAgc2VsZi5wb3N0TWVzc2FnZShcIndlYnBhY2tIb3RVcGRhdGVcIi5jb25jYXQoY3VycmVudEhhc2gpLCAnKicpO1xuICAgIH1cbiAgfSAvLyBhbGxvdyByZWZyZXNoaW5nIHRoZSBwYWdlIG9ubHkgaWYgbGl2ZVJlbG9hZCBpc24ndCBkaXNhYmxlZFxuICBlbHNlIGlmIChsaXZlUmVsb2FkKSB7XG4gICAgICB2YXIgcm9vdFdpbmRvdyA9IHNlbGY7IC8vIHVzZSBwYXJlbnQgd2luZG93IGZvciByZWxvYWQgKGluIGNhc2Ugd2UncmUgaW4gYW4gaWZyYW1lIHdpdGggbm8gdmFsaWQgc3JjKVxuXG4gICAgICB2YXIgaW50ZXJ2YWxJZCA9IHNlbGYuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocm9vdFdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCAhPT0gJ2Fib3V0OicpIHtcbiAgICAgICAgICAvLyByZWxvYWQgaW1tZWRpYXRlbHkgaWYgcHJvdG9jb2wgaXMgdmFsaWRcbiAgICAgICAgICBhcHBseVJlbG9hZChyb290V2luZG93LCBpbnRlcnZhbElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByb290V2luZG93ID0gcm9vdFdpbmRvdy5wYXJlbnQ7XG5cbiAgICAgICAgICBpZiAocm9vdFdpbmRvdy5wYXJlbnQgPT09IHJvb3RXaW5kb3cpIHtcbiAgICAgICAgICAgIC8vIGlmIHBhcmVudCBlcXVhbHMgY3VycmVudCB3aW5kb3cgd2UndmUgcmVhY2hlZCB0aGUgcm9vdCB3aGljaCB3b3VsZCBjb250aW51ZSBmb3JldmVyLCBzbyB0cmlnZ2VyIGEgcmVsb2FkIGFueXdheXNcbiAgICAgICAgICAgIGFwcGx5UmVsb2FkKHJvb3RXaW5kb3csIGludGVydmFsSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gIGZ1bmN0aW9uIGFwcGx5UmVsb2FkKHJvb3RXaW5kb3csIGludGVydmFsSWQpIHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgIGxvZy5pbmZvKCdbV0RTXSBBcHAgdXBkYXRlZC4gUmVsb2FkaW5nLi4uJyk7XG4gICAgcm9vdFdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlbG9hZEFwcDsiLCIndXNlIHN0cmljdCc7XG4vKiBnbG9iYWwgX19yZXNvdXJjZVF1ZXJ5IFdvcmtlckdsb2JhbFNjb3BlIHNlbGYgKi9cbi8vIFNlbmQgbWVzc2FnZXMgdG8gdGhlIG91dHNpZGUsIHNvIHBsdWdpbnMgY2FuIGNvbnN1bWUgaXQuXG5cbmZ1bmN0aW9uIHNlbmRNc2codHlwZSwgZGF0YSkge1xuICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgPT09ICd1bmRlZmluZWQnIHx8ICEoc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKSkpIHtcbiAgICBzZWxmLnBvc3RNZXNzYWdlKHtcbiAgICAgIHR5cGU6IFwid2VicGFja1wiLmNvbmNhdCh0eXBlKSxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9LCAnKicpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2VuZE1zZzsiLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIC9bXFx1MDAxYlxcdTAwOWJdW1soKSM7P10qKD86WzAtOV17MSw0fSg/OjtbMC05XXswLDR9KSopP1swLTlBLVBSWmNmLW5xcnk9PjxdL2c7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGFuc2lSZWdleCA9IHJlcXVpcmUoJ2Fuc2ktcmVnZXgnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHIpIHtcblx0cmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gc3RyLnJlcGxhY2UoYW5zaVJlZ2V4LCAnJykgOiBzdHI7XG59O1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIiwidmFyIG1hcCA9IHtcblx0XCIuL2xvZ1wiOiBcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svaG90L2xvZy5qc1wiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2hvdCBzeW5jIF5cXFxcLlxcXFwvbG9nJFwiOyIsInZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4iLCJ2YXIgbG9nTGV2ZWwgPSBcImluZm9cIjtcblxuZnVuY3Rpb24gZHVtbXkoKSB7fVxuXG5mdW5jdGlvbiBzaG91bGRMb2cobGV2ZWwpIHtcblx0dmFyIHNob3VsZExvZyA9XG5cdFx0KGxvZ0xldmVsID09PSBcImluZm9cIiAmJiBsZXZlbCA9PT0gXCJpbmZvXCIpIHx8XG5cdFx0KFtcImluZm9cIiwgXCJ3YXJuaW5nXCJdLmluZGV4T2YobG9nTGV2ZWwpID49IDAgJiYgbGV2ZWwgPT09IFwid2FybmluZ1wiKSB8fFxuXHRcdChbXCJpbmZvXCIsIFwid2FybmluZ1wiLCBcImVycm9yXCJdLmluZGV4T2YobG9nTGV2ZWwpID49IDAgJiYgbGV2ZWwgPT09IFwiZXJyb3JcIik7XG5cdHJldHVybiBzaG91bGRMb2c7XG59XG5cbmZ1bmN0aW9uIGxvZ0dyb3VwKGxvZ0ZuKSB7XG5cdHJldHVybiBmdW5jdGlvbihsZXZlbCwgbXNnKSB7XG5cdFx0aWYgKHNob3VsZExvZyhsZXZlbCkpIHtcblx0XHRcdGxvZ0ZuKG1zZyk7XG5cdFx0fVxuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxldmVsLCBtc2cpIHtcblx0aWYgKHNob3VsZExvZyhsZXZlbCkpIHtcblx0XHRpZiAobGV2ZWwgPT09IFwiaW5mb1wiKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhtc2cpO1xuXHRcdH0gZWxzZSBpZiAobGV2ZWwgPT09IFwid2FybmluZ1wiKSB7XG5cdFx0XHRjb25zb2xlLndhcm4obXNnKTtcblx0XHR9IGVsc2UgaWYgKGxldmVsID09PSBcImVycm9yXCIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IobXNnKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tdW5zdXBwb3J0ZWQtZmVhdHVyZXMvbm9kZS1idWlsdGlucyAqL1xudmFyIGdyb3VwID0gY29uc29sZS5ncm91cCB8fCBkdW1teTtcbnZhciBncm91cENvbGxhcHNlZCA9IGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQgfHwgZHVtbXk7XG52YXIgZ3JvdXBFbmQgPSBjb25zb2xlLmdyb3VwRW5kIHx8IGR1bW15O1xuLyogZXNsaW50LWVuYWJsZSBub2RlL25vLXVuc3VwcG9ydGVkLWZlYXR1cmVzL25vZGUtYnVpbHRpbnMgKi9cblxubW9kdWxlLmV4cG9ydHMuZ3JvdXAgPSBsb2dHcm91cChncm91cCk7XG5cbm1vZHVsZS5leHBvcnRzLmdyb3VwQ29sbGFwc2VkID0gbG9nR3JvdXAoZ3JvdXBDb2xsYXBzZWQpO1xuXG5tb2R1bGUuZXhwb3J0cy5ncm91cEVuZCA9IGxvZ0dyb3VwKGdyb3VwRW5kKTtcblxubW9kdWxlLmV4cG9ydHMuc2V0TG9nTGV2ZWwgPSBmdW5jdGlvbihsZXZlbCkge1xuXHRsb2dMZXZlbCA9IGxldmVsO1xufTtcblxubW9kdWxlLmV4cG9ydHMuZm9ybWF0RXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcblx0dmFyIG1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcblx0dmFyIHN0YWNrID0gZXJyLnN0YWNrO1xuXHRpZiAoIXN0YWNrKSB7XG5cdFx0cmV0dXJuIG1lc3NhZ2U7XG5cdH0gZWxzZSBpZiAoc3RhY2suaW5kZXhPZihtZXNzYWdlKSA8IDApIHtcblx0XHRyZXR1cm4gbWVzc2FnZSArIFwiXFxuXCIgKyBzdGFjaztcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gc3RhY2s7XG5cdH1cbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkdhbWUgPSB2b2lkIDA7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBlY3N5X2JhYnlsb25fMSA9IHJlcXVpcmUoXCIuLi9lY3N5LWJhYnlsb25cIik7XHJcbmNsYXNzIEdhbWUgZXh0ZW5kcyBlY3N5XzEuV29ybGQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuICAgIC8qKiBHZXQgYWxsIEVudGl0eSBpbnN0YW5jZXMuICovXHJcbiAgICBnZXQgZW50aXRpZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNbXCJlbnRpdHlNYW5hZ2VyXCJdLl9lbnRpdGllcztcclxuICAgIH1cclxuICAgIC8qKiBHZXQgYWxsIFN5c3RlbSBpbnN0YW5jZXMuICovXHJcbiAgICBnZXQgc3lzdGVtcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpc1tcInN5c3RlbU1hbmFnZXJcIl0uX3N5c3RlbXM7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IEdhbWVTeXN0ZW0gaW5zdGFuY2UuICovXHJcbiAgICBnZXQgZ2FtZVN5c3RlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTeXN0ZW0oZWNzeV9iYWJ5bG9uXzEuR2FtZVN5c3RlbSk7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IHNpbmdsZXRvbiBvZiBHYW1lIGluc3RhbmNlLiAqL1xyXG4gICAgc3RhdGljIGluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuX2dhbWUgfHwgKHRoaXMuX2dhbWUgPSBuZXcgR2FtZSgpKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgZ2FtZSB3aXRoIGFuIGVtcHR5IHNjZW5lLlxyXG4gICAgICogQHBhcmFtIGNhbnZhcyBDYW52YXMgZm9yIHdlYmdsIGNvbnRleHRcclxuICAgICAqIEBwYXJhbSBzeXN0ZW1zIFN5c3RlbXMgZ29pbmcgdG8gdXNlZCBiZXNpZGVzIEdhbWVTeXN0ZW0sIFRyYW5zZm9ybVN5c3RlbSBhbmQgQ2FtZXJhU3lzdGVtXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KGNhbnZhcywgc3lzdGVtcykge1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLnJlZ2lzdGVyU3lzdGVtKGVjc3lfYmFieWxvbl8xLkdhbWVTeXN0ZW0pXHJcbiAgICAgICAgICAgIC5yZWdpc3RlclN5c3RlbShlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm1TeXN0ZW0pXHJcbiAgICAgICAgICAgIC5yZWdpc3RlclN5c3RlbShlY3N5X2JhYnlsb25fMS5DYW1lcmFTeXN0ZW0pO1xyXG4gICAgICAgIHN5c3RlbXMuZm9yRWFjaChzeXN0ZW0gPT4gdGhpcy5yZWdpc3RlclN5c3RlbShzeXN0ZW0pKTtcclxuICAgICAgICB0aGlzLmdhbWVTeXN0ZW0uc3RhcnQoY2FudmFzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKiBDcmVhdGUgYW4gZW50aXR5IHdpdGggVHJhbnNmb3JtIGNvbXBvbmVudC4gKi9cclxuICAgIGNyZWF0ZUVudGl0eSgpIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSk7XHJcbiAgICB9XHJcbiAgICAvKiogQ3JlYXRlIGEgc2NlbmUgZW50aXR5LiAqL1xyXG4gICAgY3JlYXRlU2NlbmUoY29sb3IpIHtcclxuICAgICAgICByZXR1cm4gc3VwZXIuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlNjZW5lLCB7IGNvbG9yOiBjb2xvciB9KTtcclxuICAgIH1cclxuICAgIC8qKiBTaG93IEJhYnlsb24uanMgaW5zZXBjdG9yICovXHJcbiAgICBzaG93RGVidWdnZXIoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3lzdGVtLmFjdGl2ZVNjZW5lLmRlYnVnTGF5ZXIuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuR2FtZSA9IEdhbWU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2FtZXJhID0gdm9pZCAwO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoQ2FtZXJhLCB7IHBvaW50ZXJMb2NrOiB0cnVlIH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIENhbWVyYSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMb2NrIHBvaW50ZXIgd2hlbiB1c2luZyB0aGUgY2FtZXJhLlxyXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJfTG9ja19BUElcclxuICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucG9pbnRlckxvY2sgPSBmYWxzZTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkNhbWVyYSA9IENhbWVyYTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5JbnB1dCA9IGV4cG9ydHMuSW5wdXRUeXBlcyA9IHZvaWQgMDtcclxudmFyIElucHV0VHlwZXM7XHJcbihmdW5jdGlvbiAoSW5wdXRUeXBlcykge1xyXG4gICAgSW5wdXRUeXBlc1tcIktleWJvYXJkXCJdID0gXCJLZXlib2FyZFwiO1xyXG59KShJbnB1dFR5cGVzID0gZXhwb3J0cy5JbnB1dFR5cGVzIHx8IChleHBvcnRzLklucHV0VHlwZXMgPSB7fSkpO1xyXG4vKipcclxuICogQGV4YW1wbGUgS2V5Ym9hcmRcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoSW5wdXQsIHsgb25LZXk6IG9uS2V5IH0pO1xyXG4gKiBmdW5jdGlvbiBvbktleShrZXksIGRvd24sIHVwKSB7XHJcbiAqICAgaWYgKGRvd24pIGNvbnNvbGUubG9nKGtleSArIFwiIGlzIHByZXNzaW5nLlwiKTtcclxuICogfVxyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIElucHV0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCBcIktleWJvYXJkXCIgKi9cclxuICAgICAgICB0aGlzLnR5cGUgPSBJbnB1dFR5cGVzLktleWJvYXJkO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuSW5wdXQgPSBJbnB1dDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MaWdodCA9IGV4cG9ydHMuTGlnaHRUeXBlcyA9IHZvaWQgMDtcclxuY29uc3QgbWF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0aFV0aWxzXCIpO1xyXG52YXIgTGlnaHRUeXBlcztcclxuKGZ1bmN0aW9uIChMaWdodFR5cGVzKSB7XHJcbiAgICBMaWdodFR5cGVzW1wiUG9pbnRcIl0gPSBcIlBvaW50XCI7XHJcbiAgICBMaWdodFR5cGVzW1wiRGlyZWN0aW9uYWxcIl0gPSBcIkRpcmVjdGlvbmFsXCI7XHJcbiAgICBMaWdodFR5cGVzW1wiU3BvdFwiXSA9IFwiU3BvdFwiO1xyXG4gICAgTGlnaHRUeXBlc1tcIkhlbWlzcGhlcmljXCJdID0gXCJIZW1pc3BoZXJpY1wiO1xyXG59KShMaWdodFR5cGVzID0gZXhwb3J0cy5MaWdodFR5cGVzIHx8IChleHBvcnRzLkxpZ2h0VHlwZXMgPSB7fSkpO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTGlnaHQsIHsgY29sb3I6IHsgZGlmZnVzZTogXCIjQUFGRkFBXCIgfSB9KTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChMaWdodCwgeyB0eXBlOiBMaWdodFR5cGVzLlBvaW50LCBpbnRlbnNpdHk6IDIgfSk7XHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTGlnaHQsIHsgdHlwZTogTGlnaHRUeXBlcy5EaXJlY3Rpb25hbCwgZGlyZWN0aW9uOiB7IHg6IDAsIHk6IDAsIHo6IDEgfSB9KTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChMaWdodCwgeyB0eXBlOiBMaWdodFR5cGVzLlNwb3QsIGRpcmVjdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAxIH0sIGFuZ2xlOiAzMCwgZXhwb25lbnQ6IDIgfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuY2xhc3MgTGlnaHQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqIEBkZWZhdWx0IFwiSGVtaXNwaGVyaWNcIiAqL1xyXG4gICAgICAgIHRoaXMudHlwZSA9IExpZ2h0VHlwZXMuSGVtaXNwaGVyaWM7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHNlZSBodHRwczovL2RvYy5iYWJ5bG9uanMuY29tL2FwaS9jbGFzc2VzL2JhYnlsb24uc2hhZG93bGlnaHQjZGlyZWN0aW9uXHJcbiAgICAgICAgICogQGRlZmF1bHQgMCwwLDBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG1hdGhVdGlsc18xLnh5eigpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuTGlnaHQgPSBMaWdodDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5NYXRlcmlhbCA9IHZvaWQgMDtcclxuY29uc3QgbWF0ZXJpYWxVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGVyaWFsVXRpbHNcIik7XHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoKS5hZGRDb21wb25lbnQoTWF0ZXJpYWwsIHtcclxuICogICAgYWxwaGE6IDAuNyxcclxuICogICAgY29sb3I6IHsgZGlmZnVzZTogXCIjRTc0QzNDXCIgfVxyXG4gKiB9KTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoKS5hZGRDb21wb25lbnQoTWF0ZXJpYWwsIHtcclxuICogICAgdGV4dHVyZToge1xyXG4gKiAgICAgIGRpZmZ1c2U6IHsgdXJsOiBcIlBBVEhfVE9fVEVYVFVSRVwiLCB1U2NhbGU6IDQsIHZTY2FsZTogNCB9XHJcbiAqICAgIH1cclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuY2xhc3MgTWF0ZXJpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqIEBkZWZhdWx0IHsgZGlmZnVzZTogXCIjZmZmZmZmXCIgfSAqL1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBtYXRlcmlhbFV0aWxzXzEubWF0ZXJpYWxDb2xvckhleCgpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuTWF0ZXJpYWwgPSBNYXRlcmlhbDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5NZXNoID0gZXhwb3J0cy5NZXNoVHlwZXMgPSB2b2lkIDA7XHJcbnZhciBNZXNoVHlwZXM7XHJcbihmdW5jdGlvbiAoTWVzaFR5cGVzKSB7XHJcbiAgICBNZXNoVHlwZXNbXCJCb3hcIl0gPSBcIkJveFwiO1xyXG4gICAgTWVzaFR5cGVzW1wiUGxhbmVcIl0gPSBcIlBsYW5lXCI7XHJcbiAgICBNZXNoVHlwZXNbXCJTcGhlcmVcIl0gPSBcIlNwaGVyZVwiO1xyXG4gICAgTWVzaFR5cGVzW1wiR3JvdW5kXCJdID0gXCJHcm91bmRcIjtcclxuICAgIE1lc2hUeXBlc1tcIlVybFwiXSA9IFwiVXJsXCI7XHJcbn0pKE1lc2hUeXBlcyA9IGV4cG9ydHMuTWVzaFR5cGVzIHx8IChleHBvcnRzLk1lc2hUeXBlcyA9IHt9KSk7XHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoKTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoLCB7IHR5cGU6IE1lc2hUeXBlcy5Hcm91bmQsIG9wdGlvbnM6IHsgd2lkdGg6IDIsIGhlaWdodDogMiB9IH0pO1xyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KE1lc2gsIHsgdHlwZTogTWVzaFR5cGVzLlNwaGVyZSwgb3B0aW9uczogeyBkaWFtZXRlcjogMiB9IH0pO1xyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KE1lc2gsIHsgdHlwZTogTWVzaFR5cGVzLlVybCwgdXJsOiBcIlBBVEhfVE9fTUVTSFwiIH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIE1lc2gge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqIEBkZWZhdWx0IFwiQm94XCIgKi9cclxuICAgICAgICB0aGlzLnR5cGUgPSBNZXNoVHlwZXMuQm94O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuTWVzaCA9IE1lc2g7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUGFydGljbGUgPSBleHBvcnRzLlBhcnRpY2xlVHlwZXMgPSB2b2lkIDA7XHJcbmNvbnN0IG1hdGhVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGhVdGlsc1wiKTtcclxudmFyIFBhcnRpY2xlVHlwZXM7XHJcbihmdW5jdGlvbiAoUGFydGljbGVUeXBlcykge1xyXG4gICAgUGFydGljbGVUeXBlc1tcIlBvaW50XCJdID0gXCJQb2ludFwiO1xyXG4gICAgUGFydGljbGVUeXBlc1tcIkJveFwiXSA9IFwiQm94XCI7XHJcbiAgICBQYXJ0aWNsZVR5cGVzW1wiU3BoZXJlXCJdID0gXCJTcGhlcmVcIjtcclxuICAgIFBhcnRpY2xlVHlwZXNbXCJEaXJlY3RlZFNwaGVyZVwiXSA9IFwiRGlyZWN0ZWRTcGhlcmVcIjtcclxuICAgIFBhcnRpY2xlVHlwZXNbXCJIZW1pc3BoZXJlXCJdID0gXCJIZW1pc3BoZXJlXCI7XHJcbiAgICBQYXJ0aWNsZVR5cGVzW1wiQ3lsaW5kZXJcIl0gPSBcIkN5bGluZGVyXCI7XHJcbiAgICBQYXJ0aWNsZVR5cGVzW1wiRGlyZWN0ZWRDeWxpbmRlclwiXSA9IFwiRGlyZWN0ZWRDeWxpbmRlclwiO1xyXG4gICAgUGFydGljbGVUeXBlc1tcIkNvbmVcIl0gPSBcIkNvbmVcIjtcclxufSkoUGFydGljbGVUeXBlcyA9IGV4cG9ydHMuUGFydGljbGVUeXBlcyB8fCAoZXhwb3J0cy5QYXJ0aWNsZVR5cGVzID0ge30pKTtcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KFBhcnRpY2xlLCB7XHJcbiAqICAgIGVtaXR0ZXI6IHsgeDogMCwgeTogMCwgejogMSB9LFxyXG4gKiAgICB0ZXh0dXJlOiB7XHJcbiAqICAgICAgZGlmZnVzZTogeyB1cmw6IFwiUEFUSF9UT19QQVJUSUNMRV9URVhUVVJFXCIgfVxyXG4gKiAgICB9XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIFBhcnRpY2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCBcIlBvaW50XCIgKi9cclxuICAgICAgICB0aGlzLnR5cGUgPSBQYXJ0aWNsZVR5cGVzLlBvaW50O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kb2MuYmFieWxvbmpzLmNvbS9hcGkvY2xhc3Nlcy9iYWJ5bG9uLnBhcnRpY2xlc3lzdGVtI2NvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQGRlZmF1bHQgMTAwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jYXBhY2l0eSA9IDEwMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vYXBpL2NsYXNzZXMvYmFieWxvbi5wYXJ0aWNsZXN5c3RlbSNlbWl0dGVyXHJcbiAgICAgICAgICogQGRlZmF1bHQgMCwwLDBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBtYXRoVXRpbHNfMS54eXooKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbWVtYmVyb2YgUG9pbnQsIEJveCwgRGlyZWN0ZWRTcGhlcmUsIEN5bGluZGVyXHJcbiAgICAgICAgICogQGRlZmF1bHQgMCwwLDBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbjEgPSBtYXRoVXRpbHNfMS54eXooKTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbWVtYmVyb2YgUG9pbnQsIEJveCwgRGlyZWN0ZWRTcGhlcmUsIEN5bGluZGVyXHJcbiAgICAgICAgICogQGRlZmF1bHQgMTAsMTAsMTBcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRpcmVjdGlvbjIgPSBtYXRoVXRpbHNfMS54eXooMTAsIDEwLCAxMCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJveFxyXG4gICAgICAgICAqIEBkZWZhdWx0IDAsMCwwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5taW5FbWl0Qm94ID0gbWF0aFV0aWxzXzEueHl6KCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG1lbWJlcm9mIEJveFxyXG4gICAgICAgICAqIEBkZWZhdWx0IDAsMCwwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tYXhFbWl0Qm94ID0gbWF0aFV0aWxzXzEueHl6KCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5QYXJ0aWNsZSA9IFBhcnRpY2xlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlNjZW5lID0gdm9pZCAwO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoU2NlbmUsIHsgY29sb3I6IHsgY2xlYXI6IFwiMTIzQUJDRkZcIiB9IH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIFNjZW5lIHtcclxufVxyXG5leHBvcnRzLlNjZW5lID0gU2NlbmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVHJhbnNmb3JtID0gdm9pZCAwO1xyXG5jb25zdCBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRoVXRpbHNcIik7XHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZW50aXR5LmFkZENvbXBvbmVudChUcmFuc2Zvcm0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIFRyYW5zZm9ybSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKiogQGRlZmF1bHQgMCwwLDAgKi9cclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbWF0aFV0aWxzXzEueHl6KCk7XHJcbiAgICAgICAgLyoqIEBkZWZhdWx0IDAsMCwwICovXHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IG1hdGhVdGlsc18xLnh5eigpO1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCAxLDEsMSAqL1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBtYXRoVXRpbHNfMS54eXooMSwgMSwgMSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UcmFuc2Zvcm0gPSBUcmFuc2Zvcm07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1NjZW5lXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1RyYW5zZm9ybVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9DYW1lcmFcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWVzaFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9MaWdodFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9NYXRlcmlhbFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9QYXJ0aWNsZVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9JbnB1dFwiKSwgZXhwb3J0cyk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1NjZW5lQ29tcG9uZW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1NjZW5lQ29sb3JQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1NjZW5lVGV4dHVyZVByb3BlcnRpZXNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vT2JqZWN0Q29tcG9uZW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1hZWlByb3BlcnRpZXNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWVzaE9wdGlvbnNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vQ29sb3JDb21wb25lbnRcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vVGV4dHVyZUNvbXBvbmVudFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9UZXh0dXJlQXR0cmlidXRlc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9NYXRlcmlhbENvbG9yUHJvcGVydGllc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9NYXRlcmlhbFRleHR1cmVQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0xpZ2h0Q29sb3JQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1BhcnRpY2xlVGV4dHVyZVByb3BlcnRpZXNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vUGFydGljbGVDb2xvclByb3BlcnRpZXNcIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zeXN0ZW1zL2luZGV4XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvaW5kZXhcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29tcG9uZW50cy90eXBlcy9pbmRleFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlscy9pbmRleFwiKSwgZXhwb3J0cyk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ2FtZXJhU3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBCQUJZTE9OID0gcmVxdWlyZShcImJhYnlsb25qc1wiKTtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9pbmRleFwiKTtcclxuY29uc3QgZ2FtZVV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2FtZVV0aWxzXCIpO1xyXG5jb25zdCBvYmplY3RVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL29iamVjdFV0aWxzXCIpO1xyXG5jb25zdCBHYW1lU3lzdGVtXzEgPSByZXF1aXJlKFwiLi9HYW1lU3lzdGVtXCIpO1xyXG4vKiogU3lzdGVtIGZvciBDYW1lcmEgY29tcG9uZW50ICovXHJcbmxldCBDYW1lcmFTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBDYW1lcmFTeXN0ZW0gZXh0ZW5kcyBlY3N5XzEuU3lzdGVtIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgLyoqIDxCQUJZTE9OLlNjZW5lLnVpZCwgQ2FtZXJhIGNvbXBvbmVudD4gKi9cclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBpbml0KCkge1xyXG4gICAgICAgICAgICBnYW1lVXRpbHNfMS5nZXRTeXN0ZW0odGhpcywgR2FtZVN5c3RlbV8xLkdhbWVTeXN0ZW0pLm9uU2NlbmVTd2l0Y2hlZC5hZGQoc2NlbmUgPT4gdGhpcy5fdXBkYXRlQ29udHJvbChzY2VuZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9wb2ludGVyTG9jayA9IHRoaXMuX3BvaW50ZXJMb2NrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmNhbWVyYS5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjYW1lcmEgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuQ2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIGNhbWVyYS5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEub2JqZWN0ID0gbmV3IEJBQllMT04uRnJlZUNhbWVyYShcIlwiLCBCQUJZTE9OLlZlY3RvcjMuWmVybygpLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0oZW50aXR5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbWVyYXMuc2V0KHNjZW5lLnVpZCwgY2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbnRyb2woc2NlbmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmNhbWVyYS5yZW1vdmVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhbWVyYSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5DYW1lcmEpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjZW5lID0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgY2FtZXJhLnNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNvbnRyb2woc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FtZXJhcy5oYXMoc2NlbmUudWlkKSAmJiB0aGlzLl9jYW1lcmFzLmRlbGV0ZShzY2VuZS51aWQpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS5kaXNwb3NlT2JqZWN0KGNhbWVyYSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlQ29udHJvbCh0YXJnZXRTY2VuZSkge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0U2NlbmUudWlkID09PSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzKS51aWQpIHtcclxuICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmdldFNjZW5lcyh0aGlzKS5mb3JFYWNoKHNjZW5lID0+IHRoaXMuX3JlbW92ZUNvbnRyb2woc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgIGxldCBjYW1lcmEgPSB0aGlzLl9jYW1lcmFzLmdldCh0YXJnZXRTY2VuZS51aWQpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLm9iamVjdC5hdHRhY2hDb250cm9sKGdhbWVVdGlsc18xLmdldFJlbmRlcmluZ0NhbnZhcyh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBjYW1lcmEucG9pbnRlckxvY2sgPyB0YXJnZXRTY2VuZS5vblBvaW50ZXJPYnNlcnZhYmxlLmFkZCh0aGlzLl9wb2ludGVyTG9jaykgOiBkb2N1bWVudC5leGl0UG9pbnRlckxvY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfcmVtb3ZlQ29udHJvbChzY2VuZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFzLmZvckVhY2goKGNhbWVyYSwgc2NlbmVVSUQpID0+IHNjZW5lVUlEID09PSBzY2VuZS51aWQgJiYgY2FtZXJhLm9iamVjdC5kZXRhY2hDb250cm9sKGdhbWVVdGlsc18xLmdldFJlbmRlcmluZ0NhbnZhcyh0aGlzKSkpO1xyXG4gICAgICAgICAgICBzY2VuZS5vblBvaW50ZXJPYnNlcnZhYmxlLnJlbW92ZUNhbGxiYWNrKHRoaXMuX3BvaW50ZXJMb2NrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3BvaW50ZXJMb2NrKHBvaW50ZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHBvaW50ZXJJbmZvLmV2ZW50LnR5cGUgPT09IFwicG9pbnRlcmRvd25cIiAmJiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50IHx8IGdhbWVVdGlsc18xLmdldFJlbmRlcmluZ0NhbnZhcyh0aGlzKS5yZXF1ZXN0UG9pbnRlckxvY2soKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIENhbWVyYVN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIGNhbWVyYTogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5DYW1lcmFdLCBsaXN0ZW46IHsgYWRkZWQ6IHRydWUsIHJlbW92ZWQ6IHRydWUgfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBDYW1lcmFTeXN0ZW07XHJcbn0pKCk7XHJcbmV4cG9ydHMuQ2FtZXJhU3lzdGVtID0gQ2FtZXJhU3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkdhbWVTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBCQUJZTE9OR1VJID0gcmVxdWlyZShcImJhYnlsb25qcy1ndWlcIik7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvaW5kZXhcIik7XHJcbmNvbnN0IHdvcmxkVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy93b3JsZFV0aWxzXCIpO1xyXG5jb25zdCBvYmplY3RVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL29iamVjdFV0aWxzXCIpO1xyXG5jb25zdCBtYXRlcmlhbFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0ZXJpYWxVdGlsc1wiKTtcclxuLyoqIENvcmUgc3lzdGVtIG9mIGVjc3ktYmFieWxvbi4gKi9cclxubGV0IEdhbWVTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBHYW1lU3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIC8qKiA8U2NlbmUgVUlELCBCQUJZTE9OLkFzc2V0c01hbmFnZXI+ICovXHJcbiAgICAgICAgICAgIHRoaXMuX2Fzc2V0TWFuYWdlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIC8qKiBPYnNlcnZhYmxlIGV2ZW50IHdoZW4gYWN0aXZlIHNjZW5lIGlzIHN3aXRjaGVkLiAqL1xyXG4gICAgICAgICAgICB0aGlzLm9uU2NlbmVTd2l0Y2hlZCA9IG5ldyBCQUJZTE9OLk9ic2VydmFibGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEdldCBjYW52YXMgdXNlZCBmb3IgcmVuZGVyaW5nLiAqL1xyXG4gICAgICAgIGdldCByZW5kZXJpbmdDYW52YXMoKSB7IHJldHVybiB0aGlzLl9lbmdpbmUuZ2V0UmVuZGVyaW5nQ2FudmFzKCk7IH1cclxuICAgICAgICAvKiogR2V0IGFsbCBzY2VuZXMgaW4gZW5naW5lLiAqL1xyXG4gICAgICAgIGdldCBzY2VuZXMoKSB7IHJldHVybiB0aGlzLl9lbmdpbmUuc2NlbmVzOyB9XHJcbiAgICAgICAgLyoqIEdldCBhY3RpdmUgc2NlbmUuICovXHJcbiAgICAgICAgZ2V0IGFjdGl2ZVNjZW5lKCkgeyByZXR1cm4gdGhpcy5fYWN0aXZlU2NlbmU7IH1cclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGluaXQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlciA9IHRoaXMuX3JlbmRlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5zY2VuZS5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5TY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBzY2VuZS5vYmplY3QgPSBuZXcgQkFCWUxPTi5TY2VuZSh0aGlzLl9lbmdpbmUsIHNjZW5lLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZW5naW5lLnNjZW5lcy5sZW5ndGggPT09IDEgJiYgKHRoaXMuX2FjdGl2ZVNjZW5lID0gc2NlbmUub2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjZW5lKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXNzZXRNYW5hZ2VyIGZvciBlYWNoIHNjZW5lcyBcclxuICAgICAgICAgICAgICAgIGxldCBhc3NldE1hbmFnZXIgPSBuZXcgQkFCWUxPTi5Bc3NldHNNYW5hZ2VyKHNjZW5lLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBhc3NldE1hbmFnZXIudXNlRGVmYXVsdExvYWRpbmdTY3JlZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Fzc2V0TWFuYWdlcnMuc2V0KHNjZW5lLm9iamVjdC51aWQsIGFzc2V0TWFuYWdlcik7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVTa3lib3goc2NlbmUub2JqZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5zY2VuZS5jaGFuZ2VkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2NlbmUoZW50aXR5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5zY2VuZS5yZW1vdmVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjZW5lID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLlNjZW5lKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEuZGlzcG9zZU9iamVjdChzY2VuZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlU2NlbmUoZW50aXR5KSB7XHJcbiAgICAgICAgICAgIGxldCBzY2VuZSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5TY2VuZSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gc2NlbmUpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0dXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsVXRpbHNfMS51cGRhdGVUZXh0dXJlKHNjZW5lLCBzY2VuZS50ZXh0dXJlLCB0aGlzLmdldEFzc2V0TWFuYWdlcihlbnRpdHkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbG9yKHNjZW5lLCBzY2VuZS5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0VmFsdWUoc2NlbmUsIHByb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlQ29sb3Ioc2NlbmUsIGNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjbGVhclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5vYmplY3RbYCR7cHJvcH1Db2xvcmBdID0gbWF0ZXJpYWxVdGlsc18xLmhleFRvQ29sb3I0KGNvbG9yW3Byb3BdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUub2JqZWN0W2Ake3Byb3B9Q29sb3JgXSA9IG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yMyhjb2xvcltwcm9wXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0YXJ0IGdhbWUgc3lzdGVtIGluIHRoZSB3b3JsZCBjYW4gYmUgdXNlZCBieSBvdGhlciBzeXN0ZW1zICYgY29tcG9uZW50cy5cclxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vYXBpL2NsYXNzZXMvYmFieWxvbi5lbmdpbmUjY29uc3RydWN0b3JcclxuICAgICAgICAgKiBAcGFyYW0gY2FudmFzIFdlYkdMIGNvbnRleHQgdG8gYmUgdXNlZCBmb3IgcmVuZGVyaW5nXHJcbiAgICAgICAgICogQHBhcmFtIGFudGlhbGlhcyBkZWZpbmVzIGVuYWJsZSBhbnRpYWxpYXNpbmcgKGRlZmF1bHQ6IGZhbHNlKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIEBzZWUgaHR0cHM6Ly9kb2MuYmFieWxvbmpzLmNvbS9hcGkvaW50ZXJmYWNlcy9iYWJ5bG9uLmVuZ2luZW9wdGlvbnNcclxuICAgICAgICAgKiBAcGFyYW0gYWRhcHRUb0RldmljZVJhdGlvIGRlZmluZXMgd2hldGhlciB0byBhZGFwdCB0byB0aGUgZGV2aWNlJ3Mgdmlld3BvcnQgY2hhcmFjdGVyaXN0aWNzIChkZWZhdWx0OiBmYWxzZSlcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGFydChjYW52YXMsIGFudGlhbGlhcywgb3B0aW9ucywgYWRhcHRUb0RldmljZVJhdGlvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZ2luZSA9IG5ldyBCQUJZTE9OLkVuZ2luZShjYW52YXMsIGFudGlhbGlhcywgb3B0aW9ucywgYWRhcHRUb0RldmljZVJhdGlvKTtcclxuICAgICAgICAgICAgdGhpcy5fZW5naW5lLnJ1blJlbmRlckxvb3AodGhpcy5fcmVuZGVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN3aXRjaCB0byBhIHNjZW5lIGJ5IGdpdmVuIHNjZW5lIGVudGl0eS5cclxuICAgICAgICAgKiBAcGFyYW0gc2NlbmUgU2NlbmUgZW50aXR5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3dpdGNoU2NlbmUoc2NlbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlU2NlbmUgPSBzY2VuZS5nZXRDb21wb25lbnQoaW5kZXhfMS5TY2VuZSkub2JqZWN0O1xyXG4gICAgICAgICAgICB0aGlzLm9uU2NlbmVTd2l0Y2hlZC5ub3RpZnlPYnNlcnZlcnModGhpcy5fYWN0aXZlU2NlbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHNjZW5lIEFzc2V0TWFuYWdlciBvciByZXR1cm4gQXNzZXRNYW5hZ2VyIGluIGFjdGl2ZSBzY2VuZS5cclxuICAgICAgICAgKiBAcGFyYW0gc2NlbmUgU2NlbmUgZW50aXR5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0QXNzZXRNYW5hZ2VyKHNjZW5lKSB7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Fzc2V0TWFuYWdlcnMuZ2V0KHNjZW5lLmdldENvbXBvbmVudChpbmRleF8xLlNjZW5lKS5vYmplY3QudWlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hc3NldE1hbmFnZXJzLmdldCh0aGlzLl9hY3RpdmVTY2VuZS51aWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExvZyBhIG1lc3NhZ2UgdG8gdGhlIHNjcmVlblxyXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIHRleHQgdG8gZGlzcGxheSBpbiBhIHN0YWNrIHBhbmVsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbG9nTWVzc2FnZShtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2cnLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9tZXNzYWdlcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzc2FnZXMgPSBjcmVhdGVUZXh0UGFuZWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tZXNzYWdlcy5hZGRDb250cm9sKGNyZWF0ZVRleHRCbG9jayhtZXNzYWdlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9yZW5kZXIoKSB7XHJcbiAgICAgICAgICAgIHdvcmxkVXRpbHNfMS5nZXRXb3JsZCh0aGlzKS5leGVjdXRlKHRoaXMuX2VuZ2luZS5nZXREZWx0YVRpbWUoKSwgcGVyZm9ybWFuY2Uubm93KCkpO1xyXG4gICAgICAgICAgICB3b3JsZFV0aWxzXzEuZ2V0V29ybGQodGhpcykuZW5hYmxlZCAmJiB0aGlzLl9hY3RpdmVTY2VuZS5yZW5kZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgR2FtZVN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIHNjZW5lOiB7IGNvbXBvbmVudHM6IFtpbmRleF8xLlNjZW5lXSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBjaGFuZ2VkOiBbaW5kZXhfMS5TY2VuZV0gfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBHYW1lU3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLkdhbWVTeXN0ZW0gPSBHYW1lU3lzdGVtO1xyXG5mdW5jdGlvbiBjcmVhdGVUZXh0UGFuZWwoKSB7XHJcbiAgICB2YXIgYWR2YW5jZWRUZXh0dXJlID0gQkFCWUxPTkdVSS5BZHZhbmNlZER5bmFtaWNUZXh0dXJlLkNyZWF0ZUZ1bGxzY3JlZW5VSShcIlVJXCIpO1xyXG4gICAgdmFyIGdyaWQgPSBuZXcgQkFCWUxPTkdVSS5HcmlkKCk7XHJcbiAgICBncmlkLmFkZENvbHVtbkRlZmluaXRpb24oMSAvIDMpO1xyXG4gICAgZ3JpZC5hZGRDb2x1bW5EZWZpbml0aW9uKDEgLyAzKTtcclxuICAgIGdyaWQuYWRkQ29sdW1uRGVmaW5pdGlvbigxIC8gMyk7XHJcbiAgICBhZHZhbmNlZFRleHR1cmUuYWRkQ29udHJvbChncmlkKTtcclxuICAgIHZhciBzdGFjayA9IG5ldyBCQUJZTE9OR1VJLlN0YWNrUGFuZWwoKTtcclxuICAgIHN0YWNrLnZlcnRpY2FsQWxpZ25tZW50ID0gQkFCWUxPTkdVSS5Db250cm9sLlZFUlRJQ0FMX0FMSUdOTUVOVF9CT1RUT007XHJcbiAgICBncmlkLmFkZENvbnRyb2woc3RhY2ssIDAsIDIpO1xyXG4gICAgcmV0dXJuIHN0YWNrO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVRleHRCbG9jayh0ZXh0LCBjb2xvciA9IFwicmVkXCIpIHtcclxuICAgIHZhciB0ZXh0QmxvY2sgPSBuZXcgQkFCWUxPTkdVSS5UZXh0QmxvY2soKTtcclxuICAgIHRleHRCbG9jay50ZXh0ID0gdGV4dDtcclxuICAgIHRleHRCbG9jay5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGV4dEJsb2NrLmZvbnRTaXplID0gMTI7XHJcbiAgICB0ZXh0QmxvY2sudGV4dEhvcml6b250YWxBbGlnbm1lbnQgPSBCQUJZTE9OR1VJLkNvbnRyb2wuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVDtcclxuICAgIHRleHRCbG9jay5oZWlnaHQgPSBcIjE1cHhcIjtcclxuICAgIHJldHVybiB0ZXh0QmxvY2s7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlU2t5Ym94KHNjZW5lKSB7XHJcbiAgICB2YXIgc2t5Ym94ID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVCb3goXCJza3lCb3hcIiwgeyBzaXplOiAxMDAwLjAgfSwgc2NlbmUpO1xyXG4gICAgdmFyIHNreWJveE1hdGVyaWFsID0gbmV3IEJBQllMT04uU3RhbmRhcmRNYXRlcmlhbChcInNreUJveFwiLCBzY2VuZSk7XHJcbiAgICBza3lib3hNYXRlcmlhbC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcclxuICAgIHNreWJveE1hdGVyaWFsLnJlZmxlY3Rpb25UZXh0dXJlID0gbmV3IEJBQllMT04uQ3ViZVRleHR1cmUoXCJ0ZXh0dXJlcy9za3lib3hcIiwgc2NlbmUpO1xyXG4gICAgc2t5Ym94TWF0ZXJpYWwucmVmbGVjdGlvblRleHR1cmUuY29vcmRpbmF0ZXNNb2RlID0gQkFCWUxPTi5UZXh0dXJlLlNLWUJPWF9NT0RFO1xyXG4gICAgc2t5Ym94TWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gbmV3IEJBQllMT04uQ29sb3IzKDAsIDAsIDApO1xyXG4gICAgc2t5Ym94TWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IG5ldyBCQUJZTE9OLkNvbG9yMygwLCAwLCAwKTtcclxuICAgIHNreWJveC5tYXRlcmlhbCA9IHNreWJveE1hdGVyaWFsO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuSW5wdXRTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvaW5kZXhcIik7XHJcbmNvbnN0IGdhbWVVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL2dhbWVVdGlsc1wiKTtcclxuY29uc3QgR2FtZVN5c3RlbV8xID0gcmVxdWlyZShcIi4vR2FtZVN5c3RlbVwiKTtcclxuLyoqIFN5c3RlbSBmb3IgSW5wdXQgY29tcG9uZW50ICovXHJcbmxldCBJbnB1dFN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKCgpID0+IHtcclxuICAgIGNsYXNzIElucHV0U3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgZ2FtZVV0aWxzXzEuZ2V0U3lzdGVtKHRoaXMsIEdhbWVTeXN0ZW1fMS5HYW1lU3lzdGVtKS5vblNjZW5lU3dpdGNoZWQuYWRkKHNjZW5lID0+IHRoaXMuX3VwZGF0ZU9uS2V5KHNjZW5lKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uS2V5ID0gdGhpcy5fb25LZXkuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBleGVjdXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuaW5wdXQuYWRkZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuSW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjZW5lID0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgaW5wdXQuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpbnB1dC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbnB1dHMuaGFzKHNjZW5lLnVpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0cy5zZXQoc2NlbmUudWlkLCBpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVPbktleShzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuaW5wdXQucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5JbnB1dCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2NlbmUgPSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBpbnB1dC5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGlucHV0LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faW5wdXRzLmhhcyhzY2VuZS51aWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dHMuZGVsZXRlKHNjZW5lLnVpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVPbktleShzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlT25LZXkodGFyZ2V0U2NlbmUpIHtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFNjZW5lLnVpZCA9PT0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcykudWlkKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5nZXRTY2VuZXModGhpcykuZm9yRWFjaChzY2VuZSA9PiB0aGlzLl9yZW1vdmVPbktleShzY2VuZSkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSB0aGlzLl9pbnB1dHMuZ2V0KHRhcmdldFNjZW5lLnVpZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dC5vbktleSAmJiB0YXJnZXRTY2VuZS5vbktleWJvYXJkT2JzZXJ2YWJsZS5hZGQodGhpcy5fb25LZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9yZW1vdmVPbktleShzY2VuZSkge1xyXG4gICAgICAgICAgICBzY2VuZS5vbktleWJvYXJkT2JzZXJ2YWJsZS5yZW1vdmVDYWxsYmFjayh0aGlzLl9vbktleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9vbktleShrZXlJbmZvKSB7XHJcbiAgICAgICAgICAgIC8vIEJBQllMT04uS2V5Ym9hcmRFdmVudFR5cGVzLktFWURPV04gPSAxLCBCQUJZTE9OLktleWJvYXJkRXZlbnRUeXBlcy5LRVlVUCA9IDJcclxuICAgICAgICAgICAgdGhpcy5faW5wdXQub25LZXkuY2FsbCh0aGlzLl9pbnB1dCwga2V5SW5mby5ldmVudC5rZXksIGtleUluZm8udHlwZSA9PT0gMSwga2V5SW5mby50eXBlID09PSAyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgSW5wdXRTeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICBpbnB1dDogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5JbnB1dF0sIGxpc3RlbjogeyBhZGRlZDogdHJ1ZSwgcmVtb3ZlZDogdHJ1ZSB9IH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIElucHV0U3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLklucHV0U3lzdGVtID0gSW5wdXRTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTGlnaHRTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nYW1lVXRpbHNcIik7XHJcbmNvbnN0IG1hdGVyaWFsVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRlcmlhbFV0aWxzXCIpO1xyXG5jb25zdCBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRoVXRpbHNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbi8qKiBTeXN0ZW0gZm9yIExpZ2h0IGNvbXBvbmVudCAqL1xyXG5sZXQgTGlnaHRTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBMaWdodFN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmxpZ2h0LmFkZGVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpZ2h0ID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLkxpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMobGlnaHQuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIGxpZ2h0LnNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5MaWdodFR5cGVzLlBvaW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5vYmplY3QgPSBuZXcgQkFCWUxPTi5Qb2ludExpZ2h0KGxpZ2h0LnR5cGUsIEJBQllMT04uVmVjdG9yMy5aZXJvKCksIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLkxpZ2h0VHlwZXMuRGlyZWN0aW9uYWw6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Lm9iamVjdCA9IG5ldyBCQUJZTE9OLkRpcmVjdGlvbmFsTGlnaHQobGlnaHQudHlwZSwgZGlyZWN0aW9uLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5MaWdodFR5cGVzLlNwb3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Lm9iamVjdCA9IG5ldyBCQUJZTE9OLlNwb3RMaWdodChsaWdodC50eXBlLCBCQUJZTE9OLlZlY3RvcjMuWmVybygpLCBkaXJlY3Rpb24sIG1hdGhVdGlsc18xLmRlZ3JlZVRvUmFkaWFucyhsaWdodC5hbmdsZSksIGxpZ2h0LmV4cG9uZW50LCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Lm9iamVjdCA9IG5ldyBCQUJZTE9OLkhlbWlzcGhlcmljTGlnaHQoaW5kZXhfMS5MaWdodFR5cGVzLkhlbWlzcGhlcmljLCBkaXJlY3Rpb24sIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVMaWdodChsaWdodCk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0oZW50aXR5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5saWdodC5jaGFuZ2VkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGlnaHQoZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLkxpZ2h0KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubGlnaHQucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEuZGlzcG9zZU9iamVjdChlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTGlnaHQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVMaWdodChsaWdodCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGxpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlyZWN0aW9uXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0VmVjdG9yMyhsaWdodCwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2xvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDb2xvcihsaWdodCwgbGlnaHQuY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdFZhbHVlKGxpZ2h0LCBwcm9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZUNvbG9yKGxpZ2h0LCBjb2xvcikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBsaWdodC5vYmplY3RbcHJvcF0gPSBtYXRlcmlhbFV0aWxzXzEuaGV4VG9Db2xvcjMoY29sb3JbcHJvcF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIExpZ2h0U3lzdGVtLnF1ZXJpZXMgPSB7XHJcbiAgICAgICAgbGlnaHQ6IHsgY29tcG9uZW50czogW2luZGV4XzEuTGlnaHRdLCBsaXN0ZW46IHsgYWRkZWQ6IHRydWUsIHJlbW92ZWQ6IHRydWUsIGNoYW5nZWQ6IFtpbmRleF8xLkxpZ2h0XSB9IH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExpZ2h0U3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLkxpZ2h0U3lzdGVtID0gTGlnaHRTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTWF0ZXJpYWxTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nYW1lVXRpbHNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbmNvbnN0IG1hdGVyaWFsVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRlcmlhbFV0aWxzXCIpO1xyXG4vKiogU3lzdGVtIGZvciBNYXRlcmlhbCBjb21wb25lbnQgKi9cclxubGV0IE1hdGVyaWFsU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgTWF0ZXJpYWxTeXN0ZW0gZXh0ZW5kcyBlY3N5XzEuU3lzdGVtIHtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5tZXNoTWF0ZXJpYWwuYWRkZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVXJsTWVzaChlbnRpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGVyaWFsID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLk1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5vYmplY3QgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKG1hdGVyaWFsLmNvbG9yLmRpZmZ1c2UsIGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIG1hdGVyaWFsLnNjZW5lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWwobWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNoID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLk1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc2gub2JqZWN0Lm1hdGVyaWFsID0gbWF0ZXJpYWwub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLm1lc2hNYXRlcmlhbC5jaGFuZ2VkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNVcmxNZXNoKGVudGl0eSkgfHwgdGhpcy5fdXBkYXRlTWF0ZXJpYWwoZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLk1hdGVyaWFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubWVzaE1hdGVyaWFsLnJlbW92ZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzVXJsTWVzaChlbnRpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS5kaXNwb3NlT2JqZWN0KGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NYXRlcmlhbCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NZXNoKS5vYmplY3QubWF0ZXJpYWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2lzVXJsTWVzaChlbnRpdHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NZXNoKS50eXBlID09PSBpbmRleF8xLk1lc2hUeXBlcy5Vcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVNYXRlcmlhbChtYXRlcmlhbCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIG1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3JcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29sb3IobWF0ZXJpYWwsIG1hdGVyaWFsLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHR1cmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxVdGlsc18xLnVwZGF0ZVRleHR1cmUobWF0ZXJpYWwsIG1hdGVyaWFsLnRleHR1cmUsIGdhbWVVdGlsc18xLmdldEFzc2V0TWFuYWdlcih0aGlzLCBtYXRlcmlhbC5zY2VuZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdFZhbHVlKG1hdGVyaWFsLCBwcm9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZUNvbG9yKG1hdGVyaWFsLCBjb2xvcikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAobWF0ZXJpYWwub2JqZWN0W2Ake3Byb3B9Q29sb3JgXSA9IG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yMyhjb2xvcltwcm9wXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIE1hdGVyaWFsU3lzdGVtLnF1ZXJpZXMgPSB7XHJcbiAgICAgICAgbWVzaE1hdGVyaWFsOiB7IGNvbXBvbmVudHM6IFtpbmRleF8xLk1lc2gsIGluZGV4XzEuTWF0ZXJpYWxdLCBsaXN0ZW46IHsgYWRkZWQ6IHRydWUsIHJlbW92ZWQ6IHRydWUsIGNoYW5nZWQ6IFtpbmRleF8xLk1hdGVyaWFsXSB9IH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1hdGVyaWFsU3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLk1hdGVyaWFsU3lzdGVtID0gTWF0ZXJpYWxTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTWVzaFN5c3RlbSA9IHZvaWQgMDtcclxuY29uc3QgQkFCWUxPTiA9IHJlcXVpcmUoXCJiYWJ5bG9uanNcIik7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvaW5kZXhcIik7XHJcbmNvbnN0IGdhbWVVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL2dhbWVVdGlsc1wiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMiA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuLyoqIFN5c3RlbSBmb3IgTWVzaCBjb21wb25lbnQgKi9cclxubGV0IE1lc2hTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBNZXNoU3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBleGVjdXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubWVzaC5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2goZW50aXR5LCBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLm1lc2guY2hhbmdlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzIuZGlzcG9zZU9iamVjdChlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVzaChlbnRpdHksIGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NZXNoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubWVzaC5yZW1vdmVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMi5kaXNwb3NlT2JqZWN0KGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NZXNoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlTWVzaChlbnRpdHksIG1lc2gpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChtZXNoLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5NZXNoVHlwZXMuVXJsOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2gudXJsICYmIEJBQllMT04uU2NlbmVMb2FkZXIuSXNQbHVnaW5Gb3JFeHRlbnNpb25BdmFpbGFibGUodGhpcy5fZmlsZUV4dChtZXNoLnVybCkpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbG9hZFVybE1lc2goZW50aXR5LCBtZXNoLCBtZXNoLnVybCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91bnN1cHBvcnRlZE1lc2goZW50aXR5LCBtZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzaC5vYmplY3QgPSBCQUJZTE9OLk1lc2hCdWlsZGVyW2BDcmVhdGUke21lc2gudHlwZX1gXS5jYWxsKHRoaXMsIG1lc2gudHlwZSwgbWVzaC5vcHRpb25zID8gbWVzaC5vcHRpb25zIDoge30sIGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIG1lc2guc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoVmFsdWUobWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2ZpbGVFeHQodXJsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZihcIi5cIiksIHVybC5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfbG9hZFVybE1lc2goZW50aXR5LCBtZXNoLCB1cmwpIHtcclxuICAgICAgICAgICAgbGV0IGFzc2V0TWFuYWdlciA9IGdhbWVVdGlsc18xLmdldEFzc2V0TWFuYWdlcih0aGlzLCBtZXNoLnNjZW5lKTtcclxuICAgICAgICAgICAgbGV0IGZpbGVuYW1lSW5kZXggPSB1cmwubGFzdEluZGV4T2YoXCIvXCIpICsgMTtcclxuICAgICAgICAgICAgbGV0IHRhc2sgPSBhc3NldE1hbmFnZXIuYWRkTWVzaFRhc2sobWVzaC50eXBlLCBcIlwiLCB1cmwuc3Vic3RyaW5nKDAsIGZpbGVuYW1lSW5kZXgpLCB1cmwuc3Vic3RyaW5nKGZpbGVuYW1lSW5kZXgsIHVybC5sZW5ndGgpKTtcclxuICAgICAgICAgICAgdGFzay5vblN1Y2Nlc3MgPSAodGFzaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgbWVzaC5vYmplY3QgPSB0YXNrLmxvYWRlZE1lc2hlc1swXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2hWYWx1ZShtZXNoKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0YXNrLm9uRXJyb3IgPSAoKSA9PiB7IHRoaXMuX3Vuc3VwcG9ydGVkTWVzaChlbnRpdHksIG1lc2gpOyB9O1xyXG4gICAgICAgICAgICBhc3NldE1hbmFnZXIubG9hZCgpO1xyXG4gICAgICAgICAgICBhc3NldE1hbmFnZXIucmVzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZU1lc2hWYWx1ZShtZXNoKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gbWVzaCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RWYWx1ZShtZXNoLCBwcm9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfdW5zdXBwb3J0ZWRNZXNoKGVudGl0eSwgbWVzaCkge1xyXG4gICAgICAgICAgICBsZXQgc2NlbmUgPSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBtZXNoLnNjZW5lKTtcclxuICAgICAgICAgICAgbWVzaC5vYmplY3QgPSBCQUJZTE9OLk1lc2hCdWlsZGVyLkNyZWF0ZVBsYW5lKFwiXCIsIHt9LCBzY2VuZSk7XHJcbiAgICAgICAgICAgIGxldCBtYXRlcmlhbCA9IG5ldyBCQUJZTE9OLlN0YW5kYXJkTWF0ZXJpYWwoXCJcIiwgc2NlbmUpO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBRUFBQUFCQUFnTUFBQURYQjVsTkFBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFBRnpVa2RDQUs3T0hPa0FBQUFNVUV4VVJTZ29LQ2dvS0Nnb0tPODhPVlZwbTZBQUFBQUNkRkpPVS9MbGdIbFk4QUFBQVA5SlJFRlVPTXZOMU1GdHd6QU1CVkIzblU3UmNRc1NLRGNJOTZFUHZyUEFaMG5aa1JVWktYS01iMzZ4UHIrVXhNdlg4bkI5TERSZHkrZmovZmY3Z0VTNGJLWVVCUFlEZExPUWNFZ0RZMWN4NkFxSWpVQURRRll2VU5vaGtBRkJFYkZQK1kxTVJBUGJvVTFKT0tkVWo4cmdwMUJMV28ramFRdXRRVWRvdER1cU1TK2VSeGJsek04RjNrSERrSUFEOGtOeGNCYnVrQ3VpZG1BRGFJTGNJVE9oZVNUL2cyd0RWSVlFWCtHY2tqMnE3TmtqbXlZTVRSbFU0Sy8rSEpRTkVXdHRHRHRJd1paZmZnY0g4cmtKZ3RGQkMyaDQ0b1lDSGVDV29SenRVQnVnUVAwRTE1cENQMzJKeXpUMkFpWlQwenlMMmd2ZDRUMytZcGVYd2Z5NitBTlpPOVFsQjVzdmxBQUFBQUJKUlU1RXJrSmdnZz09XCI7XHJcbiAgICAgICAgICAgIC8vIEJBQllMT04uVGV4dHVyZS5CSUxJTkVBUl9TQU1QTElOR01PREUgPSAyXHJcbiAgICAgICAgICAgIG1hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlID0gbmV3IEJBQllMT04uVGV4dHVyZShcImRhdGE6ZXJyb3JEYXRhXCIsIHNjZW5lLCBmYWxzZSwgZmFsc2UsIDIsIG51bGwsIG51bGwsIGVycm9yRGF0YSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIG1lc2gub2JqZWN0Lm1hdGVyaWFsID0gbWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBNZXNoU3lzdGVtLnF1ZXJpZXMgPSB7XHJcbiAgICAgICAgbWVzaDogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5NZXNoXSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBjaGFuZ2VkOiBbaW5kZXhfMS5NZXNoXSB9IH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lc2hTeXN0ZW07XHJcbn0pKCk7XHJcbmV4cG9ydHMuTWVzaFN5c3RlbSA9IE1lc2hTeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUGFydGljbGVTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nYW1lVXRpbHNcIik7XHJcbmNvbnN0IG1hdGhVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGhVdGlsc1wiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuY29uc3QgbWF0ZXJpYWxVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGVyaWFsVXRpbHNcIik7XHJcbi8qKiBTeXN0ZW0gZm9yIFBhcnRpY2xlIGNvbXBvbmVudCAqL1xyXG5sZXQgUGFydGljbGVTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBQYXJ0aWNsZVN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnBhcnRpY2xlLmFkZGVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnRpY2xlID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLlBhcnRpY2xlKTtcclxuICAgICAgICAgICAgICAgIHBhcnRpY2xlLm9iamVjdCA9IG5ldyBCQUJZTE9OLlBhcnRpY2xlU3lzdGVtKHBhcnRpY2xlLnR5cGUsIHBhcnRpY2xlLmNhcGFjaXR5LCBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBwYXJ0aWNsZS5zY2VuZSkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnRpY2xlT2JqZWN0ID0gcGFydGljbGUub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwYXJ0aWNsZS50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLlBhcnRpY2xlVHlwZXMuUG9pbnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZVBvaW50RW1pdHRlcihtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMSksIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5kaXJlY3Rpb24yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLkJveDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVPYmplY3QuY3JlYXRlQm94RW1pdHRlcihtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMSksIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5kaXJlY3Rpb24yKSwgbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLm1pbkVtaXRCb3gpLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUubWF4RW1pdEJveCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuUGFydGljbGVUeXBlcy5TcGhlcmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZVNwaGVyZUVtaXR0ZXIocGFydGljbGUucmFkaXVzLCBwYXJ0aWNsZS5yYWRpdXNSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLkRpcmVjdGVkU3BoZXJlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVEaXJlY3RlZFNwaGVyZUVtaXR0ZXIocGFydGljbGUucmFkaXVzLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMSksIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5kaXJlY3Rpb24yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLkhlbWlzcGhlcmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZUhlbWlzcGhlcmljRW1pdHRlcihwYXJ0aWNsZS5yYWRpdXMsIHBhcnRpY2xlLnJhZGl1c1JhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLlBhcnRpY2xlVHlwZXMuQ3lsaW5kZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZUN5bGluZGVyRW1pdHRlcihwYXJ0aWNsZS5yYWRpdXMsIHBhcnRpY2xlLmhlaWdodCwgcGFydGljbGUucmFkaXVzUmFuZ2UsIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuUGFydGljbGVUeXBlcy5EaXJlY3RlZEN5bGluZGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVEaXJlY3RlZEN5bGluZGVyRW1pdHRlcihwYXJ0aWNsZS5yYWRpdXMsIHBhcnRpY2xlLmhlaWdodCwgcGFydGljbGUucmFkaXVzUmFuZ2UsIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5kaXJlY3Rpb24xKSwgbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLmRpcmVjdGlvbjIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLlBhcnRpY2xlVHlwZXMuQ29uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVPYmplY3QuY3JlYXRlQ29uZUVtaXR0ZXIocGFydGljbGUucmFkaXVzLCBwYXJ0aWNsZS5hbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFydGljbGUocGFydGljbGUpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5zdGFydCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnBhcnRpY2xlLmNoYW5nZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVQYXJ0aWNsZShlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuUGFydGljbGUpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5wYXJ0aWNsZS5yZW1vdmVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnRpY2xlID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLlBhcnRpY2xlKTtcclxuICAgICAgICAgICAgICAgIHBhcnRpY2xlLm9iamVjdC5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLmRpc3Bvc2VPYmplY3QocGFydGljbGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZVBhcnRpY2xlKHBhcnRpY2xlKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gcGFydGljbGUpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbWl0dGVyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpcmVjdGlvbjFcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlyZWN0aW9uMlwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5FbWl0Qm94XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1heEVtaXRCb3hcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RWZWN0b3IzKHBhcnRpY2xlLCBwcm9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHR1cmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxVdGlsc18xLnVwZGF0ZVRleHR1cmUocGFydGljbGUsIHBhcnRpY2xlLnRleHR1cmUsIGdhbWVVdGlsc18xLmdldEFzc2V0TWFuYWdlcih0aGlzLCBwYXJ0aWNsZS5zY2VuZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3JcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29sb3IocGFydGljbGUsIHBhcnRpY2xlLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RWYWx1ZShwYXJ0aWNsZSwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVDb2xvcihwYXJ0aWNsZSwgY29sb3IpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgcGFydGljbGUub2JqZWN0W3Byb3BdID0gbWF0ZXJpYWxVdGlsc18xLmhleFRvQ29sb3I0KGNvbG9yW3Byb3BdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBQYXJ0aWNsZVN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIHBhcnRpY2xlOiB7IGNvbXBvbmVudHM6IFtpbmRleF8xLlBhcnRpY2xlXSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBjaGFuZ2VkOiBbaW5kZXhfMS5QYXJ0aWNsZV0gfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXJ0aWNsZVN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5QYXJ0aWNsZVN5c3RlbSA9IFBhcnRpY2xlU3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRyYW5zZm9ybVN5c3RlbSA9IHZvaWQgMDtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9pbmRleFwiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuLyoqIFN5c3RlbSBmb3IgVHJhbnNmb3JtIGNvbXBvbmVudCAqL1xyXG5sZXQgVHJhbnNmb3JtU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgVHJhbnNmb3JtU3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBleGVjdXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMudHJhbnNmb3Jtcy5jaGFuZ2VkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBUcmFuc2Zvcm1TeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICB0cmFuc2Zvcm1zOiB7IGNvbXBvbmVudHM6IFtpbmRleF8xLlRyYW5zZm9ybV0sIGxpc3RlbjogeyBjaGFuZ2VkOiBbaW5kZXhfMS5UcmFuc2Zvcm1dIH0gfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNmb3JtU3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLlRyYW5zZm9ybVN5c3RlbSA9IFRyYW5zZm9ybVN5c3RlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KSk7XHJcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vR2FtZVN5c3RlbVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9UcmFuc2Zvcm1TeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vQ2FtZXJhU3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL01lc2hTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTGlnaHRTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWF0ZXJpYWxTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vUGFydGljbGVTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vSW5wdXRTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmxvZ01lc3NhZ2UgPSBleHBvcnRzLmdldEFzc2V0TWFuYWdlciA9IGV4cG9ydHMuZ2V0U2NlbmUgPSBleHBvcnRzLmdldFNjZW5lcyA9IGV4cG9ydHMuZ2V0UmVuZGVyaW5nQ2FudmFzID0gZXhwb3J0cy5nZXRTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IHdvcmxkVXRpbHNfMSA9IHJlcXVpcmUoXCIuL3dvcmxkVXRpbHNcIik7XHJcbmNvbnN0IEdhbWVTeXN0ZW1fMSA9IHJlcXVpcmUoXCIuLi9zeXN0ZW1zL0dhbWVTeXN0ZW1cIik7XHJcbmNvbnN0IFNjZW5lXzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9TY2VuZVwiKTtcclxuLyoqIEBoaWRkZW4gKi9cclxuZnVuY3Rpb24gZ2V0U3lzdGVtKHNlbGYsIHRhcmdldCkge1xyXG4gICAgcmV0dXJuIHdvcmxkVXRpbHNfMS5nZXRXb3JsZChzZWxmKS5nZXRTeXN0ZW0odGFyZ2V0KTtcclxufVxyXG5leHBvcnRzLmdldFN5c3RlbSA9IGdldFN5c3RlbTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogR2V0IGNhbnZhcyB1c2VkIGZvciByZW5kZXJpbmcuXHJcbiAqIEBwYXJhbSBzeXN0ZW0gQSByZWdpc3RlcmVkIGVjc3kgU3lzdGVtIGNsYXNzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRSZW5kZXJpbmdDYW52YXMoc3lzdGVtKSB7XHJcbiAgICByZXR1cm4gZ2V0U3lzdGVtKHN5c3RlbSwgR2FtZVN5c3RlbV8xLkdhbWVTeXN0ZW0pLnJlbmRlcmluZ0NhbnZhcztcclxufVxyXG5leHBvcnRzLmdldFJlbmRlcmluZ0NhbnZhcyA9IGdldFJlbmRlcmluZ0NhbnZhcztcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogR2V0IGFsbCBzY2VuZXMgaW4gZW5naW5lLlxyXG4gKiBAcGFyYW0gc3lzdGVtIEEgcmVnaXN0ZXJlZCBlY3N5IFN5c3RlbSBjbGFzc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U2NlbmVzKHN5c3RlbSkge1xyXG4gICAgcmV0dXJuIGdldFN5c3RlbShzeXN0ZW0sIEdhbWVTeXN0ZW1fMS5HYW1lU3lzdGVtKS5zY2VuZXM7XHJcbn1cclxuZXhwb3J0cy5nZXRTY2VuZXMgPSBnZXRTY2VuZXM7XHJcbi8qKlxyXG4gKiBHZXQgYSBzY2VuZSBvciByZXR1cm4gYWN0aXZlIHNjZW5lLlxyXG4gKiBAcGFyYW0gc3lzdGVtIEEgcmVnaXN0ZXJlZCBlY3N5IFN5c3RlbSBjbGFzc1xyXG4gKiBAcGFyYW0gc2NlbmUgU2NlbmUgZW50aXR5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY2VuZShzeXN0ZW0sIHNjZW5lKSB7XHJcbiAgICBpZiAoc2NlbmUpIHtcclxuICAgICAgICByZXR1cm4gc2NlbmUuZ2V0Q29tcG9uZW50KFNjZW5lXzEuU2NlbmUpLm9iamVjdDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBnZXRTeXN0ZW0oc3lzdGVtLCBHYW1lU3lzdGVtXzEuR2FtZVN5c3RlbSkuYWN0aXZlU2NlbmU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5nZXRTY2VuZSA9IGdldFNjZW5lO1xyXG4vKipcclxuICogR2V0IHNjZW5lIEFzc2V0TWFuYWdlciBvciByZXR1cm4gQXNzZXRNYW5hZ2VyIGluIGFjdGl2ZSBzY2VuZS5cclxuICogQHBhcmFtIHN5c3RlbSBBIHJlZ2lzdGVyZWQgZWNzeSBTeXN0ZW0gY2xhc3NcclxuICogQHBhcmFtIHNjZW5lIFNjZW5lIGVudGl0eVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXNzZXRNYW5hZ2VyKHN5c3RlbSwgc2NlbmUpIHtcclxuICAgIHJldHVybiBnZXRTeXN0ZW0oc3lzdGVtLCBHYW1lU3lzdGVtXzEuR2FtZVN5c3RlbSkuZ2V0QXNzZXRNYW5hZ2VyKHNjZW5lKTtcclxufVxyXG5leHBvcnRzLmdldEFzc2V0TWFuYWdlciA9IGdldEFzc2V0TWFuYWdlcjtcclxuLyoqXHJcbiAqIExvZyBhIG1lc3NhZ2UgdG8gdGhlIHNjcmVlblxyXG4gKiBAcGFyYW0gc3lzdGVtIEEgcmVnaXN0ZXJlZCBlY3N5IFN5c3RlbSBjbGFzc1xyXG4gKiBAcGFyYW0gc2NlbmUgU2NlbmUgZW50aXR5XHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dNZXNzYWdlKHN5c3RlbSwgbWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIGdldFN5c3RlbShzeXN0ZW0sIEdhbWVTeXN0ZW1fMS5HYW1lU3lzdGVtKS5sb2dNZXNzYWdlKG1lc3NhZ2UpO1xyXG59XHJcbmV4cG9ydHMubG9nTWVzc2FnZSA9IGxvZ01lc3NhZ2U7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuL2dhbWVVdGlsc1wiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0U2NlbmVcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdhbWVVdGlsc18xLmdldFNjZW5lOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRBc3NldE1hbmFnZXJcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdhbWVVdGlsc18xLmdldEFzc2V0TWFuYWdlcjsgfSB9KTtcclxudmFyIG1hdGhVdGlsc18xID0gcmVxdWlyZShcIi4vbWF0aFV0aWxzXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJkZWdyZWVUb1JhZGlhbnNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGhVdGlsc18xLmRlZ3JlZVRvUmFkaWFuczsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwieHl6VG9WZWN0b3IzXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjM7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInh5elRvVmVjdG9yM1JhZGlhbnNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yM1JhZGlhbnM7IH0gfSk7XHJcbnZhciBtYXRlcmlhbFV0aWxzXzEgPSByZXF1aXJlKFwiLi9tYXRlcmlhbFV0aWxzXCIpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJoZXhUb0NvbG9yM1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF0ZXJpYWxVdGlsc18xLmhleFRvQ29sb3IzOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJoZXhUb0NvbG9yNFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF0ZXJpYWxVdGlsc18xLmhleFRvQ29sb3I0OyB9IH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmhleFRvQ29sb3I0ID0gZXhwb3J0cy5oZXhUb0NvbG9yMyA9IGV4cG9ydHMubWF0ZXJpYWxDb2xvckhleCA9IGV4cG9ydHMudXBkYXRlVGV4dHVyZSA9IHZvaWQgMDtcclxuY29uc3QgQkFCWUxPTiA9IHJlcXVpcmUoXCJiYWJ5bG9uanNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi9vYmplY3RVdGlsc1wiKTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogVXBkYXRlIHRleHR1cmUgb2JqZWN0IHRvIGEgY29tcG9uZW50IGZvciBpdHMgdGV4dHVyZSBwcm9wZXJ0aWVzLlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IFRleHR1cmVDb21wb25lbnQgaW4gdGhlIGVudGl0eVxyXG4gKiBAcGFyYW0gdGV4dHVyZVByb3BlcnRpZXMgVGV4dHVyZSBwcm9wZXJ0aWVzIHRvIGJlIHVwZGF0ZVxyXG4gKiBAcGFyYW0gYXNzZXRNYW5hZ2VyIEFzc2V0TWFuYWdlciB0byBwcm9jZXNzIHRleHR1cmVzXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVUZXh0dXJlKGNvbXBvbmVudCwgdGV4dHVyZVByb3BlcnRpZXMsIGFzc2V0TWFuYWdlcikge1xyXG4gICAgZm9yIChsZXQgcHJvcCBpbiB0ZXh0dXJlUHJvcGVydGllcykge1xyXG4gICAgICAgIGxldCB0ZXh0dXJlQXR0cmlidXRlcyA9IHRleHR1cmVQcm9wZXJ0aWVzW3Byb3BdO1xyXG4gICAgICAgIGxldCB0YXNrID0gYXNzZXRNYW5hZ2VyLmFkZFRleHR1cmVUYXNrKHByb3AsIHRleHR1cmVBdHRyaWJ1dGVzLnVybCk7XHJcbiAgICAgICAgdGFzay5vblN1Y2Nlc3MgPSAodGFzaykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGV4dHVyZU9iamVjdCA9IHRhc2sudGV4dHVyZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB0ZXh0dXJlQXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgYXR0ciAhPT0gXCJ1cmxcIiAmJiAodGV4dHVyZU9iamVjdFthdHRyXSA9IHRleHR1cmVBdHRyaWJ1dGVzW2F0dHJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGV4dHVyZU5hbWUgPSBgJHtwcm9wfVRleHR1cmVgO1xyXG4gICAgICAgICAgICBsZXQgY29tcG9uZW50T2JqZWN0ID0gY29tcG9uZW50Lm9iamVjdDtcclxuICAgICAgICAgICAgY29tcG9uZW50T2JqZWN0W3RleHR1cmVOYW1lXSAmJiBvYmplY3RVdGlsc18xLmRpc3Bvc2VPYmplY3QoY29tcG9uZW50T2JqZWN0W3RleHR1cmVOYW1lXSk7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudE9iamVjdFt0ZXh0dXJlTmFtZV0gPSB0ZXh0dXJlT2JqZWN0O1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3NldE1hbmFnZXIubG9hZCgpO1xyXG4gICAgYXNzZXRNYW5hZ2VyLnJlc2V0KCk7XHJcbn1cclxuZXhwb3J0cy51cGRhdGVUZXh0dXJlID0gdXBkYXRlVGV4dHVyZTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogQ3JlYXRlIG9iamVjdCBvZiBtYXRlcmlhbCBjb2xvciB2YWx1ZXMgb3IgY3JlYXRlIGEgbWF0ZXJpYWwgY29sb3Igb2JqZWN0IHdpdGggd2hpdGUgZGlmZnVzZS5cclxuICogQHBhcmFtIGRpZmZ1c2UgRGlmZnVzZSBjb2xvciBpbiBoZXggc3RyaW5nLiBlLmcuLCAjMTIzQUJDXHJcbiAqIEByZXR1cm5zIE9iamVjdCBtYXRjaGVzIE1hdGVyaWFsQ29sb3JQcm9wZXJ0aWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXRlcmlhbENvbG9ySGV4KGRpZmZ1c2UpIHtcclxuICAgIGlmIChkaWZmdXNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGlmZnVzZTogZGlmZnVzZSB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgZGlmZnVzZTogXCIjZmZmZmZmXCIgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLm1hdGVyaWFsQ29sb3JIZXggPSBtYXRlcmlhbENvbG9ySGV4O1xyXG4vKipcclxuICogQ29udmVydCBoZXggY29sb3IgdmFsdWUgdG8gQ29sb3IzLlxyXG4gKiBAcGFyYW0gaGV4U3RyaW5nIFRleHQgb2YgaGV4IGNvbG9yIHZhbHVlKGUuZy4sICMxMjNBQkMpXHJcbiAqL1xyXG5mdW5jdGlvbiBoZXhUb0NvbG9yMyhoZXhTdHJpbmcpIHtcclxuICAgIHJldHVybiBCQUJZTE9OLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGhleFN0cmluZyk7XHJcbn1cclxuZXhwb3J0cy5oZXhUb0NvbG9yMyA9IGhleFRvQ29sb3IzO1xyXG4vKipcclxuICogQ29udmVydCBoZXggY29sb3IgdmFsdWUgdG8gQ29sb3I0IChoYXMgYWxwaGEpLlxyXG4gKiBAcGFyYW0gaGV4U3RyaW5nIFRleHQgb2YgaGV4IGNvbG9yIHZhbHVlKGUuZy4sICMxMjNBQkNGRilcclxuICovXHJcbmZ1bmN0aW9uIGhleFRvQ29sb3I0KGhleFN0cmluZykge1xyXG4gICAgcmV0dXJuIEJBQllMT04uQ29sb3I0LkZyb21IZXhTdHJpbmcoaGV4U3RyaW5nKTtcclxufVxyXG5leHBvcnRzLmhleFRvQ29sb3I0ID0gaGV4VG9Db2xvcjQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMueHl6ID0gZXhwb3J0cy54eXpUb1ZlY3RvcjNSYWRpYW5zID0gZXhwb3J0cy54eXpUb1ZlY3RvcjMgPSBleHBvcnRzLmRlZ3JlZVRvUmFkaWFucyA9IHZvaWQgMDtcclxuY29uc3QgQkFCWUxPTiA9IHJlcXVpcmUoXCJiYWJ5bG9uanNcIik7XHJcbi8qKlxyXG4gKiBUcmFuc2xhdGUgZGVncmVlIHRvIHJhZGlhbnMuXHJcbiAqIEBwYXJhbSBkZWdyZWUgRGVncmVlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWdyZWVUb1JhZGlhbnMoZGVncmVlKSB7XHJcbiAgICByZXR1cm4gQkFCWUxPTi5BbmdsZS5Gcm9tRGVncmVlcyhkZWdyZWUpLnJhZGlhbnMoKTtcclxufVxyXG5leHBvcnRzLmRlZ3JlZVRvUmFkaWFucyA9IGRlZ3JlZVRvUmFkaWFucztcclxuLyoqXHJcbiAqIENvbnZlcnQgWFlaUHJvcGVydGllcyB2YWx1ZSB0byBWZWN0b3IzLlxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBYWVpQcm9wZXJ0aWVzIHZhbHVlXHJcbiAqL1xyXG5mdW5jdGlvbiB4eXpUb1ZlY3RvcjMocHJvcGVydGllcykge1xyXG4gICAgcmV0dXJuIG5ldyBCQUJZTE9OLlZlY3RvcjMocHJvcGVydGllcy54LCBwcm9wZXJ0aWVzLnksIHByb3BlcnRpZXMueik7XHJcbn1cclxuZXhwb3J0cy54eXpUb1ZlY3RvcjMgPSB4eXpUb1ZlY3RvcjM7XHJcbi8qKlxyXG4gKiBDb252ZXJ0IFhZWlByb3BlcnRpZXMgZGVncmVlIHZhbHVlIHRvIFZlY3RvcjMgaW4gcmFkaWFucy5cclxuICogQHBhcmFtIHByb3BlcnRpZXMgWFlaUHJvcGVydGllcyB2YWx1ZSBpbiBkZWdyZWVzXHJcbiAqL1xyXG5mdW5jdGlvbiB4eXpUb1ZlY3RvcjNSYWRpYW5zKHByb3BlcnRpZXMpIHtcclxuICAgIHJldHVybiBuZXcgQkFCWUxPTi5WZWN0b3IzKGRlZ3JlZVRvUmFkaWFucyhwcm9wZXJ0aWVzLngpLCBkZWdyZWVUb1JhZGlhbnMocHJvcGVydGllcy55KSwgZGVncmVlVG9SYWRpYW5zKHByb3BlcnRpZXMueikpO1xyXG59XHJcbmV4cG9ydHMueHl6VG9WZWN0b3IzUmFkaWFucyA9IHh5elRvVmVjdG9yM1JhZGlhbnM7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIENyZWF0ZSBvYmplY3QgYnkgWFlaIHZhbHVlcyBvciBjcmVhdGUgYWxsIHplcm8gb2JqZWN0LlxyXG4gKiBAcGFyYW0geCB2YWx1ZVxyXG4gKiBAcGFyYW0geSB2YWx1ZVxyXG4gKiBAcGFyYW0geiB2YWx1ZVxyXG4gKiBAcmV0dXJucyBPYmplY3QgbWF0Y2hlcyBYWVpQcm9wZXJ0aWVzXHJcbiAqL1xyXG5mdW5jdGlvbiB4eXooeCwgeSwgeikge1xyXG4gICAgaWYgKHggJiYgeSAmJiB6KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSwgejogeiB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCwgejogMCB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMueHl6ID0geHl6O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmRpc3Bvc2VPYmplY3QgPSBleHBvcnRzLnVwZGF0ZU9iamVjdFRyYW5zZm9ybSA9IGV4cG9ydHMudXBkYXRlT2JqZWN0c1RyYW5zZm9ybSA9IGV4cG9ydHMuZ2V0T2JqZWN0Q29tcG9uZW50cyA9IGV4cG9ydHMudXBkYXRlT2JqZWN0VmVjdG9yMyA9IGV4cG9ydHMudXBkYXRlT2JqZWN0VmFsdWUgPSB2b2lkIDA7XHJcbmNvbnN0IFRyYW5zZm9ybV8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvVHJhbnNmb3JtXCIpO1xyXG5jb25zdCBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuL21hdGhVdGlsc1wiKTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogVXBkYXRlIHZhbHVlIG9mIEJhYnlsb24uanMgb2JqZWN0J3MgcHJvcGVydHkgZnJvbSBhIHByb3BlcnR5IGluIGNvbXBvbmVudCB3aXRoIHNhbWUgbmFtZS5cclxuICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgY29udGFpbnMgQmFieWxvbi5qcyBvYmplY3RcclxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiBwcm9wZXJ0eSBpbiB0aGUgY29tcG9uZW50XHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPYmplY3RWYWx1ZShjb21wb25lbnQsIG5hbWUpIHtcclxuICAgIGNvbXBvbmVudC5vYmplY3RbbmFtZV0gPSBjb21wb25lbnRbbmFtZV07XHJcbn1cclxuZXhwb3J0cy51cGRhdGVPYmplY3RWYWx1ZSA9IHVwZGF0ZU9iamVjdFZhbHVlO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBVcGRhdGUgVmVjdG9yMyBvZiBCYWJ5bG9uLmpzIG9iamVjdCdzIHByb3BlcnR5IGZyb20gcHJvcGVydHkgaW4gY29tcG9uZW50IHdpdGggc2FtZSBuYW1lLlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBjb250YWlucyBCYWJ5bG9uLmpzIG9iamVjdFxyXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHByb3BlcnR5IGluIHRoZSBjb21wb25lbnQsIHZhbHVlIG9mIHByb3BlcnR5IHNob3VsZCBtYXRjaGVzIFhZWlByb3BlcnRpZXNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9iamVjdFZlY3RvcjMoY29tcG9uZW50LCBuYW1lKSB7XHJcbiAgICBjb21wb25lbnQub2JqZWN0W25hbWVdID0gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKGNvbXBvbmVudFtuYW1lXSk7XHJcbn1cclxuZXhwb3J0cy51cGRhdGVPYmplY3RWZWN0b3IzID0gdXBkYXRlT2JqZWN0VmVjdG9yMztcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogR2V0IE9iamVjdENvbXBvbmVudHMgaW4gYW4gRW50aXR5LlxyXG4gKiBAcGFyYW0gZW50aXR5IEVudGl0eSB0byBmaWx0ZXIgT2JqZWN0Q29tcG9uZW50c1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0T2JqZWN0Q29tcG9uZW50cyhlbnRpdHkpIHtcclxuICAgIGxldCBjb21wb25lbnRzID0gZW50aXR5LmdldENvbXBvbmVudHMoKTtcclxuICAgIGxldCBvYmplY3RDb21wb25lbnRzID0gW107XHJcbiAgICBmb3IgKGxldCBwcm9wIGluIGNvbXBvbmVudHMpIHtcclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gY29tcG9uZW50c1twcm9wXTtcclxuICAgICAgICBjb21wb25lbnQub2JqZWN0ICYmIG9iamVjdENvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iamVjdENvbXBvbmVudHM7XHJcbn1cclxuZXhwb3J0cy5nZXRPYmplY3RDb21wb25lbnRzID0gZ2V0T2JqZWN0Q29tcG9uZW50cztcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogVXBkYXRlIHRyYW5zZm9ybWF0aW9uIG9mIE9iamVjdENvbXBvbmVudHMgaW4gZW50aXR5LlxyXG4gKiBAcGFyYW0gZW50aXR5IEVudGl0eSB0byBiZSB1cGRhdGVkXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSkge1xyXG4gICAgbGV0IGNvbXBvbmVudHMgPSBlbnRpdHkuZ2V0Q29tcG9uZW50cygpO1xyXG4gICAgZm9yIChsZXQgcHJvcCBpbiBjb21wb25lbnRzKSB7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbcHJvcF07XHJcbiAgICAgICAgKGNvbXBvbmVudC5vYmplY3QgJiYgZW50aXR5Lmhhc0NvbXBvbmVudChUcmFuc2Zvcm1fMS5UcmFuc2Zvcm0pKSAmJiB1cGRhdGVPYmplY3RUcmFuc2Zvcm0oZW50aXR5LmdldE11dGFibGVDb21wb25lbnQoVHJhbnNmb3JtXzEuVHJhbnNmb3JtKSwgY29tcG9uZW50KTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0gPSB1cGRhdGVPYmplY3RzVHJhbnNmb3JtO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBVcGRhdGUgdHJhbnNmb3JtYXRpb24gdG8gYW4gT2JqZWN0Q29tcG9uZW50LlxyXG4gKiBAcGFyYW0gdHJhbnNmb3JtIFRyYW5zZnJvbSBjb21wb25lbnQgaW4gdGhlIGVudGl0eVxyXG4gKiBAcGFyYW0gY29tcG9uZW50IEEgY29tcG9uZW50IGhhcyBCYWJ5bG9uLmpzIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT2JqZWN0VHJhbnNmb3JtKHRyYW5zZm9ybSwgY29tcG9uZW50KSB7XHJcbiAgICBsZXQgb2JqZWN0ID0gY29tcG9uZW50Lm9iamVjdDtcclxuICAgIG9iamVjdC5wb3NpdGlvbiAmJiAob2JqZWN0LnBvc2l0aW9uID0gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHRyYW5zZm9ybS5wb3NpdGlvbikpO1xyXG4gICAgb2JqZWN0LnJvdGF0aW9uICYmIChvYmplY3Qucm90YXRpb24gPSBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjNSYWRpYW5zKHRyYW5zZm9ybS5yb3RhdGlvbikpO1xyXG4gICAgb2JqZWN0LnNjYWxpbmcgJiYgKG9iamVjdC5zY2FsaW5nID0gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHRyYW5zZm9ybS5zY2FsZSkpO1xyXG59XHJcbmV4cG9ydHMudXBkYXRlT2JqZWN0VHJhbnNmb3JtID0gdXBkYXRlT2JqZWN0VHJhbnNmb3JtO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBEaXNwb3NlIEJhYnlsb24uanMgb2JqZWN0IGluIHRoZSBjb21wb25lbnQuXHJcbiAqIEBwYXJhbSBvYmplY3QgQ29tcG9uZW50IGNvbnRhaW5zIEJhYnlsb24uanMgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBkaXNwb3NlT2JqZWN0KGNvbXBvbmVudCkge1xyXG4gICAgY29tcG9uZW50Lm9iamVjdCAmJiBjb21wb25lbnQub2JqZWN0LmRpc3Bvc2UoKTtcclxufVxyXG5leHBvcnRzLmRpc3Bvc2VPYmplY3QgPSBkaXNwb3NlT2JqZWN0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmdldFdvcmxkID0gdm9pZCAwO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBIYWNrIG9uIGVjc3kgdG8gZ2V0IFdvcmxkIGluc3RhbmNlIGZyb20gc3lzdGVtIGl0c2VsZi5cclxuICogQHBhcmFtIHN5c3RlbSBBIHJlZ2lzdGVyZWQgZWNzeSBTeXN0ZW0gY2xhc3NcclxuICogQHJldHVybnMgZWNzeSB3b3JsZFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0V29ybGQoc3lzdGVtKSB7XHJcbiAgICByZXR1cm4gc3lzdGVtW1wid29ybGRcIl07XHJcbn1cclxuZXhwb3J0cy5nZXRXb3JsZCA9IGdldFdvcmxkO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBHYW1lXzEgPSByZXF1aXJlKFwiLi9jb3JlL0dhbWVcIik7XHJcbmNvbnN0IGVjc3lfYmFieWxvbl8xID0gcmVxdWlyZShcIi4vZWNzeS1iYWJ5bG9uXCIpO1xyXG5jb25zdCBDb250cm9sbGVySW5wdXRfMSA9IHJlcXVpcmUoXCIuL3dlYnVpbGQteHIvY29tcG9uZW50cy9Db250cm9sbGVySW5wdXRcIik7XHJcbmNvbnN0IENvbnRyb2xsZXJJbnB1dFN5c3RlbV8xID0gcmVxdWlyZShcIi4vd2VidWlsZC14ci9zeXN0ZW1zL0NvbnRyb2xsZXJJbnB1dFN5c3RlbVwiKTtcclxuLy8gc3RhcnQgYXBwIGJ5IGNhbGwgZ2FtZSBpbnN0YW5jZVxyXG5jb25zdCBnYW1lID0gR2FtZV8xLkdhbWUuaW5zdGFuY2UoKTtcclxuLy8gaW5pdCBnYW1lIGNhbnZhcywgYWRkIHN5c3RlbXMsIGFkZCBzY2VuZSBUXHJcbmdhbWUuc3RhcnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluQ2FudmFzXCIpLCBbZWNzeV9iYWJ5bG9uXzEuTWVzaFN5c3RlbSwgZWNzeV9iYWJ5bG9uXzEuTGlnaHRTeXN0ZW0sIGVjc3lfYmFieWxvbl8xLk1hdGVyaWFsU3lzdGVtLCBlY3N5X2JhYnlsb25fMS5JbnB1dFN5c3RlbSwgQ29udHJvbGxlcklucHV0U3lzdGVtXzEuQ29udHJvbGxlcklucHV0U3lzdGVtXSk7XHJcbi8vIGFkZCBzY2VuZVpcclxuY29uc3Qgc2NlbmVaID0gZ2FtZS5jcmVhdGVTY2VuZSh7XHJcbiAgICBhbWJpZW50OiBcIiNDQ0NDQ0NcIixcclxuICAgIGNsZWFyOiBcIiNDQ0NDQ0NGRlwiXHJcbn0pO1xyXG4vLyBjcmVhdGUgY2FtZXJhIG9mIHNjZW5lIFpcclxuY29uc3QgY2FtZXJhWiA9IGdhbWUuY3JlYXRlRW50aXR5KCkuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLkNhbWVyYSwgeyBzY2VuZTogc2NlbmVaLCBwb2ludGVyTG9jazogZmFsc2UgfSk7XHJcbmNhbWVyYVouZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnBvc2l0aW9uLnkgPSAzO1xyXG5jYW1lcmFaLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi56ID0gLTM7XHJcbmNhbWVyYVouZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnBvc2l0aW9uLnggPSAtMztcclxuY2FtZXJhWi5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucm90YXRpb24ueSA9IDQ1O1xyXG5jYW1lcmFaLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5yb3RhdGlvbi54ID0gMTU7XHJcbi8vIGNyZWF0ZSBhIGJveCBpbiBzY2VuZSBaIGNhbiBiZSBtb3ZlZCBieSBXQVNEXHJcbmNvbnN0IGJveFogPSBnYW1lLmNyZWF0ZUVudGl0eSgpXHJcbiAgICAuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLk1lc2gsIHsgc2NlbmU6IHNjZW5lWiB9KVxyXG4gICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NYXRlcmlhbCwgeyBzY2VuZTogc2NlbmVaLCBjb2xvcjogeyBkaWZmdXNlOiBcIiMzMzAwOTlcIiB9IH0pO1xyXG5ib3haLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi55ID0gMTtcclxuYm94Wi5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucG9zaXRpb24ueiA9IDE7XHJcbmJveFouZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnBvc2l0aW9uLnggPSAxO1xyXG4vLyBjcmVhdGUgbGlnaHQgb2Ygc2NlbmUgWlxyXG5jb25zdCBsaWdodEIgPSBnYW1lLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5MaWdodCwgeyBzY2VuZTogc2NlbmVaIH0pO1xyXG5saWdodEIuZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5MaWdodCkuZGlyZWN0aW9uLnkgPSAxO1xyXG4vLyBjcmVhdGUgemVicmEgc2tpbiB0ZXh0dXJlIGdyb3VuZCBmb3Igc2NlbmUgVFxyXG5jb25zdCBncm91bmQgPSBnYW1lLmNyZWF0ZUVudGl0eSgpXHJcbiAgICAuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLk1lc2gsIHsgc2NlbmU6IHNjZW5lWiwgdHlwZTogZWNzeV9iYWJ5bG9uXzEuTWVzaFR5cGVzLkdyb3VuZCwgb3B0aW9uczogeyB3aWR0aDogMTAsIGhlaWdodDogMTAgfSB9KVxyXG4gICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NYXRlcmlhbCwge1xyXG4gICAgc2NlbmU6IHNjZW5lWixcclxuICAgIHRleHR1cmU6IHtcclxuICAgICAgICBkaWZmdXNlOiB7IHVybDogXCJodHRwczovL2kwLndwLmNvbS93d3cuc2hhcmV0ZXh0dXJlcy5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTgvMDkvemVicmFfc2tpbi5qcGctZGlmZnVzZS5qcGc/c3NsPTFcIiwgdVNjYWxlOiA1LCB2U2NhbGU6IDUgfSxcclxuICAgICAgICBidW1wOiB7IHVybDogXCJodHRwczovL2kyLndwLmNvbS93d3cuc2hhcmV0ZXh0dXJlcy5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTgvMDkvemVicmFfc2tpbi5qcGctbm9ybWFsLmpwZz9zc2w9MVwiLCB1U2NhbGU6IDUsIHZTY2FsZTogNSB9LFxyXG4gICAgICAgIHNwZWN1bGFyOiB7IHVybDogXCJodHRwczovL2kxLndwLmNvbS93d3cuc2hhcmV0ZXh0dXJlcy5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMTgvMDkvemVicmFfc2tpbi5qcGctc3BlY3VsYXIuanBnP3NzbD0xXCIsIHVTY2FsZTogNSwgdlNjYWxlOiA1IH1cclxuICAgIH1cclxufSk7XHJcbmdhbWUuY3JlYXRlRW50aXR5KClcclxuICAgIC5hZGRDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuSW5wdXQsIHtcclxuICAgIG9uS2V5OiAoa2V5LCBkb3duLCB1cCkgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgPT0gXCJkXCIpIHtcclxuICAgICAgICAgICAgZ2FtZS5zaG93RGVidWdnZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5ID09IFwiYlwiKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJhbmRvbUJveCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbmdhbWUuY3JlYXRlRW50aXR5KClcclxuICAgIC5hZGRDb21wb25lbnQoQ29udHJvbGxlcklucHV0XzEuQ29udHJvbGxlcklucHV0LCB7XHJcbiAgICBvbkxlZnRUaHVtYnN0aWNrTW92ZTogKCkgPT4ge1xyXG4gICAgfSxcclxuICAgIG9uUmlnaHRUaHVtYnN0aWNrTW92ZTogKCkgPT4ge1xyXG4gICAgfSxcclxuICAgIG9uTGVmdEJ1dHRvblByZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgb25MZWZ0VHJpZ2dlclByZXNzOiAobWVzaCkgPT4ge1xyXG4gICAgICAgIG1lc2gubWF0ZXJpYWwuYWxwaGEgPSBtZXNoLm1hdGVyaWFsLmFscGhhIDwgMSA/IC45IDogLjM7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgb25MZWZ0U3F1ZWV6ZVByZXNzOiAobWVzaCkgPT4ge1xyXG4gICAgICAgIG1lc2gubWF0ZXJpYWwuYWxwaGEgPSBtZXNoLm1hdGVyaWFsLmFscGhhIDwgMSA/IC45IDogLjM7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgb25SaWdodEJ1dHRvblByZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgb25SaWdodFRyaWdnZXJQcmVzczogKG1lc2gpID0+IHtcclxuICAgICAgICBtZXNoLm1hdGVyaWFsLmFscGhhID0gbWVzaC5tYXRlcmlhbC5hbHBoYSA8IDEgPyAuOSA6IC4zO1xyXG4gICAgICAgIGNyZWF0ZVJhbmRvbUJveCgpO1xyXG4gICAgfSxcclxuICAgIG9uUmlnaHRTcXVlZXplUHJlc3M6IChtZXNoKSA9PiB7XHJcbiAgICAgICAgbWVzaC5tYXRlcmlhbC5hbHBoYSA9IG1lc2gubWF0ZXJpYWwuYWxwaGEgPCAxID8gLjkgOiAuMztcclxuICAgICAgICBjcmVhdGVSYW5kb21Cb3goKTtcclxuICAgIH1cclxufSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVJhbmRvbUJveCgpIHtcclxuICAgIGNvbnN0IGJveFIgPSBnYW1lLmNyZWF0ZUVudGl0eSgpXHJcbiAgICAgICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NZXNoLCB7IHNjZW5lOiBzY2VuZVogfSlcclxuICAgICAgICAuYWRkQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLk1hdGVyaWFsLCB7IHNjZW5lOiBzY2VuZVosIGNvbG9yOiB7IGRpZmZ1c2U6IHJhbmRvbUNvbG9yKCkgfSB9KTtcclxuICAgIGJveFIuZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnBvc2l0aW9uLnkgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICBib3hSLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi56ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgYm94Ui5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucG9zaXRpb24ueCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxufVxyXG5jb25zdCByYW5kb21Db2xvciA9ICgpID0+IHtcclxuICAgIGxldCBjb2xvciA9ICcjJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICBjb25zdCBiaXQgPSAocmFuZG9tICogMTYpIHwgMDtcclxuICAgICAgICBjb2xvciArPSAoYml0KS50b1N0cmluZygxNik7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICByZXR1cm4gY29sb3I7XHJcbn07XHJcbmNvbnN0IG1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvL2NvbnN0IG1hdHJpeCA9IG5ldyBCQUJZTE9OLk1hdHJpeCgpO1xyXG4gICAgLy9jb25zdCBkZXZpY2VSb3RhdGlvblF1YXRlcm5pb24gPSB4ckhlbHBlci5pbnB1dC54ckNhbWVyYS5yb3RhdGlvblF1YXRlcm5pb247XHJcbiAgICAvL0JBQllMT04uTWF0cml4LkZyb21RdWF0ZXJuaW9uVG9SZWYoZGV2aWNlUm90YXRpb25RdWF0ZXJuaW9uLCBtYXRyaXgpO1xyXG4gICAgLy9cclxuICAgIC8vY29uc3QgbW92ZSA9IG5ldyBCQUJZTE9OLlZlY3RvcjMobW92ZVggKiBtb3ZlU3BlZWQsIDAsIC1tb3ZlWSAqIG1vdmVTcGVlZCk7XHJcbiAgICAvL2NvbnN0IGFkZFBvcyA9IEJBQllMT04uVmVjdG9yMy5UcmFuc2Zvcm1Db29yZGluYXRlcyhtb3ZlLCBtYXRyaXgpO1xyXG4gICAgLy9hZGRQb3MueSA9IDA7XHJcbiAgICAvL1xyXG4gICAgLy94ckhlbHBlci5pbnB1dC54ckNhbWVyYS5wb3NpdGlvbiA9IHhySGVscGVyLmlucHV0LnhyQ2FtZXJhLnBvc2l0aW9uLmFkZChhZGRQb3MpO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNvbnRyb2xsZXJJbnB1dCA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KENvbnRyb2xsZXJJbnB1dCwgeyBvbkxlZnRUcmlnZ2VyUHJlc3M6IG9uVHJpZ2dlclByZXNzIH0pO1xyXG4gKiBmdW5jdGlvbiBvblRyaWdnZXJQcmVzcyhhbW91bnQ6IG51bWJlcikge1xyXG4gKiAgIGNvbnNvbGUubG9nKFwidHJpZ2dlciBwcmVzc2VkOiBcIiArIGFtb3VudCk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBDb250cm9sbGVySW5wdXQge1xyXG59XHJcbmV4cG9ydHMuQ29udHJvbGxlcklucHV0ID0gQ29udHJvbGxlcklucHV0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ29udHJvbGxlcklucHV0U3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgQ29udHJvbGxlcklucHV0XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9Db250cm9sbGVySW5wdXRcIik7XHJcbmNvbnN0IGdhbWVVdGlsc18xID0gcmVxdWlyZShcIi4uLy4uL2Vjc3ktYmFieWxvbi91dGlscy9nYW1lVXRpbHNcIik7XHJcbi8qKiBTeXN0ZW0gZm9yIENvbnRyb2xsZXJJbnB1dCBjb21wb25lbnQgKi9cclxubGV0IENvbnRyb2xsZXJJbnB1dFN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKCgpID0+IHtcclxuICAgIGNsYXNzIENvbnRyb2xsZXJJbnB1dFN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmlucHV0LmFkZGVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZW50aXR5LmdldENvbXBvbmVudChDb250cm9sbGVySW5wdXRfMS5Db250cm9sbGVySW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjZW5lID0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgaW5wdXQuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVYUkhlbHBlcihpbnB1dCwgc2NlbmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmlucHV0LnJlbW92ZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KENvbnRyb2xsZXJJbnB1dF8xLkNvbnRyb2xsZXJJbnB1dCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2NlbmUgPSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBpbnB1dC5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5feHJIZWxwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVYUkhlbHBlcihpbnB1dCwgc2NlbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5feHJIZWxwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlciA9IHlpZWxkIHNjZW5lLmNyZWF0ZURlZmF1bHRYUkV4cGVyaWVuY2VBc3luYyhpbnB1dC54ck9wdGlvbnMgfHwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVGVsZXBvcnRhdGlvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICd4ckhlbHBlciBjcmVhdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5feHJIZWxwZXIuaW5wdXQub25Db250cm9sbGVyQWRkZWRPYnNlcnZhYmxlLmFkZCgoaW5wdXRTb3VyY2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRTb3VyY2Uub25Nb3Rpb25Db250cm9sbGVySW5pdE9ic2VydmFibGUuYWRkKChjb250cm9sbGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vZGl2aW5nRGVlcGVyL3dlYlhSL3dlYlhSSW5wdXRDb250cm9sbGVyU3VwcG9ydCNzb21lLXRlcm1zLWFuZC1jbGFzc2VzLXRvLWNsZWFyLXRoaW5ncy11cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Nb3Rpb25Db250cm9sbGVyQ29tcG9uZW50VHlwZSA9IFwidHJpZ2dlclwiIHwgXCJzcXVlZXplXCIgfCBcInRvdWNocGFkXCIgfCBcInRodW1ic3RpY2tcIiB8IFwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyLmhhbmRuZXNzID09IFwibGVmdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnbGVmdCBjb250cm9sbGVyICcgKyBjb250cm9sbGVyLnByb2ZpbGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdFRodW1ic3RpY2sgPSBpbnB1dC5vbkxlZnRUaHVtYnN0aWNrTW92ZSAmJiBjb250cm9sbGVyLmdldENvbXBvbmVudE9mVHlwZShcInRodW1ic3RpY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRUaHVtYnN0aWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRUaHVtYnN0aWNrLm9uQXhpc1ZhbHVlQ2hhbmdlZE9ic2VydmFibGUuYWRkKCh7IHgsIHkgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25MZWZ0VGh1bWJzdGlja01vdmUgJyArIHggKyAnLCcgKyB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uTGVmdFRodW1ic3RpY2tNb3ZlKHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdEJ1dHRvbnMgPSBpbnB1dC5vbkxlZnRCdXR0b25QcmVzcyAmJiBjb250cm9sbGVyLmdldEFsbENvbXBvbmVudHNPZlR5cGUoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRCdXR0b25zICYmIGxlZnRCdXR0b25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgbGVmdEJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5vbkJ1dHRvblN0YXRlQ2hhbmdlZE9ic2VydmFibGUuYWRkKChidXR0b25Db21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25MZWZ0QnV0dG9uUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25Db21wb25lbnQucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdvbkxlZnRCdXR0b25QcmVzcyAnICsgYnV0dG9uQ29tcG9uZW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQub25MZWZ0QnV0dG9uUHJlc3MoYnV0dG9uQ29tcG9uZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcXVlZXplQnV0dG9uID0gaW5wdXQub25MZWZ0U3F1ZWV6ZVByZXNzICYmIGNvbnRyb2xsZXIuZ2V0Q29tcG9uZW50T2ZUeXBlKFwic3F1ZWV6ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3F1ZWV6ZUJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcXVlZXplQnV0dG9uLm9uQnV0dG9uU3RhdGVDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoKGJ1dHRvbkNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uTGVmdFNxdWVlemVQcmVzcycsIGJ1dHRvbkNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ29tcG9uZW50LnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdvbkxlZnRTcXVlZXplUHJlc3MgJyArIGJ1dHRvbkNvbXBvbmVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuX3hySGVscGVyLnBvaW50ZXJTZWxlY3Rpb24uZ2V0TWVzaFVuZGVyUG9pbnRlcihpbnB1dFNvdXJjZS51bmlxdWVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQub25MZWZ0U3F1ZWV6ZVByZXNzKG1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckJ1dHRvbiA9IGlucHV0Lm9uTGVmdFRyaWdnZXJQcmVzcyAmJiBjb250cm9sbGVyLmdldENvbXBvbmVudE9mVHlwZShcInRyaWdnZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckJ1dHRvbi5vbkJ1dHRvblN0YXRlQ2hhbmdlZE9ic2VydmFibGUuYWRkKChidXR0b25Db21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbkxlZnRUcmlnZ2VyUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbXBvbmVudC5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25MZWZ0VHJpZ2dlclByZXNzICcgKyBidXR0b25Db21wb25lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLl94ckhlbHBlci5wb2ludGVyU2VsZWN0aW9uLmdldE1lc2hVbmRlclBvaW50ZXIoaW5wdXRTb3VyY2UudW5pcXVlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uTGVmdFRyaWdnZXJQcmVzcyhtZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udHJvbGxlci5oYW5kbmVzcyA9PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdyaWdodCBjb250cm9sbGVyICcgKyBjb250cm9sbGVyLnByb2ZpbGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRUaHVtYnN0aWNrID0gaW5wdXQub25SaWdodFRodW1ic3RpY2tNb3ZlICYmIGNvbnRyb2xsZXIuZ2V0Q29tcG9uZW50T2ZUeXBlKFwidGh1bWJzdGlja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmlnaHRUaHVtYnN0aWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0VGh1bWJzdGljay5vbkF4aXNWYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZCgoeyB4LCB5IH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ29uUmlnaHRUaHVtYnN0aWNrTW92ZSAnICsgeCArICcsJyArIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQub25SaWdodFRodW1ic3RpY2tNb3ZlKHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHRCdXR0b25zID0gaW5wdXQub25SaWdodEJ1dHRvblByZXNzICYmIGNvbnRyb2xsZXIuZ2V0QWxsQ29tcG9uZW50c09mVHlwZShcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmlnaHRCdXR0b25zICYmIHJpZ2h0QnV0dG9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHJpZ2h0QnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLm9uQnV0dG9uU3RhdGVDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoKGJ1dHRvbkNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblJpZ2h0QnV0dG9uUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25Db21wb25lbnQucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdvblJpZ2h0QnV0dG9uUHJlc3MgJyArIGJ1dHRvbkNvbXBvbmVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uUmlnaHRCdXR0b25QcmVzcyhidXR0b25Db21wb25lbnQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNxdWVlemVCdXR0b24gPSBpbnB1dC5vblJpZ2h0U3F1ZWV6ZVByZXNzICYmIGNvbnRyb2xsZXIuZ2V0Q29tcG9uZW50T2ZUeXBlKFwic3F1ZWV6ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3F1ZWV6ZUJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcXVlZXplQnV0dG9uLm9uQnV0dG9uU3RhdGVDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoKGJ1dHRvbkNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uUmlnaHRTcXVlZXplUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbXBvbmVudC5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25SaWdodFNxdWVlemVQcmVzcyAnICsgYnV0dG9uQ29tcG9uZW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5feHJIZWxwZXIucG9pbnRlclNlbGVjdGlvbi5nZXRNZXNoVW5kZXJQb2ludGVyKGlucHV0U291cmNlLnVuaXF1ZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vblJpZ2h0U3F1ZWV6ZVByZXNzKG1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpZ2dlckJ1dHRvbiA9IGlucHV0Lm9uUmlnaHRUcmlnZ2VyUHJlc3MgJiYgY29udHJvbGxlci5nZXRDb21wb25lbnRPZlR5cGUoXCJ0cmlnZ2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJCdXR0b24ub25CdXR0b25TdGF0ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZCgoYnV0dG9uQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25SaWdodFRyaWdnZXJQcmVzcycsIGJ1dHRvbkNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ29tcG9uZW50LnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdvblJpZ2h0VHJpZ2dlclByZXNzICcgKyBidXR0b25Db21wb25lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLl94ckhlbHBlci5wb2ludGVyU2VsZWN0aW9uLmdldE1lc2hVbmRlclBvaW50ZXIoaW5wdXRTb3VyY2UudW5pcXVlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uUmlnaHRUcmlnZ2VyUHJlc3MobWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbk1vdGlvbkNvbnRyb2xsZXJJbml0JywgY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25Nb3Rpb25Db250cm9sbGVySW5pdCAnICsgY29udHJvbGxlci5wcm9maWxlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIENvbnRyb2xsZXJJbnB1dFN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIGlucHV0OiB7IGNvbXBvbmVudHM6IFtDb250cm9sbGVySW5wdXRfMS5Db250cm9sbGVySW5wdXRdLCBsaXN0ZW46IHsgYWRkZWQ6IHRydWUsIHJlbW92ZWQ6IHRydWUgfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBDb250cm9sbGVySW5wdXRTeXN0ZW07XHJcbn0pKCk7XHJcbmV4cG9ydHMuQ29udHJvbGxlcklucHV0U3lzdGVtID0gQ29udHJvbGxlcklucHV0U3lzdGVtO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IEJBQllMT047Il0sInNvdXJjZVJvb3QiOiIifQ==