/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/ansi-html/index.js":
/*!*****************************************!*\
  !*** ./node_modules/ansi-html/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = ansiHTML

// Reference to https://github.com/sindresorhus/ansi-regex
var _regANSI = /(?:(?:\u001b\[)|\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\u001b[A-M]/

var _defColors = {
  reset: ['fff', '000'], // [FOREGROUD_COLOR, BACKGROUND_COLOR]
  black: '000',
  red: 'ff0000',
  green: '209805',
  yellow: 'e8bf03',
  blue: '0000ff',
  magenta: 'ff00ff',
  cyan: '00ffee',
  lightgrey: 'f0f0f0',
  darkgrey: '888'
}
var _styles = {
  30: 'black',
  31: 'red',
  32: 'green',
  33: 'yellow',
  34: 'blue',
  35: 'magenta',
  36: 'cyan',
  37: 'lightgrey'
}
var _openTags = {
  '1': 'font-weight:bold', // bold
  '2': 'opacity:0.5', // dim
  '3': '<i>', // italic
  '4': '<u>', // underscore
  '8': 'display:none', // hidden
  '9': '<del>' // delete
}
var _closeTags = {
  '23': '</i>', // reset italic
  '24': '</u>', // reset underscore
  '29': '</del>' // reset delete
}

;[0, 21, 22, 27, 28, 39, 49].forEach(function (n) {
  _closeTags[n] = '</span>'
})

/**
 * Converts text with ANSI color codes to HTML markup.
 * @param {String} text
 * @returns {*}
 */
function ansiHTML (text) {
  // Returns the text if the string has no ANSI escape code.
  if (!_regANSI.test(text)) {
    return text
  }

  // Cache opened sequence.
  var ansiCodes = []
  // Replace with markup.
  var ret = text.replace(/\033\[(\d+)*m/g, function (match, seq) {
    var ot = _openTags[seq]
    if (ot) {
      // If current sequence has been opened, close it.
      if (!!~ansiCodes.indexOf(seq)) { // eslint-disable-line no-extra-boolean-cast
        ansiCodes.pop()
        return '</span>'
      }
      // Open tag.
      ansiCodes.push(seq)
      return ot[0] === '<' ? ot : '<span style="' + ot + ';">'
    }

    var ct = _closeTags[seq]
    if (ct) {
      // Pop sequence
      ansiCodes.pop()
      return ct
    }
    return ''
  })

  // Make sure tags are closed.
  var l = ansiCodes.length
  ;(l > 0) && (ret += Array(l + 1).join('</span>'))

  return ret
}

/**
 * Customize colors.
 * @param {Object} colors reference to _defColors
 */
ansiHTML.setColors = function (colors) {
  if (typeof colors !== 'object') {
    throw new Error('`colors` parameter must be an Object.')
  }

  var _finalColors = {}
  for (var key in _defColors) {
    var hex = colors.hasOwnProperty(key) ? colors[key] : null
    if (!hex) {
      _finalColors[key] = _defColors[key]
      continue
    }
    if ('reset' === key) {
      if (typeof hex === 'string') {
        hex = [hex]
      }
      if (!Array.isArray(hex) || hex.length === 0 || hex.some(function (h) {
        return typeof h !== 'string'
      })) {
        throw new Error('The value of `' + key + '` property must be an Array and each item could only be a hex string, e.g.: FF0000')
      }
      var defHexColor = _defColors[key]
      if (!hex[0]) {
        hex[0] = defHexColor[0]
      }
      if (hex.length === 1 || !hex[1]) {
        hex = [hex[0]]
        hex.push(defHexColor[1])
      }

      hex = hex.slice(0, 2)
    } else if (typeof hex !== 'string') {
      throw new Error('The value of `' + key + '` property must be a hex string, e.g.: FF0000')
    }
    _finalColors[key] = hex
  }
  _setTags(_finalColors)
}

/**
 * Reset colors.
 */
ansiHTML.reset = function () {
  _setTags(_defColors)
}

/**
 * Expose tags, including open and close.
 * @type {Object}
 */
ansiHTML.tags = {}

if (Object.defineProperty) {
  Object.defineProperty(ansiHTML.tags, 'open', {
    get: function () { return _openTags }
  })
  Object.defineProperty(ansiHTML.tags, 'close', {
    get: function () { return _closeTags }
  })
} else {
  ansiHTML.tags.open = _openTags
  ansiHTML.tags.close = _closeTags
}

function _setTags (colors) {
  // reset all
  _openTags['0'] = 'font-weight:normal;opacity:1;color:#' + colors.reset[0] + ';background:#' + colors.reset[1]
  // inverse
  _openTags['7'] = 'color:#' + colors.reset[1] + ';background:#' + colors.reset[0]
  // dark grey
  _openTags['90'] = 'color:#' + colors.darkgrey

  for (var code in _styles) {
    var color = _styles[code]
    var oriColor = colors[color] || '000'
    _openTags[code] = 'color:#' + oriColor
    code = parseInt(code)
    _openTags[(code + 10).toString()] = 'background:#' + oriColor
  }
}

ansiHTML.reset()


/***/ }),

/***/ "./node_modules/babylonjs-gui/babylon.gui.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/babylonjs-gui/babylon.gui.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {!function(t,e){ true?module.exports=e(__webpack_require__(/*! babylonjs */ "babylonjs")):undefined}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(e,i){e.exports=t},function(t,e,i){"use strict";i.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}var s=i(0),a=function(){function t(e,i,r){void 0===i&&(i=t.UNITMODE_PIXEL),void 0===r&&(r=!0),this.unit=i,this.negativeValueAllowed=r,this._value=1,this.ignoreAdaptiveScaling=!1,this._value=e,this._originalUnit=i}return Object.defineProperty(t.prototype,"isPercentage",{get:function(){return this.unit===t.UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPixel",{get:function(){return this.unit===t.UNITMODE_PIXEL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"internalValue",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.getValueInPixel=function(t,e){return this.isPixel?this.getValue(t):this.getValue(t)*e},t.prototype.updateInPlace=function(e,i){return void 0===i&&(i=t.UNITMODE_PIXEL),this._value=e,this.unit=i,this},t.prototype.getValue=function(e){if(e&&!this.ignoreAdaptiveScaling&&this.unit!==t.UNITMODE_PERCENTAGE){var i=0,r=0;if(e.idealWidth&&(i=this._value*e.getSize().width/e.idealWidth),e.idealHeight&&(r=this._value*e.getSize().height/e.idealHeight),e.useSmallestIdeal&&e.idealWidth&&e.idealHeight)return window.innerWidth<window.innerHeight?i:r;if(e.idealWidth)return i;if(e.idealHeight)return r}return this._value},t.prototype.toString=function(e,i){switch(this.unit){case t.UNITMODE_PERCENTAGE:var r=100*this.getValue(e);return(i?r.toFixed(i):r)+"%";case t.UNITMODE_PIXEL:var n=this.getValue(e);return(i?n.toFixed(i):n)+"px"}return this.unit.toString()},t.prototype.fromString=function(e){var i=t._Regex.exec(e.toString());if(!i||0===i.length)return!1;var r=parseFloat(i[1]),n=this._originalUnit;if(this.negativeValueAllowed||r<0&&(r=0),4===i.length)switch(i[3]){case"px":n=t.UNITMODE_PIXEL;break;case"%":n=t.UNITMODE_PERCENTAGE,r/=100}return(r!==this._value||n!==this.unit)&&(this._value=r,this.unit=n,!0)},Object.defineProperty(t,"UNITMODE_PERCENTAGE",{get:function(){return t._UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UNITMODE_PIXEL",{get:function(){return t._UNITMODE_PIXEL},enumerable:!0,configurable:!0}),t._Regex=/(^-?\d*(\.\d+)?)(%|px)?/,t._UNITMODE_PERCENTAGE=0,t._UNITMODE_PIXEL=1,t}(),h=[new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0)],l=[new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0),new s.Vector2(0,0)],u=new s.Vector2(0,0),c=new s.Vector2(0,0),_=function(){function t(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r}return t.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r},t.CombineToRef=function(t,e,i){var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.left+t.width,e.left+e.width),s=Math.max(t.top+t.height,e.top+e.height);i.left=r,i.top=n,i.width=o-r,i.height=s-n},t.prototype.transformToRef=function(t,e){h[0].copyFromFloats(this.left,this.top),h[1].copyFromFloats(this.left+this.width,this.top),h[2].copyFromFloats(this.left+this.width,this.top+this.height),h[3].copyFromFloats(this.left,this.top+this.height),u.copyFromFloats(Number.MAX_VALUE,Number.MAX_VALUE),c.copyFromFloats(0,0);for(var i=0;i<4;i++)t.transformCoordinates(h[i].x,h[i].y,l[i]),u.x=Math.floor(Math.min(u.x,l[i].x)),u.y=Math.floor(Math.min(u.y,l[i].y)),c.x=Math.ceil(Math.max(c.x,l[i].x)),c.y=Math.ceil(Math.max(c.y,l[i].y));e.left=u.x,e.top=u.y,e.width=c.x-u.x,e.height=c.y-u.y},t.prototype.isEqualsTo=function(t){return this.left===t.left&&(this.top===t.top&&(this.width===t.width&&this.height===t.height))},t.Empty=function(){return new t(0,0,0,0)},t}(),d=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y)||this;return r.buttonIndex=i,r}return n(e,t),e}(s.Vector2),f=function(){function t(t,e,i,r,n,o){this.m=new Float32Array(6),this.fromValues(t,e,i,r,n,o)}return t.prototype.fromValues=function(t,e,i,r,n,o){return this.m[0]=t,this.m[1]=e,this.m[2]=i,this.m[3]=r,this.m[4]=n,this.m[5]=o,this},t.prototype.determinant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},t.prototype.invertToRef=function(t){var e=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],o=this.m[4],a=this.m[5],h=this.determinant();if(h<s.Epsilon*s.Epsilon)return t.m[0]=0,t.m[1]=0,t.m[2]=0,t.m[3]=0,t.m[4]=0,t.m[5]=0,this;var l=1/h,u=r*a-n*o,c=i*o-e*a;return t.m[0]=n*l,t.m[1]=-i*l,t.m[2]=-r*l,t.m[3]=e*l,t.m[4]=u*l,t.m[5]=c*l,this},t.prototype.multiplyToRef=function(t,e){var i=this.m[0],r=this.m[1],n=this.m[2],o=this.m[3],s=this.m[4],a=this.m[5],h=t.m[0],l=t.m[1],u=t.m[2],c=t.m[3],_=t.m[4],d=t.m[5];return e.m[0]=i*h+r*u,e.m[1]=i*l+r*c,e.m[2]=n*h+o*u,e.m[3]=n*l+o*c,e.m[4]=s*h+a*u+_,e.m[5]=s*l+a*c+d,this},t.prototype.transformCoordinates=function(t,e,i){return i.x=t*this.m[0]+e*this.m[2]+this.m[4],i.y=t*this.m[1]+e*this.m[3]+this.m[5],this},t.Identity=function(){return new t(1,0,0,1,0,0)},t.TranslationToRef=function(t,e,i){i.fromValues(1,0,0,1,t,e)},t.ScalingToRef=function(t,e,i){i.fromValues(t,0,0,e,0,0)},t.RotationToRef=function(t,e){var i=Math.sin(t),r=Math.cos(t);e.fromValues(r,i,-i,r,0,0)},t.ComposeToRef=function(e,i,r,n,o,s,a){t.TranslationToRef(e,i,t._TempPreTranslationMatrix),t.ScalingToRef(n,o,t._TempScalingMatrix),t.RotationToRef(r,t._TempRotationMatrix),t.TranslationToRef(-e,-i,t._TempPostTranslationMatrix),t._TempPreTranslationMatrix.multiplyToRef(t._TempScalingMatrix,t._TempCompose0),t._TempCompose0.multiplyToRef(t._TempRotationMatrix,t._TempCompose1),s?(t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,t._TempCompose2),t._TempCompose2.multiplyToRef(s,a)):t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,a)},t._TempPreTranslationMatrix=t.Identity(),t._TempPostTranslationMatrix=t.Identity(),t._TempRotationMatrix=t.Identity(),t._TempScalingMatrix=t.Identity(),t._TempCompose0=t.Identity(),t._TempCompose1=t.Identity(),t._TempCompose2=t.Identity(),t}(),p=function(){function t(e){this.name=e,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=_.Empty(),this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this._width=new a(1,a.UNITMODE_PERCENTAGE,!1),this._height=new a(1,a.UNITMODE_PERCENTAGE,!1),this._color="",this._style=null,this._horizontalAlignment=t.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=t.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=_.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=_.Empty(),this._cachedParentMeasure=_.Empty(),this._paddingLeft=new a(0),this._paddingRight=new a(0),this._paddingTop=new a(0),this._paddingBottom=new a(0),this._left=new a(0),this._top=new a(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=f.Identity(),this._invertTransformMatrix=f.Identity(),this._transformedPosition=s.Vector2.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._fontSet=!1,this._dummyVector2=s.Vector2.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._isEnabled=!0,this._disabledColor="#9a9a9a",this._disabledColorItem="#6a6a6a",this._rebuildLayout=!1,this._customData={},this._isClipped=!1,this._automaticSize=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this.clipChildren=!0,this.clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._shadowColor="black",this.hoverCursor="",this._linkOffsetX=new a(0),this._linkOffsetY=new a(0),this.onWheelObservable=new s.Observable,this.onPointerMoveObservable=new s.Observable,this.onPointerOutObservable=new s.Observable,this.onPointerDownObservable=new s.Observable,this.onPointerUpObservable=new s.Observable,this.onPointerClickObservable=new s.Observable,this.onPointerEnterObservable=new s.Observable,this.onDirtyObservable=new s.Observable,this.onBeforeDrawObservable=new s.Observable,this.onAfterDrawObservable=new s.Observable,this._tmpMeasureA=new _(0,0,0,0)}return Object.defineProperty(t.prototype,"shadowOffsetX",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffsetY",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowBlur",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur!==t&&(this._shadowBlur=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontOffset",{get:function(){return this._fontOffset},set:function(t){this._fontOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHighlighted",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformCenterY",{get:function(){return this._transformCenterY},set:function(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformCenterX",{get:function(){return this._transformCenterX},set:function(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalAlignment",{get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlignment",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthInPixels",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.width=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightInPixels",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.height=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontSet?this._fontFamily:""},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){var e=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add(function(){e._markAsDirty(),e._resetFontCache()})),this._markAsDirty(),this._resetFontCache()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isFontSizeInPercentage",{get:function(){return this._fontSize.isPercentage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSizeInPixels",{get:function(){var t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.fontSize=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"notRenderable",{get:function(){return this._doNotRender},set:function(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkedMesh",{get:function(){return this._linkedMesh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this._paddingLeft.toString(this._host)},set:function(t){this._paddingLeft.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeftInPixels",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingLeft=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this._paddingRight.toString(this._host)},set:function(t){this._paddingRight.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRightInPixels",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingRight=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this._paddingTop.toString(this._host)},set:function(t){this._paddingTop.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTopInPixels",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingTop=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottom",{get:function(){return this._paddingBottom.toString(this._host)},set:function(t){this._paddingBottom.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottomInPixels",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingBottom=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left.toString(this._host)},set:function(t){this._left.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftInPixels",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.left=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._top.toString(this._host)},set:function(t){this._top.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topInPixels",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.top=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetX",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetXInPixels",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.linkOffsetX=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetY",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkOffsetYInPixels",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.linkOffsetY=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabledColor",{get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabledColorItem",{get:function(){return this._disabledColorItem},set:function(t){this._disabledColorItem!==t&&(this._disabledColorItem=t,this._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype._getTypeName=function(){return"Control"},t.prototype.getAscendantOfClass=function(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null},t.prototype._resetFontCache=function(){this._fontSet=!0,this._markAsDirty()},t.prototype.isAscendant=function(t){return!!this.parent&&(this.parent===t||this.parent.isAscendant(t))},t.prototype.getLocalCoordinates=function(t){var e=s.Vector2.Zero();return this.getLocalCoordinatesToRef(t,e),e},t.prototype.getLocalCoordinatesToRef=function(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this},t.prototype.getParentLocalCoordinates=function(t){var e=s.Vector2.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e},t.prototype.moveToVector3=function(e,i){if(this._host&&this.parent===this._host._rootContainer){this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP;var r=this._host._getGlobalViewport(i),n=s.Vector3.Project(e,s.Matrix.Identity(),i.getTransformMatrix(),r);this._moveToProjectedPosition(n),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else s.Tools.Error("Cannot move a control to a vector3 if the control is not at root level")},t.prototype.getDescendantsToRef=function(t,e,i){void 0===e&&(e=!1)},t.prototype.getDescendants=function(t,e){var i=new Array;return this.getDescendantsToRef(i,t,e),i},t.prototype.linkWithMesh=function(e){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)e&&s.Tools.Error("Cannot link a control to a mesh if the control is not at root level");else{var i=this._host._linkedControls.indexOf(this);if(-1!==i)return this._linkedMesh=e,void(e||this._host._linkedControls.splice(i,1));e&&(this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=e,this._host._linkedControls.push(this))}},t.prototype._moveToProjectedPosition=function(t){var e=this._left.getValue(this._host),i=this._top.getValue(this._host),r=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,n=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(Math.abs(r-e)<.5&&(r=e),Math.abs(n-i)<.5&&(n=i)),this.left=r+"px",this.top=n+"px",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty()},t.prototype._offsetLeft=function(t){this._isDirty=!0,this._currentMeasure.left+=t},t.prototype._offsetTop=function(t){this._isDirty=!0,this._currentMeasure.top+=t},t.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()},t.prototype._flagDescendantsAsMatrixDirty=function(){},t.prototype._intersectsRect=function(t){return this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),!(this._tmpMeasureA.left>=t.left+t.width)&&(!(this._tmpMeasureA.top>=t.top+t.height)&&(!(this._tmpMeasureA.left+this._tmpMeasureA.width<=t.left)&&!(this._tmpMeasureA.top+this._tmpMeasureA.height<=t.top)))},t.prototype.invalidateRect=function(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization)if(this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),_.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA),this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var t=this.shadowOffsetX,e=this.shadowOffsetY,i=this.shadowBlur,r=Math.min(Math.min(t,0)-2*i,0),n=Math.max(Math.max(t,0)+2*i,0),o=Math.min(Math.min(e,0)-2*i,0),s=Math.max(Math.max(e,0)+2*i,0);this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+r),Math.floor(this._tmpMeasureA.top+o),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+n),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+s))}else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left),Math.floor(this._tmpMeasureA.top),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height))},t.prototype._markAsDirty=function(t){void 0===t&&(t=!1),(this._isVisible||t)&&(this._isDirty=!0,this._host&&this._host.markAsDirty())},t.prototype._markAllAsDirty=function(){this._markAsDirty(),this._font&&this._prepareFont()},t.prototype._link=function(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())},t.prototype._transform=function(t){if(this._isMatrixDirty||1!==this._scaleX||1!==this._scaleY||0!==this._rotation){var e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),f.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix))}},t.prototype._renderHighlight=function(t){this.isHighlighted&&(t.save(),t.strokeStyle="#4affff",t.lineWidth=2,this._renderHighlightSpecific(t),t.restore())},t.prototype._renderHighlightSpecific=function(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)},t.prototype._applyStates=function(e){this._isFontSizeInPercentage&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(e.font=this._font),this._color&&(e.fillStyle=this._color),t.AllowAlphaInheritance?e.globalAlpha*=this._alpha:this._alphaSet&&(e.globalAlpha=this.parent?this.parent.alpha*this._alpha:this._alpha)},t.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this.host._numLayoutCalls++,this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);var i=0;do{this._rebuildLayout=!1,this._processMeasures(t,e),i++}while(this._rebuildLayout&&i<3);i>=3&&s.Logger.Error("Layout cycle detected in GUI (Control name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0},t.prototype._processMeasures=function(t,e){this._currentMeasure.copyFrom(t),this._preMeasure(t,e),this._measure(),this._computeAlignment(t,e),this._currentMeasure.left=0|this._currentMeasure.left,this._currentMeasure.top=0|this._currentMeasure.top,this._currentMeasure.width=0|this._currentMeasure.width,this._currentMeasure.height=0|this._currentMeasure.height,this._additionalProcessing(t,e),this._cachedParentMeasure.copyFrom(t),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)},t.prototype._evaluateClippingState=function(t){if(this.parent&&this.parent.clipChildren){if(this._currentMeasure.left>t.left+t.width)return void(this._isClipped=!0);if(this._currentMeasure.left+this._currentMeasure.width<t.left)return void(this._isClipped=!0);if(this._currentMeasure.top>t.top+t.height)return void(this._isClipped=!0);if(this._currentMeasure.top+this._currentMeasure.height<t.top)return void(this._isClipped=!0)}this._isClipped=!1},t.prototype._measure=function(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host)},t.prototype._computeAlignment=function(e,i){var r=this._currentMeasure.width,n=this._currentMeasure.height,o=e.width,s=e.height,a=0,h=0;switch(this.horizontalAlignment){case t.HORIZONTAL_ALIGNMENT_LEFT:a=0;break;case t.HORIZONTAL_ALIGNMENT_RIGHT:a=o-r;break;case t.HORIZONTAL_ALIGNMENT_CENTER:a=(o-r)/2}switch(this.verticalAlignment){case t.VERTICAL_ALIGNMENT_TOP:h=0;break;case t.VERTICAL_ALIGNMENT_BOTTOM:h=s-n;break;case t.VERTICAL_ALIGNMENT_CENTER:h=(s-n)/2}this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=o*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=o*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=o*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=s*this._paddingTop.getValue(this._host),this._currentMeasure.height-=s*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=s*this._paddingBottom.getValue(this._host),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=o*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=s*this._top.getValue(this._host),this._currentMeasure.left+=a,this._currentMeasure.top+=h},t.prototype._preMeasure=function(t,e){},t.prototype._additionalProcessing=function(t,e){},t.prototype._clipForChildren=function(t){},t.prototype._clip=function(e,i){if(e.beginPath(),t._ClipMeasure.copyFrom(this._currentMeasure),i){i.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);var r=new _(0,0,0,0);r.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),r.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),r.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-r.left,r.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-r.top,t._ClipMeasure.copyFrom(r)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var n=this.shadowOffsetX,o=this.shadowOffsetY,s=this.shadowBlur,a=Math.min(Math.min(n,0)-2*s,0),h=Math.max(Math.max(n,0)+2*s,0),l=Math.min(Math.min(o,0)-2*s,0),u=Math.max(Math.max(o,0)+2*s,0);e.rect(t._ClipMeasure.left+a,t._ClipMeasure.top+l,t._ClipMeasure.width+h-a,t._ClipMeasure.height+u-l)}else e.rect(t._ClipMeasure.left,t._ClipMeasure.top,t._ClipMeasure.width,t._ClipMeasure.height);e.clip()},t.prototype._render=function(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(this.host._numRenderCalls++,t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)},t.prototype._draw=function(t,e){},t.prototype.contains=function(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,!(t<this._currentMeasure.left)&&(!(t>this._currentMeasure.left+this._currentMeasure.width)&&(!(e<this._currentMeasure.top)&&(!(e>this._currentMeasure.top+this._currentMeasure.height)&&(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),!0))))},t.prototype._processPicking=function(t,e,i,r,n,o,s){return!!this._isEnabled&&(!(!this.isHitTestVisible||!this.isVisible||this._doNotRender)&&(!!this.contains(t,e)&&(this._processObservables(i,t,e,r,n,o,s),!0)))},t.prototype._onPointerMove=function(t,e,i){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)&&null!=this.parent&&this.parent._onPointerMove(t,e,i)},t.prototype._onPointerEnter=function(t){return!!this._isEnabled&&(!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this)&&null!=this.parent&&this.parent._onPointerEnter(t),!0))},t.prototype._onPointerOut=function(t,e){if(void 0===e&&(e=!1),e||this._isEnabled&&t!==this){this._enterCount=0;var i=!0;t.isAscendant(this)||(i=this.onPointerOutObservable.notifyObservers(this,-1,t,this)),i&&null!=this.parent&&this.parent._onPointerOut(t,e)}},t.prototype._onPointerDown=function(t,e,i,r){return this._onPointerEnter(this),0===this._downCount&&(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new d(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerDown(t,e,i,r),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){if(this._isEnabled){this._downCount=0,delete this._downPointerIds[i];var o=n;n&&(this._enterCount>0||-1===this._enterCount)&&(o=this.onPointerClickObservable.notifyObservers(new d(e,r),-1,t,this)),this.onPointerUpObservable.notifyObservers(new d(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerUp(t,e,i,r,o)}},t.prototype._forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,s.Vector2.Zero(),t,0,!0);else for(var e in this._downPointerIds)this._onPointerUp(this,s.Vector2.Zero(),+e,0,!0)},t.prototype._onWheelScroll=function(t,e){this._isEnabled&&(this.onWheelObservable.notifyObservers(new s.Vector2(t,e))&&null!=this.parent&&this.parent._onWheelScroll(t,e))},t.prototype._processObservables=function(t,e,i,r,n,o,a){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===s.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,r);var h=this._host._lastControlOver[r];return h&&h!==this&&h._onPointerOut(this),h!==this&&this._onPointerEnter(this),this._host._lastControlOver[r]=this,!0}return t===s.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,r,n),this._host._registerLastControlDown(this,r),this._host._lastPickedControl=this,!0):t===s.PointerEventTypes.POINTERUP?(this._host._lastControlDown[r]&&this._host._lastControlDown[r]._onPointerUp(this,this._dummyVector2,r,n,!0),delete this._host._lastControlDown[r],!0):!(t!==s.PointerEventTypes.POINTERWHEEL||!this._host._lastControlOver[r])&&(this._host._lastControlOver[r]._onWheelScroll(o,a),!0)},t.prototype._prepareFont=function(){(this._font||this._fontSet)&&(this._style?this._font=this._style.fontStyle+" "+this._style.fontWeight+" "+this.fontSizeInPixels+"px "+this._style.fontFamily:this._font=this._fontStyle+" "+this._fontWeight+" "+this.fontSizeInPixels+"px "+this._fontFamily,this._fontOffset=t._GetFontOffset(this._font))},t.prototype.dispose=function(){(this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this.onWheelObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host)&&(this._host._linkedControls.indexOf(this)>-1&&this.linkWithMesh(null))},Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_LEFT",{get:function(){return t._HORIZONTAL_ALIGNMENT_LEFT},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_RIGHT",{get:function(){return t._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HORIZONTAL_ALIGNMENT_CENTER",{get:function(){return t._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_TOP",{get:function(){return t._VERTICAL_ALIGNMENT_TOP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_BOTTOM",{get:function(){return t._VERTICAL_ALIGNMENT_BOTTOM},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL_ALIGNMENT_CENTER",{get:function(){return t._VERTICAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),t._GetFontOffset=function(e){if(t._FontHeightSizes[e])return t._FontHeightSizes[e];var i=document.createElement("span");i.innerHTML="Hg",i.style.font=e;var r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="0px",r.style.verticalAlign="bottom";var n=document.createElement("div");n.appendChild(i),n.appendChild(r),document.body.appendChild(n);var o=0,s=0;try{s=r.getBoundingClientRect().top-i.getBoundingClientRect().top,r.style.verticalAlign="baseline",o=r.getBoundingClientRect().top-i.getBoundingClientRect().top}finally{document.body.removeChild(n)}var a={ascent:o,height:s,descent:s-o};return t._FontHeightSizes[e]=a,a},t.drawEllipse=function(t,e,i,r,n){n.translate(t,e),n.scale(i,r),n.beginPath(),n.arc(0,0,1,0,2*Math.PI),n.closePath(),n.scale(1/i,1/r),n.translate(-t,-e)},t.AllowAlphaInheritance=!1,t._ClipMeasure=new _(0,0,0,0),t._HORIZONTAL_ALIGNMENT_LEFT=0,t._HORIZONTAL_ALIGNMENT_RIGHT=1,t._HORIZONTAL_ALIGNMENT_CENTER=2,t._VERTICAL_ALIGNMENT_TOP=0,t._VERTICAL_ALIGNMENT_BOTTOM=1,t._VERTICAL_ALIGNMENT_CENTER=2,t._FontHeightSizes={},t.AddHeader=function(){},t}();s._TypeStore.RegisteredTypes["BABYLON.GUI.Control"]=p;var g=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._children=new Array,i._measureForChildren=_.Empty(),i._background="",i._adaptWidthToChildren=!1,i._adaptHeightToChildren=!1,i.logLayoutCycleErrors=!1,i.maxLayoutCycle=3,i}return n(e,t),Object.defineProperty(e.prototype,"adaptHeightToChildren",{get:function(){return this._adaptHeightToChildren},set:function(t){this._adaptHeightToChildren!==t&&(this._adaptHeightToChildren=t,t&&(this.height="100%"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptWidthToChildren",{get:function(){return this._adaptWidthToChildren},set:function(t){this._adaptWidthToChildren!==t&&(this._adaptWidthToChildren=t,t&&(this.width="100%"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Container"},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this.children;t<e.length;t++){e[t]._markMatrixAsDirty()}},e.prototype.getChildByName=function(t){for(var e=0,i=this.children;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},e.prototype.getChildByType=function(t,e){for(var i=0,r=this.children;i<r.length;i++){var n=r[i];if(n.typeName===e)return n}return null},e.prototype.containsControl=function(t){return-1!==this.children.indexOf(t)},e.prototype.addControl=function(t){return t?-1!==this._children.indexOf(t)?this:(t._link(this._host),t._markAllAsDirty(),this._reOrderControl(t),this._markAsDirty(),this):this},e.prototype.clearControls=function(){for(var t=0,e=this.children.slice();t<e.length;t++){var i=e[t];this.removeControl(i)}return this},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null),t.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(t),this._markAsDirty(),this},e.prototype._reOrderControl=function(t){this.removeControl(t);for(var e=!1,i=0;i<this._children.length;i++)if(this._children[i].zIndex>t.zIndex){this._children.splice(i,0,t),e=!0;break}e||this._children.push(t),t.parent=this,this._markAsDirty()},e.prototype._offsetLeft=function(e){t.prototype._offsetLeft.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetLeft(e)}},e.prototype._offsetTop=function(e){t.prototype._offsetTop.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetTop(e)}},e.prototype._markAllAsDirty=function(){t.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()},e.prototype._localDraw=function(t){this._background&&(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.restore())},e.prototype._link=function(e){t.prototype._link.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._link(e)}},e.prototype._beforeLayout=function(){},e.prototype._processMeasures=function(e,i){!this._isDirty&&this._cachedParentMeasure.isEqualsTo(e)||(t.prototype._processMeasures.call(this,e,i),this._evaluateClippingState(e))},e.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this.host._numLayoutCalls++,this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var i=0;e.save(),this._applyStates(e),this._beforeLayout();do{var r=-1,n=-1;if(this._rebuildLayout=!1,this._processMeasures(t,e),!this._isClipped){for(var o=0,a=this._children;o<a.length;o++){var h=a[o];h._tempParentMeasure.copyFrom(this._measureForChildren),h._layout(this._measureForChildren,e)&&(this.adaptWidthToChildren&&h._width.isPixel&&(r=Math.max(r,h._currentMeasure.width)),this.adaptHeightToChildren&&h._height.isPixel&&(n=Math.max(n,h._currentMeasure.height)))}this.adaptWidthToChildren&&r>=0&&this.width!==r+"px"&&(this.width=r+"px",this._rebuildLayout=!0),this.adaptHeightToChildren&&n>=0&&this.height!==n+"px"&&(this.height=n+"px",this._rebuildLayout=!0),this._postMeasure()}i++}while(this._rebuildLayout&&i<this.maxLayoutCycle);return i>=3&&this.logLayoutCycleErrors&&s.Logger.Error("Layout cycle detected in GUI (Container name="+this.name+", uniqueId="+this.uniqueId+")"),e.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0},e.prototype._postMeasure=function(){},e.prototype._draw=function(t,e){this._localDraw(t),this.clipChildren&&this._clipForChildren(t);for(var i=0,r=this._children;i<r.length;i++){var n=r[i];e&&!n._intersectsRect(e)||n._render(t,e)}},e.prototype.getDescendantsToRef=function(t,e,i){if(void 0===e&&(e=!1),this.children)for(var r=0;r<this.children.length;r++){var n=this.children[r];i&&!i(n)||t.push(n),e||n.getDescendantsToRef(t,!1,i)}},e.prototype._processPicking=function(e,i,r,n,o,s,a){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;for(var h=this._children.length-1;h>=0;h--){var l=this._children[h];if(l._processPicking(e,i,r,n,o,s,a))return l.hoverCursor&&this._host._changeCursor(l.hoverCursor),!0}return!!this.isHitTestVisible&&this._processObservables(r,e,i,n,o,s,a)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(this._currentMeasure)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this.children.length-1;e>=0;e--)this.children[e].dispose()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Container"]=g;var b,m=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i._cornerRadius=0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){t<0&&(t=0),this._cornerRadius!==t&&(this._cornerRadius=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Rectangle"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._background&&(t.fillStyle=this._background,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.fill()):t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._thickness&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.stroke()):t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._drawRoundedRect=function(t,e){void 0===e&&(e=0);var i=this._currentMeasure.left+e,r=this._currentMeasure.top+e,n=this._currentMeasure.width-2*e,o=this._currentMeasure.height-2*e,s=Math.min(o/2-2,Math.min(n/2-2,this._cornerRadius));t.beginPath(),t.moveTo(i+s,r),t.lineTo(i+n-s,r),t.quadraticCurveTo(i+n,r,i+n,r+s),t.lineTo(i+n,r+o-s),t.quadraticCurveTo(i+n,r+o,i+n-s,r+o),t.lineTo(i+s,r+o),t.quadraticCurveTo(i,r+o,i,r+o-s),t.lineTo(i,r+s),t.quadraticCurveTo(i,r,i+s,r),t.closePath()},e.prototype._clipForChildren=function(t){this._cornerRadius&&(this._drawRoundedRect(t,this._thickness),t.clip())},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Rectangle"]=m,function(t){t[t.Clip=0]="Clip",t[t.WordWrap=1]="WordWrap",t[t.Ellipsis=2]="Ellipsis"}(b||(b={}));var y=function(t){function e(e,i){void 0===i&&(i="");var r=t.call(this,e)||this;return r.name=e,r._text="",r._textWrapping=b.Clip,r._textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,r._textVerticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,r._resizeToFit=!1,r._lineSpacing=new a(0),r._outlineWidth=0,r._outlineColor="white",r.onTextChangedObservable=new s.Observable,r.onLinesReadyObservable=new s.Observable,r.text=i,r}return n(e,t),Object.defineProperty(e.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeToFit",{get:function(){return this._resizeToFit},set:function(t){this._resizeToFit!==t&&(this._resizeToFit=t,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWrapping",{get:function(){return this._textWrapping},set:function(t){this._textWrapping!==t&&(this._textWrapping=+t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHorizontalAlignment",{get:function(){return this._textHorizontalAlignment},set:function(t){this._textHorizontalAlignment!==t&&(this._textHorizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textVerticalAlignment",{get:function(){return this._textVerticalAlignment},set:function(t){this._textVerticalAlignment!==t&&(this._textVerticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineSpacing",{get:function(){return this._lineSpacing.toString(this._host)},set:function(t){this._lineSpacing.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineWidth",{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(t){this._outlineColor!==t&&(this._outlineColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"TextBlock"},e.prototype._processMeasures=function(e,i){this._fontOffset||(this._fontOffset=p._GetFontOffset(i.font)),t.prototype._processMeasures.call(this,e,i),this._lines=this._breakLines(this._currentMeasure.width,i),this.onLinesReadyObservable.notifyObservers(this);for(var r=0,n=0;n<this._lines.length;n++){var o=this._lines[n];o.width>r&&(r=o.width)}if(this._resizeToFit){if(this._textWrapping===b.Clip){var s=this.paddingLeftInPixels+this.paddingRightInPixels+r;s!==this._width.internalValue&&(this._width.updateInPlace(s,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}var h=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*this._lines.length;if(this._lines.length>0&&0!==this._lineSpacing.internalValue){var l=0;l=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),h+=(this._lines.length-1)*l}h!==this._height.internalValue&&(this._height.updateInPlace(h,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}},e.prototype._drawText=function(t,e,i,r){var n=this._currentMeasure.width,o=0;switch(this._textHorizontalAlignment){case p.HORIZONTAL_ALIGNMENT_LEFT:o=0;break;case p.HORIZONTAL_ALIGNMENT_RIGHT:o=n-e;break;case p.HORIZONTAL_ALIGNMENT_CENTER:o=(n-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&r.strokeText(t,this._currentMeasure.left+o,i),r.fillText(t,this._currentMeasure.left+o,i)},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._renderLines(t),t.restore()},e.prototype._applyStates=function(e){t.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor)},e.prototype._breakLines=function(t,e){var i=[],r=this.text.split("\n");if(this._textWrapping===b.Ellipsis)for(var n=0,o=r;n<o.length;n++){var s=o[n];i.push(this._parseLineEllipsis(s,t,e))}else if(this._textWrapping===b.WordWrap)for(var a=0,h=r;a<h.length;a++){s=h[a];i.push.apply(i,this._parseLineWordWrap(s,t,e))}else for(var l=0,u=r;l<u.length;l++){s=u[l];i.push(this._parseLine(s,e))}return i},e.prototype._parseLine=function(t,e){return void 0===t&&(t=""),{text:t,width:e.measureText(t).width}},e.prototype._parseLineEllipsis=function(t,e,i){void 0===t&&(t="");var r=i.measureText(t).width;for(r>e&&(t+="…");t.length>2&&r>e;)t=t.slice(0,-2)+"…",r=i.measureText(t).width;return{text:t,width:r}},e.prototype._parseLineWordWrap=function(t,e,i){void 0===t&&(t="");for(var r=[],n=t.split(" "),o=0,s=0;s<n.length;s++){var a=s>0?t+" "+n[s]:n[0],h=i.measureText(a).width;h>e&&s>0?(r.push({text:t,width:o}),t=n[s],o=i.measureText(t).width):(o=h,t=a)}return r.push({text:t,width:o}),r},e.prototype._renderLines=function(t){var e=this._currentMeasure.height,i=0;switch(this._textVerticalAlignment){case p.VERTICAL_ALIGNMENT_TOP:i=this._fontOffset.ascent;break;case p.VERTICAL_ALIGNMENT_BOTTOM:i=e-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case p.VERTICAL_ALIGNMENT_CENTER:i=this._fontOffset.ascent+(e-this._fontOffset.height*this._lines.length)/2}i+=this._currentMeasure.top;for(var r=0;r<this._lines.length;r++){var n=this._lines[r];0!==r&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?i+=this._lineSpacing.getValue(this._host):i+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(n.text,n.width,i,t),i+=this._fontOffset.height}},e.prototype.computeExpectedHeight=function(){if(this.text&&this.widthInPixels){var t=document.createElement("canvas").getContext("2d");if(t){this._applyStates(t),this._fontOffset||(this._fontOffset=p._GetFontOffset(t.font));var e=this._lines?this._lines:this._breakLines(this.widthInPixels-this.paddingLeftInPixels-this.paddingRightInPixels,t),i=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*e.length;if(e.length>0&&0!==this._lineSpacing.internalValue){var r=0;r=this._lineSpacing.isPixel?this._lineSpacing.getValue(this._host):this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height),i+=(e.length-1)*r}return i}}return 0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onTextChangedObservable.clear()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.TextBlock"]=y;var v=function(t){function e(i,r){void 0===r&&(r=null);var n=t.call(this,i)||this;return n.name=i,n._workingCanvas=null,n._loaded=!1,n._stretch=e.STRETCH_FILL,n._autoScale=!1,n._sourceLeft=0,n._sourceTop=0,n._sourceWidth=0,n._sourceHeight=0,n._svgAttributesComputationCompleted=!1,n._isSVG=!1,n._cellWidth=0,n._cellHeight=0,n._cellId=-1,n._populateNinePatchSlicesFromImage=!1,n.onImageLoadedObservable=new s.Observable,n.onSVGAttributesComputedObservable=new s.Observable,n.source=r,n}return n(e,t),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"populateNinePatchSlicesFromImage",{get:function(){return this._populateNinePatchSlicesFromImage},set:function(t){this._populateNinePatchSlicesFromImage!==t&&(this._populateNinePatchSlicesFromImage=t,this._populateNinePatchSlicesFromImage&&this._loaded&&this._extractNinePatchSliceDataFromImage())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detectPointerOnOpaqueOnly",{get:function(){return this._detectPointerOnOpaqueOnly},set:function(t){this._detectPointerOnOpaqueOnly!==t&&(this._detectPointerOnOpaqueOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceLeft",{get:function(){return this._sliceLeft},set:function(t){this._sliceLeft!==t&&(this._sliceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceRight",{get:function(){return this._sliceRight},set:function(t){this._sliceRight!==t&&(this._sliceRight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceTop",{get:function(){return this._sliceTop},set:function(t){this._sliceTop!==t&&(this._sliceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceBottom",{get:function(){return this._sliceBottom},set:function(t){this._sliceBottom!==t&&(this._sliceBottom=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceLeft",{get:function(){return this._sourceLeft},set:function(t){this._sourceLeft!==t&&(this._sourceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceTop",{get:function(){return this._sourceTop},set:function(t){this._sourceTop!==t&&(this._sourceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceWidth",{get:function(){return this._sourceWidth},set:function(t){this._sourceWidth!==t&&(this._sourceWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceHeight",{get:function(){return this._sourceHeight},set:function(t){this._sourceHeight!==t&&(this._sourceHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSVG",{get:function(){return this._isSVG},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgAttributesComputationCompleted",{get:function(){return this._svgAttributesComputationCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScale",{get:function(){return this._autoScale},set:function(t){this._autoScale!==t&&(this._autoScale=t,t&&this._loaded&&this.synchronizeSizeWithContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stretch",{get:function(){return this._stretch},set:function(t){this._stretch!==t&&(this._stretch=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._rotate90=function(t,i){void 0===i&&(i=!1);var r=document.createElement("canvas"),n=r.getContext("2d"),o=this._domImage.width,s=this._domImage.height;r.width=s,r.height=o,n.translate(r.width/2,r.height/2),n.rotate(t*Math.PI/2),n.drawImage(this._domImage,0,0,o,s,-o/2,-s/2,o,s);var a=r.toDataURL("image/jpg"),h=new e(this.name+"rotated",a);return i&&(h._stretch=this._stretch,h._autoScale=this._autoScale,h._cellId=this._cellId,h._cellWidth=t%1?this._cellHeight:this._cellWidth,h._cellHeight=t%1?this._cellWidth:this._cellHeight),this._handleRotationForSVGImage(this,h,t),h},e.prototype._handleRotationForSVGImage=function(t,e,i){var r=this;t._isSVG&&(t._svgAttributesComputationCompleted?(this._rotate90SourceProperties(t,e,i),this._markAsDirty()):t.onSVGAttributesComputedObservable.addOnce(function(){r._rotate90SourceProperties(t,e,i),r._markAsDirty()}))},e.prototype._rotate90SourceProperties=function(t,e,i){var r,n,o=t.sourceLeft,s=t.sourceTop,a=t.domImage.width,h=t.domImage.height,l=o,u=s,c=t.sourceWidth,_=t.sourceHeight;if(0!=i){var d=i<0?-1:1;i%=4;for(var f=0;f<Math.abs(i);++f)l=-(s-h/2)*d+h/2,u=(o-a/2)*d+a/2,c=(r=[_,c])[0],_=r[1],i<0?u-=_:l-=c,o=l,s=u,a=(n=[h,a])[0],h=n[1]}e.sourceLeft=l,e.sourceTop=u,e.sourceWidth=c,e.sourceHeight=_},Object.defineProperty(e.prototype,"domImage",{get:function(){return this._domImage},set:function(t){var e=this;this._domImage=t,this._loaded=!1,this._domImage.width?this._onImageLoaded():this._domImage.onload=function(){e._onImageLoaded()}},enumerable:!0,configurable:!0}),e.prototype._onImageLoaded=function(){this._imageWidth=this._domImage.width,this._imageHeight=this._domImage.height,this._loaded=!0,this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage(),this._autoScale&&this.synchronizeSizeWithContent(),this.onImageLoadedObservable.notifyObservers(this),this._markAsDirty()},e.prototype._extractNinePatchSliceDataFromImage=function(){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var t=this._workingCanvas,e=t.getContext("2d"),i=this._domImage.width,r=this._domImage.height;t.width=i,t.height=r,e.drawImage(this._domImage,0,0,i,r);var n=e.getImageData(0,0,i,r);this._sliceLeft=-1,this._sliceRight=-1;for(var o=0;o<i;o++){if((a=n.data[4*o+3])>127&&-1===this._sliceLeft)this._sliceLeft=o;else if(a<127&&this._sliceLeft>-1){this._sliceRight=o;break}}this._sliceTop=-1,this._sliceBottom=-1;for(var s=0;s<r;s++){var a;if((a=n.data[s*i*4+3])>127&&-1===this._sliceTop)this._sliceTop=s;else if(a<127&&this._sliceTop>-1){this._sliceBottom=s;break}}},Object.defineProperty(e.prototype,"source",{set:function(t){var e=this;this._source!==t&&(this._loaded=!1,this._source=t,t&&(t=this._svgCheck(t)),this._domImage=document.createElement("img"),this._domImage.onload=function(){e._onImageLoaded()},t&&(s.Tools.SetCorsBehavior(t,this._domImage),this._domImage.src=t))},enumerable:!0,configurable:!0}),e.prototype._svgCheck=function(t){var e=this;if(window.SVGSVGElement&&-1!==t.search(/.svg#/gi)&&t.indexOf("#")===t.lastIndexOf("#")){this._isSVG=!0;var i=t.split("#")[0],r=t.split("#")[1],n=document.body.querySelector('object[data="'+i+'"]');if(n){var o=n.contentDocument;if(o&&o.documentElement){var s=o.documentElement.getAttribute("viewBox"),a=Number(o.documentElement.getAttribute("width")),h=Number(o.documentElement.getAttribute("height"));if(o.getElementById(r)&&s&&a&&h)return this._getSVGAttribs(n,r),t}n.addEventListener("load",function(){e._getSVGAttribs(n,r)})}else{var l=document.createElement("object");l.data=i,l.type="image/svg+xml",l.width="0%",l.height="0%",document.body.appendChild(l),l.onload=function(){var t=document.body.querySelector('object[data="'+i+'"]');t&&e._getSVGAttribs(t,r)}}return i}return t},e.prototype._getSVGAttribs=function(t,e){var i=t.contentDocument;if(i&&i.documentElement){var r=i.documentElement.getAttribute("viewBox"),n=Number(i.documentElement.getAttribute("width")),o=Number(i.documentElement.getAttribute("height")),s=i.getElementById(e);if(r&&n&&o&&s){var a=Number(r.split(" ")[2]),h=Number(r.split(" ")[3]),l=s.getBBox(),u=1,c=1,_=0,d=0;s.transform&&s.transform.baseVal.consolidate()&&(u=s.transform.baseVal.consolidate().matrix.a,c=s.transform.baseVal.consolidate().matrix.d,_=s.transform.baseVal.consolidate().matrix.e,d=s.transform.baseVal.consolidate().matrix.f),this.sourceLeft=(u*l.x+_)*n/a,this.sourceTop=(c*l.y+d)*o/h,this.sourceWidth=l.width*u*(n/a),this.sourceHeight=l.height*c*(o/h),this._svgAttributesComputationCompleted=!0,this.onSVGAttributesComputedObservable.notifyObservers(this)}}},Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){this._cellWidth!==t&&(this._cellWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(t){this._cellHeight!==t&&(this._cellHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellId",{get:function(){return this._cellId},set:function(t){this._cellId!==t&&(this._cellId=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.contains=function(e,i){if(!t.prototype.contains.call(this,e,i))return!1;if(!this._detectPointerOnOpaqueOnly||!this._workingCanvas)return!0;var r=this._workingCanvas.getContext("2d"),n=0|this._currentMeasure.width,o=0|this._currentMeasure.height;return r.getImageData(0,0,n,o).data[4*((e=e-this._currentMeasure.left|0)+(i=i-this._currentMeasure.top|0)*this._currentMeasure.width)+3]>0},e.prototype._getTypeName=function(){return"Image"},e.prototype.synchronizeSizeWithContent=function(){this._loaded&&(this.width=this._domImage.width+"px",this.height=this._domImage.height+"px")},e.prototype._processMeasures=function(i,r){if(this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:case e.STRETCH_UNIFORM:case e.STRETCH_NINE_PATCH:break;case e.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0)}t.prototype._processMeasures.call(this,i,r)},e.prototype._prepareWorkingCanvasForOpaqueDetection=function(){if(this._detectPointerOnOpaqueOnly){this._workingCanvas||(this._workingCanvas=document.createElement("canvas"));var t=this._workingCanvas,e=this._currentMeasure.width,i=this._currentMeasure.height,r=t.getContext("2d");t.width=e,t.height=i,r.clearRect(0,0,e,i)}},e.prototype._drawImage=function(t,e,i,r,n,o,s,a,h){(t.drawImage(this._domImage,e,i,r,n,o,s,a,h),this._detectPointerOnOpaqueOnly)&&(t=this._workingCanvas.getContext("2d")).drawImage(this._domImage,e,i,r,n,o-this._currentMeasure.left,s-this._currentMeasure.top,a,h)},e.prototype._draw=function(t){var i,r,n,o;if(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),-1==this.cellId)i=this._sourceLeft,r=this._sourceTop,n=this._sourceWidth?this._sourceWidth:this._imageWidth,o=this._sourceHeight?this._sourceHeight:this._imageHeight;else{var s=this._domImage.naturalWidth/this.cellWidth,a=this.cellId/s>>0,h=this.cellId%s;i=this.cellWidth*h,r=this.cellHeight*a,n=this.cellWidth,o=this.cellHeight}if(this._prepareWorkingCanvasForOpaqueDetection(),this._applyStates(t),this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_UNIFORM:var l=this._currentMeasure.width/n,u=this._currentMeasure.height/o,c=Math.min(l,u),_=(this._currentMeasure.width-n*c)/2,d=(this._currentMeasure.height-o*c)/2;this._drawImage(t,i,r,n,o,this._currentMeasure.left+_,this._currentMeasure.top+d,n*c,o*c);break;case e.STRETCH_EXTEND:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_NINE_PATCH:this._renderNinePatch(t)}t.restore()},e.prototype._renderCornerPatch=function(t,e,i,r,n,o,s){this._drawImage(t,e,i,r,n,this._currentMeasure.left+o,this._currentMeasure.top+s,r,n)},e.prototype._renderNinePatch=function(t){var e=this._imageHeight,i=this._sliceLeft,r=this._sliceTop,n=this._imageHeight-this._sliceBottom,o=this._imageWidth-this._sliceRight,s=0,a=0;this._populateNinePatchSlicesFromImage&&(s=1,a=1,e-=2,i-=1,r-=1,n-=1,o-=1);var h=this._sliceRight-this._sliceLeft,l=this._currentMeasure.width-o-this.sliceLeft,u=this._currentMeasure.height-e+this._sliceBottom;this._renderCornerPatch(t,s,a,i,r,0,0),this._renderCornerPatch(t,s,this._sliceBottom,i,e-this._sliceBottom,0,u),this._renderCornerPatch(t,this._sliceRight,a,o,r,this._currentMeasure.width-o,0),this._renderCornerPatch(t,this._sliceRight,this._sliceBottom,o,e-this._sliceBottom,this._currentMeasure.width-o,u),this._drawImage(t,this._sliceLeft,this._sliceTop,h,this._sliceBottom-this._sliceTop,this._currentMeasure.left+i,this._currentMeasure.top+r,l,u-r),this._drawImage(t,s,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceRight,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left+this._currentMeasure.width-o,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceLeft,a,h,r,this._currentMeasure.left+i,this._currentMeasure.top,l,r),this._drawImage(t,this._sliceLeft,this._sliceBottom,h,n,this._currentMeasure.left+i,this._currentMeasure.top+u,l,n)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onImageLoadedObservable.clear(),this.onSVGAttributesComputedObservable.clear()},e.STRETCH_NONE=0,e.STRETCH_FILL=1,e.STRETCH_UNIFORM=2,e.STRETCH_EXTEND=3,e.STRETCH_NINE_PATCH=4,e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Image"]=v;var O=function(t){function e(e){var i=t.call(this,e)||this;i.name=e,i.delegatePickingToChildren=!1,i.thickness=1,i.isPointerBlocker=!0;var r=null;return i.pointerEnterAnimation=function(){r=i.alpha,i.alpha-=.1},i.pointerOutAnimation=function(){null!==r&&(i.alpha=r)},i.pointerDownAnimation=function(){i.scaleX-=.05,i.scaleY-=.05},i.pointerUpAnimation=function(){i.scaleX+=.05,i.scaleY+=.05},i}return n(e,t),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textBlock",{get:function(){return this._textBlock},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Button"},e.prototype._processPicking=function(e,i,r,n,o,s,a){if(!this._isEnabled||!this.isHitTestVisible||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;if(this.delegatePickingToChildren){for(var h=!1,l=this._children.length-1;l>=0;l--){var u=this._children[l];if(u.isEnabled&&u.isHitTestVisible&&u.isVisible&&!u.notRenderable&&u.contains(e,i)){h=!0;break}}if(!h)return!1}return this._processObservables(r,e,i,n,o,s,a),!0},e.prototype._onPointerEnter=function(e){return!!t.prototype._onPointerEnter.call(this,e)&&(this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},e.prototype._onPointerOut=function(e,i){void 0===i&&(i=!1),this.pointerOutAnimation&&this.pointerOutAnimation(),t.prototype._onPointerOut.call(this,e,i)},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},e.prototype._onPointerUp=function(e,i,r,n,o){this.pointerUpAnimation&&this.pointerUpAnimation(),t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.CreateImageButton=function(t,i,r){var n=new e(t),o=new y(t+"_button",i);o.textWrapping=!0,o.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,o.paddingLeft="20%",n.addControl(o);var s=new v(t+"_icon",r);return s.width="20%",s.stretch=v.STRETCH_UNIFORM,s.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.addControl(s),n._image=s,n._textBlock=o,n},e.CreateImageOnlyButton=function(t,i){var r=new e(t),n=new v(t+"_icon",i);return n.stretch=v.STRETCH_FILL,n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r.addControl(n),r._image=n,r},e.CreateSimpleButton=function(t,i){var r=new e(t),n=new y(t+"_button",i);return n.textWrapping=!0,n.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,r.addControl(n),r._textBlock=n,r},e.CreateImageWithCenterTextButton=function(t,i,r){var n=new e(t),o=new v(t+"_icon",r);o.stretch=v.STRETCH_FILL,n.addControl(o);var s=new y(t+"_button",i);return s.textWrapping=!0,s.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,n.addControl(s),n._image=o,n._textBlock=s,n},e}(m);s._TypeStore.RegisteredTypes["BABYLON.GUI.Button"]=O;var C=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isVertical=!0,i._manualWidth=!1,i._manualHeight=!1,i._doNotTrackManualChanges=!1,i.ignoreLayoutWarnings=!1,i}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualWidth=!0),this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualHeight=!0),this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"StackPanel"},e.prototype._preMeasure=function(e,i){for(var r=0,n=this._children;r<n.length;r++){var o=n[r];this._isVertical?o.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP:o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT}t.prototype._preMeasure.call(this,e,i)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(e),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this.isVertical&&!this._manualWidth||(this._measureForChildren.width=this._currentMeasure.width),(this.isVertical||this._manualHeight)&&(this._measureForChildren.height=this._currentMeasure.height)},e.prototype._postMeasure=function(){for(var e=0,i=0,r=0,n=this._children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(this._isVertical?(o.top!==i+"px"&&(o.top=i+"px",this._rebuildLayout=!0,o._top.ignoreAdaptiveScaling=!0),o._height.isPercentage&&!o._automaticSize?this.ignoreLayoutWarnings||s.Tools.Warn("Control (Name:"+o.name+", UniqueId:"+o.uniqueId+") is using height in percentage mode inside a vertical StackPanel"):i+=o._currentMeasure.height+o.paddingTopInPixels+o.paddingBottomInPixels):(o.left!==e+"px"&&(o.left=e+"px",this._rebuildLayout=!0,o._left.ignoreAdaptiveScaling=!0),o._width.isPercentage&&!o._automaticSize?this.ignoreLayoutWarnings||s.Tools.Warn("Control (Name:"+o.name+", UniqueId:"+o.uniqueId+") is using width in percentage mode inside a horizontal StackPanel"):e+=o._currentMeasure.width+o.paddingLeftInPixels+o.paddingRightInPixels))}this._doNotTrackManualChanges=!0;var a=!1,h=!1;if(!this._manualHeight&&this._isVertical){var l=this.height;this.height=i+"px",h=l!==this.height||!this._height.ignoreAdaptiveScaling}if(!this._manualWidth&&!this._isVertical){var u=this.width;this.width=e+"px",a=u!==this.width||!this._width.ignoreAdaptiveScaling}h&&(this._height.ignoreAdaptiveScaling=!0),a&&(this._width.ignoreAdaptiveScaling=!0),this._doNotTrackManualChanges=!1,(a||h)&&(this._rebuildLayout=!0),t.prototype._postMeasure.call(this)},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.StackPanel"]=C;var w=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.onIsCheckedChangedObservable=new s.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){return this._isChecked},set:function(t){this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Checkbox"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t);var i=this._currentMeasure.width-this._thickness,r=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,r),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColorItem;var n=i*this._checkSizeRatio,o=r*this._checkSizeRatio;t.fillRect(this._currentMeasure.left+this._thickness/2+(i-n)/2,this._currentMeasure.top+this._thickness/2+(r-o)/2,n,o)}t.strokeStyle=this.color,t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,i,r),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked=!this.isChecked,!0)},e.AddCheckBoxWithHeader=function(t,i){var r=new C;r.isVertical=!1,r.height="30px";var n=new e;n.width="20px",n.height="20px",n.isChecked=!0,n.color="green",n.onIsCheckedChangedObservable.add(i),r.addControl(n);var o=new y;return o.text=t,o.width="180px",o.paddingLeft="5px",o.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.color="white",r.addControl(o),r},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Checkbox"]=w;var T=function(t){function e(e,i){void 0===i&&(i="");var r=t.call(this,e)||this;return r.name=e,r._text="",r._placeholderText="",r._background="#222222",r._focusedBackground="#000000",r._focusedColor="white",r._placeholderColor="gray",r._thickness=1,r._margin=new a(10,a.UNITMODE_PIXEL),r._autoStretchWidth=!0,r._maxWidth=new a(1,a.UNITMODE_PERCENTAGE,!1),r._isFocused=!1,r._blinkIsEven=!1,r._cursorOffset=0,r._deadKey=!1,r._addKey=!0,r._currentKey="",r._isTextHighlightOn=!1,r._textHighlightColor="#d5e0ff",r._highligherOpacity=.4,r._highlightedText="",r._startHighlightIndex=0,r._endHighlightIndex=0,r._cursorIndex=-1,r._onFocusSelectAll=!1,r._isPointerDown=!1,r.promptMessage="Please enter text:",r.disableMobilePrompt=!1,r.onTextChangedObservable=new s.Observable,r.onBeforeKeyAddObservable=new s.Observable,r.onFocusObservable=new s.Observable,r.onBlurObservable=new s.Observable,r.onTextHighlightObservable=new s.Observable,r.onTextCopyObservable=new s.Observable,r.onTextCutObservable=new s.Observable,r.onTextPasteObservable=new s.Observable,r.onKeyboardEventProcessedObservable=new s.Observable,r.text=i,r.isPointerBlocker=!0,r}return n(e,t),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth.toString(this._host)},set:function(t){this._maxWidth.toString(this._host)!==t&&this._maxWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidthInPixels",{get:function(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highligherOpacity",{get:function(){return this._highligherOpacity},set:function(t){this._highligherOpacity!==t&&(this._highligherOpacity=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onFocusSelectAll",{get:function(){return this._onFocusSelectAll},set:function(t){this._onFocusSelectAll!==t&&(this._onFocusSelectAll=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHighlightColor",{get:function(){return this._textHighlightColor},set:function(t){this._textHighlightColor!==t&&(this._textHighlightColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return this._margin.toString(this._host)},set:function(t){this._margin.toString(this._host)!==t&&this._margin.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginInPixels",{get:function(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoStretchWidth",{get:function(){return this._autoStretchWidth},set:function(t){this._autoStretchWidth!==t&&(this._autoStretchWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedBackground",{get:function(){return this._focusedBackground},set:function(t){this._focusedBackground!==t&&(this._focusedBackground=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedColor",{get:function(){return this._focusedColor},set:function(t){this._focusedColor!==t&&(this._focusedColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderColor",{get:function(){return this._placeholderColor},set:function(t){this._placeholderColor!==t&&(this._placeholderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderText",{get:function(){return this._placeholderText},set:function(t){this._placeholderText!==t&&(this._placeholderText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deadKey",{get:function(){return this._deadKey},set:function(t){this._deadKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightedText",{get:function(){return this._highlightedText},set:function(t){this._highlightedText!==t&&(this._highlightedText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addKey",{get:function(){return this._addKey},set:function(t){this._addKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentKey",{get:function(){return this._currentKey},set:function(t){this._currentKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){var e=t.toString();this._text!==e&&(this._text=e,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&(this._width.fromString(t)&&this._markAsDirty(),this.autoStretchWidth=!1)},enumerable:!0,configurable:!0}),e.prototype.onBlur=function(){this._isFocused=!1,this._scrollLeft=null,this._cursorOffset=0,clearTimeout(this._blinkTimeout),this._markAsDirty(),this.onBlurObservable.notifyObservers(this),this._host.unRegisterClipboardEvents(),this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);var t=this._host.getScene();this._onPointerDblTapObserver&&t&&t.onPointerObservable.remove(this._onPointerDblTapObserver)},e.prototype.onFocus=function(){var t=this;if(this._isEnabled){if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),-1!==navigator.userAgent.indexOf("Mobile")&&!this.disableMobilePrompt){var e=prompt(this.promptMessage);return null!==e&&(this.text=e),void(this._host.focusedControl=null)}this._host.registerClipboardEvents(),this._onClipboardObserver=this._host.onClipboardObservable.add(function(e){switch(e.type){case s.ClipboardEventTypes.COPY:t._onCopyText(e.event),t.onTextCopyObservable.notifyObservers(t);break;case s.ClipboardEventTypes.CUT:t._onCutText(e.event),t.onTextCutObservable.notifyObservers(t);break;case s.ClipboardEventTypes.PASTE:t._onPasteText(e.event),t.onTextPasteObservable.notifyObservers(t);break;default:return}});var i=this._host.getScene();i&&(this._onPointerDblTapObserver=i.onPointerObservable.add(function(e){t._isFocused&&e.type===s.PointerEventTypes.POINTERDOUBLETAP&&t._processDblClick(e)})),this._onFocusSelectAll&&this._selectAllText()}},e.prototype._getTypeName=function(){return"InputText"},e.prototype.keepsFocusWith=function(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null},e.prototype.processKey=function(t,e,i){if(!i||!i.ctrlKey&&!i.metaKey||67!==t&&86!==t&&88!==t){if(i&&(i.ctrlKey||i.metaKey)&&65===t)return this._selectAllText(),void i.preventDefault();switch(t){case 32:e=" ";break;case 191:i&&i.preventDefault();break;case 8:if(this._text&&this._text.length>0){if(this._isTextHighlightOn)return this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,this._blinkIsEven=!1,void(i&&i.preventDefault());if(0===this._cursorOffset)this.text=this._text.substr(0,this._text.length-1);else(n=this._text.length-this._cursorOffset)>0&&(this.text=this._text.slice(0,n-1)+this._text.slice(n))}return void(i&&i.preventDefault());case 46:if(this._isTextHighlightOn){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex);for(var r=this._endHighlightIndex-this._startHighlightIndex;r>0&&this._cursorOffset>0;)this._cursorOffset--;return this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,void(i&&i.preventDefault())}if(this._text&&this._text.length>0&&this._cursorOffset>0){var n=this._text.length-this._cursorOffset;this.text=this._text.slice(0,n)+this._text.slice(n+1),this._cursorOffset--}return void(i&&i.preventDefault());case 13:return this._host.focusedControl=null,void(this._isTextHighlightOn=!1);case 35:return this._cursorOffset=0,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 36:return this._cursorOffset=this._text.length,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 37:if(this._cursorOffset++,this._cursorOffset>this._text.length&&(this._cursorOffset=this._text.length),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(this._text.length===this._cursorOffset)return;this._endHighlightIndex=this._text.length-this._cursorOffset+1}return this._startHighlightIndex=0,this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=this._text.length,this._isTextHighlightOn=!0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=0===this._startHighlightIndex?this._text.length:this._text.length-this._startHighlightIndex+1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._text.length?this._text.length:this._cursorOffset-1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._startHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=this.text.length,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 39:if(this._cursorOffset--,this._cursorOffset<0&&(this._cursorOffset=0),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(0===this._cursorOffset)return;this._startHighlightIndex=this._text.length-this._cursorOffset-1}return this._endHighlightIndex=this._text.length,this._isTextHighlightOn=!0,this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=this._text.length===this._endHighlightIndex?0:this._text.length-this._endHighlightIndex-1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset<=0?0:this._cursorOffset+1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._endHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=0,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 222:i&&i.preventDefault(),this._cursorIndex=-1,this.deadKey=!0}if(e&&(-1===t||32===t||t>47&&t<64||t>64&&t<91||t>159&&t<193||t>218&&t<223||t>95&&t<112)&&(this._currentKey=e,this.onBeforeKeyAddObservable.notifyObservers(this),e=this._currentKey,this._addKey))if(this._isTextHighlightOn)this.text=this._text.slice(0,this._startHighlightIndex)+e+this._text.slice(this._endHighlightIndex),this._cursorOffset=this.text.length-(this._startHighlightIndex+1),this._isTextHighlightOn=!1,this._blinkIsEven=!1,this._markAsDirty();else if(0===this._cursorOffset)this.text+=e;else{var o=this._text.length-this._cursorOffset;this.text=this._text.slice(0,o)+e+this._text.slice(o)}}},e.prototype._updateValueFromCursorIndex=function(t){if(this._blinkIsEven=!1,-1===this._cursorIndex)this._cursorIndex=t;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset;else{if(!(this._cursorIndex>this._cursorOffset))return this._isTextHighlightOn=!1,void this._markAsDirty();this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex}this._isTextHighlightOn=!0,this._markAsDirty()},e.prototype._processDblClick=function(t){this._startHighlightIndex=this._text.length-this._cursorOffset,this._endHighlightIndex=this._startHighlightIndex;var e,i,r=/\w+/g;do{i=this._endHighlightIndex<this._text.length&&-1!==this._text[this._endHighlightIndex].search(r)?++this._endHighlightIndex:0,e=this._startHighlightIndex>0&&-1!==this._text[this._startHighlightIndex-1].search(r)?--this._startHighlightIndex:0}while(e||i);this._cursorOffset=this.text.length-this._startHighlightIndex,this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=!0,this._clickedCoordinate=null,this._blinkIsEven=!0,this._cursorIndex=-1,this._markAsDirty()},e.prototype._selectAllText=function(){this._blinkIsEven=!0,this._isTextHighlightOn=!0,this._startHighlightIndex=0,this._endHighlightIndex=this._text.length,this._cursorOffset=this._text.length,this._cursorIndex=-1,this._markAsDirty()},e.prototype.processKeyboard=function(t){this.processKey(t.keyCode,t.key,t),this.onKeyboardEventProcessedObservable.notifyObservers(t)},e.prototype._onCopyText=function(t){this._isTextHighlightOn=!1;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText},e.prototype._onCutText=function(t){if(this._highlightedText){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex;try{t.clipboardData&&t.clipboardData.setData("text/plain",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText,this._highlightedText=""}},e.prototype._onPasteText=function(t){var e="";e=t.clipboardData&&-1!==t.clipboardData.types.indexOf("text/plain")?t.clipboardData.getData("text/plain"):this._host.clipboardData;var i=this._text.length-this._cursorOffset;this.text=this._text.slice(0,i)+e+this._text.slice(i)},e.prototype._draw=function(t,e){var i=this;t.save(),this._applyStates(t),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(t.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._fontOffset||(this._fontOffset=p._GetFontOffset(t.font));var r=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this.color&&(t.fillStyle=this.color);var n=this._beforeRenderText(this._text);this._isFocused||this._text||!this._placeholderText||(n=this._placeholderText,this._placeholderColor&&(t.fillStyle=this._placeholderColor)),this._textWidth=t.measureText(n).width;var o=2*this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+o)+"px");var s=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2,a=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-o;if(t.save(),t.beginPath(),t.rect(r,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,a+2,this._currentMeasure.height),t.clip(),this._isFocused&&this._textWidth>a){var h=r-this._textWidth+a;this._scrollLeft||(this._scrollLeft=h)}else this._scrollLeft=r;if(t.fillText(n,this._scrollLeft,this._currentMeasure.top+s),this._isFocused){if(this._clickedCoordinate){var l=this._scrollLeft+this._textWidth-this._clickedCoordinate,u=0;this._cursorOffset=0;var c=0;do{this._cursorOffset&&(c=Math.abs(l-u)),this._cursorOffset++,u=t.measureText(n.substr(n.length-this._cursorOffset,this._cursorOffset)).width}while(u<l&&n.length>=this._cursorOffset);Math.abs(l-u)>c&&this._cursorOffset--,this._blinkIsEven=!1,this._clickedCoordinate=null}if(!this._blinkIsEven){var _=this.text.substr(this._text.length-this._cursorOffset),d=t.measureText(_).width,f=this._scrollLeft+this._textWidth-d;f<r?(this._scrollLeft+=r-f,f=r,this._markAsDirty()):f>r+a&&(this._scrollLeft+=r+a-f,f=r+a,this._markAsDirty()),this._isTextHighlightOn||t.fillRect(f,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height)}if(clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout(function(){i._blinkIsEven=!i._blinkIsEven,i._markAsDirty()},500),this._isTextHighlightOn){clearTimeout(this._blinkTimeout);var g=t.measureText(this.text.substring(this._startHighlightIndex)).width,b=this._scrollLeft+this._textWidth-g;this._highlightedText=this.text.substring(this._startHighlightIndex,this._endHighlightIndex);var m=t.measureText(this.text.substring(this._startHighlightIndex,this._endHighlightIndex)).width;b<r&&((m-=r-b)||(m=t.measureText(this.text.charAt(this.text.length-this._cursorOffset)).width),b=r),t.globalAlpha=this._highligherOpacity,t.fillStyle=this._textHighlightColor,t.fillRect(b,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,m,this._fontOffset.height),t.globalAlpha=1}}t.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(t.strokeStyle=this.focusedColor):this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._clickedCoordinate=i.x,this._isTextHighlightOn=!1,this._highlightedText="",this._cursorIndex=-1,this._isPointerDown=!0,this._host._capturingControl[r]=this,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),!0):!!this._isEnabled&&(this._host.focusedControl=this,!0))},e.prototype._onPointerMove=function(e,i,r){this._host.focusedControl===this&&this._isPointerDown&&(this._clickedCoordinate=i.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset)),t.prototype._onPointerMove.call(this,e,i,r)},e.prototype._onPointerUp=function(e,i,r,n,o){this._isPointerDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.prototype._beforeRenderText=function(t){return t},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onTextChangedObservable.clear(),this.onTextCopyObservable.clear(),this.onTextCutObservable.clear(),this.onTextPasteObservable.clear(),this.onTextHighlightObservable.clear(),this.onKeyboardEventProcessedObservable.clear()},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.InputText"]=T;var x=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._rowDefinitions=new Array,i._columnDefinitions=new Array,i._cells={},i._childControls=new Array,i}return n(e,t),Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._childControls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),e.prototype.getRowDefinition=function(t){return t<0||t>=this._rowDefinitions.length?null:this._rowDefinitions[t]},e.prototype.getColumnDefinition=function(t){return t<0||t>=this._columnDefinitions.length?null:this._columnDefinitions[t]},e.prototype.addRowDefinition=function(t,e){return void 0===e&&(e=!1),this._rowDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.addColumnDefinition=function(t,e){return void 0===e&&(e=!1),this._columnDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.setRowDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._rowDefinitions.length)return this;var r=this._rowDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._rowDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.setColumnDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._columnDefinitions.length)return this;var r=this._columnDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._columnDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.getChildrenAt=function(t,e){var i=this._cells[t+":"+e];return i?i.children:null},e.prototype.getChildCellInfo=function(t){return t._tag},e.prototype._removeCell=function(e,i){if(e){t.prototype.removeControl.call(this,e);for(var r=0,n=e.children;r<n.length;r++){var o=n[r],s=this._childControls.indexOf(o);-1!==s&&this._childControls.splice(s,1)}delete this._cells[i]}},e.prototype._offsetCell=function(t,e){if(this._cells[e]){this._cells[t]=this._cells[e];for(var i=0,r=this._cells[t].children;i<r.length;i++){r[i]._tag=t}delete this._cells[e]}},e.prototype.removeColumnDefinition=function(t){if(t<0||t>=this._columnDefinitions.length)return this;for(var e=0;e<this._rowDefinitions.length;e++){var i=e+":"+t,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._rowDefinitions.length;e++)for(var n=t+1;n<this._columnDefinitions.length;n++){var o=e+":"+(n-1);i=e+":"+n;this._offsetCell(o,i)}return this._columnDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.removeRowDefinition=function(t){if(t<0||t>=this._rowDefinitions.length)return this;for(var e=0;e<this._columnDefinitions.length;e++){var i=t+":"+e,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._columnDefinitions.length;e++)for(var n=t+1;n<this._rowDefinitions.length;n++){var o=n-1+":"+e;i=n+":"+e;this._offsetCell(o,i)}return this._rowDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.addControl=function(e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0===this._rowDefinitions.length&&this.addRowDefinition(1,!1),0===this._columnDefinitions.length&&this.addColumnDefinition(1,!1),-1!==this._childControls.indexOf(e))return s.Tools.Warn("Control (Name:"+e.name+", UniqueId:"+e.uniqueId+") is already associated with this grid. You must remove it before reattaching it"),this;var n=Math.min(i,this._rowDefinitions.length-1)+":"+Math.min(r,this._columnDefinitions.length-1),o=this._cells[n];return o||(o=new g(n),this._cells[n]=o,o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,t.prototype.addControl.call(this,o)),o.addControl(e),this._childControls.push(e),e._tag=n,e.parent=this,this._markAsDirty(),this},e.prototype.removeControl=function(t){var e=this._childControls.indexOf(t);-1!==e&&this._childControls.splice(e,1);var i=this._cells[t._tag];return i&&(i.removeControl(t),t._tag=null),this._markAsDirty(),this},e.prototype._getTypeName=function(){return"Grid"},e.prototype._getGridDefinitions=function(t){for(var e=[],i=[],r=[],n=[],o=this._currentMeasure.width,s=0,a=this._currentMeasure.height,h=0,l=0,u=0,c=this._rowDefinitions;u<c.length;u++){if((g=c[u]).isPixel)a-=p=g.getValue(this._host),i[l]=p;else h+=g.internalValue;l++}var _=0;l=0;for(var d=0,f=this._rowDefinitions;d<f.length;d++){var p,g=f[d];if(n.push(_),g.isPixel)_+=g.getValue(this._host);else _+=p=g.internalValue/h*a,i[l]=p;l++}l=0;for(var b=0,m=this._columnDefinitions;b<m.length;b++){if((g=m[b]).isPixel)o-=C=g.getValue(this._host),e[l]=C;else s+=g.internalValue;l++}var y=0;l=0;for(var v=0,O=this._columnDefinitions;v<O.length;v++){var C;g=O[v];if(r.push(y),g.isPixel)y+=g.getValue(this._host);else y+=C=g.internalValue/s*o,e[l]=C;l++}t(r,n,e,i)},e.prototype._additionalProcessing=function(e,i){var r=this;this._getGridDefinitions(function(t,e,i,n){for(var o in r._cells)if(r._cells.hasOwnProperty(o)){var s=o.split(":"),a=parseInt(s[0]),h=parseInt(s[1]),l=r._cells[o];l.left=t[h]+"px",l.top=e[a]+"px",l.width=i[h]+"px",l.height=n[a]+"px",l._left.ignoreAdaptiveScaling=!0,l._top.ignoreAdaptiveScaling=!0,l._width.ignoreAdaptiveScaling=!0,l._height.ignoreAdaptiveScaling=!0}}),t.prototype._additionalProcessing.call(this,e,i)},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t in this._cells){if(this._cells.hasOwnProperty(t))this._cells[t]._markMatrixAsDirty()}},e.prototype._renderHighlightSpecific=function(e){var i=this;t.prototype._renderHighlightSpecific.call(this,e),this._getGridDefinitions(function(t,r,n,o){for(var s=0;s<t.length;s++){var a=i._currentMeasure.left+t[s]+n[s];e.beginPath(),e.moveTo(a,i._currentMeasure.top),e.lineTo(a,i._currentMeasure.top+i._currentMeasure.height),e.stroke()}for(s=0;s<r.length;s++){var h=i._currentMeasure.top+r[s]+o[s];e.beginPath(),e.moveTo(i._currentMeasure.left,h),e.lineTo(i._currentMeasure.left+i._currentMeasure.width,h),e.stroke()}}),e.restore()},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0,i=this._childControls;e<i.length;e++){i[e].dispose()}this._childControls=[]},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Grid"]=x;var M=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._value=s.Color3.Red(),i._tmpColor=new s.Color3,i._pointerStartedOnSquare=!1,i._pointerStartedOnWheel=!1,i._squareLeft=0,i._squareTop=0,i._squareSize=0,i._h=360,i._s=1,i._v=1,i._lastPointerDownID=-1,i.onValueChangedObservable=new s.Observable,i._pointerIsDown=!1,i.value=new s.Color3(.88,.1,.1),i.size="200px",i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value.equals(t)||(this._value.copyFrom(t),this._value.toHSVToRef(this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1e-5),this._v=Math.max(this._tmpColor.b,1e-5),this._markAsDirty(),this._value.r<=e._Epsilon&&(this._value.r=0),this._value.g<=e._Epsilon&&(this._value.g=0),this._value.b<=e._Epsilon&&(this._value.b=0),this._value.r>=1-e._Epsilon&&(this._value.r=1),this._value.g>=1-e._Epsilon&&(this._value.g=1),this._value.b>=1-e._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&(this._height.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&(this._width.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ColorPicker"},e.prototype._preMeasure=function(t,e){t.width<t.height?this._currentMeasure.height=t.width:this._currentMeasure.width=t.height},e.prototype._updateSquareProps=function(){var t=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),e=2*(t-.2*t)/Math.sqrt(2),i=t-.5*e;this._squareLeft=this._currentMeasure.left+i,this._squareTop=this._currentMeasure.top+i,this._squareSize=e},e.prototype._drawGradientSquare=function(t,e,i,r,n,o){var s=o.createLinearGradient(e,i,r+e,i);s.addColorStop(0,"#fff"),s.addColorStop(1,"hsl("+t+", 100%, 50%)"),o.fillStyle=s,o.fillRect(e,i,r,n);var a=o.createLinearGradient(e,i,e,n+i);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"#000"),o.fillStyle=a,o.fillRect(e,i,r,n)},e.prototype._drawCircle=function(t,e,i,r){r.beginPath(),r.arc(t,e,i+1,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle="#333333",r.stroke(),r.beginPath(),r.arc(t,e,i,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle="#ffffff",r.stroke()},e.prototype._createColorWheelCanvas=function(t,e){var i=document.createElement("canvas");i.width=2*t,i.height=2*t;for(var r=i.getContext("2d"),n=r.getImageData(0,0,2*t,2*t),o=n.data,a=this._tmpColor,h=t*t,l=t-e,u=l*l,c=-t;c<t;c++)for(var _=-t;_<t;_++){var d=c*c+_*_;if(!(d>h||d<u)){var f=Math.sqrt(d),p=Math.atan2(_,c);s.Color3.HSVtoRGBToRef(180*p/Math.PI+180,f/t,1,a);var g=4*(c+t+2*(_+t)*t);o[g]=255*a.r,o[g+1]=255*a.g,o[g+2]=255*a.b;var b=.2;b=t<50?.2:t>150?.04:-.16*(t-50)/100+.2;var m=(f-l)/(t-l);o[g+3]=m<b?m/b*255:m>1-b?255*(1-(m-(1-b))/b):255}}return r.putImageData(n,0,0),i},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),i=.2*e,r=this._currentMeasure.left,n=this._currentMeasure.top;this._colorWheelCanvas&&this._colorWheelCanvas.width==2*e||(this._colorWheelCanvas=this._createColorWheelCanvas(e,i)),this._updateSquareProps(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.fillRect(this._squareLeft,this._squareTop,this._squareSize,this._squareSize)),t.drawImage(this._colorWheelCanvas,r,n),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,t);var o=this._squareLeft+this._squareSize*this._s,s=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(o,s,.04*e,t);var a=e-.5*i;o=r+e+Math.cos((this._h-180)*Math.PI/180)*a,s=n+e+Math.sin((this._h-180)*Math.PI/180)*a,this._drawCircle(o,s,.35*i,t),t.restore()},e.prototype._updateValueFromPointer=function(t,i){if(this._pointerStartedOnWheel){var r=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),n=r+this._currentMeasure.left,o=r+this._currentMeasure.top;this._h=180*Math.atan2(i-o,t-n)/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(t-this._squareLeft)/this._squareSize,this._v=1-(i-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),this._s=Math.max(this._s,e._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,e._Epsilon));s.Color3.HSVtoRGBToRef(this._h,this._s,this._v,this._tmpColor),this.value=this._tmpColor},e.prototype._isPointOnSquare=function(t,e){this._updateSquareProps();var i=this._squareLeft,r=this._squareTop,n=this._squareSize;return t>=i&&t<=i+n&&e>=r&&e<=r+n},e.prototype._isPointOnWheel=function(t,e){var i=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),r=i-.2*i,n=t-(i+this._currentMeasure.left),o=e-(i+this._currentMeasure.top),s=n*n+o*o;return s<=i*i&&s>=r*r},e.prototype._onPointerDown=function(e,i,r,n){if(!t.prototype._onPointerDown.call(this,e,i,r,n))return!1;this._pointerIsDown=!0,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var o=this._transformedPosition.x,s=this._transformedPosition.y;return this._isPointOnSquare(o,s)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(o,s)&&(this._pointerStartedOnWheel=!0),this._updateValueFromPointer(o,s),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0},e.prototype._onPointerMove=function(e,i,r){if(r==this._lastPointerDownID){this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var n=this._transformedPosition.x,o=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(n,o),t.prototype._onPointerMove.call(this,e,i,r)}},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.ShowPickerDialogAsync=function(t,i){return new Promise(function(r,n){i.pickerWidth=i.pickerWidth||"640px",i.pickerHeight=i.pickerHeight||"400px",i.headerHeight=i.headerHeight||"35px",i.lastColor=i.lastColor||"#000000",i.swatchLimit=i.swatchLimit||20,i.numSwatchesPerLine=i.numSwatchesPerLine||10;var o,a,h,l,u,c,_,d,f,g,b,v,C,w,M,P,k,I,A,S=i.swatchLimit/i.numSwatchesPerLine,E=parseFloat(i.pickerWidth)/i.numSwatchesPerLine,L=Math.floor(.25*E),R=L*(i.numSwatchesPerLine+1),D=Math.floor((parseFloat(i.pickerWidth)-R)/i.numSwatchesPerLine),B=D*S+L*(S+1),N=(parseInt(i.pickerHeight)+B+Math.floor(.25*D)).toString()+"px",V="#c0c0c0",H="#535353",F="#414141",j="515151",W="#555555",z="#454545",G=s.Color3.FromHexString("#dddddd"),X=G.r+G.g+G.b,Y="#aaaaaa",U="#ffffff",q=["R","G","B"],K=!1;function Z(t,e){A=e;var i=t.toHexString();if(k.background=i,g.name!=A&&(g.text=Math.floor(255*t.r).toString()),b.name!=A&&(b.text=Math.floor(255*t.g).toString()),v.name!=A&&(v.text=Math.floor(255*t.b).toString()),C.name!=A&&(C.text=t.r.toString()),w.name!=A&&(w.text=t.g.toString()),M.name!=A&&(M.text=t.b.toString()),P.name!=A){var r=i.split("#");P.text=r[1]}f.name!=A&&(f.value=t)}function J(t,e){var i=t.text;if(/[^0-9]/g.test(i))t.text=I;else if(""!=i&&(Math.floor(parseInt(i))<0?i="0":Math.floor(parseInt(i))>255?i="255":isNaN(parseInt(i))&&(i="0")),A==t.name&&(I=i),""!=i){i=parseInt(i).toString(),t.text=i;var r=s.Color3.FromHexString(k.background);A==t.name&&Z("r"==e?new s.Color3(parseInt(i)/255,r.g,r.b):"g"==e?new s.Color3(r.r,parseInt(i)/255,r.b):new s.Color3(r.r,r.g,parseInt(i)/255),t.name)}}function Q(t,e){var i=t.text;if(/[^0-9\.]/g.test(i))t.text=I;else{""!=i&&"."!=i&&0!=parseFloat(i)&&(parseFloat(i)<0?i="0.0":parseFloat(i)>1?i="1.0":isNaN(parseFloat(i))&&(i="0.0")),A==t.name&&(I=i),""!=i&&"."!=i&&0!=parseFloat(i)?(i=parseFloat(i).toString(),t.text=i):i="0.0";var r=s.Color3.FromHexString(k.background);A==t.name&&Z("r"==e?new s.Color3(parseFloat(i),r.g,r.b):"g"==e?new s.Color3(r.r,parseFloat(i),r.b):new s.Color3(r.r,r.g,parseFloat(i)),t.name)}}function $(){if(i.savedColors&&i.savedColors[_]){if(K)var t="b";else t="";var e=O.CreateSimpleButton("Swatch_"+_,t);e.fontFamily="BabylonJSglyphs";var r=s.Color3.FromHexString(i.savedColors[_]),n=r.r+r.g+r.b;e.color=n>X?Y:U,e.fontSize=Math.floor(.7*D),e.textBlock.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,e.height=e.width=D.toString()+"px",e.background=i.savedColors[_],e.thickness=2;var o=_;return e.pointerDownAnimation=function(){e.thickness=4},e.pointerUpAnimation=function(){e.thickness=3},e.pointerEnterAnimation=function(){e.thickness=3},e.pointerOutAnimation=function(){e.thickness=2},e.onPointerClickObservable.add(function(){var t;K?(t=o,i.savedColors&&i.savedColors.splice(t,1),i.savedColors&&0==i.savedColors.length&&(it(!1),K=!1),et("",Bt)):i.savedColors&&Z(s.Color3.FromHexString(i.savedColors[o]),e.name)}),e}return null}function tt(t){if(void 0!==t&&(K=t),K){for(var e=0;e<d.children.length;e++){d.children[e].textBlock.text="b"}void 0!==h&&(h.textBlock.text="Done")}else{for(e=0;e<d.children.length;e++){d.children[e].textBlock.text=""}void 0!==h&&(h.textBlock.text="Edit")}}function et(t,e){if(i.savedColors){""!=t&&i.savedColors.push(t),_=0,d.clearControls();var r=Math.ceil(i.savedColors.length/i.numSwatchesPerLine);if(0==r)var n=0;else n=r+1;if(d.rowCount!=r+n){for(var o=d.rowCount,s=0;s<o;s++)d.removeRowDefinition(0);for(s=0;s<r+n;s++)s%2?d.addRowDefinition(D,!0):d.addRowDefinition(L,!0)}d.height=(D*r+n*L).toString()+"px";for(var a=1,h=1;a<r+n;a+=2,h++){if(i.savedColors.length>h*i.numSwatchesPerLine)var l=i.numSwatchesPerLine;else l=i.savedColors.length-(h-1)*i.numSwatchesPerLine;for(var u=Math.min(Math.max(l,0),i.numSwatchesPerLine),c=0,f=1;c<u;c++)if(!(c>i.numSwatchesPerLine)){var p=$();null!=p&&(d.addControl(p,a,f),f+=2,_++)}}i.savedColors.length>=i.swatchLimit?rt(e,!0):rt(e,!1)}}function it(t){t?((h=O.CreateSimpleButton("butEdit","Edit")).width=l,h.height=u,h.left=Math.floor(.1*parseInt(l)).toString()+"px",h.top=(-1*parseFloat(h.left)).toString()+"px",h.verticalAlignment=p.VERTICAL_ALIGNMENT_BOTTOM,h.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,h.thickness=2,h.color=V,h.fontSize=a,h.background=H,h.onPointerEnterObservable.add(function(){h.background=F}),h.onPointerOutObservable.add(function(){h.background=H}),h.pointerDownAnimation=function(){h.background=j},h.pointerUpAnimation=function(){h.background=F},h.onPointerClickObservable.add(function(){K=!K,tt()}),mt.addControl(h,1,0)):mt.removeControl(h)}function rt(t,e){e?(t.color=W,t.background=z):(t.color=V,t.background=H)}function nt(e){i.savedColors&&i.savedColors.length>0?r({savedColors:i.savedColors,pickedColor:e}):r({pickedColor:e}),t.removeControl(ot)}var ot=new x;if(ot.name="Dialog Container",ot.width=i.pickerWidth,i.savedColors){ot.height=N;var st=parseInt(i.pickerHeight)/parseInt(N);ot.addRowDefinition(st,!1),ot.addRowDefinition(1-st,!1)}else ot.height=i.pickerHeight,ot.addRowDefinition(1,!1);if(t.addControl(ot),i.savedColors){(d=new x).name="Swatch Drawer",d.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,d.background=H,d.width=i.pickerWidth;var at=i.savedColors.length/i.numSwatchesPerLine;if(0==at)var ht=0;else ht=at+1;d.height=(D*at+ht*L).toString()+"px",d.top=Math.floor(.25*D).toString()+"px";for(var lt=0;lt<2*Math.ceil(i.savedColors.length/i.numSwatchesPerLine)+1;lt++)lt%2!=0?d.addRowDefinition(D,!0):d.addRowDefinition(L,!0);for(lt=0;lt<2*i.numSwatchesPerLine+1;lt++)lt%2!=0?d.addColumnDefinition(D,!0):d.addColumnDefinition(L,!0);ot.addControl(d,1,0)}var ut=new x;ut.name="Picker Panel",ut.height=i.pickerHeight;var ct=parseInt(i.headerHeight)/parseInt(i.pickerHeight),_t=[ct,1-ct];ut.addRowDefinition(_t[0],!1),ut.addRowDefinition(_t[1],!1),ot.addControl(ut,0,0);var dt=new m;dt.name="Dialogue Header Bar",dt.background="#cccccc",dt.thickness=0,ut.addControl(dt,0,0);var ft=O.CreateSimpleButton("closeButton","a");ft.fontFamily="BabylonJSglyphs";var pt=s.Color3.FromHexString(dt.background);o=new s.Color3(1-pt.r,1-pt.g,1-pt.b),ft.color=o.toHexString(),ft.fontSize=Math.floor(.6*parseInt(i.headerHeight)),ft.textBlock.textVerticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,ft.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_RIGHT,ft.height=ft.width=i.headerHeight,ft.background=dt.background,ft.thickness=0,ft.pointerDownAnimation=function(){},ft.pointerUpAnimation=function(){ft.background=dt.background},ft.pointerEnterAnimation=function(){ft.color=dt.background,ft.background="red"},ft.pointerOutAnimation=function(){ft.color=o.toHexString(),ft.background=dt.background},ft.onPointerClickObservable.add(function(){nt(At.background)}),ut.addControl(ft,0,0);var gt=new x;gt.name="Dialogue Body",gt.background=H;var bt=[.4375,.5625];gt.addRowDefinition(1,!1),gt.addColumnDefinition(bt[0],!1),gt.addColumnDefinition(bt[1],!1),ut.addControl(gt,1,0);var mt=new x;mt.name="Picker Grid",mt.addRowDefinition(.85,!1),mt.addRowDefinition(.15,!1),gt.addControl(mt,0,0),(f=new e).name="GUI Color Picker",i.pickerHeight<i.pickerWidth?f.width=.89:f.height=.89,f.value=s.Color3.FromHexString(i.lastColor),f.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,f.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,f.onPointerDownObservable.add(function(){A=f.name,I="",tt(!1)}),f.onValueChangedObservable.add(function(t){A==f.name&&Z(t,f.name)}),mt.addControl(f,0,0);var yt=new x;yt.name="Dialogue Right Half",yt.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT;var vt=[.514,.486];yt.addRowDefinition(vt[0],!1),yt.addRowDefinition(vt[1],!1),gt.addControl(yt,1,1);var Ot=new x;Ot.name="Swatches and Buttons";var Ct=[.417,.583];Ot.addRowDefinition(1,!1),Ot.addColumnDefinition(Ct[0],!1),Ot.addColumnDefinition(Ct[1],!1),yt.addControl(Ot,0,0);var wt=new x;wt.name="New and Current Swatches";var Tt=[.04,.16,.64,.16];wt.addRowDefinition(Tt[0],!1),wt.addRowDefinition(Tt[1],!1),wt.addRowDefinition(Tt[2],!1),wt.addRowDefinition(Tt[3],!1),Ot.addControl(wt,0,0);var xt=new x;xt.name="Active Swatches",xt.width=.67,xt.addRowDefinition(.5,!1),xt.addRowDefinition(.5,!1),wt.addControl(xt,2,0);var Mt=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[0]*.11),Pt=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*Tt[1]*.5);if(i.pickerWidth>i.pickerHeight)var kt=Pt;else kt=Mt;var It=new y;It.text="new",It.name="New Color Label",It.color=V,It.fontSize=kt,wt.addControl(It,1,0),(k=new m).name="New Color Swatch",k.background=i.lastColor,k.thickness=0,xt.addControl(k,0,0);var At=O.CreateSimpleButton("currentSwatch","");At.background=i.lastColor,At.thickness=0,At.onPointerClickObservable.add(function(){Z(s.Color3.FromHexString(At.background),At.name),tt(!1)}),At.pointerDownAnimation=function(){},At.pointerUpAnimation=function(){},At.pointerEnterAnimation=function(){},At.pointerOutAnimation=function(){},xt.addControl(At,1,0);var St=new m;St.name="Swatch Outline",St.width=.67,St.thickness=2,St.color="#404040",St.isHitTestVisible=!1,wt.addControl(St,2,0);var Et=new y;Et.name="Current Color Label",Et.text="current",Et.color=V,Et.fontSize=kt,wt.addControl(Et,3,0);var Lt=new x;Lt.name="Button Grid",Lt.height=.8;Lt.addRowDefinition(1/3,!1),Lt.addRowDefinition(1/3,!1),Lt.addRowDefinition(1/3,!1),Ot.addControl(Lt,0,1),l=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[1]*.67).toString()+"px",u=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*(parseFloat(Lt.height.toString())/100)*(1/3)*.7).toString()+"px",a=parseFloat(l)>parseFloat(u)?Math.floor(.45*parseFloat(u)):Math.floor(.11*parseFloat(l));var Rt=O.CreateSimpleButton("butOK","OK");Rt.width=l,Rt.height=u,Rt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Rt.thickness=2,Rt.color=V,Rt.fontSize=a,Rt.background=H,Rt.onPointerEnterObservable.add(function(){Rt.background=F}),Rt.onPointerOutObservable.add(function(){Rt.background=H}),Rt.pointerDownAnimation=function(){Rt.background=j},Rt.pointerUpAnimation=function(){Rt.background=F},Rt.onPointerClickObservable.add(function(){tt(!1),nt(k.background)}),Lt.addControl(Rt,0,0);var Dt=O.CreateSimpleButton("butCancel","Cancel");if(Dt.width=l,Dt.height=u,Dt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Dt.thickness=2,Dt.color=V,Dt.fontSize=a,Dt.background=H,Dt.onPointerEnterObservable.add(function(){Dt.background=F}),Dt.onPointerOutObservable.add(function(){Dt.background=H}),Dt.pointerDownAnimation=function(){Dt.background=j},Dt.pointerUpAnimation=function(){Dt.background=F},Dt.onPointerClickObservable.add(function(){tt(!1),nt(At.background)}),Lt.addControl(Dt,1,0),i.savedColors){var Bt=O.CreateSimpleButton("butSave","Save");Bt.width=l,Bt.height=u,Bt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Bt.thickness=2,Bt.fontSize=a,i.savedColors.length<i.swatchLimit?(Bt.color=V,Bt.background=H):rt(Bt,!0),Bt.onPointerEnterObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=F)}),Bt.onPointerOutObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=H)}),Bt.pointerDownAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=j)},Bt.pointerUpAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Bt.background=F)},Bt.onPointerClickObservable.add(function(){i.savedColors&&(0==i.savedColors.length&&it(!0),i.savedColors.length<i.swatchLimit&&et(k.background,Bt),tt(!1))}),i.savedColors.length>0&&it(!0),Lt.addControl(Bt,2,0)}var Nt=new x;Nt.name="Dialog Lower Right",Nt.addRowDefinition(.02,!1),Nt.addRowDefinition(.63,!1),Nt.addRowDefinition(.21,!1),Nt.addRowDefinition(.14,!1),yt.addControl(Nt,1,0),c=s.Color3.FromHexString(i.lastColor);var Vt=new x;Vt.name="RGB Values",Vt.width=.82,Vt.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,Vt.addRowDefinition(1/3,!1),Vt.addRowDefinition(1/3,!1),Vt.addRowDefinition(1/3,!1),Vt.addColumnDefinition(.1,!1),Vt.addColumnDefinition(.2,!1),Vt.addColumnDefinition(.7,!1),Nt.addControl(Vt,1,0);for(lt=0;lt<q.length;lt++){(Ht=new y).text=q[lt],Ht.color=V,Ht.fontSize=a,Vt.addControl(Ht,lt,0)}(g=new T).width=.83,g.height=.72,g.name="rIntField",g.fontSize=a,g.text=(255*c.r).toString(),g.color="#f0f0f0",g.background="#454545",g.onFocusObservable.add(function(){A=g.name,I=g.text,tt(!1)}),g.onBlurObservable.add(function(){""==g.text&&(g.text="0"),J(g,"r"),A==g.name&&(A="")}),g.onTextChangedObservable.add(function(){A==g.name&&J(g,"r")}),Vt.addControl(g,0,1),(b=new T).width=.83,b.height=.72,b.name="gIntField",b.fontSize=a,b.text=(255*c.g).toString(),b.color="#f0f0f0",b.background="#454545",b.onFocusObservable.add(function(){A=b.name,I=b.text,tt(!1)}),b.onBlurObservable.add(function(){""==b.text&&(b.text="0"),J(b,"g"),A==b.name&&(A="")}),b.onTextChangedObservable.add(function(){A==b.name&&J(b,"g")}),Vt.addControl(b,1,1),(v=new T).width=.83,v.height=.72,v.name="bIntField",v.fontSize=a,v.text=(255*c.b).toString(),v.color="#f0f0f0",v.background="#454545",v.onFocusObservable.add(function(){A=v.name,I=v.text,tt(!1)}),v.onBlurObservable.add(function(){""==v.text&&(v.text="0"),J(v,"b"),A==v.name&&(A="")}),v.onTextChangedObservable.add(function(){A==v.name&&J(v,"b")}),Vt.addControl(v,2,1),(C=new T).width=.95,C.height=.72,C.name="rDecField",C.fontSize=a,C.text=c.r.toString(),C.color="#f0f0f0",C.background="#454545",C.onFocusObservable.add(function(){A=C.name,I=C.text,tt(!1)}),C.onBlurObservable.add(function(){0!=parseFloat(C.text)&&""!=C.text||(C.text="0",Q(C,"r")),A==C.name&&(A="")}),C.onTextChangedObservable.add(function(){A==C.name&&Q(C,"r")}),Vt.addControl(C,0,2),(w=new T).width=.95,w.height=.72,w.name="gDecField",w.fontSize=a,w.text=c.g.toString(),w.color="#f0f0f0",w.background="#454545",w.onFocusObservable.add(function(){A=w.name,I=w.text,tt(!1)}),w.onBlurObservable.add(function(){0!=parseFloat(w.text)&&""!=w.text||(w.text="0",Q(w,"g")),A==w.name&&(A="")}),w.onTextChangedObservable.add(function(){A==w.name&&Q(w,"g")}),Vt.addControl(w,1,2),(M=new T).width=.95,M.height=.72,M.name="bDecField",M.fontSize=a,M.text=c.b.toString(),M.color="#f0f0f0",M.background="#454545",M.onFocusObservable.add(function(){A=M.name,I=M.text,tt(!1)}),M.onBlurObservable.add(function(){0!=parseFloat(M.text)&&""!=M.text||(M.text="0",Q(M,"b")),A==M.name&&(A="")}),M.onTextChangedObservable.add(function(){A==M.name&&Q(M,"b")}),Vt.addControl(M,2,2);var Ht,Ft=new x;Ft.name="Hex Value",Ft.width=.82,Ft.addRowDefinition(1,!1),Ft.addColumnDefinition(.1,!1),Ft.addColumnDefinition(.9,!1),Nt.addControl(Ft,2,0),(Ht=new y).text="#",Ht.color=V,Ht.fontSize=a,Ft.addControl(Ht,0,0),(P=new T).width=.96,P.height=.72,P.name="hexField",P.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,P.fontSize=a;var jt=i.lastColor.split("#");P.text=jt[1],P.color="#f0f0f0",P.background="#454545",P.onFocusObservable.add(function(){A=P.name,I=P.text,tt(!1)}),P.onBlurObservable.add(function(){if(3==P.text.length){var t=P.text.split("");P.text=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}""==P.text&&(P.text="000000",Z(s.Color3.FromHexString(P.text),"b")),A==P.name&&(A="")}),P.onTextChangedObservable.add(function(){var t=P.text,e=/[^0-9A-F]/i.test(t);if((P.text.length>6||e)&&A==P.name)P.text=I;else{if(P.text.length<6)for(var i=6-P.text.length,r=0;r<i;r++)t="0"+t;if(3==P.text.length){var n=P.text.split("");t=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]}t="#"+t,A==P.name&&(I=P.text,Z(s.Color3.FromHexString(t),P.name))}}),Ft.addControl(P,0,1),i.savedColors&&i.savedColors.length>0&&et("",Bt)})},e._Epsilon=1e-6,e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.ColorPicker"]=M;var P=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Ellipse"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),this._background&&(t.fillStyle=this._background,t.fill()),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._thickness&&(this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.stroke()),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._clipForChildren=function(t){p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,t),t.clip()},e}(g);s._TypeStore.RegisteredTypes["BABYLON.GUI.Ellipse"]=P;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._beforeRenderText=function(t){for(var e="",i=0;i<t.length;i++)e+="•";return e},e}(T);s._TypeStore.RegisteredTypes["BABYLON.GUI.InputPassword"]=k;var I=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i._x1=new a(0),i._y1=new a(0),i._x2=new a(0),i._y2=new a(0),i._dash=new Array,i._automaticSize=!0,i.isHitTestVisible=!1,i._horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,i}return n(e,t),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedControl",{get:function(){return this._connectedControl},set:function(t){var e=this;this._connectedControl!==t&&(this._connectedControlDirtyObserver&&this._connectedControl&&(this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver),this._connectedControlDirtyObserver=null),t&&(this._connectedControlDirtyObserver=t.onDirtyObservable.add(function(){return e._markAsDirty()})),this._connectedControl=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this._x1.toString(this._host)},set:function(t){this._x1.toString(this._host)!==t&&this._x1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this._y1.toString(this._host)},set:function(t){this._y1.toString(this._host)!==t&&this._y1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this._x2.toString(this._host)},set:function(t){this._x2.toString(this._host)!==t&&this._x2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this._y2.toString(this._host)},set:function(t){this._y2.toString(this._host)!==t&&this._y2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_effectiveX2",{get:function(){return(this._connectedControl?this._connectedControl.centerX:0)+this._x2.getValue(this._host)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_effectiveY2",{get:function(){return(this._connectedControl?this._connectedControl.centerY:0)+this._y2.getValue(this._host)},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Line"},e.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath(),t.moveTo(this._cachedParentMeasure.left+this._x1.getValue(this._host),this._cachedParentMeasure.top+this._y1.getValue(this._host)),t.lineTo(this._cachedParentMeasure.left+this._effectiveX2,this._cachedParentMeasure.top+this._effectiveY2),t.stroke(),t.restore()},e.prototype._measure=function(){this._currentMeasure.width=Math.abs(this._x1.getValue(this._host)-this._effectiveX2)+this._lineWidth,this._currentMeasure.height=Math.abs(this._y1.getValue(this._host)-this._effectiveY2)+this._lineWidth},e.prototype._computeAlignment=function(t,e){this._currentMeasure.left=t.left+Math.min(this._x1.getValue(this._host),this._effectiveX2)-this._lineWidth/2,this._currentMeasure.top=t.top+Math.min(this._y1.getValue(this._host),this._effectiveY2)-this._lineWidth/2},e.prototype.moveToVector3=function(t,e,i){if(void 0===i&&(i=!1),this._host&&this.parent===this._host._rootContainer){var r=this._host._getGlobalViewport(e),n=s.Vector3.Project(t,s.Matrix.Identity(),e.getTransformMatrix(),r);this._moveToProjectedPosition(n,i),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else s.Tools.Error("Cannot move a control to a vector3 if the control is not at root level")},e.prototype._moveToProjectedPosition=function(t,e){void 0===e&&(e=!1);var i=t.x+this._linkOffsetX.getValue(this._host)+"px",r=t.y+this._linkOffsetY.getValue(this._host)+"px";e?(this.x2=i,this.y2=r,this._x2.ignoreAdaptiveScaling=!0,this._y2.ignoreAdaptiveScaling=!0):(this.x1=i,this.y1=r,this._x1.ignoreAdaptiveScaling=!0,this._y1.ignoreAdaptiveScaling=!0)},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.Line"]=I;var A=function(){function t(t){this._multiLine=t,this._x=new a(0),this._y=new a(0),this._point=new s.Vector2(0,0)}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x.toString(this._multiLine._host)},set:function(t){this._x.toString(this._multiLine._host)!==t&&this._x.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y.toString(this._multiLine._host)},set:function(t){this._y.toString(this._multiLine._host)!==t&&this._y.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this._control},set:function(t){this._control!==t&&(this._control&&this._controlObserver&&(this._control.onDirtyObservable.remove(this._controlObserver),this._controlObserver=null),this._control=t,this._control&&(this._controlObserver=this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mesh",{get:function(){return this._mesh},set:function(t){this._mesh!==t&&(this._mesh&&this._meshObserver&&this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver),this._mesh=t,this._mesh&&(this._meshObserver=this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype.resetLinks=function(){this.control=null,this.mesh=null},t.prototype.translate=function(){return this._point=this._translatePoint(),this._point},t.prototype._translatePoint=function(){if(null!=this._mesh)return this._multiLine._host.getProjectedPosition(this._mesh.getBoundingInfo().boundingSphere.center,this._mesh.getWorldMatrix());if(null!=this._control)return new s.Vector2(this._control.centerX,this._control.centerY);var t=this._multiLine._host,e=this._x.getValueInPixel(t,Number(t._canvas.width)),i=this._y.getValueInPixel(t,Number(t._canvas.height));return new s.Vector2(e,i)},t.prototype.dispose=function(){this.resetLinks()},t}(),S=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i.onPointUpdate=function(){i._markAsDirty()},i._automaticSize=!0,i.isHitTestVisible=!1,i._horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,i._dash=[],i._points=[],i}return n(e,t),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.getAt=function(t){return this._points[t]||(this._points[t]=new A(this)),this._points[t]},e.prototype.add=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.map(function(e){return t.push(e)})},e.prototype.push=function(t){var e=this.getAt(this._points.length);return null==t?e:(t instanceof s.AbstractMesh?e.mesh=t:t instanceof p?e.control=t:null!=t.x&&null!=t.y&&(e.x=t.x,e.y=t.y),e)},e.prototype.remove=function(t){var e;if(t instanceof A){if(-1===(e=this._points.indexOf(t)))return}else e=t;var i=this._points[e];i&&(i.dispose(),this._points.splice(e,1))},e.prototype.reset=function(){for(;this._points.length>0;)this.remove(this._points.length-1)},e.prototype.resetLinks=function(){this._points.forEach(function(t){null!=t&&t.resetLinks()})},Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlignment",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"MultiLine"},e.prototype._draw=function(t,e){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath();var i=!0;this._points.forEach(function(e){e&&(i?(t.moveTo(e._point.x,e._point.y),i=!1):t.lineTo(e._point.x,e._point.y))}),t.stroke(),t.restore()},e.prototype._additionalProcessing=function(t,e){var i=this;this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._points.forEach(function(t,e){t&&(t.translate(),(null==i._minX||t._point.x<i._minX)&&(i._minX=t._point.x),(null==i._minY||t._point.y<i._minY)&&(i._minY=t._point.y),(null==i._maxX||t._point.x>i._maxX)&&(i._maxX=t._point.x),(null==i._maxY||t._point.y>i._maxY)&&(i._maxY=t._point.y))}),null==this._minX&&(this._minX=0),null==this._minY&&(this._minY=0),null==this._maxX&&(this._maxX=0),null==this._maxY&&(this._maxY=0)},e.prototype._measure=function(){null!=this._minX&&null!=this._maxX&&null!=this._minY&&null!=this._maxY&&(this._currentMeasure.width=Math.abs(this._maxX-this._minX)+this._lineWidth,this._currentMeasure.height=Math.abs(this._maxY-this._minY)+this._lineWidth)},e.prototype._computeAlignment=function(t,e){null!=this._minX&&null!=this._minY&&(this._currentMeasure.left=this._minX-this._lineWidth/2,this._currentMeasure.top=this._minY-this._lineWidth/2)},e.prototype.dispose=function(){this.reset(),t.prototype.dispose.call(this)},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.MultiLine"]=S;var E=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background="black",i._checkSizeRatio=.8,i._thickness=1,i.group="",i.onIsCheckedChangedObservable=new s.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSizeRatio",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){return this._isChecked},set:function(t){var e=this;this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t),this._isChecked&&this._host&&this._host.executeOnAllControls(function(t){if(t!==e&&void 0!==t.group){var i=t;i.group===e.group&&(i.isChecked=!1)}}))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"RadioButton"},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=this._currentMeasure.width-this._thickness,i=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this.color,t.lineWidth=this._thickness,t.stroke(),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColor;var r=e*this._checkSizeRatio,n=i*this._checkSizeRatio;p.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,r/2-this._thickness/2,n/2-this._thickness/2,t),t.fill()}t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked||(this.isChecked=!0),!0)},e.AddRadioButtonWithHeader=function(t,i,r,n){var o=new C;o.isVertical=!1,o.height="30px";var s=new e;s.width="20px",s.height="20px",s.isChecked=r,s.color="green",s.group=i,s.onIsCheckedChangedObservable.add(function(t){return n(s,t)}),o.addControl(s);var a=new y;return a.text=t,a.width="180px",a.paddingLeft="5px",a.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,a.color="white",o.addControl(a),o},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.RadioButton"]=E;var L=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thumbWidth=new a(20,a.UNITMODE_PIXEL,!1),i._minimum=0,i._maximum=100,i._value=50,i._isVertical=!1,i._barOffset=new a(5,a.UNITMODE_PIXEL,!1),i._isThumbClamped=!1,i._displayThumb=!0,i._step=0,i._lastPointerDownID=-1,i._effectiveBarOffset=0,i.onValueChangedObservable=new s.Observable,i._pointerIsDown=!1,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayThumb",{get:function(){return this._displayThumb},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step!==t&&(this._step=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barOffset",{get:function(){return this._barOffset.toString(this._host)},set:function(t){this._barOffset.toString(this._host)!==t&&this._barOffset.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barOffsetInPixels",{get:function(){return this._barOffset.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbWidth",{get:function(){return this._thumbWidth.toString(this._host)},set:function(t){this._thumbWidth.toString(this._host)!==t&&this._thumbWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbWidthInPixels",{get:function(){return this._thumbWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){this._minimum!==t&&(this._minimum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum!==t&&(this._maximum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=Math.max(Math.min(t,this._maximum),this._minimum),this._value!==t&&(this._value=t,this._markAsDirty(),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isThumbClamped",{get:function(){return this._isThumbClamped},set:function(t){this._isThumbClamped!==t&&(this._isThumbClamped=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"BaseSlider"},e.prototype._getThumbPosition=function(){return this.isVertical?(this.maximum-this.value)/(this.maximum-this.minimum)*this._backgroundBoxLength:(this.value-this.minimum)/(this.maximum-this.minimum)*this._backgroundBoxLength},e.prototype._getThumbThickness=function(t){var e=0;switch(t){case"circle":e=this._thumbWidth.isPixel?Math.max(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host);break;case"rectangle":e=this._thumbWidth.isPixel?Math.min(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)}return e},e.prototype._prepareRenderingData=function(t){this._effectiveBarOffset=0,this._renderLeft=this._currentMeasure.left,this._renderTop=this._currentMeasure.top,this._renderWidth=this._currentMeasure.width,this._renderHeight=this._currentMeasure.height,this._backgroundBoxLength=Math.max(this._currentMeasure.width,this._currentMeasure.height),this._backgroundBoxThickness=Math.min(this._currentMeasure.width,this._currentMeasure.height),this._effectiveThumbThickness=this._getThumbThickness(t),this.displayThumb&&(this._backgroundBoxLength-=this._effectiveThumbThickness),this.isVertical&&this._currentMeasure.height<this._currentMeasure.width?console.error("Height should be greater than width"):(this._barOffset.isPixel?this._effectiveBarOffset=Math.min(this._barOffset.getValue(this._host),this._backgroundBoxThickness):this._effectiveBarOffset=this._backgroundBoxThickness*this._barOffset.getValue(this._host),this._backgroundBoxThickness-=2*this._effectiveBarOffset,this.isVertical?(this._renderLeft+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderTop+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxLength,this._renderWidth=this._backgroundBoxThickness):(this._renderTop+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderLeft+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxThickness,this._renderWidth=this._backgroundBoxLength))},e.prototype._updateValueFromPointer=function(t,e){var i;0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),i=this._isVertical?this._minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this._maximum-this._minimum):this._minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this._maximum-this._minimum);var r=1/this._step|0;this.value=this._step?(i*r|0)/r:i},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._pointerIsDown=!0,this._updateValueFromPointer(i.x,i.y),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0)},e.prototype._onPointerMove=function(e,i,r){r==this._lastPointerDownID&&(this._pointerIsDown&&this._updateValueFromPointer(i.x,i.y),t.prototype._onPointerMove.call(this,e,i,r))},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e}(p),R=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background="black",i._borderColor="white",i._isThumbCircle=!1,i._displayValueBar=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayValueBar",{get:function(){return this._displayValueBar},set:function(t){this._displayValueBar!==t&&(this._displayValueBar=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isThumbCircle",{get:function(){return this._isThumbCircle},set:function(t){this._isThumbCircle!==t&&(this._isThumbCircle=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Slider"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._prepareRenderingData(this.isThumbCircle?"circle":"rectangle");var i=this._renderLeft,r=this._renderTop,n=this._renderWidth,o=this._renderHeight,s=0;this.isThumbClamped&&this.isThumbCircle?(this.isVertical?r+=this._effectiveThumbThickness/2:i+=this._effectiveThumbThickness/2,s=this._backgroundBoxThickness/2):s=(this._effectiveThumbThickness-this._effectiveBarOffset)/2,(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY);var a=this._getThumbPosition();t.fillStyle=this._background,this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,r,s,Math.PI,2*Math.PI),t.fill(),t.fillRect(i,r,n,o)):t.fillRect(i,r,n,o+this._effectiveThumbThickness):t.fillRect(i,r,n,o):this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxLength,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),t.fillRect(i,r,n,o)):t.fillRect(i,r,n+this._effectiveThumbThickness,o):t.fillRect(i,r,n,o),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillStyle=this.color,this._displayValueBar&&(this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(i+this._backgroundBoxThickness/2,r+this._backgroundBoxLength,s,0,2*Math.PI),t.fill(),t.fillRect(i,r+a,n,o-a)):t.fillRect(i,r+a,n,o-a+this._effectiveThumbThickness):t.fillRect(i,r+a,n,o-a):this.isThumbClamped&&this.isThumbCircle?(t.beginPath(),t.arc(i,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),t.fillRect(i,r,a,o)):t.fillRect(i,r,a,o)),this.displayThumb&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isThumbCircle?(t.beginPath(),this.isVertical?t.arc(i+this._backgroundBoxThickness/2,r+a,s,0,2*Math.PI):t.arc(i+a,r+this._backgroundBoxThickness/2,s,0,2*Math.PI),t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,t.stroke()):(this.isVertical?t.fillRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.fillRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,this.isVertical?t.strokeRect(i-this._effectiveBarOffset,this._currentMeasure.top+a,this._currentMeasure.width,this._effectiveThumbThickness):t.strokeRect(this._currentMeasure.left+a,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height))),t.restore()},e}(L);s._TypeStore.RegisteredTypes["BABYLON.GUI.Slider"]=R;var D=function(){function t(t){this.name=t,this._groupPanel=new C,this._selectors=new Array,this._groupPanel.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,this._groupPanel.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,this._groupHeader=this._addGroupHeader(t)}return Object.defineProperty(t.prototype,"groupPanel",{get:function(){return this._groupPanel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectors",{get:function(){return this._selectors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._groupHeader.text},set:function(t){"label"!==this._groupHeader.text&&(this._groupHeader.text=t)},enumerable:!0,configurable:!0}),t.prototype._addGroupHeader=function(t){var e=new y("groupHead",t);return e.width=.9,e.height="30px",e.textWrapping=!0,e.color="black",e.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.left="2px",this._groupPanel.addControl(e),e},t.prototype._getSelector=function(t){if(!(t<0||t>=this._selectors.length))return this._selectors[t]},t.prototype.removeSelector=function(t){t<0||t>=this._selectors.length||(this._groupPanel.removeControl(this._selectors[t]),this._selectors.splice(t,1))},t}(),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addCheckbox=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);i=i||!1;var r=new w;r.width="20px",r.height="20px",r.color="#364249",r.background="#CCCCCC",r.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r.onIsCheckedChangedObservable.add(function(t){e(t)});var n=p.AddHeader(r,t,"200px",{isHorizontal:!0,controlFirst:!0});n.height="30px",n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.left="4px",this.groupPanel.addControl(n),this.selectors.push(n),r.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(r.color=this.groupPanel.parent.parent.buttonColor,r.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(D),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectNb=0,e}return n(e,t),e.prototype.addRadio=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);var r=this._selectNb++,n=new E;n.name=t,n.width="20px",n.height="20px",n.color="#364249",n.background="#CCCCCC",n.group=this.name,n.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,n.onIsCheckedChangedObservable.add(function(t){t&&e(r)});var o=p.AddHeader(n,t,"200px",{isHorizontal:!0,controlFirst:!0});o.height="30px",o.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o.left="4px",this.groupPanel.addControl(o),this.selectors.push(o),n.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(n.color=this.groupPanel.parent.parent.buttonColor,n.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(D),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addSlider=function(t,e,i,r,n,o,s){void 0===e&&(e=function(t){}),void 0===i&&(i="Units"),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=function(t){return 0|t});var a=new R;a.name=i,a.value=o,a.minimum=r,a.maximum=n,a.width=.9,a.height="20px",a.color="#364249",a.background="#CCCCCC",a.borderColor="black",a.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,a.left="4px",a.paddingBottom="4px",a.onValueChangedObservable.add(function(t){a.parent.children[0].text=a.parent.children[0].name+": "+s(t)+" "+a.name,e(t)});var h=p.AddHeader(a,t+": "+s(o)+" "+i,"30px",{isHorizontal:!1,controlFirst:!1});h.height="60px",h.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,h.left="4px",h.children[0].name=t,this.groupPanel.addControl(h),this.selectors.push(h),this.groupPanel.parent&&this.groupPanel.parent.parent&&(a.color=this.groupPanel.parent.parent.buttonColor,a.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[0].name=e,this.selectors[t].children[0].text=e+": "+this.selectors[t].children[1].value+" "+this.selectors[t].children[1].name},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[1].background=e},e}(D),H=function(t){function e(e,i){void 0===i&&(i=[]);var r=t.call(this,e)||this;if(r.name=e,r.groups=i,r._buttonColor="#364249",r._buttonBackground="#CCCCCC",r._headerColor="black",r._barColor="white",r._barHeight="2px",r._spacerHeight="20px",r._bars=new Array,r._groups=i,r.thickness=2,r._panel=new C,r._panel.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._panel.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._panel.top=5,r._panel.left=5,r._panel.width=.95,i.length>0){for(var n=0;n<i.length-1;n++)r._panel.addControl(i[n].groupPanel),r._addSpacer();r._panel.addControl(i[i.length-1].groupPanel)}return r.addControl(r._panel),r}return n(e,t),e.prototype._getTypeName=function(){return"SelectionPanel"},Object.defineProperty(e.prototype,"headerColor",{get:function(){return this._headerColor},set:function(t){this._headerColor!==t&&(this._headerColor=t,this._setHeaderColor())},enumerable:!0,configurable:!0}),e.prototype._setHeaderColor=function(){for(var t=0;t<this._groups.length;t++)this._groups[t].groupPanel.children[0].color=this._headerColor},Object.defineProperty(e.prototype,"buttonColor",{get:function(){return this._buttonColor},set:function(t){this._buttonColor!==t&&(this._buttonColor=t,this._setbuttonColor())},enumerable:!0,configurable:!0}),e.prototype._setbuttonColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonColor(e,this._buttonColor)},Object.defineProperty(e.prototype,"labelColor",{get:function(){return this._labelColor},set:function(t){this._labelColor!==t&&(this._labelColor=t,this._setLabelColor())},enumerable:!0,configurable:!0}),e.prototype._setLabelColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorLabelColor(e,this._labelColor)},Object.defineProperty(e.prototype,"buttonBackground",{get:function(){return this._buttonBackground},set:function(t){this._buttonBackground!==t&&(this._buttonBackground=t,this._setButtonBackground())},enumerable:!0,configurable:!0}),e.prototype._setButtonBackground=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonBackground(e,this._buttonBackground)},Object.defineProperty(e.prototype,"barColor",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._setBarColor())},enumerable:!0,configurable:!0}),e.prototype._setBarColor=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].background=this._barColor},Object.defineProperty(e.prototype,"barHeight",{get:function(){return this._barHeight},set:function(t){this._barHeight!==t&&(this._barHeight=t,this._setBarHeight())},enumerable:!0,configurable:!0}),e.prototype._setBarHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].height=this._barHeight},Object.defineProperty(e.prototype,"spacerHeight",{get:function(){return this._spacerHeight},set:function(t){this._spacerHeight!==t&&(this._spacerHeight=t,this._setSpacerHeight())},enumerable:!0,configurable:!0}),e.prototype._setSpacerHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].height=this._spacerHeight},e.prototype._addSpacer=function(){var t=new g;t.width=1,t.height=this._spacerHeight,t.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT;var e=new m;e.width=1,e.height=this._barHeight,e.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,e.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,e.background=this._barColor,e.color="transparent",t.addControl(e),this._panel.addControl(t),this._bars.push(t)},e.prototype.addGroup=function(t){this._groups.length>0&&this._addSpacer(),this._panel.addControl(t.groupPanel),this._groups.push(t),t.groupPanel.children[0].color=this._headerColor;for(var e=0;e<t.selectors.length;e++)t._setSelectorButtonColor(e,this._buttonColor),t._setSelectorButtonBackground(e,this._buttonBackground)},e.prototype.removeGroup=function(t){if(!(t<0||t>=this._groups.length)){var e=this._groups[t];this._panel.removeControl(e.groupPanel),this._groups.splice(t,1),t<this._bars.length&&(this._panel.removeControl(this._bars[t]),this._bars.splice(t,1))}},e.prototype.setHeaderName=function(t,e){e<0||e>=this._groups.length||(this._groups[e].groupPanel.children[0].text=t)},e.prototype.relabel=function(t,e,i){if(!(e<0||e>=this._groups.length)){var r=this._groups[e];i<0||i>=r.selectors.length||r._setSelectorLabel(i,t)}},e.prototype.removeFromGroupSelector=function(t,e){if(!(t<0||t>=this._groups.length)){var i=this._groups[t];e<0||e>=i.selectors.length||i.removeSelector(e)}},e.prototype.addToGroupCheckbox=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addCheckbox(e,i,r)},e.prototype.addToGroupRadio=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addRadio(e,i,r)},e.prototype.addToGroupSlider=function(t,e,i,r,n,o,s,a){(void 0===i&&(i=function(){}),void 0===r&&(r="Units"),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=function(t){return 0|t}),t<0||t>=this._groups.length)||this._groups[t].addSlider(e,i,r,n,o,s,a)},e}(m),F=function(t){function e(e){var i=t.call(this,e)||this;return i._freezeControls=!1,i._bucketWidth=0,i._bucketHeight=0,i._buckets={},i}return n(e,t),Object.defineProperty(e.prototype,"freezeControls",{get:function(){return this._freezeControls},set:function(t){if(this._freezeControls!==t){this._freezeControls=!1;var e=this.host.getSize(),i=e.width,r=e.height,n=this.host.getContext(),o=new _(0,0,i,r);this.host._numLayoutCalls=0,this.host._rootContainer._layout(o,n),t&&(this._updateMeasures(),this._useBuckets()&&this._makeBuckets()),this._freezeControls=t,this.host.markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketWidth",{get:function(){return this._bucketWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketHeight",{get:function(){return this._bucketHeight},enumerable:!0,configurable:!0}),e.prototype.setBucketSizes=function(t,e){this._bucketWidth=t,this._bucketHeight=e,this._useBuckets()?this._freezeControls&&this._makeBuckets():this._buckets={}},e.prototype._useBuckets=function(){return this._bucketWidth>0&&this._bucketHeight>0},e.prototype._makeBuckets=function(){this._buckets={},this._bucketLen=Math.ceil(this.widthInPixels/this._bucketWidth),this._dispatchInBuckets(this._children)},e.prototype._dispatchInBuckets=function(t){for(var e=0;e<t.length;++e){for(var i=t[e],r=Math.max(0,Math.floor((i._currentMeasure.left-this._currentMeasure.left)/this._bucketWidth)),n=Math.floor((i._currentMeasure.left-this._currentMeasure.left+i._currentMeasure.width-1)/this._bucketWidth),o=Math.max(0,Math.floor((i._currentMeasure.top-this._currentMeasure.top)/this._bucketHeight)),s=Math.floor((i._currentMeasure.top-this._currentMeasure.top+i._currentMeasure.height-1)/this._bucketHeight);o<=s;){for(var a=r;a<=n;++a){var h=o*this._bucketLen+a,l=this._buckets[h];l||(l=[],this._buckets[h]=l),l.push(i)}o++}i instanceof g&&i._children.length>0&&this._dispatchInBuckets(i._children)}},e.prototype._updateMeasures=function(){var t=0|this.leftInPixels,e=0|this.topInPixels;this._measureForChildren.left-=t,this._measureForChildren.top-=e,this._currentMeasure.left-=t,this._currentMeasure.top-=e,this._updateChildrenMeasures(this._children,t,e)},e.prototype._updateChildrenMeasures=function(t,e,i){for(var r=0;r<t.length;++r){var n=t[r];n._currentMeasure.left-=e,n._currentMeasure.top-=i,n._customData._origLeft=n._currentMeasure.left,n._customData._origTop=n._currentMeasure.top,n instanceof g&&n._children.length>0&&this._updateChildrenMeasures(n._children,e,i)}},e.prototype._getTypeName=function(){return"ScrollViewerWindow"},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._parentMeasure=e,this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this._measureForChildren.width=e.width,this._measureForChildren.height=e.height},e.prototype._layout=function(e,i){return this._freezeControls?(this.invalidateRect(),!1):t.prototype._layout.call(this,e,i)},e.prototype._scrollChildren=function(t,e,i){for(var r=0;r<t.length;++r){var n=t[r];n._currentMeasure.left=n._customData._origLeft+e,n._currentMeasure.top=n._customData._origTop+i,n._isClipped=!1,n instanceof g&&n._children.length>0&&this._scrollChildren(n._children,e,i)}},e.prototype._scrollChildrenWithBuckets=function(t,e,i,r){for(var n=Math.max(0,Math.floor(-t/this._bucketWidth)),o=Math.floor((-t+this._parentMeasure.width-1)/this._bucketWidth),s=Math.max(0,Math.floor(-e/this._bucketHeight)),a=Math.floor((-e+this._parentMeasure.height-1)/this._bucketHeight);s<=a;){for(var h=n;h<=o;++h){var l=s*this._bucketLen+h,u=this._buckets[l];if(u)for(var c=0;c<u.length;++c){var _=u[c];_._currentMeasure.left=_._customData._origLeft+i,_._currentMeasure.top=_._customData._origTop+r,_._isClipped=!1}}s++}},e.prototype._draw=function(e,i){if(this._freezeControls){this._localDraw(e),this.clipChildren&&this._clipForChildren(e);var r=this.leftInPixels,n=this.topInPixels;this._useBuckets()?(this._scrollChildrenWithBuckets(this._oldLeft,this._oldTop,r,n),this._scrollChildrenWithBuckets(r,n,r,n)):this._scrollChildren(this._children,r,n),this._oldLeft=r,this._oldTop=n;for(var o=0,s=this._children;o<s.length;o++){var a=s[o];a._intersectsRect(this._parentMeasure)&&a._render(e,this._parentMeasure)}}else t.prototype._draw.call(this,e,i)},e.prototype._postMeasure=function(){if(this._freezeControls)t.prototype._postMeasure.call(this);else{for(var e=this.parentClientWidth,i=this.parentClientHeight,r=0,n=this.children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(o.horizontalAlignment===p.HORIZONTAL_ALIGNMENT_CENTER&&o._offsetLeft(this._currentMeasure.left-o._currentMeasure.left),o.verticalAlignment===p.VERTICAL_ALIGNMENT_CENTER&&o._offsetTop(this._currentMeasure.top-o._currentMeasure.top),e=Math.max(e,o._currentMeasure.left-this._currentMeasure.left+o._currentMeasure.width),i=Math.max(i,o._currentMeasure.top-this._currentMeasure.top+o._currentMeasure.height))}this._currentMeasure.width!==e&&(this._width.updateInPlace(e,a.UNITMODE_PIXEL),this._currentMeasure.width=e,this._rebuildLayout=!0,this._isDirty=!0),this._currentMeasure.height!==i&&(this._height.updateInPlace(i,a.UNITMODE_PIXEL),this._currentMeasure.height=i,this._rebuildLayout=!0,this._isDirty=!0),t.prototype._postMeasure.call(this)}},e}(g),j=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background="black",i._borderColor="white",i._tempMeasure=new _(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"Scrollbar"},e.prototype._getThumbThickness=function(){return this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._renderLeft,i=this._getThumbPosition();t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.fillStyle=this.color,this.isVertical?(this._tempMeasure.left=e-this._effectiveBarOffset,this._tempMeasure.top=this._currentMeasure.top+i,this._tempMeasure.width=this._currentMeasure.width,this._tempMeasure.height=this._effectiveThumbThickness):(this._tempMeasure.left=this._currentMeasure.left+i,this._tempMeasure.top=this._currentMeasure.top,this._tempMeasure.width=this._effectiveThumbThickness,this._tempMeasure.height=this._currentMeasure.height),t.fillRect(this._tempMeasure.left,this._tempMeasure.top,this._tempMeasure.width,this._tempMeasure.height),t.restore()},e.prototype._updateValueFromPointer=function(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e},e.prototype._onPointerDown=function(e,i,r,n){return this._first=!0,t.prototype._onPointerDown.call(this,e,i,r,n)},e}(L),W=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thumbLength=.5,i._thumbHeight=1,i._barImageHeight=1,i._tempMeasure=new _(0,0,0,0),i.num90RotationInVerticalMode=1,i}return n(e,t),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this._backgroundBaseImage},set:function(t){var e=this;this._backgroundBaseImage!==t&&(this._backgroundBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._backgroundImage=t._rotate90(this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(e.num90RotationInVerticalMode,!0);e._backgroundImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._thumbBaseImage},set:function(t){var e=this;this._thumbBaseImage!==t&&(this._thumbBaseImage=t,this.isVertical&&0!==this.num90RotationInVerticalMode?t.isLoaded?(this._thumbImage=t._rotate90(-this.num90RotationInVerticalMode,!0),this._markAsDirty()):t.onImageLoadedObservable.addOnce(function(){var i=t._rotate90(-e.num90RotationInVerticalMode,!0);e._thumbImage=i,i.isLoaded||i.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),e._markAsDirty()}):(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){e._markAsDirty()}),this._markAsDirty()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(t){this._thumbLength!==t&&(this._thumbLength=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(t){this._thumbLength!==t&&(this._thumbHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(t){this._barImageHeight!==t&&(this._barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ImageScrollBar"},e.prototype._getThumbThickness=function(){return this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var e=this._getThumbPosition(),i=this._renderLeft,r=this._renderTop,n=this._renderWidth,o=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(i,r,n,o),this.isVertical?(this._tempMeasure.copyFromFloats(i+n*(1-this._barImageHeight)*.5,this._currentMeasure.top,n*this._barImageHeight,o),this._tempMeasure.height+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)):(this._tempMeasure.copyFromFloats(this._currentMeasure.left,r+o*(1-this._barImageHeight)*.5,n,o*this._barImageHeight),this._tempMeasure.width+=this._effectiveThumbThickness,this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure)),this._backgroundImage._draw(t)),this.isVertical?this._tempMeasure.copyFromFloats(i-this._effectiveBarOffset+this._currentMeasure.width*(1-this._thumbHeight)*.5,this._currentMeasure.top+e,this._currentMeasure.width*this._thumbHeight,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+e,this._currentMeasure.top+this._currentMeasure.height*(1-this._thumbHeight)*.5,this._effectiveThumbThickness,this._currentMeasure.height*this._thumbHeight),this._thumbImage&&(this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},e.prototype._updateValueFromPointer=function(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._tempMeasure.left||t>this._tempMeasure.left+this._tempMeasure.width||e<this._tempMeasure.top||e>this._tempMeasure.top+this._tempMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e},e.prototype._onPointerDown=function(e,i,r,n){return this._first=!0,t.prototype._onPointerDown.call(this,e,i,r,n)},e}(L),z=function(t){function e(e,i){var r=t.call(this,e)||this;return r._barSize=20,r._pointerIsOver=!1,r._wheelPrecision=.05,r._thumbLength=.5,r._thumbHeight=1,r._barImageHeight=1,r._horizontalBarImageHeight=1,r._verticalBarImageHeight=1,r._forceHorizontalBar=!1,r._forceVerticalBar=!1,r._useImageBar=i||!1,r.onDirtyObservable.add(function(){r._horizontalBarSpace.color=r.color,r._verticalBarSpace.color=r.color,r._dragSpace.color=r.color}),r.onPointerEnterObservable.add(function(){r._pointerIsOver=!0}),r.onPointerOutObservable.add(function(){r._pointerIsOver=!1}),r._grid=new x,r._useImageBar?(r._horizontalBar=new W,r._verticalBar=new W):(r._horizontalBar=new j,r._verticalBar=new j),r._window=new F("scrollViewer_window"),r._window.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._window.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._grid.addColumnDefinition(1),r._grid.addColumnDefinition(0,!0),r._grid.addRowDefinition(1),r._grid.addRowDefinition(0,!0),t.prototype.addControl.call(r,r._grid),r._grid.addControl(r._window,0,0),r._verticalBarSpace=new m,r._verticalBarSpace.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._verticalBarSpace.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._verticalBarSpace.thickness=1,r._grid.addControl(r._verticalBarSpace,0,1),r._addBar(r._verticalBar,r._verticalBarSpace,!0,Math.PI),r._horizontalBarSpace=new m,r._horizontalBarSpace.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,r._horizontalBarSpace.verticalAlignment=p.VERTICAL_ALIGNMENT_TOP,r._horizontalBarSpace.thickness=1,r._grid.addControl(r._horizontalBarSpace,1,0),r._addBar(r._horizontalBar,r._horizontalBarSpace,!1,0),r._dragSpace=new m,r._dragSpace.thickness=1,r._grid.addControl(r._dragSpace,1,1),r._useImageBar||(r.barColor="grey",r.barBackground="transparent"),r}return n(e,t),Object.defineProperty(e.prototype,"horizontalBar",{get:function(){return this._horizontalBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBar",{get:function(){return this._verticalBar},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){return t?(this._window.addControl(t),this):this},e.prototype.removeControl=function(t){return this._window.removeControl(t),this},Object.defineProperty(e.prototype,"children",{get:function(){return this._window.children},enumerable:!0,configurable:!0}),e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this._children;t<e.length;t++){e[t]._markMatrixAsDirty()}},Object.defineProperty(e.prototype,"freezeControls",{get:function(){return this._window.freezeControls},set:function(t){this._window.freezeControls=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketWidth",{get:function(){return this._window.bucketWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucketHeight",{get:function(){return this._window.bucketHeight},enumerable:!0,configurable:!0}),e.prototype.setBucketSizes=function(t,e){this._window.setBucketSizes(t,e)},Object.defineProperty(e.prototype,"forceHorizontalBar",{get:function(){return this._forceHorizontalBar},set:function(t){this._grid.setRowDefinition(1,t?this._barSize:0,!0),this._horizontalBar.isVisible=t,this._forceHorizontalBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceVerticalBar",{get:function(){return this._forceVerticalBar},set:function(t){this._grid.setColumnDefinition(1,t?this._barSize:0,!0),this._verticalBar.isVisible=t,this._forceVerticalBar=t},enumerable:!0,configurable:!0}),e.prototype.resetWindow=function(){this._window.width="100%",this._window.height="100%"},e.prototype._getTypeName=function(){return"ScrollViewer"},e.prototype._buildClientSizes=function(){var t=this.host.idealRatio;this._window.parentClientWidth=this._currentMeasure.width-(this._verticalBar.isVisible||this.forceVerticalBar?this._barSize*t:0)-2*this.thickness,this._window.parentClientHeight=this._currentMeasure.height-(this._horizontalBar.isVisible||this.forceHorizontalBar?this._barSize*t:0)-2*this.thickness,this._clientWidth=this._window.parentClientWidth,this._clientHeight=this._window.parentClientHeight},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._buildClientSizes()},e.prototype._postMeasure=function(){t.prototype._postMeasure.call(this),this._updateScroller()},Object.defineProperty(e.prototype,"wheelPrecision",{get:function(){return this._wheelPrecision},set:function(t){this._wheelPrecision!==t&&(t<0&&(t=0),t>1&&(t=1),this._wheelPrecision=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBackground",{get:function(){return this._horizontalBarSpace.background},set:function(t){this._horizontalBarSpace.background!==t&&(this._horizontalBarSpace.background=t,this._verticalBarSpace.background=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barColor",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._horizontalBar.color=t,this._verticalBar.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._barImage},set:function(t){if(this._barImage!==t){this._barImage=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbImage=t,i.thumbImage=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalThumbImage",{get:function(){return this._horizontalBarImage},set:function(t){this._horizontalBarImage!==t&&(this._horizontalBarImage=t,this._horizontalBar.thumbImage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalThumbImage",{get:function(){return this._verticalBarImage},set:function(t){this._verticalBarImage!==t&&(this._verticalBarImage=t,this._verticalBar.thumbImage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barSize",{get:function(){return this._barSize},set:function(t){this._barSize!==t&&(this._barSize=t,this._markAsDirty(),this._horizontalBar.isVisible&&this._grid.setRowDefinition(1,this._barSize,!0),this._verticalBar.isVisible&&this._grid.setColumnDefinition(1,this._barSize,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLength",{get:function(){return this._thumbLength},set:function(t){if(this._thumbLength!==t){t<=0&&(t=.1),t>1&&(t=1),this._thumbLength=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbLength=t,i.thumbLength=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbHeight",{get:function(){return this._thumbHeight},set:function(t){if(this._thumbHeight!==t){t<=0&&(t=.1),t>1&&(t=1),this._thumbHeight=t;var e=this._horizontalBar,i=this._verticalBar;e.thumbHeight=t,i.thumbHeight=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImageHeight",{get:function(){return this._barImageHeight},set:function(t){if(this._barImageHeight!==t){t<=0&&(t=.1),t>1&&(t=1),this._barImageHeight=t;var e=this._horizontalBar,i=this._verticalBar;e.barImageHeight=t,i.barImageHeight=t,this._markAsDirty()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalBarImageHeight",{get:function(){return this._horizontalBarImageHeight},set:function(t){this._horizontalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._horizontalBarImageHeight=t,this._horizontalBar.barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBarImageHeight",{get:function(){return this._verticalBarImageHeight},set:function(t){this._verticalBarImageHeight!==t&&(t<=0&&(t=.1),t>1&&(t=1),this._verticalBarImageHeight=t,this._verticalBar.barImageHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barBackground",{get:function(){return this._barBackground},set:function(t){if(this._barBackground!==t){this._barBackground=t;var e=this._horizontalBar,i=this._verticalBar;e.background=t,i.background=t,this._dragSpace.background=t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barImage",{get:function(){return this._barBackgroundImage},set:function(t){this._barBackgroundImage,this._barBackgroundImage=t;var e=this._horizontalBar,i=this._verticalBar;e.backgroundImage=t,i.backgroundImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalBarImage",{get:function(){return this._horizontalBarBackgroundImage},set:function(t){this._horizontalBarBackgroundImage,this._horizontalBarBackgroundImage=t,this._horizontalBar.backgroundImage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalBarImage",{get:function(){return this._verticalBarBackgroundImage},set:function(t){this._verticalBarBackgroundImage,this._verticalBarBackgroundImage=t,this._verticalBar.backgroundImage=t},enumerable:!0,configurable:!0}),e.prototype._setWindowPosition=function(){var t=this.host.idealRatio,e=this._window._currentMeasure.width,i=this._window._currentMeasure.height,r=this._clientWidth-e,n=this._clientHeight-i,o=this._horizontalBar.value/t*r+"px",s=this._verticalBar.value/t*n+"px";o!==this._window.left&&(this._window.left=o,this.freezeControls||(this._rebuildLayout=!0)),s!==this._window.top&&(this._window.top=s,this.freezeControls||(this._rebuildLayout=!0))},e.prototype._updateScroller=function(){var t=this._window._currentMeasure.width,e=this._window._currentMeasure.height;this._horizontalBar.isVisible&&t<=this._clientWidth&&!this.forceHorizontalBar?(this._grid.setRowDefinition(1,0,!0),this._horizontalBar.isVisible=!1,this._horizontalBar.value=0,this._rebuildLayout=!0):!this._horizontalBar.isVisible&&(t>this._clientWidth||this.forceHorizontalBar)&&(this._grid.setRowDefinition(1,this._barSize,!0),this._horizontalBar.isVisible=!0,this._rebuildLayout=!0),this._verticalBar.isVisible&&e<=this._clientHeight&&!this.forceVerticalBar?(this._grid.setColumnDefinition(1,0,!0),this._verticalBar.isVisible=!1,this._verticalBar.value=0,this._rebuildLayout=!0):!this._verticalBar.isVisible&&(e>this._clientHeight||this.forceVerticalBar)&&(this._grid.setColumnDefinition(1,this._barSize,!0),this._verticalBar.isVisible=!0,this._rebuildLayout=!0),this._buildClientSizes();var i=this.host.idealRatio;this._horizontalBar.thumbWidth=.9*this._thumbLength*(this._clientWidth/i)+"px",this._verticalBar.thumbWidth=.9*this._thumbLength*(this._clientHeight/i)+"px"},e.prototype._link=function(e){t.prototype._link.call(this,e),this._attachWheel()},e.prototype._addBar=function(t,e,i,r){var n=this;t.paddingLeft=0,t.width="100%",t.height="100%",t.barOffset=0,t.value=0,t.maximum=1,t.horizontalAlignment=p.HORIZONTAL_ALIGNMENT_CENTER,t.verticalAlignment=p.VERTICAL_ALIGNMENT_CENTER,t.isVertical=i,t.rotation=r,t.isVisible=!1,e.addControl(t),t.onValueChangedObservable.add(function(t){n._setWindowPosition()})},e.prototype._attachWheel=function(){var t=this;this._host&&!this._onWheelObserver&&(this._onWheelObserver=this.onWheelObservable.add(function(e){t._pointerIsOver&&(1==t._verticalBar.isVisible&&(e.y<0&&t._verticalBar.value>0?t._verticalBar.value-=t._wheelPrecision:e.y>0&&t._verticalBar.value<t._verticalBar.maximum&&(t._verticalBar.value+=t._wheelPrecision)),1==t._horizontalBar.isVisible&&(e.x<0&&t._horizontalBar.value<t._horizontalBar.maximum?t._horizontalBar.value+=t._wheelPrecision:e.x>0&&t._horizontalBar.value>0&&(t._horizontalBar.value-=t._wheelPrecision)))}))},e.prototype._renderHighlightSpecific=function(e){this.isHighlighted&&(t.prototype._renderHighlightSpecific.call(this,e),this._grid._renderHighlightSpecific(e),e.restore())},e.prototype.dispose=function(){this.onWheelObservable.remove(this._onWheelObserver),this._onWheelObserver=null,t.prototype.dispose.call(this)},e}(m);s._TypeStore.RegisteredTypes["BABYLON.GUI.ScrollViewer"]=z;var G=function(){},X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onKeyPressObservable=new s.Observable,e.defaultButtonWidth="40px",e.defaultButtonHeight="40px",e.defaultButtonPaddingLeft="2px",e.defaultButtonPaddingRight="2px",e.defaultButtonPaddingTop="2px",e.defaultButtonPaddingBottom="2px",e.defaultButtonColor="#DDD",e.defaultButtonBackground="#070707",e.shiftButtonColor="#7799FF",e.selectedShiftThickness=1,e.shiftState=0,e._currentlyConnectedInputText=null,e._connectedInputTexts=[],e._onKeyPressObserver=null,e}return n(e,t),e.prototype._getTypeName=function(){return"VirtualKeyboard"},e.prototype._createKey=function(t,e){var i=this,r=O.CreateSimpleButton(t,t);return r.width=e&&e.width?e.width:this.defaultButtonWidth,r.height=e&&e.height?e.height:this.defaultButtonHeight,r.color=e&&e.color?e.color:this.defaultButtonColor,r.background=e&&e.background?e.background:this.defaultButtonBackground,r.paddingLeft=e&&e.paddingLeft?e.paddingLeft:this.defaultButtonPaddingLeft,r.paddingRight=e&&e.paddingRight?e.paddingRight:this.defaultButtonPaddingRight,r.paddingTop=e&&e.paddingTop?e.paddingTop:this.defaultButtonPaddingTop,r.paddingBottom=e&&e.paddingBottom?e.paddingBottom:this.defaultButtonPaddingBottom,r.thickness=0,r.isFocusInvisible=!0,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.onPointerUpObservable.add(function(){i.onKeyPressObservable.notifyObservers(t)}),r},e.prototype.addKeysRow=function(t,e){var i=new C;i.isVertical=!1,i.isFocusInvisible=!0;for(var r=null,n=0;n<t.length;n++){var o=null;e&&e.length===t.length&&(o=e[n]);var s=this._createKey(t[n],o);(!r||s.heightInPixels>r.heightInPixels)&&(r=s),i.addControl(s)}i.height=r?r.height:this.defaultButtonHeight,this.addControl(i)},e.prototype.applyShiftState=function(t){if(this.children)for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i&&i.children)for(var r=i,n=0;n<r.children.length;n++){var o=r.children[n];if(o&&o.children[0]){var s=o.children[0];"⇧"===s.text&&(o.color=t?this.shiftButtonColor:this.defaultButtonColor,o.thickness=t>1?this.selectedShiftThickness:0),s.text=t>0?s.text.toUpperCase():s.text.toLowerCase()}}}},Object.defineProperty(e.prototype,"connectedInputText",{get:function(){return this._currentlyConnectedInputText},enumerable:!0,configurable:!0}),e.prototype.connect=function(t){var e=this;if(!this._connectedInputTexts.some(function(e){return e.input===t})){null===this._onKeyPressObserver&&(this._onKeyPressObserver=this.onKeyPressObservable.add(function(t){if(e._currentlyConnectedInputText){switch(e._currentlyConnectedInputText._host.focusedControl=e._currentlyConnectedInputText,t){case"⇧":return e.shiftState++,e.shiftState>2&&(e.shiftState=0),void e.applyShiftState(e.shiftState);case"←":return void e._currentlyConnectedInputText.processKey(8);case"↵":return void e._currentlyConnectedInputText.processKey(13)}e._currentlyConnectedInputText.processKey(-1,e.shiftState?t.toUpperCase():t),1===e.shiftState&&(e.shiftState=0,e.applyShiftState(e.shiftState))}})),this.isVisible=!1,this._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=this;var i=t.onFocusObservable.add(function(){e._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=e,e.isVisible=!0}),r=t.onBlurObservable.add(function(){t._connectedVirtualKeyboard=null,e._currentlyConnectedInputText=null,e.isVisible=!1});this._connectedInputTexts.push({input:t,onBlurObserver:r,onFocusObserver:i})}},e.prototype.disconnect=function(t){var e=this;if(t){var i=this._connectedInputTexts.filter(function(e){return e.input===t});1===i.length&&(this._removeConnectedInputObservables(i[0]),this._connectedInputTexts=this._connectedInputTexts.filter(function(e){return e.input!==t}),this._currentlyConnectedInputText===t&&(this._currentlyConnectedInputText=null))}else this._connectedInputTexts.forEach(function(t){e._removeConnectedInputObservables(t)}),this._connectedInputTexts=[];0===this._connectedInputTexts.length&&(this._currentlyConnectedInputText=null,this.onKeyPressObservable.remove(this._onKeyPressObserver),this._onKeyPressObserver=null)},e.prototype._removeConnectedInputObservables=function(t){t.input._connectedVirtualKeyboard=null,t.input.onFocusObservable.remove(t.onFocusObserver),t.input.onBlurObservable.remove(t.onBlurObserver)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disconnect()},e.CreateDefaultLayout=function(t){var i=new e(t);return i.addKeysRow(["1","2","3","4","5","6","7","8","9","0","←"]),i.addKeysRow(["q","w","e","r","t","y","u","i","o","p"]),i.addKeysRow(["a","s","d","f","g","h","j","k","l",";","'","↵"]),i.addKeysRow(["⇧","z","x","c","v","b","n","m",",",".","/"]),i.addKeysRow([" "],[{width:"200px"}]),i},e}(C);s._TypeStore.RegisteredTypes["BABYLON.GUI.VirtualKeyboard"]=X;var Y=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._cellWidth=20,i._cellHeight=20,i._minorLineTickness=1,i._minorLineColor="DarkGray",i._majorLineTickness=2,i._majorLineColor="White",i._majorLineFrequency=5,i._background="Black",i._displayMajorLines=!0,i._displayMinorLines=!0,i}return n(e,t),Object.defineProperty(e.prototype,"displayMinorLines",{get:function(){return this._displayMinorLines},set:function(t){this._displayMinorLines!==t&&(this._displayMinorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMajorLines",{get:function(){return this._displayMajorLines},set:function(t){this._displayMajorLines!==t&&(this._displayMajorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){this._cellWidth=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},set:function(t){this._cellHeight=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorLineTickness",{get:function(){return this._minorLineTickness},set:function(t){this._minorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorLineColor",{get:function(){return this._minorLineColor},set:function(t){this._minorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineTickness",{get:function(){return this._majorLineTickness},set:function(t){this._majorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineColor",{get:function(){return this._majorLineColor},set:function(t){this._majorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorLineFrequency",{get:function(){return this._majorLineFrequency},set:function(t){this._majorLineFrequency=t,this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._draw=function(t,e){if(t.save(),this._applyStates(t),this._isEnabled){this._background&&(t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));var i=this._currentMeasure.width/this._cellWidth,r=this._currentMeasure.height/this._cellHeight,n=this._currentMeasure.left+this._currentMeasure.width/2,o=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){t.strokeStyle=this._minorLineColor,t.lineWidth=this._minorLineTickness;for(var s=-i/2;s<i/2;s++){var a=n+s*this.cellWidth;t.beginPath(),t.moveTo(a,this._currentMeasure.top),t.lineTo(a,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(var h=-r/2;h<r/2;h++){var l=o+h*this.cellHeight;t.beginPath(),t.moveTo(this._currentMeasure.left,l),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,l),t.stroke()}}if(this._displayMajorLines){t.strokeStyle=this._majorLineColor,t.lineWidth=this._majorLineTickness;for(s=-i/2+this._majorLineFrequency;s<i/2;s+=this._majorLineFrequency){a=n+s*this.cellWidth;t.beginPath(),t.moveTo(a,this._currentMeasure.top),t.lineTo(a,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(h=-r/2+this._majorLineFrequency;h<r/2;h+=this._majorLineFrequency){l=o+h*this.cellHeight;t.moveTo(this._currentMeasure.left,l),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,l),t.closePath(),t.stroke()}}}t.restore()},e.prototype._getTypeName=function(){return"DisplayGrid"},e}(p);s._TypeStore.RegisteredTypes["BABYLON.GUI.DisplayGrid"]=Y;var U=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._tempMeasure=new _(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,"displayThumb",{get:function(){return this._displayThumb&&null!=this.thumbImage},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundImage",{get:function(){return this._backgroundImage},set:function(t){var e=this;this._backgroundImage!==t&&(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueBarImage",{get:function(){return this._valueBarImage},set:function(t){var e=this;this._valueBarImage!==t&&(this._valueBarImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbImage",{get:function(){return this._thumbImage},set:function(t){var e=this;this._thumbImage!==t&&(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"ImageBasedSlider"},e.prototype._draw=function(t,e){t.save(),this._applyStates(t),this._prepareRenderingData("rectangle");var i=this._getThumbPosition(),r=this._renderLeft,n=this._renderTop,o=this._renderWidth,s=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(r,n,o,s),this.isThumbClamped&&this.displayThumb&&(this.isVertical?this._tempMeasure.height+=this._effectiveThumbThickness:this._tempMeasure.width+=this._effectiveThumbThickness),this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure),this._backgroundImage._draw(t)),this._valueBarImage&&(this.isVertical?this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(r,n+i,o,s-i+this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(r,n+i,o,s-i):this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(r,n,i+this._effectiveThumbThickness/2,s):this._tempMeasure.copyFromFloats(r,n,i,s),this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure),this._valueBarImage._draw(t)),this.displayThumb&&(this.isVertical?this._tempMeasure.copyFromFloats(r-this._effectiveBarOffset,this._currentMeasure.top+i,this._currentMeasure.width,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+i,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},e}(L);s._TypeStore.RegisteredTypes["BABYLON.GUI.ImageBasedSlider"]=U;p.AddHeader=function(t,e,i,r){var n=new C("panel"),o=!r||r.isHorizontal,s=!r||r.controlFirst;n.isVertical=!o;var a=new y("header");return a.text=e,a.textHorizontalAlignment=p.HORIZONTAL_ALIGNMENT_LEFT,o?a.width=i:a.height=i,s?(n.addControl(t),n.addControl(a),a.paddingLeft="5px"):(n.addControl(a),n.addControl(t),a.paddingRight="5px"),a.shadowBlur=t.shadowBlur,a.shadowColor=t.shadowColor,a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,n};var q=function(){function t(t){this._fontFamily="Arial",this._fontStyle="",this._fontWeight="",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this.onChangedObservable=new s.Observable,this._host=t}return Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&this.onChangedObservable.notifyObservers(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.onChangedObservable.clear()},t}(),K=function(t){function e(e,i,r,n,o,a){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=s.Texture.NEAREST_SAMPLINGMODE);var h=t.call(this,e,{width:i,height:r},n,o,a,s.Constants.TEXTUREFORMAT_RGBA)||this;return h._isDirty=!1,h._rootContainer=new g("root"),h._lastControlOver={},h._lastControlDown={},h._capturingControl={},h._linkedControls=new Array,h._isFullscreen=!1,h._fullscreenViewport=new s.Viewport(0,0,1,1),h._idealWidth=0,h._idealHeight=0,h._useSmallestIdeal=!1,h._renderAtIdealSize=!1,h._blockNextFocusCheck=!1,h._renderScale=1,h._cursorChanged=!1,h._defaultMousePointerId=0,h._numLayoutCalls=0,h._numRenderCalls=0,h._clipboardData="",h.onClipboardObservable=new s.Observable,h.onControlPickedObservable=new s.Observable,h.onBeginLayoutObservable=new s.Observable,h.onEndLayoutObservable=new s.Observable,h.onBeginRenderObservable=new s.Observable,h.onEndRenderObservable=new s.Observable,h.premulAlpha=!1,h._useInvalidateRectOptimization=!0,h._invalidatedRectangle=null,h._clearMeasure=new _(0,0,0,0),h.onClipboardCopy=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.COPY,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},h.onClipboardCut=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.CUT,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},h.onClipboardPaste=function(t){var e=t,i=new s.ClipboardInfo(s.ClipboardEventTypes.PASTE,e);h.onClipboardObservable.notifyObservers(i),e.preventDefault()},(n=h.getScene())&&h._texture?(h._rootElement=n.getEngine().getInputElement(),h._renderObserver=n.onBeforeCameraRenderObservable.add(function(t){return h._checkUpdate(t)}),h._preKeyboardObserver=n.onPreKeyboardObservable.add(function(t){h._focusedControl&&(t.type===s.KeyboardEventTypes.KEYDOWN&&h._focusedControl.processKeyboard(t.event),t.skipOnPointerObservable=!0)}),h._rootContainer._link(h),h.hasAlpha=!0,i&&r||(h._resizeObserver=n.getEngine().onResizeObservable.add(function(){return h._onResize()}),h._onResize()),h._texture.isReady=!0,h):h}return n(e,t),Object.defineProperty(e.prototype,"numLayoutCalls",{get:function(){return this._numLayoutCalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numRenderCalls",{get:function(){return this._numRenderCalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderScale",{get:function(){return this._renderScale},set:function(t){t!==this._renderScale&&(this._renderScale=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this.markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealWidth",{get:function(){return this._idealWidth},set:function(t){this._idealWidth!==t&&(this._idealWidth=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealHeight",{get:function(){return this._idealHeight},set:function(t){this._idealHeight!==t&&(this._idealHeight=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useSmallestIdeal",{get:function(){return this._useSmallestIdeal},set:function(t){this._useSmallestIdeal!==t&&(this._useSmallestIdeal=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderAtIdealSize",{get:function(){return this._renderAtIdealSize},set:function(t){this._renderAtIdealSize!==t&&(this._renderAtIdealSize=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idealRatio",{get:function(){var t=0,e=0;return this._idealWidth&&(t=this.getSize().width/this._idealWidth),this._idealHeight&&(e=this.getSize().height/this._idealHeight),this._useSmallestIdeal&&this._idealWidth&&this._idealHeight?window.innerWidth<window.innerHeight?t:e:this._idealWidth?t:this._idealHeight?e:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layerToDispose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),e.prototype.getChildren=function(){return[this._rootContainer]},e.prototype.getDescendants=function(t,e){return this._rootContainer.getDescendants(t,e)},Object.defineProperty(e.prototype,"focusedControl",{get:function(){return this._focusedControl},set:function(t){this._focusedControl!=t&&(this._focusedControl&&this._focusedControl.onBlur(),t&&t.onFocus(),this._focusedControl=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isForeground",{get:function(){return!this.layer||!this.layer.isBackground},set:function(t){this.layer&&this.layer.isBackground!==!t&&(this.layer.isBackground=!t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipboardData",{get:function(){return this._clipboardData},set:function(t){this._clipboardData=t},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"AdvancedDynamicTexture"},e.prototype.executeOnAllControls=function(t,e){e||(e=this._rootContainer),t(e);for(var i=0,r=e.children;i<r.length;i++){var n=r[i];n.children?this.executeOnAllControls(t,n):t(n)}},Object.defineProperty(e.prototype,"useInvalidateRectOptimization",{get:function(){return this._useInvalidateRectOptimization},set:function(t){this._useInvalidateRectOptimization=t},enumerable:!0,configurable:!0}),e.prototype.invalidateRect=function(t,e,i,r){if(this._useInvalidateRectOptimization)if(this._invalidatedRectangle){var n=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,i)),o=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,r));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,t)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,e)),this._invalidatedRectangle.width=n-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=o-this._invalidatedRectangle.top+1}else this._invalidatedRectangle=new _(t,e,i-t+1,r-e+1)},e.prototype.markAsDirty=function(){this._isDirty=!0},e.prototype.createStyle=function(){return new q(this)},e.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},e.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},e.prototype.dispose=function(){var e=this.getScene();e&&(this._rootElement=null,e.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&e.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&e.onPrePointerObservable.remove(this._pointerMoveObserver),this._pointerObserver&&e.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&e.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&e.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),t.prototype.dispose.call(this))},e.prototype._onResize=function(){var t=this.getScene();if(t){var e=t.getEngine(),i=this.getSize(),r=e.getRenderWidth()*this._renderScale,n=e.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(n=n*this._idealWidth/r,r=this._idealWidth):this._idealHeight&&(r=r*this._idealHeight/n,n=this._idealHeight)),i.width===r&&i.height===n||(this.scaleTo(r,n),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,i.width-1,i.height-1)}},e.prototype._getGlobalViewport=function(t){var e=t.getEngine();return this._fullscreenViewport.toGlobal(e.getRenderWidth(),e.getRenderHeight())},e.prototype.getProjectedPosition=function(t,e){var i=this.getScene();if(!i)return s.Vector2.Zero();var r=this._getGlobalViewport(i),n=s.Vector3.Project(t,e,i.getTransformMatrix(),r);return n.scaleInPlace(this.renderScale),new s.Vector2(n.x,n.y)},e.prototype._checkUpdate=function(t){if(!this._layerToDispose||0!=(t.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){var e=this.getScene();if(!e)return;for(var i=this._getGlobalViewport(e),r=0,n=this._linkedControls;r<n.length;r++){var o=n[r];if(o.isVisible){var a=o._linkedMesh;if(a&&!a.isDisposed()){var h=a.getBoundingInfo?a.getBoundingInfo().boundingSphere.center:s.Vector3.ZeroReadOnly,l=s.Vector3.Project(h,a.getWorldMatrix(),e.getTransformMatrix(),i);l.z<0||l.z>1?o.notRenderable=!0:(o.notRenderable=!1,l.scaleInPlace(this.renderScale),o._moveToProjectedPosition(l))}else s.Tools.SetImmediate(function(){o.linkWithMesh(null)})}}}(this._isDirty||this._rootContainer.isDirty)&&(this._isDirty=!1,this._render(),this.update(!0,this.premulAlpha))}},e.prototype._render=function(){var t=this.getSize(),e=t.width,i=t.height,r=this.getContext();r.font="18px Arial",r.strokeStyle="white",this.onBeginLayoutObservable.notifyObservers(this);var n=new _(0,0,e,i);this._numLayoutCalls=0,this._rootContainer._layout(n,r),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,e,i),r.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(r.save(),r.fillStyle=this._background,r.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),r.restore()),this.onBeginRenderObservable.notifyObservers(this),this._numRenderCalls=0,this._rootContainer._render(r,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null},e.prototype._changeCursor=function(t){this._rootElement&&(this._rootElement.style.cursor=t,this._cursorChanged=!0)},e.prototype._registerLastControlDown=function(t,e){this._lastControlDown[e]=t,this.onControlPickedObservable.notifyObservers(t)},e.prototype._doPicking=function(t,e,i,r,n,o,a){var h=this.getScene();if(h){var l=h.getEngine(),u=this.getSize();if(this._isFullscreen){var c=(h.cameraToUseForPointers||h.activeCamera).viewport;t*=u.width/(l.getRenderWidth()*c.width),e*=u.height/(l.getRenderHeight()*c.height)}this._capturingControl[r]?this._capturingControl[r]._processObservables(i,t,e,r,n):(this._cursorChanged=!1,this._rootContainer._processPicking(t,e,i,r,n,o,a)||(this._changeCursor(""),i===s.PointerEventTypes.POINTERMOVE&&this._lastControlOver[r]&&(this._lastControlOver[r]._onPointerOut(this._lastControlOver[r]),delete this._lastControlOver[r])),this._cursorChanged||this._changeCursor(""),this._manageFocus())}},e.prototype._cleanControlAfterRemovalFromList=function(t,e){for(var i in t){if(t.hasOwnProperty(i))t[i]===e&&delete t[i]}},e.prototype._cleanControlAfterRemoval=function(t){this._cleanControlAfterRemovalFromList(this._lastControlDown,t),this._cleanControlAfterRemovalFromList(this._lastControlOver,t)},e.prototype.attach=function(){var t=this,e=this.getScene();if(e){var i=new s.Viewport(0,0,0,0);this._pointerMoveObserver=e.onPrePointerObservable.add(function(r,n){if(!e.isPointerCaptured(r.event.pointerId)&&(r.type===s.PointerEventTypes.POINTERMOVE||r.type===s.PointerEventTypes.POINTERUP||r.type===s.PointerEventTypes.POINTERDOWN||r.type===s.PointerEventTypes.POINTERWHEEL)&&e){r.type===s.PointerEventTypes.POINTERMOVE&&r.event.pointerId&&(t._defaultMousePointerId=r.event.pointerId);var o=e.cameraToUseForPointers||e.activeCamera,a=e.getEngine();o?o.viewport.toGlobalToRef(a.getRenderWidth(),a.getRenderHeight(),i):(i.x=0,i.y=0,i.width=a.getRenderWidth(),i.height=a.getRenderHeight());var h=e.pointerX/a.getHardwareScalingLevel()-i.x,l=e.pointerY/a.getHardwareScalingLevel()-(a.getRenderHeight()-i.y-i.height);t._shouldBlockPointer=!1;var u=r.event.pointerId||t._defaultMousePointerId;t._doPicking(h,l,r.type,u,r.event.button,r.event.deltaX,r.event.deltaY),t._shouldBlockPointer&&(r.skipOnPointerObservable=t._shouldBlockPointer)}}),this._attachToOnPointerOut(e)}},e.prototype.registerClipboardEvents=function(){self.addEventListener("copy",this.onClipboardCopy,!1),self.addEventListener("cut",this.onClipboardCut,!1),self.addEventListener("paste",this.onClipboardPaste,!1)},e.prototype.unRegisterClipboardEvents=function(){self.removeEventListener("copy",this.onClipboardCopy),self.removeEventListener("cut",this.onClipboardCut),self.removeEventListener("paste",this.onClipboardPaste)},e.prototype.attachToMesh=function(t,e){var i=this;void 0===e&&(e=!0);var r=this.getScene();r&&(this._pointerObserver=r.onPointerObservable.add(function(e,r){if(e.type===s.PointerEventTypes.POINTERMOVE||e.type===s.PointerEventTypes.POINTERUP||e.type===s.PointerEventTypes.POINTERDOWN){var n=e.event.pointerId||i._defaultMousePointerId;if(e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh===t){var o=e.pickInfo.getTextureCoordinates();if(o){var a=i.getSize();i._doPicking(o.x*a.width,(1-o.y)*a.height,e.type,n,e.event.button)}}else if(e.type===s.PointerEventTypes.POINTERUP){if(i._lastControlDown[n]&&i._lastControlDown[n]._forcePointerUp(n),delete i._lastControlDown[n],i.focusedControl){var h=i.focusedControl.keepsFocusWith(),l=!0;if(h)for(var u=0,c=h;u<c.length;u++){var _=c[u];if(i!==_._host){var d=_._host;if(d._lastControlOver[n]&&d._lastControlOver[n].isAscendant(_)){l=!1;break}}}l&&(i.focusedControl=null)}}else e.type===s.PointerEventTypes.POINTERMOVE&&(i._lastControlOver[n]&&i._lastControlOver[n]._onPointerOut(i._lastControlOver[n],!0),delete i._lastControlOver[n])}}),t.enablePointerMoveEvents=e,this._attachToOnPointerOut(r))},e.prototype.moveFocusToControl=function(t){this.focusedControl=t,this._lastPickedControl=t,this._blockNextFocusCheck=!0},e.prototype._manageFocus=function(){if(this._blockNextFocusCheck)return this._blockNextFocusCheck=!1,void(this._lastPickedControl=this._focusedControl);if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}},e.prototype._attachToOnPointerOut=function(t){var e=this;this._canvasPointerOutObserver=t.getEngine().onCanvasPointerOutObservable.add(function(t){e._lastControlOver[t.pointerId]&&e._lastControlOver[t.pointerId]._onPointerOut(e._lastControlOver[t.pointerId]),delete e._lastControlOver[t.pointerId],e._lastControlDown[t.pointerId]&&e._lastControlDown[t.pointerId]!==e._capturingControl[t.pointerId]&&(e._lastControlDown[t.pointerId]._forcePointerUp(),delete e._lastControlDown[t.pointerId])})},e.CreateForMesh=function(t,i,r,n,o){void 0===i&&(i=1024),void 0===r&&(r=1024),void 0===n&&(n=!0),void 0===o&&(o=!1);var a=new e(t.name+" AdvancedDynamicTexture",i,r,t.getScene(),!0,s.Texture.TRILINEAR_SAMPLINGMODE),h=new s.StandardMaterial("AdvancedDynamicTextureMaterial",t.getScene());return h.backFaceCulling=!1,h.diffuseColor=s.Color3.Black(),h.specularColor=s.Color3.Black(),o?(h.diffuseTexture=a,h.emissiveTexture=a,a.hasAlpha=!0):(h.emissiveTexture=a,h.opacityTexture=a),t.material=h,a.attachToMesh(t,n),a},e.CreateFullscreenUI=function(t,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===n&&(n=s.Texture.BILINEAR_SAMPLINGMODE);var o=new e(t,0,0,r,!1,n),a=new s.Layer(t+"_layer",null,r,!i);return a.texture=o,o._layerToDispose=a,o._isFullscreen=!0,o.attach(),o},e}(s.DynamicTexture),Z=function(){function t(t){this.texture=t,this._captureRenderTime=!1,this._renderTime=new s.PerfCounter,this._captureLayoutTime=!1,this._layoutTime=new s.PerfCounter,this._onBeginRenderObserver=null,this._onEndRenderObserver=null,this._onBeginLayoutObserver=null,this._onEndLayoutObserver=null}return Object.defineProperty(t.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutTimeCounter",{get:function(){return this._layoutTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(t){var e=this;t!==this._captureRenderTime&&(this._captureRenderTime=t,t?(this._onBeginRenderObserver=this.texture.onBeginRenderObservable.add(function(){e._renderTime.beginMonitoring()}),this._onEndRenderObserver=this.texture.onEndRenderObservable.add(function(){e._renderTime.endMonitoring(!0)})):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"captureLayoutTime",{get:function(){return this._captureLayoutTime},set:function(t){var e=this;t!==this._captureLayoutTime&&(this._captureLayoutTime=t,t?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add(function(){e._layoutTime.beginMonitoring()}),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add(function(){e._layoutTime.endMonitoring(!0)})):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null,this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null,this.texture=null},t}(),J=function(){function t(t){void 0===t&&(t=null),this._nodes={},this._nodeTypes={element:1,attribute:2,text:3},this._isLoaded=!1,this._objectAttributes={textHorizontalAlignment:1,textVerticalAlignment:2,horizontalAlignment:3,verticalAlignment:4,stretch:5},t&&(this._parentClass=t)}return t.prototype._getChainElement=function(t){var e=window;this._parentClass&&(e=this._parentClass);var i=t;i=i.split(".");for(var r=0;r<i.length;r++)e=e[i[r]];return e},t.prototype._getClassAttribute=function(t){var e=t.split(".");return s._TypeStore.GetClass("BABYLON.GUI."+e[0])[e[1]]},t.prototype._createGuiElement=function(t,e,i){void 0===i&&(i=!0);try{var r=new(s._TypeStore.GetClass("BABYLON.GUI."+t.nodeName));e&&i&&e.addControl(r);for(var n=0;n<t.attributes.length;n++)if(!t.attributes[n].name.toLowerCase().includes("datasource"))if(t.attributes[n].name.toLowerCase().includes("observable")){var o=this._getChainElement(t.attributes[n].value);r[t.attributes[n].name].add(o)}else if("linkWithMesh"==t.attributes[n].name)this._parentClass?r.linkWithMesh(this._parentClass[t.attributes[n].value]):r.linkWithMesh(window[t.attributes[n].value]);else if(t.attributes[n].value.startsWith("{{")&&t.attributes[n].value.endsWith("}}")){o=this._getChainElement(t.attributes[n].value.substring(2,t.attributes[n].value.length-2));r[t.attributes[n].name]=o}else this._objectAttributes[t.attributes[n].name]?r[t.attributes[n].name]=this._getClassAttribute(t.attributes[n].value):"true"==t.attributes[n].value||"false"==t.attributes[n].value?r[t.attributes[n].name]="true"==t.attributes[n].value:r[t.attributes[n].name]=isNaN(Number(t.attributes[n].value))?t.attributes[n].value:Number(t.attributes[n].value);if(!t.attributes.getNamedItem("id"))return this._nodes[t.nodeName+Object.keys(this._nodes).length+"_gen"]=r,r;var a=t.attributes.getNamedItem("id").value;if(a.startsWith("{{")&&a.endsWith("}}")&&(a=this._getChainElement(a.substring(2,a.length-2))),this._nodes[a])throw"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute";return this._nodes[a]=r,r}catch(e){throw"XmlLoader Exception : Error parsing Control "+t.nodeName+","+e+"."}},t.prototype._parseGrid=function(t,e,i){for(var r,n,o,s,a,h=t.children,l=!1,u=-1,c=-1,_=0,d=0;d<h.length;d++)if(h[d].nodeType==this._nodeTypes.element){if("Row"!=h[d].nodeName)throw"XmlLoader Exception : Expecting Row node, received "+h[d].nodeName;if(u+=1,o=h[d].children,!h[d].attributes.getNamedItem("height"))throw"XmlLoader Exception : Height must be defined for grid rows";n=Number(h[d].attributes.getNamedItem("height").nodeValue),l=!!h[d].attributes.getNamedItem("isPixel")&&JSON.parse(h[d].attributes.getNamedItem("isPixel").nodeValue),e.addRowDefinition(n,l);for(var f=0;f<o.length;f++)if(o[f].nodeType==this._nodeTypes.element){if("Column"!=o[f].nodeName)throw"XmlLoader Exception : Expecting Column node, received "+o[f].nodeName;if(c+=1,u>0&&c>_)throw"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.";if(0==u){if(!o[f].attributes.getNamedItem("width"))throw"XmlLoader Exception : Width must be defined for all the grid columns in the first row";r=Number(o[f].attributes.getNamedItem("width").nodeValue),l=!!o[f].attributes.getNamedItem("isPixel")&&JSON.parse(o[f].attributes.getNamedItem("isPixel").nodeValue),e.addColumnDefinition(r,l)}s=o[f].children;for(var p=0;p<s.length;p++)s[p].nodeType==this._nodeTypes.element&&(a=this._createGuiElement(s[p],e,!1),e.addControl(a,u,c),s[p].firstChild&&this._parseXml(s[p].firstChild,a))}0==u&&(_=c),c=-1}t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._parseElement=function(t,e,i){t.firstChild&&this._parseXml(t.firstChild,e),t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._prepareSourceElement=function(t,e,i,r,n){this._parentClass?this._parentClass[i]=r[n]:window[i]=r[n],t.firstChild&&this._parseXml(t.firstChild,e,!0)},t.prototype._parseElementsFromSource=function(t,e,i){var r=t.attributes.getNamedItem("dataSource").value;if(!r.includes(" in "))throw"XmlLoader Exception : Malformed XML, Data Source must include an in";var n=!0,o=r.split(" in ");if(o.length<2)throw"XmlLoader Exception : Malformed XML, Data Source must an iterator and a source";var s=o[1];if(s.startsWith("{")&&s.endsWith("}")&&(n=!1),(!n||s.startsWith("[")&&s.endsWith("]"))&&(s=s.substring(1,s.length-1)),s=this._parentClass?this._parentClass[s]:window[s],n)for(var a=0;a<s.length;a++)this._prepareSourceElement(t,e,o[0],s,a);else for(var a in s)this._prepareSourceElement(t,e,o[0],s,a);t.nextSibling&&this._parseXml(t.nextSibling,i)},t.prototype._parseXml=function(t,e,i){if(void 0===i&&(i=!1),t.nodeType==this._nodeTypes.element){i&&t.setAttribute("id",e.id+(e._children.length+1));var r=this._createGuiElement(t,e);"Grid"==t.nodeName?this._parseGrid(t,r,e):t.attributes.getNamedItem("dataSource")?this._parseElementsFromSource(t,r,e):this._parseElement(t,r,e)}else t.nextSibling&&this._parseXml(t.nextSibling,e,i)},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.getNodeById=function(t){return this._nodes[t]},t.prototype.getNodes=function(){return this._nodes},t.prototype.loadLayout=function(t,e,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){if(!r.responseXML)throw"XmlLoader Exception : XML file is malformed or corrupted.";var t=r.responseXML.documentElement;this._parseXml(t.firstChild,e),this._isLoaded=!0,i&&i()}}.bind(this),r.open("GET",t,!0),r.send()},t}(),Q=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y,e.z)||this;return r.buttonIndex=i,r}return n(e,t),e}(s.Vector3),$=function(){function t(t){this.name=t,this._downCount=0,this._enterCount=-1,this._downPointerIds={},this._isVisible=!0,this.onPointerMoveObservable=new s.Observable,this.onPointerOutObservable=new s.Observable,this.onPointerDownObservable=new s.Observable,this.onPointerUpObservable=new s.Observable,this.onPointerClickObservable=new s.Observable,this.onPointerEnterObservable=new s.Observable,this._behaviors=new Array}return Object.defineProperty(t.prototype,"position",{get:function(){return this._node?this._node.position:s.Vector3.Zero()},set:function(t){this._node&&(this._node.position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaling",{get:function(){return this._node?this._node.scaling:new s.Vector3(1,1,1)},set:function(t){this._node&&(this._node.scaling=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),t.prototype.addBehavior=function(t){var e=this;if(-1!==this._behaviors.indexOf(t))return this;t.init();var i=this._host.scene;return i.isLoading?i.onDataLoadedObservable.addOnce(function(){t.attach(e)}):t.attach(this),this._behaviors.push(t),this},t.prototype.removeBehavior=function(t){var e=this._behaviors.indexOf(t);return-1===e?this:(this._behaviors[e].detach(),this._behaviors.splice(e,1),this)},t.prototype.getBehaviorByName=function(t){for(var e=0,i=this._behaviors;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){if(this._isVisible!==t){this._isVisible=t;var e=this.mesh;e&&e.setEnabled(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeName",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},t.prototype._getTypeName=function(){return"Control3D"},Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mesh",{get:function(){return this._node instanceof s.AbstractMesh?this._node:null},enumerable:!0,configurable:!0}),t.prototype.linkToTransformNode=function(t){return this._node&&(this._node.parent=t),this},t.prototype._prepareNode=function(t){if(!this._node){if(this._node=this._createNode(t),!this.node)return;this._node.metadata=this,this._node.position=this.position,this._node.scaling=this.scaling;var e=this.mesh;e&&(e.isPickable=!0,this._affectMaterial(e))}},t.prototype._createNode=function(t){return null},t.prototype._affectMaterial=function(t){t.material=null},t.prototype._onPointerMove=function(t,e){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)},t.prototype._onPointerEnter=function(t){return!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this),this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},t.prototype._onPointerOut=function(t){this._enterCount=0,this.onPointerOutObservable.notifyObservers(this,-1,t,this),this.pointerOutAnimation&&this.pointerOutAnimation()},t.prototype._onPointerDown=function(t,e,i,r){return 0!==this._downCount?(this._downCount++,!1):(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new Q(e,r),-1,t,this),this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){this._downCount--,delete this._downPointerIds[i],this._downCount<0?this._downCount=0:0==this._downCount&&(n&&(this._enterCount>0||-1===this._enterCount)&&this.onPointerClickObservable.notifyObservers(new Q(e,r),-1,t,this),this.onPointerUpObservable.notifyObservers(new Q(e,r),-1,t,this),this.pointerUpAnimation&&this.pointerUpAnimation())},t.prototype.forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,s.Vector3.Zero(),t,0,!0);else{for(var e in this._downPointerIds)this._onPointerUp(this,s.Vector3.Zero(),+e,0,!0);this._downCount>0&&(this._downCount=1,this._onPointerUp(this,s.Vector3.Zero(),0,0,!0))}},t.prototype._processObservables=function(t,e,i,r){if(t===s.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,e);var n=this._host._lastControlOver[i];return n&&n!==this&&n._onPointerOut(this),n!==this&&this._onPointerEnter(this),this._host._lastControlOver[i]=this,!0}return t===s.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,e,i,r),this._host._lastControlDown[i]=this,this._host._lastPickedControl=this,!0):t===s.PointerEventTypes.POINTERUP&&(this._host._lastControlDown[i]&&this._host._lastControlDown[i]._onPointerUp(this,e,i,r,!0),delete this._host._lastControlDown[i],!0)},t.prototype._disposeNode=function(){this._node&&(this._node.dispose(),this._node=null)},t.prototype.dispose=function(){this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._disposeNode();for(var t=0,e=this._behaviors;t<e.length;t++){e[t].detach()}},t}(),tt=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._getTypeName=function(){return"AbstractButton3D"},e.prototype._createNode=function(t){return new s.TransformNode("button"+this.name)},e}($),et=function(t){function e(e){var i=t.call(this,e)||this;return i._contentResolution=512,i._contentScaleRatio=2,i.pointerEnterAnimation=function(){i.mesh&&(i._currentMaterial.emissiveColor=s.Color3.Red())},i.pointerOutAnimation=function(){i._currentMaterial.emissiveColor=s.Color3.Black()},i.pointerDownAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(.95)},i.pointerUpAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(1/.95)},i}return n(e,t),Object.defineProperty(e.prototype,"contentResolution",{get:function(){return this._contentResolution},set:function(t){this._contentResolution!==t&&(this._contentResolution=t,this._resetContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentScaleRatio",{get:function(){return this._contentScaleRatio},set:function(t){this._contentScaleRatio!==t&&(this._contentScaleRatio=t,this._resetContent())},enumerable:!0,configurable:!0}),e.prototype._disposeFacadeTexture=function(){this._facadeTexture&&(this._facadeTexture.dispose(),this._facadeTexture=null)},e.prototype._resetContent=function(){this._disposeFacadeTexture(),this.content=this._content},Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t,this._host&&this._host.utilityLayer&&(this._facadeTexture?this._facadeTexture.rootContainer.clearControls():(this._facadeTexture=new K("Facade",this._contentResolution,this._contentResolution,this._host.utilityLayer.utilityLayerScene,!0,s.Texture.TRILINEAR_SAMPLINGMODE),this._facadeTexture.rootContainer.scaleX=this._contentScaleRatio,this._facadeTexture.rootContainer.scaleY=this._contentScaleRatio,this._facadeTexture.premulAlpha=!0),this._facadeTexture.addControl(t),this._applyFacade(this._facadeTexture))},enumerable:!0,configurable:!0}),e.prototype._applyFacade=function(t){this._currentMaterial.emissiveTexture=t},e.prototype._getTypeName=function(){return"Button3D"},e.prototype._createNode=function(t){for(var e=new Array(6),i=0;i<6;i++)e[i]=new s.Vector4(0,0,0,0);return e[1]=new s.Vector4(0,0,1,1),s.BoxBuilder.CreateBox(this.name+"_rootMesh",{width:1,height:1,depth:.08,faceUV:e},t)},e.prototype._affectMaterial=function(t){var e=new s.StandardMaterial(this.name+"Material",t.getScene());e.specularColor=s.Color3.Black(),t.material=e,this._currentMaterial=e,this._resetContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeFacadeTexture(),this._currentMaterial&&this._currentMaterial.dispose()},e}(tt),it=function(t){function e(e){var i=t.call(this,e)||this;return i._blockLayout=!1,i._children=new Array,i}return n(e,t),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockLayout",{get:function(){return this._blockLayout},set:function(t){this._blockLayout!==t&&(this._blockLayout=t,this._blockLayout||this._arrangeChildren())},enumerable:!0,configurable:!0}),e.prototype.updateLayout=function(){return this._arrangeChildren(),this},e.prototype.containsControl=function(t){return-1!==this._children.indexOf(t)},e.prototype.addControl=function(t){return-1!==this._children.indexOf(t)?this:(t.parent=this,t._host=this._host,this._children.push(t),this._host.utilityLayer&&(t._prepareNode(this._host.utilityLayer.utilityLayerScene),t.node&&(t.node.parent=this.node),this.blockLayout||this._arrangeChildren()),this)},e.prototype._arrangeChildren=function(){},e.prototype._createNode=function(t){return new s.TransformNode("ContainerNode",t)},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null,t._disposeNode()),this},e.prototype._getTypeName=function(){return"Container3D"},e.prototype.dispose=function(){for(var e=0,i=this._children;e<i.length;e++){i[e].dispose()}this._children=[],t.prototype.dispose.call(this)},e.UNSET_ORIENTATION=0,e.FACEORIGIN_ORIENTATION=1,e.FACEORIGINREVERSED_ORIENTATION=2,e.FACEFORWARD_ORIENTATION=3,e.FACEFORWARDREVERSED_ORIENTATION=4,e}($),rt=function(t){function e(){var e=t.call(this)||this;return e._columns=10,e._rows=0,e._rowThenColum=!0,e._orientation=it.FACEORIGIN_ORIENTATION,e.margin=0,e}return n(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){var e=this;this._orientation!==t&&(this._orientation=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},set:function(t){var e=this;this._columns!==t&&(this._columns=t,this._rowThenColum=!0,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},set:function(t){var e=this;this._rows!==t&&(this._rows=t,this._rowThenColum=!1,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){this._cellWidth=0,this._cellHeight=0;for(var t=0,e=0,i=0,r=s.Matrix.Invert(this.node.computeWorldMatrix(!0)),n=0,o=this._children;n<o.length;n++){if((m=o[n]).mesh){i++,m.mesh.computeWorldMatrix(!0);var a=m.mesh.getHierarchyBoundingVectors(),h=s.TmpVectors.Vector3[0],l=s.TmpVectors.Vector3[1];a.max.subtractToRef(a.min,l),l.scaleInPlace(.5),s.Vector3.TransformNormalToRef(l,r,h),this._cellWidth=Math.max(this._cellWidth,2*h.x),this._cellHeight=Math.max(this._cellHeight,2*h.y)}}this._cellWidth+=2*this.margin,this._cellHeight+=2*this.margin,this._rowThenColum?(e=this._columns,t=Math.ceil(i/this._columns)):(t=this._rows,e=Math.ceil(i/this._rows));var u=.5*e*this._cellWidth,c=.5*t*this._cellHeight,_=[],d=0;if(this._rowThenColum)for(var f=0;f<t;f++)for(var p=0;p<e&&(_.push(new s.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));p++);else for(p=0;p<e;p++)for(f=0;f<t&&(_.push(new s.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));f++);d=0;for(var g=0,b=this._children;g<b.length;g++){var m;(m=b[g]).mesh&&(this._mapGridNode(m,_[d]),d++)}this._finalProcessing()},e.prototype._finalProcessing=function(){},e}(it),nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._cylindricalMapping(e);switch(t.position=r,this.orientation){case it.FACEORIGIN_ORIENTATION:i.lookAt(new s.Vector3(2*r.x,r.y,2*r.z));break;case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(-r.x,r.y,-r.z));break;case it.FACEFORWARD_ORIENTATION:break;case it.FACEFORWARDREVERSED_ORIENTATION:i.rotate(s.Axis.Y,Math.PI,s.Space.LOCAL)}}},e.prototype._cylindricalMapping=function(t){var e=new s.Vector3(0,t.y,this._radius),i=t.x/this._radius;return s.Matrix.RotationYawPitchRollToRef(i,0,0,s.TmpVectors.Matrix[0]),s.Vector3.TransformNormal(e,s.TmpVectors.Matrix[0])},e}(rt),ot="precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 world;\nuniform mat4 viewProjection;\nvarying vec2 vUV;\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float borderWidth;\nuniform vec3 scaleFactor;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\n#endif\nvoid main(void) {\nvUV=uv;\n#ifdef BORDER\nvec3 scale=scaleFactor;\nfloat minScale=min(min(scale.x,scale.y),scale.z);\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\nfloat areaYZ=scale.y*scale.z;\nfloat areaXZ=scale.x*scale.z;\nfloat areaXY=scale.x*scale.y;\nfloat scaledBorderWidth=borderWidth;\nif (abs(normal.x) == 1.0)\n{\nscale.x=scale.y;\nscale.y=scale.z;\nif (areaYZ>areaXZ && areaYZ>areaXY)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse if (abs(normal.y) == 1.0)\n{\nscale.x=scale.z;\nif (areaXZ>areaXY && areaXZ>areaYZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse\n{\nif (areaXY>areaYZ && areaXY>areaXZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\nif (scale.x>scale.y)\n{\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\nscaleInfo.y=1.0-scaledBorderWidth;\n}\nelse\n{\nscaleInfo.x=1.0-scaledBorderWidth;\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\n}\n#endif\nvec4 worldPos=world*vec4(position,1.0);\n#ifdef HOVERLIGHT\nworldPosition=worldPos.xyz;\n#endif\ngl_Position=viewProjection*worldPos;\n}\n";s.Effect.ShadersStore.fluentVertexShader=ot;var st="precision highp float;\nvarying vec2 vUV;\nuniform vec4 albedoColor;\n#ifdef INNERGLOW\nuniform vec4 innerGlowColor;\n#endif\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float edgeSmoothingValue;\nuniform float borderMinValue;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\nuniform vec3 hoverPosition;\nuniform vec4 hoverColor;\nuniform float hoverRadius;\n#endif\n#ifdef TEXTURE\nuniform sampler2D albedoSampler;\n#endif\nvoid main(void) {\nvec3 albedo=albedoColor.rgb;\nfloat alpha=albedoColor.a;\n#ifdef TEXTURE\nalbedo=texture2D(albedoSampler,vUV).rgb;\n#endif\n#ifdef HOVERLIGHT\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\n#else\nfloat pointToHover=1.0;\n#endif\n#ifdef BORDER\nfloat borderPower=10.0;\nfloat inverseBorderPower=1.0/borderPower;\nvec3 borderColor=albedo*borderPower;\nvec2 distanceToEdge;\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover);\nalbedo+=borderColor;\nalpha=max(alpha,borderValue);\n#endif\n#ifdef INNERGLOW\n\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\nuvGlow=uvGlow*uvGlow;\nuvGlow=uvGlow*uvGlow;\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y);\n#endif\ngl_FragColor=vec4(albedo,alpha);\n}";s.Effect.ShadersStore.fluentPixelShader=st;var at=function(t){function e(){var e=t.call(this)||this;return e.INNERGLOW=!1,e.BORDER=!1,e.HOVERLIGHT=!1,e.TEXTURE=!1,e.rebuild(),e}return n(e,t),e}(s.MaterialDefines),ht=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.innerGlowColorIntensity=.5,r.innerGlowColor=new s.Color3(1,1,1),r.alpha=1,r.albedoColor=new s.Color3(.3,.35,.4),r.renderBorders=!1,r.borderWidth=.5,r.edgeSmoothingValue=.02,r.borderMinValue=.1,r.renderHoverLight=!1,r.hoverRadius=1,r.hoverColor=new s.Color4(.3,.3,.3,1),r.hoverPosition=s.Vector3.Zero(),r}return n(e,t),e.prototype.needAlphaBlending=function(){return 1!==this.alpha},e.prototype.needAlphaTesting=function(){return!1},e.prototype.getAlphaTestTexture=function(){return null},e.prototype.isReadyForSubMesh=function(t,e,i){if(this.isFrozen&&e.effect&&e.effect._wasPreviouslyReady)return!0;e._materialDefines||(e._materialDefines=new at);var r=this.getScene(),n=e._materialDefines;if(!this.checkReadyOnEveryCall&&e.effect&&n._renderId===r.getRenderId())return!0;if(n._areTexturesDirty)if(n.INNERGLOW=this.innerGlowColorIntensity>0,n.BORDER=this.renderBorders,n.HOVERLIGHT=this.renderHoverLight,this._albedoTexture){if(!this._albedoTexture.isReadyOrNotBlocking())return!1;n.TEXTURE=!0}else n.TEXTURE=!1;var o=r.getEngine();if(n.isDirty){n.markAsProcessed(),r.resetCachedMaterial();var a=[s.VertexBuffer.PositionKind];a.push(s.VertexBuffer.NormalKind),a.push(s.VertexBuffer.UVKind);var h=["world","viewProjection","innerGlowColor","albedoColor","borderWidth","edgeSmoothingValue","scaleFactor","borderMinValue","hoverColor","hoverPosition","hoverRadius"],l=["albedoSampler"],u=new Array;s.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:h,uniformBuffersNames:u,samplers:l,defines:n,maxSimultaneousLights:4});var c=n.toString();e.setEffect(r.getEngine().createEffect("fluent",{attributes:a,uniformsNames:h,uniformBuffersNames:u,samplers:l,defines:c,fallbacks:null,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},o))}return!(!e.effect||!e.effect.isReady())&&(n._renderId=r.getRenderId(),e.effect._wasPreviouslyReady=!0,!0)},e.prototype.bindForSubMesh=function(t,e,i){var r=this.getScene(),n=i._materialDefines;if(n){var o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",r.getTransformMatrix()),this._mustRebind(r,o)&&(this._activeEffect.setColor4("albedoColor",this.albedoColor,this.alpha),n.INNERGLOW&&this._activeEffect.setColor4("innerGlowColor",this.innerGlowColor,this.innerGlowColorIntensity),n.BORDER&&(this._activeEffect.setFloat("borderWidth",this.borderWidth),this._activeEffect.setFloat("edgeSmoothingValue",this.edgeSmoothingValue),this._activeEffect.setFloat("borderMinValue",this.borderMinValue),e.getBoundingInfo().boundingBox.extendSize.multiplyToRef(e.scaling,s.TmpVectors.Vector3[0]),this._activeEffect.setVector3("scaleFactor",s.TmpVectors.Vector3[0])),n.HOVERLIGHT&&(this._activeEffect.setDirectColor4("hoverColor",this.hoverColor),this._activeEffect.setFloat("hoverRadius",this.hoverRadius),this._activeEffect.setVector3("hoverPosition",this.hoverPosition)),n.TEXTURE&&this._activeEffect.setTexture("albedoSampler",this._albedoTexture)),this._afterBind(e,this._activeEffect))}},e.prototype.getActiveTextures=function(){return t.prototype.getActiveTextures.call(this)},e.prototype.hasTexture=function(e){return!!t.prototype.hasTexture.call(this,e)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e)},e.prototype.clone=function(t){var i=this;return s.SerializationHelper.Clone(function(){return new e(t,i.getScene())},this)},e.prototype.serialize=function(){var t=s.SerializationHelper.Serialize(this);return t.customType="BABYLON.GUI.FluentMaterial",t},e.prototype.getClassName=function(){return"FluentMaterial"},e.Parse=function(t,i,r){return s.SerializationHelper.Parse(function(){return new e(t.name,i)},t,i,r)},o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"innerGlowColorIntensity",void 0),o([Object(s.serializeAsColor3)()],e.prototype,"innerGlowColor",void 0),o([Object(s.serialize)()],e.prototype,"alpha",void 0),o([Object(s.serializeAsColor3)()],e.prototype,"albedoColor",void 0),o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"renderBorders",void 0),o([Object(s.serialize)()],e.prototype,"borderWidth",void 0),o([Object(s.serialize)()],e.prototype,"edgeSmoothingValue",void 0),o([Object(s.serialize)()],e.prototype,"borderMinValue",void 0),o([Object(s.serialize)(),Object(s.expandToProperty)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"renderHoverLight",void 0),o([Object(s.serialize)()],e.prototype,"hoverRadius",void 0),o([Object(s.serializeAsColor4)()],e.prototype,"hoverColor",void 0),o([Object(s.serializeAsVector3)()],e.prototype,"hoverPosition",void 0),o([Object(s.serializeAsTexture)("albedoTexture")],e.prototype,"_albedoTexture",void 0),o([Object(s.expandToProperty)("_markAllSubMeshesAsTexturesAndMiscDirty")],e.prototype,"albedoTexture",void 0),e}(s.PushMaterial);s._TypeStore.RegisteredTypes["BABYLON.GUI.FluentMaterial"]=ht;var lt=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e)||this;return r._shareMaterials=!0,r._shareMaterials=i,r.pointerEnterAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!0)},r.pointerOutAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!1)},r}return n(e,t),e.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(e.prototype,"renderingGroupId",{get:function(){return this._backPlate.renderingGroupId},set:function(t){this._backPlate.renderingGroupId=t,this._textPlate.renderingGroupId=t,this._frontPlate.renderingGroupId=t,this._tooltipMesh&&(this._tooltipMesh.renderingGroupId=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null},set:function(t){var e=this;if(t){if(!this._tooltipFade){this._tooltipMesh=s.PlaneBuilder.CreatePlane("",{size:1},this._backPlate._scene);var i=s.PlaneBuilder.CreatePlane("",{size:1,sideOrientation:s.Mesh.DOUBLESIDE},this._backPlate._scene),r=new s.StandardMaterial("",this._backPlate._scene);r.diffuseColor=s.Color3.FromHexString("#212121"),i.material=r,i.isPickable=!1,this._tooltipMesh.addChild(i),i.position.z=.05,this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position.y=.7,this._tooltipMesh.position.z=-.15,this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=K.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new y,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color="white",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new s.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=t)}else this._disposeTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(t){this._imageUrl!==t&&(this._imageUrl=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backMaterial",{get:function(){return this._backMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frontMaterial",{get:function(){return this._frontMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plateMaterial",{get:function(){return this._plateMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareMaterials",{get:function(){return this._shareMaterials},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return"HolographicButton"},e.prototype._rebuildContent=function(){this._disposeFacadeTexture();var t=new C;if(t.isVertical=!0,this._imageUrl){var e=new v;e.source=this._imageUrl,e.paddingTop="40px",e.height="180px",e.width="100px",e.paddingBottom="40px",t.addControl(e)}if(this._text){var i=new y;i.text=this._text,i.color="white",i.height="30px",i.fontSize=24,t.addControl(i)}this._frontPlate&&(this.content=t)},e.prototype._createNode=function(e){return this._backPlate=s.BoxBuilder.CreateBox(this.name+"BackMesh",{width:1,height:1,depth:.08},e),this._frontPlate=s.BoxBuilder.CreateBox(this.name+"FrontMesh",{width:1,height:1,depth:.08},e),this._frontPlate.parent=this._backPlate,this._frontPlate.position.z=-.08,this._frontPlate.isPickable=!1,this._frontPlate.setEnabled(!1),this._textPlate=t.prototype._createNode.call(this,e),this._textPlate.parent=this._backPlate,this._textPlate.position.z=-.08,this._textPlate.isPickable=!1,this._backPlate},e.prototype._applyFacade=function(t){this._plateMaterial.emissiveTexture=t,this._plateMaterial.opacityTexture=t},e.prototype._createBackMaterial=function(t){var e=this;this._backMaterial=new ht(this.name+"Back Material",t.getScene()),this._backMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add(function(t){t?(e._backMaterial.hoverPosition=t,e._backMaterial.hoverColor.a=1):e._backMaterial.hoverColor.a=0})},e.prototype._createFrontMaterial=function(t){this._frontMaterial=new ht(this.name+"Front Material",t.getScene()),this._frontMaterial.innerGlowColorIntensity=0,this._frontMaterial.alpha=.5,this._frontMaterial.renderBorders=!0},e.prototype._createPlateMaterial=function(t){this._plateMaterial=new s.StandardMaterial(this.name+"Plate Material",t.getScene()),this._plateMaterial.specularColor=s.Color3.Black()},e.prototype._affectMaterial=function(t){this._shareMaterials?(this._host._sharedMaterials.backFluentMaterial?this._backMaterial=this._host._sharedMaterials.backFluentMaterial:(this._createBackMaterial(t),this._host._sharedMaterials.backFluentMaterial=this._backMaterial),this._host._sharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._sharedMaterials.frontFluentMaterial:(this._createFrontMaterial(t),this._host._sharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(t),this._createFrontMaterial(t)),this._createPlateMaterial(t),this._backPlate.material=this._backMaterial,this._frontPlate.material=this._frontMaterial,this._textPlate.material=this._plateMaterial,this._rebuildContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeTooltip(),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},e}(et),ut=function(t){function e(e,i){var r=t.call(this,i)||this;return r._currentMesh=e,r.pointerEnterAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1.1)},r.pointerOutAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/1.1)},r.pointerDownAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(.95)},r.pointerUpAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/.95)},r}return n(e,t),e.prototype._getTypeName=function(){return"MeshButton3D"},e.prototype._createNode=function(t){var e=this;return this._currentMesh.getChildMeshes().forEach(function(t){t.metadata=e}),this._currentMesh},e.prototype._affectMaterial=function(t){},e}(et),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){t.position=e.clone();var r=s.TmpVectors.Vector3[0];switch(r.copyFrom(e),this.orientation){case it.FACEORIGIN_ORIENTATION:case it.FACEFORWARD_ORIENTATION:r.addInPlace(new s.Vector3(0,0,1)),i.lookAt(r);break;case it.FACEFORWARDREVERSED_ORIENTATION:case it.FACEORIGINREVERSED_ORIENTATION:r.addInPlace(new s.Vector3(0,0,-1)),i.lookAt(r)}}},e}(rt),_t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._iteration=100,e}return n(e,t),Object.defineProperty(e.prototype,"iteration",{get:function(){return this._iteration},set:function(t){var e=this;this._iteration!==t&&(this._iteration=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh,r=this._scatterMapping(e);if(i){switch(this.orientation){case it.FACEORIGIN_ORIENTATION:case it.FACEFORWARD_ORIENTATION:i.lookAt(new s.Vector3(0,0,1));break;case it.FACEFORWARDREVERSED_ORIENTATION:case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(0,0,-1))}t.position=r}},e.prototype._scatterMapping=function(t){return t.x=(1-2*Math.random())*this._cellWidth,t.y=(1-2*Math.random())*this._cellHeight,t},e.prototype._finalProcessing=function(){for(var t=[],e=0,i=this._children;e<i.length;e++){var r=i[e];r.mesh&&t.push(r.mesh)}for(var n=0;n<this._iteration;n++){t.sort(function(t,e){var i=t.position.lengthSquared(),r=e.position.lengthSquared();return i<r?1:i>r?-1:0});for(var o=Math.pow(this.margin,2),a=Math.max(this._cellWidth,this._cellHeight),h=s.TmpVectors.Vector2[0],l=s.TmpVectors.Vector3[0],u=0;u<t.length-1;u++)for(var c=u+1;c<t.length;c++)if(u!=c){t[c].position.subtractToRef(t[u].position,l),h.x=l.x,h.y=l.y;var _=a,d=h.lengthSquared()-o;(d-=Math.min(d,o))<Math.pow(_,2)&&(h.normalize(),l.scaleInPlace(.5*(_-Math.sqrt(d))),t[c].position.addInPlace(l),t[u].position.subtractInPlace(l))}}},e}(rt),dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._sphericalMapping(e);switch(t.position=r,this.orientation){case it.FACEORIGIN_ORIENTATION:i.lookAt(new s.Vector3(2*r.x,2*r.y,2*r.z));break;case it.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new s.Vector3(-r.x,-r.y,-r.z));break;case it.FACEFORWARD_ORIENTATION:break;case it.FACEFORWARDREVERSED_ORIENTATION:i.rotate(s.Axis.Y,Math.PI,s.Space.LOCAL)}}},e.prototype._sphericalMapping=function(t){var e=new s.Vector3(0,0,this._radius),i=t.y/this._radius,r=-t.x/this._radius;return s.Matrix.RotationYawPitchRollToRef(r,i,0,s.TmpVectors.Matrix[0]),s.Vector3.TransformNormal(e,s.TmpVectors.Matrix[0])},e}(rt),ft=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._isVertical=!1,i.margin=.1,i._isVertical=e,i}return n(e,t),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this._isVertical},set:function(t){var e=this;this._isVertical!==t&&(this._isVertical=t,s.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){for(var t,e=0,i=0,r=0,n=[],o=s.Matrix.Invert(this.node.computeWorldMatrix(!0)),a=0,h=this._children;a<h.length;a++){if((f=h[a]).mesh){r++,f.mesh.computeWorldMatrix(!0),f.mesh.getWorldMatrix().multiplyToRef(o,s.TmpVectors.Matrix[0]);var l=f.mesh.getBoundingInfo().boundingBox,u=s.Vector3.TransformNormal(l.extendSize,s.TmpVectors.Matrix[0]);n.push(u),this._isVertical?i+=u.y:e+=u.x}}this._isVertical?i+=(r-1)*this.margin/2:e+=(r-1)*this.margin/2,t=this._isVertical?-i:-e;for(var c=0,_=0,d=this._children;_<d.length;_++){var f;if((f=d[_]).mesh){r--;u=n[c++];this._isVertical?(f.position.y=t+u.y,f.position.x=0,t+=2*u.y):(f.position.x=t+u.x,f.position.y=0,t+=2*u.x),t+=r>0?this.margin:0}}},e}(it),pt=function(){function t(t){var e=this;this._lastControlOver={},this._lastControlDown={},this.onPickedPointChangedObservable=new s.Observable,this._sharedMaterials={},this._scene=t||s.EngineStore.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){e._sceneDisposeObserver=null,e._utilityLayer=null,e.dispose()}),this._utilityLayer=new s.UtilityLayerRenderer(this._scene),this._utilityLayer.onlyCheckPointerDownEvents=!1,this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.mainSceneTrackerPredicate=function(t){return t&&t.metadata&&t.metadata._node},this._rootContainer=new it("RootContainer"),this._rootContainer._host=this;var i=this._utilityLayer.utilityLayerScene;this._pointerOutObserver=this._utilityLayer.onPointerOutObservable.add(function(t){e._handlePointerOut(t,!0)}),this._pointerObserver=i.onPointerObservable.add(function(t,i){e._doPicking(t)}),this._utilityLayer.utilityLayerScene.autoClear=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,new s.HemisphericLight("hemi",s.Vector3.Up(),this._utilityLayer.utilityLayerScene)}return Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"utilityLayer",{get:function(){return this._utilityLayer},enumerable:!0,configurable:!0}),t.prototype._handlePointerOut=function(t,e){var i=this._lastControlOver[t];i&&(i._onPointerOut(i),delete this._lastControlOver[t]),e&&this._lastControlDown[t]&&(this._lastControlDown[t].forcePointerUp(),delete this._lastControlDown[t]),this.onPickedPointChangedObservable.notifyObservers(null)},t.prototype._doPicking=function(t){if(!this._utilityLayer||!this._utilityLayer.shouldRender||!this._utilityLayer.utilityLayerScene.activeCamera)return!1;var e=t.event,i=e.pointerId||0,r=e.button,n=t.pickInfo;if(!n||!n.hit)return this._handlePointerOut(i,t.type===s.PointerEventTypes.POINTERUP),!1;var o=n.pickedMesh.metadata;return n.pickedPoint&&this.onPickedPointChangedObservable.notifyObservers(n.pickedPoint),o._processObservables(t.type,n.pickedPoint,i,r)||t.type===s.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[i]&&this._lastControlOver[i]._onPointerOut(this._lastControlOver[i]),delete this._lastControlOver[i]),t.type===s.PointerEventTypes.POINTERUP&&(this._lastControlDown[e.pointerId]&&(this._lastControlDown[e.pointerId].forcePointerUp(),delete this._lastControlDown[e.pointerId]),"touch"===e.pointerType&&this._handlePointerOut(i,!1)),!0},Object.defineProperty(t.prototype,"rootContainer",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),t.prototype.containsControl=function(t){return this._rootContainer.containsControl(t)},t.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},t.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},t.prototype.dispose=function(){for(var t in this._rootContainer.dispose(),this._sharedMaterials)this._sharedMaterials.hasOwnProperty(t)&&this._sharedMaterials[t].dispose();this._sharedMaterials={},this._pointerOutObserver&&this._utilityLayer&&(this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver),this._pointerOutObserver=null),this.onPickedPointChangedObservable.clear();var e=this._utilityLayer?this._utilityLayer.utilityLayerScene:null;e&&this._pointerObserver&&(e.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=null),this._scene&&this._sceneDisposeObserver&&(this._scene.onDisposeObservable.remove(this._sceneDisposeObserver),this._sceneDisposeObserver=null),this._utilityLayer&&this._utilityLayer.dispose()},t}();i.d(e,"AdvancedDynamicTexture",function(){return K}),i.d(e,"AdvancedDynamicTextureInstrumentation",function(){return Z}),i.d(e,"Vector2WithInfo",function(){return d}),i.d(e,"Matrix2D",function(){return f}),i.d(e,"Measure",function(){return _}),i.d(e,"MultiLinePoint",function(){return A}),i.d(e,"Style",function(){return q}),i.d(e,"ValueAndUnit",function(){return a}),i.d(e,"XmlLoader",function(){return J}),i.d(e,"Button",function(){return O}),i.d(e,"Checkbox",function(){return w}),i.d(e,"ColorPicker",function(){return M}),i.d(e,"Container",function(){return g}),i.d(e,"Control",function(){return p}),i.d(e,"Ellipse",function(){return P}),i.d(e,"Grid",function(){return x}),i.d(e,"Image",function(){return v}),i.d(e,"InputText",function(){return T}),i.d(e,"InputPassword",function(){return k}),i.d(e,"Line",function(){return I}),i.d(e,"MultiLine",function(){return S}),i.d(e,"RadioButton",function(){return E}),i.d(e,"StackPanel",function(){return C}),i.d(e,"SelectorGroup",function(){return D}),i.d(e,"CheckboxGroup",function(){return B}),i.d(e,"RadioGroup",function(){return N}),i.d(e,"SliderGroup",function(){return V}),i.d(e,"SelectionPanel",function(){return H}),i.d(e,"ScrollViewer",function(){return z}),i.d(e,"TextWrapping",function(){return b}),i.d(e,"TextBlock",function(){return y}),i.d(e,"KeyPropertySet",function(){return G}),i.d(e,"VirtualKeyboard",function(){return X}),i.d(e,"Rectangle",function(){return m}),i.d(e,"DisplayGrid",function(){return Y}),i.d(e,"BaseSlider",function(){return L}),i.d(e,"Slider",function(){return R}),i.d(e,"ImageBasedSlider",function(){return U}),i.d(e,"ScrollBar",function(){return j}),i.d(e,"ImageScrollBar",function(){return W}),i.d(e,"name",function(){return"Statics"}),i.d(e,"GUI3DManager",function(){return pt}),i.d(e,"Vector3WithInfo",function(){return Q}),i.d(e,"AbstractButton3D",function(){return tt}),i.d(e,"Button3D",function(){return et}),i.d(e,"Container3D",function(){return it}),i.d(e,"Control3D",function(){return $}),i.d(e,"CylinderPanel",function(){return nt}),i.d(e,"HolographicButton",function(){return lt}),i.d(e,"MeshButton3D",function(){return ut}),i.d(e,"PlanePanel",function(){return ct}),i.d(e,"ScatterPanel",function(){return _t}),i.d(e,"SpherePanel",function(){return dt}),i.d(e,"StackPanel3D",function(){return ft}),i.d(e,"VolumeBasedPanel",function(){return rt}),i.d(e,"FluentMaterialDefines",function(){return at}),i.d(e,"FluentMaterial",function(){return ht})},function(t,e,i){"use strict";i.r(e),function(t){var r=i(1);i.d(e,"AdvancedDynamicTexture",function(){return r.AdvancedDynamicTexture}),i.d(e,"AdvancedDynamicTextureInstrumentation",function(){return r.AdvancedDynamicTextureInstrumentation}),i.d(e,"Vector2WithInfo",function(){return r.Vector2WithInfo}),i.d(e,"Matrix2D",function(){return r.Matrix2D}),i.d(e,"Measure",function(){return r.Measure}),i.d(e,"MultiLinePoint",function(){return r.MultiLinePoint}),i.d(e,"Style",function(){return r.Style}),i.d(e,"ValueAndUnit",function(){return r.ValueAndUnit}),i.d(e,"XmlLoader",function(){return r.XmlLoader}),i.d(e,"GUI3DManager",function(){return r.GUI3DManager}),i.d(e,"Vector3WithInfo",function(){return r.Vector3WithInfo}),i.d(e,"Button",function(){return r.Button}),i.d(e,"Checkbox",function(){return r.Checkbox}),i.d(e,"ColorPicker",function(){return r.ColorPicker}),i.d(e,"Container",function(){return r.Container}),i.d(e,"Control",function(){return r.Control}),i.d(e,"Ellipse",function(){return r.Ellipse}),i.d(e,"Grid",function(){return r.Grid}),i.d(e,"Image",function(){return r.Image}),i.d(e,"InputText",function(){return r.InputText}),i.d(e,"InputPassword",function(){return r.InputPassword}),i.d(e,"Line",function(){return r.Line}),i.d(e,"MultiLine",function(){return r.MultiLine}),i.d(e,"RadioButton",function(){return r.RadioButton}),i.d(e,"StackPanel",function(){return r.StackPanel}),i.d(e,"SelectorGroup",function(){return r.SelectorGroup}),i.d(e,"CheckboxGroup",function(){return r.CheckboxGroup}),i.d(e,"RadioGroup",function(){return r.RadioGroup}),i.d(e,"SliderGroup",function(){return r.SliderGroup}),i.d(e,"SelectionPanel",function(){return r.SelectionPanel}),i.d(e,"ScrollViewer",function(){return r.ScrollViewer}),i.d(e,"TextWrapping",function(){return r.TextWrapping}),i.d(e,"TextBlock",function(){return r.TextBlock}),i.d(e,"KeyPropertySet",function(){return r.KeyPropertySet}),i.d(e,"VirtualKeyboard",function(){return r.VirtualKeyboard}),i.d(e,"Rectangle",function(){return r.Rectangle}),i.d(e,"DisplayGrid",function(){return r.DisplayGrid}),i.d(e,"BaseSlider",function(){return r.BaseSlider}),i.d(e,"Slider",function(){return r.Slider}),i.d(e,"ImageBasedSlider",function(){return r.ImageBasedSlider}),i.d(e,"ScrollBar",function(){return r.ScrollBar}),i.d(e,"ImageScrollBar",function(){return r.ImageScrollBar}),i.d(e,"name",function(){return r.name}),i.d(e,"AbstractButton3D",function(){return r.AbstractButton3D}),i.d(e,"Button3D",function(){return r.Button3D}),i.d(e,"Container3D",function(){return r.Container3D}),i.d(e,"Control3D",function(){return r.Control3D}),i.d(e,"CylinderPanel",function(){return r.CylinderPanel}),i.d(e,"HolographicButton",function(){return r.HolographicButton}),i.d(e,"MeshButton3D",function(){return r.MeshButton3D}),i.d(e,"PlanePanel",function(){return r.PlanePanel}),i.d(e,"ScatterPanel",function(){return r.ScatterPanel}),i.d(e,"SpherePanel",function(){return r.SpherePanel}),i.d(e,"StackPanel3D",function(){return r.StackPanel3D}),i.d(e,"VolumeBasedPanel",function(){return r.VolumeBasedPanel}),i.d(e,"FluentMaterialDefines",function(){return r.FluentMaterialDefines}),i.d(e,"FluentMaterial",function(){return r.FluentMaterial});var n=void 0!==t?t:"undefined"!=typeof window?window:void 0;void 0!==n&&(n.BABYLON=n.BABYLON||{},n.BABYLON.GUI=r)}.call(this,i(3))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}])});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/ecsy/build/ecsy.module.js":
/*!************************************************!*\
  !*** ./node_modules/ecsy/build/ecsy.module.js ***!
  \************************************************/
/*! exports provided: Component, Not, System, SystemStateComponent, TagComponent, Types, Version, World, createComponentClass, createType, enableRemoteDevtools */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return Component; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Not", function() { return Not; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "System", function() { return System; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SystemStateComponent", function() { return SystemStateComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TagComponent", function() { return TagComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Types", function() { return Types; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Version", function() { return Version; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "World", function() { return World; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createComponentClass", function() { return createComponentClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createType", function() { return createType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableRemoteDevtools", function() { return enableRemoteDevtools; });
class SystemManager {
  constructor(world) {
    this._systems = [];
    this._executeSystems = []; // Systems that have `execute` method
    this.world = world;
    this.lastExecutedSystem = null;
  }

  registerSystem(System, attributes) {
    if (
      this._systems.find(s => s.constructor.name === System.name) !== undefined
    ) {
      console.warn(`System '${System.name}' already registered.`);
      return this;
    }

    var system = new System(this.world, attributes);
    if (system.init) system.init();
    system.order = this._systems.length;
    this._systems.push(system);
    if (system.execute) {
      this._executeSystems.push(system);
      this.sortSystems();
    }
    return this;
  }

  sortSystems() {
    this._executeSystems.sort((a, b) => {
      return a.priority - b.priority || a.order - b.order;
    });
  }

  getSystem(System) {
    return this._systems.find(s => s instanceof System);
  }

  getSystems() {
    return this._systems;
  }

  removeSystem(System) {
    var index = this._systems.indexOf(System);
    if (!~index) return;

    this._systems.splice(index, 1);
  }

  executeSystem(system, delta, time) {
    if (system.initialized) {
      if (system.canExecute()) {
        let startTime = performance.now();
        system.execute(delta, time);
        system.executeTime = performance.now() - startTime;
        this.lastExecutedSystem = system;
        system.clearEvents();
      }
    }
  }

  stop() {
    this._executeSystems.forEach(system => system.stop());
  }

  execute(delta, time, forcePlay) {
    this._executeSystems.forEach(
      system =>
        (forcePlay || system.enabled) && this.executeSystem(system, delta, time)
    );
  }

  stats() {
    var stats = {
      numSystems: this._systems.length,
      systems: {}
    };

    for (var i = 0; i < this._systems.length; i++) {
      var system = this._systems[i];
      var systemStats = (stats.systems[system.constructor.name] = {
        queries: {}
      });
      for (var name in system.ctx) {
        systemStats.queries[name] = system.ctx[name].stats();
      }
    }

    return stats;
  }
}

/**
 * @private
 * @class EventDispatcher
 */
class EventDispatcher {
  constructor() {
    this._listeners = {};
    this.stats = {
      fired: 0,
      handled: 0
    };
  }

  /**
   * Add an event listener
   * @param {String} eventName Name of the event to listen
   * @param {Function} listener Callback to trigger when the event is fired
   */
  addEventListener(eventName, listener) {
    let listeners = this._listeners;
    if (listeners[eventName] === undefined) {
      listeners[eventName] = [];
    }

    if (listeners[eventName].indexOf(listener) === -1) {
      listeners[eventName].push(listener);
    }
  }

  /**
   * Check if an event listener is already added to the list of listeners
   * @param {String} eventName Name of the event to check
   * @param {Function} listener Callback for the specified event
   */
  hasEventListener(eventName, listener) {
    return (
      this._listeners[eventName] !== undefined &&
      this._listeners[eventName].indexOf(listener) !== -1
    );
  }

  /**
   * Remove an event listener
   * @param {String} eventName Name of the event to remove
   * @param {Function} listener Callback for the specified event
   */
  removeEventListener(eventName, listener) {
    var listenerArray = this._listeners[eventName];
    if (listenerArray !== undefined) {
      var index = listenerArray.indexOf(listener);
      if (index !== -1) {
        listenerArray.splice(index, 1);
      }
    }
  }

  /**
   * Dispatch an event
   * @param {String} eventName Name of the event to dispatch
   * @param {Entity} entity (Optional) Entity to emit
   * @param {Component} component
   */
  dispatchEvent(eventName, entity, component) {
    this.stats.fired++;

    var listenerArray = this._listeners[eventName];
    if (listenerArray !== undefined) {
      var array = listenerArray.slice(0);

      for (var i = 0; i < array.length; i++) {
        array[i].call(this, entity, component);
      }
    }
  }

  /**
   * Reset stats counters
   */
  resetCounters() {
    this.stats.fired = this.stats.handled = 0;
  }
}

/**
 * Return the name of a component
 * @param {Component} Component
 * @private
 */
function getName(Component) {
  return Component.name;
}

/**
 * Return a valid property name for the Component
 * @param {Component} Component
 * @private
 */
function componentPropertyName(Component) {
  var name = getName(Component);
  return name.charAt(0).toLowerCase() + name.slice(1);
}

/**
 * Get a key from a list of components
 * @param {Array(Component)} Components Array of components to generate the key
 * @private
 */
function queryKey(Components) {
  var names = [];
  for (var n = 0; n < Components.length; n++) {
    var T = Components[n];
    if (typeof T === "object") {
      var operator = T.operator === "not" ? "!" : T.operator;
      names.push(operator + getName(T.Component));
    } else {
      names.push(getName(T));
    }
  }

  return names.sort().join("-");
}

class Query {
  /**
   * @param {Array(Component)} Components List of types of components to query
   */
  constructor(Components, manager) {
    this.Components = [];
    this.NotComponents = [];

    Components.forEach(component => {
      if (typeof component === "object") {
        this.NotComponents.push(component.Component);
      } else {
        this.Components.push(component);
      }
    });

    if (this.Components.length === 0) {
      throw new Error("Can't create a query without components");
    }

    this.entities = [];

    this.eventDispatcher = new EventDispatcher();

    // This query is being used by a reactive system
    this.reactive = false;

    this.key = queryKey(Components);

    // Fill the query with the existing entities
    for (var i = 0; i < manager._entities.length; i++) {
      var entity = manager._entities[i];
      if (this.match(entity)) {
        // @todo ??? this.addEntity(entity); => preventing the event to be generated
        entity.queries.push(this);
        this.entities.push(entity);
      }
    }
  }

  /**
   * Add entity to this query
   * @param {Entity} entity
   */
  addEntity(entity) {
    entity.queries.push(this);
    this.entities.push(entity);

    this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED, entity);
  }

  /**
   * Remove entity from this query
   * @param {Entity} entity
   */
  removeEntity(entity) {
    let index = this.entities.indexOf(entity);
    if (~index) {
      this.entities.splice(index, 1);

      index = entity.queries.indexOf(this);
      entity.queries.splice(index, 1);

      this.eventDispatcher.dispatchEvent(
        Query.prototype.ENTITY_REMOVED,
        entity
      );
    }
  }

  match(entity) {
    return (
      entity.hasAllComponents(this.Components) &&
      !entity.hasAnyComponents(this.NotComponents)
    );
  }

  toJSON() {
    return {
      key: this.key,
      reactive: this.reactive,
      components: {
        included: this.Components.map(C => C.name),
        not: this.NotComponents.map(C => C.name)
      },
      numEntities: this.entities.length
    };
  }

  /**
   * Return stats for this query
   */
  stats() {
    return {
      numComponents: this.Components.length,
      numEntities: this.entities.length
    };
  }
}

Query.prototype.ENTITY_ADDED = "Query#ENTITY_ADDED";
Query.prototype.ENTITY_REMOVED = "Query#ENTITY_REMOVED";
Query.prototype.COMPONENT_CHANGED = "Query#COMPONENT_CHANGED";

var nextId = 0;

class Entity {
  constructor(world) {
    this._world = world || null;

    // Unique ID for this entity
    this.id = nextId++;

    // List of components types the entity has
    this._ComponentTypes = [];

    // Instance of the components
    this._components = {};

    this._componentsToRemove = {};

    // Queries where the entity is added
    this.queries = [];

    // Used for deferred removal
    this._ComponentTypesToRemove = [];

    this.alive = false;
  }

  // COMPONENTS

  getComponent(Component, includeRemoved) {
    var component = this._components[Component.name];

    if (!component && includeRemoved === true) {
      component = this._componentsToRemove[Component.name];
    }

    return  component;
  }

  getRemovedComponent(Component) {
    return this._componentsToRemove[Component.name];
  }

  getComponents() {
    return this._components;
  }

  getComponentsToRemove() {
    return this._componentsToRemove;
  }

  getComponentTypes() {
    return this._ComponentTypes;
  }

  getMutableComponent(Component) {
    var component = this._components[Component.name];
    for (var i = 0; i < this.queries.length; i++) {
      var query = this.queries[i];
      // @todo accelerate this check. Maybe having query._Components as an object
      if (query.reactive && query.Components.indexOf(Component) !== -1) {
        query.eventDispatcher.dispatchEvent(
          Query.prototype.COMPONENT_CHANGED,
          this,
          component
        );
      }
    }
    return component;
  }

  addComponent(Component, values) {
    this._world.entityAddComponent(this, Component, values);
    return this;
  }

  removeComponent(Component, forceRemove) {
    this._world.entityRemoveComponent(this, Component, forceRemove);
    return this;
  }

  hasComponent(Component, includeRemoved) {
    return (
      !!~this._ComponentTypes.indexOf(Component) ||
      (includeRemoved === true && this.hasRemovedComponent(Component))
    );
  }

  hasRemovedComponent(Component) {
    return !!~this._ComponentTypesToRemove.indexOf(Component);
  }

  hasAllComponents(Components) {
    for (var i = 0; i < Components.length; i++) {
      if (!this.hasComponent(Components[i])) return false;
    }
    return true;
  }

  hasAnyComponents(Components) {
    for (var i = 0; i < Components.length; i++) {
      if (this.hasComponent(Components[i])) return true;
    }
    return false;
  }

  removeAllComponents(forceRemove) {
    return this._world.entityRemoveAllComponents(this, forceRemove);
  }

  // EXTRAS

  // Initialize the entity. To be used when returning an entity to the pool
  reset() {
    this.id = nextId++;
    this._world = null;
    this._ComponentTypes.length = 0;
    this.queries.length = 0;
    this._components = {};
  }

  remove(forceRemove) {
    return this._world.removeEntity(this, forceRemove);
  }
}

class ObjectPool {
  // @todo Add initial size
  constructor(T, initialSize) {
    this.freeList = [];
    this.count = 0;
    this.T = T;
    this.isObjectPool = true;

    var extraArgs = null;
    if (arguments.length > 1) {
      extraArgs = Array.prototype.slice.call(arguments);
      extraArgs.shift();
    }

    this.createElement = extraArgs
      ? () => {
          return new T(...extraArgs);
        }
      : () => {
          return new T();
        };

    if (typeof initialSize !== "undefined") {
      this.expand(initialSize);
    }
  }

  aquire() {
    // Grow the list by 20%ish if we're out
    if (this.freeList.length <= 0) {
      this.expand(Math.round(this.count * 0.2) + 1);
    }

    var item = this.freeList.pop();

    return item;
  }

  release(item) {
    item.reset();
    this.freeList.push(item);
  }

  expand(count) {
    for (var n = 0; n < count; n++) {
      this.freeList.push(this.createElement());
    }
    this.count += count;
  }

  totalSize() {
    return this.count;
  }

  totalFree() {
    return this.freeList.length;
  }

  totalUsed() {
    return this.count - this.freeList.length;
  }
}

/**
 * @private
 * @class QueryManager
 */
class QueryManager {
  constructor(world) {
    this._world = world;

    // Queries indexed by a unique identifier for the components it has
    this._queries = {};
  }

  onEntityRemoved(entity) {
    for (var queryName in this._queries) {
      var query = this._queries[queryName];
      if (entity.queries.indexOf(query) !== -1) {
        query.removeEntity(entity);
      }
    }
  }

  /**
   * Callback when a component is added to an entity
   * @param {Entity} entity Entity that just got the new component
   * @param {Component} Component Component added to the entity
   */
  onEntityComponentAdded(entity, Component) {
    // @todo Use bitmask for checking components?

    // Check each indexed query to see if we need to add this entity to the list
    for (var queryName in this._queries) {
      var query = this._queries[queryName];

      if (
        !!~query.NotComponents.indexOf(Component) &&
        ~query.entities.indexOf(entity)
      ) {
        query.removeEntity(entity);
        continue;
      }

      // Add the entity only if:
      // Component is in the query
      // and Entity has ALL the components of the query
      // and Entity is not already in the query
      if (
        !~query.Components.indexOf(Component) ||
        !query.match(entity) ||
        ~query.entities.indexOf(entity)
      )
        continue;

      query.addEntity(entity);
    }
  }

  /**
   * Callback when a component is removed from an entity
   * @param {Entity} entity Entity to remove the component from
   * @param {Component} Component Component to remove from the entity
   */
  onEntityComponentRemoved(entity, Component) {
    for (var queryName in this._queries) {
      var query = this._queries[queryName];

      if (
        !!~query.NotComponents.indexOf(Component) &&
        !~query.entities.indexOf(entity) &&
        query.match(entity)
      ) {
        query.addEntity(entity);
        continue;
      }

      if (
        !!~query.Components.indexOf(Component) &&
        !!~query.entities.indexOf(entity) &&
        !query.match(entity)
      ) {
        query.removeEntity(entity);
        continue;
      }
    }
  }

  /**
   * Get a query for the specified components
   * @param {Component} Components Components that the query should have
   */
  getQuery(Components) {
    var key = queryKey(Components);
    var query = this._queries[key];
    if (!query) {
      this._queries[key] = query = new Query(Components, this._world);
    }
    return query;
  }

  /**
   * Return some stats from this class
   */
  stats() {
    var stats = {};
    for (var queryName in this._queries) {
      stats[queryName] = this._queries[queryName].stats();
    }
    return stats;
  }
}

class SystemStateComponent {}

SystemStateComponent.isSystemStateComponent = true;

/**
 * @private
 * @class EntityManager
 */
class EntityManager {
  constructor(world) {
    this.world = world;
    this.componentsManager = world.componentsManager;

    // All the entities in this instance
    this._entities = [];

    this._queryManager = new QueryManager(this);
    this.eventDispatcher = new EventDispatcher();
    this._entityPool = new ObjectPool(Entity);

    // Deferred deletion
    this.entitiesWithComponentsToRemove = [];
    this.entitiesToRemove = [];
    this.deferredRemovalEnabled = true;

    this.numStateComponents = 0;
  }

  /**
   * Create a new entity
   */
  createEntity() {
    var entity = this._entityPool.aquire();
    entity.alive = true;
    entity._world = this;
    this._entities.push(entity);
    this.eventDispatcher.dispatchEvent(ENTITY_CREATED, entity);
    return entity;
  }

  // COMPONENTS

  /**
   * Add a component to an entity
   * @param {Entity} entity Entity where the component will be added
   * @param {Component} Component Component to be added to the entity
   * @param {Object} values Optional values to replace the default attributes
   */
  entityAddComponent(entity, Component, values) {
    if (~entity._ComponentTypes.indexOf(Component)) return;

    entity._ComponentTypes.push(Component);

    if (Component.__proto__ === SystemStateComponent) {
      this.numStateComponents++;
    }

    var componentPool = this.world.componentsManager.getComponentsPool(
      Component
    );
    var component = componentPool.aquire();

    entity._components[Component.name] = component;

    if (values) {
      if (component.copy) {
        component.copy(values);
      } else {
        for (var name in values) {
          component[name] = values[name];
        }
      }
    }

    this._queryManager.onEntityComponentAdded(entity, Component);
    this.world.componentsManager.componentAddedToEntity(Component);

    this.eventDispatcher.dispatchEvent(COMPONENT_ADDED, entity, Component);
  }

  /**
   * Remove a component from an entity
   * @param {Entity} entity Entity which will get removed the component
   * @param {*} Component Component to remove from the entity
   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)
   */
  entityRemoveComponent(entity, Component, immediately) {
    var index = entity._ComponentTypes.indexOf(Component);
    if (!~index) return;

    this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE, entity, Component);

    if (immediately) {
      this._entityRemoveComponentSync(entity, Component, index);
    } else {
      if (entity._ComponentTypesToRemove.length === 0)
        this.entitiesWithComponentsToRemove.push(entity);

      entity._ComponentTypes.splice(index, 1);
      entity._ComponentTypesToRemove.push(Component);

      var componentName = getName(Component);
      entity._componentsToRemove[componentName] =
        entity._components[componentName];
      delete entity._components[componentName];
    }

    // Check each indexed query to see if we need to remove it
    this._queryManager.onEntityComponentRemoved(entity, Component);

    if (Component.__proto__ === SystemStateComponent) {
      this.numStateComponents--;

      // Check if the entity was a ghost waiting for the last system state component to be removed
      if (this.numStateComponents === 0 && !entity.alive) {
        entity.remove();
      }
    }
  }

  _entityRemoveComponentSync(entity, Component, index) {
    // Remove T listing on entity and property ref, then free the component.
    entity._ComponentTypes.splice(index, 1);
    var propName = componentPropertyName(Component);
    var componentName = getName(Component);
    var component = entity._components[componentName];
    delete entity._components[componentName];
    this.componentsManager._componentPool[propName].release(component);
    this.world.componentsManager.componentRemovedFromEntity(Component);
  }

  /**
   * Remove all the components from an entity
   * @param {Entity} entity Entity from which the components will be removed
   */
  entityRemoveAllComponents(entity, immediately) {
    let Components = entity._ComponentTypes;

    for (let j = Components.length - 1; j >= 0; j--) {
      if (Components[j].__proto__ !== SystemStateComponent)
        this.entityRemoveComponent(entity, Components[j], immediately);
    }
  }

  /**
   * Remove the entity from this manager. It will clear also its components
   * @param {Entity} entity Entity to remove from the manager
   * @param {Bool} immediately If you want to remove the component immediately instead of deferred (Default is false)
   */
  removeEntity(entity, immediately) {
    var index = this._entities.indexOf(entity);

    if (!~index) throw new Error("Tried to remove entity not in list");

    entity.alive = false;

    if (this.numStateComponents === 0) {
      // Remove from entity list
      this.eventDispatcher.dispatchEvent(ENTITY_REMOVED, entity);
      this._queryManager.onEntityRemoved(entity);
      if (immediately === true) {
        this._releaseEntity(entity, index);
      } else {
        this.entitiesToRemove.push(entity);
      }
    }

    this.entityRemoveAllComponents(entity, immediately);
  }

  _releaseEntity(entity, index) {
    this._entities.splice(index, 1);

    // Prevent any access and free
    entity._world = null;
    this._entityPool.release(entity);
  }

  /**
   * Remove all entities from this manager
   */
  removeAllEntities() {
    for (var i = this._entities.length - 1; i >= 0; i--) {
      this.removeEntity(this._entities[i]);
    }
  }

  processDeferredRemoval() {
    if (!this.deferredRemovalEnabled) {
      return;
    }

    for (let i = 0; i < this.entitiesToRemove.length; i++) {
      let entity = this.entitiesToRemove[i];
      let index = this._entities.indexOf(entity);
      this._releaseEntity(entity, index);
    }
    this.entitiesToRemove.length = 0;

    for (let i = 0; i < this.entitiesWithComponentsToRemove.length; i++) {
      let entity = this.entitiesWithComponentsToRemove[i];
      while (entity._ComponentTypesToRemove.length > 0) {
        let Component = entity._ComponentTypesToRemove.pop();

        var propName = componentPropertyName(Component);
        var componentName = getName(Component);
        var component = entity._componentsToRemove[componentName];
        delete entity._componentsToRemove[componentName];
        this.componentsManager._componentPool[propName].release(component);
        this.world.componentsManager.componentRemovedFromEntity(Component);

        //this._entityRemoveComponentSync(entity, Component, index);
      }
    }

    this.entitiesWithComponentsToRemove.length = 0;
  }

  /**
   * Get a query based on a list of components
   * @param {Array(Component)} Components List of components that will form the query
   */
  queryComponents(Components) {
    return this._queryManager.getQuery(Components);
  }

  // EXTRAS

  /**
   * Return number of entities
   */
  count() {
    return this._entities.length;
  }

  /**
   * Return some stats
   */
  stats() {
    var stats = {
      numEntities: this._entities.length,
      numQueries: Object.keys(this._queryManager._queries).length,
      queries: this._queryManager.stats(),
      numComponentPool: Object.keys(this.componentsManager._componentPool)
        .length,
      componentPool: {},
      eventDispatcher: this.eventDispatcher.stats
    };

    for (var cname in this.componentsManager._componentPool) {
      var pool = this.componentsManager._componentPool[cname];
      stats.componentPool[cname] = {
        used: pool.totalUsed(),
        size: pool.count
      };
    }

    return stats;
  }
}

const ENTITY_CREATED = "EntityManager#ENTITY_CREATE";
const ENTITY_REMOVED = "EntityManager#ENTITY_REMOVED";
const COMPONENT_ADDED = "EntityManager#COMPONENT_ADDED";
const COMPONENT_REMOVE = "EntityManager#COMPONENT_REMOVE";

class DummyObjectPool {
  constructor(T) {
    this.isDummyObjectPool = true;
    this.count = 0;
    this.used = 0;
    this.T = T;
  }

  aquire() {
    this.used++;
    this.count++;
    return new this.T();
  }

  release() {
    this.used--;
  }

  totalSize() {
    return this.count;
  }

  totalFree() {
    return Infinity;
  }

  totalUsed() {
    return this.used;
  }
}

class ComponentManager {
  constructor() {
    this.Components = {};
    this._componentPool = {};
    this.numComponents = {};
  }

  registerComponent(Component) {
    if (this.Components[Component.name]) {
      console.warn(`Component type: '${Component.name}' already registered.`);
      return;
    }

    this.Components[Component.name] = Component;
    this.numComponents[Component.name] = 0;
  }

  componentAddedToEntity(Component) {
    if (!this.Components[Component.name]) {
      this.registerComponent(Component);
    }

    this.numComponents[Component.name]++;
  }

  componentRemovedFromEntity(Component) {
    this.numComponents[Component.name]--;
  }

  getComponentsPool(Component) {
    var componentName = componentPropertyName(Component);

    if (!this._componentPool[componentName]) {
      if (Component.prototype.reset) {
        this._componentPool[componentName] = new ObjectPool(Component);
      } else {
        console.warn(
          `Component '${Component.name}' won't benefit from pooling because 'reset' method was not implemeneted.`
        );
        this._componentPool[componentName] = new DummyObjectPool(Component);
      }
    }

    return this._componentPool[componentName];
  }
}

var name = "ecsy";
var version = "0.2.0";
var description = "Entity Component System in JS";
var main = "build/ecsy.js";
var module = "build/ecsy.module.js";
var types = "src/index.d.ts";
var scripts = {
	build: "rollup -c && npm run docs",
	docs: "rm docs/api/_sidebar.md; typedoc --readme none --mode file --excludeExternals --plugin typedoc-plugin-markdown  --theme docs/theme --hideSources --hideBreadcrumbs --out docs/api/ --includeDeclarations --includes 'src/**/*.d.ts' src; touch docs/api/_sidebar.md",
	"dev:docs": "nodemon -e ts -x 'npm run docs' -w src",
	dev: "concurrently --names 'ROLLUP,DOCS,HTTP' -c 'bgBlue.bold,bgYellow.bold,bgGreen.bold' 'rollup -c -w -m inline' 'npm run dev:docs' 'npm run dev:server'",
	"dev:server": "http-server -c-1 -p 8080 --cors",
	lint: "eslint src test examples",
	start: "npm run dev",
	test: "ava",
	travis: "npm run lint && npm run test && npm run build",
	"watch:test": "ava --watch"
};
var repository = {
	type: "git",
	url: "git+https://github.com/fernandojsg/ecsy.git"
};
var keywords = [
	"ecs",
	"entity component system"
];
var author = "Fernando Serrano <fernandojsg@gmail.com> (http://fernandojsg.com)";
var license = "MIT";
var bugs = {
	url: "https://github.com/fernandojsg/ecsy/issues"
};
var ava = {
	files: [
		"test/**/*.test.js"
	],
	sources: [
		"src/**/*.js"
	],
	require: [
		"babel-register",
		"esm"
	]
};
var jspm = {
	files: [
		"package.json",
		"LICENSE",
		"README.md",
		"build/ecsy.js",
		"build/ecsy.min.js",
		"build/ecsy.module.js"
	],
	directories: {
	}
};
var homepage = "https://github.com/fernandojsg/ecsy#readme";
var devDependencies = {
	ava: "^1.4.1",
	"babel-cli": "^6.26.0",
	"babel-core": "^6.26.3",
	"babel-eslint": "^10.0.3",
	"babel-loader": "^8.0.6",
	concurrently: "^4.1.2",
	"docsify-cli": "^4.4.0",
	eslint: "^5.16.0",
	"eslint-config-prettier": "^4.3.0",
	"eslint-plugin-prettier": "^3.1.1",
	"http-server": "^0.11.1",
	nodemon: "^1.19.4",
	prettier: "^1.19.1",
	rollup: "^1.27.8",
	"rollup-plugin-json": "^4.0.0",
	"rollup-plugin-terser": "^5.1.2",
	typedoc: "^0.15.3",
	"typedoc-plugin-markdown": "^2.2.11",
	typescript: "^3.7.2"
};
var pjson = {
	name: name,
	version: version,
	description: description,
	main: main,
	"jsnext:main": "build/ecsy.module.js",
	module: module,
	types: types,
	scripts: scripts,
	repository: repository,
	keywords: keywords,
	author: author,
	license: license,
	bugs: bugs,
	ava: ava,
	jspm: jspm,
	homepage: homepage,
	devDependencies: devDependencies
};

const Version = pjson.version;

class World {
  constructor() {
    this.componentsManager = new ComponentManager(this);
    this.entityManager = new EntityManager(this);
    this.systemManager = new SystemManager(this);

    this.enabled = true;

    this.eventQueues = {};

    if (typeof CustomEvent !== "undefined") {
      var event = new CustomEvent("ecsy-world-created", {
        detail: { world: this, version: Version }
      });
      window.dispatchEvent(event);
    }

    this.lastTime = performance.now();
  }

  registerComponent(Component) {
    this.componentsManager.registerComponent(Component);
    return this;
  }

  registerSystem(System, attributes) {
    this.systemManager.registerSystem(System, attributes);
    return this;
  }

  getSystem(SystemClass) {
    return this.systemManager.getSystem(SystemClass);
  }

  getSystems() {
    return this.systemManager.getSystems();
  }

  execute(delta, time) {
    if (!delta) {
      let time = performance.now();
      delta = time - this.lastTime;
      this.lastTime = time;
    }

    if (this.enabled) {
      this.systemManager.execute(delta, time);
      this.entityManager.processDeferredRemoval();
    }
  }

  stop() {
    this.enabled = false;
  }

  play() {
    this.enabled = true;
  }

  createEntity() {
    return this.entityManager.createEntity();
  }

  stats() {
    var stats = {
      entities: this.entityManager.stats(),
      system: this.systemManager.stats()
    };

    console.log(JSON.stringify(stats, null, 2));
  }
}

class System {
  canExecute() {
    if (this._mandatoryQueries.length === 0) return true;

    for (let i = 0; i < this._mandatoryQueries.length; i++) {
      var query = this._mandatoryQueries[i];
      if (query.entities.length === 0) {
        return false;
      }
    }

    return true;
  }

  constructor(world, attributes) {
    this.world = world;
    this.enabled = true;

    // @todo Better naming :)
    this._queries = {};
    this.queries = {};

    this.priority = 0;

    // Used for stats
    this.executeTime = 0;

    if (attributes && attributes.priority) {
      this.priority = attributes.priority;
    }

    this._mandatoryQueries = [];

    this.initialized = true;

    if (this.constructor.queries) {
      for (var queryName in this.constructor.queries) {
        var queryConfig = this.constructor.queries[queryName];
        var Components = queryConfig.components;
        if (!Components || Components.length === 0) {
          throw new Error("'components' attribute can't be empty in a query");
        }
        var query = this.world.entityManager.queryComponents(Components);
        this._queries[queryName] = query;
        if (queryConfig.mandatory === true) {
          this._mandatoryQueries.push(query);
        }
        this.queries[queryName] = {
          results: query.entities
        };

        // Reactive configuration added/removed/changed
        var validEvents = ["added", "removed", "changed"];

        const eventMapping = {
          added: Query.prototype.ENTITY_ADDED,
          removed: Query.prototype.ENTITY_REMOVED,
          changed: Query.prototype.COMPONENT_CHANGED // Query.prototype.ENTITY_CHANGED
        };

        if (queryConfig.listen) {
          validEvents.forEach(eventName => {
            // Is the event enabled on this system's query?
            if (queryConfig.listen[eventName]) {
              let event = queryConfig.listen[eventName];

              if (eventName === "changed") {
                query.reactive = true;
                if (event === true) {
                  // Any change on the entity from the components in the query
                  let eventList = (this.queries[queryName][eventName] = []);
                  query.eventDispatcher.addEventListener(
                    Query.prototype.COMPONENT_CHANGED,
                    entity => {
                      // Avoid duplicates
                      if (eventList.indexOf(entity) === -1) {
                        eventList.push(entity);
                      }
                    }
                  );
                } else if (Array.isArray(event)) {
                  let eventList = (this.queries[queryName][eventName] = []);
                  query.eventDispatcher.addEventListener(
                    Query.prototype.COMPONENT_CHANGED,
                    (entity, changedComponent) => {
                      // Avoid duplicates
                      if (
                        event.indexOf(changedComponent.constructor) !== -1 &&
                        eventList.indexOf(entity) === -1
                      ) {
                        eventList.push(entity);
                      }
                    }
                  );
                }
              } else {
                let eventList = (this.queries[queryName][eventName] = []);

                query.eventDispatcher.addEventListener(
                  eventMapping[eventName],
                  entity => {
                    // @fixme overhead?
                    if (eventList.indexOf(entity) === -1)
                      eventList.push(entity);
                  }
                );
              }
            }
          });
        }
      }
    }
  }

  stop() {
    this.executeTime = 0;
    this.enabled = false;
  }

  play() {
    this.enabled = true;
  }

  // @question rename to clear queues?
  clearEvents() {
    for (let queryName in this.queries) {
      var query = this.queries[queryName];
      if (query.added) {
        query.added.length = 0;
      }
      if (query.removed) {
        query.removed.length = 0;
      }
      if (query.changed) {
        if (Array.isArray(query.changed)) {
          query.changed.length = 0;
        } else {
          for (let name in query.changed) {
            query.changed[name].length = 0;
          }
        }
      }
    }
  }

  toJSON() {
    var json = {
      name: this.constructor.name,
      enabled: this.enabled,
      executeTime: this.executeTime,
      priority: this.priority,
      queries: {}
    };

    if (this.constructor.queries) {
      var queries = this.constructor.queries;
      for (let queryName in queries) {
        let query = this.queries[queryName];
        let queryDefinition = queries[queryName];
        let jsonQuery = (json.queries[queryName] = {
          key: this._queries[queryName].key
        });

        jsonQuery.mandatory = queryDefinition.mandatory === true;
        jsonQuery.reactive =
          queryDefinition.listen &&
          (queryDefinition.listen.added === true ||
            queryDefinition.listen.removed === true ||
            queryDefinition.listen.changed === true ||
            Array.isArray(queryDefinition.listen.changed));

        if (jsonQuery.reactive) {
          jsonQuery.listen = {};

          const methods = ["added", "removed", "changed"];
          methods.forEach(method => {
            if (query[method]) {
              jsonQuery.listen[method] = {
                entities: query[method].length
              };
            }
          });
        }
      }
    }

    return json;
  }
}

function Not(Component) {
  return {
    operator: "not",
    Component: Component
  };
}

class Component {}

Component.isComponent = true;

class TagComponent {
  reset() {}
}

TagComponent.isTagComponent = true;

function createType(typeDefinition) {
  var mandatoryFunctions = [
    "create",
    "reset",
    "clear"
    /*"copy"*/
  ];

  var undefinedFunctions = mandatoryFunctions.filter(f => {
    return !typeDefinition[f];
  });

  if (undefinedFunctions.length > 0) {
    throw new Error(
      `createType expect type definition to implements the following functions: ${undefinedFunctions.join(
        ", "
      )}`
    );
  }

  typeDefinition.isType = true;
  return typeDefinition;
}

/**
 * Standard types
 */
var Types = {};

Types.Number = createType({
  baseType: Number,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : 0;
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = 0;
    }
  },
  clear: (src, key) => {
    src[key] = 0;
  }
});

Types.Boolean = createType({
  baseType: Boolean,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : false;
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = false;
    }
  },
  clear: (src, key) => {
    src[key] = false;
  }
});

Types.String = createType({
  baseType: String,
  isSimpleType: true,
  create: defaultValue => {
    return typeof defaultValue !== "undefined" ? defaultValue : "";
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue;
    } else {
      src[key] = "";
    }
  },
  clear: (src, key) => {
    src[key] = "";
  }
});

Types.Array = createType({
  baseType: Array,
  create: defaultValue => {
    if (typeof defaultValue !== "undefined") {
      return defaultValue.slice();
    }

    return [];
  },
  reset: (src, key, defaultValue) => {
    if (typeof defaultValue !== "undefined") {
      src[key] = defaultValue.slice();
    } else {
      src[key].length = 0;
    }
  },
  clear: (src, key) => {
    src[key].length = 0;
  },
  copy: (src, dst, key) => {
    src[key] = dst[key].slice();
  }
});

var standardTypes = {
  number: Types.Number,
  boolean: Types.Boolean,
  string: Types.String
};

/**
 * Try to infer the type of the value
 * @param {*} value
 * @return {String} Type of the attribute
 * @private
 */
function inferType(value) {
  if (Array.isArray(value)) {
    return Types.Array;
  }

  if (standardTypes[typeof value]) {
    return standardTypes[typeof value];
  } else {
    return null;
  }
}

function createComponentClass(schema, name) {
  //var Component = new Function(`return function ${name}() {}`)();
  for (let key in schema) {
    let type = schema[key].type;
    if (!type) {
      schema[key].type = inferType(schema[key].default);
    }
  }

  var Component = function() {
    for (let key in schema) {
      var attr = schema[key];
      let type = attr.type;
      if (type && type.isType) {
        this[key] = type.create(attr.default);
      } else {
        this[key] = attr.default;
      }
    }
  };

  if (typeof name !== "undefined") {
    Object.defineProperty(Component, "name", { value: name });
  }

  Component.prototype.schema = schema;

  var knownTypes = true;
  for (let key in schema) {
    var attr = schema[key];
    if (!attr.type) {
      attr.type = inferType(attr.default);
    }

    var type = attr.type;
    if (!type) {
      console.warn(`Unknown type definition for attribute '${key}'`);
      knownTypes = false;
    }
  }

  if (!knownTypes) {
    console.warn(
      `This component can't use pooling because some data types are not registered. Please provide a type created with 'createType'`
    );

    for (var key in schema) {
      let attr = schema[key];
      Component.prototype[key] = attr.default;
    }
  } else {
    Component.prototype.copy = function(src) {
      for (let key in schema) {
        if (src[key]) {
          let type = schema[key].type;
          if (type.isSimpleType) {
            this[key] = src[key];
          } else if (type.copy) {
            type.copy(this, src, key);
          } else {
            // @todo Detect that it's not possible to copy all the attributes
            // and just avoid creating the copy function
            console.warn(
              `Unknown copy function for attribute '${key}' data type`
            );
          }
        }
      }
    };

    Component.prototype.reset = function() {
      for (let key in schema) {
        let attr = schema[key];
        let type = attr.type;
        if (type.reset) type.reset(this, key, attr.default);
      }
    };

    Component.prototype.clear = function() {
      for (let key in schema) {
        let type = schema[key].type;
        if (type.clear) type.clear(this, key);
      }
    };

    for (let key in schema) {
      let attr = schema[key];
      let type = attr.type;
      Component.prototype[key] = attr.default;

      if (type.reset) {
        type.reset(Component.prototype, key, attr.default);
      }
    }
  }

  return Component;
}

function generateId(length) {
  var result = "";
  var characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
  var charactersLength = characters.length;
  for (var i = 0; i < length; i++) {
    result += characters.charAt(Math.floor(Math.random() * charactersLength));
  }
  return result;
}

function injectScript(src, onLoad) {
  var script = document.createElement("script");
  // @todo Use link to the ecsy-devtools repo?
  script.src = src;
  script.onload = onLoad;
  (document.head || document.documentElement).appendChild(script);
}

/* global Peer */

function hookConsoleAndErrors(connection) {
  var wrapFunctions = ["error", "warning", "log"];
  wrapFunctions.forEach(key => {
    if (typeof console[key] === "function") {
      var fn = console[key].bind(console);
      console[key] = (...args) => {
        connection.send({
          method: "console",
          type: key,
          args: JSON.stringify(args)
        });
        return fn.apply(null, args);
      };
    }
  });

  window.addEventListener("error", error => {
    connection.send({
      method: "error",
      error: JSON.stringify({
        message: error.error.message,
        stack: error.error.stack
      })
    });
  });
}

function includeRemoteIdHTML(remoteId) {
  let infoDiv = document.createElement("div");
  infoDiv.style.cssText = `
    align-items: center;
    background-color: #333;
    color: #aaa;
    display:flex;
    font-family: Arial;
    font-size: 1.1em;
    height: 40px;
    justify-content: center;
    left: 0;
    opacity: 0.9;
    position: absolute;
    right: 0;
    text-align: center;
    top: 0;
  `;

  infoDiv.innerHTML = `Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${remoteId}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`;
  document.body.appendChild(infoDiv);

  return infoDiv;
}

function enableRemoteDevtools(remoteId) {
  window.generateNewCode = () => {
    window.localStorage.clear();
    remoteId = generateId(6);
    window.localStorage.setItem("ecsyRemoteId", remoteId);
    window.location.reload(false);
  };

  remoteId = remoteId || window.localStorage.getItem("ecsyRemoteId");
  if (!remoteId) {
    remoteId = generateId(6);
    window.localStorage.setItem("ecsyRemoteId", remoteId);
  }

  let infoDiv = includeRemoteIdHTML(remoteId);

  window.__ECSY_REMOTE_DEVTOOLS_INJECTED = true;
  window.__ECSY_REMOTE_DEVTOOLS = {};

  let Version = "";

  // This is used to collect the worlds created before the communication is being established
  let worldsBeforeLoading = [];
  let onWorldCreated = e => {
    var world = e.detail.world;
    Version = e.detail.version;
    worldsBeforeLoading.push(world);
  };
  window.addEventListener("ecsy-world-created", onWorldCreated);

  let onLoaded = () => {
    var peer = new Peer(remoteId);
    peer.on("open", (/* id */) => {
      peer.on("connection", connection => {
        window.__ECSY_REMOTE_DEVTOOLS.connection = connection;
        connection.on("open", function() {
          // infoDiv.style.visibility = "hidden";
          infoDiv.innerHTML = "Connected";

          // Receive messages
          connection.on("data", function(data) {
            if (data.type === "init") {
              var script = document.createElement("script");
              script.setAttribute("type", "text/javascript");
              script.onload = () => {
                script.parentNode.removeChild(script);

                // Once the script is injected we don't need to listen
                window.removeEventListener(
                  "ecsy-world-created",
                  onWorldCreated
                );
                worldsBeforeLoading.forEach(world => {
                  var event = new CustomEvent("ecsy-world-created", {
                    detail: { world: world, version: Version }
                  });
                  window.dispatchEvent(event);
                });
              };
              script.innerHTML = data.script;
              (document.head || document.documentElement).appendChild(script);
              script.onload();

              hookConsoleAndErrors(connection);
            } else if (data.type === "executeScript") {
              let value = eval(data.script);
              if (data.returnEval) {
                connection.send({
                  method: "evalReturn",
                  value: value
                });
              }
            }
          });
        });
      });
    });
  };

  // Inject PeerJS script
  injectScript(
    "https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",
    onLoaded
  );
}

const urlParams = new URLSearchParams(window.location.search);

// @todo Provide a way to disable it if needed
if (urlParams.has("enable-remote-devtools")) {
  enableRemoteDevtools();
}




/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };

    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}


/***/ }),

/***/ "./node_modules/html-entities/lib/html4-entities.js":
/*!**********************************************************!*\
  !*** ./node_modules/html-entities/lib/html4-entities.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var HTML_ALPHA = ['apos', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'acirc', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'quot', 'amp', 'lt', 'gt', 'OElig', 'oelig', 'Scaron', 'scaron', 'Yuml', 'circ', 'tilde', 'ensp', 'emsp', 'thinsp', 'zwnj', 'zwj', 'lrm', 'rlm', 'ndash', 'mdash', 'lsquo', 'rsquo', 'sbquo', 'ldquo', 'rdquo', 'bdquo', 'dagger', 'Dagger', 'permil', 'lsaquo', 'rsaquo', 'euro', 'fnof', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigmaf', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'thetasym', 'upsih', 'piv', 'bull', 'hellip', 'prime', 'Prime', 'oline', 'frasl', 'weierp', 'image', 'real', 'trade', 'alefsym', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'crarr', 'lArr', 'uArr', 'rArr', 'dArr', 'hArr', 'forall', 'part', 'exist', 'empty', 'nabla', 'isin', 'notin', 'ni', 'prod', 'sum', 'minus', 'lowast', 'radic', 'prop', 'infin', 'ang', 'and', 'or', 'cap', 'cup', 'int', 'there4', 'sim', 'cong', 'asymp', 'ne', 'equiv', 'le', 'ge', 'sub', 'sup', 'nsub', 'sube', 'supe', 'oplus', 'otimes', 'perp', 'sdot', 'lceil', 'rceil', 'lfloor', 'rfloor', 'lang', 'rang', 'loz', 'spades', 'clubs', 'hearts', 'diams'];
var HTML_CODES = [39, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 34, 38, 60, 62, 338, 339, 352, 353, 376, 710, 732, 8194, 8195, 8201, 8204, 8205, 8206, 8207, 8211, 8212, 8216, 8217, 8218, 8220, 8221, 8222, 8224, 8225, 8240, 8249, 8250, 8364, 402, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 931, 932, 933, 934, 935, 936, 937, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 977, 978, 982, 8226, 8230, 8242, 8243, 8254, 8260, 8472, 8465, 8476, 8482, 8501, 8592, 8593, 8594, 8595, 8596, 8629, 8656, 8657, 8658, 8659, 8660, 8704, 8706, 8707, 8709, 8711, 8712, 8713, 8715, 8719, 8721, 8722, 8727, 8730, 8733, 8734, 8736, 8743, 8744, 8745, 8746, 8747, 8756, 8764, 8773, 8776, 8800, 8801, 8804, 8805, 8834, 8835, 8836, 8838, 8839, 8853, 8855, 8869, 8901, 8968, 8969, 8970, 8971, 9001, 9002, 9674, 9824, 9827, 9829, 9830];
var alphaIndex = {};
var numIndex = {};
(function () {
    var i = 0;
    var length = HTML_ALPHA.length;
    while (i < length) {
        var a = HTML_ALPHA[i];
        var c = HTML_CODES[i];
        alphaIndex[a] = String.fromCharCode(c);
        numIndex[c] = a;
        i++;
    }
})();
var Html4Entities = /** @class */ (function () {
    function Html4Entities() {
    }
    Html4Entities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&(#?[\w\d]+);?/g, function (s, entity) {
            var chr;
            if (entity.charAt(0) === "#") {
                var code = entity.charAt(1).toLowerCase() === 'x' ?
                    parseInt(entity.substr(2), 16) :
                    parseInt(entity.substr(1));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        chr = String.fromCharCode(code);
                    }
                    else {
                        chr = surrogate_pairs_1.fromCodePoint(code);
                    }
                }
            }
            else {
                chr = alphaIndex[entity];
            }
            return chr || s;
        });
    };
    Html4Entities.decode = function (str) {
        return new Html4Entities().decode(str);
    };
    Html4Entities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var alpha = numIndex[str.charCodeAt(i)];
            result += alpha ? "&" + alpha + ";" : str.charAt(i);
            i++;
        }
        return result;
    };
    Html4Entities.encode = function (str) {
        return new Html4Entities().encode(str);
    };
    Html4Entities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var cc = str.charCodeAt(i);
            var alpha = numIndex[cc];
            if (alpha) {
                result += "&" + alpha + ";";
            }
            else if (cc < 32 || cc > 126) {
                if (cc >= surrogate_pairs_1.highSurrogateFrom && cc <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + cc + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    Html4Entities.encodeNonUTF = function (str) {
        return new Html4Entities().encodeNonUTF(str);
    };
    Html4Entities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i++;
            }
            else {
                result += '&#' + c + ';';
            }
            i++;
        }
        return result;
    };
    Html4Entities.encodeNonASCII = function (str) {
        return new Html4Entities().encodeNonASCII(str);
    };
    return Html4Entities;
}());
exports.Html4Entities = Html4Entities;


/***/ }),

/***/ "./node_modules/html-entities/lib/html5-entities.js":
/*!**********************************************************!*\
  !*** ./node_modules/html-entities/lib/html5-entities.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var ENTITIES = [['Aacute', [193]], ['aacute', [225]], ['Abreve', [258]], ['abreve', [259]], ['ac', [8766]], ['acd', [8767]], ['acE', [8766, 819]], ['Acirc', [194]], ['acirc', [226]], ['acute', [180]], ['Acy', [1040]], ['acy', [1072]], ['AElig', [198]], ['aelig', [230]], ['af', [8289]], ['Afr', [120068]], ['afr', [120094]], ['Agrave', [192]], ['agrave', [224]], ['alefsym', [8501]], ['aleph', [8501]], ['Alpha', [913]], ['alpha', [945]], ['Amacr', [256]], ['amacr', [257]], ['amalg', [10815]], ['amp', [38]], ['AMP', [38]], ['andand', [10837]], ['And', [10835]], ['and', [8743]], ['andd', [10844]], ['andslope', [10840]], ['andv', [10842]], ['ang', [8736]], ['ange', [10660]], ['angle', [8736]], ['angmsdaa', [10664]], ['angmsdab', [10665]], ['angmsdac', [10666]], ['angmsdad', [10667]], ['angmsdae', [10668]], ['angmsdaf', [10669]], ['angmsdag', [10670]], ['angmsdah', [10671]], ['angmsd', [8737]], ['angrt', [8735]], ['angrtvb', [8894]], ['angrtvbd', [10653]], ['angsph', [8738]], ['angst', [197]], ['angzarr', [9084]], ['Aogon', [260]], ['aogon', [261]], ['Aopf', [120120]], ['aopf', [120146]], ['apacir', [10863]], ['ap', [8776]], ['apE', [10864]], ['ape', [8778]], ['apid', [8779]], ['apos', [39]], ['ApplyFunction', [8289]], ['approx', [8776]], ['approxeq', [8778]], ['Aring', [197]], ['aring', [229]], ['Ascr', [119964]], ['ascr', [119990]], ['Assign', [8788]], ['ast', [42]], ['asymp', [8776]], ['asympeq', [8781]], ['Atilde', [195]], ['atilde', [227]], ['Auml', [196]], ['auml', [228]], ['awconint', [8755]], ['awint', [10769]], ['backcong', [8780]], ['backepsilon', [1014]], ['backprime', [8245]], ['backsim', [8765]], ['backsimeq', [8909]], ['Backslash', [8726]], ['Barv', [10983]], ['barvee', [8893]], ['barwed', [8965]], ['Barwed', [8966]], ['barwedge', [8965]], ['bbrk', [9141]], ['bbrktbrk', [9142]], ['bcong', [8780]], ['Bcy', [1041]], ['bcy', [1073]], ['bdquo', [8222]], ['becaus', [8757]], ['because', [8757]], ['Because', [8757]], ['bemptyv', [10672]], ['bepsi', [1014]], ['bernou', [8492]], ['Bernoullis', [8492]], ['Beta', [914]], ['beta', [946]], ['beth', [8502]], ['between', [8812]], ['Bfr', [120069]], ['bfr', [120095]], ['bigcap', [8898]], ['bigcirc', [9711]], ['bigcup', [8899]], ['bigodot', [10752]], ['bigoplus', [10753]], ['bigotimes', [10754]], ['bigsqcup', [10758]], ['bigstar', [9733]], ['bigtriangledown', [9661]], ['bigtriangleup', [9651]], ['biguplus', [10756]], ['bigvee', [8897]], ['bigwedge', [8896]], ['bkarow', [10509]], ['blacklozenge', [10731]], ['blacksquare', [9642]], ['blacktriangle', [9652]], ['blacktriangledown', [9662]], ['blacktriangleleft', [9666]], ['blacktriangleright', [9656]], ['blank', [9251]], ['blk12', [9618]], ['blk14', [9617]], ['blk34', [9619]], ['block', [9608]], ['bne', [61, 8421]], ['bnequiv', [8801, 8421]], ['bNot', [10989]], ['bnot', [8976]], ['Bopf', [120121]], ['bopf', [120147]], ['bot', [8869]], ['bottom', [8869]], ['bowtie', [8904]], ['boxbox', [10697]], ['boxdl', [9488]], ['boxdL', [9557]], ['boxDl', [9558]], ['boxDL', [9559]], ['boxdr', [9484]], ['boxdR', [9554]], ['boxDr', [9555]], ['boxDR', [9556]], ['boxh', [9472]], ['boxH', [9552]], ['boxhd', [9516]], ['boxHd', [9572]], ['boxhD', [9573]], ['boxHD', [9574]], ['boxhu', [9524]], ['boxHu', [9575]], ['boxhU', [9576]], ['boxHU', [9577]], ['boxminus', [8863]], ['boxplus', [8862]], ['boxtimes', [8864]], ['boxul', [9496]], ['boxuL', [9563]], ['boxUl', [9564]], ['boxUL', [9565]], ['boxur', [9492]], ['boxuR', [9560]], ['boxUr', [9561]], ['boxUR', [9562]], ['boxv', [9474]], ['boxV', [9553]], ['boxvh', [9532]], ['boxvH', [9578]], ['boxVh', [9579]], ['boxVH', [9580]], ['boxvl', [9508]], ['boxvL', [9569]], ['boxVl', [9570]], ['boxVL', [9571]], ['boxvr', [9500]], ['boxvR', [9566]], ['boxVr', [9567]], ['boxVR', [9568]], ['bprime', [8245]], ['breve', [728]], ['Breve', [728]], ['brvbar', [166]], ['bscr', [119991]], ['Bscr', [8492]], ['bsemi', [8271]], ['bsim', [8765]], ['bsime', [8909]], ['bsolb', [10693]], ['bsol', [92]], ['bsolhsub', [10184]], ['bull', [8226]], ['bullet', [8226]], ['bump', [8782]], ['bumpE', [10926]], ['bumpe', [8783]], ['Bumpeq', [8782]], ['bumpeq', [8783]], ['Cacute', [262]], ['cacute', [263]], ['capand', [10820]], ['capbrcup', [10825]], ['capcap', [10827]], ['cap', [8745]], ['Cap', [8914]], ['capcup', [10823]], ['capdot', [10816]], ['CapitalDifferentialD', [8517]], ['caps', [8745, 65024]], ['caret', [8257]], ['caron', [711]], ['Cayleys', [8493]], ['ccaps', [10829]], ['Ccaron', [268]], ['ccaron', [269]], ['Ccedil', [199]], ['ccedil', [231]], ['Ccirc', [264]], ['ccirc', [265]], ['Cconint', [8752]], ['ccups', [10828]], ['ccupssm', [10832]], ['Cdot', [266]], ['cdot', [267]], ['cedil', [184]], ['Cedilla', [184]], ['cemptyv', [10674]], ['cent', [162]], ['centerdot', [183]], ['CenterDot', [183]], ['cfr', [120096]], ['Cfr', [8493]], ['CHcy', [1063]], ['chcy', [1095]], ['check', [10003]], ['checkmark', [10003]], ['Chi', [935]], ['chi', [967]], ['circ', [710]], ['circeq', [8791]], ['circlearrowleft', [8634]], ['circlearrowright', [8635]], ['circledast', [8859]], ['circledcirc', [8858]], ['circleddash', [8861]], ['CircleDot', [8857]], ['circledR', [174]], ['circledS', [9416]], ['CircleMinus', [8854]], ['CirclePlus', [8853]], ['CircleTimes', [8855]], ['cir', [9675]], ['cirE', [10691]], ['cire', [8791]], ['cirfnint', [10768]], ['cirmid', [10991]], ['cirscir', [10690]], ['ClockwiseContourIntegral', [8754]], ['clubs', [9827]], ['clubsuit', [9827]], ['colon', [58]], ['Colon', [8759]], ['Colone', [10868]], ['colone', [8788]], ['coloneq', [8788]], ['comma', [44]], ['commat', [64]], ['comp', [8705]], ['compfn', [8728]], ['complement', [8705]], ['complexes', [8450]], ['cong', [8773]], ['congdot', [10861]], ['Congruent', [8801]], ['conint', [8750]], ['Conint', [8751]], ['ContourIntegral', [8750]], ['copf', [120148]], ['Copf', [8450]], ['coprod', [8720]], ['Coproduct', [8720]], ['copy', [169]], ['COPY', [169]], ['copysr', [8471]], ['CounterClockwiseContourIntegral', [8755]], ['crarr', [8629]], ['cross', [10007]], ['Cross', [10799]], ['Cscr', [119966]], ['cscr', [119992]], ['csub', [10959]], ['csube', [10961]], ['csup', [10960]], ['csupe', [10962]], ['ctdot', [8943]], ['cudarrl', [10552]], ['cudarrr', [10549]], ['cuepr', [8926]], ['cuesc', [8927]], ['cularr', [8630]], ['cularrp', [10557]], ['cupbrcap', [10824]], ['cupcap', [10822]], ['CupCap', [8781]], ['cup', [8746]], ['Cup', [8915]], ['cupcup', [10826]], ['cupdot', [8845]], ['cupor', [10821]], ['cups', [8746, 65024]], ['curarr', [8631]], ['curarrm', [10556]], ['curlyeqprec', [8926]], ['curlyeqsucc', [8927]], ['curlyvee', [8910]], ['curlywedge', [8911]], ['curren', [164]], ['curvearrowleft', [8630]], ['curvearrowright', [8631]], ['cuvee', [8910]], ['cuwed', [8911]], ['cwconint', [8754]], ['cwint', [8753]], ['cylcty', [9005]], ['dagger', [8224]], ['Dagger', [8225]], ['daleth', [8504]], ['darr', [8595]], ['Darr', [8609]], ['dArr', [8659]], ['dash', [8208]], ['Dashv', [10980]], ['dashv', [8867]], ['dbkarow', [10511]], ['dblac', [733]], ['Dcaron', [270]], ['dcaron', [271]], ['Dcy', [1044]], ['dcy', [1076]], ['ddagger', [8225]], ['ddarr', [8650]], ['DD', [8517]], ['dd', [8518]], ['DDotrahd', [10513]], ['ddotseq', [10871]], ['deg', [176]], ['Del', [8711]], ['Delta', [916]], ['delta', [948]], ['demptyv', [10673]], ['dfisht', [10623]], ['Dfr', [120071]], ['dfr', [120097]], ['dHar', [10597]], ['dharl', [8643]], ['dharr', [8642]], ['DiacriticalAcute', [180]], ['DiacriticalDot', [729]], ['DiacriticalDoubleAcute', [733]], ['DiacriticalGrave', [96]], ['DiacriticalTilde', [732]], ['diam', [8900]], ['diamond', [8900]], ['Diamond', [8900]], ['diamondsuit', [9830]], ['diams', [9830]], ['die', [168]], ['DifferentialD', [8518]], ['digamma', [989]], ['disin', [8946]], ['div', [247]], ['divide', [247]], ['divideontimes', [8903]], ['divonx', [8903]], ['DJcy', [1026]], ['djcy', [1106]], ['dlcorn', [8990]], ['dlcrop', [8973]], ['dollar', [36]], ['Dopf', [120123]], ['dopf', [120149]], ['Dot', [168]], ['dot', [729]], ['DotDot', [8412]], ['doteq', [8784]], ['doteqdot', [8785]], ['DotEqual', [8784]], ['dotminus', [8760]], ['dotplus', [8724]], ['dotsquare', [8865]], ['doublebarwedge', [8966]], ['DoubleContourIntegral', [8751]], ['DoubleDot', [168]], ['DoubleDownArrow', [8659]], ['DoubleLeftArrow', [8656]], ['DoubleLeftRightArrow', [8660]], ['DoubleLeftTee', [10980]], ['DoubleLongLeftArrow', [10232]], ['DoubleLongLeftRightArrow', [10234]], ['DoubleLongRightArrow', [10233]], ['DoubleRightArrow', [8658]], ['DoubleRightTee', [8872]], ['DoubleUpArrow', [8657]], ['DoubleUpDownArrow', [8661]], ['DoubleVerticalBar', [8741]], ['DownArrowBar', [10515]], ['downarrow', [8595]], ['DownArrow', [8595]], ['Downarrow', [8659]], ['DownArrowUpArrow', [8693]], ['DownBreve', [785]], ['downdownarrows', [8650]], ['downharpoonleft', [8643]], ['downharpoonright', [8642]], ['DownLeftRightVector', [10576]], ['DownLeftTeeVector', [10590]], ['DownLeftVectorBar', [10582]], ['DownLeftVector', [8637]], ['DownRightTeeVector', [10591]], ['DownRightVectorBar', [10583]], ['DownRightVector', [8641]], ['DownTeeArrow', [8615]], ['DownTee', [8868]], ['drbkarow', [10512]], ['drcorn', [8991]], ['drcrop', [8972]], ['Dscr', [119967]], ['dscr', [119993]], ['DScy', [1029]], ['dscy', [1109]], ['dsol', [10742]], ['Dstrok', [272]], ['dstrok', [273]], ['dtdot', [8945]], ['dtri', [9663]], ['dtrif', [9662]], ['duarr', [8693]], ['duhar', [10607]], ['dwangle', [10662]], ['DZcy', [1039]], ['dzcy', [1119]], ['dzigrarr', [10239]], ['Eacute', [201]], ['eacute', [233]], ['easter', [10862]], ['Ecaron', [282]], ['ecaron', [283]], ['Ecirc', [202]], ['ecirc', [234]], ['ecir', [8790]], ['ecolon', [8789]], ['Ecy', [1069]], ['ecy', [1101]], ['eDDot', [10871]], ['Edot', [278]], ['edot', [279]], ['eDot', [8785]], ['ee', [8519]], ['efDot', [8786]], ['Efr', [120072]], ['efr', [120098]], ['eg', [10906]], ['Egrave', [200]], ['egrave', [232]], ['egs', [10902]], ['egsdot', [10904]], ['el', [10905]], ['Element', [8712]], ['elinters', [9191]], ['ell', [8467]], ['els', [10901]], ['elsdot', [10903]], ['Emacr', [274]], ['emacr', [275]], ['empty', [8709]], ['emptyset', [8709]], ['EmptySmallSquare', [9723]], ['emptyv', [8709]], ['EmptyVerySmallSquare', [9643]], ['emsp13', [8196]], ['emsp14', [8197]], ['emsp', [8195]], ['ENG', [330]], ['eng', [331]], ['ensp', [8194]], ['Eogon', [280]], ['eogon', [281]], ['Eopf', [120124]], ['eopf', [120150]], ['epar', [8917]], ['eparsl', [10723]], ['eplus', [10865]], ['epsi', [949]], ['Epsilon', [917]], ['epsilon', [949]], ['epsiv', [1013]], ['eqcirc', [8790]], ['eqcolon', [8789]], ['eqsim', [8770]], ['eqslantgtr', [10902]], ['eqslantless', [10901]], ['Equal', [10869]], ['equals', [61]], ['EqualTilde', [8770]], ['equest', [8799]], ['Equilibrium', [8652]], ['equiv', [8801]], ['equivDD', [10872]], ['eqvparsl', [10725]], ['erarr', [10609]], ['erDot', [8787]], ['escr', [8495]], ['Escr', [8496]], ['esdot', [8784]], ['Esim', [10867]], ['esim', [8770]], ['Eta', [919]], ['eta', [951]], ['ETH', [208]], ['eth', [240]], ['Euml', [203]], ['euml', [235]], ['euro', [8364]], ['excl', [33]], ['exist', [8707]], ['Exists', [8707]], ['expectation', [8496]], ['exponentiale', [8519]], ['ExponentialE', [8519]], ['fallingdotseq', [8786]], ['Fcy', [1060]], ['fcy', [1092]], ['female', [9792]], ['ffilig', [64259]], ['fflig', [64256]], ['ffllig', [64260]], ['Ffr', [120073]], ['ffr', [120099]], ['filig', [64257]], ['FilledSmallSquare', [9724]], ['FilledVerySmallSquare', [9642]], ['fjlig', [102, 106]], ['flat', [9837]], ['fllig', [64258]], ['fltns', [9649]], ['fnof', [402]], ['Fopf', [120125]], ['fopf', [120151]], ['forall', [8704]], ['ForAll', [8704]], ['fork', [8916]], ['forkv', [10969]], ['Fouriertrf', [8497]], ['fpartint', [10765]], ['frac12', [189]], ['frac13', [8531]], ['frac14', [188]], ['frac15', [8533]], ['frac16', [8537]], ['frac18', [8539]], ['frac23', [8532]], ['frac25', [8534]], ['frac34', [190]], ['frac35', [8535]], ['frac38', [8540]], ['frac45', [8536]], ['frac56', [8538]], ['frac58', [8541]], ['frac78', [8542]], ['frasl', [8260]], ['frown', [8994]], ['fscr', [119995]], ['Fscr', [8497]], ['gacute', [501]], ['Gamma', [915]], ['gamma', [947]], ['Gammad', [988]], ['gammad', [989]], ['gap', [10886]], ['Gbreve', [286]], ['gbreve', [287]], ['Gcedil', [290]], ['Gcirc', [284]], ['gcirc', [285]], ['Gcy', [1043]], ['gcy', [1075]], ['Gdot', [288]], ['gdot', [289]], ['ge', [8805]], ['gE', [8807]], ['gEl', [10892]], ['gel', [8923]], ['geq', [8805]], ['geqq', [8807]], ['geqslant', [10878]], ['gescc', [10921]], ['ges', [10878]], ['gesdot', [10880]], ['gesdoto', [10882]], ['gesdotol', [10884]], ['gesl', [8923, 65024]], ['gesles', [10900]], ['Gfr', [120074]], ['gfr', [120100]], ['gg', [8811]], ['Gg', [8921]], ['ggg', [8921]], ['gimel', [8503]], ['GJcy', [1027]], ['gjcy', [1107]], ['gla', [10917]], ['gl', [8823]], ['glE', [10898]], ['glj', [10916]], ['gnap', [10890]], ['gnapprox', [10890]], ['gne', [10888]], ['gnE', [8809]], ['gneq', [10888]], ['gneqq', [8809]], ['gnsim', [8935]], ['Gopf', [120126]], ['gopf', [120152]], ['grave', [96]], ['GreaterEqual', [8805]], ['GreaterEqualLess', [8923]], ['GreaterFullEqual', [8807]], ['GreaterGreater', [10914]], ['GreaterLess', [8823]], ['GreaterSlantEqual', [10878]], ['GreaterTilde', [8819]], ['Gscr', [119970]], ['gscr', [8458]], ['gsim', [8819]], ['gsime', [10894]], ['gsiml', [10896]], ['gtcc', [10919]], ['gtcir', [10874]], ['gt', [62]], ['GT', [62]], ['Gt', [8811]], ['gtdot', [8919]], ['gtlPar', [10645]], ['gtquest', [10876]], ['gtrapprox', [10886]], ['gtrarr', [10616]], ['gtrdot', [8919]], ['gtreqless', [8923]], ['gtreqqless', [10892]], ['gtrless', [8823]], ['gtrsim', [8819]], ['gvertneqq', [8809, 65024]], ['gvnE', [8809, 65024]], ['Hacek', [711]], ['hairsp', [8202]], ['half', [189]], ['hamilt', [8459]], ['HARDcy', [1066]], ['hardcy', [1098]], ['harrcir', [10568]], ['harr', [8596]], ['hArr', [8660]], ['harrw', [8621]], ['Hat', [94]], ['hbar', [8463]], ['Hcirc', [292]], ['hcirc', [293]], ['hearts', [9829]], ['heartsuit', [9829]], ['hellip', [8230]], ['hercon', [8889]], ['hfr', [120101]], ['Hfr', [8460]], ['HilbertSpace', [8459]], ['hksearow', [10533]], ['hkswarow', [10534]], ['hoarr', [8703]], ['homtht', [8763]], ['hookleftarrow', [8617]], ['hookrightarrow', [8618]], ['hopf', [120153]], ['Hopf', [8461]], ['horbar', [8213]], ['HorizontalLine', [9472]], ['hscr', [119997]], ['Hscr', [8459]], ['hslash', [8463]], ['Hstrok', [294]], ['hstrok', [295]], ['HumpDownHump', [8782]], ['HumpEqual', [8783]], ['hybull', [8259]], ['hyphen', [8208]], ['Iacute', [205]], ['iacute', [237]], ['ic', [8291]], ['Icirc', [206]], ['icirc', [238]], ['Icy', [1048]], ['icy', [1080]], ['Idot', [304]], ['IEcy', [1045]], ['iecy', [1077]], ['iexcl', [161]], ['iff', [8660]], ['ifr', [120102]], ['Ifr', [8465]], ['Igrave', [204]], ['igrave', [236]], ['ii', [8520]], ['iiiint', [10764]], ['iiint', [8749]], ['iinfin', [10716]], ['iiota', [8489]], ['IJlig', [306]], ['ijlig', [307]], ['Imacr', [298]], ['imacr', [299]], ['image', [8465]], ['ImaginaryI', [8520]], ['imagline', [8464]], ['imagpart', [8465]], ['imath', [305]], ['Im', [8465]], ['imof', [8887]], ['imped', [437]], ['Implies', [8658]], ['incare', [8453]], ['in', [8712]], ['infin', [8734]], ['infintie', [10717]], ['inodot', [305]], ['intcal', [8890]], ['int', [8747]], ['Int', [8748]], ['integers', [8484]], ['Integral', [8747]], ['intercal', [8890]], ['Intersection', [8898]], ['intlarhk', [10775]], ['intprod', [10812]], ['InvisibleComma', [8291]], ['InvisibleTimes', [8290]], ['IOcy', [1025]], ['iocy', [1105]], ['Iogon', [302]], ['iogon', [303]], ['Iopf', [120128]], ['iopf', [120154]], ['Iota', [921]], ['iota', [953]], ['iprod', [10812]], ['iquest', [191]], ['iscr', [119998]], ['Iscr', [8464]], ['isin', [8712]], ['isindot', [8949]], ['isinE', [8953]], ['isins', [8948]], ['isinsv', [8947]], ['isinv', [8712]], ['it', [8290]], ['Itilde', [296]], ['itilde', [297]], ['Iukcy', [1030]], ['iukcy', [1110]], ['Iuml', [207]], ['iuml', [239]], ['Jcirc', [308]], ['jcirc', [309]], ['Jcy', [1049]], ['jcy', [1081]], ['Jfr', [120077]], ['jfr', [120103]], ['jmath', [567]], ['Jopf', [120129]], ['jopf', [120155]], ['Jscr', [119973]], ['jscr', [119999]], ['Jsercy', [1032]], ['jsercy', [1112]], ['Jukcy', [1028]], ['jukcy', [1108]], ['Kappa', [922]], ['kappa', [954]], ['kappav', [1008]], ['Kcedil', [310]], ['kcedil', [311]], ['Kcy', [1050]], ['kcy', [1082]], ['Kfr', [120078]], ['kfr', [120104]], ['kgreen', [312]], ['KHcy', [1061]], ['khcy', [1093]], ['KJcy', [1036]], ['kjcy', [1116]], ['Kopf', [120130]], ['kopf', [120156]], ['Kscr', [119974]], ['kscr', [120000]], ['lAarr', [8666]], ['Lacute', [313]], ['lacute', [314]], ['laemptyv', [10676]], ['lagran', [8466]], ['Lambda', [923]], ['lambda', [955]], ['lang', [10216]], ['Lang', [10218]], ['langd', [10641]], ['langle', [10216]], ['lap', [10885]], ['Laplacetrf', [8466]], ['laquo', [171]], ['larrb', [8676]], ['larrbfs', [10527]], ['larr', [8592]], ['Larr', [8606]], ['lArr', [8656]], ['larrfs', [10525]], ['larrhk', [8617]], ['larrlp', [8619]], ['larrpl', [10553]], ['larrsim', [10611]], ['larrtl', [8610]], ['latail', [10521]], ['lAtail', [10523]], ['lat', [10923]], ['late', [10925]], ['lates', [10925, 65024]], ['lbarr', [10508]], ['lBarr', [10510]], ['lbbrk', [10098]], ['lbrace', [123]], ['lbrack', [91]], ['lbrke', [10635]], ['lbrksld', [10639]], ['lbrkslu', [10637]], ['Lcaron', [317]], ['lcaron', [318]], ['Lcedil', [315]], ['lcedil', [316]], ['lceil', [8968]], ['lcub', [123]], ['Lcy', [1051]], ['lcy', [1083]], ['ldca', [10550]], ['ldquo', [8220]], ['ldquor', [8222]], ['ldrdhar', [10599]], ['ldrushar', [10571]], ['ldsh', [8626]], ['le', [8804]], ['lE', [8806]], ['LeftAngleBracket', [10216]], ['LeftArrowBar', [8676]], ['leftarrow', [8592]], ['LeftArrow', [8592]], ['Leftarrow', [8656]], ['LeftArrowRightArrow', [8646]], ['leftarrowtail', [8610]], ['LeftCeiling', [8968]], ['LeftDoubleBracket', [10214]], ['LeftDownTeeVector', [10593]], ['LeftDownVectorBar', [10585]], ['LeftDownVector', [8643]], ['LeftFloor', [8970]], ['leftharpoondown', [8637]], ['leftharpoonup', [8636]], ['leftleftarrows', [8647]], ['leftrightarrow', [8596]], ['LeftRightArrow', [8596]], ['Leftrightarrow', [8660]], ['leftrightarrows', [8646]], ['leftrightharpoons', [8651]], ['leftrightsquigarrow', [8621]], ['LeftRightVector', [10574]], ['LeftTeeArrow', [8612]], ['LeftTee', [8867]], ['LeftTeeVector', [10586]], ['leftthreetimes', [8907]], ['LeftTriangleBar', [10703]], ['LeftTriangle', [8882]], ['LeftTriangleEqual', [8884]], ['LeftUpDownVector', [10577]], ['LeftUpTeeVector', [10592]], ['LeftUpVectorBar', [10584]], ['LeftUpVector', [8639]], ['LeftVectorBar', [10578]], ['LeftVector', [8636]], ['lEg', [10891]], ['leg', [8922]], ['leq', [8804]], ['leqq', [8806]], ['leqslant', [10877]], ['lescc', [10920]], ['les', [10877]], ['lesdot', [10879]], ['lesdoto', [10881]], ['lesdotor', [10883]], ['lesg', [8922, 65024]], ['lesges', [10899]], ['lessapprox', [10885]], ['lessdot', [8918]], ['lesseqgtr', [8922]], ['lesseqqgtr', [10891]], ['LessEqualGreater', [8922]], ['LessFullEqual', [8806]], ['LessGreater', [8822]], ['lessgtr', [8822]], ['LessLess', [10913]], ['lesssim', [8818]], ['LessSlantEqual', [10877]], ['LessTilde', [8818]], ['lfisht', [10620]], ['lfloor', [8970]], ['Lfr', [120079]], ['lfr', [120105]], ['lg', [8822]], ['lgE', [10897]], ['lHar', [10594]], ['lhard', [8637]], ['lharu', [8636]], ['lharul', [10602]], ['lhblk', [9604]], ['LJcy', [1033]], ['ljcy', [1113]], ['llarr', [8647]], ['ll', [8810]], ['Ll', [8920]], ['llcorner', [8990]], ['Lleftarrow', [8666]], ['llhard', [10603]], ['lltri', [9722]], ['Lmidot', [319]], ['lmidot', [320]], ['lmoustache', [9136]], ['lmoust', [9136]], ['lnap', [10889]], ['lnapprox', [10889]], ['lne', [10887]], ['lnE', [8808]], ['lneq', [10887]], ['lneqq', [8808]], ['lnsim', [8934]], ['loang', [10220]], ['loarr', [8701]], ['lobrk', [10214]], ['longleftarrow', [10229]], ['LongLeftArrow', [10229]], ['Longleftarrow', [10232]], ['longleftrightarrow', [10231]], ['LongLeftRightArrow', [10231]], ['Longleftrightarrow', [10234]], ['longmapsto', [10236]], ['longrightarrow', [10230]], ['LongRightArrow', [10230]], ['Longrightarrow', [10233]], ['looparrowleft', [8619]], ['looparrowright', [8620]], ['lopar', [10629]], ['Lopf', [120131]], ['lopf', [120157]], ['loplus', [10797]], ['lotimes', [10804]], ['lowast', [8727]], ['lowbar', [95]], ['LowerLeftArrow', [8601]], ['LowerRightArrow', [8600]], ['loz', [9674]], ['lozenge', [9674]], ['lozf', [10731]], ['lpar', [40]], ['lparlt', [10643]], ['lrarr', [8646]], ['lrcorner', [8991]], ['lrhar', [8651]], ['lrhard', [10605]], ['lrm', [8206]], ['lrtri', [8895]], ['lsaquo', [8249]], ['lscr', [120001]], ['Lscr', [8466]], ['lsh', [8624]], ['Lsh', [8624]], ['lsim', [8818]], ['lsime', [10893]], ['lsimg', [10895]], ['lsqb', [91]], ['lsquo', [8216]], ['lsquor', [8218]], ['Lstrok', [321]], ['lstrok', [322]], ['ltcc', [10918]], ['ltcir', [10873]], ['lt', [60]], ['LT', [60]], ['Lt', [8810]], ['ltdot', [8918]], ['lthree', [8907]], ['ltimes', [8905]], ['ltlarr', [10614]], ['ltquest', [10875]], ['ltri', [9667]], ['ltrie', [8884]], ['ltrif', [9666]], ['ltrPar', [10646]], ['lurdshar', [10570]], ['luruhar', [10598]], ['lvertneqq', [8808, 65024]], ['lvnE', [8808, 65024]], ['macr', [175]], ['male', [9794]], ['malt', [10016]], ['maltese', [10016]], ['Map', [10501]], ['map', [8614]], ['mapsto', [8614]], ['mapstodown', [8615]], ['mapstoleft', [8612]], ['mapstoup', [8613]], ['marker', [9646]], ['mcomma', [10793]], ['Mcy', [1052]], ['mcy', [1084]], ['mdash', [8212]], ['mDDot', [8762]], ['measuredangle', [8737]], ['MediumSpace', [8287]], ['Mellintrf', [8499]], ['Mfr', [120080]], ['mfr', [120106]], ['mho', [8487]], ['micro', [181]], ['midast', [42]], ['midcir', [10992]], ['mid', [8739]], ['middot', [183]], ['minusb', [8863]], ['minus', [8722]], ['minusd', [8760]], ['minusdu', [10794]], ['MinusPlus', [8723]], ['mlcp', [10971]], ['mldr', [8230]], ['mnplus', [8723]], ['models', [8871]], ['Mopf', [120132]], ['mopf', [120158]], ['mp', [8723]], ['mscr', [120002]], ['Mscr', [8499]], ['mstpos', [8766]], ['Mu', [924]], ['mu', [956]], ['multimap', [8888]], ['mumap', [8888]], ['nabla', [8711]], ['Nacute', [323]], ['nacute', [324]], ['nang', [8736, 8402]], ['nap', [8777]], ['napE', [10864, 824]], ['napid', [8779, 824]], ['napos', [329]], ['napprox', [8777]], ['natural', [9838]], ['naturals', [8469]], ['natur', [9838]], ['nbsp', [160]], ['nbump', [8782, 824]], ['nbumpe', [8783, 824]], ['ncap', [10819]], ['Ncaron', [327]], ['ncaron', [328]], ['Ncedil', [325]], ['ncedil', [326]], ['ncong', [8775]], ['ncongdot', [10861, 824]], ['ncup', [10818]], ['Ncy', [1053]], ['ncy', [1085]], ['ndash', [8211]], ['nearhk', [10532]], ['nearr', [8599]], ['neArr', [8663]], ['nearrow', [8599]], ['ne', [8800]], ['nedot', [8784, 824]], ['NegativeMediumSpace', [8203]], ['NegativeThickSpace', [8203]], ['NegativeThinSpace', [8203]], ['NegativeVeryThinSpace', [8203]], ['nequiv', [8802]], ['nesear', [10536]], ['nesim', [8770, 824]], ['NestedGreaterGreater', [8811]], ['NestedLessLess', [8810]], ['nexist', [8708]], ['nexists', [8708]], ['Nfr', [120081]], ['nfr', [120107]], ['ngE', [8807, 824]], ['nge', [8817]], ['ngeq', [8817]], ['ngeqq', [8807, 824]], ['ngeqslant', [10878, 824]], ['nges', [10878, 824]], ['nGg', [8921, 824]], ['ngsim', [8821]], ['nGt', [8811, 8402]], ['ngt', [8815]], ['ngtr', [8815]], ['nGtv', [8811, 824]], ['nharr', [8622]], ['nhArr', [8654]], ['nhpar', [10994]], ['ni', [8715]], ['nis', [8956]], ['nisd', [8954]], ['niv', [8715]], ['NJcy', [1034]], ['njcy', [1114]], ['nlarr', [8602]], ['nlArr', [8653]], ['nldr', [8229]], ['nlE', [8806, 824]], ['nle', [8816]], ['nleftarrow', [8602]], ['nLeftarrow', [8653]], ['nleftrightarrow', [8622]], ['nLeftrightarrow', [8654]], ['nleq', [8816]], ['nleqq', [8806, 824]], ['nleqslant', [10877, 824]], ['nles', [10877, 824]], ['nless', [8814]], ['nLl', [8920, 824]], ['nlsim', [8820]], ['nLt', [8810, 8402]], ['nlt', [8814]], ['nltri', [8938]], ['nltrie', [8940]], ['nLtv', [8810, 824]], ['nmid', [8740]], ['NoBreak', [8288]], ['NonBreakingSpace', [160]], ['nopf', [120159]], ['Nopf', [8469]], ['Not', [10988]], ['not', [172]], ['NotCongruent', [8802]], ['NotCupCap', [8813]], ['NotDoubleVerticalBar', [8742]], ['NotElement', [8713]], ['NotEqual', [8800]], ['NotEqualTilde', [8770, 824]], ['NotExists', [8708]], ['NotGreater', [8815]], ['NotGreaterEqual', [8817]], ['NotGreaterFullEqual', [8807, 824]], ['NotGreaterGreater', [8811, 824]], ['NotGreaterLess', [8825]], ['NotGreaterSlantEqual', [10878, 824]], ['NotGreaterTilde', [8821]], ['NotHumpDownHump', [8782, 824]], ['NotHumpEqual', [8783, 824]], ['notin', [8713]], ['notindot', [8949, 824]], ['notinE', [8953, 824]], ['notinva', [8713]], ['notinvb', [8951]], ['notinvc', [8950]], ['NotLeftTriangleBar', [10703, 824]], ['NotLeftTriangle', [8938]], ['NotLeftTriangleEqual', [8940]], ['NotLess', [8814]], ['NotLessEqual', [8816]], ['NotLessGreater', [8824]], ['NotLessLess', [8810, 824]], ['NotLessSlantEqual', [10877, 824]], ['NotLessTilde', [8820]], ['NotNestedGreaterGreater', [10914, 824]], ['NotNestedLessLess', [10913, 824]], ['notni', [8716]], ['notniva', [8716]], ['notnivb', [8958]], ['notnivc', [8957]], ['NotPrecedes', [8832]], ['NotPrecedesEqual', [10927, 824]], ['NotPrecedesSlantEqual', [8928]], ['NotReverseElement', [8716]], ['NotRightTriangleBar', [10704, 824]], ['NotRightTriangle', [8939]], ['NotRightTriangleEqual', [8941]], ['NotSquareSubset', [8847, 824]], ['NotSquareSubsetEqual', [8930]], ['NotSquareSuperset', [8848, 824]], ['NotSquareSupersetEqual', [8931]], ['NotSubset', [8834, 8402]], ['NotSubsetEqual', [8840]], ['NotSucceeds', [8833]], ['NotSucceedsEqual', [10928, 824]], ['NotSucceedsSlantEqual', [8929]], ['NotSucceedsTilde', [8831, 824]], ['NotSuperset', [8835, 8402]], ['NotSupersetEqual', [8841]], ['NotTilde', [8769]], ['NotTildeEqual', [8772]], ['NotTildeFullEqual', [8775]], ['NotTildeTilde', [8777]], ['NotVerticalBar', [8740]], ['nparallel', [8742]], ['npar', [8742]], ['nparsl', [11005, 8421]], ['npart', [8706, 824]], ['npolint', [10772]], ['npr', [8832]], ['nprcue', [8928]], ['nprec', [8832]], ['npreceq', [10927, 824]], ['npre', [10927, 824]], ['nrarrc', [10547, 824]], ['nrarr', [8603]], ['nrArr', [8655]], ['nrarrw', [8605, 824]], ['nrightarrow', [8603]], ['nRightarrow', [8655]], ['nrtri', [8939]], ['nrtrie', [8941]], ['nsc', [8833]], ['nsccue', [8929]], ['nsce', [10928, 824]], ['Nscr', [119977]], ['nscr', [120003]], ['nshortmid', [8740]], ['nshortparallel', [8742]], ['nsim', [8769]], ['nsime', [8772]], ['nsimeq', [8772]], ['nsmid', [8740]], ['nspar', [8742]], ['nsqsube', [8930]], ['nsqsupe', [8931]], ['nsub', [8836]], ['nsubE', [10949, 824]], ['nsube', [8840]], ['nsubset', [8834, 8402]], ['nsubseteq', [8840]], ['nsubseteqq', [10949, 824]], ['nsucc', [8833]], ['nsucceq', [10928, 824]], ['nsup', [8837]], ['nsupE', [10950, 824]], ['nsupe', [8841]], ['nsupset', [8835, 8402]], ['nsupseteq', [8841]], ['nsupseteqq', [10950, 824]], ['ntgl', [8825]], ['Ntilde', [209]], ['ntilde', [241]], ['ntlg', [8824]], ['ntriangleleft', [8938]], ['ntrianglelefteq', [8940]], ['ntriangleright', [8939]], ['ntrianglerighteq', [8941]], ['Nu', [925]], ['nu', [957]], ['num', [35]], ['numero', [8470]], ['numsp', [8199]], ['nvap', [8781, 8402]], ['nvdash', [8876]], ['nvDash', [8877]], ['nVdash', [8878]], ['nVDash', [8879]], ['nvge', [8805, 8402]], ['nvgt', [62, 8402]], ['nvHarr', [10500]], ['nvinfin', [10718]], ['nvlArr', [10498]], ['nvle', [8804, 8402]], ['nvlt', [60, 8402]], ['nvltrie', [8884, 8402]], ['nvrArr', [10499]], ['nvrtrie', [8885, 8402]], ['nvsim', [8764, 8402]], ['nwarhk', [10531]], ['nwarr', [8598]], ['nwArr', [8662]], ['nwarrow', [8598]], ['nwnear', [10535]], ['Oacute', [211]], ['oacute', [243]], ['oast', [8859]], ['Ocirc', [212]], ['ocirc', [244]], ['ocir', [8858]], ['Ocy', [1054]], ['ocy', [1086]], ['odash', [8861]], ['Odblac', [336]], ['odblac', [337]], ['odiv', [10808]], ['odot', [8857]], ['odsold', [10684]], ['OElig', [338]], ['oelig', [339]], ['ofcir', [10687]], ['Ofr', [120082]], ['ofr', [120108]], ['ogon', [731]], ['Ograve', [210]], ['ograve', [242]], ['ogt', [10689]], ['ohbar', [10677]], ['ohm', [937]], ['oint', [8750]], ['olarr', [8634]], ['olcir', [10686]], ['olcross', [10683]], ['oline', [8254]], ['olt', [10688]], ['Omacr', [332]], ['omacr', [333]], ['Omega', [937]], ['omega', [969]], ['Omicron', [927]], ['omicron', [959]], ['omid', [10678]], ['ominus', [8854]], ['Oopf', [120134]], ['oopf', [120160]], ['opar', [10679]], ['OpenCurlyDoubleQuote', [8220]], ['OpenCurlyQuote', [8216]], ['operp', [10681]], ['oplus', [8853]], ['orarr', [8635]], ['Or', [10836]], ['or', [8744]], ['ord', [10845]], ['order', [8500]], ['orderof', [8500]], ['ordf', [170]], ['ordm', [186]], ['origof', [8886]], ['oror', [10838]], ['orslope', [10839]], ['orv', [10843]], ['oS', [9416]], ['Oscr', [119978]], ['oscr', [8500]], ['Oslash', [216]], ['oslash', [248]], ['osol', [8856]], ['Otilde', [213]], ['otilde', [245]], ['otimesas', [10806]], ['Otimes', [10807]], ['otimes', [8855]], ['Ouml', [214]], ['ouml', [246]], ['ovbar', [9021]], ['OverBar', [8254]], ['OverBrace', [9182]], ['OverBracket', [9140]], ['OverParenthesis', [9180]], ['para', [182]], ['parallel', [8741]], ['par', [8741]], ['parsim', [10995]], ['parsl', [11005]], ['part', [8706]], ['PartialD', [8706]], ['Pcy', [1055]], ['pcy', [1087]], ['percnt', [37]], ['period', [46]], ['permil', [8240]], ['perp', [8869]], ['pertenk', [8241]], ['Pfr', [120083]], ['pfr', [120109]], ['Phi', [934]], ['phi', [966]], ['phiv', [981]], ['phmmat', [8499]], ['phone', [9742]], ['Pi', [928]], ['pi', [960]], ['pitchfork', [8916]], ['piv', [982]], ['planck', [8463]], ['planckh', [8462]], ['plankv', [8463]], ['plusacir', [10787]], ['plusb', [8862]], ['pluscir', [10786]], ['plus', [43]], ['plusdo', [8724]], ['plusdu', [10789]], ['pluse', [10866]], ['PlusMinus', [177]], ['plusmn', [177]], ['plussim', [10790]], ['plustwo', [10791]], ['pm', [177]], ['Poincareplane', [8460]], ['pointint', [10773]], ['popf', [120161]], ['Popf', [8473]], ['pound', [163]], ['prap', [10935]], ['Pr', [10939]], ['pr', [8826]], ['prcue', [8828]], ['precapprox', [10935]], ['prec', [8826]], ['preccurlyeq', [8828]], ['Precedes', [8826]], ['PrecedesEqual', [10927]], ['PrecedesSlantEqual', [8828]], ['PrecedesTilde', [8830]], ['preceq', [10927]], ['precnapprox', [10937]], ['precneqq', [10933]], ['precnsim', [8936]], ['pre', [10927]], ['prE', [10931]], ['precsim', [8830]], ['prime', [8242]], ['Prime', [8243]], ['primes', [8473]], ['prnap', [10937]], ['prnE', [10933]], ['prnsim', [8936]], ['prod', [8719]], ['Product', [8719]], ['profalar', [9006]], ['profline', [8978]], ['profsurf', [8979]], ['prop', [8733]], ['Proportional', [8733]], ['Proportion', [8759]], ['propto', [8733]], ['prsim', [8830]], ['prurel', [8880]], ['Pscr', [119979]], ['pscr', [120005]], ['Psi', [936]], ['psi', [968]], ['puncsp', [8200]], ['Qfr', [120084]], ['qfr', [120110]], ['qint', [10764]], ['qopf', [120162]], ['Qopf', [8474]], ['qprime', [8279]], ['Qscr', [119980]], ['qscr', [120006]], ['quaternions', [8461]], ['quatint', [10774]], ['quest', [63]], ['questeq', [8799]], ['quot', [34]], ['QUOT', [34]], ['rAarr', [8667]], ['race', [8765, 817]], ['Racute', [340]], ['racute', [341]], ['radic', [8730]], ['raemptyv', [10675]], ['rang', [10217]], ['Rang', [10219]], ['rangd', [10642]], ['range', [10661]], ['rangle', [10217]], ['raquo', [187]], ['rarrap', [10613]], ['rarrb', [8677]], ['rarrbfs', [10528]], ['rarrc', [10547]], ['rarr', [8594]], ['Rarr', [8608]], ['rArr', [8658]], ['rarrfs', [10526]], ['rarrhk', [8618]], ['rarrlp', [8620]], ['rarrpl', [10565]], ['rarrsim', [10612]], ['Rarrtl', [10518]], ['rarrtl', [8611]], ['rarrw', [8605]], ['ratail', [10522]], ['rAtail', [10524]], ['ratio', [8758]], ['rationals', [8474]], ['rbarr', [10509]], ['rBarr', [10511]], ['RBarr', [10512]], ['rbbrk', [10099]], ['rbrace', [125]], ['rbrack', [93]], ['rbrke', [10636]], ['rbrksld', [10638]], ['rbrkslu', [10640]], ['Rcaron', [344]], ['rcaron', [345]], ['Rcedil', [342]], ['rcedil', [343]], ['rceil', [8969]], ['rcub', [125]], ['Rcy', [1056]], ['rcy', [1088]], ['rdca', [10551]], ['rdldhar', [10601]], ['rdquo', [8221]], ['rdquor', [8221]], ['CloseCurlyDoubleQuote', [8221]], ['rdsh', [8627]], ['real', [8476]], ['realine', [8475]], ['realpart', [8476]], ['reals', [8477]], ['Re', [8476]], ['rect', [9645]], ['reg', [174]], ['REG', [174]], ['ReverseElement', [8715]], ['ReverseEquilibrium', [8651]], ['ReverseUpEquilibrium', [10607]], ['rfisht', [10621]], ['rfloor', [8971]], ['rfr', [120111]], ['Rfr', [8476]], ['rHar', [10596]], ['rhard', [8641]], ['rharu', [8640]], ['rharul', [10604]], ['Rho', [929]], ['rho', [961]], ['rhov', [1009]], ['RightAngleBracket', [10217]], ['RightArrowBar', [8677]], ['rightarrow', [8594]], ['RightArrow', [8594]], ['Rightarrow', [8658]], ['RightArrowLeftArrow', [8644]], ['rightarrowtail', [8611]], ['RightCeiling', [8969]], ['RightDoubleBracket', [10215]], ['RightDownTeeVector', [10589]], ['RightDownVectorBar', [10581]], ['RightDownVector', [8642]], ['RightFloor', [8971]], ['rightharpoondown', [8641]], ['rightharpoonup', [8640]], ['rightleftarrows', [8644]], ['rightleftharpoons', [8652]], ['rightrightarrows', [8649]], ['rightsquigarrow', [8605]], ['RightTeeArrow', [8614]], ['RightTee', [8866]], ['RightTeeVector', [10587]], ['rightthreetimes', [8908]], ['RightTriangleBar', [10704]], ['RightTriangle', [8883]], ['RightTriangleEqual', [8885]], ['RightUpDownVector', [10575]], ['RightUpTeeVector', [10588]], ['RightUpVectorBar', [10580]], ['RightUpVector', [8638]], ['RightVectorBar', [10579]], ['RightVector', [8640]], ['ring', [730]], ['risingdotseq', [8787]], ['rlarr', [8644]], ['rlhar', [8652]], ['rlm', [8207]], ['rmoustache', [9137]], ['rmoust', [9137]], ['rnmid', [10990]], ['roang', [10221]], ['roarr', [8702]], ['robrk', [10215]], ['ropar', [10630]], ['ropf', [120163]], ['Ropf', [8477]], ['roplus', [10798]], ['rotimes', [10805]], ['RoundImplies', [10608]], ['rpar', [41]], ['rpargt', [10644]], ['rppolint', [10770]], ['rrarr', [8649]], ['Rrightarrow', [8667]], ['rsaquo', [8250]], ['rscr', [120007]], ['Rscr', [8475]], ['rsh', [8625]], ['Rsh', [8625]], ['rsqb', [93]], ['rsquo', [8217]], ['rsquor', [8217]], ['CloseCurlyQuote', [8217]], ['rthree', [8908]], ['rtimes', [8906]], ['rtri', [9657]], ['rtrie', [8885]], ['rtrif', [9656]], ['rtriltri', [10702]], ['RuleDelayed', [10740]], ['ruluhar', [10600]], ['rx', [8478]], ['Sacute', [346]], ['sacute', [347]], ['sbquo', [8218]], ['scap', [10936]], ['Scaron', [352]], ['scaron', [353]], ['Sc', [10940]], ['sc', [8827]], ['sccue', [8829]], ['sce', [10928]], ['scE', [10932]], ['Scedil', [350]], ['scedil', [351]], ['Scirc', [348]], ['scirc', [349]], ['scnap', [10938]], ['scnE', [10934]], ['scnsim', [8937]], ['scpolint', [10771]], ['scsim', [8831]], ['Scy', [1057]], ['scy', [1089]], ['sdotb', [8865]], ['sdot', [8901]], ['sdote', [10854]], ['searhk', [10533]], ['searr', [8600]], ['seArr', [8664]], ['searrow', [8600]], ['sect', [167]], ['semi', [59]], ['seswar', [10537]], ['setminus', [8726]], ['setmn', [8726]], ['sext', [10038]], ['Sfr', [120086]], ['sfr', [120112]], ['sfrown', [8994]], ['sharp', [9839]], ['SHCHcy', [1065]], ['shchcy', [1097]], ['SHcy', [1064]], ['shcy', [1096]], ['ShortDownArrow', [8595]], ['ShortLeftArrow', [8592]], ['shortmid', [8739]], ['shortparallel', [8741]], ['ShortRightArrow', [8594]], ['ShortUpArrow', [8593]], ['shy', [173]], ['Sigma', [931]], ['sigma', [963]], ['sigmaf', [962]], ['sigmav', [962]], ['sim', [8764]], ['simdot', [10858]], ['sime', [8771]], ['simeq', [8771]], ['simg', [10910]], ['simgE', [10912]], ['siml', [10909]], ['simlE', [10911]], ['simne', [8774]], ['simplus', [10788]], ['simrarr', [10610]], ['slarr', [8592]], ['SmallCircle', [8728]], ['smallsetminus', [8726]], ['smashp', [10803]], ['smeparsl', [10724]], ['smid', [8739]], ['smile', [8995]], ['smt', [10922]], ['smte', [10924]], ['smtes', [10924, 65024]], ['SOFTcy', [1068]], ['softcy', [1100]], ['solbar', [9023]], ['solb', [10692]], ['sol', [47]], ['Sopf', [120138]], ['sopf', [120164]], ['spades', [9824]], ['spadesuit', [9824]], ['spar', [8741]], ['sqcap', [8851]], ['sqcaps', [8851, 65024]], ['sqcup', [8852]], ['sqcups', [8852, 65024]], ['Sqrt', [8730]], ['sqsub', [8847]], ['sqsube', [8849]], ['sqsubset', [8847]], ['sqsubseteq', [8849]], ['sqsup', [8848]], ['sqsupe', [8850]], ['sqsupset', [8848]], ['sqsupseteq', [8850]], ['square', [9633]], ['Square', [9633]], ['SquareIntersection', [8851]], ['SquareSubset', [8847]], ['SquareSubsetEqual', [8849]], ['SquareSuperset', [8848]], ['SquareSupersetEqual', [8850]], ['SquareUnion', [8852]], ['squarf', [9642]], ['squ', [9633]], ['squf', [9642]], ['srarr', [8594]], ['Sscr', [119982]], ['sscr', [120008]], ['ssetmn', [8726]], ['ssmile', [8995]], ['sstarf', [8902]], ['Star', [8902]], ['star', [9734]], ['starf', [9733]], ['straightepsilon', [1013]], ['straightphi', [981]], ['strns', [175]], ['sub', [8834]], ['Sub', [8912]], ['subdot', [10941]], ['subE', [10949]], ['sube', [8838]], ['subedot', [10947]], ['submult', [10945]], ['subnE', [10955]], ['subne', [8842]], ['subplus', [10943]], ['subrarr', [10617]], ['subset', [8834]], ['Subset', [8912]], ['subseteq', [8838]], ['subseteqq', [10949]], ['SubsetEqual', [8838]], ['subsetneq', [8842]], ['subsetneqq', [10955]], ['subsim', [10951]], ['subsub', [10965]], ['subsup', [10963]], ['succapprox', [10936]], ['succ', [8827]], ['succcurlyeq', [8829]], ['Succeeds', [8827]], ['SucceedsEqual', [10928]], ['SucceedsSlantEqual', [8829]], ['SucceedsTilde', [8831]], ['succeq', [10928]], ['succnapprox', [10938]], ['succneqq', [10934]], ['succnsim', [8937]], ['succsim', [8831]], ['SuchThat', [8715]], ['sum', [8721]], ['Sum', [8721]], ['sung', [9834]], ['sup1', [185]], ['sup2', [178]], ['sup3', [179]], ['sup', [8835]], ['Sup', [8913]], ['supdot', [10942]], ['supdsub', [10968]], ['supE', [10950]], ['supe', [8839]], ['supedot', [10948]], ['Superset', [8835]], ['SupersetEqual', [8839]], ['suphsol', [10185]], ['suphsub', [10967]], ['suplarr', [10619]], ['supmult', [10946]], ['supnE', [10956]], ['supne', [8843]], ['supplus', [10944]], ['supset', [8835]], ['Supset', [8913]], ['supseteq', [8839]], ['supseteqq', [10950]], ['supsetneq', [8843]], ['supsetneqq', [10956]], ['supsim', [10952]], ['supsub', [10964]], ['supsup', [10966]], ['swarhk', [10534]], ['swarr', [8601]], ['swArr', [8665]], ['swarrow', [8601]], ['swnwar', [10538]], ['szlig', [223]], ['Tab', [9]], ['target', [8982]], ['Tau', [932]], ['tau', [964]], ['tbrk', [9140]], ['Tcaron', [356]], ['tcaron', [357]], ['Tcedil', [354]], ['tcedil', [355]], ['Tcy', [1058]], ['tcy', [1090]], ['tdot', [8411]], ['telrec', [8981]], ['Tfr', [120087]], ['tfr', [120113]], ['there4', [8756]], ['therefore', [8756]], ['Therefore', [8756]], ['Theta', [920]], ['theta', [952]], ['thetasym', [977]], ['thetav', [977]], ['thickapprox', [8776]], ['thicksim', [8764]], ['ThickSpace', [8287, 8202]], ['ThinSpace', [8201]], ['thinsp', [8201]], ['thkap', [8776]], ['thksim', [8764]], ['THORN', [222]], ['thorn', [254]], ['tilde', [732]], ['Tilde', [8764]], ['TildeEqual', [8771]], ['TildeFullEqual', [8773]], ['TildeTilde', [8776]], ['timesbar', [10801]], ['timesb', [8864]], ['times', [215]], ['timesd', [10800]], ['tint', [8749]], ['toea', [10536]], ['topbot', [9014]], ['topcir', [10993]], ['top', [8868]], ['Topf', [120139]], ['topf', [120165]], ['topfork', [10970]], ['tosa', [10537]], ['tprime', [8244]], ['trade', [8482]], ['TRADE', [8482]], ['triangle', [9653]], ['triangledown', [9663]], ['triangleleft', [9667]], ['trianglelefteq', [8884]], ['triangleq', [8796]], ['triangleright', [9657]], ['trianglerighteq', [8885]], ['tridot', [9708]], ['trie', [8796]], ['triminus', [10810]], ['TripleDot', [8411]], ['triplus', [10809]], ['trisb', [10701]], ['tritime', [10811]], ['trpezium', [9186]], ['Tscr', [119983]], ['tscr', [120009]], ['TScy', [1062]], ['tscy', [1094]], ['TSHcy', [1035]], ['tshcy', [1115]], ['Tstrok', [358]], ['tstrok', [359]], ['twixt', [8812]], ['twoheadleftarrow', [8606]], ['twoheadrightarrow', [8608]], ['Uacute', [218]], ['uacute', [250]], ['uarr', [8593]], ['Uarr', [8607]], ['uArr', [8657]], ['Uarrocir', [10569]], ['Ubrcy', [1038]], ['ubrcy', [1118]], ['Ubreve', [364]], ['ubreve', [365]], ['Ucirc', [219]], ['ucirc', [251]], ['Ucy', [1059]], ['ucy', [1091]], ['udarr', [8645]], ['Udblac', [368]], ['udblac', [369]], ['udhar', [10606]], ['ufisht', [10622]], ['Ufr', [120088]], ['ufr', [120114]], ['Ugrave', [217]], ['ugrave', [249]], ['uHar', [10595]], ['uharl', [8639]], ['uharr', [8638]], ['uhblk', [9600]], ['ulcorn', [8988]], ['ulcorner', [8988]], ['ulcrop', [8975]], ['ultri', [9720]], ['Umacr', [362]], ['umacr', [363]], ['uml', [168]], ['UnderBar', [95]], ['UnderBrace', [9183]], ['UnderBracket', [9141]], ['UnderParenthesis', [9181]], ['Union', [8899]], ['UnionPlus', [8846]], ['Uogon', [370]], ['uogon', [371]], ['Uopf', [120140]], ['uopf', [120166]], ['UpArrowBar', [10514]], ['uparrow', [8593]], ['UpArrow', [8593]], ['Uparrow', [8657]], ['UpArrowDownArrow', [8645]], ['updownarrow', [8597]], ['UpDownArrow', [8597]], ['Updownarrow', [8661]], ['UpEquilibrium', [10606]], ['upharpoonleft', [8639]], ['upharpoonright', [8638]], ['uplus', [8846]], ['UpperLeftArrow', [8598]], ['UpperRightArrow', [8599]], ['upsi', [965]], ['Upsi', [978]], ['upsih', [978]], ['Upsilon', [933]], ['upsilon', [965]], ['UpTeeArrow', [8613]], ['UpTee', [8869]], ['upuparrows', [8648]], ['urcorn', [8989]], ['urcorner', [8989]], ['urcrop', [8974]], ['Uring', [366]], ['uring', [367]], ['urtri', [9721]], ['Uscr', [119984]], ['uscr', [120010]], ['utdot', [8944]], ['Utilde', [360]], ['utilde', [361]], ['utri', [9653]], ['utrif', [9652]], ['uuarr', [8648]], ['Uuml', [220]], ['uuml', [252]], ['uwangle', [10663]], ['vangrt', [10652]], ['varepsilon', [1013]], ['varkappa', [1008]], ['varnothing', [8709]], ['varphi', [981]], ['varpi', [982]], ['varpropto', [8733]], ['varr', [8597]], ['vArr', [8661]], ['varrho', [1009]], ['varsigma', [962]], ['varsubsetneq', [8842, 65024]], ['varsubsetneqq', [10955, 65024]], ['varsupsetneq', [8843, 65024]], ['varsupsetneqq', [10956, 65024]], ['vartheta', [977]], ['vartriangleleft', [8882]], ['vartriangleright', [8883]], ['vBar', [10984]], ['Vbar', [10987]], ['vBarv', [10985]], ['Vcy', [1042]], ['vcy', [1074]], ['vdash', [8866]], ['vDash', [8872]], ['Vdash', [8873]], ['VDash', [8875]], ['Vdashl', [10982]], ['veebar', [8891]], ['vee', [8744]], ['Vee', [8897]], ['veeeq', [8794]], ['vellip', [8942]], ['verbar', [124]], ['Verbar', [8214]], ['vert', [124]], ['Vert', [8214]], ['VerticalBar', [8739]], ['VerticalLine', [124]], ['VerticalSeparator', [10072]], ['VerticalTilde', [8768]], ['VeryThinSpace', [8202]], ['Vfr', [120089]], ['vfr', [120115]], ['vltri', [8882]], ['vnsub', [8834, 8402]], ['vnsup', [8835, 8402]], ['Vopf', [120141]], ['vopf', [120167]], ['vprop', [8733]], ['vrtri', [8883]], ['Vscr', [119985]], ['vscr', [120011]], ['vsubnE', [10955, 65024]], ['vsubne', [8842, 65024]], ['vsupnE', [10956, 65024]], ['vsupne', [8843, 65024]], ['Vvdash', [8874]], ['vzigzag', [10650]], ['Wcirc', [372]], ['wcirc', [373]], ['wedbar', [10847]], ['wedge', [8743]], ['Wedge', [8896]], ['wedgeq', [8793]], ['weierp', [8472]], ['Wfr', [120090]], ['wfr', [120116]], ['Wopf', [120142]], ['wopf', [120168]], ['wp', [8472]], ['wr', [8768]], ['wreath', [8768]], ['Wscr', [119986]], ['wscr', [120012]], ['xcap', [8898]], ['xcirc', [9711]], ['xcup', [8899]], ['xdtri', [9661]], ['Xfr', [120091]], ['xfr', [120117]], ['xharr', [10231]], ['xhArr', [10234]], ['Xi', [926]], ['xi', [958]], ['xlarr', [10229]], ['xlArr', [10232]], ['xmap', [10236]], ['xnis', [8955]], ['xodot', [10752]], ['Xopf', [120143]], ['xopf', [120169]], ['xoplus', [10753]], ['xotime', [10754]], ['xrarr', [10230]], ['xrArr', [10233]], ['Xscr', [119987]], ['xscr', [120013]], ['xsqcup', [10758]], ['xuplus', [10756]], ['xutri', [9651]], ['xvee', [8897]], ['xwedge', [8896]], ['Yacute', [221]], ['yacute', [253]], ['YAcy', [1071]], ['yacy', [1103]], ['Ycirc', [374]], ['ycirc', [375]], ['Ycy', [1067]], ['ycy', [1099]], ['yen', [165]], ['Yfr', [120092]], ['yfr', [120118]], ['YIcy', [1031]], ['yicy', [1111]], ['Yopf', [120144]], ['yopf', [120170]], ['Yscr', [119988]], ['yscr', [120014]], ['YUcy', [1070]], ['yucy', [1102]], ['yuml', [255]], ['Yuml', [376]], ['Zacute', [377]], ['zacute', [378]], ['Zcaron', [381]], ['zcaron', [382]], ['Zcy', [1047]], ['zcy', [1079]], ['Zdot', [379]], ['zdot', [380]], ['zeetrf', [8488]], ['ZeroWidthSpace', [8203]], ['Zeta', [918]], ['zeta', [950]], ['zfr', [120119]], ['Zfr', [8488]], ['ZHcy', [1046]], ['zhcy', [1078]], ['zigrarr', [8669]], ['zopf', [120171]], ['Zopf', [8484]], ['Zscr', [119989]], ['zscr', [120015]], ['zwj', [8205]], ['zwnj', [8204]]];
var DECODE_ONLY_ENTITIES = [['NewLine', [10]]];
var alphaIndex = {};
var charIndex = {};
createIndexes(alphaIndex, charIndex);
var Html5Entities = /** @class */ (function () {
    function Html5Entities() {
    }
    Html5Entities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&(#?[\w\d]+);?/g, function (s, entity) {
            var chr;
            if (entity.charAt(0) === "#") {
                var code = entity.charAt(1) === 'x' ?
                    parseInt(entity.substr(2).toLowerCase(), 16) :
                    parseInt(entity.substr(1));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        chr = String.fromCharCode(code);
                    }
                    else {
                        chr = surrogate_pairs_1.fromCodePoint(code);
                    }
                }
            }
            else {
                chr = alphaIndex[entity];
            }
            return chr || s;
        });
    };
    Html5Entities.decode = function (str) {
        return new Html5Entities().decode(str);
    };
    Html5Entities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var charInfo = charIndex[str.charCodeAt(i)];
            if (charInfo) {
                var alpha = charInfo[str.charCodeAt(i + 1)];
                if (alpha) {
                    i++;
                }
                else {
                    alpha = charInfo[''];
                }
                if (alpha) {
                    result += "&" + alpha + ";";
                    i++;
                    continue;
                }
            }
            result += str.charAt(i);
            i++;
        }
        return result;
    };
    Html5Entities.encode = function (str) {
        return new Html5Entities().encode(str);
    };
    Html5Entities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            var charInfo = charIndex[c];
            if (charInfo) {
                var alpha = charInfo[str.charCodeAt(i + 1)];
                if (alpha) {
                    i++;
                }
                else {
                    alpha = charInfo[''];
                }
                if (alpha) {
                    result += "&" + alpha + ";";
                    i++;
                    continue;
                }
            }
            if (c < 32 || c > 126) {
                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + c + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    Html5Entities.encodeNonUTF = function (str) {
        return new Html5Entities().encodeNonUTF(str);
    };
    Html5Entities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i += 2;
            }
            else {
                result += '&#' + c + ';';
                i++;
            }
        }
        return result;
    };
    Html5Entities.encodeNonASCII = function (str) {
        return new Html5Entities().encodeNonASCII(str);
    };
    return Html5Entities;
}());
exports.Html5Entities = Html5Entities;
function createIndexes(alphaIndex, charIndex) {
    var i = ENTITIES.length;
    while (i--) {
        var _a = ENTITIES[i], alpha = _a[0], _b = _a[1], chr = _b[0], chr2 = _b[1];
        var addChar = (chr < 32 || chr > 126) || chr === 62 || chr === 60 || chr === 38 || chr === 34 || chr === 39;
        var charInfo = void 0;
        if (addChar) {
            charInfo = charIndex[chr] = charIndex[chr] || {};
        }
        if (chr2) {
            alphaIndex[alpha] = String.fromCharCode(chr) + String.fromCharCode(chr2);
            addChar && (charInfo[chr2] = alpha);
        }
        else {
            alphaIndex[alpha] = String.fromCharCode(chr);
            addChar && (charInfo[''] = alpha);
        }
    }
    i = DECODE_ONLY_ENTITIES.length;
    while (i--) {
        var _c = DECODE_ONLY_ENTITIES[i], alpha = _c[0], _d = _c[1], chr = _d[0], chr2 = _d[1];
        alphaIndex[alpha] = String.fromCharCode(chr) + (chr2 ? String.fromCharCode(chr2) : '');
    }
}


/***/ }),

/***/ "./node_modules/html-entities/lib/index.js":
/*!*************************************************!*\
  !*** ./node_modules/html-entities/lib/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var xml_entities_1 = __webpack_require__(/*! ./xml-entities */ "./node_modules/html-entities/lib/xml-entities.js");
exports.XmlEntities = xml_entities_1.XmlEntities;
var html4_entities_1 = __webpack_require__(/*! ./html4-entities */ "./node_modules/html-entities/lib/html4-entities.js");
exports.Html4Entities = html4_entities_1.Html4Entities;
var html5_entities_1 = __webpack_require__(/*! ./html5-entities */ "./node_modules/html-entities/lib/html5-entities.js");
exports.Html5Entities = html5_entities_1.Html5Entities;
exports.AllHtmlEntities = html5_entities_1.Html5Entities;


/***/ }),

/***/ "./node_modules/html-entities/lib/surrogate-pairs.js":
/*!***********************************************************!*\
  !*** ./node_modules/html-entities/lib/surrogate-pairs.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.fromCodePoint = String.fromCodePoint || function (astralCodePoint) {
    return String.fromCharCode(Math.floor((astralCodePoint - 0x10000) / 0x400) + 0xD800, (astralCodePoint - 0x10000) % 0x400 + 0xDC00);
};
exports.getCodePoint = String.prototype.codePointAt ?
    function (input, position) {
        return input.codePointAt(position);
    } :
    function (input, position) {
        return (input.charCodeAt(position) - 0xD800) * 0x400
            + input.charCodeAt(position + 1) - 0xDC00 + 0x10000;
    };
exports.highSurrogateFrom = 0xD800;
exports.highSurrogateTo = 0xDBFF;


/***/ }),

/***/ "./node_modules/html-entities/lib/xml-entities.js":
/*!********************************************************!*\
  !*** ./node_modules/html-entities/lib/xml-entities.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var surrogate_pairs_1 = __webpack_require__(/*! ./surrogate-pairs */ "./node_modules/html-entities/lib/surrogate-pairs.js");
var ALPHA_INDEX = {
    '&lt': '<',
    '&gt': '>',
    '&quot': '"',
    '&apos': '\'',
    '&amp': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&apos;': '\'',
    '&amp;': '&'
};
var CHAR_INDEX = {
    60: 'lt',
    62: 'gt',
    34: 'quot',
    39: 'apos',
    38: 'amp'
};
var CHAR_S_INDEX = {
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    '\'': '&apos;',
    '&': '&amp;'
};
var XmlEntities = /** @class */ (function () {
    function XmlEntities() {
    }
    XmlEntities.prototype.encode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/[<>"'&]/g, function (s) {
            return CHAR_S_INDEX[s];
        });
    };
    XmlEntities.encode = function (str) {
        return new XmlEntities().encode(str);
    };
    XmlEntities.prototype.decode = function (str) {
        if (!str || !str.length) {
            return '';
        }
        return str.replace(/&#?[0-9a-zA-Z]+;?/g, function (s) {
            if (s.charAt(1) === '#') {
                var code = s.charAt(2).toLowerCase() === 'x' ?
                    parseInt(s.substr(3), 16) :
                    parseInt(s.substr(2));
                if (!isNaN(code) || code >= -32768) {
                    if (code <= 65535) {
                        return String.fromCharCode(code);
                    }
                    else {
                        return surrogate_pairs_1.fromCodePoint(code);
                    }
                }
                return '';
            }
            return ALPHA_INDEX[s] || s;
        });
    };
    XmlEntities.decode = function (str) {
        return new XmlEntities().decode(str);
    };
    XmlEntities.prototype.encodeNonUTF = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            var alpha = CHAR_INDEX[c];
            if (alpha) {
                result += "&" + alpha + ";";
                i++;
                continue;
            }
            if (c < 32 || c > 126) {
                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                    i++;
                }
                else {
                    result += '&#' + c + ';';
                }
            }
            else {
                result += str.charAt(i);
            }
            i++;
        }
        return result;
    };
    XmlEntities.encodeNonUTF = function (str) {
        return new XmlEntities().encodeNonUTF(str);
    };
    XmlEntities.prototype.encodeNonASCII = function (str) {
        if (!str || !str.length) {
            return '';
        }
        var strLength = str.length;
        var result = '';
        var i = 0;
        while (i < strLength) {
            var c = str.charCodeAt(i);
            if (c <= 255) {
                result += str[i++];
                continue;
            }
            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {
                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';
                i++;
            }
            else {
                result += '&#' + c + ';';
            }
            i++;
        }
        return result;
    };
    XmlEntities.encodeNonASCII = function (str) {
        return new XmlEntities().encodeNonASCII(str);
    };
    return XmlEntities;
}());
exports.XmlEntities = XmlEntities;


/***/ }),

/***/ "./node_modules/loglevel/lib/loglevel.js":
/*!***********************************************!*\
  !*** ./node_modules/loglevel/lib/loglevel.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
* loglevel - https://github.com/pimterry/loglevel
*
* Copyright (c) 2013 Tim Perry
* Licensed under the MIT license.
*/
(function (root, definition) {
    "use strict";
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {}
}(this, function () {
    "use strict";

    // Slightly dubious tricks to cut down minimized file size
    var noop = function() {};
    var undefinedType = "undefined";
    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (
        /Trident\/|MSIE /.test(window.navigator.userAgent)
    );

    var logMethods = [
        "trace",
        "debug",
        "info",
        "warn",
        "error"
    ];

    // Cross-browser bind equivalent that works at least back to IE6
    function bindMethod(obj, methodName) {
        var method = obj[methodName];
        if (typeof method.bind === 'function') {
            return method.bind(obj);
        } else {
            try {
                return Function.prototype.bind.call(method, obj);
            } catch (e) {
                // Missing bind shim or IE8 + Modernizr, fallback to wrapping
                return function() {
                    return Function.prototype.apply.apply(method, [obj, arguments]);
                };
            }
        }
    }

    // Trace() doesn't print the message in IE, so for that case we need to wrap it
    function traceForIE() {
        if (console.log) {
            if (console.log.apply) {
                console.log.apply(console, arguments);
            } else {
                // In old IE, native console methods themselves don't have apply().
                Function.prototype.apply.apply(console.log, [console, arguments]);
            }
        }
        if (console.trace) console.trace();
    }

    // Build the best logging method possible for this env
    // Wherever possible we want to bind, not wrap, to preserve stack traces
    function realMethod(methodName) {
        if (methodName === 'debug') {
            methodName = 'log';
        }

        if (typeof console === undefinedType) {
            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives
        } else if (methodName === 'trace' && isIE) {
            return traceForIE;
        } else if (console[methodName] !== undefined) {
            return bindMethod(console, methodName);
        } else if (console.log !== undefined) {
            return bindMethod(console, 'log');
        } else {
            return noop;
        }
    }

    // These private functions always need `this` to be set properly

    function replaceLoggingMethods(level, loggerName) {
        /*jshint validthis:true */
        for (var i = 0; i < logMethods.length; i++) {
            var methodName = logMethods[i];
            this[methodName] = (i < level) ?
                noop :
                this.methodFactory(methodName, level, loggerName);
        }

        // Define log.log as an alias for log.debug
        this.log = this.debug;
    }

    // In old IE versions, the console isn't present until you first open it.
    // We build realMethod() replacements here that regenerate logging methods
    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {
        return function () {
            if (typeof console !== undefinedType) {
                replaceLoggingMethods.call(this, level, loggerName);
                this[methodName].apply(this, arguments);
            }
        };
    }

    // By default, we use closely bound real methods wherever possible, and
    // otherwise we wait for a console to appear, and then try again.
    function defaultMethodFactory(methodName, level, loggerName) {
        /*jshint validthis:true */
        return realMethod(methodName) ||
               enableLoggingWhenConsoleArrives.apply(this, arguments);
    }

    function Logger(name, defaultLevel, factory) {
      var self = this;
      var currentLevel;

      var storageKey = "loglevel";
      if (typeof name === "string") {
        storageKey += ":" + name;
      } else if (typeof name === "symbol") {
        storageKey = undefined;
      }

      function persistLevelIfPossible(levelNum) {
          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();

          if (typeof window === undefinedType || !storageKey) return;

          // Use localStorage if available
          try {
              window.localStorage[storageKey] = levelName;
              return;
          } catch (ignore) {}

          // Use session cookie as fallback
          try {
              window.document.cookie =
                encodeURIComponent(storageKey) + "=" + levelName + ";";
          } catch (ignore) {}
      }

      function getPersistedLevel() {
          var storedLevel;

          if (typeof window === undefinedType || !storageKey) return;

          try {
              storedLevel = window.localStorage[storageKey];
          } catch (ignore) {}

          // Fallback to cookies if local storage gives us nothing
          if (typeof storedLevel === undefinedType) {
              try {
                  var cookie = window.document.cookie;
                  var location = cookie.indexOf(
                      encodeURIComponent(storageKey) + "=");
                  if (location !== -1) {
                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];
                  }
              } catch (ignore) {}
          }

          // If the stored level is not valid, treat it as if nothing was stored.
          if (self.levels[storedLevel] === undefined) {
              storedLevel = undefined;
          }

          return storedLevel;
      }

      /*
       *
       * Public logger API - see https://github.com/pimterry/loglevel for details
       *
       */

      self.name = name;

      self.levels = { "TRACE": 0, "DEBUG": 1, "INFO": 2, "WARN": 3,
          "ERROR": 4, "SILENT": 5};

      self.methodFactory = factory || defaultMethodFactory;

      self.getLevel = function () {
          return currentLevel;
      };

      self.setLevel = function (level, persist) {
          if (typeof level === "string" && self.levels[level.toUpperCase()] !== undefined) {
              level = self.levels[level.toUpperCase()];
          }
          if (typeof level === "number" && level >= 0 && level <= self.levels.SILENT) {
              currentLevel = level;
              if (persist !== false) {  // defaults to true
                  persistLevelIfPossible(level);
              }
              replaceLoggingMethods.call(self, level, name);
              if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
              }
          } else {
              throw "log.setLevel() called with invalid level: " + level;
          }
      };

      self.setDefaultLevel = function (level) {
          if (!getPersistedLevel()) {
              self.setLevel(level, false);
          }
      };

      self.enableAll = function(persist) {
          self.setLevel(self.levels.TRACE, persist);
      };

      self.disableAll = function(persist) {
          self.setLevel(self.levels.SILENT, persist);
      };

      // Initialize with the right level
      var initialLevel = getPersistedLevel();
      if (initialLevel == null) {
          initialLevel = defaultLevel == null ? "WARN" : defaultLevel;
      }
      self.setLevel(initialLevel, false);
    }

    /*
     *
     * Top-level API
     *
     */

    var defaultLogger = new Logger();

    var _loggersByName = {};
    defaultLogger.getLogger = function getLogger(name) {
        if ((typeof name !== "symbol" && typeof name !== "string") || name === "") {
          throw new TypeError("You must supply a name when creating a logger.");
        }

        var logger = _loggersByName[name];
        if (!logger) {
          logger = _loggersByName[name] = new Logger(
            name, defaultLogger.getLevel(), defaultLogger.methodFactory);
        }
        return logger;
    };

    // Grab the current global log variable in case of overwrite
    var _log = (typeof window !== undefinedType) ? window.log : undefined;
    defaultLogger.noConflict = function() {
        if (typeof window !== undefinedType &&
               window.log === defaultLogger) {
            window.log = _log;
        }

        return defaultLogger;
    };

    defaultLogger.getLoggers = function getLoggers() {
        return _loggersByName;
    };

    // ES6 default export, for compatibility
    defaultLogger['default'] = defaultLogger;

    return defaultLogger;
}));


/***/ }),

/***/ "./node_modules/node-libs-browser/node_modules/punycode/punycode.js":
/*!**************************************************************************!*\
  !*** ./node_modules/node-libs-browser/node_modules/punycode/punycode.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports =  true && exports &&
		!exports.nodeType && exports;
	var freeModule =  true && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw new RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * https://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.4.1',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		true
	) {
		!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
			return punycode;
		}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}

}(this));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module), __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/querystring-es3/decode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/decode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};


/***/ }),

/***/ "./node_modules/querystring-es3/encode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/encode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};


/***/ }),

/***/ "./node_modules/querystring-es3/index.js":
/*!***********************************************!*\
  !*** ./node_modules/querystring-es3/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.decode = exports.parse = __webpack_require__(/*! ./decode */ "./node_modules/querystring-es3/decode.js");
exports.encode = exports.stringify = __webpack_require__(/*! ./encode */ "./node_modules/querystring-es3/encode.js");


/***/ }),

/***/ "./node_modules/sockjs-client/dist/sockjs.js":
/*!***************************************************!*\
  !*** ./node_modules/sockjs-client/dist/sockjs.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/* sockjs-client v1.5.0 | http://sockjs.org | MIT license */
(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return require(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
(function (global){
'use strict';

var transportList = require('./transport-list');

module.exports = require('./main')(transportList);

// TODO can't get rid of this until all servers do
if ('_sockjs_onload' in global) {
  setTimeout(global._sockjs_onload, 1);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./main":14,"./transport-list":16}],2:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function CloseEvent() {
  Event.call(this);
  this.initEvent('close', false, false);
  this.wasClean = false;
  this.code = 0;
  this.reason = '';
}

inherits(CloseEvent, Event);

module.exports = CloseEvent;

},{"./event":4,"inherits":57}],3:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventTarget = require('./eventtarget')
  ;

function EventEmitter() {
  EventTarget.call(this);
}

inherits(EventEmitter, EventTarget);

EventEmitter.prototype.removeAllListeners = function(type) {
  if (type) {
    delete this._listeners[type];
  } else {
    this._listeners = {};
  }
};

EventEmitter.prototype.once = function(type, listener) {
  var self = this
    , fired = false;

  function g() {
    self.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  this.on(type, g);
};

EventEmitter.prototype.emit = function() {
  var type = arguments[0];
  var listeners = this._listeners[type];
  if (!listeners) {
    return;
  }
  // equivalent of Array.prototype.slice.call(arguments, 1);
  var l = arguments.length;
  var args = new Array(l - 1);
  for (var ai = 1; ai < l; ai++) {
    args[ai - 1] = arguments[ai];
  }
  for (var i = 0; i < listeners.length; i++) {
    listeners[i].apply(this, args);
  }
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;
EventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;

module.exports.EventEmitter = EventEmitter;

},{"./eventtarget":5,"inherits":57}],4:[function(require,module,exports){
'use strict';

function Event(eventType) {
  this.type = eventType;
}

Event.prototype.initEvent = function(eventType, canBubble, cancelable) {
  this.type = eventType;
  this.bubbles = canBubble;
  this.cancelable = cancelable;
  this.timeStamp = +new Date();
  return this;
};

Event.prototype.stopPropagation = function() {};
Event.prototype.preventDefault = function() {};

Event.CAPTURING_PHASE = 1;
Event.AT_TARGET = 2;
Event.BUBBLING_PHASE = 3;

module.exports = Event;

},{}],5:[function(require,module,exports){
'use strict';

/* Simplified implementation of DOM2 EventTarget.
 *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget
 */

function EventTarget() {
  this._listeners = {};
}

EventTarget.prototype.addEventListener = function(eventType, listener) {
  if (!(eventType in this._listeners)) {
    this._listeners[eventType] = [];
  }
  var arr = this._listeners[eventType];
  // #4
  if (arr.indexOf(listener) === -1) {
    // Make a copy so as not to interfere with a current dispatchEvent.
    arr = arr.concat([listener]);
  }
  this._listeners[eventType] = arr;
};

EventTarget.prototype.removeEventListener = function(eventType, listener) {
  var arr = this._listeners[eventType];
  if (!arr) {
    return;
  }
  var idx = arr.indexOf(listener);
  if (idx !== -1) {
    if (arr.length > 1) {
      // Make a copy so as not to interfere with a current dispatchEvent.
      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));
    } else {
      delete this._listeners[eventType];
    }
    return;
  }
};

EventTarget.prototype.dispatchEvent = function() {
  var event = arguments[0];
  var t = event.type;
  // equivalent of Array.prototype.slice.call(arguments, 0);
  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);
  // TODO: This doesn't match the real behavior; per spec, onfoo get
  // their place in line from the /first/ time they're set from
  // non-null. Although WebKit bumps it to the end every time it's
  // set.
  if (this['on' + t]) {
    this['on' + t].apply(this, args);
  }
  if (t in this._listeners) {
    // Grab a reference to the listeners list. removeEventListener may alter the list.
    var listeners = this._listeners[t];
    for (var i = 0; i < listeners.length; i++) {
      listeners[i].apply(this, args);
    }
  }
};

module.exports = EventTarget;

},{}],6:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function TransportMessageEvent(data) {
  Event.call(this);
  this.initEvent('message', false, false);
  this.data = data;
}

inherits(TransportMessageEvent, Event);

module.exports = TransportMessageEvent;

},{"./event":4,"inherits":57}],7:[function(require,module,exports){
'use strict';

var JSON3 = require('json3')
  , iframeUtils = require('./utils/iframe')
  ;

function FacadeJS(transport) {
  this._transport = transport;
  transport.on('message', this._transportMessage.bind(this));
  transport.on('close', this._transportClose.bind(this));
}

FacadeJS.prototype._transportClose = function(code, reason) {
  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));
};
FacadeJS.prototype._transportMessage = function(frame) {
  iframeUtils.postMessage('t', frame);
};
FacadeJS.prototype._send = function(data) {
  this._transport.send(data);
};
FacadeJS.prototype._close = function() {
  this._transport.close();
  this._transport.removeAllListeners();
};

module.exports = FacadeJS;

},{"./utils/iframe":47,"json3":58}],8:[function(require,module,exports){
(function (process){
'use strict';

var urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , JSON3 = require('json3')
  , FacadeJS = require('./facade')
  , InfoIframeReceiver = require('./info-iframe-receiver')
  , iframeUtils = require('./utils/iframe')
  , loc = require('./location')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:iframe-bootstrap');
}

module.exports = function(SockJS, availableTransports) {
  var transportMap = {};
  availableTransports.forEach(function(at) {
    if (at.facadeTransport) {
      transportMap[at.facadeTransport.transportName] = at.facadeTransport;
    }
  });

  // hard-coded for the info iframe
  // TODO see if we can make this more dynamic
  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;
  var parentOrigin;

  /* eslint-disable camelcase */
  SockJS.bootstrap_iframe = function() {
    /* eslint-enable camelcase */
    var facade;
    iframeUtils.currentWindowId = loc.hash.slice(1);
    var onMessage = function(e) {
      if (e.source !== parent) {
        return;
      }
      if (typeof parentOrigin === 'undefined') {
        parentOrigin = e.origin;
      }
      if (e.origin !== parentOrigin) {
        return;
      }

      var iframeMessage;
      try {
        iframeMessage = JSON3.parse(e.data);
      } catch (ignored) {
        debug('bad json', e.data);
        return;
      }

      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {
        return;
      }
      switch (iframeMessage.type) {
      case 's':
        var p;
        try {
          p = JSON3.parse(iframeMessage.data);
        } catch (ignored) {
          debug('bad json', iframeMessage.data);
          break;
        }
        var version = p[0];
        var transport = p[1];
        var transUrl = p[2];
        var baseUrl = p[3];
        debug(version, transport, transUrl, baseUrl);
        // change this to semver logic
        if (version !== SockJS.version) {
          throw new Error('Incompatible SockJS! Main site uses:' +
                    ' "' + version + '", the iframe:' +
                    ' "' + SockJS.version + '".');
        }

        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||
            !urlUtils.isOriginEqual(baseUrl, loc.href)) {
          throw new Error('Can\'t connect to different domain from within an ' +
                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');
        }
        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));
        break;
      case 'm':
        facade._send(iframeMessage.data);
        break;
      case 'c':
        if (facade) {
          facade._close();
        }
        facade = null;
        break;
      }
    };

    eventUtils.attachEvent('message', onMessage);

    // Start
    iframeUtils.postMessage('s');
  };
};

}).call(this,{ env: {} })

},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,"debug":55,"json3":58}],9:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , objectUtils = require('./utils/object')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-ajax');
}

function InfoAjax(url, AjaxObject) {
  EventEmitter.call(this);

  var self = this;
  var t0 = +new Date();
  this.xo = new AjaxObject('GET', url);

  this.xo.once('finish', function(status, text) {
    var info, rtt;
    if (status === 200) {
      rtt = (+new Date()) - t0;
      if (text) {
        try {
          info = JSON3.parse(text);
        } catch (e) {
          debug('bad json', text);
        }
      }

      if (!objectUtils.isObject(info)) {
        info = {};
      }
    }
    self.emit('finish', info, rtt);
    self.removeAllListeners();
  });
}

inherits(InfoAjax, EventEmitter);

InfoAjax.prototype.close = function() {
  this.removeAllListeners();
  this.xo.close();
};

module.exports = InfoAjax;

}).call(this,{ env: {} })

},{"./utils/object":49,"debug":55,"events":3,"inherits":57,"json3":58}],10:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , JSON3 = require('json3')
  , XHRLocalObject = require('./transport/sender/xhr-local')
  , InfoAjax = require('./info-ajax')
  ;

function InfoReceiverIframe(transUrl) {
  var self = this;
  EventEmitter.call(this);

  this.ir = new InfoAjax(transUrl, XHRLocalObject);
  this.ir.once('finish', function(info, rtt) {
    self.ir = null;
    self.emit('message', JSON3.stringify([info, rtt]));
  });
}

inherits(InfoReceiverIframe, EventEmitter);

InfoReceiverIframe.transportName = 'iframe-info-receiver';

InfoReceiverIframe.prototype.close = function() {
  if (this.ir) {
    this.ir.close();
    this.ir = null;
  }
  this.removeAllListeners();
};

module.exports = InfoReceiverIframe;

},{"./info-ajax":9,"./transport/sender/xhr-local":37,"events":3,"inherits":57,"json3":58}],11:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , utils = require('./utils/event')
  , IframeTransport = require('./transport/iframe')
  , InfoReceiverIframe = require('./info-iframe-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-iframe');
}

function InfoIframe(baseUrl, url) {
  var self = this;
  EventEmitter.call(this);

  var go = function() {
    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);

    ifr.once('message', function(msg) {
      if (msg) {
        var d;
        try {
          d = JSON3.parse(msg);
        } catch (e) {
          debug('bad json', msg);
          self.emit('finish');
          self.close();
          return;
        }

        var info = d[0], rtt = d[1];
        self.emit('finish', info, rtt);
      }
      self.close();
    });

    ifr.once('close', function() {
      self.emit('finish');
      self.close();
    });
  };

  // TODO this seems the same as the 'needBody' from transports
  if (!global.document.body) {
    utils.attachEvent('load', go);
  } else {
    go();
  }
}

inherits(InfoIframe, EventEmitter);

InfoIframe.enabled = function() {
  return IframeTransport.enabled();
};

InfoIframe.prototype.close = function() {
  if (this.ifr) {
    this.ifr.close();
  }
  this.removeAllListeners();
  this.ifr = null;
};

module.exports = InfoIframe;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,"debug":55,"events":3,"inherits":57,"json3":58}],12:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , urlUtils = require('./utils/url')
  , XDR = require('./transport/sender/xdr')
  , XHRCors = require('./transport/sender/xhr-cors')
  , XHRLocal = require('./transport/sender/xhr-local')
  , XHRFake = require('./transport/sender/xhr-fake')
  , InfoIframe = require('./info-iframe')
  , InfoAjax = require('./info-ajax')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-receiver');
}

function InfoReceiver(baseUrl, urlInfo) {
  debug(baseUrl);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self.doXhr(baseUrl, urlInfo);
  }, 0);
}

inherits(InfoReceiver, EventEmitter);

// TODO this is currently ignoring the list of available transports and the whitelist

InfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {
  // determine method of CORS support (if needed)
  if (urlInfo.sameOrigin) {
    return new InfoAjax(url, XHRLocal);
  }
  if (XHRCors.enabled) {
    return new InfoAjax(url, XHRCors);
  }
  if (XDR.enabled && urlInfo.sameScheme) {
    return new InfoAjax(url, XDR);
  }
  if (InfoIframe.enabled()) {
    return new InfoIframe(baseUrl, url);
  }
  return new InfoAjax(url, XHRFake);
};

InfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {
  var self = this
    , url = urlUtils.addPath(baseUrl, '/info')
    ;
  debug('doXhr', url);

  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);

  this.timeoutRef = setTimeout(function() {
    debug('timeout');
    self._cleanup(false);
    self.emit('finish');
  }, InfoReceiver.timeout);

  this.xo.once('finish', function(info, rtt) {
    debug('finish', info, rtt);
    self._cleanup(true);
    self.emit('finish', info, rtt);
  });
};

InfoReceiver.prototype._cleanup = function(wasClean) {
  debug('_cleanup');
  clearTimeout(this.timeoutRef);
  this.timeoutRef = null;
  if (!wasClean && this.xo) {
    this.xo.close();
  }
  this.xo = null;
};

InfoReceiver.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  this._cleanup(false);
};

InfoReceiver.timeout = 8000;

module.exports = InfoReceiver;

}).call(this,{ env: {} })

},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,"debug":55,"events":3,"inherits":57}],13:[function(require,module,exports){
(function (global){
'use strict';

module.exports = global.location || {
  origin: 'http://localhost:80'
, protocol: 'http:'
, host: 'localhost'
, port: 80
, href: 'http://localhost/'
, hash: ''
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],14:[function(require,module,exports){
(function (process,global){
'use strict';

require('./shims');

var URL = require('url-parse')
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , random = require('./utils/random')
  , escape = require('./utils/escape')
  , urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , transport = require('./utils/transport')
  , objectUtils = require('./utils/object')
  , browser = require('./utils/browser')
  , log = require('./utils/log')
  , Event = require('./event/event')
  , EventTarget = require('./event/eventtarget')
  , loc = require('./location')
  , CloseEvent = require('./event/close')
  , TransportMessageEvent = require('./event/trans-message')
  , InfoReceiver = require('./info-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:main');
}

var transports;

// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface
function SockJS(url, protocols, options) {
  if (!(this instanceof SockJS)) {
    return new SockJS(url, protocols, options);
  }
  if (arguments.length < 1) {
    throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");
  }
  EventTarget.call(this);

  this.readyState = SockJS.CONNECTING;
  this.extensions = '';
  this.protocol = '';

  // non-standard extension
  options = options || {};
  if (options.protocols_whitelist) {
    log.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.");
  }
  this._transportsWhitelist = options.transports;
  this._transportOptions = options.transportOptions || {};
  this._timeout = options.timeout || 0;

  var sessionId = options.sessionId || 8;
  if (typeof sessionId === 'function') {
    this._generateSessionId = sessionId;
  } else if (typeof sessionId === 'number') {
    this._generateSessionId = function() {
      return random.string(sessionId);
    };
  } else {
    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');
  }

  this._server = options.server || random.numberString(1000);

  // Step 1 of WS spec - parse and validate the url. Issue #8
  var parsedUrl = new URL(url);
  if (!parsedUrl.host || !parsedUrl.protocol) {
    throw new SyntaxError("The URL '" + url + "' is invalid");
  } else if (parsedUrl.hash) {
    throw new SyntaxError('The URL must not contain a fragment');
  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {
    throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '" + parsedUrl.protocol + "' is not allowed.");
  }

  var secure = parsedUrl.protocol === 'https:';
  // Step 2 - don't allow secure origin with an insecure protocol
  if (loc.protocol === 'https:' && !secure) {
    // exception is 127.0.0.0/8 and ::1 urls
    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {
      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');
    }
  }

  // Step 3 - check port access - no need here
  // Step 4 - parse protocols argument
  if (!protocols) {
    protocols = [];
  } else if (!Array.isArray(protocols)) {
    protocols = [protocols];
  }

  // Step 5 - check protocols argument
  var sortedProtocols = protocols.sort();
  sortedProtocols.forEach(function(proto, i) {
    if (!proto) {
      throw new SyntaxError("The protocols entry '" + proto + "' is invalid.");
    }
    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {
      throw new SyntaxError("The protocols entry '" + proto + "' is duplicated.");
    }
  });

  // Step 6 - convert origin
  var o = urlUtils.getOrigin(loc.href);
  this._origin = o ? o.toLowerCase() : null;

  // remove the trailing slash
  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\/+$/, ''));

  // store the sanitized url
  this.url = parsedUrl.href;
  debug('using url', this.url);

  // Step 7 - start connection in background
  // obtain server info
  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26
  this._urlInfo = {
    nullOrigin: !browser.hasDomain()
  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)
  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)
  };

  this._ir = new InfoReceiver(this.url, this._urlInfo);
  this._ir.once('finish', this._receiveInfo.bind(this));
}

inherits(SockJS, EventTarget);

function userSetCode(code) {
  return code === 1000 || (code >= 3000 && code <= 4999);
}

SockJS.prototype.close = function(code, reason) {
  // Step 1
  if (code && !userSetCode(code)) {
    throw new Error('InvalidAccessError: Invalid code');
  }
  // Step 2.4 states the max is 123 bytes, but we are just checking length
  if (reason && reason.length > 123) {
    throw new SyntaxError('reason argument has an invalid length');
  }

  // Step 3.1
  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {
    return;
  }

  // TODO look at docs to determine how to set this
  var wasClean = true;
  this._close(code || 1000, reason || 'Normal closure', wasClean);
};

SockJS.prototype.send = function(data) {
  // #13 - convert anything non-string to string
  // TODO this currently turns objects into [object Object]
  if (typeof data !== 'string') {
    data = '' + data;
  }
  if (this.readyState === SockJS.CONNECTING) {
    throw new Error('InvalidStateError: The connection has not been established yet');
  }
  if (this.readyState !== SockJS.OPEN) {
    return;
  }
  this._transport.send(escape.quote(data));
};

SockJS.version = require('./version');

SockJS.CONNECTING = 0;
SockJS.OPEN = 1;
SockJS.CLOSING = 2;
SockJS.CLOSED = 3;

SockJS.prototype._receiveInfo = function(info, rtt) {
  debug('_receiveInfo', rtt);
  this._ir = null;
  if (!info) {
    this._close(1002, 'Cannot connect to server');
    return;
  }

  // establish a round-trip timeout (RTO) based on the
  // round-trip time (RTT)
  this._rto = this.countRTO(rtt);
  // allow server to override url used for the actual transport
  this._transUrl = info.base_url ? info.base_url : this.url;
  info = objectUtils.extend(info, this._urlInfo);
  debug('info', info);
  // determine list of desired and supported transports
  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);
  this._transports = enabledTransports.main;
  debug(this._transports.length + ' enabled transports');

  this._connect();
};

SockJS.prototype._connect = function() {
  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {
    debug('attempt', Transport.transportName);
    if (Transport.needBody) {
      if (!global.document.body ||
          (typeof global.document.readyState !== 'undefined' &&
            global.document.readyState !== 'complete' &&
            global.document.readyState !== 'interactive')) {
        debug('waiting for body');
        this._transports.unshift(Transport);
        eventUtils.attachEvent('load', this._connect.bind(this));
        return;
      }
    }

    // calculate timeout based on RTO and round trips. Default to 5s
    var timeoutMs = Math.max(this._timeout, (this._rto * Transport.roundTrips) || 5000);
    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);
    debug('using timeout', timeoutMs);

    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());
    var options = this._transportOptions[Transport.transportName];
    debug('transport url', transportUrl);
    var transportObj = new Transport(transportUrl, this._transUrl, options);
    transportObj.on('message', this._transportMessage.bind(this));
    transportObj.once('close', this._transportClose.bind(this));
    transportObj.transportName = Transport.transportName;
    this._transport = transportObj;

    return;
  }
  this._close(2000, 'All transports failed', false);
};

SockJS.prototype._transportTimeout = function() {
  debug('_transportTimeout');
  if (this.readyState === SockJS.CONNECTING) {
    if (this._transport) {
      this._transport.close();
    }

    this._transportClose(2007, 'Transport timed out');
  }
};

SockJS.prototype._transportMessage = function(msg) {
  debug('_transportMessage', msg);
  var self = this
    , type = msg.slice(0, 1)
    , content = msg.slice(1)
    , payload
    ;

  // first check for messages that don't need a payload
  switch (type) {
    case 'o':
      this._open();
      return;
    case 'h':
      this.dispatchEvent(new Event('heartbeat'));
      debug('heartbeat', this.transport);
      return;
  }

  if (content) {
    try {
      payload = JSON3.parse(content);
    } catch (e) {
      debug('bad json', content);
    }
  }

  if (typeof payload === 'undefined') {
    debug('empty payload', content);
    return;
  }

  switch (type) {
    case 'a':
      if (Array.isArray(payload)) {
        payload.forEach(function(p) {
          debug('message', self.transport, p);
          self.dispatchEvent(new TransportMessageEvent(p));
        });
      }
      break;
    case 'm':
      debug('message', this.transport, payload);
      this.dispatchEvent(new TransportMessageEvent(payload));
      break;
    case 'c':
      if (Array.isArray(payload) && payload.length === 2) {
        this._close(payload[0], payload[1], true);
      }
      break;
  }
};

SockJS.prototype._transportClose = function(code, reason) {
  debug('_transportClose', this.transport, code, reason);
  if (this._transport) {
    this._transport.removeAllListeners();
    this._transport = null;
    this.transport = null;
  }

  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {
    this._connect();
    return;
  }

  this._close(code, reason);
};

SockJS.prototype._open = function() {
  debug('_open', this._transport && this._transport.transportName, this.readyState);
  if (this.readyState === SockJS.CONNECTING) {
    if (this._transportTimeoutId) {
      clearTimeout(this._transportTimeoutId);
      this._transportTimeoutId = null;
    }
    this.readyState = SockJS.OPEN;
    this.transport = this._transport.transportName;
    this.dispatchEvent(new Event('open'));
    debug('connected', this.transport);
  } else {
    // The server might have been restarted, and lost track of our
    // connection.
    this._close(1006, 'Server lost session');
  }
};

SockJS.prototype._close = function(code, reason, wasClean) {
  debug('_close', this.transport, code, reason, wasClean, this.readyState);
  var forceFail = false;

  if (this._ir) {
    forceFail = true;
    this._ir.close();
    this._ir = null;
  }
  if (this._transport) {
    this._transport.close();
    this._transport = null;
    this.transport = null;
  }

  if (this.readyState === SockJS.CLOSED) {
    throw new Error('InvalidStateError: SockJS has already been closed');
  }

  this.readyState = SockJS.CLOSING;
  setTimeout(function() {
    this.readyState = SockJS.CLOSED;

    if (forceFail) {
      this.dispatchEvent(new Event('error'));
    }

    var e = new CloseEvent('close');
    e.wasClean = wasClean || false;
    e.code = code || 1000;
    e.reason = reason;

    this.dispatchEvent(e);
    this.onmessage = this.onclose = this.onerror = null;
    debug('disconnected');
  }.bind(this), 0);
};

// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/
// and RFC 2988.
SockJS.prototype.countRTO = function(rtt) {
  // In a local environment, when using IE8/9 and the `jsonp-polling`
  // transport the time needed to establish a connection (the time that pass
  // from the opening of the transport to the call of `_dispatchOpen`) is
  // around 200msec (the lower bound used in the article above) and this
  // causes spurious timeouts. For this reason we calculate a value slightly
  // larger than that used in the article.
  if (rtt > 100) {
    return 4 * rtt; // rto > 400msec
  }
  return 300 + rtt; // 300msec < rto <= 400msec
};

module.exports = function(availableTransports) {
  transports = transport(availableTransports);
  require('./iframe-bootstrap')(SockJS, availableTransports);
  return SockJS;
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,"debug":55,"inherits":57,"json3":58,"url-parse":61}],15:[function(require,module,exports){
/* eslint-disable */
/* jscs: disable */
'use strict';

// pulled specific shims from https://github.com/es-shims/es5-shim

var ArrayPrototype = Array.prototype;
var ObjectPrototype = Object.prototype;
var FunctionPrototype = Function.prototype;
var StringPrototype = String.prototype;
var array_slice = ArrayPrototype.slice;

var _toString = ObjectPrototype.toString;
var isFunction = function (val) {
    return ObjectPrototype.toString.call(val) === '[object Function]';
};
var isArray = function isArray(obj) {
    return _toString.call(obj) === '[object Array]';
};
var isString = function isString(obj) {
    return _toString.call(obj) === '[object String]';
};

var supportsDescriptors = Object.defineProperty && (function () {
    try {
        Object.defineProperty({}, 'x', {});
        return true;
    } catch (e) { /* this is ES3 */
        return false;
    }
}());

// Define configurable, writable and non-enumerable props
// if they don't exist.
var defineProperty;
if (supportsDescriptors) {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        Object.defineProperty(object, name, {
            configurable: true,
            enumerable: false,
            writable: true,
            value: method
        });
    };
} else {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        object[name] = method;
    };
}
var defineProperties = function (object, map, forceAssign) {
    for (var name in map) {
        if (ObjectPrototype.hasOwnProperty.call(map, name)) {
          defineProperty(object, name, map[name], forceAssign);
        }
    }
};

var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert " + o + ' to object');
    }
    return Object(o);
};

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(num) {
    var n = +num;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function ToUint32(x) {
    return x >>> 0;
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

defineProperties(FunctionPrototype, {
    bind: function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (!isFunction(target)) {
            throw new TypeError('Function.prototype.bind called on incompatible ' + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = array_slice.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(array_slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(array_slice.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push('$' + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only
        // way to set the length property of a function.
        // In environments where Content Security Policies enabled (Chrome extensions,
        // for ex.) all use of eval or Function costructor throws an exception.
        // However in all of these environments Function.prototype.bind exists
        // and so this code will never be executed.
        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    }
});

//
// Array
// =====
//

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
defineProperties(Array, { isArray: isArray });


var boxedString = Object('a');
var splitString = boxedString[0] !== 'a' || !(0 in boxedString);

var properlyBoxesContext = function properlyBoxed(method) {
    // Check node 0.6.21 bug where third parameter is not boxed
    var properlyBoxesNonStrict = true;
    var properlyBoxesStrict = true;
    if (method) {
        method.call('foo', function (_, __, context) {
            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }
        });

        method.call([1], function () {
            'use strict';
            properlyBoxesStrict = typeof this === 'string';
        }, 'x');
    }
    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;
};

defineProperties(ArrayPrototype, {
    forEach: function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    }
}, !properlyBoxesContext(ArrayPrototype.forEach));

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
var hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;
defineProperties(ArrayPrototype, {
    indexOf: function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && isString(this) ? this.split('') : toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2IndexOfBug);

//
// String
// ======
//

// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = StringPrototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === 't' ||
    'test'.split(/(?:)/, -1).length !== 4 ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group

        StringPrototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0) {
                return [];
            }

            // If `separator` is not a regex, use native split
            if (_toString.call(separator) !== '[object RegExp]') {
                return string_split.call(this, separator, limit);
            }

            var output = [],
                flags = (separator.ignoreCase ? 'i' : '') +
                        (separator.multiline  ? 'm' : '') +
                        (separator.extended   ? 'x' : '') + // Proposed for ES6
                        (separator.sticky     ? 'y' : ''), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator2, match, lastIndex, lastLength;
            separator = new RegExp(separator.source, flags + 'g');
            string += ''; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp('^' + separator.source + '$(?!\\s)', flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                ToUint32(limit);
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        ArrayPrototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test('')) {
                    output.push('');
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ('0'.split(void 0, 0).length) {
    StringPrototype.split = function split(separator, limit) {
        if (separator === void 0 && limit === 0) { return []; }
        return string_split.call(this, separator, limit);
    };
}

// ECMA-262, 3rd B.2.3
// Not an ECMAScript standard, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
var string_substr = StringPrototype.substr;
var hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';
defineProperties(StringPrototype, {
    substr: function substr(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}, hasNegativeSubstrBug);

},{}],16:[function(require,module,exports){
'use strict';

module.exports = [
  // streaming transports
  require('./transport/websocket')
, require('./transport/xhr-streaming')
, require('./transport/xdr-streaming')
, require('./transport/eventsource')
, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))

  // polling transports
, require('./transport/htmlfile')
, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))
, require('./transport/xhr-polling')
, require('./transport/xdr-polling')
, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))
, require('./transport/jsonp-polling')
];

},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , utils = require('../../utils/event')
  , urlUtils = require('../../utils/url')
  , XHR = global.XMLHttpRequest
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:browser:xhr');
}

function AbstractXHRObject(method, url, payload, opts) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function () {
    self._start(method, url, payload, opts);
  }, 0);
}

inherits(AbstractXHRObject, EventEmitter);

AbstractXHRObject.prototype._start = function(method, url, payload, opts) {
  var self = this;

  try {
    this.xhr = new XHR();
  } catch (x) {
    // intentionally empty
  }

  if (!this.xhr) {
    debug('no xhr');
    this.emit('finish', 0, 'no xhr support');
    this._cleanup();
    return;
  }

  // several browsers cache POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  // Explorer tends to keep connection open, even after the
  // tab gets closed: http://bugs.jquery.com/ticket/5280
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload cleanup');
    self._cleanup(true);
  });
  try {
    this.xhr.open(method, url, true);
    if (this.timeout && 'timeout' in this.xhr) {
      this.xhr.timeout = this.timeout;
      this.xhr.ontimeout = function() {
        debug('xhr timeout');
        self.emit('finish', 0, '');
        self._cleanup(false);
      };
    }
  } catch (e) {
    debug('exception', e);
    // IE raises an exception on wrong port.
    this.emit('finish', 0, '');
    this._cleanup(false);
    return;
  }

  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {
    debug('withCredentials');
    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :
    // "This never affects same-site requests."

    this.xhr.withCredentials = true;
  }
  if (opts && opts.headers) {
    for (var key in opts.headers) {
      this.xhr.setRequestHeader(key, opts.headers[key]);
    }
  }

  this.xhr.onreadystatechange = function() {
    if (self.xhr) {
      var x = self.xhr;
      var text, status;
      debug('readyState', x.readyState);
      switch (x.readyState) {
      case 3:
        // IE doesn't like peeking into responseText or status
        // on Microsoft.XMLHTTP and readystate=3
        try {
          status = x.status;
          text = x.responseText;
        } catch (e) {
          // intentionally empty
        }
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }

        // IE does return readystate == 3 for 404 answers.
        if (status === 200 && text && text.length > 0) {
          debug('chunk');
          self.emit('chunk', status, text);
        }
        break;
      case 4:
        status = x.status;
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }
        // IE returns this for a bad port
        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx
        if (status === 12005 || status === 12029) {
          status = 0;
        }

        debug('finish', status, x.responseText);
        self.emit('finish', status, x.responseText);
        self._cleanup(false);
        break;
      }
    }
  };

  try {
    self.xhr.send(payload);
  } catch (e) {
    self.emit('finish', 0, '');
    self._cleanup(false);
  }
};

AbstractXHRObject.prototype._cleanup = function(abort) {
  debug('cleanup');
  if (!this.xhr) {
    return;
  }
  this.removeAllListeners();
  utils.unloadDel(this.unloadRef);

  // IE needs this field to be a function
  this.xhr.onreadystatechange = function() {};
  if (this.xhr.ontimeout) {
    this.xhr.ontimeout = null;
  }

  if (abort) {
    try {
      this.xhr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xhr = null;
};

AbstractXHRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

AbstractXHRObject.enabled = !!XHR;
// override XMLHttpRequest for IE6/7
// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (!AbstractXHRObject.enabled && (axo in global)) {
  debug('overriding xmlhttprequest');
  XHR = function() {
    try {
      return new global[axo]('Microsoft.XMLHTTP');
    } catch (e) {
      return null;
    }
  };
  AbstractXHRObject.enabled = !!new XHR();
}

var cors = false;
try {
  cors = 'withCredentials' in new XHR();
} catch (ignored) {
  // intentionally empty
}

AbstractXHRObject.supportsCORS = cors;

module.exports = AbstractXHRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],18:[function(require,module,exports){
(function (global){
module.exports = global.EventSource;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],19:[function(require,module,exports){
(function (global){
'use strict';

var Driver = global.WebSocket || global.MozWebSocket;
if (Driver) {
	module.exports = function WebSocketBrowserDriver(url) {
		return new Driver(url);
	};
} else {
	module.exports = undefined;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , EventSourceReceiver = require('./receiver/eventsource')
  , XHRCorsObject = require('./sender/xhr-cors')
  , EventSourceDriver = require('eventsource')
  ;

function EventSourceTransport(transUrl) {
  if (!EventSourceTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);
}

inherits(EventSourceTransport, AjaxBasedTransport);

EventSourceTransport.enabled = function() {
  return !!EventSourceDriver;
};

EventSourceTransport.transportName = 'eventsource';
EventSourceTransport.roundTrips = 2;

module.exports = EventSourceTransport;

},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,"eventsource":18,"inherits":57}],21:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , HtmlfileReceiver = require('./receiver/htmlfile')
  , XHRLocalObject = require('./sender/xhr-local')
  , AjaxBasedTransport = require('./lib/ajax-based')
  ;

function HtmlFileTransport(transUrl) {
  if (!HtmlfileReceiver.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);
}

inherits(HtmlFileTransport, AjaxBasedTransport);

HtmlFileTransport.enabled = function(info) {
  return HtmlfileReceiver.enabled && info.sameOrigin;
};

HtmlFileTransport.transportName = 'htmlfile';
HtmlFileTransport.roundTrips = 2;

module.exports = HtmlFileTransport;

},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,"inherits":57}],22:[function(require,module,exports){
(function (process){
'use strict';

// Few cool transports do work only for same-origin. In order to make
// them work cross-domain we shall use iframe, served from the
// remote domain. New browsers have capabilities to communicate with
// cross domain iframe using postMessage(). In IE it was implemented
// from IE 8+, but of course, IE got some details wrong:
//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx
//    http://stevesouders.com/misc/test-postmessage.php

var inherits = require('inherits')
  , JSON3 = require('json3')
  , EventEmitter = require('events').EventEmitter
  , version = require('../version')
  , urlUtils = require('../utils/url')
  , iframeUtils = require('../utils/iframe')
  , eventUtils = require('../utils/event')
  , random = require('../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:transport:iframe');
}

function IframeTransport(transport, transUrl, baseUrl) {
  if (!IframeTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  EventEmitter.call(this);

  var self = this;
  this.origin = urlUtils.getOrigin(baseUrl);
  this.baseUrl = baseUrl;
  this.transUrl = transUrl;
  this.transport = transport;
  this.windowId = random.string(8);

  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;
  debug(transport, transUrl, iframeUrl);

  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {
    debug('err callback');
    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');
    self.close();
  });

  this.onmessageCallback = this._message.bind(this);
  eventUtils.attachEvent('message', this.onmessageCallback);
}

inherits(IframeTransport, EventEmitter);

IframeTransport.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  if (this.iframeObj) {
    eventUtils.detachEvent('message', this.onmessageCallback);
    try {
      // When the iframe is not loaded, IE raises an exception
      // on 'contentWindow'.
      this.postMessage('c');
    } catch (x) {
      // intentionally empty
    }
    this.iframeObj.cleanup();
    this.iframeObj = null;
    this.onmessageCallback = this.iframeObj = null;
  }
};

IframeTransport.prototype._message = function(e) {
  debug('message', e.data);
  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {
    debug('not same origin', e.origin, this.origin);
    return;
  }

  var iframeMessage;
  try {
    iframeMessage = JSON3.parse(e.data);
  } catch (ignored) {
    debug('bad json', e.data);
    return;
  }

  if (iframeMessage.windowId !== this.windowId) {
    debug('mismatched window id', iframeMessage.windowId, this.windowId);
    return;
  }

  switch (iframeMessage.type) {
  case 's':
    this.iframeObj.loaded();
    // window global dependency
    this.postMessage('s', JSON3.stringify([
      version
    , this.transport
    , this.transUrl
    , this.baseUrl
    ]));
    break;
  case 't':
    this.emit('message', iframeMessage.data);
    break;
  case 'c':
    var cdata;
    try {
      cdata = JSON3.parse(iframeMessage.data);
    } catch (ignored) {
      debug('bad json', iframeMessage.data);
      return;
    }
    this.emit('close', cdata[0], cdata[1]);
    this.close();
    break;
  }
};

IframeTransport.prototype.postMessage = function(type, data) {
  debug('postMessage', type, data);
  this.iframeObj.post(JSON3.stringify({
    windowId: this.windowId
  , type: type
  , data: data || ''
  }), this.origin);
};

IframeTransport.prototype.send = function(message) {
  debug('send', message);
  this.postMessage('m', message);
};

IframeTransport.enabled = function() {
  return iframeUtils.iframeEnabled;
};

IframeTransport.transportName = 'iframe';
IframeTransport.roundTrips = 2;

module.exports = IframeTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,"debug":55,"events":3,"inherits":57,"json3":58}],23:[function(require,module,exports){
(function (global){
'use strict';

// The simplest and most robust transport, using the well-know cross
// domain hack - JSONP. This transport is quite inefficient - one
// message could use up to one http request. But at least it works almost
// everywhere.
// Known limitations:
//   o you will get a spinning cursor
//   o for Konqueror a dumb timer is needed to detect errors

var inherits = require('inherits')
  , SenderReceiver = require('./lib/sender-receiver')
  , JsonpReceiver = require('./receiver/jsonp')
  , jsonpSender = require('./sender/jsonp')
  ;

function JsonPTransport(transUrl) {
  if (!JsonPTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);
}

inherits(JsonPTransport, SenderReceiver);

JsonPTransport.enabled = function() {
  return !!global.document;
};

JsonPTransport.transportName = 'jsonp-polling';
JsonPTransport.roundTrips = 1;
JsonPTransport.needBody = true;

module.exports = JsonPTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,"inherits":57}],24:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , SenderReceiver = require('./sender-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:ajax-based');
}

function createAjaxSender(AjaxObject) {
  return function(url, payload, callback) {
    debug('create ajax sender', url, payload);
    var opt = {};
    if (typeof payload === 'string') {
      opt.headers = {'Content-type': 'text/plain'};
    }
    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');
    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);
    xo.once('finish', function(status) {
      debug('finish', status);
      xo = null;

      if (status !== 200 && status !== 204) {
        return callback(new Error('http status ' + status));
      }
      callback();
    });
    return function() {
      debug('abort');
      xo.close();
      xo = null;

      var err = new Error('Aborted');
      err.code = 1000;
      callback(err);
    };
  };
}

function AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {
  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);
}

inherits(AjaxBasedTransport, SenderReceiver);

module.exports = AjaxBasedTransport;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./sender-receiver":28,"debug":55,"inherits":57}],25:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:buffered-sender');
}

function BufferedSender(url, sender) {
  debug(url);
  EventEmitter.call(this);
  this.sendBuffer = [];
  this.sender = sender;
  this.url = url;
}

inherits(BufferedSender, EventEmitter);

BufferedSender.prototype.send = function(message) {
  debug('send', message);
  this.sendBuffer.push(message);
  if (!this.sendStop) {
    this.sendSchedule();
  }
};

// For polling transports in a situation when in the message callback,
// new message is being send. If the sending connection was started
// before receiving one, it is possible to saturate the network and
// timeout due to the lack of receiving socket. To avoid that we delay
// sending messages by some small time, in order to let receiving
// connection be started beforehand. This is only a halfmeasure and
// does not fix the big problem, but it does make the tests go more
// stable on slow networks.
BufferedSender.prototype.sendScheduleWait = function() {
  debug('sendScheduleWait');
  var self = this;
  var tref;
  this.sendStop = function() {
    debug('sendStop');
    self.sendStop = null;
    clearTimeout(tref);
  };
  tref = setTimeout(function() {
    debug('timeout');
    self.sendStop = null;
    self.sendSchedule();
  }, 25);
};

BufferedSender.prototype.sendSchedule = function() {
  debug('sendSchedule', this.sendBuffer.length);
  var self = this;
  if (this.sendBuffer.length > 0) {
    var payload = '[' + this.sendBuffer.join(',') + ']';
    this.sendStop = this.sender(this.url, payload, function(err) {
      self.sendStop = null;
      if (err) {
        debug('error', err);
        self.emit('close', err.code || 1006, 'Sending error: ' + err);
        self.close();
      } else {
        self.sendScheduleWait();
      }
    });
    this.sendBuffer = [];
  }
};

BufferedSender.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

BufferedSender.prototype.close = function() {
  debug('close');
  this._cleanup();
  if (this.sendStop) {
    this.sendStop();
    this.sendStop = null;
  }
};

module.exports = BufferedSender;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],26:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , IframeTransport = require('../iframe')
  , objectUtils = require('../../utils/object')
  ;

module.exports = function(transport) {

  function IframeWrapTransport(transUrl, baseUrl) {
    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);
  }

  inherits(IframeWrapTransport, IframeTransport);

  IframeWrapTransport.enabled = function(url, info) {
    if (!global.document) {
      return false;
    }

    var iframeInfo = objectUtils.extend({}, info);
    iframeInfo.sameOrigin = true;
    return transport.enabled(iframeInfo) && IframeTransport.enabled();
  };

  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;
  IframeWrapTransport.needBody = true;
  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)

  IframeWrapTransport.facadeTransport = transport;

  return IframeWrapTransport;
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/object":49,"../iframe":22,"inherits":57}],27:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:polling');
}

function Polling(Receiver, receiveUrl, AjaxObject) {
  debug(receiveUrl);
  EventEmitter.call(this);
  this.Receiver = Receiver;
  this.receiveUrl = receiveUrl;
  this.AjaxObject = AjaxObject;
  this._scheduleReceiver();
}

inherits(Polling, EventEmitter);

Polling.prototype._scheduleReceiver = function() {
  debug('_scheduleReceiver');
  var self = this;
  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);

  poll.on('message', function(msg) {
    debug('message', msg);
    self.emit('message', msg);
  });

  poll.once('close', function(code, reason) {
    debug('close', code, reason, self.pollIsClosing);
    self.poll = poll = null;

    if (!self.pollIsClosing) {
      if (reason === 'network') {
        self._scheduleReceiver();
      } else {
        self.emit('close', code || 1006, reason);
        self.removeAllListeners();
      }
    }
  });
};

Polling.prototype.abort = function() {
  debug('abort');
  this.removeAllListeners();
  this.pollIsClosing = true;
  if (this.poll) {
    this.poll.abort();
  }
};

module.exports = Polling;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],28:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , BufferedSender = require('./buffered-sender')
  , Polling = require('./polling')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender-receiver');
}

function SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {
  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);
  debug(pollUrl);
  var self = this;
  BufferedSender.call(this, transUrl, senderFunc);

  this.poll = new Polling(Receiver, pollUrl, AjaxObject);
  this.poll.on('message', function(msg) {
    debug('poll message', msg);
    self.emit('message', msg);
  });
  this.poll.once('close', function(code, reason) {
    debug('poll close', code, reason);
    self.poll = null;
    self.emit('close', code, reason);
    self.close();
  });
}

inherits(SenderReceiver, BufferedSender);

SenderReceiver.prototype.close = function() {
  BufferedSender.prototype.close.call(this);
  debug('close');
  this.removeAllListeners();
  if (this.poll) {
    this.poll.abort();
    this.poll = null;
  }
};

module.exports = SenderReceiver;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,"debug":55,"inherits":57}],29:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , EventSourceDriver = require('eventsource')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:eventsource');
}

function EventSourceReceiver(url) {
  debug(url);
  EventEmitter.call(this);

  var self = this;
  var es = this.es = new EventSourceDriver(url);
  es.onmessage = function(e) {
    debug('message', e.data);
    self.emit('message', decodeURI(e.data));
  };
  es.onerror = function(e) {
    debug('error', es.readyState, e);
    // ES on reconnection has readyState = 0 or 1.
    // on network error it's CLOSED = 2
    var reason = (es.readyState !== 2 ? 'network' : 'permanent');
    self._cleanup();
    self._close(reason);
  };
}

inherits(EventSourceReceiver, EventEmitter);

EventSourceReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

EventSourceReceiver.prototype._cleanup = function() {
  debug('cleanup');
  var es = this.es;
  if (es) {
    es.onmessage = es.onerror = null;
    es.close();
    this.es = null;
  }
};

EventSourceReceiver.prototype._close = function(reason) {
  debug('close', reason);
  var self = this;
  // Safari and chrome < 15 crash if we close window before
  // waiting for ES cleanup. See:
  // https://code.google.com/p/chromium/issues/detail?id=89155
  setTimeout(function() {
    self.emit('close', null, reason);
    self.removeAllListeners();
  }, 200);
};

module.exports = EventSourceReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"eventsource":18,"inherits":57}],30:[function(require,module,exports){
(function (process,global){
'use strict';

var inherits = require('inherits')
  , iframeUtils = require('../../utils/iframe')
  , urlUtils = require('../../utils/url')
  , EventEmitter = require('events').EventEmitter
  , random = require('../../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:htmlfile');
}

function HtmlfileReceiver(url) {
  debug(url);
  EventEmitter.call(this);
  var self = this;
  iframeUtils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));

  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);
  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?
      iframeUtils.createHtmlfile : iframeUtils.createIframe;

  global[iframeUtils.WPrefix][this.id] = {
    start: function() {
      debug('start');
      self.iframeObj.loaded();
    }
  , message: function(data) {
      debug('message', data);
      self.emit('message', data);
    }
  , stop: function() {
      debug('stop');
      self._cleanup();
      self._close('network');
    }
  };
  this.iframeObj = constructFunc(url, function() {
    debug('callback');
    self._cleanup();
    self._close('permanent');
  });
}

inherits(HtmlfileReceiver, EventEmitter);

HtmlfileReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

HtmlfileReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  if (this.iframeObj) {
    this.iframeObj.cleanup();
    this.iframeObj = null;
  }
  delete global[iframeUtils.WPrefix][this.id];
};

HtmlfileReceiver.prototype._close = function(reason) {
  debug('_close', reason);
  this.emit('close', null, reason);
  this.removeAllListeners();
};

HtmlfileReceiver.htmlfileEnabled = false;

// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (axo in global) {
  try {
    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');
  } catch (x) {
    // intentionally empty
  }
}

HtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;

module.exports = HtmlfileReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],31:[function(require,module,exports){
(function (process,global){
'use strict';

var utils = require('../../utils/iframe')
  , random = require('../../utils/random')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:jsonp');
}

function JsonpReceiver(url) {
  debug(url);
  var self = this;
  EventEmitter.call(this);

  utils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));

  global[utils.WPrefix][this.id] = this._callback.bind(this);
  this._createScript(urlWithId);

  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.
  this.timeoutId = setTimeout(function() {
    debug('timeout');
    self._abort(new Error('JSONP script loaded abnormally (timeout)'));
  }, JsonpReceiver.timeout);
}

inherits(JsonpReceiver, EventEmitter);

JsonpReceiver.prototype.abort = function() {
  debug('abort');
  if (global[utils.WPrefix][this.id]) {
    var err = new Error('JSONP user aborted read');
    err.code = 1000;
    this._abort(err);
  }
};

JsonpReceiver.timeout = 35000;
JsonpReceiver.scriptErrorTimeout = 1000;

JsonpReceiver.prototype._callback = function(data) {
  debug('_callback', data);
  this._cleanup();

  if (this.aborting) {
    return;
  }

  if (data) {
    debug('message', data);
    this.emit('message', data);
  }
  this.emit('close', null, 'network');
  this.removeAllListeners();
};

JsonpReceiver.prototype._abort = function(err) {
  debug('_abort', err);
  this._cleanup();
  this.aborting = true;
  this.emit('close', err.code, err.message);
  this.removeAllListeners();
};

JsonpReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  clearTimeout(this.timeoutId);
  if (this.script2) {
    this.script2.parentNode.removeChild(this.script2);
    this.script2 = null;
  }
  if (this.script) {
    var script = this.script;
    // Unfortunately, you can't really abort script loading of
    // the script.
    script.parentNode.removeChild(script);
    script.onreadystatechange = script.onerror =
        script.onload = script.onclick = null;
    this.script = null;
  }
  delete global[utils.WPrefix][this.id];
};

JsonpReceiver.prototype._scriptError = function() {
  debug('_scriptError');
  var self = this;
  if (this.errorTimer) {
    return;
  }

  this.errorTimer = setTimeout(function() {
    if (!self.loadedOkay) {
      self._abort(new Error('JSONP script loaded abnormally (onerror)'));
    }
  }, JsonpReceiver.scriptErrorTimeout);
};

JsonpReceiver.prototype._createScript = function(url) {
  debug('_createScript', url);
  var self = this;
  var script = this.script = global.document.createElement('script');
  var script2;  // Opera synchronous load trick.

  script.id = 'a' + random.string(8);
  script.src = url;
  script.type = 'text/javascript';
  script.charset = 'UTF-8';
  script.onerror = this._scriptError.bind(this);
  script.onload = function() {
    debug('onload');
    self._abort(new Error('JSONP script loaded abnormally (onload)'));
  };

  // IE9 fires 'error' event after onreadystatechange or before, in random order.
  // Use loadedOkay to determine if actually errored
  script.onreadystatechange = function() {
    debug('onreadystatechange', script.readyState);
    if (/loaded|closed/.test(script.readyState)) {
      if (script && script.htmlFor && script.onclick) {
        self.loadedOkay = true;
        try {
          // In IE, actually execute the script.
          script.onclick();
        } catch (x) {
          // intentionally empty
        }
      }
      if (script) {
        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));
      }
    }
  };
  // IE: event/htmlFor/onclick trick.
  // One can't rely on proper order for onreadystatechange. In order to
  // make sure, set a 'htmlFor' and 'event' properties, so that
  // script code will be installed as 'onclick' handler for the
  // script object. Later, onreadystatechange, manually execute this
  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'
  // set. For reference see:
  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html
  // Also, read on that about script ordering:
  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
  if (typeof script.async === 'undefined' && global.document.attachEvent) {
    // According to mozilla docs, in recent browsers script.async defaults
    // to 'true', so we may use it to detect a good browser:
    // https://developer.mozilla.org/en/HTML/Element/script
    if (!browser.isOpera()) {
      // Naively assume we're in IE
      try {
        script.htmlFor = script.id;
        script.event = 'onclick';
      } catch (x) {
        // intentionally empty
      }
      script.async = true;
    } else {
      // Opera, second sync script hack
      script2 = this.script2 = global.document.createElement('script');
      script2.text = "try{var a = document.getElementById('" + script.id + "'); if(a)a.onerror();}catch(x){};";
      script.async = script2.async = false;
    }
  }
  if (typeof script.async !== 'undefined') {
    script.async = true;
  }

  var head = global.document.getElementsByTagName('head')[0];
  head.insertBefore(script, head.firstChild);
  if (script2) {
    head.insertBefore(script2, head.firstChild);
  }
};

module.exports = JsonpReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],32:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:xhr');
}

function XhrReceiver(url, AjaxObject) {
  debug(url);
  EventEmitter.call(this);
  var self = this;

  this.bufferPosition = 0;

  this.xo = new AjaxObject('POST', url, null);
  this.xo.on('chunk', this._chunkHandler.bind(this));
  this.xo.once('finish', function(status, text) {
    debug('finish', status, text);
    self._chunkHandler(status, text);
    self.xo = null;
    var reason = status === 200 ? 'network' : 'permanent';
    debug('close', reason);
    self.emit('close', null, reason);
    self._cleanup();
  });
}

inherits(XhrReceiver, EventEmitter);

XhrReceiver.prototype._chunkHandler = function(status, text) {
  debug('_chunkHandler', status);
  if (status !== 200 || !text) {
    return;
  }

  for (var idx = -1; ; this.bufferPosition += idx + 1) {
    var buf = text.slice(this.bufferPosition);
    idx = buf.indexOf('\n');
    if (idx === -1) {
      break;
    }
    var msg = buf.slice(0, idx);
    if (msg) {
      debug('message', msg);
      this.emit('message', msg);
    }
  }
};

XhrReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

XhrReceiver.prototype.abort = function() {
  debug('abort');
  if (this.xo) {
    this.xo.close();
    debug('close');
    this.emit('close', null, 'user');
    this.xo = null;
  }
  this._cleanup();
};

module.exports = XhrReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],33:[function(require,module,exports){
(function (process,global){
'use strict';

var random = require('../../utils/random')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:jsonp');
}

var form, area;

function createIframe(id) {
  debug('createIframe', id);
  try {
    // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
    return global.document.createElement('<iframe name="' + id + '">');
  } catch (x) {
    var iframe = global.document.createElement('iframe');
    iframe.name = id;
    return iframe;
  }
}

function createForm() {
  debug('createForm');
  form = global.document.createElement('form');
  form.style.display = 'none';
  form.style.position = 'absolute';
  form.method = 'POST';
  form.enctype = 'application/x-www-form-urlencoded';
  form.acceptCharset = 'UTF-8';

  area = global.document.createElement('textarea');
  area.name = 'd';
  form.appendChild(area);

  global.document.body.appendChild(form);
}

module.exports = function(url, payload, callback) {
  debug(url, payload);
  if (!form) {
    createForm();
  }
  var id = 'a' + random.string(8);
  form.target = id;
  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);

  var iframe = createIframe(id);
  iframe.id = id;
  iframe.style.display = 'none';
  form.appendChild(iframe);

  try {
    area.value = payload;
  } catch (e) {
    // seriously broken browsers get here
  }
  form.submit();

  var completed = function(err) {
    debug('completed', id, err);
    if (!iframe.onerror) {
      return;
    }
    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;
    // Opera mini doesn't like if we GC iframe
    // immediately, thus this timeout.
    setTimeout(function() {
      debug('cleaning up', id);
      iframe.parentNode.removeChild(iframe);
      iframe = null;
    }, 500);
    area.value = '';
    // It is not possible to detect if the iframe succeeded or
    // failed to submit our form.
    callback(err);
  };
  iframe.onerror = function() {
    debug('onerror', id);
    completed();
  };
  iframe.onload = function() {
    debug('onload', id);
    completed();
  };
  iframe.onreadystatechange = function(e) {
    debug('onreadystatechange', id, iframe.readyState, e);
    if (iframe.readyState === 'complete') {
      completed();
    }
  };
  return function() {
    debug('aborted', id);
    completed(new Error('Aborted'));
  };
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/random":50,"../../utils/url":52,"debug":55}],34:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , eventUtils = require('../../utils/event')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:xdr');
}

// References:
//   http://ajaxian.com/archives/100-line-ajax-wrapper
//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx

function XDRObject(method, url, payload) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self._start(method, url, payload);
  }, 0);
}

inherits(XDRObject, EventEmitter);

XDRObject.prototype._start = function(method, url, payload) {
  debug('_start');
  var self = this;
  var xdr = new global.XDomainRequest();
  // IE caches even POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  xdr.onerror = function() {
    debug('onerror');
    self._error();
  };
  xdr.ontimeout = function() {
    debug('ontimeout');
    self._error();
  };
  xdr.onprogress = function() {
    debug('progress', xdr.responseText);
    self.emit('chunk', 200, xdr.responseText);
  };
  xdr.onload = function() {
    debug('load');
    self.emit('finish', 200, xdr.responseText);
    self._cleanup(false);
  };
  this.xdr = xdr;
  this.unloadRef = eventUtils.unloadAdd(function() {
    self._cleanup(true);
  });
  try {
    // Fails with AccessDenied if port number is bogus
    this.xdr.open(method, url);
    if (this.timeout) {
      this.xdr.timeout = this.timeout;
    }
    this.xdr.send(payload);
  } catch (x) {
    this._error();
  }
};

XDRObject.prototype._error = function() {
  this.emit('finish', 0, '');
  this._cleanup(false);
};

XDRObject.prototype._cleanup = function(abort) {
  debug('cleanup', abort);
  if (!this.xdr) {
    return;
  }
  this.removeAllListeners();
  eventUtils.unloadDel(this.unloadRef);

  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;
  if (abort) {
    try {
      this.xdr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xdr = null;
};

XDRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

// IE 8/9 if the request target uses the same scheme - #79
XDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());

module.exports = XDRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],35:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRCorsObject(method, url, payload, opts) {
  XhrDriver.call(this, method, url, payload, opts);
}

inherits(XHRCorsObject, XhrDriver);

XHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;

module.exports = XHRCorsObject;

},{"../driver/xhr":17,"inherits":57}],36:[function(require,module,exports){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  ;

function XHRFake(/* method, url, payload, opts */) {
  var self = this;
  EventEmitter.call(this);

  this.to = setTimeout(function() {
    self.emit('finish', 200, '{}');
  }, XHRFake.timeout);
}

inherits(XHRFake, EventEmitter);

XHRFake.prototype.close = function() {
  clearTimeout(this.to);
};

XHRFake.timeout = 2000;

module.exports = XHRFake;

},{"events":3,"inherits":57}],37:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRLocalObject(method, url, payload /*, opts */) {
  XhrDriver.call(this, method, url, payload, {
    noCredentials: true
  });
}

inherits(XHRLocalObject, XhrDriver);

XHRLocalObject.enabled = XhrDriver.enabled;

module.exports = XHRLocalObject;

},{"../driver/xhr":17,"inherits":57}],38:[function(require,module,exports){
(function (process){
'use strict';

var utils = require('../utils/event')
  , urlUtils = require('../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , WebsocketDriver = require('./driver/websocket')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:websocket');
}

function WebSocketTransport(transUrl, ignore, options) {
  if (!WebSocketTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  EventEmitter.call(this);
  debug('constructor', transUrl);

  var self = this;
  var url = urlUtils.addPath(transUrl, '/websocket');
  if (url.slice(0, 5) === 'https') {
    url = 'wss' + url.slice(5);
  } else {
    url = 'ws' + url.slice(4);
  }
  this.url = url;

  this.ws = new WebsocketDriver(this.url, [], options);
  this.ws.onmessage = function(e) {
    debug('message event', e.data);
    self.emit('message', e.data);
  };
  // Firefox has an interesting bug. If a websocket connection is
  // created after onunload, it stays alive even when user
  // navigates away from the page. In such situation let's lie -
  // let's not open the ws connection at all. See:
  // https://github.com/sockjs/sockjs-client/issues/28
  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload');
    self.ws.close();
  });
  this.ws.onclose = function(e) {
    debug('close event', e.code, e.reason);
    self.emit('close', e.code, e.reason);
    self._cleanup();
  };
  this.ws.onerror = function(e) {
    debug('error event', e);
    self.emit('close', 1006, 'WebSocket connection broken');
    self._cleanup();
  };
}

inherits(WebSocketTransport, EventEmitter);

WebSocketTransport.prototype.send = function(data) {
  var msg = '[' + data + ']';
  debug('send', msg);
  this.ws.send(msg);
};

WebSocketTransport.prototype.close = function() {
  debug('close');
  var ws = this.ws;
  this._cleanup();
  if (ws) {
    ws.close();
  }
};

WebSocketTransport.prototype._cleanup = function() {
  debug('_cleanup');
  var ws = this.ws;
  if (ws) {
    ws.onmessage = ws.onclose = ws.onerror = null;
  }
  utils.unloadDel(this.unloadRef);
  this.unloadRef = this.ws = null;
  this.removeAllListeners();
};

WebSocketTransport.enabled = function() {
  debug('enabled');
  return !!WebsocketDriver;
};
WebSocketTransport.transportName = 'websocket';

// In theory, ws should require 1 round trip. But in chrome, this is
// not very stable over SSL. Most likely a ws connection requires a
// separate SSL connection, in which case 2 round trips are an
// absolute minumum.
WebSocketTransport.roundTrips = 2;

module.exports = WebSocketTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,"debug":55,"events":3,"inherits":57}],39:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XdrStreamingTransport = require('./xdr-streaming')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

function XdrPollingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);
}

inherits(XdrPollingTransport, AjaxBasedTransport);

XdrPollingTransport.enabled = XdrStreamingTransport.enabled;
XdrPollingTransport.transportName = 'xdr-polling';
XdrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,"inherits":57}],40:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

// According to:
//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests
//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/

function XdrStreamingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);
}

inherits(XdrStreamingTransport, AjaxBasedTransport);

XdrStreamingTransport.enabled = function(info) {
  if (info.cookie_needed || info.nullOrigin) {
    return false;
  }
  return XDRObject.enabled && info.sameScheme;
};

XdrStreamingTransport.transportName = 'xdr-streaming';
XdrStreamingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrStreamingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"inherits":57}],41:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  ;

function XhrPollingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);
}

inherits(XhrPollingTransport, AjaxBasedTransport);

XhrPollingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }

  if (XHRLocalObject.enabled && info.sameOrigin) {
    return true;
  }
  return XHRCorsObject.enabled;
};

XhrPollingTransport.transportName = 'xhr-polling';
XhrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XhrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],42:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  , browser = require('../utils/browser')
  ;

function XhrStreamingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);
}

inherits(XhrStreamingTransport, AjaxBasedTransport);

XhrStreamingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }
  // Opera doesn't support xhr-streaming #60
  // But it might be able to #92
  if (browser.isOpera()) {
    return false;
  }

  return XHRCorsObject.enabled;
};

XhrStreamingTransport.transportName = 'xhr-streaming';
XhrStreamingTransport.roundTrips = 2; // preflight, ajax

// Safari gets confused when a streaming ajax request is started
// before onload. This causes the load indicator to spin indefinetely.
// Only require body when used in a browser
XhrStreamingTransport.needBody = !!global.document;

module.exports = XhrStreamingTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],43:[function(require,module,exports){
(function (global){
'use strict';

if (global.crypto && global.crypto.getRandomValues) {
  module.exports.randomBytes = function(length) {
    var bytes = new Uint8Array(length);
    global.crypto.getRandomValues(bytes);
    return bytes;
  };
} else {
  module.exports.randomBytes = function(length) {
    var bytes = new Array(length);
    for (var i = 0; i < length; i++) {
      bytes[i] = Math.floor(Math.random() * 256);
    }
    return bytes;
  };
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],44:[function(require,module,exports){
(function (global){
'use strict';

module.exports = {
  isOpera: function() {
    return global.navigator &&
      /opera/i.test(global.navigator.userAgent);
  }

, isKonqueror: function() {
    return global.navigator &&
      /konqueror/i.test(global.navigator.userAgent);
  }

  // #187 wrap document.domain in try/catch because of WP8 from file:///
, hasDomain: function () {
    // non-browser client always has a domain
    if (!global.document) {
      return true;
    }

    try {
      return !!global.document.domain;
    } catch (e) {
      return false;
    }
  }
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],45:[function(require,module,exports){
'use strict';

var JSON3 = require('json3');

// Some extra characters that Chrome gets wrong, and substitutes with
// something else on the wire.
// eslint-disable-next-line no-control-regex, no-misleading-character-class
var extraEscapable = /[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g
  , extraLookup;

// This may be quite slow, so let's delay until user actually uses bad
// characters.
var unrollLookup = function(escapable) {
  var i;
  var unrolled = {};
  var c = [];
  for (i = 0; i < 65536; i++) {
    c.push( String.fromCharCode(i) );
  }
  escapable.lastIndex = 0;
  c.join('').replace(escapable, function(a) {
    unrolled[ a ] = '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
    return '';
  });
  escapable.lastIndex = 0;
  return unrolled;
};

// Quote string, also taking care of unicode characters that browsers
// often break. Especially, take care of unicode surrogates:
// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates
module.exports = {
  quote: function(string) {
    var quoted = JSON3.stringify(string);

    // In most cases this should be very fast and good enough.
    extraEscapable.lastIndex = 0;
    if (!extraEscapable.test(quoted)) {
      return quoted;
    }

    if (!extraLookup) {
      extraLookup = unrollLookup(extraEscapable);
    }

    return quoted.replace(extraEscapable, function(a) {
      return extraLookup[a];
    });
  }
};

},{"json3":58}],46:[function(require,module,exports){
(function (global){
'use strict';

var random = require('./random');

var onUnload = {}
  , afterUnload = false
    // detect google chrome packaged apps because they don't allow the 'unload' event
  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime
  ;

module.exports = {
  attachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.addEventListener(event, listener, false);
    } else if (global.document && global.attachEvent) {
      // IE quirks.
      // According to: http://stevesouders.com/misc/test-postmessage.php
      // the message gets delivered only to 'document', not 'window'.
      global.document.attachEvent('on' + event, listener);
      // I get 'window' for ie8.
      global.attachEvent('on' + event, listener);
    }
  }

, detachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.removeEventListener(event, listener, false);
    } else if (global.document && global.detachEvent) {
      global.document.detachEvent('on' + event, listener);
      global.detachEvent('on' + event, listener);
    }
  }

, unloadAdd: function(listener) {
    if (isChromePackagedApp) {
      return null;
    }

    var ref = random.string(8);
    onUnload[ref] = listener;
    if (afterUnload) {
      setTimeout(this.triggerUnloadCallbacks, 0);
    }
    return ref;
  }

, unloadDel: function(ref) {
    if (ref in onUnload) {
      delete onUnload[ref];
    }
  }

, triggerUnloadCallbacks: function() {
    for (var ref in onUnload) {
      onUnload[ref]();
      delete onUnload[ref];
    }
  }
};

var unloadTriggered = function() {
  if (afterUnload) {
    return;
  }
  afterUnload = true;
  module.exports.triggerUnloadCallbacks();
};

// 'unload' alone is not reliable in opera within an iframe, but we
// can't use `beforeunload` as IE fires it on javascript: links.
if (!isChromePackagedApp) {
  module.exports.attachEvent('unload', unloadTriggered);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./random":50}],47:[function(require,module,exports){
(function (process,global){
'use strict';

var eventUtils = require('./event')
  , JSON3 = require('json3')
  , browser = require('./browser')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:iframe');
}

module.exports = {
  WPrefix: '_jp'
, currentWindowId: null

, polluteGlobalNamespace: function() {
    if (!(module.exports.WPrefix in global)) {
      global[module.exports.WPrefix] = {};
    }
  }

, postMessage: function(type, data) {
    if (global.parent !== global) {
      global.parent.postMessage(JSON3.stringify({
        windowId: module.exports.currentWindowId
      , type: type
      , data: data || ''
      }), '*');
    } else {
      debug('Cannot postMessage, no parent window.', type, data);
    }
  }

, createIframe: function(iframeUrl, errorCallback) {
    var iframe = global.document.createElement('iframe');
    var tref, unloadRef;
    var unattach = function() {
      debug('unattach');
      clearTimeout(tref);
      // Explorer had problems with that.
      try {
        iframe.onload = null;
      } catch (x) {
        // intentionally empty
      }
      iframe.onerror = null;
    };
    var cleanup = function() {
      debug('cleanup');
      if (iframe) {
        unattach();
        // This timeout makes chrome fire onbeforeunload event
        // within iframe. Without the timeout it goes straight to
        // onunload.
        setTimeout(function() {
          if (iframe) {
            iframe.parentNode.removeChild(iframe);
          }
          iframe = null;
        }, 0);
        eventUtils.unloadDel(unloadRef);
      }
    };
    var onerror = function(err) {
      debug('onerror', err);
      if (iframe) {
        cleanup();
        errorCallback(err);
      }
    };
    var post = function(msg, origin) {
      debug('post', msg, origin);
      setTimeout(function() {
        try {
          // When the iframe is not loaded, IE raises an exception
          // on 'contentWindow'.
          if (iframe && iframe.contentWindow) {
            iframe.contentWindow.postMessage(msg, origin);
          }
        } catch (x) {
          // intentionally empty
        }
      }, 0);
    };

    iframe.src = iframeUrl;
    iframe.style.display = 'none';
    iframe.style.position = 'absolute';
    iframe.onerror = function() {
      onerror('onerror');
    };
    iframe.onload = function() {
      debug('onload');
      // `onload` is triggered before scripts on the iframe are
      // executed. Give it few seconds to actually load stuff.
      clearTimeout(tref);
      tref = setTimeout(function() {
        onerror('onload timeout');
      }, 2000);
    };
    global.document.body.appendChild(iframe);
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }

/* eslint no-undef: "off", new-cap: "off" */
, createHtmlfile: function(iframeUrl, errorCallback) {
    var axo = ['Active'].concat('Object').join('X');
    var doc = new global[axo]('htmlfile');
    var tref, unloadRef;
    var iframe;
    var unattach = function() {
      clearTimeout(tref);
      iframe.onerror = null;
    };
    var cleanup = function() {
      if (doc) {
        unattach();
        eventUtils.unloadDel(unloadRef);
        iframe.parentNode.removeChild(iframe);
        iframe = doc = null;
        CollectGarbage();
      }
    };
    var onerror = function(r) {
      debug('onerror', r);
      if (doc) {
        cleanup();
        errorCallback(r);
      }
    };
    var post = function(msg, origin) {
      try {
        // When the iframe is not loaded, IE raises an exception
        // on 'contentWindow'.
        setTimeout(function() {
          if (iframe && iframe.contentWindow) {
              iframe.contentWindow.postMessage(msg, origin);
          }
        }, 0);
      } catch (x) {
        // intentionally empty
      }
    };

    doc.open();
    doc.write('<html><s' + 'cript>' +
              'document.domain="' + global.document.domain + '";' +
              '</s' + 'cript></html>');
    doc.close();
    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];
    var c = doc.createElement('div');
    doc.body.appendChild(c);
    iframe = doc.createElement('iframe');
    c.appendChild(iframe);
    iframe.src = iframeUrl;
    iframe.onerror = function() {
      onerror('onerror');
    };
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }
};

module.exports.iframeEnabled = false;
if (global.document) {
  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with
  // huge delay, or not at all.
  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||
    typeof global.postMessage === 'object') && (!browser.isKonqueror());
}

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./browser":44,"./event":46,"debug":55,"json3":58}],48:[function(require,module,exports){
(function (global){
'use strict';

var logObject = {};
['log', 'debug', 'warn'].forEach(function (level) {
  var levelExists;

  try {
    levelExists = global.console && global.console[level] && global.console[level].apply;
  } catch(e) {
    // do nothing
  }

  logObject[level] = levelExists ? function () {
    return global.console[level].apply(global.console, arguments);
  } : (level === 'log' ? function () {} : logObject.log);
});

module.exports = logObject;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],49:[function(require,module,exports){
'use strict';

module.exports = {
  isObject: function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  }

, extend: function(obj) {
    if (!this.isObject(obj)) {
      return obj;
    }
    var source, prop;
    for (var i = 1, length = arguments.length; i < length; i++) {
      source = arguments[i];
      for (prop in source) {
        if (Object.prototype.hasOwnProperty.call(source, prop)) {
          obj[prop] = source[prop];
        }
      }
    }
    return obj;
  }
};

},{}],50:[function(require,module,exports){
'use strict';

var crypto = require('crypto');

// This string has length 32, a power of 2, so the modulus doesn't introduce a
// bias.
var _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';
module.exports = {
  string: function(length) {
    var max = _randomStringChars.length;
    var bytes = crypto.randomBytes(length);
    var ret = [];
    for (var i = 0; i < length; i++) {
      ret.push(_randomStringChars.substr(bytes[i] % max, 1));
    }
    return ret.join('');
  }

, number: function(max) {
    return Math.floor(Math.random() * max);
  }

, numberString: function(max) {
    var t = ('' + (max - 1)).length;
    var p = new Array(t + 1).join('0');
    return (p + this.number(max)).slice(-t);
  }
};

},{"crypto":43}],51:[function(require,module,exports){
(function (process){
'use strict';

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:transport');
}

module.exports = function(availableTransports) {
  return {
    filterToEnabled: function(transportsWhitelist, info) {
      var transports = {
        main: []
      , facade: []
      };
      if (!transportsWhitelist) {
        transportsWhitelist = [];
      } else if (typeof transportsWhitelist === 'string') {
        transportsWhitelist = [transportsWhitelist];
      }

      availableTransports.forEach(function(trans) {
        if (!trans) {
          return;
        }

        if (trans.transportName === 'websocket' && info.websocket === false) {
          debug('disabled from server', 'websocket');
          return;
        }

        if (transportsWhitelist.length &&
            transportsWhitelist.indexOf(trans.transportName) === -1) {
          debug('not in whitelist', trans.transportName);
          return;
        }

        if (trans.enabled(info)) {
          debug('enabled', trans.transportName);
          transports.main.push(trans);
          if (trans.facadeTransport) {
            transports.facade.push(trans.facadeTransport);
          }
        } else {
          debug('disabled', trans.transportName);
        }
      });
      return transports;
    }
  };
};

}).call(this,{ env: {} })

},{"debug":55}],52:[function(require,module,exports){
(function (process){
'use strict';

var URL = require('url-parse');

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:url');
}

module.exports = {
  getOrigin: function(url) {
    if (!url) {
      return null;
    }

    var p = new URL(url);
    if (p.protocol === 'file:') {
      return null;
    }

    var port = p.port;
    if (!port) {
      port = (p.protocol === 'https:') ? '443' : '80';
    }

    return p.protocol + '//' + p.hostname + ':' + port;
  }

, isOriginEqual: function(a, b) {
    var res = this.getOrigin(a) === this.getOrigin(b);
    debug('same', a, b, res);
    return res;
  }

, isSchemeEqual: function(a, b) {
    return (a.split(':')[0] === b.split(':')[0]);
  }

, addPath: function (url, path) {
    var qs = url.split('?');
    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');
  }

, addQuery: function (url, q) {
    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));
  }

, isLoopbackAddr: function (addr) {
    return /^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(addr) || /^\[::1\]$/.test(addr);
  }
};

}).call(this,{ env: {} })

},{"debug":55,"url-parse":61}],53:[function(require,module,exports){
module.exports = '1.5.0';

},{}],54:[function(require,module,exports){
/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function(val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error(
    'val is not a non-empty string or a valid number. val=' +
      JSON.stringify(val)
  );
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
    str
  );
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}

},{}],55:[function(require,module,exports){
(function (process){
"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/* eslint-env browser */

/**
 * This is the web browser implementation of `debug()`.
 */
exports.log = log;
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = localstorage();
/**
 * Colors.
 */

exports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];
/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */
// eslint-disable-next-line complexity

function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {
    return true;
  } // Internet Explorer and Edge do not support colors.


  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
    return false;
  } // Is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632


  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
}
/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */


function formatArgs(args) {
  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);

  if (!this.useColors) {
    return;
  }

  var c = 'color: ' + this.color;
  args.splice(1, 0, c, 'color: inherit'); // The final "%c" is somewhat tricky, because there could be other
  // arguments passed either before or after the %c, so we need to
  // figure out the correct index to insert the CSS into

  var index = 0;
  var lastC = 0;
  args[0].replace(/%[a-zA-Z%]/g, function (match) {
    if (match === '%%') {
      return;
    }

    index++;

    if (match === '%c') {
      // We only are interested in the *last* %c
      // (the user may have provided their own)
      lastC = index;
    }
  });
  args.splice(lastC, 0, c);
}
/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */


function log() {
  var _console;

  // This hackery is required for IE8/9, where
  // the `console.log` function doesn't have 'apply'
  return (typeof console === "undefined" ? "undefined" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);
}
/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */


function save(namespaces) {
  try {
    if (namespaces) {
      exports.storage.setItem('debug', namespaces);
    } else {
      exports.storage.removeItem('debug');
    }
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}
/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */


function load() {
  var r;

  try {
    r = exports.storage.getItem('debug');
  } catch (error) {} // Swallow
  // XXX (@Qix-) should we be logging these?
  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG


  if (!r && typeof process !== 'undefined' && 'env' in process) {
    r = process.env.DEBUG;
  }

  return r;
}
/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */


function localstorage() {
  try {
    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context
    // The Browser also has localStorage in the global context.
    return localStorage;
  } catch (error) {// Swallow
    // XXX (@Qix-) should we be logging these?
  }
}

module.exports = require('./common')(exports);
var formatters = module.exports.formatters;
/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

formatters.j = function (v) {
  try {
    return JSON.stringify(v);
  } catch (error) {
    return '[UnexpectedJSONParseError]: ' + error.message;
  }
};


}).call(this,{ env: {} })

},{"./common":56}],56:[function(require,module,exports){
"use strict";

/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 */
function setup(env) {
  createDebug.debug = createDebug;
  createDebug.default = createDebug;
  createDebug.coerce = coerce;
  createDebug.disable = disable;
  createDebug.enable = enable;
  createDebug.enabled = enabled;
  createDebug.humanize = require('ms');
  Object.keys(env).forEach(function (key) {
    createDebug[key] = env[key];
  });
  /**
  * Active `debug` instances.
  */

  createDebug.instances = [];
  /**
  * The currently active debug mode names, and names to skip.
  */

  createDebug.names = [];
  createDebug.skips = [];
  /**
  * Map of special "%n" handling functions, for the debug "format" argument.
  *
  * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
  */

  createDebug.formatters = {};
  /**
  * Selects a color for a debug namespace
  * @param {String} namespace The namespace string for the for the debug instance to be colored
  * @return {Number|String} An ANSI color code for the given namespace
  * @api private
  */

  function selectColor(namespace) {
    var hash = 0;

    for (var i = 0; i < namespace.length; i++) {
      hash = (hash << 5) - hash + namespace.charCodeAt(i);
      hash |= 0; // Convert to 32bit integer
    }

    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
  }

  createDebug.selectColor = selectColor;
  /**
  * Create a debugger with the given `namespace`.
  *
  * @param {String} namespace
  * @return {Function}
  * @api public
  */

  function createDebug(namespace) {
    var prevTime;

    function debug() {
      // Disabled?
      if (!debug.enabled) {
        return;
      }

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var self = debug; // Set `diff` timestamp

      var curr = Number(new Date());
      var ms = curr - (prevTime || curr);
      self.diff = ms;
      self.prev = prevTime;
      self.curr = curr;
      prevTime = curr;
      args[0] = createDebug.coerce(args[0]);

      if (typeof args[0] !== 'string') {
        // Anything else let's inspect with %O
        args.unshift('%O');
      } // Apply any `formatters` transformations


      var index = 0;
      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {
        // If we encounter an escaped % then don't increase the array index
        if (match === '%%') {
          return match;
        }

        index++;
        var formatter = createDebug.formatters[format];

        if (typeof formatter === 'function') {
          var val = args[index];
          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`

          args.splice(index, 1);
          index--;
        }

        return match;
      }); // Apply env-specific formatting (colors, etc.)

      createDebug.formatArgs.call(self, args);
      var logFn = self.log || createDebug.log;
      logFn.apply(self, args);
    }

    debug.namespace = namespace;
    debug.enabled = createDebug.enabled(namespace);
    debug.useColors = createDebug.useColors();
    debug.color = selectColor(namespace);
    debug.destroy = destroy;
    debug.extend = extend; // Debug.formatArgs = formatArgs;
    // debug.rawLog = rawLog;
    // env-specific initialization logic for debug instances

    if (typeof createDebug.init === 'function') {
      createDebug.init(debug);
    }

    createDebug.instances.push(debug);
    return debug;
  }

  function destroy() {
    var index = createDebug.instances.indexOf(this);

    if (index !== -1) {
      createDebug.instances.splice(index, 1);
      return true;
    }

    return false;
  }

  function extend(namespace, delimiter) {
    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);
  }
  /**
  * Enables a debug mode by namespaces. This can include modes
  * separated by a colon and wildcards.
  *
  * @param {String} namespaces
  * @api public
  */


  function enable(namespaces) {
    createDebug.save(namespaces);
    createDebug.names = [];
    createDebug.skips = [];
    var i;
    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
    var len = split.length;

    for (i = 0; i < len; i++) {
      if (!split[i]) {
        // ignore empty strings
        continue;
      }

      namespaces = split[i].replace(/\*/g, '.*?');

      if (namespaces[0] === '-') {
        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
      } else {
        createDebug.names.push(new RegExp('^' + namespaces + '$'));
      }
    }

    for (i = 0; i < createDebug.instances.length; i++) {
      var instance = createDebug.instances[i];
      instance.enabled = createDebug.enabled(instance.namespace);
    }
  }
  /**
  * Disable debug output.
  *
  * @api public
  */


  function disable() {
    createDebug.enable('');
  }
  /**
  * Returns true if the given mode name is enabled, false otherwise.
  *
  * @param {String} name
  * @return {Boolean}
  * @api public
  */


  function enabled(name) {
    if (name[name.length - 1] === '*') {
      return true;
    }

    var i;
    var len;

    for (i = 0, len = createDebug.skips.length; i < len; i++) {
      if (createDebug.skips[i].test(name)) {
        return false;
      }
    }

    for (i = 0, len = createDebug.names.length; i < len; i++) {
      if (createDebug.names[i].test(name)) {
        return true;
      }
    }

    return false;
  }
  /**
  * Coerce `val`.
  *
  * @param {Mixed} val
  * @return {Mixed}
  * @api private
  */


  function coerce(val) {
    if (val instanceof Error) {
      return val.stack || val.message;
    }

    return val;
  }

  createDebug.enable(createDebug.load());
  return createDebug;
}

module.exports = setup;


},{"ms":54}],57:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      ctor.prototype = Object.create(superCtor.prototype, {
        constructor: {
          value: ctor,
          enumerable: false,
          writable: true,
          configurable: true
        }
      })
    }
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      var TempCtor = function () {}
      TempCtor.prototype = superCtor.prototype
      ctor.prototype = new TempCtor()
      ctor.prototype.constructor = ctor
    }
  }
}

},{}],58:[function(require,module,exports){
(function (global){
/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */
;(function () {
  // Detect the `define` function exposed by asynchronous module loaders. The
  // strict `define` check is necessary for compatibility with `r.js`.
  var isLoader = typeof define === "function" && define.amd;

  // A set of types used to distinguish objects from primitives.
  var objectTypes = {
    "function": true,
    "object": true
  };

  // Detect the `exports` object exposed by CommonJS implementations.
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  // Use the `global` object exposed by Node (including Browserify via
  // `insert-module-globals`), Narwhal, and Ringo as the default context,
  // and the `window` object in browsers. Rhino exports a `global` function
  // instead.
  var root = objectTypes[typeof window] && window || this,
      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == "object" && global;

  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {
    root = freeGlobal;
  }

  // Public: Initializes JSON 3 using the given `context` object, attaching the
  // `stringify` and `parse` functions to the specified `exports` object.
  function runInContext(context, exports) {
    context || (context = root.Object());
    exports || (exports = root.Object());

    // Native constructor aliases.
    var Number = context.Number || root.Number,
        String = context.String || root.String,
        Object = context.Object || root.Object,
        Date = context.Date || root.Date,
        SyntaxError = context.SyntaxError || root.SyntaxError,
        TypeError = context.TypeError || root.TypeError,
        Math = context.Math || root.Math,
        nativeJSON = context.JSON || root.JSON;

    // Delegate to the native `stringify` and `parse` implementations.
    if (typeof nativeJSON == "object" && nativeJSON) {
      exports.stringify = nativeJSON.stringify;
      exports.parse = nativeJSON.parse;
    }

    // Convenience aliases.
    var objectProto = Object.prototype,
        getClass = objectProto.toString,
        isProperty = objectProto.hasOwnProperty,
        undefined;

    // Internal: Contains `try...catch` logic used by other functions.
    // This prevents other functions from being deoptimized.
    function attempt(func, errorFunc) {
      try {
        func();
      } catch (exception) {
        if (errorFunc) {
          errorFunc();
        }
      }
    }

    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.
    var isExtended = new Date(-3509827334573292);
    attempt(function () {
      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical
      // results for certain dates in Opera >= 10.53.
      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&
        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;
    });

    // Internal: Determines whether the native `JSON.stringify` and `parse`
    // implementations are spec-compliant. Based on work by Ken Snyder.
    function has(name) {
      if (has[name] != null) {
        // Return cached feature test result.
        return has[name];
      }
      var isSupported;
      if (name == "bug-string-char-index") {
        // IE <= 7 doesn't support accessing string characters using square
        // bracket notation. IE 8 only supports this for primitives.
        isSupported = "a"[0] != "a";
      } else if (name == "json") {
        // Indicates whether both `JSON.stringify` and `JSON.parse` are
        // supported.
        isSupported = has("json-stringify") && has("date-serialization") && has("json-parse");
      } else if (name == "date-serialization") {
        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.
        isSupported = has("json-stringify") && isExtended;
        if (isSupported) {
          var stringify = exports.stringify;
          attempt(function () {
            isSupported =
              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly
              // serialize extended years.
              stringify(new Date(-8.64e15)) == '"-271821-04-20T00:00:00.000Z"' &&
              // The milliseconds are optional in ES 5, but required in 5.1.
              stringify(new Date(8.64e15)) == '"+275760-09-13T00:00:00.000Z"' &&
              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative
              // four-digit years instead of six-digit years. Credits: @Yaffle.
              stringify(new Date(-621987552e5)) == '"-000001-01-01T00:00:00.000Z"' &&
              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond
              // values less than 1000. Credits: @Yaffle.
              stringify(new Date(-1)) == '"1969-12-31T23:59:59.999Z"';
          });
        }
      } else {
        var value, serialized = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
        // Test `JSON.stringify`.
        if (name == "json-stringify") {
          var stringify = exports.stringify, stringifySupported = typeof stringify == "function";
          if (stringifySupported) {
            // A test function object with a custom `toJSON` method.
            (value = function () {
              return 1;
            }).toJSON = value;
            attempt(function () {
              stringifySupported =
                // Firefox 3.1b1 and b2 serialize string, number, and boolean
                // primitives as object literals.
                stringify(0) === "0" &&
                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object
                // literals.
                stringify(new Number()) === "0" &&
                stringify(new String()) == '""' &&
                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or
                // does not define a canonical JSON representation (this applies to
                // objects with `toJSON` properties as well, *unless* they are nested
                // within an object or array).
                stringify(getClass) === undefined &&
                // IE 8 serializes `undefined` as `"undefined"`. Safari <= 5.1.7 and
                // FF 3.1b3 pass this test.
                stringify(undefined) === undefined &&
                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,
                // respectively, if the value is omitted entirely.
                stringify() === undefined &&
                // FF 3.1b1, 2 throw an error if the given value is not a number,
                // string, array, object, Boolean, or `null` literal. This applies to
                // objects with custom `toJSON` methods as well, unless they are nested
                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`
                // methods entirely.
                stringify(value) === "1" &&
                stringify([value]) == "[1]" &&
                // Prototype <= 1.6.1 serializes `[undefined]` as `"[]"` instead of
                // `"[null]"`.
                stringify([undefined]) == "[null]" &&
                // YUI 3.0.0b1 fails to serialize `null` literals.
                stringify(null) == "null" &&
                // FF 3.1b1, 2 halts serialization if an array contains a function:
                // `[1, true, getClass, 1]` serializes as "[1,true,],". FF 3.1b3
                // elides non-JSON values from objects and arrays, unless they
                // define custom `toJSON` methods.
                stringify([undefined, getClass, null]) == "[null,null,null]" &&
                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences
                // where character escape codes are expected (e.g., `\b` => `\u0008`).
                stringify({ "a": [value, true, false, null, "\x00\b\n\f\r\t"] }) == serialized &&
                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.
                stringify(null, value) === "1" &&
                stringify([1, 2], null, 1) == "[\n 1,\n 2\n]";
            }, function () {
              stringifySupported = false;
            });
          }
          isSupported = stringifySupported;
        }
        // Test `JSON.parse`.
        if (name == "json-parse") {
          var parse = exports.parse, parseSupported;
          if (typeof parse == "function") {
            attempt(function () {
              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.
              // Conforming implementations should also coerce the initial argument to
              // a string prior to parsing.
              if (parse("0") === 0 && !parse(false)) {
                // Simple parsing test.
                value = parse(serialized);
                parseSupported = value["a"].length == 5 && value["a"][0] === 1;
                if (parseSupported) {
                  attempt(function () {
                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.
                    parseSupported = !parse('"\t"');
                  });
                  if (parseSupported) {
                    attempt(function () {
                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading
                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow
                      // certain octal literals.
                      parseSupported = parse("01") !== 1;
                    });
                  }
                  if (parseSupported) {
                    attempt(function () {
                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal
                      // points. These environments, along with FF 3.1b1 and 2,
                      // also allow trailing commas in JSON objects and arrays.
                      parseSupported = parse("1.") !== 1;
                    });
                  }
                }
              }
            }, function () {
              parseSupported = false;
            });
          }
          isSupported = parseSupported;
        }
      }
      return has[name] = !!isSupported;
    }
    has["bug-string-char-index"] = has["date-serialization"] = has["json"] = has["json-stringify"] = has["json-parse"] = null;

    if (!has("json")) {
      // Common `[[Class]]` name aliases.
      var functionClass = "[object Function]",
          dateClass = "[object Date]",
          numberClass = "[object Number]",
          stringClass = "[object String]",
          arrayClass = "[object Array]",
          booleanClass = "[object Boolean]";

      // Detect incomplete support for accessing string characters by index.
      var charIndexBuggy = has("bug-string-char-index");

      // Internal: Normalizes the `for...in` iteration algorithm across
      // environments. Each enumerated key is yielded to a `callback` function.
      var forOwn = function (object, callback) {
        var size = 0, Properties, dontEnums, property;

        // Tests for bugs in the current environment's `for...in` algorithm. The
        // `valueOf` property inherits the non-enumerable flag from
        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.
        (Properties = function () {
          this.valueOf = 0;
        }).prototype.valueOf = 0;

        // Iterate over a new instance of the `Properties` class.
        dontEnums = new Properties();
        for (property in dontEnums) {
          // Ignore all properties inherited from `Object.prototype`.
          if (isProperty.call(dontEnums, property)) {
            size++;
          }
        }
        Properties = dontEnums = null;

        // Normalize the iteration algorithm.
        if (!size) {
          // A list of non-enumerable properties inherited from `Object.prototype`.
          dontEnums = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];
          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable
          // properties.
          forOwn = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, length;
            var hasProperty = !isFunction && typeof object.constructor != "function" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;
            for (property in object) {
              // Gecko <= 1.0 enumerates the `prototype` property of functions under
              // certain conditions; IE does not.
              if (!(isFunction && property == "prototype") && hasProperty.call(object, property)) {
                callback(property);
              }
            }
            // Manually invoke the callback for each non-enumerable property.
            for (length = dontEnums.length; property = dontEnums[--length];) {
              if (hasProperty.call(object, property)) {
                callback(property);
              }
            }
          };
        } else {
          // No bugs detected; use the standard `for...in` algorithm.
          forOwn = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, isConstructor;
            for (property in object) {
              if (!(isFunction && property == "prototype") && isProperty.call(object, property) && !(isConstructor = property === "constructor")) {
                callback(property);
              }
            }
            // Manually invoke the callback for the `constructor` property due to
            // cross-environment inconsistencies.
            if (isConstructor || isProperty.call(object, (property = "constructor"))) {
              callback(property);
            }
          };
        }
        return forOwn(object, callback);
      };

      // Public: Serializes a JavaScript `value` as a JSON string. The optional
      // `filter` argument may specify either a function that alters how object and
      // array members are serialized, or an array of strings and numbers that
      // indicates which properties should be serialized. The optional `width`
      // argument may be either a string or number that specifies the indentation
      // level of the output.
      if (!has("json-stringify") && !has("date-serialization")) {
        // Internal: A map of control characters and their escaped equivalents.
        var Escapes = {
          92: "\\\\",
          34: '\\"',
          8: "\\b",
          12: "\\f",
          10: "\\n",
          13: "\\r",
          9: "\\t"
        };

        // Internal: Converts `value` into a zero-padded string such that its
        // length is at least equal to `width`. The `width` must be <= 6.
        var leadingZeroes = "000000";
        var toPaddedString = function (width, value) {
          // The `|| 0` expression is necessary to work around a bug in
          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== "0"`.
          return (leadingZeroes + (value || 0)).slice(-width);
        };

        // Internal: Serializes a date object.
        var serializeDate = function (value) {
          var getData, year, month, date, time, hours, minutes, seconds, milliseconds;
          // Define additional utility methods if the `Date` methods are buggy.
          if (!isExtended) {
            var floor = Math.floor;
            // A mapping between the months of the year and the number of days between
            // January 1st and the first of the respective month.
            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
            // Internal: Calculates the number of days between the Unix epoch and the
            // first day of the given month.
            var getDay = function (year, month) {
              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);
            };
            getData = function (value) {
              // Manually compute the year, month, date, hours, minutes,
              // seconds, and milliseconds if the `getUTC*` methods are
              // buggy. Adapted from @Yaffle's `date-shim` project.
              date = floor(value / 864e5);
              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);
              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);
              date = 1 + date - getDay(year, month);
              // The `time` value specifies the time within the day (see ES
              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used
              // to compute `A modulo B`, as the `%` operator does not
              // correspond to the `modulo` operation for negative numbers.
              time = (value % 864e5 + 864e5) % 864e5;
              // The hours, minutes, seconds, and milliseconds are obtained by
              // decomposing the time within the day. See section 15.9.1.10.
              hours = floor(time / 36e5) % 24;
              minutes = floor(time / 6e4) % 60;
              seconds = floor(time / 1e3) % 60;
              milliseconds = time % 1e3;
            };
          } else {
            getData = function (value) {
              year = value.getUTCFullYear();
              month = value.getUTCMonth();
              date = value.getUTCDate();
              hours = value.getUTCHours();
              minutes = value.getUTCMinutes();
              seconds = value.getUTCSeconds();
              milliseconds = value.getUTCMilliseconds();
            };
          }
          serializeDate = function (value) {
            if (value > -1 / 0 && value < 1 / 0) {
              // Dates are serialized according to the `Date#toJSON` method
              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15
              // for the ISO 8601 date time string format.
              getData(value);
              // Serialize extended years correctly.
              value = (year <= 0 || year >= 1e4 ? (year < 0 ? "-" : "+") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +
              "-" + toPaddedString(2, month + 1) + "-" + toPaddedString(2, date) +
              // Months, dates, hours, minutes, and seconds should have two
              // digits; milliseconds should have three.
              "T" + toPaddedString(2, hours) + ":" + toPaddedString(2, minutes) + ":" + toPaddedString(2, seconds) +
              // Milliseconds are optional in ES 5.0, but required in 5.1.
              "." + toPaddedString(3, milliseconds) + "Z";
              year = month = date = hours = minutes = seconds = milliseconds = null;
            } else {
              value = null;
            }
            return value;
          };
          return serializeDate(value);
        };

        // For environments with `JSON.stringify` but buggy date serialization,
        // we override the native `Date#toJSON` implementation with a
        // spec-compliant one.
        if (has("json-stringify") && !has("date-serialization")) {
          // Internal: the `Date#toJSON` implementation used to override the native one.
          function dateToJSON (key) {
            return serializeDate(this);
          }

          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
          var nativeStringify = exports.stringify;
          exports.stringify = function (source, filter, width) {
            var nativeToJSON = Date.prototype.toJSON;
            Date.prototype.toJSON = dateToJSON;
            var result = nativeStringify(source, filter, width);
            Date.prototype.toJSON = nativeToJSON;
            return result;
          }
        } else {
          // Internal: Double-quotes a string `value`, replacing all ASCII control
          // characters (characters with code unit values between 0 and 31) with
          // their escaped equivalents. This is an implementation of the
          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.
          var unicodePrefix = "\\u00";
          var escapeChar = function (character) {
            var charCode = character.charCodeAt(0), escaped = Escapes[charCode];
            if (escaped) {
              return escaped;
            }
            return unicodePrefix + toPaddedString(2, charCode.toString(16));
          };
          var reEscape = /[\x00-\x1f\x22\x5c]/g;
          var quote = function (value) {
            reEscape.lastIndex = 0;
            return '"' +
              (
                reEscape.test(value)
                  ? value.replace(reEscape, escapeChar)
                  : value
              ) +
              '"';
          };

          // Internal: Recursively serializes an object. Implements the
          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.
          var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {
            var value, type, className, results, element, index, length, prefix, result;
            attempt(function () {
              // Necessary for host object support.
              value = object[property];
            });
            if (typeof value == "object" && value) {
              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {
                value = serializeDate(value);
              } else if (typeof value.toJSON == "function") {
                value = value.toJSON(property);
              }
            }
            if (callback) {
              // If a replacement function was provided, call it to obtain the value
              // for serialization.
              value = callback.call(object, property, value);
            }
            // Exit early if value is `undefined` or `null`.
            if (value == undefined) {
              return value === undefined ? value : "null";
            }
            type = typeof value;
            // Only call `getClass` if the value is an object.
            if (type == "object") {
              className = getClass.call(value);
            }
            switch (className || type) {
              case "boolean":
              case booleanClass:
                // Booleans are represented literally.
                return "" + value;
              case "number":
              case numberClass:
                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as
                // `"null"`.
                return value > -1 / 0 && value < 1 / 0 ? "" + value : "null";
              case "string":
              case stringClass:
                // Strings are double-quoted and escaped.
                return quote("" + value);
            }
            // Recursively serialize objects and arrays.
            if (typeof value == "object") {
              // Check for cyclic structures. This is a linear search; performance
              // is inversely proportional to the number of unique nested objects.
              for (length = stack.length; length--;) {
                if (stack[length] === value) {
                  // Cyclic structures cannot be serialized by `JSON.stringify`.
                  throw TypeError();
                }
              }
              // Add the object to the stack of traversed objects.
              stack.push(value);
              results = [];
              // Save the current indentation level and indent one additional level.
              prefix = indentation;
              indentation += whitespace;
              if (className == arrayClass) {
                // Recursively serialize array elements.
                for (index = 0, length = value.length; index < length; index++) {
                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);
                  results.push(element === undefined ? "null" : element);
                }
                result = results.length ? (whitespace ? "[\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "]" : ("[" + results.join(",") + "]")) : "[]";
              } else {
                // Recursively serialize object members. Members are selected from
                // either a user-specified list of property names, or the object
                // itself.
                forOwn(properties || value, function (property) {
                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);
                  if (element !== undefined) {
                    // According to ES 5.1 section 15.12.3: "If `gap` {whitespace}
                    // is not the empty string, let `member` {quote(property) + ":"}
                    // be the concatenation of `member` and the `space` character."
                    // The "`space` character" refers to the literal space
                    // character, not the `space` {width} argument provided to
                    // `JSON.stringify`.
                    results.push(quote(property) + ":" + (whitespace ? " " : "") + element);
                  }
                });
                result = results.length ? (whitespace ? "{\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "}" : ("{" + results.join(",") + "}")) : "{}";
              }
              // Remove the object from the traversed object stack.
              stack.pop();
              return result;
            }
          };

          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
          exports.stringify = function (source, filter, width) {
            var whitespace, callback, properties, className;
            if (objectTypes[typeof filter] && filter) {
              className = getClass.call(filter);
              if (className == functionClass) {
                callback = filter;
              } else if (className == arrayClass) {
                // Convert the property names array into a makeshift set.
                properties = {};
                for (var index = 0, length = filter.length, value; index < length;) {
                  value = filter[index++];
                  className = getClass.call(value);
                  if (className == "[object String]" || className == "[object Number]") {
                    properties[value] = 1;
                  }
                }
              }
            }
            if (width) {
              className = getClass.call(width);
              if (className == numberClass) {
                // Convert the `width` to an integer and create a string containing
                // `width` number of space characters.
                if ((width -= width % 1) > 0) {
                  if (width > 10) {
                    width = 10;
                  }
                  for (whitespace = ""; whitespace.length < width;) {
                    whitespace += " ";
                  }
                }
              } else if (className == stringClass) {
                whitespace = width.length <= 10 ? width : width.slice(0, 10);
              }
            }
            // Opera <= 7.54u2 discards the values associated with empty string keys
            // (`""`) only if they are used directly within an object member list
            // (e.g., `!("" in { "": 1})`).
            return serialize("", (value = {}, value[""] = source, value), callback, properties, whitespace, "", []);
          };
        }
      }

      // Public: Parses a JSON source string.
      if (!has("json-parse")) {
        var fromCharCode = String.fromCharCode;

        // Internal: A map of escaped control characters and their unescaped
        // equivalents.
        var Unescapes = {
          92: "\\",
          34: '"',
          47: "/",
          98: "\b",
          116: "\t",
          110: "\n",
          102: "\f",
          114: "\r"
        };

        // Internal: Stores the parser state.
        var Index, Source;

        // Internal: Resets the parser state and throws a `SyntaxError`.
        var abort = function () {
          Index = Source = null;
          throw SyntaxError();
        };

        // Internal: Returns the next token, or `"$"` if the parser has reached
        // the end of the source string. A token may be a string, number, `null`
        // literal, or Boolean literal.
        var lex = function () {
          var source = Source, length = source.length, value, begin, position, isSigned, charCode;
          while (Index < length) {
            charCode = source.charCodeAt(Index);
            switch (charCode) {
              case 9: case 10: case 13: case 32:
                // Skip whitespace tokens, including tabs, carriage returns, line
                // feeds, and space characters.
                Index++;
                break;
              case 123: case 125: case 91: case 93: case 58: case 44:
                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at
                // the current position.
                value = charIndexBuggy ? source.charAt(Index) : source[Index];
                Index++;
                return value;
              case 34:
                // `"` delimits a JSON string; advance to the next character and
                // begin parsing the string. String tokens are prefixed with the
                // sentinel `@` character to distinguish them from punctuators and
                // end-of-string tokens.
                for (value = "@", Index++; Index < length;) {
                  charCode = source.charCodeAt(Index);
                  if (charCode < 32) {
                    // Unescaped ASCII control characters (those with a code unit
                    // less than the space character) are not permitted.
                    abort();
                  } else if (charCode == 92) {
                    // A reverse solidus (`\`) marks the beginning of an escaped
                    // control character (including `"`, `\`, and `/`) or Unicode
                    // escape sequence.
                    charCode = source.charCodeAt(++Index);
                    switch (charCode) {
                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:
                        // Revive escaped control characters.
                        value += Unescapes[charCode];
                        Index++;
                        break;
                      case 117:
                        // `\u` marks the beginning of a Unicode escape sequence.
                        // Advance to the first character and validate the
                        // four-digit code point.
                        begin = ++Index;
                        for (position = Index + 4; Index < position; Index++) {
                          charCode = source.charCodeAt(Index);
                          // A valid sequence comprises four hexdigits (case-
                          // insensitive) that form a single hexadecimal value.
                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {
                            // Invalid Unicode escape sequence.
                            abort();
                          }
                        }
                        // Revive the escaped character.
                        value += fromCharCode("0x" + source.slice(begin, Index));
                        break;
                      default:
                        // Invalid escape sequence.
                        abort();
                    }
                  } else {
                    if (charCode == 34) {
                      // An unescaped double-quote character marks the end of the
                      // string.
                      break;
                    }
                    charCode = source.charCodeAt(Index);
                    begin = Index;
                    // Optimize for the common case where a string is valid.
                    while (charCode >= 32 && charCode != 92 && charCode != 34) {
                      charCode = source.charCodeAt(++Index);
                    }
                    // Append the string as-is.
                    value += source.slice(begin, Index);
                  }
                }
                if (source.charCodeAt(Index) == 34) {
                  // Advance to the next character and return the revived string.
                  Index++;
                  return value;
                }
                // Unterminated string.
                abort();
              default:
                // Parse numbers and literals.
                begin = Index;
                // Advance past the negative sign, if one is specified.
                if (charCode == 45) {
                  isSigned = true;
                  charCode = source.charCodeAt(++Index);
                }
                // Parse an integer or floating-point value.
                if (charCode >= 48 && charCode <= 57) {
                  // Leading zeroes are interpreted as octal literals.
                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {
                    // Illegal octal literal.
                    abort();
                  }
                  isSigned = false;
                  // Parse the integer component.
                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);
                  // Floats cannot contain a leading decimal point; however, this
                  // case is already accounted for by the parser.
                  if (source.charCodeAt(Index) == 46) {
                    position = ++Index;
                    // Parse the decimal component.
                    for (; position < length; position++) {
                      charCode = source.charCodeAt(position);
                      if (charCode < 48 || charCode > 57) {
                        break;
                      }
                    }
                    if (position == Index) {
                      // Illegal trailing decimal.
                      abort();
                    }
                    Index = position;
                  }
                  // Parse exponents. The `e` denoting the exponent is
                  // case-insensitive.
                  charCode = source.charCodeAt(Index);
                  if (charCode == 101 || charCode == 69) {
                    charCode = source.charCodeAt(++Index);
                    // Skip past the sign following the exponent, if one is
                    // specified.
                    if (charCode == 43 || charCode == 45) {
                      Index++;
                    }
                    // Parse the exponential component.
                    for (position = Index; position < length; position++) {
                      charCode = source.charCodeAt(position);
                      if (charCode < 48 || charCode > 57) {
                        break;
                      }
                    }
                    if (position == Index) {
                      // Illegal empty exponent.
                      abort();
                    }
                    Index = position;
                  }
                  // Coerce the parsed value to a JavaScript number.
                  return +source.slice(begin, Index);
                }
                // A negative sign may only precede numbers.
                if (isSigned) {
                  abort();
                }
                // `true`, `false`, and `null` literals.
                var temp = source.slice(Index, Index + 4);
                if (temp == "true") {
                  Index += 4;
                  return true;
                } else if (temp == "fals" && source.charCodeAt(Index + 4 ) == 101) {
                  Index += 5;
                  return false;
                } else if (temp == "null") {
                  Index += 4;
                  return null;
                }
                // Unrecognized token.
                abort();
            }
          }
          // Return the sentinel `$` character if the parser has reached the end
          // of the source string.
          return "$";
        };

        // Internal: Parses a JSON `value` token.
        var get = function (value) {
          var results, hasMembers;
          if (value == "$") {
            // Unexpected end of input.
            abort();
          }
          if (typeof value == "string") {
            if ((charIndexBuggy ? value.charAt(0) : value[0]) == "@") {
              // Remove the sentinel `@` character.
              return value.slice(1);
            }
            // Parse object and array literals.
            if (value == "[") {
              // Parses a JSON array, returning a new JavaScript array.
              results = [];
              for (;;) {
                value = lex();
                // A closing square bracket marks the end of the array literal.
                if (value == "]") {
                  break;
                }
                // If the array literal contains elements, the current token
                // should be a comma separating the previous element from the
                // next.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "]") {
                      // Unexpected trailing `,` in array literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each array element.
                    abort();
                  }
                } else {
                  hasMembers = true;
                }
                // Elisions and leading commas are not permitted.
                if (value == ",") {
                  abort();
                }
                results.push(get(value));
              }
              return results;
            } else if (value == "{") {
              // Parses a JSON object, returning a new JavaScript object.
              results = {};
              for (;;) {
                value = lex();
                // A closing curly brace marks the end of the object literal.
                if (value == "}") {
                  break;
                }
                // If the object literal contains members, the current token
                // should be a comma separator.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "}") {
                      // Unexpected trailing `,` in object literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each object member.
                    abort();
                  }
                } else {
                  hasMembers = true;
                }
                // Leading commas are not permitted, object property names must be
                // double-quoted strings, and a `:` must separate each property
                // name and value.
                if (value == "," || typeof value != "string" || (charIndexBuggy ? value.charAt(0) : value[0]) != "@" || lex() != ":") {
                  abort();
                }
                results[value.slice(1)] = get(lex());
              }
              return results;
            }
            // Unexpected token encountered.
            abort();
          }
          return value;
        };

        // Internal: Updates a traversed object member.
        var update = function (source, property, callback) {
          var element = walk(source, property, callback);
          if (element === undefined) {
            delete source[property];
          } else {
            source[property] = element;
          }
        };

        // Internal: Recursively traverses a parsed JSON object, invoking the
        // `callback` function for each value. This is an implementation of the
        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.
        var walk = function (source, property, callback) {
          var value = source[property], length;
          if (typeof value == "object" && value) {
            // `forOwn` can't be used to traverse an array in Opera <= 8.54
            // because its `Object#hasOwnProperty` implementation returns `false`
            // for array indices (e.g., `![1, 2, 3].hasOwnProperty("0")`).
            if (getClass.call(value) == arrayClass) {
              for (length = value.length; length--;) {
                update(getClass, forOwn, value, length, callback);
              }
            } else {
              forOwn(value, function (property) {
                update(value, property, callback);
              });
            }
          }
          return callback.call(source, property, value);
        };

        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.
        exports.parse = function (source, callback) {
          var result, value;
          Index = 0;
          Source = "" + source;
          result = get(lex());
          // If a JSON string contains multiple tokens, it is invalid.
          if (lex() != "$") {
            abort();
          }
          // Reset the parser state.
          Index = Source = null;
          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[""] = result, value), "", callback) : result;
        };
      }
    }

    exports.runInContext = runInContext;
    return exports;
  }

  if (freeExports && !isLoader) {
    // Export for CommonJS environments.
    runInContext(root, freeExports);
  } else {
    // Export for web browsers and JavaScript engines.
    var nativeJSON = root.JSON,
        previousJSON = root.JSON3,
        isRestored = false;

    var JSON3 = runInContext(root, (root.JSON3 = {
      // Public: Restores the original value of the global `JSON` object and
      // returns a reference to the `JSON3` object.
      "noConflict": function () {
        if (!isRestored) {
          isRestored = true;
          root.JSON = nativeJSON;
          root.JSON3 = previousJSON;
          nativeJSON = previousJSON = null;
        }
        return JSON3;
      }
    }));

    root.JSON = {
      "parse": JSON3.parse,
      "stringify": JSON3.stringify
    };
  }

  // Export for asynchronous module loaders.
  if (isLoader) {
    define(function () {
      return JSON3;
    });
  }
}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],59:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty
  , undef;

/**
 * Decode a URI encoded string.
 *
 * @param {String} input The URI encoded string.
 * @returns {String|Null} The decoded string.
 * @api private
 */
function decode(input) {
  try {
    return decodeURIComponent(input.replace(/\+/g, ' '));
  } catch (e) {
    return null;
  }
}

/**
 * Attempts to encode a given input.
 *
 * @param {String} input The string that needs to be encoded.
 * @returns {String|Null} The encoded string.
 * @api private
 */
function encode(input) {
  try {
    return encodeURIComponent(input);
  } catch (e) {
    return null;
  }
}

/**
 * Simple query string parser.
 *
 * @param {String} query The query string that needs to be parsed.
 * @returns {Object}
 * @api public
 */
function querystring(query) {
  var parser = /([^=?&]+)=?([^&]*)/g
    , result = {}
    , part;

  while (part = parser.exec(query)) {
    var key = decode(part[1])
      , value = decode(part[2]);

    //
    // Prevent overriding of existing properties. This ensures that build-in
    // methods like `toString` or __proto__ are not overriden by malicious
    // querystrings.
    //
    // In the case if failed decoding, we want to omit the key/value pairs
    // from the result.
    //
    if (key === null || value === null || key in result) continue;
    result[key] = value;
  }

  return result;
}

/**
 * Transform a query string to an object.
 *
 * @param {Object} obj Object that should be transformed.
 * @param {String} prefix Optional prefix.
 * @returns {String}
 * @api public
 */
function querystringify(obj, prefix) {
  prefix = prefix || '';

  var pairs = []
    , value
    , key;

  //
  // Optionally prefix with a '?' if needed
  //
  if ('string' !== typeof prefix) prefix = '?';

  for (key in obj) {
    if (has.call(obj, key)) {
      value = obj[key];

      //
      // Edge cases where we actually want to encode the value to an empty
      // string instead of the stringified value.
      //
      if (!value && (value === null || value === undef || isNaN(value))) {
        value = '';
      }

      key = encodeURIComponent(key);
      value = encodeURIComponent(value);

      //
      // If we failed to encode the strings, we should bail out as we don't
      // want to add invalid strings to the query.
      //
      if (key === null || value === null) continue;
      pairs.push(key +'='+ value);
    }
  }

  return pairs.length ? prefix + pairs.join('&') : '';
}

//
// Expose the module.
//
exports.stringify = querystringify;
exports.parse = querystring;

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Check if we're required to add a port number.
 *
 * @see https://url.spec.whatwg.org/#default-port
 * @param {Number|String} port Port number we need to check
 * @param {String} protocol Protocol we need to check against.
 * @returns {Boolean} Is it a default port for the given protocol
 * @api private
 */
module.exports = function required(port, protocol) {
  protocol = protocol.split(':')[0];
  port = +port;

  if (!port) return false;

  switch (protocol) {
    case 'http':
    case 'ws':
    return port !== 80;

    case 'https':
    case 'wss':
    return port !== 443;

    case 'ftp':
    return port !== 21;

    case 'gopher':
    return port !== 70;

    case 'file':
    return false;
  }

  return port !== 0;
};

},{}],61:[function(require,module,exports){
(function (global){
'use strict';

var required = require('requires-port')
  , qs = require('querystringify')
  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//
  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i
  , whitespace = '[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]'
  , left = new RegExp('^'+ whitespace +'+');

/**
 * Trim a given string.
 *
 * @param {String} str String to trim.
 * @public
 */
function trimLeft(str) {
  return (str ? str : '').toString().replace(left, '');
}

/**
 * These are the parse rules for the URL parser, it informs the parser
 * about:
 *
 * 0. The char it Needs to parse, if it's a string it should be done using
 *    indexOf, RegExp using exec and NaN means set as current value.
 * 1. The property we should set when parsing this value.
 * 2. Indication if it's backwards or forward parsing, when set as number it's
 *    the value of extra chars that should be split off.
 * 3. Inherit from location if non existing in the parser.
 * 4. `toLowerCase` the resulting value.
 */
var rules = [
  ['#', 'hash'],                        // Extract from the back.
  ['?', 'query'],                       // Extract from the back.
  function sanitize(address) {          // Sanitize what is left of the address
    return address.replace('\\', '/');
  },
  ['/', 'pathname'],                    // Extract from the back.
  ['@', 'auth', 1],                     // Extract from the front.
  [NaN, 'host', undefined, 1, 1],       // Set left over value.
  [/:(\d+)$/, 'port', undefined, 1],    // RegExp the back.
  [NaN, 'hostname', undefined, 1, 1]    // Set left over.
];

/**
 * These properties should not be copied or inherited from. This is only needed
 * for all non blob URL's as a blob URL does not include a hash, only the
 * origin.
 *
 * @type {Object}
 * @private
 */
var ignore = { hash: 1, query: 1 };

/**
 * The location object differs when your code is loaded through a normal page,
 * Worker or through a worker using a blob. And with the blobble begins the
 * trouble as the location object will contain the URL of the blob, not the
 * location of the page where our code is loaded in. The actual origin is
 * encoded in the `pathname` so we can thankfully generate a good "default"
 * location from it so we can generate proper relative URL's again.
 *
 * @param {Object|String} loc Optional default location object.
 * @returns {Object} lolcation object.
 * @public
 */
function lolcation(loc) {
  var globalVar;

  if (typeof window !== 'undefined') globalVar = window;
  else if (typeof global !== 'undefined') globalVar = global;
  else if (typeof self !== 'undefined') globalVar = self;
  else globalVar = {};

  var location = globalVar.location || {};
  loc = loc || location;

  var finaldestination = {}
    , type = typeof loc
    , key;

  if ('blob:' === loc.protocol) {
    finaldestination = new Url(unescape(loc.pathname), {});
  } else if ('string' === type) {
    finaldestination = new Url(loc, {});
    for (key in ignore) delete finaldestination[key];
  } else if ('object' === type) {
    for (key in loc) {
      if (key in ignore) continue;
      finaldestination[key] = loc[key];
    }

    if (finaldestination.slashes === undefined) {
      finaldestination.slashes = slashes.test(loc.href);
    }
  }

  return finaldestination;
}

/**
 * @typedef ProtocolExtract
 * @type Object
 * @property {String} protocol Protocol matched in the URL, in lowercase.
 * @property {Boolean} slashes `true` if protocol is followed by "//", else `false`.
 * @property {String} rest Rest of the URL that is not part of the protocol.
 */

/**
 * Extract protocol information from a URL with/without double slash ("//").
 *
 * @param {String} address URL we want to extract from.
 * @return {ProtocolExtract} Extracted information.
 * @private
 */
function extractProtocol(address) {
  address = trimLeft(address);
  var match = protocolre.exec(address);

  return {
    protocol: match[1] ? match[1].toLowerCase() : '',
    slashes: !!match[2],
    rest: match[3]
  };
}

/**
 * Resolve a relative URL pathname against a base URL pathname.
 *
 * @param {String} relative Pathname of the relative URL.
 * @param {String} base Pathname of the base URL.
 * @return {String} Resolved pathname.
 * @private
 */
function resolve(relative, base) {
  if (relative === '') return base;

  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))
    , i = path.length
    , last = path[i - 1]
    , unshift = false
    , up = 0;

  while (i--) {
    if (path[i] === '.') {
      path.splice(i, 1);
    } else if (path[i] === '..') {
      path.splice(i, 1);
      up++;
    } else if (up) {
      if (i === 0) unshift = true;
      path.splice(i, 1);
      up--;
    }
  }

  if (unshift) path.unshift('');
  if (last === '.' || last === '..') path.push('');

  return path.join('/');
}

/**
 * The actual URL instance. Instead of returning an object we've opted-in to
 * create an actual constructor as it's much more memory efficient and
 * faster and it pleases my OCD.
 *
 * It is worth noting that we should not use `URL` as class name to prevent
 * clashes with the global URL instance that got introduced in browsers.
 *
 * @constructor
 * @param {String} address URL we want to parse.
 * @param {Object|String} [location] Location defaults for relative paths.
 * @param {Boolean|Function} [parser] Parser for the query string.
 * @private
 */
function Url(address, location, parser) {
  address = trimLeft(address);

  if (!(this instanceof Url)) {
    return new Url(address, location, parser);
  }

  var relative, extracted, parse, instruction, index, key
    , instructions = rules.slice()
    , type = typeof location
    , url = this
    , i = 0;

  //
  // The following if statements allows this module two have compatibility with
  // 2 different API:
  //
  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments
  //    where the boolean indicates that the query string should also be parsed.
  //
  // 2. The `URL` interface of the browser which accepts a URL, object as
  //    arguments. The supplied object will be used as default values / fall-back
  //    for relative paths.
  //
  if ('object' !== type && 'string' !== type) {
    parser = location;
    location = null;
  }

  if (parser && 'function' !== typeof parser) parser = qs.parse;

  location = lolcation(location);

  //
  // Extract protocol information before running the instructions.
  //
  extracted = extractProtocol(address || '');
  relative = !extracted.protocol && !extracted.slashes;
  url.slashes = extracted.slashes || relative && location.slashes;
  url.protocol = extracted.protocol || location.protocol || '';
  address = extracted.rest;

  //
  // When the authority component is absent the URL starts with a path
  // component.
  //
  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];

  for (; i < instructions.length; i++) {
    instruction = instructions[i];

    if (typeof instruction === 'function') {
      address = instruction(address);
      continue;
    }

    parse = instruction[0];
    key = instruction[1];

    if (parse !== parse) {
      url[key] = address;
    } else if ('string' === typeof parse) {
      if (~(index = address.indexOf(parse))) {
        if ('number' === typeof instruction[2]) {
          url[key] = address.slice(0, index);
          address = address.slice(index + instruction[2]);
        } else {
          url[key] = address.slice(index);
          address = address.slice(0, index);
        }
      }
    } else if ((index = parse.exec(address))) {
      url[key] = index[1];
      address = address.slice(0, index.index);
    }

    url[key] = url[key] || (
      relative && instruction[3] ? location[key] || '' : ''
    );

    //
    // Hostname, host and protocol should be lowercased so they can be used to
    // create a proper `origin`.
    //
    if (instruction[4]) url[key] = url[key].toLowerCase();
  }

  //
  // Also parse the supplied query string in to an object. If we're supplied
  // with a custom parser as function use that instead of the default build-in
  // parser.
  //
  if (parser) url.query = parser(url.query);

  //
  // If the URL is relative, resolve the pathname against the base URL.
  //
  if (
      relative
    && location.slashes
    && url.pathname.charAt(0) !== '/'
    && (url.pathname !== '' || location.pathname !== '')
  ) {
    url.pathname = resolve(url.pathname, location.pathname);
  }

  //
  // We should not add port numbers if they are already the default port number
  // for a given protocol. As the host also contains the port number we're going
  // override it with the hostname which contains no port number.
  //
  if (!required(url.port, url.protocol)) {
    url.host = url.hostname;
    url.port = '';
  }

  //
  // Parse down the `auth` for the username and password.
  //
  url.username = url.password = '';
  if (url.auth) {
    instruction = url.auth.split(':');
    url.username = instruction[0] || '';
    url.password = instruction[1] || '';
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  //
  // The href is just the compiled result.
  //
  url.href = url.toString();
}

/**
 * This is convenience method for changing properties in the URL instance to
 * insure that they all propagate correctly.
 *
 * @param {String} part          Property we need to adjust.
 * @param {Mixed} value          The newly assigned value.
 * @param {Boolean|Function} fn  When setting the query, it will be the function
 *                               used to parse the query.
 *                               When setting the protocol, double slash will be
 *                               removed from the final url if it is true.
 * @returns {URL} URL instance for chaining.
 * @public
 */
function set(part, value, fn) {
  var url = this;

  switch (part) {
    case 'query':
      if ('string' === typeof value && value.length) {
        value = (fn || qs.parse)(value);
      }

      url[part] = value;
      break;

    case 'port':
      url[part] = value;

      if (!required(value, url.protocol)) {
        url.host = url.hostname;
        url[part] = '';
      } else if (value) {
        url.host = url.hostname +':'+ value;
      }

      break;

    case 'hostname':
      url[part] = value;

      if (url.port) value += ':'+ url.port;
      url.host = value;
      break;

    case 'host':
      url[part] = value;

      if (/:\d+$/.test(value)) {
        value = value.split(':');
        url.port = value.pop();
        url.hostname = value.join(':');
      } else {
        url.hostname = value;
        url.port = '';
      }

      break;

    case 'protocol':
      url.protocol = value.toLowerCase();
      url.slashes = !fn;
      break;

    case 'pathname':
    case 'hash':
      if (value) {
        var char = part === 'pathname' ? '/' : '#';
        url[part] = value.charAt(0) !== char ? char + value : value;
      } else {
        url[part] = value;
      }
      break;

    default:
      url[part] = value;
  }

  for (var i = 0; i < rules.length; i++) {
    var ins = rules[i];

    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  url.href = url.toString();

  return url;
}

/**
 * Transform the properties back in to a valid and full URL string.
 *
 * @param {Function} stringify Optional query stringify function.
 * @returns {String} Compiled version of the URL.
 * @public
 */
function toString(stringify) {
  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;

  var query
    , url = this
    , protocol = url.protocol;

  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';

  var result = protocol + (url.slashes ? '//' : '');

  if (url.username) {
    result += url.username;
    if (url.password) result += ':'+ url.password;
    result += '@';
  }

  result += url.host + url.pathname;

  query = 'object' === typeof url.query ? stringify(url.query) : url.query;
  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;

  if (url.hash) result += url.hash;

  return result;
}

Url.prototype = { set: set, toString: toString };

//
// Expose the URL parser and some additional properties that might be useful for
// others or testing.
//
Url.extractProtocol = extractProtocol;
Url.location = lolcation;
Url.trimLeft = trimLeft;
Url.qs = qs;

module.exports = Url;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"querystringify":59,"requires-port":60}]},{},[1])(1)
});


//# sourceMappingURL=sockjs.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/url/url.js":
/*!*********************************!*\
  !*** ./node_modules/url/url.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var punycode = __webpack_require__(/*! punycode */ "./node_modules/node-libs-browser/node_modules/punycode/punycode.js");
var util = __webpack_require__(/*! ./util */ "./node_modules/url/util.js");

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = __webpack_require__(/*! querystring */ "./node_modules/querystring-es3/index.js");

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};


/***/ }),

/***/ "./node_modules/url/util.js":
/*!**********************************!*\
  !*** ./node_modules/url/util.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};


/***/ }),

/***/ "./node_modules/webpack-dev-server/client/clients/BaseClient.js":
/*!*********************************************************!*\
  !*** (webpack)-dev-server/client/clients/BaseClient.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable
  no-unused-vars
*/

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

module.exports = /*#__PURE__*/function () {
  function BaseClient() {
    _classCallCheck(this, BaseClient);
  }

  _createClass(BaseClient, null, [{
    key: "getClientPath",
    value: function getClientPath(options) {
      throw new Error('Client needs implementation');
    }
  }]);

  return BaseClient;
}();

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js":
/*!***********************************************************!*\
  !*** (webpack)-dev-server/client/clients/SockJSClient.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable
  no-unused-vars
*/

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

var SockJS = __webpack_require__(/*! sockjs-client/dist/sockjs */ "./node_modules/sockjs-client/dist/sockjs.js");

var BaseClient = __webpack_require__(/*! ./BaseClient */ "./node_modules/webpack-dev-server/client/clients/BaseClient.js");

module.exports = /*#__PURE__*/function (_BaseClient) {
  _inherits(SockJSClient, _BaseClient);

  var _super = _createSuper(SockJSClient);

  function SockJSClient(url) {
    var _this;

    _classCallCheck(this, SockJSClient);

    _this = _super.call(this);
    _this.sock = new SockJS(url);

    _this.sock.onerror = function (err) {// TODO: use logger to log the error event once client and client-src
      // are reorganized to have the same directory structure
    };

    return _this;
  }

  _createClass(SockJSClient, [{
    key: "onOpen",
    value: function onOpen(f) {
      this.sock.onopen = f;
    }
  }, {
    key: "onClose",
    value: function onClose(f) {
      this.sock.onclose = f;
    } // call f with the message string as the first argument

  }, {
    key: "onMessage",
    value: function onMessage(f) {
      this.sock.onmessage = function (e) {
        f(e.data);
      };
    }
  }], [{
    key: "getClientPath",
    value: function getClientPath(options) {
      return /*require.resolve*/(/*! ./SockJSClient */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js");
    }
  }]);

  return SockJSClient;
}(BaseClient);

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/index.js?http://localhost:9000":
/*!*********************************************************!*\
  !*** (webpack)-dev-server/client?http://localhost:9000 ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__resourceQuery) {
/* global __resourceQuery WorkerGlobalScope self */

/* eslint prefer-destructuring: off */

var stripAnsi = __webpack_require__(/*! strip-ansi */ "./node_modules/webpack-dev-server/node_modules/strip-ansi/index.js");

var socket = __webpack_require__(/*! ./socket */ "./node_modules/webpack-dev-server/client/socket.js");

var overlay = __webpack_require__(/*! ./overlay */ "./node_modules/webpack-dev-server/client/overlay.js");

var _require = __webpack_require__(/*! ./utils/log */ "./node_modules/webpack-dev-server/client/utils/log.js"),
    log = _require.log,
    setLogLevel = _require.setLogLevel;

var sendMessage = __webpack_require__(/*! ./utils/sendMessage */ "./node_modules/webpack-dev-server/client/utils/sendMessage.js");

var reloadApp = __webpack_require__(/*! ./utils/reloadApp */ "./node_modules/webpack-dev-server/client/utils/reloadApp.js");

var createSocketUrl = __webpack_require__(/*! ./utils/createSocketUrl */ "./node_modules/webpack-dev-server/client/utils/createSocketUrl.js");

var status = {
  isUnloading: false,
  currentHash: ''
};
var options = {
  hot: false,
  hotReload: true,
  liveReload: false,
  initial: true,
  useWarningOverlay: false,
  useErrorOverlay: false,
  useProgress: false
};
var socketUrl = createSocketUrl(__resourceQuery);
self.addEventListener('beforeunload', function () {
  status.isUnloading = true;
});

if (typeof window !== 'undefined') {
  var qs = window.location.search.toLowerCase();
  options.hotReload = qs.indexOf('hotreload=false') === -1;
}

var onSocketMessage = {
  hot: function hot() {
    options.hot = true;
    log.info('[WDS] Hot Module Replacement enabled.');
  },
  liveReload: function liveReload() {
    options.liveReload = true;
    log.info('[WDS] Live Reloading enabled.');
  },
  invalid: function invalid() {
    log.info('[WDS] App updated. Recompiling...'); // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    sendMessage('Invalid');
  },
  hash: function hash(_hash) {
    status.currentHash = _hash;
  },
  'still-ok': function stillOk() {
    log.info('[WDS] Nothing changed.');

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    sendMessage('StillOk');
  },
  'log-level': function logLevel(level) {
    var hotCtx = __webpack_require__("./node_modules/webpack/hot sync ^\\.\\/log$");

    if (hotCtx.keys().indexOf('./log') !== -1) {
      hotCtx('./log').setLogLevel(level);
    }

    setLogLevel(level);
  },
  overlay: function overlay(value) {
    if (typeof document !== 'undefined') {
      if (typeof value === 'boolean') {
        options.useWarningOverlay = false;
        options.useErrorOverlay = value;
      } else if (value) {
        options.useWarningOverlay = value.warnings;
        options.useErrorOverlay = value.errors;
      }
    }
  },
  progress: function progress(_progress) {
    if (typeof document !== 'undefined') {
      options.useProgress = _progress;
    }
  },
  'progress-update': function progressUpdate(data) {
    if (options.useProgress) {
      log.info("[WDS] ".concat(data.percent, "% - ").concat(data.msg, "."));
    }

    sendMessage('Progress', data);
  },
  ok: function ok() {
    sendMessage('Ok');

    if (options.useWarningOverlay || options.useErrorOverlay) {
      overlay.clear();
    }

    if (options.initial) {
      return options.initial = false;
    } // eslint-disable-line no-return-assign


    reloadApp(options, status);
  },
  'content-changed': function contentChanged() {
    log.info('[WDS] Content base changed. Reloading...');
    self.location.reload();
  },
  warnings: function warnings(_warnings) {
    log.warn('[WDS] Warnings while compiling.');

    var strippedWarnings = _warnings.map(function (warning) {
      return stripAnsi(warning);
    });

    sendMessage('Warnings', strippedWarnings);

    for (var i = 0; i < strippedWarnings.length; i++) {
      log.warn(strippedWarnings[i]);
    }

    if (options.useWarningOverlay) {
      overlay.showMessage(_warnings);
    }

    if (options.initial) {
      return options.initial = false;
    } // eslint-disable-line no-return-assign


    reloadApp(options, status);
  },
  errors: function errors(_errors) {
    log.error('[WDS] Errors while compiling. Reload prevented.');

    var strippedErrors = _errors.map(function (error) {
      return stripAnsi(error);
    });

    sendMessage('Errors', strippedErrors);

    for (var i = 0; i < strippedErrors.length; i++) {
      log.error(strippedErrors[i]);
    }

    if (options.useErrorOverlay) {
      overlay.showMessage(_errors);
    }

    options.initial = false;
  },
  error: function error(_error) {
    log.error(_error);
  },
  close: function close() {
    log.error('[WDS] Disconnected!');
    sendMessage('Close');
  }
};
socket(socketUrl, onSocketMessage);
/* WEBPACK VAR INJECTION */}.call(this, "?http://localhost:9000"))

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/overlay.js":
/*!**********************************************!*\
  !*** (webpack)-dev-server/client/overlay.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
 // The error overlay is inspired (and mostly copied) from Create React App (https://github.com/facebookincubator/create-react-app)
// They, in turn, got inspired by webpack-hot-middleware (https://github.com/glenjamin/webpack-hot-middleware).

var ansiHTML = __webpack_require__(/*! ansi-html */ "./node_modules/ansi-html/index.js");

var _require = __webpack_require__(/*! html-entities */ "./node_modules/html-entities/lib/index.js"),
    AllHtmlEntities = _require.AllHtmlEntities;

var entities = new AllHtmlEntities();
var colors = {
  reset: ['transparent', 'transparent'],
  black: '181818',
  red: 'E36049',
  green: 'B3CB74',
  yellow: 'FFD080',
  blue: '7CAFC2',
  magenta: '7FACCA',
  cyan: 'C3C2EF',
  lightgrey: 'EBE7E3',
  darkgrey: '6D7891'
};
var overlayIframe = null;
var overlayDiv = null;
var lastOnOverlayDivReady = null;
ansiHTML.setColors(colors);

function createOverlayIframe(onIframeLoad) {
  var iframe = document.createElement('iframe');
  iframe.id = 'webpack-dev-server-client-overlay';
  iframe.src = 'about:blank';
  iframe.style.position = 'fixed';
  iframe.style.left = 0;
  iframe.style.top = 0;
  iframe.style.right = 0;
  iframe.style.bottom = 0;
  iframe.style.width = '100vw';
  iframe.style.height = '100vh';
  iframe.style.border = 'none';
  iframe.style.zIndex = 9999999999;
  iframe.onload = onIframeLoad;
  return iframe;
}

function addOverlayDivTo(iframe) {
  var div = iframe.contentDocument.createElement('div');
  div.id = 'webpack-dev-server-client-overlay-div';
  div.style.position = 'fixed';
  div.style.boxSizing = 'border-box';
  div.style.left = 0;
  div.style.top = 0;
  div.style.right = 0;
  div.style.bottom = 0;
  div.style.width = '100vw';
  div.style.height = '100vh';
  div.style.backgroundColor = 'rgba(0, 0, 0, 0.85)';
  div.style.color = '#E8E8E8';
  div.style.fontFamily = 'Menlo, Consolas, monospace';
  div.style.fontSize = 'large';
  div.style.padding = '2rem';
  div.style.lineHeight = '1.2';
  div.style.whiteSpace = 'pre-wrap';
  div.style.overflow = 'auto';
  iframe.contentDocument.body.appendChild(div);
  return div;
}

function ensureOverlayDivExists(onOverlayDivReady) {
  if (overlayDiv) {
    // Everything is ready, call the callback right away.
    onOverlayDivReady(overlayDiv);
    return;
  } // Creating an iframe may be asynchronous so we'll schedule the callback.
  // In case of multiple calls, last callback wins.


  lastOnOverlayDivReady = onOverlayDivReady;

  if (overlayIframe) {
    // We've already created it.
    return;
  } // Create iframe and, when it is ready, a div inside it.


  overlayIframe = createOverlayIframe(function () {
    overlayDiv = addOverlayDivTo(overlayIframe); // Now we can talk!

    lastOnOverlayDivReady(overlayDiv);
  }); // Zalgo alert: onIframeLoad() will be called either synchronously
  // or asynchronously depending on the browser.
  // We delay adding it so `overlayIframe` is set when `onIframeLoad` fires.

  document.body.appendChild(overlayIframe);
} // Successful compilation.


function clear() {
  if (!overlayDiv) {
    // It is not there in the first place.
    return;
  } // Clean up and reset internal state.


  document.body.removeChild(overlayIframe);
  overlayDiv = null;
  overlayIframe = null;
  lastOnOverlayDivReady = null;
} // Compilation with errors (e.g. syntax error or missing modules).


function showMessage(messages) {
  ensureOverlayDivExists(function (div) {
    // Make it look similar to our terminal.
    div.innerHTML = "<span style=\"color: #".concat(colors.red, "\">Failed to compile.</span><br><br>").concat(ansiHTML(entities.encode(messages[0])));
  });
}

module.exports = {
  clear: clear,
  showMessage: showMessage
};

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/socket.js":
/*!*********************************************!*\
  !*** (webpack)-dev-server/client/socket.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__webpack_dev_server_client__) {
/* global __webpack_dev_server_client__ */

/* eslint-disable
  camelcase
*/
// this SockJSClient is here as a default fallback, in case inline mode
// is off or the client is not injected. This will be switched to
// WebsocketClient when it becomes the default
// important: the path to SockJSClient here is made to work in the 'client'
// directory, but is updated via the webpack compilation when compiled from
// the 'client-src' directory

var Client = typeof __webpack_dev_server_client__ !== 'undefined' ? __webpack_dev_server_client__ : // eslint-disable-next-line import/no-unresolved
__webpack_require__(/*! ./clients/SockJSClient */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js");
var retries = 0;
var client = null;

var socket = function initSocket(url, handlers) {
  client = new Client(url);
  client.onOpen(function () {
    retries = 0;
  });
  client.onClose(function () {
    if (retries === 0) {
      handlers.close();
    } // Try to reconnect.


    client = null; // After 10 retries stop trying, to prevent logspam.

    if (retries <= 10) {
      // Exponentially increase timeout to reconnect.
      // Respectfully copied from the package `got`.
      // eslint-disable-next-line no-mixed-operators, no-restricted-properties
      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;
      retries += 1;
      setTimeout(function () {
        socket(url, handlers);
      }, retryInMs);
    }
  });
  client.onMessage(function (data) {
    var msg = JSON.parse(data);

    if (handlers[msg.type]) {
      handlers[msg.type](msg.data);
    }
  });
};

module.exports = socket;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! (webpack)-dev-server/client/clients/SockJSClient.js */ "./node_modules/webpack-dev-server/client/clients/SockJSClient.js")))

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/createSocketUrl.js":
/*!************************************************************!*\
  !*** (webpack)-dev-server/client/utils/createSocketUrl.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global self */

var url = __webpack_require__(/*! url */ "./node_modules/url/url.js");

var getCurrentScriptSource = __webpack_require__(/*! ./getCurrentScriptSource */ "./node_modules/webpack-dev-server/client/utils/getCurrentScriptSource.js");

function createSocketUrl(resourceQuery, currentLocation) {
  var urlParts;

  if (typeof resourceQuery === 'string' && resourceQuery !== '') {
    // If this bundle is inlined, use the resource query to get the correct url.
    // format is like `?http://0.0.0.0:8096&sockPort=8097&sockHost=localhost`
    urlParts = url.parse(resourceQuery // strip leading `?` from query string to get a valid URL
    .substr(1) // replace first `&` with `?` to have a valid query string
    .replace('&', '?'), true);
  } else {
    // Else, get the url from the <script> this file was called with.
    var scriptHost = getCurrentScriptSource();
    urlParts = url.parse(scriptHost || '/', true, true);
  } // Use parameter to allow passing location in unit tests


  if (typeof currentLocation === 'string' && currentLocation !== '') {
    currentLocation = url.parse(currentLocation);
  } else {
    currentLocation = self.location;
  }

  return getSocketUrl(urlParts, currentLocation);
}
/*
 * Gets socket URL based on Script Source/Location
 * (scriptSrc: URL, location: URL) -> URL
 */


function getSocketUrl(urlParts, loc) {
  var auth = urlParts.auth,
      query = urlParts.query;
  var hostname = urlParts.hostname,
      protocol = urlParts.protocol,
      port = urlParts.port;

  if (!port || port === '0') {
    port = loc.port;
  } // check ipv4 and ipv6 `all hostname`
  // why do we need this check?
  // hostname n/a for file protocol (example, when using electron, ionic)
  // see: https://github.com/webpack/webpack-dev-server/pull/384


  if ((hostname === '0.0.0.0' || hostname === '::') && loc.hostname && loc.protocol.indexOf('http') === 0) {
    hostname = loc.hostname;
  } // `hostname` can be empty when the script path is relative. In that case, specifying
  // a protocol would result in an invalid URL.
  // When https is used in the app, secure websockets are always necessary
  // because the browser doesn't accept non-secure websockets.


  if (hostname && hostname !== '127.0.0.1' && (loc.protocol === 'https:' || urlParts.hostname === '0.0.0.0')) {
    protocol = loc.protocol;
  } // all of these sock url params are optionally passed in through
  // resourceQuery, so we need to fall back to the default if
  // they are not provided


  var sockHost = query.sockHost || hostname;
  var sockPath = query.sockPath || '/sockjs-node';
  var sockPort = query.sockPort || port;

  if (sockPort === 'location') {
    sockPort = loc.port;
  }

  return url.format({
    protocol: protocol,
    auth: auth,
    hostname: sockHost,
    port: sockPort,
    // If sockPath is provided it'll be passed in via the resourceQuery as a
    // query param so it has to be parsed out of the querystring in order for the
    // client to open the socket to the correct location.
    pathname: sockPath
  });
}

module.exports = createSocketUrl;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/getCurrentScriptSource.js":
/*!*******************************************************************!*\
  !*** (webpack)-dev-server/client/utils/getCurrentScriptSource.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function getCurrentScriptSource() {
  // `document.currentScript` is the most accurate way to find the current script,
  // but is not supported in all browsers.
  if (document.currentScript) {
    return document.currentScript.getAttribute('src');
  } // Fall back to getting all scripts in the document.


  var scriptElements = document.scripts || [];
  var currentScript = scriptElements[scriptElements.length - 1];

  if (currentScript) {
    return currentScript.getAttribute('src');
  } // Fail as there was no script to use.


  throw new Error('[WDS] Failed to get current script source.');
}

module.exports = getCurrentScriptSource;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/log.js":
/*!************************************************!*\
  !*** (webpack)-dev-server/client/utils/log.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var log = __webpack_require__(/*! loglevel */ "./node_modules/loglevel/lib/loglevel.js").getLogger('webpack-dev-server');

var INFO = 'info';
var WARN = 'warn';
var ERROR = 'error';
var DEBUG = 'debug';
var TRACE = 'trace';
var SILENT = 'silent'; // deprecated
// TODO: remove these at major released
// https://github.com/webpack/webpack-dev-server/pull/1825

var WARNING = 'warning';
var NONE = 'none'; // Set the default log level

log.setDefaultLevel(INFO);

function setLogLevel(level) {
  switch (level) {
    case INFO:
    case WARN:
    case ERROR:
    case DEBUG:
    case TRACE:
      log.setLevel(level);
      break;
    // deprecated

    case WARNING:
      // loglevel's warning name is different from webpack's
      log.setLevel('warn');
      break;
    // deprecated

    case NONE:
    case SILENT:
      log.disableAll();
      break;

    default:
      log.error("[WDS] Unknown clientLogLevel '".concat(level, "'"));
  }
}

module.exports = {
  log: log,
  setLogLevel: setLogLevel
};

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/reloadApp.js":
/*!******************************************************!*\
  !*** (webpack)-dev-server/client/utils/reloadApp.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global WorkerGlobalScope self */

var _require = __webpack_require__(/*! ./log */ "./node_modules/webpack-dev-server/client/utils/log.js"),
    log = _require.log;

function reloadApp(_ref, _ref2) {
  var hotReload = _ref.hotReload,
      hot = _ref.hot,
      liveReload = _ref.liveReload;
  var isUnloading = _ref2.isUnloading,
      currentHash = _ref2.currentHash;

  if (isUnloading || !hotReload) {
    return;
  }

  if (hot) {
    log.info('[WDS] App hot update...');

    var hotEmitter = __webpack_require__(/*! webpack/hot/emitter */ "./node_modules/webpack/hot/emitter.js");

    hotEmitter.emit('webpackHotUpdate', currentHash);

    if (typeof self !== 'undefined' && self.window) {
      // broadcast update to window
      self.postMessage("webpackHotUpdate".concat(currentHash), '*');
    }
  } // allow refreshing the page only if liveReload isn't disabled
  else if (liveReload) {
      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)

      var intervalId = self.setInterval(function () {
        if (rootWindow.location.protocol !== 'about:') {
          // reload immediately if protocol is valid
          applyReload(rootWindow, intervalId);
        } else {
          rootWindow = rootWindow.parent;

          if (rootWindow.parent === rootWindow) {
            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways
            applyReload(rootWindow, intervalId);
          }
        }
      });
    }

  function applyReload(rootWindow, intervalId) {
    clearInterval(intervalId);
    log.info('[WDS] App updated. Reloading...');
    rootWindow.location.reload();
  }
}

module.exports = reloadApp;

/***/ }),

/***/ "./node_modules/webpack-dev-server/client/utils/sendMessage.js":
/*!********************************************************!*\
  !*** (webpack)-dev-server/client/utils/sendMessage.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global __resourceQuery WorkerGlobalScope self */
// Send messages to the outside, so plugins can consume it.

function sendMsg(type, data) {
  if (typeof self !== 'undefined' && (typeof WorkerGlobalScope === 'undefined' || !(self instanceof WorkerGlobalScope))) {
    self.postMessage({
      type: "webpack".concat(type),
      data: data
    }, '*');
  }
}

module.exports = sendMsg;

/***/ }),

/***/ "./node_modules/webpack-dev-server/node_modules/ansi-regex/index.js":
/*!*************************************************************!*\
  !*** (webpack)-dev-server/node_modules/ansi-regex/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function () {
	return /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;
};


/***/ }),

/***/ "./node_modules/webpack-dev-server/node_modules/strip-ansi/index.js":
/*!*************************************************************!*\
  !*** (webpack)-dev-server/node_modules/strip-ansi/index.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ansiRegex = __webpack_require__(/*! ansi-regex */ "./node_modules/webpack-dev-server/node_modules/ansi-regex/index.js")();

module.exports = function (str) {
	return typeof str === 'string' ? str.replace(ansiRegex, '') : str;
};


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./node_modules/webpack/hot sync ^\\.\\/log$":
/*!*************************************************!*\
  !*** (webpack)/hot sync nonrecursive ^\.\/log$ ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./log": "./node_modules/webpack/hot/log.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/webpack/hot sync ^\\.\\/log$";

/***/ }),

/***/ "./node_modules/webpack/hot/emitter.js":
/*!********************************!*\
  !*** (webpack)/hot/emitter.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var EventEmitter = __webpack_require__(/*! events */ "./node_modules/events/events.js");
module.exports = new EventEmitter();


/***/ }),

/***/ "./node_modules/webpack/hot/log.js":
/*!****************************!*\
  !*** (webpack)/hot/log.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports) {

var logLevel = "info";

function dummy() {}

function shouldLog(level) {
	var shouldLog =
		(logLevel === "info" && level === "info") ||
		(["info", "warning"].indexOf(logLevel) >= 0 && level === "warning") ||
		(["info", "warning", "error"].indexOf(logLevel) >= 0 && level === "error");
	return shouldLog;
}

function logGroup(logFn) {
	return function(level, msg) {
		if (shouldLog(level)) {
			logFn(msg);
		}
	};
}

module.exports = function(level, msg) {
	if (shouldLog(level)) {
		if (level === "info") {
			console.log(msg);
		} else if (level === "warning") {
			console.warn(msg);
		} else if (level === "error") {
			console.error(msg);
		}
	}
};

/* eslint-disable node/no-unsupported-features/node-builtins */
var group = console.group || dummy;
var groupCollapsed = console.groupCollapsed || dummy;
var groupEnd = console.groupEnd || dummy;
/* eslint-enable node/no-unsupported-features/node-builtins */

module.exports.group = logGroup(group);

module.exports.groupCollapsed = logGroup(groupCollapsed);

module.exports.groupEnd = logGroup(groupEnd);

module.exports.setLogLevel = function(level) {
	logLevel = level;
};

module.exports.formatError = function(err) {
	var message = err.message;
	var stack = err.stack;
	if (!stack) {
		return message;
	} else if (stack.indexOf(message) < 0) {
		return message + "\n" + stack;
	} else {
		return stack;
	}
};


/***/ }),

/***/ "./src/core/Game.ts":
/*!**************************!*\
  !*** ./src/core/Game.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Game = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const ecsy_babylon_1 = __webpack_require__(/*! ../ecsy-babylon */ "./src/ecsy-babylon/index.ts");
class Game extends ecsy_1.World {
    constructor() {
        super();
    }
    /** Get all Entity instances. */
    get entities() {
        return this["entityManager"]._entities;
    }
    /** Get all System instances. */
    get systems() {
        return this["systemManager"]._systems;
    }
    /** Get GameSystem instance. */
    get gameSystem() {
        return this.getSystem(ecsy_babylon_1.GameSystem);
    }
    /** Get singleton of Game instance. */
    static instance() {
        this._game || (this._game = new Game());
        return this._game;
    }
    /**
     * Start game with an empty scene.
     * @param canvas Canvas for webgl context
     * @param systems Systems going to used besides GameSystem, TransformSystem and CameraSystem
     */
    start(canvas, systems) {
        this
            .registerSystem(ecsy_babylon_1.GameSystem)
            .registerSystem(ecsy_babylon_1.TransformSystem)
            .registerSystem(ecsy_babylon_1.CameraSystem);
        systems.forEach(system => this.registerSystem(system));
        this.gameSystem.start(canvas);
        return this;
    }
    /** Create an entity with Transform component. */
    createEntity() {
        return super.createEntity().addComponent(ecsy_babylon_1.Transform);
    }
    /** Create a scene entity. */
    createScene(color) {
        return super.createEntity().addComponent(ecsy_babylon_1.Scene, { color: color });
    }
    /** Show Babylon.js insepctor */
    showDebugger() {
        this.gameSystem.activeScene.debugLayer.show();
    }
}
exports.Game = Game;


/***/ }),

/***/ "./src/ecsy-babylon/components/Camera.ts":
/*!***********************************************!*\
  !*** ./src/ecsy-babylon/components/Camera.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Camera = void 0;
/**
 * @example
 * ```
 * entity.addComponent(Camera, { pointerLock: true });
 * ```
 */
class Camera {
    constructor() {
        /**
         * Lock pointer when using the camera.
         * @see https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API
         * @default false
         */
        this.pointerLock = false;
    }
}
exports.Camera = Camera;


/***/ }),

/***/ "./src/ecsy-babylon/components/Input.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Input.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Input = exports.InputTypes = void 0;
var InputTypes;
(function (InputTypes) {
    InputTypes["Keyboard"] = "Keyboard";
})(InputTypes = exports.InputTypes || (exports.InputTypes = {}));
/**
 * @example Keyboard
 * ```
 * entity.addComponent(Input, { onKey: onKey });
 * function onKey(key, down, up) {
 *   if (down) console.log(key + " is pressing.");
 * }
 * ```
 */
class Input {
    constructor() {
        /** @default "Keyboard" */
        this.type = InputTypes.Keyboard;
    }
}
exports.Input = Input;


/***/ }),

/***/ "./src/ecsy-babylon/components/Light.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Light.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Light = exports.LightTypes = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
var LightTypes;
(function (LightTypes) {
    LightTypes["Point"] = "Point";
    LightTypes["Directional"] = "Directional";
    LightTypes["Spot"] = "Spot";
    LightTypes["Hemispheric"] = "Hemispheric";
})(LightTypes = exports.LightTypes || (exports.LightTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Light, { color: { diffuse: "#AAFFAA" } });
 * entity.addComponent(Light, { type: LightTypes.Point, intensity: 2 });
 * entity.addComponent(Light, { type: LightTypes.Directional, direction: { x: 0, y: 0, z: 1 } });
 * entity.addComponent(Light, { type: LightTypes.Spot, direction: { x: 0, y: 0, z: 1 }, angle: 30, exponent: 2 });
 * ```
 */
class Light {
    constructor() {
        /** @default "Hemispheric" */
        this.type = LightTypes.Hemispheric;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.shadowlight#direction
         * @default 0,0,0
         */
        this.direction = mathUtils_1.xyz();
    }
}
exports.Light = Light;


/***/ }),

/***/ "./src/ecsy-babylon/components/Material.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/components/Material.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Material = void 0;
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/**
 * @example
 * ```
 * entity.addComponent(Mesh).addComponent(Material, {
 *    alpha: 0.7,
 *    color: { diffuse: "#E74C3C" }
 * });
 * entity.addComponent(Mesh).addComponent(Material, {
 *    texture: {
 *      diffuse: { url: "PATH_TO_TEXTURE", uScale: 4, vScale: 4 }
 *    }
 * });
 * ```
 */
class Material {
    constructor() {
        /** @default { diffuse: "#ffffff" } */
        this.color = materialUtils_1.materialColorHex();
    }
}
exports.Material = Material;


/***/ }),

/***/ "./src/ecsy-babylon/components/Mesh.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/components/Mesh.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Mesh = exports.MeshTypes = void 0;
var MeshTypes;
(function (MeshTypes) {
    MeshTypes["Box"] = "Box";
    MeshTypes["Plane"] = "Plane";
    MeshTypes["Sphere"] = "Sphere";
    MeshTypes["Ground"] = "Ground";
    MeshTypes["Url"] = "Url";
})(MeshTypes = exports.MeshTypes || (exports.MeshTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Mesh);
 * entity.addComponent(Mesh, { type: MeshTypes.Ground, options: { width: 2, height: 2 } });
 * entity.addComponent(Mesh, { type: MeshTypes.Sphere, options: { diameter: 2 } });
 * entity.addComponent(Mesh, { type: MeshTypes.Url, url: "PATH_TO_MESH" });
 * ```
 */
class Mesh {
    constructor() {
        /** @default "Box" */
        this.type = MeshTypes.Box;
    }
}
exports.Mesh = Mesh;


/***/ }),

/***/ "./src/ecsy-babylon/components/Particle.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/components/Particle.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Particle = exports.ParticleTypes = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
var ParticleTypes;
(function (ParticleTypes) {
    ParticleTypes["Point"] = "Point";
    ParticleTypes["Box"] = "Box";
    ParticleTypes["Sphere"] = "Sphere";
    ParticleTypes["DirectedSphere"] = "DirectedSphere";
    ParticleTypes["Hemisphere"] = "Hemisphere";
    ParticleTypes["Cylinder"] = "Cylinder";
    ParticleTypes["DirectedCylinder"] = "DirectedCylinder";
    ParticleTypes["Cone"] = "Cone";
})(ParticleTypes = exports.ParticleTypes || (exports.ParticleTypes = {}));
/**
 * @example
 * ```
 * entity.addComponent(Particle, {
 *    emitter: { x: 0, y: 0, z: 1 },
 *    texture: {
 *      diffuse: { url: "PATH_TO_PARTICLE_TEXTURE" }
 *    }
 * });
 * ```
 */
class Particle {
    constructor() {
        /** @default "Point" */
        this.type = ParticleTypes.Point;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.particlesystem#constructor
         * @default 100
         */
        this.capacity = 100;
        /**
         * @see https://doc.babylonjs.com/api/classes/babylon.particlesystem#emitter
         * @default 0,0,0
         */
        this.emitter = mathUtils_1.xyz();
        /**
         * @memberof Point, Box, DirectedSphere, Cylinder
         * @default 0,0,0
         */
        this.direction1 = mathUtils_1.xyz();
        /**
         * @memberof Point, Box, DirectedSphere, Cylinder
         * @default 10,10,10
         */
        this.direction2 = mathUtils_1.xyz(10, 10, 10);
        /**
         * @memberof Box
         * @default 0,0,0
         */
        this.minEmitBox = mathUtils_1.xyz();
        /**
         * @memberof Box
         * @default 0,0,0
         */
        this.maxEmitBox = mathUtils_1.xyz();
    }
}
exports.Particle = Particle;


/***/ }),

/***/ "./src/ecsy-babylon/components/Scene.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/Scene.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Scene = void 0;
/**
 * @example
 * ```
 * entity.addComponent(Scene, { color: { clear: "123ABCFF" } });
 * ```
 */
class Scene {
}
exports.Scene = Scene;


/***/ }),

/***/ "./src/ecsy-babylon/components/Transform.ts":
/*!**************************************************!*\
  !*** ./src/ecsy-babylon/components/Transform.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.Transform = void 0;
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
/**
 * @example
 * ```
 * entity.addComponent(Transform);
 * ```
 */
class Transform {
    constructor() {
        /** @default 0,0,0 */
        this.position = mathUtils_1.xyz();
        /** @default 0,0,0 */
        this.rotation = mathUtils_1.xyz();
        /** @default 1,1,1 */
        this.scale = mathUtils_1.xyz(1, 1, 1);
    }
}
exports.Transform = Transform;


/***/ }),

/***/ "./src/ecsy-babylon/components/index.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/components/index.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./Scene */ "./src/ecsy-babylon/components/Scene.ts"), exports);
__exportStar(__webpack_require__(/*! ./Transform */ "./src/ecsy-babylon/components/Transform.ts"), exports);
__exportStar(__webpack_require__(/*! ./Camera */ "./src/ecsy-babylon/components/Camera.ts"), exports);
__exportStar(__webpack_require__(/*! ./Mesh */ "./src/ecsy-babylon/components/Mesh.ts"), exports);
__exportStar(__webpack_require__(/*! ./Light */ "./src/ecsy-babylon/components/Light.ts"), exports);
__exportStar(__webpack_require__(/*! ./Material */ "./src/ecsy-babylon/components/Material.ts"), exports);
__exportStar(__webpack_require__(/*! ./Particle */ "./src/ecsy-babylon/components/Particle.ts"), exports);
__exportStar(__webpack_require__(/*! ./Input */ "./src/ecsy-babylon/components/Input.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ColorComponent.ts":
/*!*************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ColorComponent.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/LightColorProperties.ts":
/*!*******************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/LightColorProperties.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MaterialColorProperties.ts":
/*!**********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MaterialColorProperties.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MaterialTextureProperties.ts":
/*!************************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MaterialTextureProperties.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/MeshOptions.ts":
/*!**********************************************************!*\
  !*** ./src/ecsy-babylon/components/types/MeshOptions.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ObjectComponent.ts":
/*!**************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ObjectComponent.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ParticleColorProperties.ts":
/*!**********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ParticleColorProperties.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/ParticleTextureProperties.ts":
/*!************************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/ParticleTextureProperties.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneColorProperties.ts":
/*!*******************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneColorProperties.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneComponent.ts":
/*!*************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneComponent.ts ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/SceneTextureProperties.ts":
/*!*********************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/SceneTextureProperties.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/TextureAttributes.ts":
/*!****************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/TextureAttributes.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/TextureComponent.ts":
/*!***************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/TextureComponent.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/XYZProperties.ts":
/*!************************************************************!*\
  !*** ./src/ecsy-babylon/components/types/XYZProperties.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/ecsy-babylon/components/types/index.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/components/types/index.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./SceneComponent */ "./src/ecsy-babylon/components/types/SceneComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./SceneColorProperties */ "./src/ecsy-babylon/components/types/SceneColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./SceneTextureProperties */ "./src/ecsy-babylon/components/types/SceneTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ObjectComponent */ "./src/ecsy-babylon/components/types/ObjectComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./XYZProperties */ "./src/ecsy-babylon/components/types/XYZProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./MeshOptions */ "./src/ecsy-babylon/components/types/MeshOptions.ts"), exports);
__exportStar(__webpack_require__(/*! ./ColorComponent */ "./src/ecsy-babylon/components/types/ColorComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./TextureComponent */ "./src/ecsy-babylon/components/types/TextureComponent.ts"), exports);
__exportStar(__webpack_require__(/*! ./TextureAttributes */ "./src/ecsy-babylon/components/types/TextureAttributes.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialColorProperties */ "./src/ecsy-babylon/components/types/MaterialColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialTextureProperties */ "./src/ecsy-babylon/components/types/MaterialTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./LightColorProperties */ "./src/ecsy-babylon/components/types/LightColorProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleTextureProperties */ "./src/ecsy-babylon/components/types/ParticleTextureProperties.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleColorProperties */ "./src/ecsy-babylon/components/types/ParticleColorProperties.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/index.ts":
/*!***********************************!*\
  !*** ./src/ecsy-babylon/index.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./systems/index */ "./src/ecsy-babylon/systems/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./components/index */ "./src/ecsy-babylon/components/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./components/types/index */ "./src/ecsy-babylon/components/types/index.ts"), exports);
__exportStar(__webpack_require__(/*! ./utils/index */ "./src/ecsy-babylon/utils/index.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/systems/CameraSystem.ts":
/*!**************************************************!*\
  !*** ./src/ecsy-babylon/systems/CameraSystem.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CameraSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
/** System for Camera component */
let CameraSystem = /** @class */ (() => {
    class CameraSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            /** <BABYLON.Scene.uid, Camera component> */
            this._cameras = new Map();
        }
        /** @hidden */
        init() {
            gameUtils_1.getSystem(this, GameSystem_1.GameSystem).onSceneSwitched.add(scene => this._updateControl(scene));
            this._pointerLock = this._pointerLock.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.camera.added.forEach((entity) => {
                let camera = entity.getComponent(index_1.Camera);
                let scene = gameUtils_1.getScene(this, camera.scene);
                camera.object = new BABYLON.FreeCamera("", BABYLON.Vector3.Zero(), scene);
                objectUtils_1.updateObjectsTransform(entity);
                this._cameras.set(scene.uid, camera);
                this._updateControl(scene);
            });
            this.queries.camera.removed.forEach((entity) => {
                let camera = entity.getComponent(index_1.Camera);
                let scene = gameUtils_1.getScene(this, camera.scene);
                this._removeControl(scene);
                this._cameras.has(scene.uid) && this._cameras.delete(scene.uid);
                objectUtils_1.disposeObject(camera);
            });
        }
        _updateControl(targetScene) {
            if (targetScene.uid === gameUtils_1.getScene(this).uid) {
                gameUtils_1.getScenes(this).forEach(scene => this._removeControl(scene));
                let camera = this._cameras.get(targetScene.uid);
                camera.object.attachControl(gameUtils_1.getRenderingCanvas(this));
                camera.pointerLock ? targetScene.onPointerObservable.add(this._pointerLock) : document.exitPointerLock();
            }
        }
        _removeControl(scene) {
            this._cameras.forEach((camera, sceneUID) => sceneUID === scene.uid && camera.object.detachControl(gameUtils_1.getRenderingCanvas(this)));
            scene.onPointerObservable.removeCallback(this._pointerLock);
        }
        _pointerLock(pointerInfo) {
            pointerInfo.event.type === "pointerdown" && (document.pointerLockElement || gameUtils_1.getRenderingCanvas(this).requestPointerLock());
        }
    }
    /** @hidden */
    CameraSystem.queries = {
        camera: { components: [index_1.Camera], listen: { added: true, removed: true } },
    };
    return CameraSystem;
})();
exports.CameraSystem = CameraSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/GameSystem.ts":
/*!************************************************!*\
  !*** ./src/ecsy-babylon/systems/GameSystem.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.GameSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const BABYLONGUI = __webpack_require__(/*! babylonjs-gui */ "./node_modules/babylonjs-gui/babylon.gui.min.js");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const worldUtils_1 = __webpack_require__(/*! ../utils/worldUtils */ "./src/ecsy-babylon/utils/worldUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** Core system of ecsy-babylon. */
let GameSystem = /** @class */ (() => {
    class GameSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            /** <Scene UID, BABYLON.AssetsManager> */
            this._assetManagers = new Map();
            /** Observable event when active scene is switched. */
            this.onSceneSwitched = new BABYLON.Observable();
        }
        /** Get canvas used for rendering. */
        get renderingCanvas() { return this._engine.getRenderingCanvas(); }
        /** Get all scenes in engine. */
        get scenes() { return this._engine.scenes; }
        /** Get active scene. */
        get activeScene() { return this._activeScene; }
        /** @hidden */
        init() {
            this._render = this._render.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.scene.added.forEach((entity) => {
                let scene = entity.getComponent(index_1.Scene);
                scene.object = new BABYLON.Scene(this._engine, scene.options);
                this._engine.scenes.length === 1 && (this._activeScene = scene.object);
                this._updateScene(entity);
                // add assetManager for each scenes 
                let assetManager = new BABYLON.AssetsManager(scene.object);
                assetManager.useDefaultLoadingScreen = false;
                this._assetManagers.set(scene.object.uid, assetManager);
                createSkybox(scene.object);
            });
            this.queries.scene.changed.forEach((entity) => {
                this._updateScene(entity);
            });
            this.queries.scene.removed.forEach((entity) => {
                let scene = entity.getComponent(index_1.Scene);
                objectUtils_1.disposeObject(scene);
            });
        }
        _updateScene(entity) {
            let scene = entity.getComponent(index_1.Scene);
            for (let prop in scene) {
                switch (prop) {
                    case "texture":
                        materialUtils_1.updateTexture(scene, scene.texture, this.getAssetManager(entity));
                        break;
                    case "color":
                        this._updateColor(scene, scene.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(scene, prop);
                        break;
                }
            }
        }
        _updateColor(scene, color) {
            for (let prop in color) {
                switch (prop) {
                    case "clear":
                        scene.object[`${prop}Color`] = materialUtils_1.hexToColor4(color[prop]);
                        break;
                    default:
                        scene.object[`${prop}Color`] = materialUtils_1.hexToColor3(color[prop]);
                        break;
                }
            }
        }
        /**
         * Start game system in the world can be used by other systems & components.
         * @see https://doc.babylonjs.com/api/classes/babylon.engine#constructor
         * @param canvas WebGL context to be used for rendering
         * @param antialias defines enable antialiasing (default: false)
         * @param options @see https://doc.babylonjs.com/api/interfaces/babylon.engineoptions
         * @param adaptToDeviceRatio defines whether to adapt to the device's viewport characteristics (default: false)
         */
        start(canvas, antialias, options, adaptToDeviceRatio) {
            this._engine = new BABYLON.Engine(canvas, antialias, options, adaptToDeviceRatio);
            this._engine.runRenderLoop(this._render);
            return this;
        }
        /**
         * Switch to a scene by given scene entity.
         * @param scene Scene entity
         */
        switchScene(scene) {
            this._activeScene = scene.getComponent(index_1.Scene).object;
            this.onSceneSwitched.notifyObservers(this._activeScene);
            return this;
        }
        /**
         * Get scene AssetManager or return AssetManager in active scene.
         * @param scene Scene entity
         */
        getAssetManager(scene) {
            if (scene) {
                return this._assetManagers.get(scene.getComponent(index_1.Scene).object.uid);
            }
            else {
                return this._assetManagers.get(this._activeScene.uid);
            }
        }
        /**
         * Log a message to the screen
         * @param message text to display in a stack panel
         */
        logMessage(message) {
            console.log('log', message);
            if (!this._messages) {
                this._messages = createTextPanel();
            }
            this._messages.addControl(createTextBlock(message));
        }
        _render() {
            worldUtils_1.getWorld(this).execute(this._engine.getDeltaTime(), performance.now());
            worldUtils_1.getWorld(this).enabled && this._activeScene.render();
        }
    }
    /** @hidden */
    GameSystem.queries = {
        scene: { components: [index_1.Scene], listen: { added: true, removed: true, changed: [index_1.Scene] } },
    };
    return GameSystem;
})();
exports.GameSystem = GameSystem;
function createTextPanel() {
    var advancedTexture = BABYLONGUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
    var grid = new BABYLONGUI.Grid();
    grid.addColumnDefinition(1 / 3);
    grid.addColumnDefinition(1 / 3);
    grid.addColumnDefinition(1 / 3);
    advancedTexture.addControl(grid);
    var stack = new BABYLONGUI.StackPanel();
    stack.verticalAlignment = BABYLONGUI.Control.VERTICAL_ALIGNMENT_BOTTOM;
    grid.addControl(stack, 0, 2);
    return stack;
}
function createTextBlock(text, color = "red") {
    var textBlock = new BABYLONGUI.TextBlock();
    textBlock.text = text;
    textBlock.color = color;
    textBlock.fontSize = 12;
    textBlock.textHorizontalAlignment = BABYLONGUI.Control.HORIZONTAL_ALIGNMENT_LEFT;
    textBlock.height = "15px";
    return textBlock;
}
function createSkybox(scene) {
    var skybox = BABYLON.MeshBuilder.CreateBox("skyBox", { size: 1000.0 }, scene);
    var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
    skyboxMaterial.backFaceCulling = false;
    skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("textures/skybox", scene);
    skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
    skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
    skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
    skybox.material = skyboxMaterial;
}


/***/ }),

/***/ "./src/ecsy-babylon/systems/InputSystem.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/systems/InputSystem.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.InputSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
/** System for Input component */
let InputSystem = /** @class */ (() => {
    class InputSystem extends ecsy_1.System {
        constructor() {
            super(...arguments);
            this._inputs = new Map();
        }
        init() {
            gameUtils_1.getSystem(this, GameSystem_1.GameSystem).onSceneSwitched.add(scene => this._updateOnKey(scene));
            this._onKey = this._onKey.bind(this);
        }
        /** @hidden */
        execute() {
            this.queries.input.added.forEach((entity) => {
                let input = entity.getComponent(index_1.Input);
                let scene = gameUtils_1.getScene(this, input.scene);
                switch (input.type) {
                    default:
                        if (!this._inputs.has(scene.uid)) {
                            this._inputs.set(scene.uid, input);
                            this._updateOnKey(scene);
                        }
                        break;
                }
            });
            this.queries.input.removed.forEach((entity) => {
                let input = entity.getComponent(index_1.Input);
                let scene = gameUtils_1.getScene(this, input.scene);
                switch (input.type) {
                    default:
                        if (this._inputs.has(scene.uid)) {
                            this._inputs.delete(scene.uid);
                            this._removeOnKey(scene);
                        }
                        break;
                }
            });
        }
        _updateOnKey(targetScene) {
            if (targetScene.uid === gameUtils_1.getScene(this).uid) {
                gameUtils_1.getScenes(this).forEach(scene => this._removeOnKey(scene));
                this._input = this._inputs.get(targetScene.uid);
                this._input.onKey && targetScene.onKeyboardObservable.add(this._onKey);
            }
        }
        _removeOnKey(scene) {
            scene.onKeyboardObservable.removeCallback(this._onKey);
        }
        _onKey(keyInfo) {
            // BABYLON.KeyboardEventTypes.KEYDOWN = 1, BABYLON.KeyboardEventTypes.KEYUP = 2
            this._input.onKey.call(this._input, keyInfo.event.key, keyInfo.type === 1, keyInfo.type === 2);
        }
    }
    /** @hidden */
    InputSystem.queries = {
        input: { components: [index_1.Input], listen: { added: true, removed: true } },
    };
    return InputSystem;
})();
exports.InputSystem = InputSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/LightSystem.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/systems/LightSystem.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.LightSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Light component */
let LightSystem = /** @class */ (() => {
    class LightSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.light.added.forEach((entity) => {
                let light = entity.getComponent(index_1.Light);
                let direction = mathUtils_1.xyzToVector3(light.direction);
                let scene = gameUtils_1.getScene(this, light.scene);
                switch (light.type) {
                    case index_1.LightTypes.Point:
                        light.object = new BABYLON.PointLight(light.type, BABYLON.Vector3.Zero(), scene);
                        break;
                    case index_1.LightTypes.Directional:
                        light.object = new BABYLON.DirectionalLight(light.type, direction, scene);
                        break;
                    case index_1.LightTypes.Spot:
                        light.object = new BABYLON.SpotLight(light.type, BABYLON.Vector3.Zero(), direction, mathUtils_1.degreeToRadians(light.angle), light.exponent, scene);
                        break;
                    default:
                        light.object = new BABYLON.HemisphericLight(index_1.LightTypes.Hemispheric, direction, scene);
                        break;
                }
                this._updateLight(light);
                objectUtils_1.updateObjectsTransform(entity);
            });
            this.queries.light.changed.forEach((entity) => {
                this._updateLight(entity.getComponent(index_1.Light));
            });
            this.queries.light.removed.forEach((entity) => {
                objectUtils_1.disposeObject(entity.getComponent(index_1.Light));
            });
        }
        _updateLight(light) {
            for (let prop in light) {
                switch (prop) {
                    case "direction":
                        objectUtils_1.updateObjectVector3(light, prop);
                        break;
                    case "color":
                        this._updateColor(light, light.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(light, prop);
                        break;
                }
            }
        }
        _updateColor(light, color) {
            for (let prop in color) {
                light.object[prop] = materialUtils_1.hexToColor3(color[prop]);
            }
        }
    }
    /** @hidden */
    LightSystem.queries = {
        light: { components: [index_1.Light], listen: { added: true, removed: true, changed: [index_1.Light] } },
    };
    return LightSystem;
})();
exports.LightSystem = LightSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/MaterialSystem.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/systems/MaterialSystem.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.MaterialSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** System for Material component */
let MaterialSystem = /** @class */ (() => {
    class MaterialSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.meshMaterial.added.forEach((entity) => {
                if (!this._isUrlMesh(entity)) {
                    let material = entity.getComponent(index_1.Material);
                    material.object = new BABYLON.StandardMaterial(material.color.diffuse, gameUtils_1.getScene(this, material.scene));
                    this._updateMaterial(material);
                    let mesh = entity.getComponent(index_1.Mesh);
                    mesh.object.material = material.object;
                }
            });
            this.queries.meshMaterial.changed.forEach((entity) => {
                this._isUrlMesh(entity) || this._updateMaterial(entity.getComponent(index_1.Material));
            });
            this.queries.meshMaterial.removed.forEach((entity) => {
                if (!this._isUrlMesh(entity)) {
                    objectUtils_1.disposeObject(entity.getComponent(index_1.Material));
                    entity.getComponent(index_1.Mesh).object.material = null;
                }
            });
        }
        _isUrlMesh(entity) {
            return entity.getComponent(index_1.Mesh).type === index_1.MeshTypes.Url;
        }
        _updateMaterial(material) {
            for (let prop in material) {
                switch (prop) {
                    case "color":
                        this._updateColor(material, material.color);
                        break;
                    case "texture":
                        materialUtils_1.updateTexture(material, material.texture, gameUtils_1.getAssetManager(this, material.scene));
                        break;
                    default:
                        objectUtils_1.updateObjectValue(material, prop);
                        break;
                }
            }
        }
        _updateColor(material, color) {
            for (let prop in color) {
                (material.object[`${prop}Color`] = materialUtils_1.hexToColor3(color[prop]));
            }
        }
    }
    /** @hidden */
    MaterialSystem.queries = {
        meshMaterial: { components: [index_1.Mesh, index_1.Material], listen: { added: true, removed: true, changed: [index_1.Material] } },
    };
    return MaterialSystem;
})();
exports.MaterialSystem = MaterialSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/MeshSystem.ts":
/*!************************************************!*\
  !*** ./src/ecsy-babylon/systems/MeshSystem.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.MeshSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const objectUtils_2 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Mesh component */
let MeshSystem = /** @class */ (() => {
    class MeshSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.mesh.added.forEach((entity) => {
                this._updateMesh(entity, entity.getComponent(index_1.Mesh));
            });
            this.queries.mesh.changed.forEach((entity) => {
                objectUtils_2.disposeObject(entity.getComponent(index_1.Mesh));
                this._updateMesh(entity, entity.getComponent(index_1.Mesh));
            });
            this.queries.mesh.removed.forEach((entity) => {
                objectUtils_2.disposeObject(entity.getComponent(index_1.Mesh));
            });
        }
        _updateMesh(entity, mesh) {
            switch (mesh.type) {
                case index_1.MeshTypes.Url:
                    mesh.url && BABYLON.SceneLoader.IsPluginForExtensionAvailable(this._fileExt(mesh.url)) ?
                        this._loadUrlMesh(entity, mesh, mesh.url) :
                        this._unsupportedMesh(entity, mesh);
                    break;
                default:
                    mesh.object = BABYLON.MeshBuilder[`Create${mesh.type}`].call(this, mesh.type, mesh.options ? mesh.options : {}, gameUtils_1.getScene(this, mesh.scene));
                    this._updateMeshValue(mesh);
                    objectUtils_1.updateObjectsTransform(entity);
                    break;
            }
        }
        _fileExt(url) {
            return url.substring(url.lastIndexOf("."), url.length);
        }
        _loadUrlMesh(entity, mesh, url) {
            let assetManager = gameUtils_1.getAssetManager(this, mesh.scene);
            let filenameIndex = url.lastIndexOf("/") + 1;
            let task = assetManager.addMeshTask(mesh.type, "", url.substring(0, filenameIndex), url.substring(filenameIndex, url.length));
            task.onSuccess = (task) => {
                mesh.object = task.loadedMeshes[0];
                this._updateMeshValue(mesh);
                objectUtils_1.updateObjectsTransform(entity);
            };
            task.onError = () => { this._unsupportedMesh(entity, mesh); };
            assetManager.load();
            assetManager.reset();
        }
        _updateMeshValue(mesh) {
            for (let prop in mesh) {
                objectUtils_1.updateObjectValue(mesh, prop);
            }
        }
        _unsupportedMesh(entity, mesh) {
            let scene = gameUtils_1.getScene(this, mesh.scene);
            mesh.object = BABYLON.MeshBuilder.CreatePlane("", {}, scene);
            let material = new BABYLON.StandardMaterial("", scene);
            const errorData = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURSgoKCgoKCgoKO88OVVpm6AAAAACdFJOU/LlgHlY8AAAAP9JREFUOMvN1MFtwzAMBVB3nU7RcQsSKDcI96EPvrPAZ0nZkRUZKXKMb36xPr+UxMvX8nB9LDRdy+fj/ff7gES4bKYUBPYDdLOQcEgDY1cx6AqIjUADQFYvUNohkAFBEbFP+Y1MRAPboU1JOKdUj8rgp1BLWo+jaQutQUdotDuqMS+eRxblzM8F3kHDkIAD8kNxcBbukCuidmADaILcITOheST/g2wDVIYEX+Gckj2q7NkjmyYMTRlU4K/+HJQNEWttGDtIwZZffgcH8rkJgtFBC2h44oYCHeCWoRztUBugQP0E15pCP32JyzT2AiZT0zyL2gvd4T3+YpeXwfy6+ANZO9QlB5svlAAAAABJRU5ErkJggg==";
            // BABYLON.Texture.BILINEAR_SAMPLINGMODE = 2
            material.diffuseTexture = new BABYLON.Texture("data:errorData", scene, false, false, 2, null, null, errorData, true);
            mesh.object.material = material;
            objectUtils_1.updateObjectsTransform(entity);
        }
    }
    /** @hidden */
    MeshSystem.queries = {
        mesh: { components: [index_1.Mesh], listen: { added: true, removed: true, changed: [index_1.Mesh] } },
    };
    return MeshSystem;
})();
exports.MeshSystem = MeshSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/ParticleSystem.ts":
/*!****************************************************!*\
  !*** ./src/ecsy-babylon/systems/ParticleSystem.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.ParticleSystem = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const gameUtils_1 = __webpack_require__(/*! ../utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
const mathUtils_1 = __webpack_require__(/*! ../utils/mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
const materialUtils_1 = __webpack_require__(/*! ../utils/materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
/** System for Particle component */
let ParticleSystem = /** @class */ (() => {
    class ParticleSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.particle.added.forEach((entity) => {
                let particle = entity.getComponent(index_1.Particle);
                particle.object = new BABYLON.ParticleSystem(particle.type, particle.capacity, gameUtils_1.getScene(this, particle.scene));
                let particleObject = particle.object;
                switch (particle.type) {
                    case index_1.ParticleTypes.Point:
                        particleObject.createPointEmitter(mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Box:
                        particleObject.createBoxEmitter(mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2), mathUtils_1.xyzToVector3(particle.minEmitBox), mathUtils_1.xyzToVector3(particle.maxEmitBox));
                        break;
                    case index_1.ParticleTypes.Sphere:
                        particleObject.createSphereEmitter(particle.radius, particle.radiusRange);
                        break;
                    case index_1.ParticleTypes.DirectedSphere:
                        particleObject.createDirectedSphereEmitter(particle.radius, mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Hemisphere:
                        particleObject.createHemisphericEmitter(particle.radius, particle.radiusRange);
                        break;
                    case index_1.ParticleTypes.Cylinder:
                        particleObject.createCylinderEmitter(particle.radius, particle.height, particle.radiusRange, Math.random());
                        break;
                    case index_1.ParticleTypes.DirectedCylinder:
                        particleObject.createDirectedCylinderEmitter(particle.radius, particle.height, particle.radiusRange, mathUtils_1.xyzToVector3(particle.direction1), mathUtils_1.xyzToVector3(particle.direction2));
                        break;
                    case index_1.ParticleTypes.Cone:
                        particleObject.createConeEmitter(particle.radius, particle.angle);
                        break;
                }
                this._updateParticle(particle);
                objectUtils_1.updateObjectsTransform(entity);
                particleObject.start();
            });
            this.queries.particle.changed.forEach((entity) => {
                this._updateParticle(entity.getComponent(index_1.Particle));
            });
            this.queries.particle.removed.forEach((entity) => {
                let particle = entity.getComponent(index_1.Particle);
                particle.object.stop();
                objectUtils_1.disposeObject(particle);
            });
        }
        _updateParticle(particle) {
            for (let prop in particle) {
                switch (prop) {
                    case "emitter":
                    case "direction1":
                    case "direction2":
                    case "minEmitBox":
                    case "maxEmitBox":
                        objectUtils_1.updateObjectVector3(particle, prop);
                        break;
                    case "texture":
                        materialUtils_1.updateTexture(particle, particle.texture, gameUtils_1.getAssetManager(this, particle.scene));
                        break;
                    case "color":
                        this._updateColor(particle, particle.color);
                        break;
                    default:
                        objectUtils_1.updateObjectValue(particle, prop);
                        break;
                }
            }
        }
        _updateColor(particle, color) {
            for (let prop in color) {
                particle.object[prop] = materialUtils_1.hexToColor4(color[prop]);
            }
        }
    }
    /** @hidden */
    ParticleSystem.queries = {
        particle: { components: [index_1.Particle], listen: { added: true, removed: true, changed: [index_1.Particle] } },
    };
    return ParticleSystem;
})();
exports.ParticleSystem = ParticleSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/TransformSystem.ts":
/*!*****************************************************!*\
  !*** ./src/ecsy-babylon/systems/TransformSystem.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.TransformSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const index_1 = __webpack_require__(/*! ../components/index */ "./src/ecsy-babylon/components/index.ts");
const objectUtils_1 = __webpack_require__(/*! ../utils/objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/** System for Transform component */
let TransformSystem = /** @class */ (() => {
    class TransformSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.transforms.changed.forEach((entity) => {
                objectUtils_1.updateObjectsTransform(entity);
            });
        }
    }
    /** @hidden */
    TransformSystem.queries = {
        transforms: { components: [index_1.Transform], listen: { changed: [index_1.Transform] } },
    };
    return TransformSystem;
})();
exports.TransformSystem = TransformSystem;


/***/ }),

/***/ "./src/ecsy-babylon/systems/index.ts":
/*!*******************************************!*\
  !*** ./src/ecsy-babylon/systems/index.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
__exportStar(__webpack_require__(/*! ./GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./TransformSystem */ "./src/ecsy-babylon/systems/TransformSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./CameraSystem */ "./src/ecsy-babylon/systems/CameraSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./MeshSystem */ "./src/ecsy-babylon/systems/MeshSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./LightSystem */ "./src/ecsy-babylon/systems/LightSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./MaterialSystem */ "./src/ecsy-babylon/systems/MaterialSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./ParticleSystem */ "./src/ecsy-babylon/systems/ParticleSystem.ts"), exports);
__exportStar(__webpack_require__(/*! ./InputSystem */ "./src/ecsy-babylon/systems/InputSystem.ts"), exports);


/***/ }),

/***/ "./src/ecsy-babylon/utils/gameUtils.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/utils/gameUtils.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.logMessage = exports.getAssetManager = exports.getScene = exports.getScenes = exports.getRenderingCanvas = exports.getSystem = void 0;
const worldUtils_1 = __webpack_require__(/*! ./worldUtils */ "./src/ecsy-babylon/utils/worldUtils.ts");
const GameSystem_1 = __webpack_require__(/*! ../systems/GameSystem */ "./src/ecsy-babylon/systems/GameSystem.ts");
const Scene_1 = __webpack_require__(/*! ../components/Scene */ "./src/ecsy-babylon/components/Scene.ts");
/** @hidden */
function getSystem(self, target) {
    return worldUtils_1.getWorld(self).getSystem(target);
}
exports.getSystem = getSystem;
/**
 * @hidden
 * Get canvas used for rendering.
 * @param system A registered ecsy System class
 */
function getRenderingCanvas(system) {
    return getSystem(system, GameSystem_1.GameSystem).renderingCanvas;
}
exports.getRenderingCanvas = getRenderingCanvas;
/**
 * @hidden
 * Get all scenes in engine.
 * @param system A registered ecsy System class
 */
function getScenes(system) {
    return getSystem(system, GameSystem_1.GameSystem).scenes;
}
exports.getScenes = getScenes;
/**
 * Get a scene or return active scene.
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function getScene(system, scene) {
    if (scene) {
        return scene.getComponent(Scene_1.Scene).object;
    }
    else {
        return getSystem(system, GameSystem_1.GameSystem).activeScene;
    }
}
exports.getScene = getScene;
/**
 * Get scene AssetManager or return AssetManager in active scene.
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function getAssetManager(system, scene) {
    return getSystem(system, GameSystem_1.GameSystem).getAssetManager(scene);
}
exports.getAssetManager = getAssetManager;
/**
 * Log a message to the screen
 * @param system A registered ecsy System class
 * @param scene Scene entity
 */
function logMessage(system, message) {
    return getSystem(system, GameSystem_1.GameSystem).logMessage(message);
}
exports.logMessage = logMessage;


/***/ }),

/***/ "./src/ecsy-babylon/utils/index.ts":
/*!*****************************************!*\
  !*** ./src/ecsy-babylon/utils/index.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var gameUtils_1 = __webpack_require__(/*! ./gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
Object.defineProperty(exports, "getScene", { enumerable: true, get: function () { return gameUtils_1.getScene; } });
Object.defineProperty(exports, "getAssetManager", { enumerable: true, get: function () { return gameUtils_1.getAssetManager; } });
var mathUtils_1 = __webpack_require__(/*! ./mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
Object.defineProperty(exports, "degreeToRadians", { enumerable: true, get: function () { return mathUtils_1.degreeToRadians; } });
Object.defineProperty(exports, "xyzToVector3", { enumerable: true, get: function () { return mathUtils_1.xyzToVector3; } });
Object.defineProperty(exports, "xyzToVector3Radians", { enumerable: true, get: function () { return mathUtils_1.xyzToVector3Radians; } });
var materialUtils_1 = __webpack_require__(/*! ./materialUtils */ "./src/ecsy-babylon/utils/materialUtils.ts");
Object.defineProperty(exports, "hexToColor3", { enumerable: true, get: function () { return materialUtils_1.hexToColor3; } });
Object.defineProperty(exports, "hexToColor4", { enumerable: true, get: function () { return materialUtils_1.hexToColor4; } });


/***/ }),

/***/ "./src/ecsy-babylon/utils/materialUtils.ts":
/*!*************************************************!*\
  !*** ./src/ecsy-babylon/utils/materialUtils.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hexToColor4 = exports.hexToColor3 = exports.materialColorHex = exports.updateTexture = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
const objectUtils_1 = __webpack_require__(/*! ./objectUtils */ "./src/ecsy-babylon/utils/objectUtils.ts");
/**
 * @hidden
 * Update texture object to a component for its texture properties.
 * @param component TextureComponent in the entity
 * @param textureProperties Texture properties to be update
 * @param assetManager AssetManager to process textures
 */
function updateTexture(component, textureProperties, assetManager) {
    for (let prop in textureProperties) {
        let textureAttributes = textureProperties[prop];
        let task = assetManager.addTextureTask(prop, textureAttributes.url);
        task.onSuccess = (task) => {
            let textureObject = task.texture;
            for (let attr in textureAttributes) {
                attr !== "url" && (textureObject[attr] = textureAttributes[attr]);
            }
            let textureName = `${prop}Texture`;
            let componentObject = component.object;
            componentObject[textureName] && objectUtils_1.disposeObject(componentObject[textureName]);
            componentObject[textureName] = textureObject;
        };
    }
    assetManager.load();
    assetManager.reset();
}
exports.updateTexture = updateTexture;
/**
 * @hidden
 * Create object of material color values or create a material color object with white diffuse.
 * @param diffuse Diffuse color in hex string. e.g., #123ABC
 * @returns Object matches MaterialColorProperties
 */
function materialColorHex(diffuse) {
    if (diffuse) {
        return { diffuse: diffuse };
    }
    else {
        return { diffuse: "#ffffff" };
    }
}
exports.materialColorHex = materialColorHex;
/**
 * Convert hex color value to Color3.
 * @param hexString Text of hex color value(e.g., #123ABC)
 */
function hexToColor3(hexString) {
    return BABYLON.Color3.FromHexString(hexString);
}
exports.hexToColor3 = hexToColor3;
/**
 * Convert hex color value to Color4 (has alpha).
 * @param hexString Text of hex color value(e.g., #123ABCFF)
 */
function hexToColor4(hexString) {
    return BABYLON.Color4.FromHexString(hexString);
}
exports.hexToColor4 = hexToColor4;


/***/ }),

/***/ "./src/ecsy-babylon/utils/mathUtils.ts":
/*!*********************************************!*\
  !*** ./src/ecsy-babylon/utils/mathUtils.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.xyz = exports.xyzToVector3Radians = exports.xyzToVector3 = exports.degreeToRadians = void 0;
const BABYLON = __webpack_require__(/*! babylonjs */ "babylonjs");
/**
 * Translate degree to radians.
 * @param degree Degree
 */
function degreeToRadians(degree) {
    return BABYLON.Angle.FromDegrees(degree).radians();
}
exports.degreeToRadians = degreeToRadians;
/**
 * Convert XYZProperties value to Vector3.
 * @param properties XYZProperties value
 */
function xyzToVector3(properties) {
    return new BABYLON.Vector3(properties.x, properties.y, properties.z);
}
exports.xyzToVector3 = xyzToVector3;
/**
 * Convert XYZProperties degree value to Vector3 in radians.
 * @param properties XYZProperties value in degrees
 */
function xyzToVector3Radians(properties) {
    return new BABYLON.Vector3(degreeToRadians(properties.x), degreeToRadians(properties.y), degreeToRadians(properties.z));
}
exports.xyzToVector3Radians = xyzToVector3Radians;
/**
 * @hidden
 * Create object by XYZ values or create all zero object.
 * @param x value
 * @param y value
 * @param z value
 * @returns Object matches XYZProperties
 */
function xyz(x, y, z) {
    if (x && y && z) {
        return { x: x, y: y, z: z };
    }
    else {
        return { x: 0, y: 0, z: 0 };
    }
}
exports.xyz = xyz;


/***/ }),

/***/ "./src/ecsy-babylon/utils/objectUtils.ts":
/*!***********************************************!*\
  !*** ./src/ecsy-babylon/utils/objectUtils.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.disposeObject = exports.updateObjectTransform = exports.updateObjectsTransform = exports.getObjectComponents = exports.updateObjectVector3 = exports.updateObjectValue = void 0;
const Transform_1 = __webpack_require__(/*! ../components/Transform */ "./src/ecsy-babylon/components/Transform.ts");
const mathUtils_1 = __webpack_require__(/*! ./mathUtils */ "./src/ecsy-babylon/utils/mathUtils.ts");
/**
 * @hidden
 * Update value of Babylon.js object's property from a property in component with same name.
 * @param component Component contains Babylon.js object
 * @param name Name of property in the component
 */
function updateObjectValue(component, name) {
    component.object[name] = component[name];
}
exports.updateObjectValue = updateObjectValue;
/**
 * @hidden
 * Update Vector3 of Babylon.js object's property from property in component with same name.
 * @param component Component contains Babylon.js object
 * @param name Name of property in the component, value of property should matches XYZProperties
 */
function updateObjectVector3(component, name) {
    component.object[name] = mathUtils_1.xyzToVector3(component[name]);
}
exports.updateObjectVector3 = updateObjectVector3;
/**
 * @hidden
 * Get ObjectComponents in an Entity.
 * @param entity Entity to filter ObjectComponents
 */
function getObjectComponents(entity) {
    let components = entity.getComponents();
    let objectComponents = [];
    for (let prop in components) {
        let component = components[prop];
        component.object && objectComponents.push(component);
    }
    return objectComponents;
}
exports.getObjectComponents = getObjectComponents;
/**
 * @hidden
 * Update transformation of ObjectComponents in entity.
 * @param entity Entity to be updated
 */
function updateObjectsTransform(entity) {
    let components = entity.getComponents();
    for (let prop in components) {
        let component = components[prop];
        (component.object && entity.hasComponent(Transform_1.Transform)) && updateObjectTransform(entity.getMutableComponent(Transform_1.Transform), component);
    }
}
exports.updateObjectsTransform = updateObjectsTransform;
/**
 * @hidden
 * Update transformation to an ObjectComponent.
 * @param transform Transfrom component in the entity
 * @param component A component has Babylon.js object
 */
function updateObjectTransform(transform, component) {
    let object = component.object;
    object.position && (object.position = mathUtils_1.xyzToVector3(transform.position));
    object.rotation && (object.rotation = mathUtils_1.xyzToVector3Radians(transform.rotation));
    object.scaling && (object.scaling = mathUtils_1.xyzToVector3(transform.scale));
}
exports.updateObjectTransform = updateObjectTransform;
/**
 * @hidden
 * Dispose Babylon.js object in the component.
 * @param object Component contains Babylon.js object
 */
function disposeObject(component) {
    component.object && component.object.dispose();
}
exports.disposeObject = disposeObject;


/***/ }),

/***/ "./src/ecsy-babylon/utils/worldUtils.ts":
/*!**********************************************!*\
  !*** ./src/ecsy-babylon/utils/worldUtils.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.getWorld = void 0;
/**
 * @hidden
 * Hack on ecsy to get World instance from system itself.
 * @param system A registered ecsy System class
 * @returns ecsy world
 */
function getWorld(system) {
    return system["world"];
}
exports.getWorld = getWorld;


/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
const Game_1 = __webpack_require__(/*! ./core/Game */ "./src/core/Game.ts");
const ecsy_babylon_1 = __webpack_require__(/*! ./ecsy-babylon */ "./src/ecsy-babylon/index.ts");
const ControllerInput_1 = __webpack_require__(/*! ./webuild-xr/components/ControllerInput */ "./src/webuild-xr/components/ControllerInput.ts");
const ControllerInputSystem_1 = __webpack_require__(/*! ./webuild-xr/systems/ControllerInputSystem */ "./src/webuild-xr/systems/ControllerInputSystem.ts");
// start app by call game instance
const game = Game_1.Game.instance();
// init game canvas, add systems, add scene T
game.start(document.getElementById("mainCanvas"), [ecsy_babylon_1.MeshSystem, ecsy_babylon_1.LightSystem, ecsy_babylon_1.MaterialSystem, ecsy_babylon_1.InputSystem, ControllerInputSystem_1.ControllerInputSystem]);
// add sceneZ
const sceneZ = game.createScene({
    ambient: "#CCCCCC",
    clear: "#CCCCCCFF"
});
// create camera of scene Z
const cameraZ = game.createEntity().addComponent(ecsy_babylon_1.Camera, { scene: sceneZ, pointerLock: false });
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.y = 3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.z = -3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).position.x = -3;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).rotation.y = 45;
cameraZ.getMutableComponent(ecsy_babylon_1.Transform).rotation.x = 15;
// create a box in scene Z can be moved by WASD
const boxZ = game.createEntity()
    .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ })
    .addComponent(ecsy_babylon_1.Material, {
    scene: sceneZ,
    texture: {
        diffuse: { url: "textures/block.jpg" }
    }
});
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.y = 1;
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.z = 1;
boxZ.getMutableComponent(ecsy_babylon_1.Transform).position.x = 1;
// create light of scene Z
const lightB = game.createEntity().addComponent(ecsy_babylon_1.Light, { scene: sceneZ });
lightB.getMutableComponent(ecsy_babylon_1.Light).direction.y = 1;
// create zebra skin texture ground for scene T
const ground = game.createEntity()
    .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ, type: ecsy_babylon_1.MeshTypes.Ground, options: { width: 50, height: 50 } })
    .addComponent(ecsy_babylon_1.Material, {
    scene: sceneZ,
    texture: {
        diffuse: { url: "textures/floor.jpg", uScale: 5, vScale: 5 }
    }
});
const groundMesh = ground.getComponent(ecsy_babylon_1.Mesh).object;
game.createEntity()
    .addComponent(ecsy_babylon_1.Input, {
    onKey: (key, down, up) => {
        if (key == "d") {
            game.showDebugger();
        }
        else if (key == "b") {
            createRandomBox();
        }
    }
});
game.createEntity()
    .addComponent(ControllerInput_1.ControllerInput, {
    floor: groundMesh,
    onLeftThumbstickMove: (x, y) => {
    },
    onRightThumbstickMove: (x, y) => {
    },
    onLeftButtonPress: () => {
        createRandomBox();
    },
    onRightButtonPress: () => {
        createRandomBox();
    },
    //onLeftTriggerPress: (mesh: BABYLON.AbstractMesh) => {
    //  if (mesh) {
    //    let { x, y, z } = mesh.position
    //    while (getBlock(x, y, z)) {
    //      y += 1
    //    }
    //    const block = createBlock(x, y, z, randomColor())
    //    setBlock(x, y, z, block)
    //  }
    //},
    //onLeftSqueezePress: (mesh: BABYLON.AbstractMesh) => {
    //  if (mesh) {
    //    let { x, y, z } = mesh.position
    //    while (getBlock(x, y, z)) {
    //      y -= 1
    //    }
    //    const block = createBlock(x, y, z, randomColor())
    //    setBlock(x, y, z, block)
    //  }
    //},
    //onRightTriggerPress: (mesh: BABYLON.AbstractMesh) => {
    //  if (mesh) {
    //    let { x, y, z } = mesh.position
    //    while (getBlock(x, y, z)) {
    //      z -= 1
    //    }
    //    const block = createBlock(x, y, z, randomColor())
    //    setBlock(x, y, z, block)
    //  }
    //},
    //onRightSqueezePress: (mesh: BABYLON.AbstractMesh) => {
    //  if (mesh) {
    //    let { x, y, z } = mesh.position
    //    while (getBlock(x, y, z)) {
    //      x -= 1
    //    }
    //    const block = createBlock(x, y, z, randomColor())
    //    setBlock(x, y, z, block)
    //  }
    //},
    onPointerInput: (mesh, facet) => {
        let { x, y, z } = mesh.position;
        while (getBlock(x, y, z)) {
            switch (facet) {
                case 0:
                    z += 1;
                    break;
                case 2:
                    z -= 1;
                    break;
                case 4:
                    x += 1;
                    break;
                case 6:
                    x -= 1;
                    break;
                case 8:
                    y += 1;
                    break;
                case 10:
                    y -= 1;
                    break;
            }
        }
        const block = createBlock(x, y, z, randomColor());
        setBlock(x, y, z, block);
    }
});
function createRandomBox() {
    createBlock(Math.round(Math.random() * 10), Math.round(Math.random() * 10), Math.round(Math.random() * 10), randomColor());
}
let blocks = { '1-1-1': true };
function getBlock(x, y, z) {
    const key = `${x}-${y}-${z}`;
    return blocks[key];
}
function setBlock(x, y, z, b) {
    const key = `${x}-${y}-${z}`;
    blocks[key] = b;
}
function createBlock(x, y, z, color) {
    const block = game.createEntity()
        .addComponent(ecsy_babylon_1.Mesh, { scene: sceneZ })
        .addComponent(ecsy_babylon_1.Material, {
        scene: sceneZ,
        texture: {
            diffuse: { url: "textures/block.jpg" }
        }
    });
    const transform = block.getMutableComponent(ecsy_babylon_1.Transform);
    transform.position.y = y;
    transform.position.z = z;
    transform.position.x = x;
    return block.getComponent(ecsy_babylon_1.Mesh);
}
const randomColor = () => {
    let color = '#';
    for (let i = 0; i < 6; i++) {
        const random = Math.random();
        const bit = (random * 16) | 0;
        color += (bit).toString(16);
    }
    ;
    return color;
};


/***/ }),

/***/ "./src/webuild-xr/components/ControllerInput.ts":
/*!******************************************************!*\
  !*** ./src/webuild-xr/components/ControllerInput.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.ControllerInput = void 0;
/**
 * @example
 * ```
 * entity.addComponent(ControllerInput, { onLeftTriggerPress: onTriggerPress });
 * function onTriggerPress(amount: number) {
 *   console.log("trigger pressed: " + amount);
 * }
 * ```
 */
class ControllerInput {
}
exports.ControllerInput = ControllerInput;


/***/ }),

/***/ "./src/webuild-xr/systems/ControllerInputSystem.ts":
/*!*********************************************************!*\
  !*** ./src/webuild-xr/systems/ControllerInputSystem.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ControllerInputSystem = void 0;
const ecsy_1 = __webpack_require__(/*! ecsy */ "./node_modules/ecsy/build/ecsy.module.js");
const ControllerInput_1 = __webpack_require__(/*! ../components/ControllerInput */ "./src/webuild-xr/components/ControllerInput.ts");
const gameUtils_1 = __webpack_require__(/*! ../../ecsy-babylon/utils/gameUtils */ "./src/ecsy-babylon/utils/gameUtils.ts");
/** System for ControllerInput component */
let ControllerInputSystem = /** @class */ (() => {
    class ControllerInputSystem extends ecsy_1.System {
        /** @hidden */
        execute() {
            this.queries.input.added.forEach((entity) => {
                let input = entity.getComponent(ControllerInput_1.ControllerInput);
                let scene = gameUtils_1.getScene(this, input.scene);
                this.createXRHelper(input, scene);
                //let pickPosition: BABYLON.Vector3
                //pick.pickedMesh.getFacetPositionToRef(facet, pickPosition);
                if (input.onPointerInput) {
                    scene.onPointerPick = (pointer, pick) => {
                        if (pick.hit && pick.pickedMesh) {
                            const facet = (2 * Math.floor(pick.faceId / 2));
                            input.onPointerInput(pick.pickedMesh, facet);
                        }
                    };
                }
            });
            this.queries.input.removed.forEach((entity) => {
                //let input = entity.getComponent(ControllerInput);
                //let scene = getScene(this, input.scene);
                if (this._xrHelper) {
                    this._xrHelper.dispose();
                }
            });
        }
        createXRHelper(input, scene) {
            return __awaiter(this, void 0, void 0, function* () {
                if (!this._xrHelper) {
                    this._xrHelper = yield scene.createDefaultXRExperienceAsync(input.xrOptions || {
                        disableTeleportation: false
                    });
                    this._xrHelper.teleportation.parabolicRayEnabled = true;
                    if (input.floor) {
                        this._xrHelper.teleportation.addFloorMesh(input.floor);
                    }
                    this._xrHelper.input.onControllerAddedObservable.add((inputSource) => {
                        inputSource.onMotionControllerInitObservable.add((controller) => {
                            //https://doc.babylonjs.com/divingDeeper/webXR/webXRInputControllerSupport#some-terms-and-classes-to-clear-things-up
                            //MotionControllerComponentType = "trigger" | "squeeze" | "touchpad" | "thumbstick" | "button"
                            if (controller.handness == "left") {
                                gameUtils_1.logMessage(this, 'left controller ' + controller.profileId);
                                const leftThumbstick = input.onLeftThumbstickMove && controller.getComponentOfType("thumbstick");
                                if (leftThumbstick) {
                                    leftThumbstick.onAxisValueChangedObservable.add(({ x, y }) => {
                                        gameUtils_1.logMessage(this, 'onLeftThumbstickMove ' + x + ',' + y);
                                        input.onLeftThumbstickMove(x, y);
                                    });
                                }
                                const leftButtons = input.onLeftButtonPress && controller.getAllComponentsOfType("button");
                                if (leftButtons && leftButtons.length > 0) {
                                    for (const button of leftButtons) {
                                        button.onButtonStateChangedObservable.add((buttonComponent) => {
                                            console.log('onLeftButtonPress', buttonComponent);
                                            if (buttonComponent.pressed) {
                                                gameUtils_1.logMessage(this, 'onLeftButtonPress ' + buttonComponent.value);
                                                input.onLeftButtonPress(buttonComponent.id);
                                            }
                                        });
                                    }
                                }
                                const squeezeButton = input.onLeftSqueezePress && controller.getComponentOfType("squeeze");
                                if (squeezeButton) {
                                    squeezeButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onLeftSqueezePress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onLeftSqueezePress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onLeftSqueezePress(mesh);
                                        }
                                    });
                                }
                                const triggerButton = input.onLeftTriggerPress && controller.getComponentOfType("trigger");
                                if (triggerButton) {
                                    triggerButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onLeftTriggerPress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onLeftTriggerPress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onLeftTriggerPress(mesh);
                                        }
                                    });
                                }
                            }
                            else if (controller.handness == "right") {
                                gameUtils_1.logMessage(this, 'right controller ' + controller.profileId);
                                const rightThumbstick = input.onRightThumbstickMove && controller.getComponentOfType("thumbstick");
                                if (rightThumbstick) {
                                    rightThumbstick.onAxisValueChangedObservable.add(({ x, y }) => {
                                        gameUtils_1.logMessage(this, 'onRightThumbstickMove ' + x + ',' + y);
                                        input.onRightThumbstickMove(x, y);
                                    });
                                }
                                const rightButtons = input.onRightButtonPress && controller.getAllComponentsOfType("button");
                                if (rightButtons && rightButtons.length > 0) {
                                    for (const button of rightButtons) {
                                        button.onButtonStateChangedObservable.add((buttonComponent) => {
                                            console.log('onRightButtonPress', buttonComponent);
                                            if (buttonComponent.pressed) {
                                                gameUtils_1.logMessage(this, 'onRightButtonPress ' + buttonComponent.value);
                                                input.onRightButtonPress(buttonComponent.id);
                                            }
                                        });
                                    }
                                }
                                const squeezeButton = input.onRightSqueezePress && controller.getComponentOfType("squeeze");
                                if (squeezeButton) {
                                    squeezeButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onRightSqueezePress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onRightSqueezePress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onRightSqueezePress(mesh);
                                        }
                                    });
                                }
                                const triggerButton = input.onRightTriggerPress && controller.getComponentOfType("trigger");
                                if (triggerButton) {
                                    triggerButton.onButtonStateChangedObservable.add((buttonComponent) => {
                                        console.log('onRightTriggerPress', buttonComponent);
                                        if (buttonComponent.pressed) {
                                            gameUtils_1.logMessage(this, 'onRightTriggerPress ' + buttonComponent.value);
                                            const mesh = this._xrHelper.pointerSelection.getMeshUnderPointer(inputSource.uniqueId);
                                            input.onRightTriggerPress(mesh);
                                        }
                                    });
                                }
                            }
                            else {
                                console.log('onMotionControllerInit', controller);
                                gameUtils_1.logMessage(this, 'onMotionControllerInit ' + controller.profileId);
                            }
                        });
                    });
                }
            });
        }
    }
    /** @hidden */
    ControllerInputSystem.queries = {
        input: { components: [ControllerInput_1.ControllerInput], listen: { added: true, removed: true } },
    };
    return ControllerInputSystem;
})();
exports.ControllerInputSystem = ControllerInputSystem;


/***/ }),

/***/ 0:
/*!******************************************************************************!*\
  !*** multi (webpack)-dev-server/client?http://localhost:9000 ./src/index.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! C:\github\webuildxr\node_modules\webpack-dev-server\client\index.js?http://localhost:9000 */"./node_modules/webpack-dev-server/client/index.js?http://localhost:9000");
module.exports = __webpack_require__(/*! ./src/index.ts */"./src/index.ts");


/***/ }),

/***/ "babylonjs":
/*!**************************!*\
  !*** external "BABYLON" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = BABYLON;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Fuc2ktaHRtbC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYmFieWxvbmpzLWd1aS9iYWJ5bG9uLmd1aS5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Vjc3kvYnVpbGQvZWNzeS5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2h0bWwtZW50aXRpZXMvbGliL2h0bWw0LWVudGl0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9odG1sLWVudGl0aWVzL2xpYi9odG1sNS1lbnRpdGllcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaHRtbC1lbnRpdGllcy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2h0bWwtZW50aXRpZXMvbGliL3N1cnJvZ2F0ZS1wYWlycy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaHRtbC1lbnRpdGllcy9saWIveG1sLWVudGl0aWVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2dsZXZlbC9saWIvbG9nbGV2ZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL25vZGUtbGlicy1icm93c2VyL25vZGVfbW9kdWxlcy9wdW55Y29kZS9wdW55Y29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2RlY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zb2NranMtY2xpZW50L2Rpc3Qvc29ja2pzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cmwvdXJsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cmwvdXRpbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L2NsaWVudHMvQmFzZUNsaWVudC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L2NsaWVudHMvU29ja0pTQ2xpZW50LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS1kZXYtc2VydmVyL2NsaWVudC9vdmVybGF5LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvc29ja2V0LmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvdXRpbHMvY3JlYXRlU29ja2V0VXJsLmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9jbGllbnQvdXRpbHMvZ2V0Q3VycmVudFNjcmlwdFNvdXJjZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL2xvZy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL3JlbG9hZEFwcC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvY2xpZW50L3V0aWxzL3NlbmRNZXNzYWdlLmpzIiwid2VicGFjazovLy8od2VicGFjayktZGV2LXNlcnZlci9ub2RlX21vZHVsZXMvYW5zaS1yZWdleC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spLWRldi1zZXJ2ZXIvbm9kZV9tb2R1bGVzL3N0cmlwLWFuc2kvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8od2VicGFjaykvaG90IHN5bmMgbm9ucmVjdXJzaXZlIF5cXC5cXC9sb2ckIiwid2VicGFjazovLy8od2VicGFjaykvaG90L2VtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9ob3QvbG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL0NhbWVyYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL0xpZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy9NYXRlcmlhbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvTWVzaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvUGFydGljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL1NjZW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy9UcmFuc2Zvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9Db2xvckNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvTGlnaHRDb2xvclByb3BlcnRpZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL3R5cGVzL01hdGVyaWFsQ29sb3JQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9NYXRlcmlhbFRleHR1cmVQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9NZXNoT3B0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvT2JqZWN0Q29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9QYXJ0aWNsZUNvbG9yUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvUGFydGljbGVUZXh0dXJlUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvU2NlbmVDb2xvclByb3BlcnRpZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9jb21wb25lbnRzL3R5cGVzL1NjZW5lQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9TY2VuZVRleHR1cmVQcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vY29tcG9uZW50cy90eXBlcy9UZXh0dXJlQXR0cmlidXRlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvVGV4dHVyZUNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvWFlaUHJvcGVydGllcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL2NvbXBvbmVudHMvdHlwZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvQ2FtZXJhU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9HYW1lU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9JbnB1dFN5c3RlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvTGlnaHRTeXN0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Vjc3ktYmFieWxvbi9zeXN0ZW1zL01hdGVyaWFsU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9NZXNoU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9QYXJ0aWNsZVN5c3RlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3N5c3RlbXMvVHJhbnNmb3JtU3lzdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vc3lzdGVtcy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL2dhbWVVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vdXRpbHMvbWF0ZXJpYWxVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL21hdGhVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZWNzeS1iYWJ5bG9uL3V0aWxzL29iamVjdFV0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9lY3N5LWJhYnlsb24vdXRpbHMvd29ybGRVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnVpbGQteHIvY29tcG9uZW50cy9Db250cm9sbGVySW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnVpbGQteHIvc3lzdGVtcy9Db250cm9sbGVySW5wdXRTeXN0ZW0udHMi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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsdUJBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixXQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsRUFBRTtBQUNmLGFBQWEsS0FBSztBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUEsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLEtBQUs7QUFDbEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixrQ0FBa0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsZ0RBQWdEO0FBQ25FO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxnTkFBZ047QUFDaFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixtQ0FBbUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGtGQUFrRjtBQUNsRjtBQUNBLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUSx5QkFBeUI7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQTZELGFBQWE7QUFDMUU7QUFDQSw2REFBNkQsYUFBYTtBQUMxRTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGFBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDaGZhO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQsd0JBQXdCLG1CQUFPLENBQUMsOEVBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQy9IYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVELHdCQUF3QixtQkFBTyxDQUFDLDhFQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RTtBQUM1RTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdEthO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQscUJBQXFCLG1CQUFPLENBQUMsd0VBQWdCO0FBQzdDO0FBQ0EsdUJBQXVCLG1CQUFPLENBQUMsNEVBQWtCO0FBQ2pEO0FBQ0EsdUJBQXVCLG1CQUFPLENBQUMsNEVBQWtCO0FBQ2pEO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNSYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNkYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVELHdCQUF3QixtQkFBTyxDQUFDLDhFQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsU0FBUztBQUNULFdBQVc7QUFDWCxXQUFXO0FBQ1gsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCLGlCQUFpQjtBQUNqQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7QUFDaEY7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQTBDO0FBQ2xELFFBQVEsb0NBQU8sVUFBVTtBQUFBO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQzFCLEtBQUssTUFBTSxFQUlOO0FBQ0wsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLGVBQWU7QUFDZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEscUJBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOzs7Ozs7Ozs7Ozs7QUNqUkQ7QUFDQSxDQUFDOztBQUVEO0FBQ0EsbUJBQW1CLEtBQTBCO0FBQzdDO0FBQ0Esa0JBQWtCLEtBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQixZQUFZLFNBQVM7QUFDckI7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLFlBQVksU0FBUztBQUNyQjtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQixjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQixjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtQ0FBbUM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLFdBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4Qix5Q0FBeUMscUJBQXFCOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLG9CQUFvQjs7QUFFdEQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE9BQU87QUFDbkIsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQixpQkFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxjQUFjLGlCQUFpQjtBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDhCQUE4QixvQkFBb0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFFVTtBQUNaO0FBQ0EsRUFBRSxtQ0FBbUI7QUFDckI7QUFDQSxHQUFHO0FBQUEsb0dBQUM7QUFDSixFQUFFLE1BQU0sRUFhTjs7QUFFRixDQUFDOzs7Ozs7Ozs7Ozs7OztBQ3BoQkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZUFBZTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ3BGYTs7QUFFYixpQ0FBaUMsbUJBQU8sQ0FBQywwREFBVTtBQUNuRCxxQ0FBcUMsbUJBQU8sQ0FBQywwREFBVTs7Ozs7Ozs7Ozs7O0FDSHZEO0FBQ0EsYUFBYSxHQUFHLElBQXNELEVBQUUsbUJBQW1CLEtBQUssVUFBK04sQ0FBQyxhQUFhLDBCQUEwQixtQkFBbUIsa0JBQWtCLGdCQUFnQixVQUFVLFVBQVUsMENBQTBDLGdCQUFnQixPQUFDLE9BQU8sb0JBQW9CLDhDQUE4QyxrQ0FBa0MsWUFBWSxZQUFZLG1DQUFtQyxpQkFBaUIsZUFBZSxzQkFBc0Isb0JBQW9CLGtEQUFrRCxXQUFXLFlBQVksU0FBUyxTQUFTLEtBQUs7QUFDM3pCO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxxSUFBcUk7O0FBRXRJLENBQUMsRUFBRSxrQ0FBa0M7QUFDckM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsRUFBRSwwQkFBMEI7QUFDN0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsZ0NBQWdDO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEdBQUc7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEdBQUc7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsMEJBQTBCO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsRUFBRSwrQkFBK0I7QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDLGFBQWEsUUFBUSxFQUFFOztBQUV4QixDQUFDLEVBQUUsdUlBQXVJO0FBQzFJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxtRUFBbUU7QUFDdEU7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsc0ZBQXNGO0FBQ3pGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRSwwSEFBMEg7O0FBRWxKLENBQUMsRUFBRSxzSEFBc0g7QUFDekg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSx3TkFBd047QUFDM047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMscUlBQXFJOztBQUV0SSxDQUFDLEdBQUc7QUFDSjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsV0FBVztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxFQUFFLDBRQUEwUTtBQUM3UTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsZ0ZBQWdGO0FBQ25GO0FBQ0E7O0FBRUEsQ0FBQyxxSUFBcUk7O0FBRXRJLENBQUMsR0FBRztBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBLENBQUMscUlBQXFJOztBQUV0SSxDQUFDLEdBQUc7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsd0dBQXdHO0FBQzNHOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLENBQUMsRUFBRSxxRkFBcUY7QUFDeEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRTs7QUFFeEIsQ0FBQyxFQUFFLCtJQUErSTtBQUNsSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxxSUFBcUk7O0FBRXRJLENBQUMsRUFBRSxtRkFBbUY7QUFDdEY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxxRUFBcUU7QUFDeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDLGFBQWEsUUFBUSxFQUFFOztBQUV4QixDQUFDLEVBQUUsb0NBQW9DO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHlGQUF5Rjs7QUFFekY7O0FBRUE7QUFDQTs7QUFFQSxDQUFDLHFJQUFxSTs7QUFFdEksQ0FBQyxFQUFFLHFEQUFxRDtBQUN4RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxvQ0FBb0M7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRTs7QUFFeEIsQ0FBQyxFQUFFLG9GQUFvRjtBQUN2RjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxxREFBcUQ7QUFDeEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDLGFBQWEsUUFBUSxFQUFFLDBIQUEwSDs7QUFFbEosQ0FBQyxFQUFFLHlHQUF5RztBQUM1RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFxRCxtQkFBbUIsV0FBVztBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsa0lBQWtJO0FBQ3JJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLEVBQUU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUU7O0FBRXhCLENBQUMsRUFBRSxvQ0FBb0M7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMsYUFBYSxRQUFRLEVBQUUsMEhBQTBIOztBQUVsSixDQUFDLEVBQUUsd0RBQXdEO0FBQzNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyxhQUFhLFFBQVEsRUFBRSwwSEFBMEg7O0FBRWxKLENBQUMsRUFBRSx5R0FBeUc7QUFDNUc7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDLEVBQUUsaUNBQWlDO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQ0FBZ0M7QUFDaEMsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLENBQUMsRUFBRSxXQUFXO0FBQ2Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDLHFJQUFxSTs7QUFFdEksQ0FBQyxFQUFFLGNBQWM7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxNQUFNO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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Q0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDJEQUEyRCw2QkFBNkIsRUFBRTtBQUMxRztBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaktBLHlCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIid1c2Ugc3RyaWN0J1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFuc2lIVE1MXG5cbi8vIFJlZmVyZW5jZSB0byBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL2Fuc2ktcmVnZXhcbnZhciBfcmVnQU5TSSA9IC8oPzooPzpcXHUwMDFiXFxbKXxcXHUwMDliKSg/Oig/OlswLTldezEsM30pPyg/Oig/OjtbMC05XXswLDN9KSopP1tBLU18Zi1tXSl8XFx1MDAxYltBLU1dL1xuXG52YXIgX2RlZkNvbG9ycyA9IHtcbiAgcmVzZXQ6IFsnZmZmJywgJzAwMCddLCAvLyBbRk9SRUdST1VEX0NPTE9SLCBCQUNLR1JPVU5EX0NPTE9SXVxuICBibGFjazogJzAwMCcsXG4gIHJlZDogJ2ZmMDAwMCcsXG4gIGdyZWVuOiAnMjA5ODA1JyxcbiAgeWVsbG93OiAnZThiZjAzJyxcbiAgYmx1ZTogJzAwMDBmZicsXG4gIG1hZ2VudGE6ICdmZjAwZmYnLFxuICBjeWFuOiAnMDBmZmVlJyxcbiAgbGlnaHRncmV5OiAnZjBmMGYwJyxcbiAgZGFya2dyZXk6ICc4ODgnXG59XG52YXIgX3N0eWxlcyA9IHtcbiAgMzA6ICdibGFjaycsXG4gIDMxOiAncmVkJyxcbiAgMzI6ICdncmVlbicsXG4gIDMzOiAneWVsbG93JyxcbiAgMzQ6ICdibHVlJyxcbiAgMzU6ICdtYWdlbnRhJyxcbiAgMzY6ICdjeWFuJyxcbiAgMzc6ICdsaWdodGdyZXknXG59XG52YXIgX29wZW5UYWdzID0ge1xuICAnMSc6ICdmb250LXdlaWdodDpib2xkJywgLy8gYm9sZFxuICAnMic6ICdvcGFjaXR5OjAuNScsIC8vIGRpbVxuICAnMyc6ICc8aT4nLCAvLyBpdGFsaWNcbiAgJzQnOiAnPHU+JywgLy8gdW5kZXJzY29yZVxuICAnOCc6ICdkaXNwbGF5Om5vbmUnLCAvLyBoaWRkZW5cbiAgJzknOiAnPGRlbD4nIC8vIGRlbGV0ZVxufVxudmFyIF9jbG9zZVRhZ3MgPSB7XG4gICcyMyc6ICc8L2k+JywgLy8gcmVzZXQgaXRhbGljXG4gICcyNCc6ICc8L3U+JywgLy8gcmVzZXQgdW5kZXJzY29yZVxuICAnMjknOiAnPC9kZWw+JyAvLyByZXNldCBkZWxldGVcbn1cblxuO1swLCAyMSwgMjIsIDI3LCAyOCwgMzksIDQ5XS5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7XG4gIF9jbG9zZVRhZ3Nbbl0gPSAnPC9zcGFuPidcbn0pXG5cbi8qKlxuICogQ29udmVydHMgdGV4dCB3aXRoIEFOU0kgY29sb3IgY29kZXMgdG8gSFRNTCBtYXJrdXAuXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICogQHJldHVybnMgeyp9XG4gKi9cbmZ1bmN0aW9uIGFuc2lIVE1MICh0ZXh0KSB7XG4gIC8vIFJldHVybnMgdGhlIHRleHQgaWYgdGhlIHN0cmluZyBoYXMgbm8gQU5TSSBlc2NhcGUgY29kZS5cbiAgaWYgKCFfcmVnQU5TSS50ZXN0KHRleHQpKSB7XG4gICAgcmV0dXJuIHRleHRcbiAgfVxuXG4gIC8vIENhY2hlIG9wZW5lZCBzZXF1ZW5jZS5cbiAgdmFyIGFuc2lDb2RlcyA9IFtdXG4gIC8vIFJlcGxhY2Ugd2l0aCBtYXJrdXAuXG4gIHZhciByZXQgPSB0ZXh0LnJlcGxhY2UoL1xcMDMzXFxbKFxcZCspKm0vZywgZnVuY3Rpb24gKG1hdGNoLCBzZXEpIHtcbiAgICB2YXIgb3QgPSBfb3BlblRhZ3Nbc2VxXVxuICAgIGlmIChvdCkge1xuICAgICAgLy8gSWYgY3VycmVudCBzZXF1ZW5jZSBoYXMgYmVlbiBvcGVuZWQsIGNsb3NlIGl0LlxuICAgICAgaWYgKCEhfmFuc2lDb2Rlcy5pbmRleE9mKHNlcSkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1leHRyYS1ib29sZWFuLWNhc3RcbiAgICAgICAgYW5zaUNvZGVzLnBvcCgpXG4gICAgICAgIHJldHVybiAnPC9zcGFuPidcbiAgICAgIH1cbiAgICAgIC8vIE9wZW4gdGFnLlxuICAgICAgYW5zaUNvZGVzLnB1c2goc2VxKVxuICAgICAgcmV0dXJuIG90WzBdID09PSAnPCcgPyBvdCA6ICc8c3BhbiBzdHlsZT1cIicgKyBvdCArICc7XCI+J1xuICAgIH1cblxuICAgIHZhciBjdCA9IF9jbG9zZVRhZ3Nbc2VxXVxuICAgIGlmIChjdCkge1xuICAgICAgLy8gUG9wIHNlcXVlbmNlXG4gICAgICBhbnNpQ29kZXMucG9wKClcbiAgICAgIHJldHVybiBjdFxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfSlcblxuICAvLyBNYWtlIHN1cmUgdGFncyBhcmUgY2xvc2VkLlxuICB2YXIgbCA9IGFuc2lDb2Rlcy5sZW5ndGhcbiAgOyhsID4gMCkgJiYgKHJldCArPSBBcnJheShsICsgMSkuam9pbignPC9zcGFuPicpKVxuXG4gIHJldHVybiByZXRcbn1cblxuLyoqXG4gKiBDdXN0b21pemUgY29sb3JzLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbG9ycyByZWZlcmVuY2UgdG8gX2RlZkNvbG9yc1xuICovXG5hbnNpSFRNTC5zZXRDb2xvcnMgPSBmdW5jdGlvbiAoY29sb3JzKSB7XG4gIGlmICh0eXBlb2YgY29sb3JzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignYGNvbG9yc2AgcGFyYW1ldGVyIG11c3QgYmUgYW4gT2JqZWN0LicpXG4gIH1cblxuICB2YXIgX2ZpbmFsQ29sb3JzID0ge31cbiAgZm9yICh2YXIga2V5IGluIF9kZWZDb2xvcnMpIHtcbiAgICB2YXIgaGV4ID0gY29sb3JzLmhhc093blByb3BlcnR5KGtleSkgPyBjb2xvcnNba2V5XSA6IG51bGxcbiAgICBpZiAoIWhleCkge1xuICAgICAgX2ZpbmFsQ29sb3JzW2tleV0gPSBfZGVmQ29sb3JzW2tleV1cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGlmICgncmVzZXQnID09PSBrZXkpIHtcbiAgICAgIGlmICh0eXBlb2YgaGV4ID09PSAnc3RyaW5nJykge1xuICAgICAgICBoZXggPSBbaGV4XVxuICAgICAgfVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGhleCkgfHwgaGV4Lmxlbmd0aCA9PT0gMCB8fCBoZXguc29tZShmdW5jdGlvbiAoaCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGggIT09ICdzdHJpbmcnXG4gICAgICB9KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB2YWx1ZSBvZiBgJyArIGtleSArICdgIHByb3BlcnR5IG11c3QgYmUgYW4gQXJyYXkgYW5kIGVhY2ggaXRlbSBjb3VsZCBvbmx5IGJlIGEgaGV4IHN0cmluZywgZS5nLjogRkYwMDAwJylcbiAgICAgIH1cbiAgICAgIHZhciBkZWZIZXhDb2xvciA9IF9kZWZDb2xvcnNba2V5XVxuICAgICAgaWYgKCFoZXhbMF0pIHtcbiAgICAgICAgaGV4WzBdID0gZGVmSGV4Q29sb3JbMF1cbiAgICAgIH1cbiAgICAgIGlmIChoZXgubGVuZ3RoID09PSAxIHx8ICFoZXhbMV0pIHtcbiAgICAgICAgaGV4ID0gW2hleFswXV1cbiAgICAgICAgaGV4LnB1c2goZGVmSGV4Q29sb3JbMV0pXG4gICAgICB9XG5cbiAgICAgIGhleCA9IGhleC5zbGljZSgwLCAyKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGhleCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHZhbHVlIG9mIGAnICsga2V5ICsgJ2AgcHJvcGVydHkgbXVzdCBiZSBhIGhleCBzdHJpbmcsIGUuZy46IEZGMDAwMCcpXG4gICAgfVxuICAgIF9maW5hbENvbG9yc1trZXldID0gaGV4XG4gIH1cbiAgX3NldFRhZ3MoX2ZpbmFsQ29sb3JzKVxufVxuXG4vKipcbiAqIFJlc2V0IGNvbG9ycy5cbiAqL1xuYW5zaUhUTUwucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gIF9zZXRUYWdzKF9kZWZDb2xvcnMpXG59XG5cbi8qKlxuICogRXhwb3NlIHRhZ3MsIGluY2x1ZGluZyBvcGVuIGFuZCBjbG9zZS5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmFuc2lIVE1MLnRhZ3MgPSB7fVxuXG5pZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbnNpSFRNTC50YWdzLCAnb3BlbicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9vcGVuVGFncyB9XG4gIH0pXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhbnNpSFRNTC50YWdzLCAnY2xvc2UnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfY2xvc2VUYWdzIH1cbiAgfSlcbn0gZWxzZSB7XG4gIGFuc2lIVE1MLnRhZ3Mub3BlbiA9IF9vcGVuVGFnc1xuICBhbnNpSFRNTC50YWdzLmNsb3NlID0gX2Nsb3NlVGFnc1xufVxuXG5mdW5jdGlvbiBfc2V0VGFncyAoY29sb3JzKSB7XG4gIC8vIHJlc2V0IGFsbFxuICBfb3BlblRhZ3NbJzAnXSA9ICdmb250LXdlaWdodDpub3JtYWw7b3BhY2l0eToxO2NvbG9yOiMnICsgY29sb3JzLnJlc2V0WzBdICsgJztiYWNrZ3JvdW5kOiMnICsgY29sb3JzLnJlc2V0WzFdXG4gIC8vIGludmVyc2VcbiAgX29wZW5UYWdzWyc3J10gPSAnY29sb3I6IycgKyBjb2xvcnMucmVzZXRbMV0gKyAnO2JhY2tncm91bmQ6IycgKyBjb2xvcnMucmVzZXRbMF1cbiAgLy8gZGFyayBncmV5XG4gIF9vcGVuVGFnc1snOTAnXSA9ICdjb2xvcjojJyArIGNvbG9ycy5kYXJrZ3JleVxuXG4gIGZvciAodmFyIGNvZGUgaW4gX3N0eWxlcykge1xuICAgIHZhciBjb2xvciA9IF9zdHlsZXNbY29kZV1cbiAgICB2YXIgb3JpQ29sb3IgPSBjb2xvcnNbY29sb3JdIHx8ICcwMDAnXG4gICAgX29wZW5UYWdzW2NvZGVdID0gJ2NvbG9yOiMnICsgb3JpQ29sb3JcbiAgICBjb2RlID0gcGFyc2VJbnQoY29kZSlcbiAgICBfb3BlblRhZ3NbKGNvZGUgKyAxMCkudG9TdHJpbmcoKV0gPSAnYmFja2dyb3VuZDojJyArIG9yaUNvbG9yXG4gIH1cbn1cblxuYW5zaUhUTUwucmVzZXQoKVxuIiwiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiYmFieWxvbmpzXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiYmFieWxvbmpzLWd1aVwiLFtcImJhYnlsb25qc1wiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzW1wiYmFieWxvbmpzLWd1aVwiXT1lKHJlcXVpcmUoXCJiYWJ5bG9uanNcIikpOih0LkJBQllMT049dC5CQUJZTE9OfHx7fSx0LkJBQllMT04uR1VJPWUodC5CQUJZTE9OKSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6dGhpcyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gaShyKXtpZihlW3JdKXJldHVybiBlW3JdLmV4cG9ydHM7dmFyIG49ZVtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbcl0uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsaSksbi5sPSEwLG4uZXhwb3J0c31yZXR1cm4gaS5tPXQsaS5jPWUsaS5kPWZ1bmN0aW9uKHQsZSxyKXtpLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxpLnI9ZnVuY3Rpb24odCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0saS50PWZ1bmN0aW9uKHQsZSl7aWYoMSZlJiYodD1pKHQpKSw4JmUpcmV0dXJuIHQ7aWYoNCZlJiZcIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoaS5yKHIpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KSwyJmUmJlwic3RyaW5nXCIhPXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KWkuZChyLG4sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxuKSk7cmV0dXJuIHJ9LGkubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gaS5kKGUsXCJhXCIsZSksZX0saS5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxpLnA9XCJcIixpKGkucz0yKX0oW2Z1bmN0aW9uKGUsaSl7ZS5leHBvcnRzPXR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7XG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXG5cblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbnZhciByPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHI9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9KSh0LGUpfTtmdW5jdGlvbiBuKHQsZSl7ZnVuY3Rpb24gaSgpe3RoaXMuY29uc3RydWN0b3I9dH1yKHQsZSksdC5wcm90b3R5cGU9bnVsbD09PWU/T2JqZWN0LmNyZWF0ZShlKTooaS5wcm90b3R5cGU9ZS5wcm90b3R5cGUsbmV3IGkpfWZ1bmN0aW9uIG8odCxlLGkscil7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP2U6bnVsbD09PXI/cj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6cjtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLGkscik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobj10W2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKGUsaSxzKTpuKGUsaSkpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHMpLHN9dmFyIHM9aSgwKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkscil7dm9pZCAwPT09aSYmKGk9dC5VTklUTU9ERV9QSVhFTCksdm9pZCAwPT09ciYmKHI9ITApLHRoaXMudW5pdD1pLHRoaXMubmVnYXRpdmVWYWx1ZUFsbG93ZWQ9cix0aGlzLl92YWx1ZT0xLHRoaXMuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSExLHRoaXMuX3ZhbHVlPWUsdGhpcy5fb3JpZ2luYWxVbml0PWl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzUGVyY2VudGFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bml0PT09dC5VTklUTU9ERV9QRVJDRU5UQUdFfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzUGl4ZWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pdD09PXQuVU5JVE1PREVfUElYRUx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaW50ZXJuYWxWYWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0VmFsdWVJblBpeGVsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaXNQaXhlbD90aGlzLmdldFZhbHVlKHQpOnRoaXMuZ2V0VmFsdWUodCkqZX0sdC5wcm90b3R5cGUudXBkYXRlSW5QbGFjZT1mdW5jdGlvbihlLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT10LlVOSVRNT0RFX1BJWEVMKSx0aGlzLl92YWx1ZT1lLHRoaXMudW5pdD1pLHRoaXN9LHQucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUpe2lmKGUmJiF0aGlzLmlnbm9yZUFkYXB0aXZlU2NhbGluZyYmdGhpcy51bml0IT09dC5VTklUTU9ERV9QRVJDRU5UQUdFKXt2YXIgaT0wLHI9MDtpZihlLmlkZWFsV2lkdGgmJihpPXRoaXMuX3ZhbHVlKmUuZ2V0U2l6ZSgpLndpZHRoL2UuaWRlYWxXaWR0aCksZS5pZGVhbEhlaWdodCYmKHI9dGhpcy5fdmFsdWUqZS5nZXRTaXplKCkuaGVpZ2h0L2UuaWRlYWxIZWlnaHQpLGUudXNlU21hbGxlc3RJZGVhbCYmZS5pZGVhbFdpZHRoJiZlLmlkZWFsSGVpZ2h0KXJldHVybiB3aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHQ/aTpyO2lmKGUuaWRlYWxXaWR0aClyZXR1cm4gaTtpZihlLmlkZWFsSGVpZ2h0KXJldHVybiByfXJldHVybiB0aGlzLl92YWx1ZX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSxpKXtzd2l0Y2godGhpcy51bml0KXtjYXNlIHQuVU5JVE1PREVfUEVSQ0VOVEFHRTp2YXIgcj0xMDAqdGhpcy5nZXRWYWx1ZShlKTtyZXR1cm4oaT9yLnRvRml4ZWQoaSk6cikrXCIlXCI7Y2FzZSB0LlVOSVRNT0RFX1BJWEVMOnZhciBuPXRoaXMuZ2V0VmFsdWUoZSk7cmV0dXJuKGk/bi50b0ZpeGVkKGkpOm4pK1wicHhcIn1yZXR1cm4gdGhpcy51bml0LnRvU3RyaW5nKCl9LHQucHJvdG90eXBlLmZyb21TdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIGk9dC5fUmVnZXguZXhlYyhlLnRvU3RyaW5nKCkpO2lmKCFpfHwwPT09aS5sZW5ndGgpcmV0dXJuITE7dmFyIHI9cGFyc2VGbG9hdChpWzFdKSxuPXRoaXMuX29yaWdpbmFsVW5pdDtpZih0aGlzLm5lZ2F0aXZlVmFsdWVBbGxvd2VkfHxyPDAmJihyPTApLDQ9PT1pLmxlbmd0aClzd2l0Y2goaVszXSl7Y2FzZVwicHhcIjpuPXQuVU5JVE1PREVfUElYRUw7YnJlYWs7Y2FzZVwiJVwiOm49dC5VTklUTU9ERV9QRVJDRU5UQUdFLHIvPTEwMH1yZXR1cm4ociE9PXRoaXMuX3ZhbHVlfHxuIT09dGhpcy51bml0KSYmKHRoaXMuX3ZhbHVlPXIsdGhpcy51bml0PW4sITApfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIlVOSVRNT0RFX1BFUkNFTlRBR0VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX1VOSVRNT0RFX1BFUkNFTlRBR0V9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJVTklUTU9ERV9QSVhFTFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fVU5JVE1PREVfUElYRUx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5fUmVnZXg9LyheLT9cXGQqKFxcLlxcZCspPykoJXxweCk/Lyx0Ll9VTklUTU9ERV9QRVJDRU5UQUdFPTAsdC5fVU5JVE1PREVfUElYRUw9MSx0fSgpLGg9W25ldyBzLlZlY3RvcjIoMCwwKSxuZXcgcy5WZWN0b3IyKDAsMCksbmV3IHMuVmVjdG9yMigwLDApLG5ldyBzLlZlY3RvcjIoMCwwKV0sbD1bbmV3IHMuVmVjdG9yMigwLDApLG5ldyBzLlZlY3RvcjIoMCwwKSxuZXcgcy5WZWN0b3IyKDAsMCksbmV3IHMuVmVjdG9yMigwLDApXSx1PW5ldyBzLlZlY3RvcjIoMCwwKSxjPW5ldyBzLlZlY3RvcjIoMCwwKSxfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxyKXt0aGlzLmxlZnQ9dCx0aGlzLnRvcD1lLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1yfXJldHVybiB0LnByb3RvdHlwZS5jb3B5RnJvbT1mdW5jdGlvbih0KXt0aGlzLmxlZnQ9dC5sZWZ0LHRoaXMudG9wPXQudG9wLHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10LmhlaWdodH0sdC5wcm90b3R5cGUuY29weUZyb21GbG9hdHM9ZnVuY3Rpb24odCxlLGkscil7dGhpcy5sZWZ0PXQsdGhpcy50b3A9ZSx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9cn0sdC5Db21iaW5lVG9SZWY9ZnVuY3Rpb24odCxlLGkpe3ZhciByPU1hdGgubWluKHQubGVmdCxlLmxlZnQpLG49TWF0aC5taW4odC50b3AsZS50b3ApLG89TWF0aC5tYXgodC5sZWZ0K3Qud2lkdGgsZS5sZWZ0K2Uud2lkdGgpLHM9TWF0aC5tYXgodC50b3ArdC5oZWlnaHQsZS50b3ArZS5oZWlnaHQpO2kubGVmdD1yLGkudG9wPW4saS53aWR0aD1vLXIsaS5oZWlnaHQ9cy1ufSx0LnByb3RvdHlwZS50cmFuc2Zvcm1Ub1JlZj1mdW5jdGlvbih0LGUpe2hbMF0uY29weUZyb21GbG9hdHModGhpcy5sZWZ0LHRoaXMudG9wKSxoWzFdLmNvcHlGcm9tRmxvYXRzKHRoaXMubGVmdCt0aGlzLndpZHRoLHRoaXMudG9wKSxoWzJdLmNvcHlGcm9tRmxvYXRzKHRoaXMubGVmdCt0aGlzLndpZHRoLHRoaXMudG9wK3RoaXMuaGVpZ2h0KSxoWzNdLmNvcHlGcm9tRmxvYXRzKHRoaXMubGVmdCx0aGlzLnRvcCt0aGlzLmhlaWdodCksdS5jb3B5RnJvbUZsb2F0cyhOdW1iZXIuTUFYX1ZBTFVFLE51bWJlci5NQVhfVkFMVUUpLGMuY29weUZyb21GbG9hdHMoMCwwKTtmb3IodmFyIGk9MDtpPDQ7aSsrKXQudHJhbnNmb3JtQ29vcmRpbmF0ZXMoaFtpXS54LGhbaV0ueSxsW2ldKSx1Lng9TWF0aC5mbG9vcihNYXRoLm1pbih1LngsbFtpXS54KSksdS55PU1hdGguZmxvb3IoTWF0aC5taW4odS55LGxbaV0ueSkpLGMueD1NYXRoLmNlaWwoTWF0aC5tYXgoYy54LGxbaV0ueCkpLGMueT1NYXRoLmNlaWwoTWF0aC5tYXgoYy55LGxbaV0ueSkpO2UubGVmdD11LngsZS50b3A9dS55LGUud2lkdGg9Yy54LXUueCxlLmhlaWdodD1jLnktdS55fSx0LnByb3RvdHlwZS5pc0VxdWFsc1RvPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxlZnQ9PT10LmxlZnQmJih0aGlzLnRvcD09PXQudG9wJiYodGhpcy53aWR0aD09PXQud2lkdGgmJnRoaXMuaGVpZ2h0PT09dC5oZWlnaHQpKX0sdC5FbXB0eT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCgwLDAsMCwwKX0sdH0oKSxkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2b2lkIDA9PT1pJiYoaT0wKTt2YXIgcj10LmNhbGwodGhpcyxlLngsZS55KXx8dGhpcztyZXR1cm4gci5idXR0b25JbmRleD1pLHJ9cmV0dXJuIG4oZSx0KSxlfShzLlZlY3RvcjIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLHIsbixvKXt0aGlzLm09bmV3IEZsb2F0MzJBcnJheSg2KSx0aGlzLmZyb21WYWx1ZXModCxlLGkscixuLG8pfXJldHVybiB0LnByb3RvdHlwZS5mcm9tVmFsdWVzPWZ1bmN0aW9uKHQsZSxpLHIsbixvKXtyZXR1cm4gdGhpcy5tWzBdPXQsdGhpcy5tWzFdPWUsdGhpcy5tWzJdPWksdGhpcy5tWzNdPXIsdGhpcy5tWzRdPW4sdGhpcy5tWzVdPW8sdGhpc30sdC5wcm90b3R5cGUuZGV0ZXJtaW5hbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tWzBdKnRoaXMubVszXS10aGlzLm1bMV0qdGhpcy5tWzJdfSx0LnByb3RvdHlwZS5pbnZlcnRUb1JlZj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1bMF0saT10aGlzLm1bMV0scj10aGlzLm1bMl0sbj10aGlzLm1bM10sbz10aGlzLm1bNF0sYT10aGlzLm1bNV0saD10aGlzLmRldGVybWluYW50KCk7aWYoaDxzLkVwc2lsb24qcy5FcHNpbG9uKXJldHVybiB0Lm1bMF09MCx0Lm1bMV09MCx0Lm1bMl09MCx0Lm1bM109MCx0Lm1bNF09MCx0Lm1bNV09MCx0aGlzO3ZhciBsPTEvaCx1PXIqYS1uKm8sYz1pKm8tZSphO3JldHVybiB0Lm1bMF09bipsLHQubVsxXT0taSpsLHQubVsyXT0tcipsLHQubVszXT1lKmwsdC5tWzRdPXUqbCx0Lm1bNV09YypsLHRoaXN9LHQucHJvdG90eXBlLm11bHRpcGx5VG9SZWY9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm1bMF0scj10aGlzLm1bMV0sbj10aGlzLm1bMl0sbz10aGlzLm1bM10scz10aGlzLm1bNF0sYT10aGlzLm1bNV0saD10Lm1bMF0sbD10Lm1bMV0sdT10Lm1bMl0sYz10Lm1bM10sXz10Lm1bNF0sZD10Lm1bNV07cmV0dXJuIGUubVswXT1pKmgrcip1LGUubVsxXT1pKmwrcipjLGUubVsyXT1uKmgrbyp1LGUubVszXT1uKmwrbypjLGUubVs0XT1zKmgrYSp1K18sZS5tWzVdPXMqbCthKmMrZCx0aGlzfSx0LnByb3RvdHlwZS50cmFuc2Zvcm1Db29yZGluYXRlcz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGkueD10KnRoaXMubVswXStlKnRoaXMubVsyXSt0aGlzLm1bNF0saS55PXQqdGhpcy5tWzFdK2UqdGhpcy5tWzNdK3RoaXMubVs1XSx0aGlzfSx0LklkZW50aXR5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KDEsMCwwLDEsMCwwKX0sdC5UcmFuc2xhdGlvblRvUmVmPWZ1bmN0aW9uKHQsZSxpKXtpLmZyb21WYWx1ZXMoMSwwLDAsMSx0LGUpfSx0LlNjYWxpbmdUb1JlZj1mdW5jdGlvbih0LGUsaSl7aS5mcm9tVmFsdWVzKHQsMCwwLGUsMCwwKX0sdC5Sb3RhdGlvblRvUmVmPWZ1bmN0aW9uKHQsZSl7dmFyIGk9TWF0aC5zaW4odCkscj1NYXRoLmNvcyh0KTtlLmZyb21WYWx1ZXMocixpLC1pLHIsMCwwKX0sdC5Db21wb3NlVG9SZWY9ZnVuY3Rpb24oZSxpLHIsbixvLHMsYSl7dC5UcmFuc2xhdGlvblRvUmVmKGUsaSx0Ll9UZW1wUHJlVHJhbnNsYXRpb25NYXRyaXgpLHQuU2NhbGluZ1RvUmVmKG4sbyx0Ll9UZW1wU2NhbGluZ01hdHJpeCksdC5Sb3RhdGlvblRvUmVmKHIsdC5fVGVtcFJvdGF0aW9uTWF0cml4KSx0LlRyYW5zbGF0aW9uVG9SZWYoLWUsLWksdC5fVGVtcFBvc3RUcmFuc2xhdGlvbk1hdHJpeCksdC5fVGVtcFByZVRyYW5zbGF0aW9uTWF0cml4Lm11bHRpcGx5VG9SZWYodC5fVGVtcFNjYWxpbmdNYXRyaXgsdC5fVGVtcENvbXBvc2UwKSx0Ll9UZW1wQ29tcG9zZTAubXVsdGlwbHlUb1JlZih0Ll9UZW1wUm90YXRpb25NYXRyaXgsdC5fVGVtcENvbXBvc2UxKSxzPyh0Ll9UZW1wQ29tcG9zZTEubXVsdGlwbHlUb1JlZih0Ll9UZW1wUG9zdFRyYW5zbGF0aW9uTWF0cml4LHQuX1RlbXBDb21wb3NlMiksdC5fVGVtcENvbXBvc2UyLm11bHRpcGx5VG9SZWYocyxhKSk6dC5fVGVtcENvbXBvc2UxLm11bHRpcGx5VG9SZWYodC5fVGVtcFBvc3RUcmFuc2xhdGlvbk1hdHJpeCxhKX0sdC5fVGVtcFByZVRyYW5zbGF0aW9uTWF0cml4PXQuSWRlbnRpdHkoKSx0Ll9UZW1wUG9zdFRyYW5zbGF0aW9uTWF0cml4PXQuSWRlbnRpdHkoKSx0Ll9UZW1wUm90YXRpb25NYXRyaXg9dC5JZGVudGl0eSgpLHQuX1RlbXBTY2FsaW5nTWF0cml4PXQuSWRlbnRpdHkoKSx0Ll9UZW1wQ29tcG9zZTA9dC5JZGVudGl0eSgpLHQuX1RlbXBDb21wb3NlMT10LklkZW50aXR5KCksdC5fVGVtcENvbXBvc2UyPXQuSWRlbnRpdHkoKSx0fSgpLHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3RoaXMubmFtZT1lLHRoaXMuX2FscGhhPTEsdGhpcy5fYWxwaGFTZXQ9ITEsdGhpcy5fekluZGV4PTAsdGhpcy5fY3VycmVudE1lYXN1cmU9Xy5FbXB0eSgpLHRoaXMuX2ZvbnRGYW1pbHk9XCJBcmlhbFwiLHRoaXMuX2ZvbnRTdHlsZT1cIlwiLHRoaXMuX2ZvbnRXZWlnaHQ9XCJcIix0aGlzLl9mb250U2l6ZT1uZXcgYSgxOCxhLlVOSVRNT0RFX1BJWEVMLCExKSx0aGlzLl93aWR0aD1uZXcgYSgxLGEuVU5JVE1PREVfUEVSQ0VOVEFHRSwhMSksdGhpcy5faGVpZ2h0PW5ldyBhKDEsYS5VTklUTU9ERV9QRVJDRU5UQUdFLCExKSx0aGlzLl9jb2xvcj1cIlwiLHRoaXMuX3N0eWxlPW51bGwsdGhpcy5faG9yaXpvbnRhbEFsaWdubWVudD10LkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUix0aGlzLl92ZXJ0aWNhbEFsaWdubWVudD10LlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsdGhpcy5faXNEaXJ0eT0hMCx0aGlzLl93YXNEaXJ0eT0hMSx0aGlzLl90ZW1wUGFyZW50TWVhc3VyZT1fLkVtcHR5KCksdGhpcy5fcHJldkN1cnJlbnRNZWFzdXJlVHJhbnNmb3JtZWRJbnRvR2xvYmFsU3BhY2U9Xy5FbXB0eSgpLHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmU9Xy5FbXB0eSgpLHRoaXMuX3BhZGRpbmdMZWZ0PW5ldyBhKDApLHRoaXMuX3BhZGRpbmdSaWdodD1uZXcgYSgwKSx0aGlzLl9wYWRkaW5nVG9wPW5ldyBhKDApLHRoaXMuX3BhZGRpbmdCb3R0b209bmV3IGEoMCksdGhpcy5fbGVmdD1uZXcgYSgwKSx0aGlzLl90b3A9bmV3IGEoMCksdGhpcy5fc2NhbGVYPTEsdGhpcy5fc2NhbGVZPTEsdGhpcy5fcm90YXRpb249MCx0aGlzLl90cmFuc2Zvcm1DZW50ZXJYPS41LHRoaXMuX3RyYW5zZm9ybUNlbnRlclk9LjUsdGhpcy5fdHJhbnNmb3JtTWF0cml4PWYuSWRlbnRpdHkoKSx0aGlzLl9pbnZlcnRUcmFuc2Zvcm1NYXRyaXg9Zi5JZGVudGl0eSgpLHRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb249cy5WZWN0b3IyLlplcm8oKSx0aGlzLl9pc01hdHJpeERpcnR5PSEwLHRoaXMuX2lzVmlzaWJsZT0hMCx0aGlzLl9pc0hpZ2hsaWdodGVkPSExLHRoaXMuX2ZvbnRTZXQ9ITEsdGhpcy5fZHVtbXlWZWN0b3IyPXMuVmVjdG9yMi5aZXJvKCksdGhpcy5fZG93bkNvdW50PTAsdGhpcy5fZW50ZXJDb3VudD0tMSx0aGlzLl9kb05vdFJlbmRlcj0hMSx0aGlzLl9kb3duUG9pbnRlcklkcz17fSx0aGlzLl9pc0VuYWJsZWQ9ITAsdGhpcy5fZGlzYWJsZWRDb2xvcj1cIiM5YTlhOWFcIix0aGlzLl9kaXNhYmxlZENvbG9ySXRlbT1cIiM2YTZhNmFcIix0aGlzLl9yZWJ1aWxkTGF5b3V0PSExLHRoaXMuX2N1c3RvbURhdGE9e30sdGhpcy5faXNDbGlwcGVkPSExLHRoaXMuX2F1dG9tYXRpY1NpemU9ITEsdGhpcy5tZXRhZGF0YT1udWxsLHRoaXMuaXNIaXRUZXN0VmlzaWJsZT0hMCx0aGlzLmlzUG9pbnRlckJsb2NrZXI9ITEsdGhpcy5pc0ZvY3VzSW52aXNpYmxlPSExLHRoaXMuY2xpcENoaWxkcmVuPSEwLHRoaXMuY2xpcENvbnRlbnQ9ITAsdGhpcy51c2VCaXRtYXBDYWNoZT0hMSx0aGlzLl9zaGFkb3dPZmZzZXRYPTAsdGhpcy5fc2hhZG93T2Zmc2V0WT0wLHRoaXMuX3NoYWRvd0JsdXI9MCx0aGlzLl9zaGFkb3dDb2xvcj1cImJsYWNrXCIsdGhpcy5ob3ZlckN1cnNvcj1cIlwiLHRoaXMuX2xpbmtPZmZzZXRYPW5ldyBhKDApLHRoaXMuX2xpbmtPZmZzZXRZPW5ldyBhKDApLHRoaXMub25XaGVlbE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlck1vdmVPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJPdXRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJDbGlja09ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25EaXJ0eU9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uQmVmb3JlRHJhd09ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uQWZ0ZXJEcmF3T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMuX3RtcE1lYXN1cmVBPW5ldyBfKDAsMCwwLDApfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzaGFkb3dPZmZzZXRYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGFkb3dPZmZzZXRYfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2hhZG93T2Zmc2V0WCE9PXQmJih0aGlzLl9zaGFkb3dPZmZzZXRYPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2hhZG93T2Zmc2V0WVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhZG93T2Zmc2V0WX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NoYWRvd09mZnNldFkhPT10JiYodGhpcy5fc2hhZG93T2Zmc2V0WT10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNoYWRvd0JsdXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYWRvd0JsdXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFkb3dCbHVyIT09dCYmKHRoaXMuX3NoYWRvd0JsdXI9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzaGFkb3dDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhZG93Q29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFkb3dDb2xvciE9PXQmJih0aGlzLl9zaGFkb3dDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInR5cGVOYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRUeXBlTmFtZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmdldENsYXNzTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRUeXBlTmFtZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJob3N0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3N0fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRPZmZzZXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250T2Zmc2V0PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiYWxwaGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FscGhhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYWxwaGEhPT10JiYodGhpcy5fYWxwaGFTZXQ9ITAsdGhpcy5fYWxwaGE9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJpc0hpZ2hsaWdodGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0hpZ2hsaWdodGVkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNIaWdobGlnaHRlZCE9PXQmJih0aGlzLl9pc0hpZ2hsaWdodGVkPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2NhbGVYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZVh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZVghPT10JiYodGhpcy5fc2NhbGVYPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9tYXJrTWF0cml4QXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzY2FsZVlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlWX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlWSE9PXQmJih0aGlzLl9zY2FsZVk9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX21hcmtNYXRyaXhBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInJvdGF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb3RhdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JvdGF0aW9uIT09dCYmKHRoaXMuX3JvdGF0aW9uPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9tYXJrTWF0cml4QXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ0cmFuc2Zvcm1DZW50ZXJZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1DZW50ZXJZfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdHJhbnNmb3JtQ2VudGVyWSE9PXQmJih0aGlzLl90cmFuc2Zvcm1DZW50ZXJZPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9tYXJrTWF0cml4QXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ0cmFuc2Zvcm1DZW50ZXJYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1DZW50ZXJYfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdHJhbnNmb3JtQ2VudGVyWCE9PXQmJih0aGlzLl90cmFuc2Zvcm1DZW50ZXJYPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9tYXJrTWF0cml4QXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJob3Jpem9udGFsQWxpZ25tZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsQWxpZ25tZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faG9yaXpvbnRhbEFsaWdubWVudCE9PXQmJih0aGlzLl9ob3Jpem9udGFsQWxpZ25tZW50PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidmVydGljYWxBbGlnbm1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnRpY2FsQWxpZ25tZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdmVydGljYWxBbGlnbm1lbnQhPT10JiYodGhpcy5fdmVydGljYWxBbGlnbm1lbnQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ3aWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3dpZHRoLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwid2lkdGhJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGguZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMud2lkdGg9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faGVpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5faGVpZ2h0LmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaGVpZ2h0SW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlaWdodC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmhlaWdodCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMuaGVpZ2h0PXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmb250RmFtaWx5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb250U2V0P3RoaXMuX2ZvbnRGYW1pbHk6XCJcIn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRGYW1pbHkhPT10JiYodGhpcy5fZm9udEZhbWlseT10LHRoaXMuX3Jlc2V0Rm9udENhY2hlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRTdHlsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFN0eWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udFN0eWxlIT09dCYmKHRoaXMuX2ZvbnRTdHlsZT10LHRoaXMuX3Jlc2V0Rm9udENhY2hlKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRXZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRXZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250V2VpZ2h0IT09dCYmKHRoaXMuX2ZvbnRXZWlnaHQ9dCx0aGlzLl9yZXNldEZvbnRDYWNoZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzdHlsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3R5bGV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3N0eWxlJiYodGhpcy5fc3R5bGUub25DaGFuZ2VkT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fc3R5bGVPYnNlcnZlciksdGhpcy5fc3R5bGVPYnNlcnZlcj1udWxsKSx0aGlzLl9zdHlsZT10LHRoaXMuX3N0eWxlJiYodGhpcy5fc3R5bGVPYnNlcnZlcj10aGlzLl9zdHlsZS5vbkNoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX21hcmtBc0RpcnR5KCksZS5fcmVzZXRGb250Q2FjaGUoKX0pKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX3Jlc2V0Rm9udENhY2hlKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiX2lzRm9udFNpemVJblBlcmNlbnRhZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRTaXplLmlzUGVyY2VudGFnZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmb250U2l6ZUluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3N0eWxlP3RoaXMuX3N0eWxlLl9mb250U2l6ZTp0aGlzLl9mb250U2l6ZTtyZXR1cm4gdC5pc1BpeGVsP3QuZ2V0VmFsdWUodGhpcy5faG9zdCk6dC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl90ZW1wUGFyZW50TWVhc3VyZS5oZWlnaHR8fHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5mb250U2l6ZT10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udFNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRTaXplLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udFNpemUudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9mb250U2l6ZS5mcm9tU3RyaW5nKHQpJiYodGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9yZXNldEZvbnRDYWNoZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb2xvciE9PXQmJih0aGlzLl9jb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInpJbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fekluZGV4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy56SW5kZXghPT10JiYodGhpcy5fekluZGV4PXQsdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9yZU9yZGVyQ29udHJvbCh0aGlzKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibm90UmVuZGVyYWJsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9Ob3RSZW5kZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb05vdFJlbmRlciE9PXQmJih0aGlzLl9kb05vdFJlbmRlcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzVmlzaWJsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWaXNpYmxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNWaXNpYmxlIT09dCYmKHRoaXMuX2lzVmlzaWJsZT10LHRoaXMuX21hcmtBc0RpcnR5KCEwKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNEaXJ0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNEaXJ0eX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsaW5rZWRNZXNoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5rZWRNZXNofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhZGRpbmdMZWZ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nTGVmdC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhZGRpbmdMZWZ0LmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ0xlZnRJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFkZGluZ0xlZnQuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMucGFkZGluZ0xlZnQ9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhZGRpbmdSaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFkZGluZ1JpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFkZGluZ1JpZ2h0LmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ1JpZ2h0SW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdSaWdodC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5wYWRkaW5nUmlnaHQ9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhZGRpbmdUb3BcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZGRpbmdUb3AudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWRkaW5nVG9wLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicGFkZGluZ1RvcEluUGl4ZWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nVG9wLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy5wYWRkaW5nVG9wPXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwYWRkaW5nQm90dG9tXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRkaW5nQm90dG9tLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFkZGluZ0JvdHRvbS5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhZGRpbmdCb3R0b21JblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFkZGluZ0JvdHRvbS5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmhlaWdodCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMucGFkZGluZ0JvdHRvbT10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVmdC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xlZnQuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsZWZ0SW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlZnQuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMubGVmdD10K1wicHhcIil9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidG9wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3AudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90b3AuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ0b3BJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9wLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KX0sc2V0OmZ1bmN0aW9uKHQpe2lzTmFOKHQpfHwodGhpcy50b3A9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxpbmtPZmZzZXRYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5rT2Zmc2V0WC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xpbmtPZmZzZXRYLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibGlua09mZnNldFhJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGlua09mZnNldFguZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LHNldDpmdW5jdGlvbih0KXtpc05hTih0KXx8KHRoaXMubGlua09mZnNldFg9dCtcInB4XCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImxpbmtPZmZzZXRZXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5rT2Zmc2V0WS50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xpbmtPZmZzZXRZLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibGlua09mZnNldFlJblBpeGVsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGlua09mZnNldFkuZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5oZWlnaHQpfSxzZXQ6ZnVuY3Rpb24odCl7aXNOYU4odCl8fCh0aGlzLmxpbmtPZmZzZXRZPXQrXCJweFwiKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjZW50ZXJYXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiY2VudGVyWVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzRW5hYmxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNFbmFibGVkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faXNFbmFibGVkIT09dCYmKHRoaXMuX2lzRW5hYmxlZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRpc2FibGVkQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNhYmxlZENvbG9yIT09dCYmKHRoaXMuX2Rpc2FibGVkQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJkaXNhYmxlZENvbG9ySXRlbVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzYWJsZWRDb2xvckl0ZW19LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNhYmxlZENvbG9ySXRlbSE9PXQmJih0aGlzLl9kaXNhYmxlZENvbG9ySXRlbT10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQ29udHJvbFwifSx0LnByb3RvdHlwZS5nZXRBc2NlbmRhbnRPZkNsYXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnBhcmVudC5nZXRDbGFzc05hbWUoKT09PXQ/dGhpcy5wYXJlbnQ6dGhpcy5wYXJlbnQuZ2V0QXNjZW5kYW50T2ZDbGFzcyh0KTpudWxsfSx0LnByb3RvdHlwZS5fcmVzZXRGb250Q2FjaGU9ZnVuY3Rpb24oKXt0aGlzLl9mb250U2V0PSEwLHRoaXMuX21hcmtBc0RpcnR5KCl9LHQucHJvdG90eXBlLmlzQXNjZW5kYW50PWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5wYXJlbnQmJih0aGlzLnBhcmVudD09PXR8fHRoaXMucGFyZW50LmlzQXNjZW5kYW50KHQpKX0sdC5wcm90b3R5cGUuZ2V0TG9jYWxDb29yZGluYXRlcz1mdW5jdGlvbih0KXt2YXIgZT1zLlZlY3RvcjIuWmVybygpO3JldHVybiB0aGlzLmdldExvY2FsQ29vcmRpbmF0ZXNUb1JlZih0LGUpLGV9LHQucHJvdG90eXBlLmdldExvY2FsQ29vcmRpbmF0ZXNUb1JlZj1mdW5jdGlvbih0LGUpe3JldHVybiBlLng9dC54LXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsZS55PXQueS10aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpc30sdC5wcm90b3R5cGUuZ2V0UGFyZW50TG9jYWxDb29yZGluYXRlcz1mdW5jdGlvbih0KXt2YXIgZT1zLlZlY3RvcjIuWmVybygpO3JldHVybiBlLng9dC54LXRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUubGVmdCxlLnk9dC55LXRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUudG9wLGV9LHQucHJvdG90eXBlLm1vdmVUb1ZlY3RvcjM9ZnVuY3Rpb24oZSxpKXtpZih0aGlzLl9ob3N0JiZ0aGlzLnBhcmVudD09PXRoaXMuX2hvc3QuX3Jvb3RDb250YWluZXIpe3RoaXMuaG9yaXpvbnRhbEFsaWdubWVudD10LkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsdGhpcy52ZXJ0aWNhbEFsaWdubWVudD10LlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1A7dmFyIHI9dGhpcy5faG9zdC5fZ2V0R2xvYmFsVmlld3BvcnQoaSksbj1zLlZlY3RvcjMuUHJvamVjdChlLHMuTWF0cml4LklkZW50aXR5KCksaS5nZXRUcmFuc2Zvcm1NYXRyaXgoKSxyKTt0aGlzLl9tb3ZlVG9Qcm9qZWN0ZWRQb3NpdGlvbihuKSxuLno8MHx8bi56PjE/dGhpcy5ub3RSZW5kZXJhYmxlPSEwOnRoaXMubm90UmVuZGVyYWJsZT0hMX1lbHNlIHMuVG9vbHMuRXJyb3IoXCJDYW5ub3QgbW92ZSBhIGNvbnRyb2wgdG8gYSB2ZWN0b3IzIGlmIHRoZSBjb250cm9sIGlzIG5vdCBhdCByb290IGxldmVsXCIpfSx0LnByb3RvdHlwZS5nZXREZXNjZW5kYW50c1RvUmVmPWZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT1lJiYoZT0hMSl9LHQucHJvdG90eXBlLmdldERlc2NlbmRhbnRzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IEFycmF5O3JldHVybiB0aGlzLmdldERlc2NlbmRhbnRzVG9SZWYoaSx0LGUpLGl9LHQucHJvdG90eXBlLmxpbmtXaXRoTWVzaD1mdW5jdGlvbihlKXtpZighdGhpcy5faG9zdHx8dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50IT09dGhpcy5faG9zdC5fcm9vdENvbnRhaW5lcillJiZzLlRvb2xzLkVycm9yKFwiQ2Fubm90IGxpbmsgYSBjb250cm9sIHRvIGEgbWVzaCBpZiB0aGUgY29udHJvbCBpcyBub3QgYXQgcm9vdCBsZXZlbFwiKTtlbHNle3ZhciBpPXRoaXMuX2hvc3QuX2xpbmtlZENvbnRyb2xzLmluZGV4T2YodGhpcyk7aWYoLTEhPT1pKXJldHVybiB0aGlzLl9saW5rZWRNZXNoPWUsdm9pZChlfHx0aGlzLl9ob3N0Ll9saW5rZWRDb250cm9scy5zcGxpY2UoaSwxKSk7ZSYmKHRoaXMuaG9yaXpvbnRhbEFsaWdubWVudD10LkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsdGhpcy52ZXJ0aWNhbEFsaWdubWVudD10LlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1AsdGhpcy5fbGlua2VkTWVzaD1lLHRoaXMuX2hvc3QuX2xpbmtlZENvbnRyb2xzLnB1c2godGhpcykpfX0sdC5wcm90b3R5cGUuX21vdmVUb1Byb2plY3RlZFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xlZnQuZ2V0VmFsdWUodGhpcy5faG9zdCksaT10aGlzLl90b3AuZ2V0VmFsdWUodGhpcy5faG9zdCkscj10LngrdGhpcy5fbGlua09mZnNldFguZ2V0VmFsdWUodGhpcy5faG9zdCktdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMixuPXQueSt0aGlzLl9saW5rT2Zmc2V0WS5nZXRWYWx1ZSh0aGlzLl9ob3N0KS10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMjt0aGlzLl9sZWZ0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZyYmdGhpcy5fdG9wLmlnbm9yZUFkYXB0aXZlU2NhbGluZyYmKE1hdGguYWJzKHItZSk8LjUmJihyPWUpLE1hdGguYWJzKG4taSk8LjUmJihuPWkpKSx0aGlzLmxlZnQ9citcInB4XCIsdGhpcy50b3A9bitcInB4XCIsdGhpcy5fbGVmdC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITAsdGhpcy5fdG9wLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSx0LnByb3RvdHlwZS5fb2Zmc2V0TGVmdD1mdW5jdGlvbih0KXt0aGlzLl9pc0RpcnR5PSEwLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrPXR9LHQucHJvdG90eXBlLl9vZmZzZXRUb3A9ZnVuY3Rpb24odCl7dGhpcy5faXNEaXJ0eT0hMCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArPXR9LHQucHJvdG90eXBlLl9tYXJrTWF0cml4QXNEaXJ0eT1mdW5jdGlvbigpe3RoaXMuX2lzTWF0cml4RGlydHk9ITAsdGhpcy5fZmxhZ0Rlc2NlbmRhbnRzQXNNYXRyaXhEaXJ0eSgpfSx0LnByb3RvdHlwZS5fZmxhZ0Rlc2NlbmRhbnRzQXNNYXRyaXhEaXJ0eT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuX2ludGVyc2VjdHNSZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jdXJyZW50TWVhc3VyZS50cmFuc2Zvcm1Ub1JlZih0aGlzLl90cmFuc2Zvcm1NYXRyaXgsdGhpcy5fdG1wTWVhc3VyZUEpLCEodGhpcy5fdG1wTWVhc3VyZUEubGVmdD49dC5sZWZ0K3Qud2lkdGgpJiYoISh0aGlzLl90bXBNZWFzdXJlQS50b3A+PXQudG9wK3QuaGVpZ2h0KSYmKCEodGhpcy5fdG1wTWVhc3VyZUEubGVmdCt0aGlzLl90bXBNZWFzdXJlQS53aWR0aDw9dC5sZWZ0KSYmISh0aGlzLl90bXBNZWFzdXJlQS50b3ArdGhpcy5fdG1wTWVhc3VyZUEuaGVpZ2h0PD10LnRvcCkpKX0sdC5wcm90b3R5cGUuaW52YWxpZGF0ZVJlY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLl90cmFuc2Zvcm0oKSx0aGlzLmhvc3QmJnRoaXMuaG9zdC51c2VJbnZhbGlkYXRlUmVjdE9wdGltaXphdGlvbilpZih0aGlzLl9jdXJyZW50TWVhc3VyZS50cmFuc2Zvcm1Ub1JlZih0aGlzLl90cmFuc2Zvcm1NYXRyaXgsdGhpcy5fdG1wTWVhc3VyZUEpLF8uQ29tYmluZVRvUmVmKHRoaXMuX3RtcE1lYXN1cmVBLHRoaXMuX3ByZXZDdXJyZW50TWVhc3VyZVRyYW5zZm9ybWVkSW50b0dsb2JhbFNwYWNlLHRoaXMuX3RtcE1lYXN1cmVBKSx0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKXt2YXIgdD10aGlzLnNoYWRvd09mZnNldFgsZT10aGlzLnNoYWRvd09mZnNldFksaT10aGlzLnNoYWRvd0JsdXIscj1NYXRoLm1pbihNYXRoLm1pbih0LDApLTIqaSwwKSxuPU1hdGgubWF4KE1hdGgubWF4KHQsMCkrMippLDApLG89TWF0aC5taW4oTWF0aC5taW4oZSwwKS0yKmksMCkscz1NYXRoLm1heChNYXRoLm1heChlLDApKzIqaSwwKTt0aGlzLmhvc3QuaW52YWxpZGF0ZVJlY3QoTWF0aC5mbG9vcih0aGlzLl90bXBNZWFzdXJlQS5sZWZ0K3IpLE1hdGguZmxvb3IodGhpcy5fdG1wTWVhc3VyZUEudG9wK28pLE1hdGguY2VpbCh0aGlzLl90bXBNZWFzdXJlQS5sZWZ0K3RoaXMuX3RtcE1lYXN1cmVBLndpZHRoK24pLE1hdGguY2VpbCh0aGlzLl90bXBNZWFzdXJlQS50b3ArdGhpcy5fdG1wTWVhc3VyZUEuaGVpZ2h0K3MpKX1lbHNlIHRoaXMuaG9zdC5pbnZhbGlkYXRlUmVjdChNYXRoLmZsb29yKHRoaXMuX3RtcE1lYXN1cmVBLmxlZnQpLE1hdGguZmxvb3IodGhpcy5fdG1wTWVhc3VyZUEudG9wKSxNYXRoLmNlaWwodGhpcy5fdG1wTWVhc3VyZUEubGVmdCt0aGlzLl90bXBNZWFzdXJlQS53aWR0aCksTWF0aC5jZWlsKHRoaXMuX3RtcE1lYXN1cmVBLnRvcCt0aGlzLl90bXBNZWFzdXJlQS5oZWlnaHQpKX0sdC5wcm90b3R5cGUuX21hcmtBc0RpcnR5PWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PSExKSwodGhpcy5faXNWaXNpYmxlfHx0KSYmKHRoaXMuX2lzRGlydHk9ITAsdGhpcy5faG9zdCYmdGhpcy5faG9zdC5tYXJrQXNEaXJ0eSgpKX0sdC5wcm90b3R5cGUuX21hcmtBbGxBc0RpcnR5PWZ1bmN0aW9uKCl7dGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9mb250JiZ0aGlzLl9wcmVwYXJlRm9udCgpfSx0LnByb3RvdHlwZS5fbGluaz1mdW5jdGlvbih0KXt0aGlzLl9ob3N0PXQsdGhpcy5faG9zdCYmKHRoaXMudW5pcXVlSWQ9dGhpcy5faG9zdC5nZXRTY2VuZSgpLmdldFVuaXF1ZUlkKCkpfSx0LnByb3RvdHlwZS5fdHJhbnNmb3JtPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzTWF0cml4RGlydHl8fDEhPT10aGlzLl9zY2FsZVh8fDEhPT10aGlzLl9zY2FsZVl8fDAhPT10aGlzLl9yb3RhdGlvbil7dmFyIGU9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgqdGhpcy5fdHJhbnNmb3JtQ2VudGVyWCt0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LGk9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KnRoaXMuX3RyYW5zZm9ybUNlbnRlclkrdGhpcy5fY3VycmVudE1lYXN1cmUudG9wO3QmJih0LnRyYW5zbGF0ZShlLGkpLHQucm90YXRlKHRoaXMuX3JvdGF0aW9uKSx0LnNjYWxlKHRoaXMuX3NjYWxlWCx0aGlzLl9zY2FsZVkpLHQudHJhbnNsYXRlKC1lLC1pKSksKHRoaXMuX2lzTWF0cml4RGlydHl8fHRoaXMuX2NhY2hlZE9mZnNldFghPT1lfHx0aGlzLl9jYWNoZWRPZmZzZXRZIT09aSkmJih0aGlzLl9jYWNoZWRPZmZzZXRYPWUsdGhpcy5fY2FjaGVkT2Zmc2V0WT1pLHRoaXMuX2lzTWF0cml4RGlydHk9ITEsdGhpcy5fZmxhZ0Rlc2NlbmRhbnRzQXNNYXRyaXhEaXJ0eSgpLGYuQ29tcG9zZVRvUmVmKC1lLC1pLHRoaXMuX3JvdGF0aW9uLHRoaXMuX3NjYWxlWCx0aGlzLl9zY2FsZVksdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuX3RyYW5zZm9ybU1hdHJpeDpudWxsLHRoaXMuX3RyYW5zZm9ybU1hdHJpeCksdGhpcy5fdHJhbnNmb3JtTWF0cml4LmludmVydFRvUmVmKHRoaXMuX2ludmVydFRyYW5zZm9ybU1hdHJpeCkpfX0sdC5wcm90b3R5cGUuX3JlbmRlckhpZ2hsaWdodD1mdW5jdGlvbih0KXt0aGlzLmlzSGlnaGxpZ2h0ZWQmJih0LnNhdmUoKSx0LnN0cm9rZVN0eWxlPVwiIzRhZmZmZlwiLHQubGluZVdpZHRoPTIsdGhpcy5fcmVuZGVySGlnaGxpZ2h0U3BlY2lmaWModCksdC5yZXN0b3JlKCkpfSx0LnByb3RvdHlwZS5fcmVuZGVySGlnaGxpZ2h0U3BlY2lmaWM9ZnVuY3Rpb24odCl7dC5zdHJva2VSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCl9LHQucHJvdG90eXBlLl9hcHBseVN0YXRlcz1mdW5jdGlvbihlKXt0aGlzLl9pc0ZvbnRTaXplSW5QZXJjZW50YWdlJiYodGhpcy5fZm9udFNldD0hMCksdGhpcy5fZm9udFNldCYmKHRoaXMuX3ByZXBhcmVGb250KCksdGhpcy5fZm9udFNldD0hMSksdGhpcy5fZm9udCYmKGUuZm9udD10aGlzLl9mb250KSx0aGlzLl9jb2xvciYmKGUuZmlsbFN0eWxlPXRoaXMuX2NvbG9yKSx0LkFsbG93QWxwaGFJbmhlcml0YW5jZT9lLmdsb2JhbEFscGhhKj10aGlzLl9hbHBoYTp0aGlzLl9hbHBoYVNldCYmKGUuZ2xvYmFsQWxwaGE9dGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQuYWxwaGEqdGhpcy5fYWxwaGE6dGhpcy5fYWxwaGEpfSx0LnByb3RvdHlwZS5fbGF5b3V0PWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNEaXJ0eSYmKCF0aGlzLmlzVmlzaWJsZXx8dGhpcy5ub3RSZW5kZXJhYmxlKSlyZXR1cm4hMTtpZih0aGlzLl9pc0RpcnR5fHwhdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5pc0VxdWFsc1RvKHQpKXt0aGlzLmhvc3QuX251bUxheW91dENhbGxzKyssdGhpcy5fY3VycmVudE1lYXN1cmUudHJhbnNmb3JtVG9SZWYodGhpcy5fdHJhbnNmb3JtTWF0cml4LHRoaXMuX3ByZXZDdXJyZW50TWVhc3VyZVRyYW5zZm9ybWVkSW50b0dsb2JhbFNwYWNlKSxlLnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyhlKTt2YXIgaT0wO2Rve3RoaXMuX3JlYnVpbGRMYXlvdXQ9ITEsdGhpcy5fcHJvY2Vzc01lYXN1cmVzKHQsZSksaSsrfXdoaWxlKHRoaXMuX3JlYnVpbGRMYXlvdXQmJmk8Myk7aT49MyYmcy5Mb2dnZXIuRXJyb3IoXCJMYXlvdXQgY3ljbGUgZGV0ZWN0ZWQgaW4gR1VJIChDb250cm9sIG5hbWU9XCIrdGhpcy5uYW1lK1wiLCB1bmlxdWVJZD1cIit0aGlzLnVuaXF1ZUlkK1wiKVwiKSxlLnJlc3RvcmUoKSx0aGlzLmludmFsaWRhdGVSZWN0KCksdGhpcy5fZXZhbHVhdGVDbGlwcGluZ1N0YXRlKHQpfXJldHVybiB0aGlzLl93YXNEaXJ0eT10aGlzLl9pc0RpcnR5LHRoaXMuX2lzRGlydHk9ITEsITB9LHQucHJvdG90eXBlLl9wcm9jZXNzTWVhc3VyZXM9ZnVuY3Rpb24odCxlKXt0aGlzLl9jdXJyZW50TWVhc3VyZS5jb3B5RnJvbSh0KSx0aGlzLl9wcmVNZWFzdXJlKHQsZSksdGhpcy5fbWVhc3VyZSgpLHRoaXMuX2NvbXB1dGVBbGlnbm1lbnQodCxlKSx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0PTB8dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3A9MHx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg9MHx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ9MHx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQsdGhpcy5fYWRkaXRpb25hbFByb2Nlc3NpbmcodCxlKSx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmNvcHlGcm9tKHQpLHRoaXMub25EaXJ0eU9ic2VydmFibGUuaGFzT2JzZXJ2ZXJzKCkmJnRoaXMub25EaXJ0eU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpfSx0LnByb3RvdHlwZS5fZXZhbHVhdGVDbGlwcGluZ1N0YXRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5jbGlwQ2hpbGRyZW4pe2lmKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQ+dC5sZWZ0K3Qud2lkdGgpcmV0dXJuIHZvaWQodGhpcy5faXNDbGlwcGVkPSEwKTtpZih0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoPHQubGVmdClyZXR1cm4gdm9pZCh0aGlzLl9pc0NsaXBwZWQ9ITApO2lmKHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcD50LnRvcCt0LmhlaWdodClyZXR1cm4gdm9pZCh0aGlzLl9pc0NsaXBwZWQ9ITApO2lmKHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQ8dC50b3ApcmV0dXJuIHZvaWQodGhpcy5faXNDbGlwcGVkPSEwKX10aGlzLl9pc0NsaXBwZWQ9ITF9LHQucHJvdG90eXBlLl9tZWFzdXJlPWZ1bmN0aW9uKCl7dGhpcy5fd2lkdGguaXNQaXhlbD90aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD10aGlzLl93aWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCo9dGhpcy5fd2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5faGVpZ2h0LmlzUGl4ZWw/dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PXRoaXMuX2hlaWdodC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQqPXRoaXMuX2hlaWdodC5nZXRWYWx1ZSh0aGlzLl9ob3N0KX0sdC5wcm90b3R5cGUuX2NvbXB1dGVBbGlnbm1lbnQ9ZnVuY3Rpb24oZSxpKXt2YXIgcj10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxuPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCxvPWUud2lkdGgscz1lLmhlaWdodCxhPTAsaD0wO3N3aXRjaCh0aGlzLmhvcml6b250YWxBbGlnbm1lbnQpe2Nhc2UgdC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZUOmE9MDticmVhaztjYXNlIHQuSE9SSVpPTlRBTF9BTElHTk1FTlRfUklHSFQ6YT1vLXI7YnJlYWs7Y2FzZSB0LkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUjphPShvLXIpLzJ9c3dpdGNoKHRoaXMudmVydGljYWxBbGlnbm1lbnQpe2Nhc2UgdC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QOmg9MDticmVhaztjYXNlIHQuVkVSVElDQUxfQUxJR05NRU5UX0JPVFRPTTpoPXMtbjticmVhaztjYXNlIHQuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUjpoPShzLW4pLzJ9dGhpcy5fcGFkZGluZ0xlZnQuaXNQaXhlbD8odGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9dGhpcy5fcGFkZGluZ0xlZnQuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtPXRoaXMuX3BhZGRpbmdMZWZ0LmdldFZhbHVlKHRoaXMuX2hvc3QpKToodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9byp0aGlzLl9wYWRkaW5nTGVmdC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC09byp0aGlzLl9wYWRkaW5nTGVmdC5nZXRWYWx1ZSh0aGlzLl9ob3N0KSksdGhpcy5fcGFkZGluZ1JpZ2h0LmlzUGl4ZWw/dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtPXRoaXMuX3BhZGRpbmdSaWdodC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTp0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC09byp0aGlzLl9wYWRkaW5nUmlnaHQuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fcGFkZGluZ1RvcC5pc1BpeGVsPyh0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArPXRoaXMuX3BhZGRpbmdUb3AuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LT10aGlzLl9wYWRkaW5nVG9wLmdldFZhbHVlKHRoaXMuX2hvc3QpKToodGhpcy5fY3VycmVudE1lYXN1cmUudG9wKz1zKnRoaXMuX3BhZGRpbmdUb3AuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LT1zKnRoaXMuX3BhZGRpbmdUb3AuZ2V0VmFsdWUodGhpcy5faG9zdCkpLHRoaXMuX3BhZGRpbmdCb3R0b20uaXNQaXhlbD90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtPXRoaXMuX3BhZGRpbmdCb3R0b20uZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LT1zKnRoaXMuX3BhZGRpbmdCb3R0b20uZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fbGVmdC5pc1BpeGVsP3RoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrPXRoaXMuX2xlZnQuZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9byp0aGlzLl9sZWZ0LmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX3RvcC5pc1BpeGVsP3RoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCs9dGhpcy5fdG9wLmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCs9cyp0aGlzLl90b3AuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCs9YSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArPWh9LHQucHJvdG90eXBlLl9wcmVNZWFzdXJlPWZ1bmN0aW9uKHQsZSl7fSx0LnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3Npbmc9ZnVuY3Rpb24odCxlKXt9LHQucHJvdG90eXBlLl9jbGlwRm9yQ2hpbGRyZW49ZnVuY3Rpb24odCl7fSx0LnByb3RvdHlwZS5fY2xpcD1mdW5jdGlvbihlLGkpe2lmKGUuYmVnaW5QYXRoKCksdC5fQ2xpcE1lYXN1cmUuY29weUZyb20odGhpcy5fY3VycmVudE1lYXN1cmUpLGkpe2kudHJhbnNmb3JtVG9SZWYodGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LHRoaXMuX3RtcE1lYXN1cmVBKTt2YXIgcj1uZXcgXygwLDAsMCwwKTtyLmxlZnQ9TWF0aC5tYXgodGhpcy5fdG1wTWVhc3VyZUEubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KSxyLnRvcD1NYXRoLm1heCh0aGlzLl90bXBNZWFzdXJlQS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKSxyLndpZHRoPU1hdGgubWluKHRoaXMuX3RtcE1lYXN1cmVBLmxlZnQrdGhpcy5fdG1wTWVhc3VyZUEud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCktci5sZWZ0LHIuaGVpZ2h0PU1hdGgubWluKHRoaXMuX3RtcE1lYXN1cmVBLnRvcCt0aGlzLl90bXBNZWFzdXJlQS5oZWlnaHQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCktci50b3AsdC5fQ2xpcE1lYXN1cmUuY29weUZyb20ocil9aWYodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSl7dmFyIG49dGhpcy5zaGFkb3dPZmZzZXRYLG89dGhpcy5zaGFkb3dPZmZzZXRZLHM9dGhpcy5zaGFkb3dCbHVyLGE9TWF0aC5taW4oTWF0aC5taW4obiwwKS0yKnMsMCksaD1NYXRoLm1heChNYXRoLm1heChuLDApKzIqcywwKSxsPU1hdGgubWluKE1hdGgubWluKG8sMCktMipzLDApLHU9TWF0aC5tYXgoTWF0aC5tYXgobywwKSsyKnMsMCk7ZS5yZWN0KHQuX0NsaXBNZWFzdXJlLmxlZnQrYSx0Ll9DbGlwTWVhc3VyZS50b3ArbCx0Ll9DbGlwTWVhc3VyZS53aWR0aCtoLWEsdC5fQ2xpcE1lYXN1cmUuaGVpZ2h0K3UtbCl9ZWxzZSBlLnJlY3QodC5fQ2xpcE1lYXN1cmUubGVmdCx0Ll9DbGlwTWVhc3VyZS50b3AsdC5fQ2xpcE1lYXN1cmUud2lkdGgsdC5fQ2xpcE1lYXN1cmUuaGVpZ2h0KTtlLmNsaXAoKX0sdC5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbih0LGUpe3JldHVybiF0aGlzLmlzVmlzaWJsZXx8dGhpcy5ub3RSZW5kZXJhYmxlfHx0aGlzLl9pc0NsaXBwZWQ/KHRoaXMuX2lzRGlydHk9ITEsITEpOih0aGlzLmhvc3QuX251bVJlbmRlckNhbGxzKyssdC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5fdHJhbnNmb3JtKHQpLHRoaXMuY2xpcENvbnRlbnQmJnRoaXMuX2NsaXAodCxlKSx0aGlzLm9uQmVmb3JlRHJhd09ic2VydmFibGUuaGFzT2JzZXJ2ZXJzKCkmJnRoaXMub25CZWZvcmVEcmF3T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy51c2VCaXRtYXBDYWNoZSYmIXRoaXMuX3dhc0RpcnR5JiZ0aGlzLl9jYWNoZURhdGE/dC5wdXRJbWFnZURhdGEodGhpcy5fY2FjaGVEYXRhLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKTp0aGlzLl9kcmF3KHQsZSksdGhpcy51c2VCaXRtYXBDYWNoZSYmdGhpcy5fd2FzRGlydHkmJih0aGlzLl9jYWNoZURhdGE9dC5nZXRJbWFnZURhdGEodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSksdGhpcy5fcmVuZGVySGlnaGxpZ2h0KHQpLHRoaXMub25BZnRlckRyYXdPYnNlcnZhYmxlLmhhc09ic2VydmVycygpJiZ0aGlzLm9uQWZ0ZXJEcmF3T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdC5yZXN0b3JlKCksITApfSx0LnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe30sdC5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQsZSx0aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uKSx0PXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueCxlPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueSwhKHQ8dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCkmJighKHQ+dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCkmJighKGU8dGhpcy5fY3VycmVudE1lYXN1cmUudG9wKSYmKCEoZT50aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSYmKHRoaXMuaXNQb2ludGVyQmxvY2tlciYmKHRoaXMuX2hvc3QuX3Nob3VsZEJsb2NrUG9pbnRlcj0hMCksITApKSkpfSx0LnByb3RvdHlwZS5fcHJvY2Vzc1BpY2tpbmc9ZnVuY3Rpb24odCxlLGkscixuLG8scyl7cmV0dXJuISF0aGlzLl9pc0VuYWJsZWQmJighKCF0aGlzLmlzSGl0VGVzdFZpc2libGV8fCF0aGlzLmlzVmlzaWJsZXx8dGhpcy5fZG9Ob3RSZW5kZXIpJiYoISF0aGlzLmNvbnRhaW5zKHQsZSkmJih0aGlzLl9wcm9jZXNzT2JzZXJ2YWJsZXMoaSx0LGUscixuLG8scyksITApKSl9LHQucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLm9uUG9pbnRlck1vdmVPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhlLC0xLHQsdGhpcykmJm51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fb25Qb2ludGVyTW92ZSh0LGUsaSl9LHQucHJvdG90eXBlLl9vblBvaW50ZXJFbnRlcj1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuX2lzRW5hYmxlZCYmKCEodGhpcy5fZW50ZXJDb3VudD4wKSYmKC0xPT09dGhpcy5fZW50ZXJDb3VudCYmKHRoaXMuX2VudGVyQ291bnQ9MCksdGhpcy5fZW50ZXJDb3VudCsrLHRoaXMub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzLC0xLHQsdGhpcykmJm51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fb25Qb2ludGVyRW50ZXIodCksITApKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlck91dD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPSExKSxlfHx0aGlzLl9pc0VuYWJsZWQmJnQhPT10aGlzKXt0aGlzLl9lbnRlckNvdW50PTA7dmFyIGk9ITA7dC5pc0FzY2VuZGFudCh0aGlzKXx8KGk9dGhpcy5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzLC0xLHQsdGhpcykpLGkmJm51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fb25Qb2ludGVyT3V0KHQsZSl9fSx0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gdGhpcy5fb25Qb2ludGVyRW50ZXIodGhpcyksMD09PXRoaXMuX2Rvd25Db3VudCYmKHRoaXMuX2Rvd25Db3VudCsrLHRoaXMuX2Rvd25Qb2ludGVySWRzW2ldPSEwLHRoaXMub25Qb2ludGVyRG93bk9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKG5ldyBkKGUsciksLTEsdCx0aGlzKSYmbnVsbCE9dGhpcy5wYXJlbnQmJnRoaXMucGFyZW50Ll9vblBvaW50ZXJEb3duKHQsZSxpLHIpLCEwKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKHQsZSxpLHIsbil7aWYodGhpcy5faXNFbmFibGVkKXt0aGlzLl9kb3duQ291bnQ9MCxkZWxldGUgdGhpcy5fZG93blBvaW50ZXJJZHNbaV07dmFyIG89bjtuJiYodGhpcy5fZW50ZXJDb3VudD4wfHwtMT09PXRoaXMuX2VudGVyQ291bnQpJiYobz10aGlzLm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IGQoZSxyKSwtMSx0LHRoaXMpKSx0aGlzLm9uUG9pbnRlclVwT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IGQoZSxyKSwtMSx0LHRoaXMpJiZudWxsIT10aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQuX29uUG9pbnRlclVwKHQsZSxpLHIsbyl9fSx0LnByb3RvdHlwZS5fZm9yY2VQb2ludGVyVXA9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCYmKHQ9bnVsbCksbnVsbCE9PXQpdGhpcy5fb25Qb2ludGVyVXAodGhpcyxzLlZlY3RvcjIuWmVybygpLHQsMCwhMCk7ZWxzZSBmb3IodmFyIGUgaW4gdGhpcy5fZG93blBvaW50ZXJJZHMpdGhpcy5fb25Qb2ludGVyVXAodGhpcyxzLlZlY3RvcjIuWmVybygpLCtlLDAsITApfSx0LnByb3RvdHlwZS5fb25XaGVlbFNjcm9sbD1mdW5jdGlvbih0LGUpe3RoaXMuX2lzRW5hYmxlZCYmKHRoaXMub25XaGVlbE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKG5ldyBzLlZlY3RvcjIodCxlKSkmJm51bGwhPXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fb25XaGVlbFNjcm9sbCh0LGUpKX0sdC5wcm90b3R5cGUuX3Byb2Nlc3NPYnNlcnZhYmxlcz1mdW5jdGlvbih0LGUsaSxyLG4sbyxhKXtpZighdGhpcy5faXNFbmFibGVkKXJldHVybiExO2lmKHRoaXMuX2R1bW15VmVjdG9yMi5jb3B5RnJvbUZsb2F0cyhlLGkpLHQ9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFKXt0aGlzLl9vblBvaW50ZXJNb3ZlKHRoaXMsdGhpcy5fZHVtbXlWZWN0b3IyLHIpO3ZhciBoPXRoaXMuX2hvc3QuX2xhc3RDb250cm9sT3ZlcltyXTtyZXR1cm4gaCYmaCE9PXRoaXMmJmguX29uUG9pbnRlck91dCh0aGlzKSxoIT09dGhpcyYmdGhpcy5fb25Qb2ludGVyRW50ZXIodGhpcyksdGhpcy5faG9zdC5fbGFzdENvbnRyb2xPdmVyW3JdPXRoaXMsITB9cmV0dXJuIHQ9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJET1dOPyh0aGlzLl9vblBvaW50ZXJEb3duKHRoaXMsdGhpcy5fZHVtbXlWZWN0b3IyLHIsbiksdGhpcy5faG9zdC5fcmVnaXN0ZXJMYXN0Q29udHJvbERvd24odGhpcyxyKSx0aGlzLl9ob3N0Ll9sYXN0UGlja2VkQ29udHJvbD10aGlzLCEwKTp0PT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSVVA/KHRoaXMuX2hvc3QuX2xhc3RDb250cm9sRG93bltyXSYmdGhpcy5faG9zdC5fbGFzdENvbnRyb2xEb3duW3JdLl9vblBvaW50ZXJVcCh0aGlzLHRoaXMuX2R1bW15VmVjdG9yMixyLG4sITApLGRlbGV0ZSB0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25bcl0sITApOiEodCE9PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUldIRUVMfHwhdGhpcy5faG9zdC5fbGFzdENvbnRyb2xPdmVyW3JdKSYmKHRoaXMuX2hvc3QuX2xhc3RDb250cm9sT3ZlcltyXS5fb25XaGVlbFNjcm9sbChvLGEpLCEwKX0sdC5wcm90b3R5cGUuX3ByZXBhcmVGb250PWZ1bmN0aW9uKCl7KHRoaXMuX2ZvbnR8fHRoaXMuX2ZvbnRTZXQpJiYodGhpcy5fc3R5bGU/dGhpcy5fZm9udD10aGlzLl9zdHlsZS5mb250U3R5bGUrXCIgXCIrdGhpcy5fc3R5bGUuZm9udFdlaWdodCtcIiBcIit0aGlzLmZvbnRTaXplSW5QaXhlbHMrXCJweCBcIit0aGlzLl9zdHlsZS5mb250RmFtaWx5OnRoaXMuX2ZvbnQ9dGhpcy5fZm9udFN0eWxlK1wiIFwiK3RoaXMuX2ZvbnRXZWlnaHQrXCIgXCIrdGhpcy5mb250U2l6ZUluUGl4ZWxzK1wicHggXCIrdGhpcy5fZm9udEZhbWlseSx0aGlzLl9mb250T2Zmc2V0PXQuX0dldEZvbnRPZmZzZXQodGhpcy5fZm9udCkpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7KHRoaXMub25EaXJ0eU9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uQmVmb3JlRHJhd09ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uQWZ0ZXJEcmF3T2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyRG93bk9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlclVwT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vbldoZWVsT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMuX3N0eWxlT2JzZXJ2ZXImJnRoaXMuX3N0eWxlJiYodGhpcy5fc3R5bGUub25DaGFuZ2VkT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fc3R5bGVPYnNlcnZlciksdGhpcy5fc3R5bGVPYnNlcnZlcj1udWxsKSx0aGlzLnBhcmVudCYmKHRoaXMucGFyZW50LnJlbW92ZUNvbnRyb2wodGhpcyksdGhpcy5wYXJlbnQ9bnVsbCksdGhpcy5faG9zdCkmJih0aGlzLl9ob3N0Ll9saW5rZWRDb250cm9scy5pbmRleE9mKHRoaXMpPi0xJiZ0aGlzLmxpbmtXaXRoTWVzaChudWxsKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIkhPUklaT05UQUxfQUxJR05NRU5UX1JJR0hUXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9SSUdIVH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiVkVSVElDQUxfQUxJR05NRU5UX1RPUFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fVkVSVElDQUxfQUxJR05NRU5UX1RPUH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIlZFUlRJQ0FMX0FMSUdOTUVOVF9CT1RUT01cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX1ZFUlRJQ0FMX0FMSUdOTUVOVF9CT1RUT019LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJWRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll9WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQuX0dldEZvbnRPZmZzZXQ9ZnVuY3Rpb24oZSl7aWYodC5fRm9udEhlaWdodFNpemVzW2VdKXJldHVybiB0Ll9Gb250SGVpZ2h0U2l6ZXNbZV07dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7aS5pbm5lckhUTUw9XCJIZ1wiLGkuc3R5bGUuZm9udD1lO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ci5zdHlsZS5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIsci5zdHlsZS53aWR0aD1cIjFweFwiLHIuc3R5bGUuaGVpZ2h0PVwiMHB4XCIsci5zdHlsZS52ZXJ0aWNhbEFsaWduPVwiYm90dG9tXCI7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmFwcGVuZENoaWxkKGkpLG4uYXBwZW5kQ2hpbGQociksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKTt2YXIgbz0wLHM9MDt0cnl7cz1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcC1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCxyLnN0eWxlLnZlcnRpY2FsQWxpZ249XCJiYXNlbGluZVwiLG89ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AtaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3B9ZmluYWxseXtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pfXZhciBhPXthc2NlbnQ6byxoZWlnaHQ6cyxkZXNjZW50OnMtb307cmV0dXJuIHQuX0ZvbnRIZWlnaHRTaXplc1tlXT1hLGF9LHQuZHJhd0VsbGlwc2U9ZnVuY3Rpb24odCxlLGkscixuKXtuLnRyYW5zbGF0ZSh0LGUpLG4uc2NhbGUoaSxyKSxuLmJlZ2luUGF0aCgpLG4uYXJjKDAsMCwxLDAsMipNYXRoLlBJKSxuLmNsb3NlUGF0aCgpLG4uc2NhbGUoMS9pLDEvciksbi50cmFuc2xhdGUoLXQsLWUpfSx0LkFsbG93QWxwaGFJbmhlcml0YW5jZT0hMSx0Ll9DbGlwTWVhc3VyZT1uZXcgXygwLDAsMCwwKSx0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZUPTAsdC5fSE9SSVpPTlRBTF9BTElHTk1FTlRfUklHSFQ9MSx0Ll9IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVI9Mix0Ll9WRVJUSUNBTF9BTElHTk1FTlRfVE9QPTAsdC5fVkVSVElDQUxfQUxJR05NRU5UX0JPVFRPTT0xLHQuX1ZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVI9Mix0Ll9Gb250SGVpZ2h0U2l6ZXM9e30sdC5BZGRIZWFkZXI9ZnVuY3Rpb24oKXt9LHR9KCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkNvbnRyb2xcIl09cDt2YXIgZz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl9jaGlsZHJlbj1uZXcgQXJyYXksaS5fbWVhc3VyZUZvckNoaWxkcmVuPV8uRW1wdHkoKSxpLl9iYWNrZ3JvdW5kPVwiXCIsaS5fYWRhcHRXaWR0aFRvQ2hpbGRyZW49ITEsaS5fYWRhcHRIZWlnaHRUb0NoaWxkcmVuPSExLGkubG9nTGF5b3V0Q3ljbGVFcnJvcnM9ITEsaS5tYXhMYXlvdXRDeWNsZT0zLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhZGFwdEhlaWdodFRvQ2hpbGRyZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FkYXB0SGVpZ2h0VG9DaGlsZHJlbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FkYXB0SGVpZ2h0VG9DaGlsZHJlbiE9PXQmJih0aGlzLl9hZGFwdEhlaWdodFRvQ2hpbGRyZW49dCx0JiYodGhpcy5oZWlnaHQ9XCIxMDAlXCIpLHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImFkYXB0V2lkdGhUb0NoaWxkcmVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hZGFwdFdpZHRoVG9DaGlsZHJlbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FkYXB0V2lkdGhUb0NoaWxkcmVuIT09dCYmKHRoaXMuX2FkYXB0V2lkdGhUb0NoaWxkcmVuPXQsdCYmKHRoaXMud2lkdGg9XCIxMDAlXCIpLHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGlsZHJlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW59LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJDb250YWluZXJcIn0sZS5wcm90b3R5cGUuX2ZsYWdEZXNjZW5kYW50c0FzTWF0cml4RGlydHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuY2hpbGRyZW47dDxlLmxlbmd0aDt0Kyspe2VbdF0uX21hcmtNYXRyaXhBc0RpcnR5KCl9fSxlLnByb3RvdHlwZS5nZXRDaGlsZEJ5TmFtZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXRoaXMuY2hpbGRyZW47ZTxpLmxlbmd0aDtlKyspe3ZhciByPWlbZV07aWYoci5uYW1lPT09dClyZXR1cm4gcn1yZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZ2V0Q2hpbGRCeVR5cGU9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxyPXRoaXMuY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07aWYobi50eXBlTmFtZT09PWUpcmV0dXJuIG59cmV0dXJuIG51bGx9LGUucHJvdG90eXBlLmNvbnRhaW5zQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PXRoaXMuY2hpbGRyZW4uaW5kZXhPZih0KX0sZS5wcm90b3R5cGUuYWRkQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdD8tMSE9PXRoaXMuX2NoaWxkcmVuLmluZGV4T2YodCk/dGhpczoodC5fbGluayh0aGlzLl9ob3N0KSx0Ll9tYXJrQWxsQXNEaXJ0eSgpLHRoaXMuX3JlT3JkZXJDb250cm9sKHQpLHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcyk6dGhpc30sZS5wcm90b3R5cGUuY2xlYXJDb250cm9scz1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5jaGlsZHJlbi5zbGljZSgpO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgaT1lW3RdO3RoaXMucmVtb3ZlQ29udHJvbChpKX1yZXR1cm4gdGhpc30sZS5wcm90b3R5cGUucmVtb3ZlQ29udHJvbD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jaGlsZHJlbi5pbmRleE9mKHQpO3JldHVybi0xIT09ZSYmKHRoaXMuX2NoaWxkcmVuLnNwbGljZShlLDEpLHQucGFyZW50PW51bGwpLHQubGlua1dpdGhNZXNoKG51bGwpLHRoaXMuX2hvc3QmJnRoaXMuX2hvc3QuX2NsZWFuQ29udHJvbEFmdGVyUmVtb3ZhbCh0KSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLl9yZU9yZGVyQ29udHJvbD1mdW5jdGlvbih0KXt0aGlzLnJlbW92ZUNvbnRyb2wodCk7Zm9yKHZhciBlPSExLGk9MDtpPHRoaXMuX2NoaWxkcmVuLmxlbmd0aDtpKyspaWYodGhpcy5fY2hpbGRyZW5baV0uekluZGV4PnQuekluZGV4KXt0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaSwwLHQpLGU9ITA7YnJlYWt9ZXx8dGhpcy5fY2hpbGRyZW4ucHVzaCh0KSx0LnBhcmVudD10aGlzLHRoaXMuX21hcmtBc0RpcnR5KCl9LGUucHJvdG90eXBlLl9vZmZzZXRMZWZ0PWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLl9vZmZzZXRMZWZ0LmNhbGwodGhpcyxlKTtmb3IodmFyIGk9MCxyPXRoaXMuX2NoaWxkcmVuO2k8ci5sZW5ndGg7aSsrKXtyW2ldLl9vZmZzZXRMZWZ0KGUpfX0sZS5wcm90b3R5cGUuX29mZnNldFRvcD1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5fb2Zmc2V0VG9wLmNhbGwodGhpcyxlKTtmb3IodmFyIGk9MCxyPXRoaXMuX2NoaWxkcmVuO2k8ci5sZW5ndGg7aSsrKXtyW2ldLl9vZmZzZXRUb3AoZSl9fSxlLnByb3RvdHlwZS5fbWFya0FsbEFzRGlydHk9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5fbWFya0FsbEFzRGlydHkuY2FsbCh0aGlzKTtmb3IodmFyIGU9MDtlPHRoaXMuX2NoaWxkcmVuLmxlbmd0aDtlKyspdGhpcy5fY2hpbGRyZW5bZV0uX21hcmtBbGxBc0RpcnR5KCl9LGUucHJvdG90eXBlLl9sb2NhbERyYXc9ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCYmKHQuc2F2ZSgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdC5maWxsU3R5bGU9dGhpcy5fYmFja2dyb3VuZCx0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdC5yZXN0b3JlKCkpfSxlLnByb3RvdHlwZS5fbGluaz1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5fbGluay5jYWxsKHRoaXMsZSk7Zm9yKHZhciBpPTAscj10aGlzLl9jaGlsZHJlbjtpPHIubGVuZ3RoO2krKyl7cltpXS5fbGluayhlKX19LGUucHJvdG90eXBlLl9iZWZvcmVMYXlvdXQ9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLl9wcm9jZXNzTWVhc3VyZXM9ZnVuY3Rpb24oZSxpKXshdGhpcy5faXNEaXJ0eSYmdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5pc0VxdWFsc1RvKGUpfHwodC5wcm90b3R5cGUuX3Byb2Nlc3NNZWFzdXJlcy5jYWxsKHRoaXMsZSxpKSx0aGlzLl9ldmFsdWF0ZUNsaXBwaW5nU3RhdGUoZSkpfSxlLnByb3RvdHlwZS5fbGF5b3V0PWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuaXNEaXJ0eSYmKCF0aGlzLmlzVmlzaWJsZXx8dGhpcy5ub3RSZW5kZXJhYmxlKSlyZXR1cm4hMTt0aGlzLmhvc3QuX251bUxheW91dENhbGxzKyssdGhpcy5faXNEaXJ0eSYmdGhpcy5fY3VycmVudE1lYXN1cmUudHJhbnNmb3JtVG9SZWYodGhpcy5fdHJhbnNmb3JtTWF0cml4LHRoaXMuX3ByZXZDdXJyZW50TWVhc3VyZVRyYW5zZm9ybWVkSW50b0dsb2JhbFNwYWNlKTt2YXIgaT0wO2Uuc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKGUpLHRoaXMuX2JlZm9yZUxheW91dCgpO2Rve3ZhciByPS0xLG49LTE7aWYodGhpcy5fcmVidWlsZExheW91dD0hMSx0aGlzLl9wcm9jZXNzTWVhc3VyZXModCxlKSwhdGhpcy5faXNDbGlwcGVkKXtmb3IodmFyIG89MCxhPXRoaXMuX2NoaWxkcmVuO288YS5sZW5ndGg7bysrKXt2YXIgaD1hW29dO2guX3RlbXBQYXJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbiksaC5fbGF5b3V0KHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbixlKSYmKHRoaXMuYWRhcHRXaWR0aFRvQ2hpbGRyZW4mJmguX3dpZHRoLmlzUGl4ZWwmJihyPU1hdGgubWF4KHIsaC5fY3VycmVudE1lYXN1cmUud2lkdGgpKSx0aGlzLmFkYXB0SGVpZ2h0VG9DaGlsZHJlbiYmaC5faGVpZ2h0LmlzUGl4ZWwmJihuPU1hdGgubWF4KG4saC5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSkpfXRoaXMuYWRhcHRXaWR0aFRvQ2hpbGRyZW4mJnI+PTAmJnRoaXMud2lkdGghPT1yK1wicHhcIiYmKHRoaXMud2lkdGg9citcInB4XCIsdGhpcy5fcmVidWlsZExheW91dD0hMCksdGhpcy5hZGFwdEhlaWdodFRvQ2hpbGRyZW4mJm4+PTAmJnRoaXMuaGVpZ2h0IT09bitcInB4XCImJih0aGlzLmhlaWdodD1uK1wicHhcIix0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKSx0aGlzLl9wb3N0TWVhc3VyZSgpfWkrK313aGlsZSh0aGlzLl9yZWJ1aWxkTGF5b3V0JiZpPHRoaXMubWF4TGF5b3V0Q3ljbGUpO3JldHVybiBpPj0zJiZ0aGlzLmxvZ0xheW91dEN5Y2xlRXJyb3JzJiZzLkxvZ2dlci5FcnJvcihcIkxheW91dCBjeWNsZSBkZXRlY3RlZCBpbiBHVUkgKENvbnRhaW5lciBuYW1lPVwiK3RoaXMubmFtZStcIiwgdW5pcXVlSWQ9XCIrdGhpcy51bmlxdWVJZCtcIilcIiksZS5yZXN0b3JlKCksdGhpcy5faXNEaXJ0eSYmKHRoaXMuaW52YWxpZGF0ZVJlY3QoKSx0aGlzLl9pc0RpcnR5PSExKSwhMH0sZS5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe3RoaXMuX2xvY2FsRHJhdyh0KSx0aGlzLmNsaXBDaGlsZHJlbiYmdGhpcy5fY2xpcEZvckNoaWxkcmVuKHQpO2Zvcih2YXIgaT0wLHI9dGhpcy5fY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07ZSYmIW4uX2ludGVyc2VjdHNSZWN0KGUpfHxuLl9yZW5kZXIodCxlKX19LGUucHJvdG90eXBlLmdldERlc2NlbmRhbnRzVG9SZWY9ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWUmJihlPSExKSx0aGlzLmNoaWxkcmVuKWZvcih2YXIgcj0wO3I8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cisrKXt2YXIgbj10aGlzLmNoaWxkcmVuW3JdO2kmJiFpKG4pfHx0LnB1c2gobiksZXx8bi5nZXREZXNjZW5kYW50c1RvUmVmKHQsITEsaSl9fSxlLnByb3RvdHlwZS5fcHJvY2Vzc1BpY2tpbmc9ZnVuY3Rpb24oZSxpLHIsbixvLHMsYSl7aWYoIXRoaXMuX2lzRW5hYmxlZHx8IXRoaXMuaXNWaXNpYmxlfHx0aGlzLm5vdFJlbmRlcmFibGUpcmV0dXJuITE7aWYoIXQucHJvdG90eXBlLmNvbnRhaW5zLmNhbGwodGhpcyxlLGkpKXJldHVybiExO2Zvcih2YXIgaD10aGlzLl9jaGlsZHJlbi5sZW5ndGgtMTtoPj0wO2gtLSl7dmFyIGw9dGhpcy5fY2hpbGRyZW5baF07aWYobC5fcHJvY2Vzc1BpY2tpbmcoZSxpLHIsbixvLHMsYSkpcmV0dXJuIGwuaG92ZXJDdXJzb3ImJnRoaXMuX2hvc3QuX2NoYW5nZUN1cnNvcihsLmhvdmVyQ3Vyc29yKSwhMH1yZXR1cm4hIXRoaXMuaXNIaXRUZXN0VmlzaWJsZSYmdGhpcy5fcHJvY2Vzc09ic2VydmFibGVzKHIsZSxpLG4sbyxzLGEpfSxlLnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3Npbmc9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3NpbmcuY2FsbCh0aGlzLGUsaSksdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmNvcHlGcm9tKHRoaXMuX2N1cnJlbnRNZWFzdXJlKX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtmb3IodmFyIGU9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLmNoaWxkcmVuW2VdLmRpc3Bvc2UoKX0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkNvbnRhaW5lclwiXT1nO3ZhciBiLG09ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fdGhpY2tuZXNzPTEsaS5fY29ybmVyUmFkaXVzPTAsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRoaWNrbmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhpY2tuZXNzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGhpY2tuZXNzIT09dCYmKHRoaXMuX3RoaWNrbmVzcz10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvcm5lclJhZGl1c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ybmVyUmFkaXVzfSxzZXQ6ZnVuY3Rpb24odCl7dDwwJiYodD0wKSx0aGlzLl9jb3JuZXJSYWRpdXMhPT10JiYodGhpcy5fY29ybmVyUmFkaXVzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJSZWN0YW5nbGVcIn0sZS5wcm90b3R5cGUuX2xvY2FsRHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpLHRoaXMuX2JhY2tncm91bmQmJih0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHRoaXMuX2Nvcm5lclJhZGl1cz8odGhpcy5fZHJhd1JvdW5kZWRSZWN0KHQsdGhpcy5fdGhpY2tuZXNzLzIpLHQuZmlsbCgpKTp0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkpLHRoaXMuX3RoaWNrbmVzcyYmKCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0aGlzLmNvbG9yJiYodC5zdHJva2VTdHlsZT10aGlzLmNvbG9yKSx0LmxpbmVXaWR0aD10aGlzLl90aGlja25lc3MsdGhpcy5fY29ybmVyUmFkaXVzPyh0aGlzLl9kcmF3Um91bmRlZFJlY3QodCx0aGlzLl90aGlja25lc3MvMiksdC5zdHJva2UoKSk6dC5zdHJva2VSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX3RoaWNrbmVzcy8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLXRoaXMuX3RoaWNrbmVzcyx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fdGhpY2tuZXNzKSksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZy5jYWxsKHRoaXMsZSxpKSx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4ud2lkdGgtPTIqdGhpcy5fdGhpY2tuZXNzLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5oZWlnaHQtPTIqdGhpcy5fdGhpY2tuZXNzLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5sZWZ0Kz10aGlzLl90aGlja25lc3MsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLnRvcCs9dGhpcy5fdGhpY2tuZXNzfSxlLnByb3RvdHlwZS5fZHJhd1JvdW5kZWRSZWN0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MCk7dmFyIGk9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtlLHI9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wK2Usbj10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC0yKmUsbz10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtMiplLHM9TWF0aC5taW4oby8yLTIsTWF0aC5taW4obi8yLTIsdGhpcy5fY29ybmVyUmFkaXVzKSk7dC5iZWdpblBhdGgoKSx0Lm1vdmVUbyhpK3MsciksdC5saW5lVG8oaStuLXMsciksdC5xdWFkcmF0aWNDdXJ2ZVRvKGkrbixyLGkrbixyK3MpLHQubGluZVRvKGkrbixyK28tcyksdC5xdWFkcmF0aWNDdXJ2ZVRvKGkrbixyK28saStuLXMscitvKSx0LmxpbmVUbyhpK3MscitvKSx0LnF1YWRyYXRpY0N1cnZlVG8oaSxyK28saSxyK28tcyksdC5saW5lVG8oaSxyK3MpLHQucXVhZHJhdGljQ3VydmVUbyhpLHIsaStzLHIpLHQuY2xvc2VQYXRoKCl9LGUucHJvdG90eXBlLl9jbGlwRm9yQ2hpbGRyZW49ZnVuY3Rpb24odCl7dGhpcy5fY29ybmVyUmFkaXVzJiYodGhpcy5fZHJhd1JvdW5kZWRSZWN0KHQsdGhpcy5fdGhpY2tuZXNzKSx0LmNsaXAoKSl9LGV9KGcpO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5SZWN0YW5nbGVcIl09bSxmdW5jdGlvbih0KXt0W3QuQ2xpcD0wXT1cIkNsaXBcIix0W3QuV29yZFdyYXA9MV09XCJXb3JkV3JhcFwiLHRbdC5FbGxpcHNpcz0yXT1cIkVsbGlwc2lzXCJ9KGJ8fChiPXt9KSk7dmFyIHk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPVwiXCIpO3ZhciByPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiByLm5hbWU9ZSxyLl90ZXh0PVwiXCIsci5fdGV4dFdyYXBwaW5nPWIuQ2xpcCxyLl90ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUixyLl90ZXh0VmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLHIuX3Jlc2l6ZVRvRml0PSExLHIuX2xpbmVTcGFjaW5nPW5ldyBhKDApLHIuX291dGxpbmVXaWR0aD0wLHIuX291dGxpbmVDb2xvcj1cIndoaXRlXCIsci5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25MaW5lc1JlYWR5T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIudGV4dD1pLHJ9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsaW5lc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZXN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVzaXplVG9GaXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc2l6ZVRvRml0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmVzaXplVG9GaXQhPT10JiYodGhpcy5fcmVzaXplVG9GaXQ9dCx0aGlzLl9yZXNpemVUb0ZpdCYmKHRoaXMuX3dpZHRoLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCx0aGlzLl9oZWlnaHQuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwKSx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0V3JhcHBpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRXcmFwcGluZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHRXcmFwcGluZyE9PXQmJih0aGlzLl90ZXh0V3JhcHBpbmc9K3QsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHQhPT10JiYodGhpcy5fdGV4dD10LHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcykpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRIb3Jpem9udGFsQWxpZ25tZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0SG9yaXpvbnRhbEFsaWdubWVudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RleHRIb3Jpem9udGFsQWxpZ25tZW50IT09dCYmKHRoaXMuX3RleHRIb3Jpem9udGFsQWxpZ25tZW50PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGV4dFZlcnRpY2FsQWxpZ25tZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0VmVydGljYWxBbGlnbm1lbnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90ZXh0VmVydGljYWxBbGlnbm1lbnQhPT10JiYodGhpcy5fdGV4dFZlcnRpY2FsQWxpZ25tZW50PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGluZVNwYWNpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVTcGFjaW5nLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGluZVNwYWNpbmcuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJvdXRsaW5lV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dGxpbmVXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dGxpbmVXaWR0aCE9PXQmJih0aGlzLl9vdXRsaW5lV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJvdXRsaW5lQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dGxpbmVDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dGxpbmVDb2xvciE9PXQmJih0aGlzLl9vdXRsaW5lQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlRleHRCbG9ja1wifSxlLnByb3RvdHlwZS5fcHJvY2Vzc01lYXN1cmVzPWZ1bmN0aW9uKGUsaSl7dGhpcy5fZm9udE9mZnNldHx8KHRoaXMuX2ZvbnRPZmZzZXQ9cC5fR2V0Rm9udE9mZnNldChpLmZvbnQpKSx0LnByb3RvdHlwZS5fcHJvY2Vzc01lYXN1cmVzLmNhbGwodGhpcyxlLGkpLHRoaXMuX2xpbmVzPXRoaXMuX2JyZWFrTGluZXModGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsaSksdGhpcy5vbkxpbmVzUmVhZHlPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKTtmb3IodmFyIHI9MCxuPTA7bjx0aGlzLl9saW5lcy5sZW5ndGg7bisrKXt2YXIgbz10aGlzLl9saW5lc1tuXTtvLndpZHRoPnImJihyPW8ud2lkdGgpfWlmKHRoaXMuX3Jlc2l6ZVRvRml0KXtpZih0aGlzLl90ZXh0V3JhcHBpbmc9PT1iLkNsaXApe3ZhciBzPXRoaXMucGFkZGluZ0xlZnRJblBpeGVscyt0aGlzLnBhZGRpbmdSaWdodEluUGl4ZWxzK3I7cyE9PXRoaXMuX3dpZHRoLmludGVybmFsVmFsdWUmJih0aGlzLl93aWR0aC51cGRhdGVJblBsYWNlKHMsYS5VTklUTU9ERV9QSVhFTCksdGhpcy5fcmVidWlsZExheW91dD0hMCl9dmFyIGg9dGhpcy5wYWRkaW5nVG9wSW5QaXhlbHMrdGhpcy5wYWRkaW5nQm90dG9tSW5QaXhlbHMrdGhpcy5fZm9udE9mZnNldC5oZWlnaHQqdGhpcy5fbGluZXMubGVuZ3RoO2lmKHRoaXMuX2xpbmVzLmxlbmd0aD4wJiYwIT09dGhpcy5fbGluZVNwYWNpbmcuaW50ZXJuYWxWYWx1ZSl7dmFyIGw9MDtsPXRoaXMuX2xpbmVTcGFjaW5nLmlzUGl4ZWw/dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCkqdGhpcy5faGVpZ2h0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KSxoKz0odGhpcy5fbGluZXMubGVuZ3RoLTEpKmx9aCE9PXRoaXMuX2hlaWdodC5pbnRlcm5hbFZhbHVlJiYodGhpcy5faGVpZ2h0LnVwZGF0ZUluUGxhY2UoaCxhLlVOSVRNT0RFX1BJWEVMKSx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKX19LGUucHJvdG90eXBlLl9kcmF3VGV4dD1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxvPTA7c3dpdGNoKHRoaXMuX3RleHRIb3Jpem9udGFsQWxpZ25tZW50KXtjYXNlIHAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVDpvPTA7YnJlYWs7Y2FzZSBwLkhPUklaT05UQUxfQUxJR05NRU5UX1JJR0hUOm89bi1lO2JyZWFrO2Nhc2UgcC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVI6bz0obi1lKS8yfSh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHIuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcixyLnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHIuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsci5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdGhpcy5vdXRsaW5lV2lkdGgmJnIuc3Ryb2tlVGV4dCh0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrbyxpKSxyLmZpbGxUZXh0KHQsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtvLGkpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpLHRoaXMuX3JlbmRlckxpbmVzKHQpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fYXBwbHlTdGF0ZXM9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuX2FwcGx5U3RhdGVzLmNhbGwodGhpcyxlKSx0aGlzLm91dGxpbmVXaWR0aCYmKGUubGluZVdpZHRoPXRoaXMub3V0bGluZVdpZHRoLGUuc3Ryb2tlU3R5bGU9dGhpcy5vdXRsaW5lQ29sb3IpfSxlLnByb3RvdHlwZS5fYnJlYWtMaW5lcz1mdW5jdGlvbih0LGUpe3ZhciBpPVtdLHI9dGhpcy50ZXh0LnNwbGl0KFwiXFxuXCIpO2lmKHRoaXMuX3RleHRXcmFwcGluZz09PWIuRWxsaXBzaXMpZm9yKHZhciBuPTAsbz1yO248by5sZW5ndGg7bisrKXt2YXIgcz1vW25dO2kucHVzaCh0aGlzLl9wYXJzZUxpbmVFbGxpcHNpcyhzLHQsZSkpfWVsc2UgaWYodGhpcy5fdGV4dFdyYXBwaW5nPT09Yi5Xb3JkV3JhcClmb3IodmFyIGE9MCxoPXI7YTxoLmxlbmd0aDthKyspe3M9aFthXTtpLnB1c2guYXBwbHkoaSx0aGlzLl9wYXJzZUxpbmVXb3JkV3JhcChzLHQsZSkpfWVsc2UgZm9yKHZhciBsPTAsdT1yO2w8dS5sZW5ndGg7bCsrKXtzPXVbbF07aS5wdXNoKHRoaXMuX3BhcnNlTGluZShzLGUpKX1yZXR1cm4gaX0sZS5wcm90b3R5cGUuX3BhcnNlTGluZT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD1cIlwiKSx7dGV4dDp0LHdpZHRoOmUubWVhc3VyZVRleHQodCkud2lkdGh9fSxlLnByb3RvdHlwZS5fcGFyc2VMaW5lRWxsaXBzaXM9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PXQmJih0PVwiXCIpO3ZhciByPWkubWVhc3VyZVRleHQodCkud2lkdGg7Zm9yKHI+ZSYmKHQrPVwi4oCmXCIpO3QubGVuZ3RoPjImJnI+ZTspdD10LnNsaWNlKDAsLTIpK1wi4oCmXCIscj1pLm1lYXN1cmVUZXh0KHQpLndpZHRoO3JldHVybnt0ZXh0OnQsd2lkdGg6cn19LGUucHJvdG90eXBlLl9wYXJzZUxpbmVXb3JkV3JhcD1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09dCYmKHQ9XCJcIik7Zm9yKHZhciByPVtdLG49dC5zcGxpdChcIiBcIiksbz0wLHM9MDtzPG4ubGVuZ3RoO3MrKyl7dmFyIGE9cz4wP3QrXCIgXCIrbltzXTpuWzBdLGg9aS5tZWFzdXJlVGV4dChhKS53aWR0aDtoPmUmJnM+MD8oci5wdXNoKHt0ZXh0OnQsd2lkdGg6b30pLHQ9bltzXSxvPWkubWVhc3VyZVRleHQodCkud2lkdGgpOihvPWgsdD1hKX1yZXR1cm4gci5wdXNoKHt0ZXh0OnQsd2lkdGg6b30pLHJ9LGUucHJvdG90eXBlLl9yZW5kZXJMaW5lcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQsaT0wO3N3aXRjaCh0aGlzLl90ZXh0VmVydGljYWxBbGlnbm1lbnQpe2Nhc2UgcC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QOmk9dGhpcy5fZm9udE9mZnNldC5hc2NlbnQ7YnJlYWs7Y2FzZSBwLlZFUlRJQ0FMX0FMSUdOTUVOVF9CT1RUT006aT1lLXRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0Kih0aGlzLl9saW5lcy5sZW5ndGgtMSktdGhpcy5fZm9udE9mZnNldC5kZXNjZW50O2JyZWFrO2Nhc2UgcC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSOmk9dGhpcy5fZm9udE9mZnNldC5hc2NlbnQrKGUtdGhpcy5fZm9udE9mZnNldC5oZWlnaHQqdGhpcy5fbGluZXMubGVuZ3RoKS8yfWkrPXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcDtmb3IodmFyIHI9MDtyPHRoaXMuX2xpbmVzLmxlbmd0aDtyKyspe3ZhciBuPXRoaXMuX2xpbmVzW3JdOzAhPT1yJiYwIT09dGhpcy5fbGluZVNwYWNpbmcuaW50ZXJuYWxWYWx1ZSYmKHRoaXMuX2xpbmVTcGFjaW5nLmlzUGl4ZWw/aSs9dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCk6aSs9dGhpcy5fbGluZVNwYWNpbmcuZ2V0VmFsdWUodGhpcy5faG9zdCkqdGhpcy5faGVpZ2h0LmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUuaGVpZ2h0KSksdGhpcy5fZHJhd1RleHQobi50ZXh0LG4ud2lkdGgsaSx0KSxpKz10aGlzLl9mb250T2Zmc2V0LmhlaWdodH19LGUucHJvdG90eXBlLmNvbXB1dGVFeHBlY3RlZEhlaWdodD1mdW5jdGlvbigpe2lmKHRoaXMudGV4dCYmdGhpcy53aWR0aEluUGl4ZWxzKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKTtpZih0KXt0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9mb250T2Zmc2V0fHwodGhpcy5fZm9udE9mZnNldD1wLl9HZXRGb250T2Zmc2V0KHQuZm9udCkpO3ZhciBlPXRoaXMuX2xpbmVzP3RoaXMuX2xpbmVzOnRoaXMuX2JyZWFrTGluZXModGhpcy53aWR0aEluUGl4ZWxzLXRoaXMucGFkZGluZ0xlZnRJblBpeGVscy10aGlzLnBhZGRpbmdSaWdodEluUGl4ZWxzLHQpLGk9dGhpcy5wYWRkaW5nVG9wSW5QaXhlbHMrdGhpcy5wYWRkaW5nQm90dG9tSW5QaXhlbHMrdGhpcy5fZm9udE9mZnNldC5oZWlnaHQqZS5sZW5ndGg7aWYoZS5sZW5ndGg+MCYmMCE9PXRoaXMuX2xpbmVTcGFjaW5nLmludGVybmFsVmFsdWUpe3ZhciByPTA7cj10aGlzLl9saW5lU3BhY2luZy5pc1BpeGVsP3RoaXMuX2xpbmVTcGFjaW5nLmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2xpbmVTcGFjaW5nLmdldFZhbHVlKHRoaXMuX2hvc3QpKnRoaXMuX2hlaWdodC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLmhlaWdodCksaSs9KGUubGVuZ3RoLTEpKnJ9cmV0dXJuIGl9fXJldHVybiAwfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuY2xlYXIoKX0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLlRleHRCbG9ja1wiXT15O3ZhciB2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoaSxyKXt2b2lkIDA9PT1yJiYocj1udWxsKTt2YXIgbj10LmNhbGwodGhpcyxpKXx8dGhpcztyZXR1cm4gbi5uYW1lPWksbi5fd29ya2luZ0NhbnZhcz1udWxsLG4uX2xvYWRlZD0hMSxuLl9zdHJldGNoPWUuU1RSRVRDSF9GSUxMLG4uX2F1dG9TY2FsZT0hMSxuLl9zb3VyY2VMZWZ0PTAsbi5fc291cmNlVG9wPTAsbi5fc291cmNlV2lkdGg9MCxuLl9zb3VyY2VIZWlnaHQ9MCxuLl9zdmdBdHRyaWJ1dGVzQ29tcHV0YXRpb25Db21wbGV0ZWQ9ITEsbi5faXNTVkc9ITEsbi5fY2VsbFdpZHRoPTAsbi5fY2VsbEhlaWdodD0wLG4uX2NlbGxJZD0tMSxuLl9wb3B1bGF0ZU5pbmVQYXRjaFNsaWNlc0Zyb21JbWFnZT0hMSxuLm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsbi5vblNWR0F0dHJpYnV0ZXNDb21wdXRlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxuLnNvdXJjZT1yLG59cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0xvYWRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGVkfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1bGF0ZU5pbmVQYXRjaFNsaWNlc0Zyb21JbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlIT09dCYmKHRoaXMuX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlPXQsdGhpcy5fcG9wdWxhdGVOaW5lUGF0Y2hTbGljZXNGcm9tSW1hZ2UmJnRoaXMuX2xvYWRlZCYmdGhpcy5fZXh0cmFjdE5pbmVQYXRjaFNsaWNlRGF0YUZyb21JbWFnZSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGV0ZWN0UG9pbnRlck9uT3BhcXVlT25seSE9PXQmJih0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5PXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNsaWNlTGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xpY2VMZWZ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2xpY2VMZWZ0IT09dCYmKHRoaXMuX3NsaWNlTGVmdD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNsaWNlUmlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NsaWNlUmlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zbGljZVJpZ2h0IT09dCYmKHRoaXMuX3NsaWNlUmlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzbGljZVRvcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2xpY2VUb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zbGljZVRvcCE9PXQmJih0aGlzLl9zbGljZVRvcD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNsaWNlQm90dG9tXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zbGljZUJvdHRvbX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NsaWNlQm90dG9tIT09dCYmKHRoaXMuX3NsaWNlQm90dG9tPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic291cmNlTGVmdFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlTGVmdH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZUxlZnQhPT10JiYodGhpcy5fc291cmNlTGVmdD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNvdXJjZVRvcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlVG9wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVG9wIT09dCYmKHRoaXMuX3NvdXJjZVRvcD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNvdXJjZVdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZVdpZHRoIT09dCYmKHRoaXMuX3NvdXJjZVdpZHRoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic291cmNlSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2VIZWlnaHQhPT10JiYodGhpcy5fc291cmNlSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNTVkdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU1ZHfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN2Z0F0dHJpYnV0ZXNDb21wdXRhdGlvbkNvbXBsZXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3ZnQXR0cmlidXRlc0NvbXB1dGF0aW9uQ29tcGxldGVkfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImF1dG9TY2FsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXV0b1NjYWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYXV0b1NjYWxlIT09dCYmKHRoaXMuX2F1dG9TY2FsZT10LHQmJnRoaXMuX2xvYWRlZCYmdGhpcy5zeW5jaHJvbml6ZVNpemVXaXRoQ29udGVudCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzdHJldGNoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdHJldGNofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc3RyZXRjaCE9PXQmJih0aGlzLl9zdHJldGNoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3JvdGF0ZTkwPWZ1bmN0aW9uKHQsaSl7dm9pZCAwPT09aSYmKGk9ITEpO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksbj1yLmdldENvbnRleHQoXCIyZFwiKSxvPXRoaXMuX2RvbUltYWdlLndpZHRoLHM9dGhpcy5fZG9tSW1hZ2UuaGVpZ2h0O3Iud2lkdGg9cyxyLmhlaWdodD1vLG4udHJhbnNsYXRlKHIud2lkdGgvMixyLmhlaWdodC8yKSxuLnJvdGF0ZSh0Kk1hdGguUEkvMiksbi5kcmF3SW1hZ2UodGhpcy5fZG9tSW1hZ2UsMCwwLG8scywtby8yLC1zLzIsbyxzKTt2YXIgYT1yLnRvRGF0YVVSTChcImltYWdlL2pwZ1wiKSxoPW5ldyBlKHRoaXMubmFtZStcInJvdGF0ZWRcIixhKTtyZXR1cm4gaSYmKGguX3N0cmV0Y2g9dGhpcy5fc3RyZXRjaCxoLl9hdXRvU2NhbGU9dGhpcy5fYXV0b1NjYWxlLGguX2NlbGxJZD10aGlzLl9jZWxsSWQsaC5fY2VsbFdpZHRoPXQlMT90aGlzLl9jZWxsSGVpZ2h0OnRoaXMuX2NlbGxXaWR0aCxoLl9jZWxsSGVpZ2h0PXQlMT90aGlzLl9jZWxsV2lkdGg6dGhpcy5fY2VsbEhlaWdodCksdGhpcy5faGFuZGxlUm90YXRpb25Gb3JTVkdJbWFnZSh0aGlzLGgsdCksaH0sZS5wcm90b3R5cGUuX2hhbmRsZVJvdGF0aW9uRm9yU1ZHSW1hZ2U9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXM7dC5faXNTVkcmJih0Ll9zdmdBdHRyaWJ1dGVzQ29tcHV0YXRpb25Db21wbGV0ZWQ/KHRoaXMuX3JvdGF0ZTkwU291cmNlUHJvcGVydGllcyh0LGUsaSksdGhpcy5fbWFya0FzRGlydHkoKSk6dC5vblNWR0F0dHJpYnV0ZXNDb21wdXRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3IuX3JvdGF0ZTkwU291cmNlUHJvcGVydGllcyh0LGUsaSksci5fbWFya0FzRGlydHkoKX0pKX0sZS5wcm90b3R5cGUuX3JvdGF0ZTkwU291cmNlUHJvcGVydGllcz1mdW5jdGlvbih0LGUsaSl7dmFyIHIsbixvPXQuc291cmNlTGVmdCxzPXQuc291cmNlVG9wLGE9dC5kb21JbWFnZS53aWR0aCxoPXQuZG9tSW1hZ2UuaGVpZ2h0LGw9byx1PXMsYz10LnNvdXJjZVdpZHRoLF89dC5zb3VyY2VIZWlnaHQ7aWYoMCE9aSl7dmFyIGQ9aTwwPy0xOjE7aSU9NDtmb3IodmFyIGY9MDtmPE1hdGguYWJzKGkpOysrZilsPS0ocy1oLzIpKmQraC8yLHU9KG8tYS8yKSpkK2EvMixjPShyPVtfLGNdKVswXSxfPXJbMV0saTwwP3UtPV86bC09YyxvPWwscz11LGE9KG49W2gsYV0pWzBdLGg9blsxXX1lLnNvdXJjZUxlZnQ9bCxlLnNvdXJjZVRvcD11LGUuc291cmNlV2lkdGg9YyxlLnNvdXJjZUhlaWdodD1ffSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkb21JbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2RvbUltYWdlPXQsdGhpcy5fbG9hZGVkPSExLHRoaXMuX2RvbUltYWdlLndpZHRoP3RoaXMuX29uSW1hZ2VMb2FkZWQoKTp0aGlzLl9kb21JbWFnZS5vbmxvYWQ9ZnVuY3Rpb24oKXtlLl9vbkltYWdlTG9hZGVkKCl9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9vbkltYWdlTG9hZGVkPWZ1bmN0aW9uKCl7dGhpcy5faW1hZ2VXaWR0aD10aGlzLl9kb21JbWFnZS53aWR0aCx0aGlzLl9pbWFnZUhlaWdodD10aGlzLl9kb21JbWFnZS5oZWlnaHQsdGhpcy5fbG9hZGVkPSEwLHRoaXMuX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlJiZ0aGlzLl9leHRyYWN0TmluZVBhdGNoU2xpY2VEYXRhRnJvbUltYWdlKCksdGhpcy5fYXV0b1NjYWxlJiZ0aGlzLnN5bmNocm9uaXplU2l6ZVdpdGhDb250ZW50KCksdGhpcy5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy5fbWFya0FzRGlydHkoKX0sZS5wcm90b3R5cGUuX2V4dHJhY3ROaW5lUGF0Y2hTbGljZURhdGFGcm9tSW1hZ2U9ZnVuY3Rpb24oKXt0aGlzLl93b3JraW5nQ2FudmFzfHwodGhpcy5fd29ya2luZ0NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKTt2YXIgdD10aGlzLl93b3JraW5nQ2FudmFzLGU9dC5nZXRDb250ZXh0KFwiMmRcIiksaT10aGlzLl9kb21JbWFnZS53aWR0aCxyPXRoaXMuX2RvbUltYWdlLmhlaWdodDt0LndpZHRoPWksdC5oZWlnaHQ9cixlLmRyYXdJbWFnZSh0aGlzLl9kb21JbWFnZSwwLDAsaSxyKTt2YXIgbj1lLmdldEltYWdlRGF0YSgwLDAsaSxyKTt0aGlzLl9zbGljZUxlZnQ9LTEsdGhpcy5fc2xpY2VSaWdodD0tMTtmb3IodmFyIG89MDtvPGk7bysrKXtpZigoYT1uLmRhdGFbNCpvKzNdKT4xMjcmJi0xPT09dGhpcy5fc2xpY2VMZWZ0KXRoaXMuX3NsaWNlTGVmdD1vO2Vsc2UgaWYoYTwxMjcmJnRoaXMuX3NsaWNlTGVmdD4tMSl7dGhpcy5fc2xpY2VSaWdodD1vO2JyZWFrfX10aGlzLl9zbGljZVRvcD0tMSx0aGlzLl9zbGljZUJvdHRvbT0tMTtmb3IodmFyIHM9MDtzPHI7cysrKXt2YXIgYTtpZigoYT1uLmRhdGFbcyppKjQrM10pPjEyNyYmLTE9PT10aGlzLl9zbGljZVRvcCl0aGlzLl9zbGljZVRvcD1zO2Vsc2UgaWYoYTwxMjcmJnRoaXMuX3NsaWNlVG9wPi0xKXt0aGlzLl9zbGljZUJvdHRvbT1zO2JyZWFrfX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNvdXJjZVwiLHtzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9zb3VyY2UhPT10JiYodGhpcy5fbG9hZGVkPSExLHRoaXMuX3NvdXJjZT10LHQmJih0PXRoaXMuX3N2Z0NoZWNrKHQpKSx0aGlzLl9kb21JbWFnZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLHRoaXMuX2RvbUltYWdlLm9ubG9hZD1mdW5jdGlvbigpe2UuX29uSW1hZ2VMb2FkZWQoKX0sdCYmKHMuVG9vbHMuU2V0Q29yc0JlaGF2aW9yKHQsdGhpcy5fZG9tSW1hZ2UpLHRoaXMuX2RvbUltYWdlLnNyYz10KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3N2Z0NoZWNrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYod2luZG93LlNWR1NWR0VsZW1lbnQmJi0xIT09dC5zZWFyY2goLy5zdmcjL2dpKSYmdC5pbmRleE9mKFwiI1wiKT09PXQubGFzdEluZGV4T2YoXCIjXCIpKXt0aGlzLl9pc1NWRz0hMDt2YXIgaT10LnNwbGl0KFwiI1wiKVswXSxyPXQuc3BsaXQoXCIjXCIpWzFdLG49ZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCdvYmplY3RbZGF0YT1cIicraSsnXCJdJyk7aWYobil7dmFyIG89bi5jb250ZW50RG9jdW1lbnQ7aWYobyYmby5kb2N1bWVudEVsZW1lbnQpe3ZhciBzPW8uZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcInZpZXdCb3hcIiksYT1OdW1iZXIoby5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLGg9TnVtYmVyKG8uZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSk7aWYoby5nZXRFbGVtZW50QnlJZChyKSYmcyYmYSYmaClyZXR1cm4gdGhpcy5fZ2V0U1ZHQXR0cmlicyhuLHIpLHR9bi5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7ZS5fZ2V0U1ZHQXR0cmlicyhuLHIpfSl9ZWxzZXt2YXIgbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib2JqZWN0XCIpO2wuZGF0YT1pLGwudHlwZT1cImltYWdlL3N2Zyt4bWxcIixsLndpZHRoPVwiMCVcIixsLmhlaWdodD1cIjAlXCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsKSxsLm9ubG9hZD1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3Rvcignb2JqZWN0W2RhdGE9XCInK2krJ1wiXScpO3QmJmUuX2dldFNWR0F0dHJpYnModCxyKX19cmV0dXJuIGl9cmV0dXJuIHR9LGUucHJvdG90eXBlLl9nZXRTVkdBdHRyaWJzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jb250ZW50RG9jdW1lbnQ7aWYoaSYmaS5kb2N1bWVudEVsZW1lbnQpe3ZhciByPWkuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcInZpZXdCb3hcIiksbj1OdW1iZXIoaS5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikpLG89TnVtYmVyKGkuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSkscz1pLmdldEVsZW1lbnRCeUlkKGUpO2lmKHImJm4mJm8mJnMpe3ZhciBhPU51bWJlcihyLnNwbGl0KFwiIFwiKVsyXSksaD1OdW1iZXIoci5zcGxpdChcIiBcIilbM10pLGw9cy5nZXRCQm94KCksdT0xLGM9MSxfPTAsZD0wO3MudHJhbnNmb3JtJiZzLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkmJih1PXMudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKS5tYXRyaXguYSxjPXMudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKS5tYXRyaXguZCxfPXMudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKS5tYXRyaXguZSxkPXMudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKS5tYXRyaXguZiksdGhpcy5zb3VyY2VMZWZ0PSh1KmwueCtfKSpuL2EsdGhpcy5zb3VyY2VUb3A9KGMqbC55K2QpKm8vaCx0aGlzLnNvdXJjZVdpZHRoPWwud2lkdGgqdSoobi9hKSx0aGlzLnNvdXJjZUhlaWdodD1sLmhlaWdodCpjKihvL2gpLHRoaXMuX3N2Z0F0dHJpYnV0ZXNDb21wdXRhdGlvbkNvbXBsZXRlZD0hMCx0aGlzLm9uU1ZHQXR0cmlidXRlc0NvbXB1dGVkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyl9fX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2VsbFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jZWxsV2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jZWxsV2lkdGghPT10JiYodGhpcy5fY2VsbFdpZHRoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2VsbEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VsbEhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NlbGxIZWlnaHQhPT10JiYodGhpcy5fY2VsbEhlaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNlbGxJZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VsbElkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2VsbElkIT09dCYmKHRoaXMuX2NlbGxJZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGUsaSl7aWYoIXQucHJvdG90eXBlLmNvbnRhaW5zLmNhbGwodGhpcyxlLGkpKXJldHVybiExO2lmKCF0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5fHwhdGhpcy5fd29ya2luZ0NhbnZhcylyZXR1cm4hMDt2YXIgcj10aGlzLl93b3JraW5nQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxuPTB8dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsbz0wfHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodDtyZXR1cm4gci5nZXRJbWFnZURhdGEoMCwwLG4sbykuZGF0YVs0KigoZT1lLXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnR8MCkrKGk9aS10aGlzLl9jdXJyZW50TWVhc3VyZS50b3B8MCkqdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgpKzNdPjB9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiSW1hZ2VcIn0sZS5wcm90b3R5cGUuc3luY2hyb25pemVTaXplV2l0aENvbnRlbnQ9ZnVuY3Rpb24oKXt0aGlzLl9sb2FkZWQmJih0aGlzLndpZHRoPXRoaXMuX2RvbUltYWdlLndpZHRoK1wicHhcIix0aGlzLmhlaWdodD10aGlzLl9kb21JbWFnZS5oZWlnaHQrXCJweFwiKX0sZS5wcm90b3R5cGUuX3Byb2Nlc3NNZWFzdXJlcz1mdW5jdGlvbihpLHIpe2lmKHRoaXMuX2xvYWRlZClzd2l0Y2godGhpcy5fc3RyZXRjaCl7Y2FzZSBlLlNUUkVUQ0hfTk9ORTpjYXNlIGUuU1RSRVRDSF9GSUxMOmNhc2UgZS5TVFJFVENIX1VOSUZPUk06Y2FzZSBlLlNUUkVUQ0hfTklORV9QQVRDSDpicmVhaztjYXNlIGUuU1RSRVRDSF9FWFRFTkQ6dGhpcy5fYXV0b1NjYWxlJiZ0aGlzLnN5bmNocm9uaXplU2l6ZVdpdGhDb250ZW50KCksdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LnBhcmVudCYmKHRoaXMucGFyZW50LmFkYXB0V2lkdGhUb0NoaWxkcmVuPSEwLHRoaXMucGFyZW50LmFkYXB0SGVpZ2h0VG9DaGlsZHJlbj0hMCl9dC5wcm90b3R5cGUuX3Byb2Nlc3NNZWFzdXJlcy5jYWxsKHRoaXMsaSxyKX0sZS5wcm90b3R5cGUuX3ByZXBhcmVXb3JraW5nQ2FudmFzRm9yT3BhcXVlRGV0ZWN0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fZGV0ZWN0UG9pbnRlck9uT3BhcXVlT25seSl7dGhpcy5fd29ya2luZ0NhbnZhc3x8KHRoaXMuX3dvcmtpbmdDYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSk7dmFyIHQ9dGhpcy5fd29ya2luZ0NhbnZhcyxlPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLGk9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LHI9dC5nZXRDb250ZXh0KFwiMmRcIik7dC53aWR0aD1lLHQuaGVpZ2h0PWksci5jbGVhclJlY3QoMCwwLGUsaSl9fSxlLnByb3RvdHlwZS5fZHJhd0ltYWdlPWZ1bmN0aW9uKHQsZSxpLHIsbixvLHMsYSxoKXsodC5kcmF3SW1hZ2UodGhpcy5fZG9tSW1hZ2UsZSxpLHIsbixvLHMsYSxoKSx0aGlzLl9kZXRlY3RQb2ludGVyT25PcGFxdWVPbmx5KSYmKHQ9dGhpcy5fd29ya2luZ0NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikpLmRyYXdJbWFnZSh0aGlzLl9kb21JbWFnZSxlLGkscixuLG8tdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCxzLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCxhLGgpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt2YXIgaSxyLG4sbztpZih0LnNhdmUoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpLC0xPT10aGlzLmNlbGxJZClpPXRoaXMuX3NvdXJjZUxlZnQscj10aGlzLl9zb3VyY2VUb3Asbj10aGlzLl9zb3VyY2VXaWR0aD90aGlzLl9zb3VyY2VXaWR0aDp0aGlzLl9pbWFnZVdpZHRoLG89dGhpcy5fc291cmNlSGVpZ2h0P3RoaXMuX3NvdXJjZUhlaWdodDp0aGlzLl9pbWFnZUhlaWdodDtlbHNle3ZhciBzPXRoaXMuX2RvbUltYWdlLm5hdHVyYWxXaWR0aC90aGlzLmNlbGxXaWR0aCxhPXRoaXMuY2VsbElkL3M+PjAsaD10aGlzLmNlbGxJZCVzO2k9dGhpcy5jZWxsV2lkdGgqaCxyPXRoaXMuY2VsbEhlaWdodCphLG49dGhpcy5jZWxsV2lkdGgsbz10aGlzLmNlbGxIZWlnaHR9aWYodGhpcy5fcHJlcGFyZVdvcmtpbmdDYW52YXNGb3JPcGFxdWVEZXRlY3Rpb24oKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9sb2FkZWQpc3dpdGNoKHRoaXMuX3N0cmV0Y2gpe2Nhc2UgZS5TVFJFVENIX05PTkU6Y2FzZSBlLlNUUkVUQ0hfRklMTDp0aGlzLl9kcmF3SW1hZ2UodCxpLHIsbixvLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCk7YnJlYWs7Y2FzZSBlLlNUUkVUQ0hfVU5JRk9STTp2YXIgbD10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC9uLHU9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0L28sYz1NYXRoLm1pbihsLHUpLF89KHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLW4qYykvMixkPSh0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtbypjKS8yO3RoaXMuX2RyYXdJbWFnZSh0LGkscixuLG8sdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtfLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtkLG4qYyxvKmMpO2JyZWFrO2Nhc2UgZS5TVFJFVENIX0VYVEVORDp0aGlzLl9kcmF3SW1hZ2UodCxpLHIsbixvLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCk7YnJlYWs7Y2FzZSBlLlNUUkVUQ0hfTklORV9QQVRDSDp0aGlzLl9yZW5kZXJOaW5lUGF0Y2godCl9dC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9yZW5kZXJDb3JuZXJQYXRjaD1mdW5jdGlvbih0LGUsaSxyLG4sbyxzKXt0aGlzLl9kcmF3SW1hZ2UodCxlLGkscixuLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrbyx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArcyxyLG4pfSxlLnByb3RvdHlwZS5fcmVuZGVyTmluZVBhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ltYWdlSGVpZ2h0LGk9dGhpcy5fc2xpY2VMZWZ0LHI9dGhpcy5fc2xpY2VUb3Asbj10aGlzLl9pbWFnZUhlaWdodC10aGlzLl9zbGljZUJvdHRvbSxvPXRoaXMuX2ltYWdlV2lkdGgtdGhpcy5fc2xpY2VSaWdodCxzPTAsYT0wO3RoaXMuX3BvcHVsYXRlTmluZVBhdGNoU2xpY2VzRnJvbUltYWdlJiYocz0xLGE9MSxlLT0yLGktPTEsci09MSxuLT0xLG8tPTEpO3ZhciBoPXRoaXMuX3NsaWNlUmlnaHQtdGhpcy5fc2xpY2VMZWZ0LGw9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtby10aGlzLnNsaWNlTGVmdCx1PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC1lK3RoaXMuX3NsaWNlQm90dG9tO3RoaXMuX3JlbmRlckNvcm5lclBhdGNoKHQscyxhLGksciwwLDApLHRoaXMuX3JlbmRlckNvcm5lclBhdGNoKHQscyx0aGlzLl9zbGljZUJvdHRvbSxpLGUtdGhpcy5fc2xpY2VCb3R0b20sMCx1KSx0aGlzLl9yZW5kZXJDb3JuZXJQYXRjaCh0LHRoaXMuX3NsaWNlUmlnaHQsYSxvLHIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtbywwKSx0aGlzLl9yZW5kZXJDb3JuZXJQYXRjaCh0LHRoaXMuX3NsaWNlUmlnaHQsdGhpcy5fc2xpY2VCb3R0b20sbyxlLXRoaXMuX3NsaWNlQm90dG9tLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLW8sdSksdGhpcy5fZHJhd0ltYWdlKHQsdGhpcy5fc2xpY2VMZWZ0LHRoaXMuX3NsaWNlVG9wLGgsdGhpcy5fc2xpY2VCb3R0b20tdGhpcy5fc2xpY2VUb3AsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtyLGwsdS1yKSx0aGlzLl9kcmF3SW1hZ2UodCxzLHRoaXMuX3NsaWNlVG9wLGksdGhpcy5fc2xpY2VCb3R0b20tdGhpcy5fc2xpY2VUb3AsdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArcixpLHUtciksdGhpcy5fZHJhd0ltYWdlKHQsdGhpcy5fc2xpY2VSaWdodCx0aGlzLl9zbGljZVRvcCxpLHRoaXMuX3NsaWNlQm90dG9tLXRoaXMuX3NsaWNlVG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtbyx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArcixpLHUtciksdGhpcy5fZHJhd0ltYWdlKHQsdGhpcy5fc2xpY2VMZWZ0LGEsaCxyLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQraSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsbCxyKSx0aGlzLl9kcmF3SW1hZ2UodCx0aGlzLl9zbGljZUxlZnQsdGhpcy5fc2xpY2VCb3R0b20saCxuLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQraSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdSxsLG4pfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMub25JbWFnZUxvYWRlZE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uU1ZHQXR0cmlidXRlc0NvbXB1dGVkT2JzZXJ2YWJsZS5jbGVhcigpfSxlLlNUUkVUQ0hfTk9ORT0wLGUuU1RSRVRDSF9GSUxMPTEsZS5TVFJFVENIX1VOSUZPUk09MixlLlNUUkVUQ0hfRVhURU5EPTMsZS5TVFJFVENIX05JTkVfUEFUQ0g9NCxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuSW1hZ2VcIl09djt2YXIgTz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO2kubmFtZT1lLGkuZGVsZWdhdGVQaWNraW5nVG9DaGlsZHJlbj0hMSxpLnRoaWNrbmVzcz0xLGkuaXNQb2ludGVyQmxvY2tlcj0hMDt2YXIgcj1udWxsO3JldHVybiBpLnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe3I9aS5hbHBoYSxpLmFscGhhLT0uMX0saS5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7bnVsbCE9PXImJihpLmFscGhhPXIpfSxpLnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5zY2FsZVgtPS4wNSxpLnNjYWxlWS09LjA1fSxpLnBvaW50ZXJVcEFuaW1hdGlvbj1mdW5jdGlvbigpe2kuc2NhbGVYKz0uMDUsaS5zY2FsZVkrPS4wNX0saX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0QmxvY2tcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHRCbG9ja30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkJ1dHRvblwifSxlLnByb3RvdHlwZS5fcHJvY2Vzc1BpY2tpbmc9ZnVuY3Rpb24oZSxpLHIsbixvLHMsYSl7aWYoIXRoaXMuX2lzRW5hYmxlZHx8IXRoaXMuaXNIaXRUZXN0VmlzaWJsZXx8IXRoaXMuaXNWaXNpYmxlfHx0aGlzLm5vdFJlbmRlcmFibGUpcmV0dXJuITE7aWYoIXQucHJvdG90eXBlLmNvbnRhaW5zLmNhbGwodGhpcyxlLGkpKXJldHVybiExO2lmKHRoaXMuZGVsZWdhdGVQaWNraW5nVG9DaGlsZHJlbil7Zm9yKHZhciBoPSExLGw9dGhpcy5fY2hpbGRyZW4ubGVuZ3RoLTE7bD49MDtsLS0pe3ZhciB1PXRoaXMuX2NoaWxkcmVuW2xdO2lmKHUuaXNFbmFibGVkJiZ1LmlzSGl0VGVzdFZpc2libGUmJnUuaXNWaXNpYmxlJiYhdS5ub3RSZW5kZXJhYmxlJiZ1LmNvbnRhaW5zKGUsaSkpe2g9ITA7YnJlYWt9fWlmKCFoKXJldHVybiExfXJldHVybiB0aGlzLl9wcm9jZXNzT2JzZXJ2YWJsZXMocixlLGksbixvLHMsYSksITB9LGUucHJvdG90eXBlLl9vblBvaW50ZXJFbnRlcj1mdW5jdGlvbihlKXtyZXR1cm4hIXQucHJvdG90eXBlLl9vblBvaW50ZXJFbnRlci5jYWxsKHRoaXMsZSkmJih0aGlzLnBvaW50ZXJFbnRlckFuaW1hdGlvbiYmdGhpcy5wb2ludGVyRW50ZXJBbmltYXRpb24oKSwhMCl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJPdXQ9ZnVuY3Rpb24oZSxpKXt2b2lkIDA9PT1pJiYoaT0hMSksdGhpcy5wb2ludGVyT3V0QW5pbWF0aW9uJiZ0aGlzLnBvaW50ZXJPdXRBbmltYXRpb24oKSx0LnByb3RvdHlwZS5fb25Qb2ludGVyT3V0LmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtyZXR1cm4hIXQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKSYmKHRoaXMucG9pbnRlckRvd25BbmltYXRpb24mJnRoaXMucG9pbnRlckRvd25BbmltYXRpb24oKSwhMCl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJVcD1mdW5jdGlvbihlLGkscixuLG8pe3RoaXMucG9pbnRlclVwQW5pbWF0aW9uJiZ0aGlzLnBvaW50ZXJVcEFuaW1hdGlvbigpLHQucHJvdG90eXBlLl9vblBvaW50ZXJVcC5jYWxsKHRoaXMsZSxpLHIsbixvKX0sZS5DcmVhdGVJbWFnZUJ1dHRvbj1mdW5jdGlvbih0LGkscil7dmFyIG49bmV3IGUodCksbz1uZXcgeSh0K1wiX2J1dHRvblwiLGkpO28udGV4dFdyYXBwaW5nPSEwLG8udGV4dEhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVIsby5wYWRkaW5nTGVmdD1cIjIwJVwiLG4uYWRkQ29udHJvbChvKTt2YXIgcz1uZXcgdih0K1wiX2ljb25cIixyKTtyZXR1cm4gcy53aWR0aD1cIjIwJVwiLHMuc3RyZXRjaD12LlNUUkVUQ0hfVU5JRk9STSxzLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG4uYWRkQ29udHJvbChzKSxuLl9pbWFnZT1zLG4uX3RleHRCbG9jaz1vLG59LGUuQ3JlYXRlSW1hZ2VPbmx5QnV0dG9uPWZ1bmN0aW9uKHQsaSl7dmFyIHI9bmV3IGUodCksbj1uZXcgdih0K1wiX2ljb25cIixpKTtyZXR1cm4gbi5zdHJldGNoPXYuU1RSRVRDSF9GSUxMLG4uaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsci5hZGRDb250cm9sKG4pLHIuX2ltYWdlPW4scn0sZS5DcmVhdGVTaW1wbGVCdXR0b249ZnVuY3Rpb24odCxpKXt2YXIgcj1uZXcgZSh0KSxuPW5ldyB5KHQrXCJfYnV0dG9uXCIsaSk7cmV0dXJuIG4udGV4dFdyYXBwaW5nPSEwLG4udGV4dEhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVIsci5hZGRDb250cm9sKG4pLHIuX3RleHRCbG9jaz1uLHJ9LGUuQ3JlYXRlSW1hZ2VXaXRoQ2VudGVyVGV4dEJ1dHRvbj1mdW5jdGlvbih0LGkscil7dmFyIG49bmV3IGUodCksbz1uZXcgdih0K1wiX2ljb25cIixyKTtvLnN0cmV0Y2g9di5TVFJFVENIX0ZJTEwsbi5hZGRDb250cm9sKG8pO3ZhciBzPW5ldyB5KHQrXCJfYnV0dG9uXCIsaSk7cmV0dXJuIHMudGV4dFdyYXBwaW5nPSEwLHMudGV4dEhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9DRU5URVIsbi5hZGRDb250cm9sKHMpLG4uX2ltYWdlPW8sbi5fdGV4dEJsb2NrPXMsbn0sZX0obSk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkJ1dHRvblwiXT1PO3ZhciBDPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2lzVmVydGljYWw9ITAsaS5fbWFudWFsV2lkdGg9ITEsaS5fbWFudWFsSGVpZ2h0PSExLGkuX2RvTm90VHJhY2tNYW51YWxDaGFuZ2VzPSExLGkuaWdub3JlTGF5b3V0V2FybmluZ3M9ITEsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzVmVydGljYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmVydGljYWx9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pc1ZlcnRpY2FsIT09dCYmKHRoaXMuX2lzVmVydGljYWw9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ3aWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb05vdFRyYWNrTWFudWFsQ2hhbmdlc3x8KHRoaXMuX21hbnVhbFdpZHRoPSEwKSx0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3dpZHRoLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHQudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kb05vdFRyYWNrTWFudWFsQ2hhbmdlc3x8KHRoaXMuX21hbnVhbEhlaWdodD0hMCksdGhpcy5faGVpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5faGVpZ2h0LmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJTdGFja1BhbmVsXCJ9LGUucHJvdG90eXBlLl9wcmVNZWFzdXJlPWZ1bmN0aW9uKGUsaSl7Zm9yKHZhciByPTAsbj10aGlzLl9jaGlsZHJlbjtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTt0aGlzLl9pc1ZlcnRpY2FsP28udmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QOm8uaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlR9dC5wcm90b3R5cGUuX3ByZU1lYXN1cmUuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZy5jYWxsKHRoaXMsZSxpKSx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4uY29weUZyb20oZSksdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmxlZnQ9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4udG9wPXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLmlzVmVydGljYWwmJiF0aGlzLl9tYW51YWxXaWR0aHx8KHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi53aWR0aD10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCksKHRoaXMuaXNWZXJ0aWNhbHx8dGhpcy5fbWFudWFsSGVpZ2h0KSYmKHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5oZWlnaHQ9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KX0sZS5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsaT0wLHI9MCxuPXRoaXMuX2NoaWxkcmVuO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO28uaXNWaXNpYmxlJiYhby5ub3RSZW5kZXJhYmxlJiYodGhpcy5faXNWZXJ0aWNhbD8oby50b3AhPT1pK1wicHhcIiYmKG8udG9wPWkrXCJweFwiLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITAsby5fdG9wLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCksby5faGVpZ2h0LmlzUGVyY2VudGFnZSYmIW8uX2F1dG9tYXRpY1NpemU/dGhpcy5pZ25vcmVMYXlvdXRXYXJuaW5nc3x8cy5Ub29scy5XYXJuKFwiQ29udHJvbCAoTmFtZTpcIitvLm5hbWUrXCIsIFVuaXF1ZUlkOlwiK28udW5pcXVlSWQrXCIpIGlzIHVzaW5nIGhlaWdodCBpbiBwZXJjZW50YWdlIG1vZGUgaW5zaWRlIGEgdmVydGljYWwgU3RhY2tQYW5lbFwiKTppKz1vLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQrby5wYWRkaW5nVG9wSW5QaXhlbHMrby5wYWRkaW5nQm90dG9tSW5QaXhlbHMpOihvLmxlZnQhPT1lK1wicHhcIiYmKG8ubGVmdD1lK1wicHhcIix0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwLG8uX2xlZnQuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwKSxvLl93aWR0aC5pc1BlcmNlbnRhZ2UmJiFvLl9hdXRvbWF0aWNTaXplP3RoaXMuaWdub3JlTGF5b3V0V2FybmluZ3N8fHMuVG9vbHMuV2FybihcIkNvbnRyb2wgKE5hbWU6XCIrby5uYW1lK1wiLCBVbmlxdWVJZDpcIitvLnVuaXF1ZUlkK1wiKSBpcyB1c2luZyB3aWR0aCBpbiBwZXJjZW50YWdlIG1vZGUgaW5zaWRlIGEgaG9yaXpvbnRhbCBTdGFja1BhbmVsXCIpOmUrPW8uX2N1cnJlbnRNZWFzdXJlLndpZHRoK28ucGFkZGluZ0xlZnRJblBpeGVscytvLnBhZGRpbmdSaWdodEluUGl4ZWxzKSl9dGhpcy5fZG9Ob3RUcmFja01hbnVhbENoYW5nZXM9ITA7dmFyIGE9ITEsaD0hMTtpZighdGhpcy5fbWFudWFsSGVpZ2h0JiZ0aGlzLl9pc1ZlcnRpY2FsKXt2YXIgbD10aGlzLmhlaWdodDt0aGlzLmhlaWdodD1pK1wicHhcIixoPWwhPT10aGlzLmhlaWdodHx8IXRoaXMuX2hlaWdodC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmd9aWYoIXRoaXMuX21hbnVhbFdpZHRoJiYhdGhpcy5faXNWZXJ0aWNhbCl7dmFyIHU9dGhpcy53aWR0aDt0aGlzLndpZHRoPWUrXCJweFwiLGE9dSE9PXRoaXMud2lkdGh8fCF0aGlzLl93aWR0aC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmd9aCYmKHRoaXMuX2hlaWdodC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApLGEmJih0aGlzLl93aWR0aC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITApLHRoaXMuX2RvTm90VHJhY2tNYW51YWxDaGFuZ2VzPSExLChhfHxoKSYmKHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApLHQucHJvdG90eXBlLl9wb3N0TWVhc3VyZS5jYWxsKHRoaXMpfSxlfShnKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuU3RhY2tQYW5lbFwiXT1DO3ZhciB3PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2lzQ2hlY2tlZD0hMSxpLl9iYWNrZ3JvdW5kPVwiYmxhY2tcIixpLl9jaGVja1NpemVSYXRpbz0uOCxpLl90aGlja25lc3M9MSxpLm9uSXNDaGVja2VkQ2hhbmdlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxpLmlzUG9pbnRlckJsb2NrZXI9ITAsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRoaWNrbmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhpY2tuZXNzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGhpY2tuZXNzIT09dCYmKHRoaXMuX3RoaWNrbmVzcz10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNoZWNrU2l6ZVJhdGlvXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja1NpemVSYXRpb30sc2V0OmZ1bmN0aW9uKHQpe3Q9TWF0aC5tYXgoTWF0aC5taW4oMSx0KSwwKSx0aGlzLl9jaGVja1NpemVSYXRpbyE9PXQmJih0aGlzLl9jaGVja1NpemVSYXRpbz10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2JhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0NoZWNrZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ2hlY2tlZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzQ2hlY2tlZCE9PXQmJih0aGlzLl9pc0NoZWNrZWQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQ2hlY2tib3hcIn0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCxlKXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KTt2YXIgaT10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC10aGlzLl90aGlja25lc3Mscj10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fdGhpY2tuZXNzO2lmKCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuX2JhY2tncm91bmQ6dGhpcy5fZGlzYWJsZWRDb2xvcix0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX3RoaWNrbmVzcy8yLGksciksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHRoaXMuX2lzQ2hlY2tlZCl7dC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuY29sb3I6dGhpcy5fZGlzYWJsZWRDb2xvckl0ZW07dmFyIG49aSp0aGlzLl9jaGVja1NpemVSYXRpbyxvPXIqdGhpcy5fY2hlY2tTaXplUmF0aW87dC5maWxsUmVjdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX3RoaWNrbmVzcy8yKyhpLW4pLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX3RoaWNrbmVzcy8yKyhyLW8pLzIsbixvKX10LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IsdC5saW5lV2lkdGg9dGhpcy5fdGhpY2tuZXNzLHQuc3Ryb2tlUmVjdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX3RoaWNrbmVzcy8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl90aGlja25lc3MvMixpLHIpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtyZXR1cm4hIXQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKSYmKHRoaXMuaXNDaGVja2VkPSF0aGlzLmlzQ2hlY2tlZCwhMCl9LGUuQWRkQ2hlY2tCb3hXaXRoSGVhZGVyPWZ1bmN0aW9uKHQsaSl7dmFyIHI9bmV3IEM7ci5pc1ZlcnRpY2FsPSExLHIuaGVpZ2h0PVwiMzBweFwiO3ZhciBuPW5ldyBlO24ud2lkdGg9XCIyMHB4XCIsbi5oZWlnaHQ9XCIyMHB4XCIsbi5pc0NoZWNrZWQ9ITAsbi5jb2xvcj1cImdyZWVuXCIsbi5vbklzQ2hlY2tlZENoYW5nZWRPYnNlcnZhYmxlLmFkZChpKSxyLmFkZENvbnRyb2wobik7dmFyIG89bmV3IHk7cmV0dXJuIG8udGV4dD10LG8ud2lkdGg9XCIxODBweFwiLG8ucGFkZGluZ0xlZnQ9XCI1cHhcIixvLnRleHRIb3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxvLmNvbG9yPVwid2hpdGVcIixyLmFkZENvbnRyb2wobykscn0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkNoZWNrYm94XCJdPXc7dmFyIFQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPVwiXCIpO3ZhciByPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiByLm5hbWU9ZSxyLl90ZXh0PVwiXCIsci5fcGxhY2Vob2xkZXJUZXh0PVwiXCIsci5fYmFja2dyb3VuZD1cIiMyMjIyMjJcIixyLl9mb2N1c2VkQmFja2dyb3VuZD1cIiMwMDAwMDBcIixyLl9mb2N1c2VkQ29sb3I9XCJ3aGl0ZVwiLHIuX3BsYWNlaG9sZGVyQ29sb3I9XCJncmF5XCIsci5fdGhpY2tuZXNzPTEsci5fbWFyZ2luPW5ldyBhKDEwLGEuVU5JVE1PREVfUElYRUwpLHIuX2F1dG9TdHJldGNoV2lkdGg9ITAsci5fbWF4V2lkdGg9bmV3IGEoMSxhLlVOSVRNT0RFX1BFUkNFTlRBR0UsITEpLHIuX2lzRm9jdXNlZD0hMSxyLl9ibGlua0lzRXZlbj0hMSxyLl9jdXJzb3JPZmZzZXQ9MCxyLl9kZWFkS2V5PSExLHIuX2FkZEtleT0hMCxyLl9jdXJyZW50S2V5PVwiXCIsci5faXNUZXh0SGlnaGxpZ2h0T249ITEsci5fdGV4dEhpZ2hsaWdodENvbG9yPVwiI2Q1ZTBmZlwiLHIuX2hpZ2hsaWdoZXJPcGFjaXR5PS40LHIuX2hpZ2hsaWdodGVkVGV4dD1cIlwiLHIuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9MCxyLl9lbmRIaWdobGlnaHRJbmRleD0wLHIuX2N1cnNvckluZGV4PS0xLHIuX29uRm9jdXNTZWxlY3RBbGw9ITEsci5faXNQb2ludGVyRG93bj0hMSxyLnByb21wdE1lc3NhZ2U9XCJQbGVhc2UgZW50ZXIgdGV4dDpcIixyLmRpc2FibGVNb2JpbGVQcm9tcHQ9ITEsci5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25CZWZvcmVLZXlBZGRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsci5vbkZvY3VzT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25CbHVyT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25UZXh0SGlnaGxpZ2h0T2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25UZXh0Q29weU9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxyLm9uVGV4dEN1dE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxyLm9uVGV4dFBhc3RlT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIub25LZXlib2FyZEV2ZW50UHJvY2Vzc2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHIudGV4dD1pLHIuaXNQb2ludGVyQmxvY2tlcj0hMCxyfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWF4V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heFdpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWF4V2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl9tYXhXaWR0aC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1heFdpZHRoSW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heFdpZHRoLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUud2lkdGgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhpZ2hsaWdoZXJPcGFjaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oaWdobGlnaGVyT3BhY2l0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hpZ2hsaWdoZXJPcGFjaXR5IT09dCYmKHRoaXMuX2hpZ2hsaWdoZXJPcGFjaXR5PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib25Gb2N1c1NlbGVjdEFsbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Gb2N1c1NlbGVjdEFsbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29uRm9jdXNTZWxlY3RBbGwhPT10JiYodGhpcy5fb25Gb2N1c1NlbGVjdEFsbD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRIaWdobGlnaHRDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dEhpZ2hsaWdodENvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dEhpZ2hsaWdodENvbG9yIT09dCYmKHRoaXMuX3RleHRIaWdobGlnaHRDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1hcmdpblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFyZ2luLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWFyZ2luLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fbWFyZ2luLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWFyZ2luSW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcmdpbi5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhdXRvU3RyZXRjaFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdXRvU3RyZXRjaFdpZHRofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYXV0b1N0cmV0Y2hXaWR0aCE9PXQmJih0aGlzLl9hdXRvU3RyZXRjaFdpZHRoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGhpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aGlja25lc3MhPT10JiYodGhpcy5fdGhpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZm9jdXNlZEJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY3VzZWRCYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9jdXNlZEJhY2tncm91bmQhPT10JiYodGhpcy5fZm9jdXNlZEJhY2tncm91bmQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmb2N1c2VkQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY3VzZWRDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvY3VzZWRDb2xvciE9PXQmJih0aGlzLl9mb2N1c2VkQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicGxhY2Vob2xkZXJDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXJDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYWNlaG9sZGVyQ29sb3IhPT10JiYodGhpcy5fcGxhY2Vob2xkZXJDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBsYWNlaG9sZGVyVGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxhY2Vob2xkZXJUZXh0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxhY2Vob2xkZXJUZXh0IT09dCYmKHRoaXMuX3BsYWNlaG9sZGVyVGV4dD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRlYWRLZXlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlYWRLZXl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZWFkS2V5PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGlnaGxpZ2h0ZWRUZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oaWdobGlnaHRlZFRleHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9oaWdobGlnaHRlZFRleHQhPT10JiYodGhpcy5faGlnaGxpZ2h0ZWRUZXh0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYWRkS2V5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hZGRLZXl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hZGRLZXk9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjdXJyZW50S2V5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50S2V5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY3VycmVudEtleT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKCk7dGhpcy5fdGV4dCE9PWUmJih0aGlzLl90ZXh0PWUsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwid2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2lkdGgudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiYodGhpcy5fd2lkdGguZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLmF1dG9TdHJldGNoV2lkdGg9ITEpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3RoaXMuX2lzRm9jdXNlZD0hMSx0aGlzLl9zY3JvbGxMZWZ0PW51bGwsdGhpcy5fY3Vyc29yT2Zmc2V0PTAsY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rVGltZW91dCksdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uQmx1ck9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpLHRoaXMuX2hvc3QudW5SZWdpc3RlckNsaXBib2FyZEV2ZW50cygpLHRoaXMuX29uQ2xpcGJvYXJkT2JzZXJ2ZXImJnRoaXMuX2hvc3Qub25DbGlwYm9hcmRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkNsaXBib2FyZE9ic2VydmVyKTt2YXIgdD10aGlzLl9ob3N0LmdldFNjZW5lKCk7dGhpcy5fb25Qb2ludGVyRGJsVGFwT2JzZXJ2ZXImJnQmJnQub25Qb2ludGVyT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25Qb2ludGVyRGJsVGFwT2JzZXJ2ZXIpfSxlLnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLl9pc0VuYWJsZWQpe2lmKHRoaXMuX3Njcm9sbExlZnQ9bnVsbCx0aGlzLl9pc0ZvY3VzZWQ9ITAsdGhpcy5fYmxpbmtJc0V2ZW49ITEsdGhpcy5fY3Vyc29yT2Zmc2V0PTAsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uRm9jdXNPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSwtMSE9PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1vYmlsZVwiKSYmIXRoaXMuZGlzYWJsZU1vYmlsZVByb21wdCl7dmFyIGU9cHJvbXB0KHRoaXMucHJvbXB0TWVzc2FnZSk7cmV0dXJuIG51bGwhPT1lJiYodGhpcy50ZXh0PWUpLHZvaWQodGhpcy5faG9zdC5mb2N1c2VkQ29udHJvbD1udWxsKX10aGlzLl9ob3N0LnJlZ2lzdGVyQ2xpcGJvYXJkRXZlbnRzKCksdGhpcy5fb25DbGlwYm9hcmRPYnNlcnZlcj10aGlzLl9ob3N0Lm9uQ2xpcGJvYXJkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oZSl7c3dpdGNoKGUudHlwZSl7Y2FzZSBzLkNsaXBib2FyZEV2ZW50VHlwZXMuQ09QWTp0Ll9vbkNvcHlUZXh0KGUuZXZlbnQpLHQub25UZXh0Q29weU9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHQpO2JyZWFrO2Nhc2Ugcy5DbGlwYm9hcmRFdmVudFR5cGVzLkNVVDp0Ll9vbkN1dFRleHQoZS5ldmVudCksdC5vblRleHRDdXRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0KTticmVhaztjYXNlIHMuQ2xpcGJvYXJkRXZlbnRUeXBlcy5QQVNURTp0Ll9vblBhc3RlVGV4dChlLmV2ZW50KSx0Lm9uVGV4dFBhc3RlT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59fSk7dmFyIGk9dGhpcy5faG9zdC5nZXRTY2VuZSgpO2kmJih0aGlzLl9vblBvaW50ZXJEYmxUYXBPYnNlcnZlcj1pLm9uUG9pbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKGUpe3QuX2lzRm9jdXNlZCYmZS50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSRE9VQkxFVEFQJiZ0Ll9wcm9jZXNzRGJsQ2xpY2soZSl9KSksdGhpcy5fb25Gb2N1c1NlbGVjdEFsbCYmdGhpcy5fc2VsZWN0QWxsVGV4dCgpfX0sZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJJbnB1dFRleHRcIn0sZS5wcm90b3R5cGUua2VlcHNGb2N1c1dpdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ubmVjdGVkVmlydHVhbEtleWJvYXJkP1t0aGlzLl9jb25uZWN0ZWRWaXJ0dWFsS2V5Ym9hcmRdOm51bGx9LGUucHJvdG90eXBlLnByb2Nlc3NLZXk9ZnVuY3Rpb24odCxlLGkpe2lmKCFpfHwhaS5jdHJsS2V5JiYhaS5tZXRhS2V5fHw2NyE9PXQmJjg2IT09dCYmODghPT10KXtpZihpJiYoaS5jdHJsS2V5fHxpLm1ldGFLZXkpJiY2NT09PXQpcmV0dXJuIHRoaXMuX3NlbGVjdEFsbFRleHQoKSx2b2lkIGkucHJldmVudERlZmF1bHQoKTtzd2l0Y2godCl7Y2FzZSAzMjplPVwiIFwiO2JyZWFrO2Nhc2UgMTkxOmkmJmkucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIDg6aWYodGhpcy5fdGV4dCYmdGhpcy5fdGV4dC5sZW5ndGg+MCl7aWYodGhpcy5faXNUZXh0SGlnaGxpZ2h0T24pcmV0dXJuIHRoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCkrdGhpcy5fdGV4dC5zbGljZSh0aGlzLl9lbmRIaWdobGlnaHRJbmRleCksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMudGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLl9ibGlua0lzRXZlbj0hMSx2b2lkKGkmJmkucHJldmVudERlZmF1bHQoKSk7aWYoMD09PXRoaXMuX2N1cnNvck9mZnNldCl0aGlzLnRleHQ9dGhpcy5fdGV4dC5zdWJzdHIoMCx0aGlzLl90ZXh0Lmxlbmd0aC0xKTtlbHNlKG49dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0KT4wJiYodGhpcy50ZXh0PXRoaXMuX3RleHQuc2xpY2UoMCxuLTEpK3RoaXMuX3RleHQuc2xpY2UobikpfXJldHVybiB2b2lkKGkmJmkucHJldmVudERlZmF1bHQoKSk7Y2FzZSA0NjppZih0aGlzLl9pc1RleHRIaWdobGlnaHRPbil7dGhpcy50ZXh0PXRoaXMuX3RleHQuc2xpY2UoMCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4KSt0aGlzLl90ZXh0LnNsaWNlKHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4KTtmb3IodmFyIHI9dGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleDtyPjAmJnRoaXMuX2N1cnNvck9mZnNldD4wOyl0aGlzLl9jdXJzb3JPZmZzZXQtLTtyZXR1cm4gdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMudGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx2b2lkKGkmJmkucHJldmVudERlZmF1bHQoKSl9aWYodGhpcy5fdGV4dCYmdGhpcy5fdGV4dC5sZW5ndGg+MCYmdGhpcy5fY3Vyc29yT2Zmc2V0PjApe3ZhciBuPXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldDt0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLG4pK3RoaXMuX3RleHQuc2xpY2UobisxKSx0aGlzLl9jdXJzb3JPZmZzZXQtLX1yZXR1cm4gdm9pZChpJiZpLnByZXZlbnREZWZhdWx0KCkpO2Nhc2UgMTM6cmV0dXJuIHRoaXMuX2hvc3QuZm9jdXNlZENvbnRyb2w9bnVsbCx2b2lkKHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExKTtjYXNlIDM1OnJldHVybiB0aGlzLl9jdXJzb3JPZmZzZXQ9MCx0aGlzLl9ibGlua0lzRXZlbj0hMSx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx2b2lkIHRoaXMuX21hcmtBc0RpcnR5KCk7Y2FzZSAzNjpyZXR1cm4gdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoLHRoaXMuX2JsaW5rSXNFdmVuPSExLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKTtjYXNlIDM3OmlmKHRoaXMuX2N1cnNvck9mZnNldCsrLHRoaXMuX2N1cnNvck9mZnNldD50aGlzLl90ZXh0Lmxlbmd0aCYmKHRoaXMuX2N1cnNvck9mZnNldD10aGlzLl90ZXh0Lmxlbmd0aCksaSYmaS5zaGlmdEtleSl7aWYodGhpcy5fYmxpbmtJc0V2ZW49ITEsaS5jdHJsS2V5fHxpLm1ldGFLZXkpe2lmKCF0aGlzLl9pc1RleHRIaWdobGlnaHRPbil7aWYodGhpcy5fdGV4dC5sZW5ndGg9PT10aGlzLl9jdXJzb3JPZmZzZXQpcmV0dXJuO3RoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCsxfXJldHVybiB0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PTAsdGhpcy5fY3Vyc29ySW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgsdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKX1yZXR1cm4gdGhpcy5faXNUZXh0SGlnaGxpZ2h0T24/LTE9PT10aGlzLl9jdXJzb3JJbmRleCYmKHRoaXMuX2N1cnNvckluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2VuZEhpZ2hsaWdodEluZGV4LHRoaXMuX2N1cnNvck9mZnNldD0wPT09dGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD90aGlzLl90ZXh0Lmxlbmd0aDp0aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4KzEpOih0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMCx0aGlzLl9jdXJzb3JJbmRleD10aGlzLl9jdXJzb3JPZmZzZXQ+PXRoaXMuX3RleHQubGVuZ3RoP3RoaXMuX3RleHQubGVuZ3RoOnRoaXMuX2N1cnNvck9mZnNldC0xKSx0aGlzLl9jdXJzb3JJbmRleDx0aGlzLl9jdXJzb3JPZmZzZXQ/KHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvckluZGV4LHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0KTp0aGlzLl9jdXJzb3JJbmRleD50aGlzLl9jdXJzb3JPZmZzZXQ/KHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvckluZGV4KTp0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSx2b2lkIHRoaXMuX21hcmtBc0RpcnR5KCl9cmV0dXJuIHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uJiYodGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEpLGkmJihpLmN0cmxLZXl8fGkubWV0YUtleSkmJih0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy50ZXh0Lmxlbmd0aCxpLnByZXZlbnREZWZhdWx0KCkpLHRoaXMuX2JsaW5rSXNFdmVuPSExLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHRoaXMuX2N1cnNvckluZGV4PS0xLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKTtjYXNlIDM5OmlmKHRoaXMuX2N1cnNvck9mZnNldC0tLHRoaXMuX2N1cnNvck9mZnNldDwwJiYodGhpcy5fY3Vyc29yT2Zmc2V0PTApLGkmJmkuc2hpZnRLZXkpe2lmKHRoaXMuX2JsaW5rSXNFdmVuPSExLGkuY3RybEtleXx8aS5tZXRhS2V5KXtpZighdGhpcy5faXNUZXh0SGlnaGxpZ2h0T24pe2lmKDA9PT10aGlzLl9jdXJzb3JPZmZzZXQpcmV0dXJuO3RoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0LTF9cmV0dXJuIHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX2N1cnNvckluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgsdGhpcy5fY3Vyc29yT2Zmc2V0PTAsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpfXJldHVybiB0aGlzLl9pc1RleHRIaWdobGlnaHRPbj8tMT09PXRoaXMuX2N1cnNvckluZGV4JiYodGhpcy5fY3Vyc29ySW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLl9jdXJzb3JPZmZzZXQ9dGhpcy5fdGV4dC5sZW5ndGg9PT10aGlzLl9lbmRIaWdobGlnaHRJbmRleD8wOnRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2VuZEhpZ2hsaWdodEluZGV4LTEpOih0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMCx0aGlzLl9jdXJzb3JJbmRleD10aGlzLl9jdXJzb3JPZmZzZXQ8PTA/MDp0aGlzLl9jdXJzb3JPZmZzZXQrMSksdGhpcy5fY3Vyc29ySW5kZXg8dGhpcy5fY3Vyc29yT2Zmc2V0Pyh0aGlzLl9lbmRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JJbmRleCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldCk6dGhpcy5fY3Vyc29ySW5kZXg+dGhpcy5fY3Vyc29yT2Zmc2V0Pyh0aGlzLl9lbmRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JJbmRleCk6dGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpfXJldHVybiB0aGlzLl9pc1RleHRIaWdobGlnaHRPbiYmKHRoaXMuX2N1cnNvck9mZnNldD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9lbmRIaWdobGlnaHRJbmRleCx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMSksaSYmKGkuY3RybEtleXx8aS5tZXRhS2V5KSYmKHRoaXMuX2N1cnNvck9mZnNldD0wLGkucHJldmVudERlZmF1bHQoKSksdGhpcy5fYmxpbmtJc0V2ZW49ITEsdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fY3Vyc29ySW5kZXg9LTEsdm9pZCB0aGlzLl9tYXJrQXNEaXJ0eSgpO2Nhc2UgMjIyOmkmJmkucHJldmVudERlZmF1bHQoKSx0aGlzLl9jdXJzb3JJbmRleD0tMSx0aGlzLmRlYWRLZXk9ITB9aWYoZSYmKC0xPT09dHx8MzI9PT10fHx0PjQ3JiZ0PDY0fHx0PjY0JiZ0PDkxfHx0PjE1OSYmdDwxOTN8fHQ+MjE4JiZ0PDIyM3x8dD45NSYmdDwxMTIpJiYodGhpcy5fY3VycmVudEtleT1lLHRoaXMub25CZWZvcmVLZXlBZGRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSxlPXRoaXMuX2N1cnJlbnRLZXksdGhpcy5fYWRkS2V5KSlpZih0aGlzLl9pc1RleHRIaWdobGlnaHRPbil0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgpK2UrdGhpcy5fdGV4dC5zbGljZSh0aGlzLl9lbmRIaWdobGlnaHRJbmRleCksdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMudGV4dC5sZW5ndGgtKHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgrMSksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T249ITEsdGhpcy5fYmxpbmtJc0V2ZW49ITEsdGhpcy5fbWFya0FzRGlydHkoKTtlbHNlIGlmKDA9PT10aGlzLl9jdXJzb3JPZmZzZXQpdGhpcy50ZXh0Kz1lO2Vsc2V7dmFyIG89dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0O3RoaXMudGV4dD10aGlzLl90ZXh0LnNsaWNlKDAsbykrZSt0aGlzLl90ZXh0LnNsaWNlKG8pfX19LGUucHJvdG90eXBlLl91cGRhdGVWYWx1ZUZyb21DdXJzb3JJbmRleD1mdW5jdGlvbih0KXtpZih0aGlzLl9ibGlua0lzRXZlbj0hMSwtMT09PXRoaXMuX2N1cnNvckluZGV4KXRoaXMuX2N1cnNvckluZGV4PXQ7ZWxzZSBpZih0aGlzLl9jdXJzb3JJbmRleDx0aGlzLl9jdXJzb3JPZmZzZXQpdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29ySW5kZXgsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQ7ZWxzZXtpZighKHRoaXMuX2N1cnNvckluZGV4PnRoaXMuX2N1cnNvck9mZnNldCkpcmV0dXJuIHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHZvaWQgdGhpcy5fbWFya0FzRGlydHkoKTt0aGlzLl9lbmRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQsdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD10aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JJbmRleH10aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlLnByb3RvdHlwZS5fcHJvY2Vzc0RibENsaWNrPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0LHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4PXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg7dmFyIGUsaSxyPS9cXHcrL2c7ZG97aT10aGlzLl9lbmRIaWdobGlnaHRJbmRleDx0aGlzLl90ZXh0Lmxlbmd0aCYmLTEhPT10aGlzLl90ZXh0W3RoaXMuX2VuZEhpZ2hsaWdodEluZGV4XS5zZWFyY2gocik/Kyt0aGlzLl9lbmRIaWdobGlnaHRJbmRleDowLGU9dGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleD4wJiYtMSE9PXRoaXMuX3RleHRbdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleC0xXS5zZWFyY2gocik/LS10aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4OjB9d2hpbGUoZXx8aSk7dGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMudGV4dC5sZW5ndGgtdGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLm9uVGV4dEhpZ2hsaWdodE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSEwLHRoaXMuX2NsaWNrZWRDb29yZGluYXRlPW51bGwsdGhpcy5fYmxpbmtJc0V2ZW49ITAsdGhpcy5fY3Vyc29ySW5kZXg9LTEsdGhpcy5fbWFya0FzRGlydHkoKX0sZS5wcm90b3R5cGUuX3NlbGVjdEFsbFRleHQ9ZnVuY3Rpb24oKXt0aGlzLl9ibGlua0lzRXZlbj0hMCx0aGlzLl9pc1RleHRIaWdobGlnaHRPbj0hMCx0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4PTAsdGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXg9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5fY3Vyc29yT2Zmc2V0PXRoaXMuX3RleHQubGVuZ3RoLHRoaXMuX2N1cnNvckluZGV4PS0xLHRoaXMuX21hcmtBc0RpcnR5KCl9LGUucHJvdG90eXBlLnByb2Nlc3NLZXlib2FyZD1mdW5jdGlvbih0KXt0aGlzLnByb2Nlc3NLZXkodC5rZXlDb2RlLHQua2V5LHQpLHRoaXMub25LZXlib2FyZEV2ZW50UHJvY2Vzc2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCl9LGUucHJvdG90eXBlLl9vbkNvcHlUZXh0PWZ1bmN0aW9uKHQpe3RoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExO3RyeXt0LmNsaXBib2FyZERhdGEmJnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKFwidGV4dC9wbGFpblwiLHRoaXMuX2hpZ2hsaWdodGVkVGV4dCl9Y2F0Y2godCl7fXRoaXMuX2hvc3QuY2xpcGJvYXJkRGF0YT10aGlzLl9oaWdobGlnaHRlZFRleHR9LGUucHJvdG90eXBlLl9vbkN1dFRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5faGlnaGxpZ2h0ZWRUZXh0KXt0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLHRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXgpK3RoaXMuX3RleHQuc2xpY2UodGhpcy5fZW5kSGlnaGxpZ2h0SW5kZXgpLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHRoaXMuX2N1cnNvck9mZnNldD10aGlzLnRleHQubGVuZ3RoLXRoaXMuX3N0YXJ0SGlnaGxpZ2h0SW5kZXg7dHJ5e3QuY2xpcGJvYXJkRGF0YSYmdC5jbGlwYm9hcmREYXRhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsdGhpcy5faGlnaGxpZ2h0ZWRUZXh0KX1jYXRjaCh0KXt9dGhpcy5faG9zdC5jbGlwYm9hcmREYXRhPXRoaXMuX2hpZ2hsaWdodGVkVGV4dCx0aGlzLl9oaWdobGlnaHRlZFRleHQ9XCJcIn19LGUucHJvdG90eXBlLl9vblBhc3RlVGV4dD1mdW5jdGlvbih0KXt2YXIgZT1cIlwiO2U9dC5jbGlwYm9hcmREYXRhJiYtMSE9PXQuY2xpcGJvYXJkRGF0YS50eXBlcy5pbmRleE9mKFwidGV4dC9wbGFpblwiKT90LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIik6dGhpcy5faG9zdC5jbGlwYm9hcmREYXRhO3ZhciBpPXRoaXMuX3RleHQubGVuZ3RoLXRoaXMuX2N1cnNvck9mZnNldDt0aGlzLnRleHQ9dGhpcy5fdGV4dC5zbGljZSgwLGkpK2UrdGhpcy5fdGV4dC5zbGljZShpKX0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3Quc2F2ZSgpLHRoaXMuX2FwcGx5U3RhdGVzKHQpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdGhpcy5faXNGb2N1c2VkP3RoaXMuX2ZvY3VzZWRCYWNrZ3JvdW5kJiYodC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuX2ZvY3VzZWRCYWNrZ3JvdW5kOnRoaXMuX2Rpc2FibGVkQ29sb3IsdC5maWxsUmVjdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKTp0aGlzLl9iYWNrZ3JvdW5kJiYodC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuX2JhY2tncm91bmQ6dGhpcy5fZGlzYWJsZWRDb2xvcix0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0aGlzLl9mb250T2Zmc2V0fHwodGhpcy5fZm9udE9mZnNldD1wLl9HZXRGb250T2Zmc2V0KHQuZm9udCkpO3ZhciByPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fbWFyZ2luLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlLndpZHRoKTt0aGlzLmNvbG9yJiYodC5maWxsU3R5bGU9dGhpcy5jb2xvcik7dmFyIG49dGhpcy5fYmVmb3JlUmVuZGVyVGV4dCh0aGlzLl90ZXh0KTt0aGlzLl9pc0ZvY3VzZWR8fHRoaXMuX3RleHR8fCF0aGlzLl9wbGFjZWhvbGRlclRleHR8fChuPXRoaXMuX3BsYWNlaG9sZGVyVGV4dCx0aGlzLl9wbGFjZWhvbGRlckNvbG9yJiYodC5maWxsU3R5bGU9dGhpcy5fcGxhY2Vob2xkZXJDb2xvcikpLHRoaXMuX3RleHRXaWR0aD10Lm1lYXN1cmVUZXh0KG4pLndpZHRoO3ZhciBvPTIqdGhpcy5fbWFyZ2luLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlLndpZHRoKTt0aGlzLl9hdXRvU3RyZXRjaFdpZHRoJiYodGhpcy53aWR0aD1NYXRoLm1pbih0aGlzLl9tYXhXaWR0aC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl90ZW1wUGFyZW50TWVhc3VyZS53aWR0aCksdGhpcy5fdGV4dFdpZHRoK28pK1wicHhcIik7dmFyIHM9dGhpcy5fZm9udE9mZnNldC5hc2NlbnQrKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl9mb250T2Zmc2V0LmhlaWdodCkvMixhPXRoaXMuX3dpZHRoLmdldFZhbHVlSW5QaXhlbCh0aGlzLl9ob3N0LHRoaXMuX3RlbXBQYXJlbnRNZWFzdXJlLndpZHRoKS1vO2lmKHQuc2F2ZSgpLHQuYmVnaW5QYXRoKCksdC5yZWN0KHIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKyh0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fZm9udE9mZnNldC5oZWlnaHQpLzIsYSsyLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdC5jbGlwKCksdGhpcy5faXNGb2N1c2VkJiZ0aGlzLl90ZXh0V2lkdGg+YSl7dmFyIGg9ci10aGlzLl90ZXh0V2lkdGgrYTt0aGlzLl9zY3JvbGxMZWZ0fHwodGhpcy5fc2Nyb2xsTGVmdD1oKX1lbHNlIHRoaXMuX3Njcm9sbExlZnQ9cjtpZih0LmZpbGxUZXh0KG4sdGhpcy5fc2Nyb2xsTGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArcyksdGhpcy5faXNGb2N1c2VkKXtpZih0aGlzLl9jbGlja2VkQ29vcmRpbmF0ZSl7dmFyIGw9dGhpcy5fc2Nyb2xsTGVmdCt0aGlzLl90ZXh0V2lkdGgtdGhpcy5fY2xpY2tlZENvb3JkaW5hdGUsdT0wO3RoaXMuX2N1cnNvck9mZnNldD0wO3ZhciBjPTA7ZG97dGhpcy5fY3Vyc29yT2Zmc2V0JiYoYz1NYXRoLmFicyhsLXUpKSx0aGlzLl9jdXJzb3JPZmZzZXQrKyx1PXQubWVhc3VyZVRleHQobi5zdWJzdHIobi5sZW5ndGgtdGhpcy5fY3Vyc29yT2Zmc2V0LHRoaXMuX2N1cnNvck9mZnNldCkpLndpZHRofXdoaWxlKHU8bCYmbi5sZW5ndGg+PXRoaXMuX2N1cnNvck9mZnNldCk7TWF0aC5hYnMobC11KT5jJiZ0aGlzLl9jdXJzb3JPZmZzZXQtLSx0aGlzLl9ibGlua0lzRXZlbj0hMSx0aGlzLl9jbGlja2VkQ29vcmRpbmF0ZT1udWxsfWlmKCF0aGlzLl9ibGlua0lzRXZlbil7dmFyIF89dGhpcy50ZXh0LnN1YnN0cih0aGlzLl90ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQpLGQ9dC5tZWFzdXJlVGV4dChfKS53aWR0aCxmPXRoaXMuX3Njcm9sbExlZnQrdGhpcy5fdGV4dFdpZHRoLWQ7ZjxyPyh0aGlzLl9zY3JvbGxMZWZ0Kz1yLWYsZj1yLHRoaXMuX21hcmtBc0RpcnR5KCkpOmY+cithJiYodGhpcy5fc2Nyb2xsTGVmdCs9cithLWYsZj1yK2EsdGhpcy5fbWFya0FzRGlydHkoKSksdGhpcy5faXNUZXh0SGlnaGxpZ2h0T258fHQuZmlsbFJlY3QoZix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl9mb250T2Zmc2V0LmhlaWdodCkvMiwyLHRoaXMuX2ZvbnRPZmZzZXQuaGVpZ2h0KX1pZihjbGVhclRpbWVvdXQodGhpcy5fYmxpbmtUaW1lb3V0KSx0aGlzLl9ibGlua1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2kuX2JsaW5rSXNFdmVuPSFpLl9ibGlua0lzRXZlbixpLl9tYXJrQXNEaXJ0eSgpfSw1MDApLHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uKXtjbGVhclRpbWVvdXQodGhpcy5fYmxpbmtUaW1lb3V0KTt2YXIgZz10Lm1lYXN1cmVUZXh0KHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCkpLndpZHRoLGI9dGhpcy5fc2Nyb2xsTGVmdCt0aGlzLl90ZXh0V2lkdGgtZzt0aGlzLl9oaWdobGlnaHRlZFRleHQ9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLl9zdGFydEhpZ2hsaWdodEluZGV4LHRoaXMuX2VuZEhpZ2hsaWdodEluZGV4KTt2YXIgbT10Lm1lYXN1cmVUZXh0KHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5fc3RhcnRIaWdobGlnaHRJbmRleCx0aGlzLl9lbmRIaWdobGlnaHRJbmRleCkpLndpZHRoO2I8ciYmKChtLT1yLWIpfHwobT10Lm1lYXN1cmVUZXh0KHRoaXMudGV4dC5jaGFyQXQodGhpcy50ZXh0Lmxlbmd0aC10aGlzLl9jdXJzb3JPZmZzZXQpKS53aWR0aCksYj1yKSx0Lmdsb2JhbEFscGhhPXRoaXMuX2hpZ2hsaWdoZXJPcGFjaXR5LHQuZmlsbFN0eWxlPXRoaXMuX3RleHRIaWdobGlnaHRDb2xvcix0LmZpbGxSZWN0KGIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKyh0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fZm9udE9mZnNldC5oZWlnaHQpLzIsbSx0aGlzLl9mb250T2Zmc2V0LmhlaWdodCksdC5nbG9iYWxBbHBoYT0xfX10LnJlc3RvcmUoKSx0aGlzLl90aGlja25lc3MmJih0aGlzLl9pc0ZvY3VzZWQ/dGhpcy5mb2N1c2VkQ29sb3ImJih0LnN0cm9rZVN0eWxlPXRoaXMuZm9jdXNlZENvbG9yKTp0aGlzLmNvbG9yJiYodC5zdHJva2VTdHlsZT10aGlzLmNvbG9yKSx0LmxpbmVXaWR0aD10aGlzLl90aGlja25lc3MsdC5zdHJva2VSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX3RoaWNrbmVzcy8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLXRoaXMuX3RoaWNrbmVzcyx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fdGhpY2tuZXNzKSksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiEhdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pJiYodGhpcy5fY2xpY2tlZENvb3JkaW5hdGU9aS54LHRoaXMuX2lzVGV4dEhpZ2hsaWdodE9uPSExLHRoaXMuX2hpZ2hsaWdodGVkVGV4dD1cIlwiLHRoaXMuX2N1cnNvckluZGV4PS0xLHRoaXMuX2lzUG9pbnRlckRvd249ITAsdGhpcy5faG9zdC5fY2FwdHVyaW5nQ29udHJvbFtyXT10aGlzLHRoaXMuX2hvc3QuZm9jdXNlZENvbnRyb2w9PT10aGlzPyhjbGVhclRpbWVvdXQodGhpcy5fYmxpbmtUaW1lb3V0KSx0aGlzLl9tYXJrQXNEaXJ0eSgpLCEwKTohIXRoaXMuX2lzRW5hYmxlZCYmKHRoaXMuX2hvc3QuZm9jdXNlZENvbnRyb2w9dGhpcywhMCkpfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyTW92ZT1mdW5jdGlvbihlLGkscil7dGhpcy5faG9zdC5mb2N1c2VkQ29udHJvbD09PXRoaXMmJnRoaXMuX2lzUG9pbnRlckRvd24mJih0aGlzLl9jbGlja2VkQ29vcmRpbmF0ZT1pLngsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl91cGRhdGVWYWx1ZUZyb21DdXJzb3JJbmRleCh0aGlzLl9jdXJzb3JPZmZzZXQpKSx0LnByb3RvdHlwZS5fb25Qb2ludGVyTW92ZS5jYWxsKHRoaXMsZSxpLHIpfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyVXA9ZnVuY3Rpb24oZSxpLHIsbixvKXt0aGlzLl9pc1BvaW50ZXJEb3duPSExLGRlbGV0ZSB0aGlzLl9ob3N0Ll9jYXB0dXJpbmdDb250cm9sW3JdLHQucHJvdG90eXBlLl9vblBvaW50ZXJVcC5jYWxsKHRoaXMsZSxpLHIsbixvKX0sZS5wcm90b3R5cGUuX2JlZm9yZVJlbmRlclRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5vbkJsdXJPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vbkZvY3VzT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uVGV4dENvcHlPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblRleHRDdXRPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vblRleHRQYXN0ZU9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uVGV4dEhpZ2hsaWdodE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uS2V5Ym9hcmRFdmVudFByb2Nlc3NlZE9ic2VydmFibGUuY2xlYXIoKX0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLklucHV0VGV4dFwiXT1UO3ZhciB4PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3Jvd0RlZmluaXRpb25zPW5ldyBBcnJheSxpLl9jb2x1bW5EZWZpbml0aW9ucz1uZXcgQXJyYXksaS5fY2VsbHM9e30saS5fY2hpbGRDb250cm9scz1uZXcgQXJyYXksaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbHVtbkNvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicm93Q291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjaGlsZHJlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRDb250cm9sc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjZWxsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2VsbHN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0Um93RGVmaW5pdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdDwwfHx0Pj10aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGg/bnVsbDp0aGlzLl9yb3dEZWZpbml0aW9uc1t0XX0sZS5wcm90b3R5cGUuZ2V0Q29sdW1uRGVmaW5pdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gdDwwfHx0Pj10aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGg/bnVsbDp0aGlzLl9jb2x1bW5EZWZpbml0aW9uc1t0XX0sZS5wcm90b3R5cGUuYWRkUm93RGVmaW5pdGlvbj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy5fcm93RGVmaW5pdGlvbnMucHVzaChuZXcgYSh0LGU/YS5VTklUTU9ERV9QSVhFTDphLlVOSVRNT0RFX1BFUkNFTlRBR0UpKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLmFkZENvbHVtbkRlZmluaXRpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLnB1c2gobmV3IGEodCxlP2EuVU5JVE1PREVfUElYRUw6YS5VTklUTU9ERV9QRVJDRU5UQUdFKSksdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRSb3dEZWZpbml0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih2b2lkIDA9PT1pJiYoaT0hMSksdDwwfHx0Pj10aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5fcm93RGVmaW5pdGlvbnNbdF07cmV0dXJuIHImJnIuaXNQaXhlbD09PWkmJnIuaW50ZXJuYWxWYWx1ZT09PWU/dGhpczoodGhpcy5fcm93RGVmaW5pdGlvbnNbdF09bmV3IGEoZSxpP2EuVU5JVE1PREVfUElYRUw6YS5VTklUTU9ERV9QRVJDRU5UQUdFKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMpfSxlLnByb3RvdHlwZS5zZXRDb2x1bW5EZWZpbml0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih2b2lkIDA9PT1pJiYoaT0hMSksdDwwfHx0Pj10aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5fY29sdW1uRGVmaW5pdGlvbnNbdF07cmV0dXJuIHImJnIuaXNQaXhlbD09PWkmJnIuaW50ZXJuYWxWYWx1ZT09PWU/dGhpczoodGhpcy5fY29sdW1uRGVmaW5pdGlvbnNbdF09bmV3IGEoZSxpP2EuVU5JVE1PREVfUElYRUw6YS5VTklUTU9ERV9QRVJDRU5UQUdFKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMpfSxlLnByb3RvdHlwZS5nZXRDaGlsZHJlbkF0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fY2VsbHNbdCtcIjpcIitlXTtyZXR1cm4gaT9pLmNoaWxkcmVuOm51bGx9LGUucHJvdG90eXBlLmdldENoaWxkQ2VsbEluZm89ZnVuY3Rpb24odCl7cmV0dXJuIHQuX3RhZ30sZS5wcm90b3R5cGUuX3JlbW92ZUNlbGw9ZnVuY3Rpb24oZSxpKXtpZihlKXt0LnByb3RvdHlwZS5yZW1vdmVDb250cm9sLmNhbGwodGhpcyxlKTtmb3IodmFyIHI9MCxuPWUuY2hpbGRyZW47cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl0scz10aGlzLl9jaGlsZENvbnRyb2xzLmluZGV4T2Yobyk7LTEhPT1zJiZ0aGlzLl9jaGlsZENvbnRyb2xzLnNwbGljZShzLDEpfWRlbGV0ZSB0aGlzLl9jZWxsc1tpXX19LGUucHJvdG90eXBlLl9vZmZzZXRDZWxsPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fY2VsbHNbZV0pe3RoaXMuX2NlbGxzW3RdPXRoaXMuX2NlbGxzW2VdO2Zvcih2YXIgaT0wLHI9dGhpcy5fY2VsbHNbdF0uY2hpbGRyZW47aTxyLmxlbmd0aDtpKyspe3JbaV0uX3RhZz10fWRlbGV0ZSB0aGlzLl9jZWxsc1tlXX19LGUucHJvdG90eXBlLnJlbW92ZUNvbHVtbkRlZmluaXRpb249ZnVuY3Rpb24odCl7aWYodDwwfHx0Pj10aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGgpcmV0dXJuIHRoaXM7Zm9yKHZhciBlPTA7ZTx0aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGg7ZSsrKXt2YXIgaT1lK1wiOlwiK3Qscj10aGlzLl9jZWxsc1tpXTt0aGlzLl9yZW1vdmVDZWxsKHIsaSl9Zm9yKGU9MDtlPHRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aDtlKyspZm9yKHZhciBuPXQrMTtuPHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aDtuKyspe3ZhciBvPWUrXCI6XCIrKG4tMSk7aT1lK1wiOlwiK247dGhpcy5fb2Zmc2V0Q2VsbChvLGkpfXJldHVybiB0aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5zcGxpY2UodCwxKSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXN9LGUucHJvdG90eXBlLnJlbW92ZVJvd0RlZmluaXRpb249ZnVuY3Rpb24odCl7aWYodDwwfHx0Pj10aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGgpcmV0dXJuIHRoaXM7Zm9yKHZhciBlPTA7ZTx0aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGg7ZSsrKXt2YXIgaT10K1wiOlwiK2Uscj10aGlzLl9jZWxsc1tpXTt0aGlzLl9yZW1vdmVDZWxsKHIsaSl9Zm9yKGU9MDtlPHRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aDtlKyspZm9yKHZhciBuPXQrMTtuPHRoaXMuX3Jvd0RlZmluaXRpb25zLmxlbmd0aDtuKyspe3ZhciBvPW4tMStcIjpcIitlO2k9bitcIjpcIitlO3RoaXMuX29mZnNldENlbGwobyxpKX1yZXR1cm4gdGhpcy5fcm93RGVmaW5pdGlvbnMuc3BsaWNlKHQsMSksdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzfSxlLnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKGUsaSxyKXtpZih2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1yJiYocj0wKSwwPT09dGhpcy5fcm93RGVmaW5pdGlvbnMubGVuZ3RoJiZ0aGlzLmFkZFJvd0RlZmluaXRpb24oMSwhMSksMD09PXRoaXMuX2NvbHVtbkRlZmluaXRpb25zLmxlbmd0aCYmdGhpcy5hZGRDb2x1bW5EZWZpbml0aW9uKDEsITEpLC0xIT09dGhpcy5fY2hpbGRDb250cm9scy5pbmRleE9mKGUpKXJldHVybiBzLlRvb2xzLldhcm4oXCJDb250cm9sIChOYW1lOlwiK2UubmFtZStcIiwgVW5pcXVlSWQ6XCIrZS51bmlxdWVJZCtcIikgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhpcyBncmlkLiBZb3UgbXVzdCByZW1vdmUgaXQgYmVmb3JlIHJlYXR0YWNoaW5nIGl0XCIpLHRoaXM7dmFyIG49TWF0aC5taW4oaSx0aGlzLl9yb3dEZWZpbml0aW9ucy5sZW5ndGgtMSkrXCI6XCIrTWF0aC5taW4ocix0aGlzLl9jb2x1bW5EZWZpbml0aW9ucy5sZW5ndGgtMSksbz10aGlzLl9jZWxsc1tuXTtyZXR1cm4gb3x8KG89bmV3IGcobiksdGhpcy5fY2VsbHNbbl09byxvLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG8udmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLHQucHJvdG90eXBlLmFkZENvbnRyb2wuY2FsbCh0aGlzLG8pKSxvLmFkZENvbnRyb2woZSksdGhpcy5fY2hpbGRDb250cm9scy5wdXNoKGUpLGUuX3RhZz1uLGUucGFyZW50PXRoaXMsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzfSxlLnByb3RvdHlwZS5yZW1vdmVDb250cm9sPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2NoaWxkQ29udHJvbHMuaW5kZXhPZih0KTstMSE9PWUmJnRoaXMuX2NoaWxkQ29udHJvbHMuc3BsaWNlKGUsMSk7dmFyIGk9dGhpcy5fY2VsbHNbdC5fdGFnXTtyZXR1cm4gaSYmKGkucmVtb3ZlQ29udHJvbCh0KSx0Ll90YWc9bnVsbCksdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzfSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkdyaWRcIn0sZS5wcm90b3R5cGUuX2dldEdyaWREZWZpbml0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT1bXSxyPVtdLG49W10sbz10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCxzPTAsYT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQsaD0wLGw9MCx1PTAsYz10aGlzLl9yb3dEZWZpbml0aW9uczt1PGMubGVuZ3RoO3UrKyl7aWYoKGc9Y1t1XSkuaXNQaXhlbClhLT1wPWcuZ2V0VmFsdWUodGhpcy5faG9zdCksaVtsXT1wO2Vsc2UgaCs9Zy5pbnRlcm5hbFZhbHVlO2wrK312YXIgXz0wO2w9MDtmb3IodmFyIGQ9MCxmPXRoaXMuX3Jvd0RlZmluaXRpb25zO2Q8Zi5sZW5ndGg7ZCsrKXt2YXIgcCxnPWZbZF07aWYobi5wdXNoKF8pLGcuaXNQaXhlbClfKz1nLmdldFZhbHVlKHRoaXMuX2hvc3QpO2Vsc2UgXys9cD1nLmludGVybmFsVmFsdWUvaCphLGlbbF09cDtsKyt9bD0wO2Zvcih2YXIgYj0wLG09dGhpcy5fY29sdW1uRGVmaW5pdGlvbnM7YjxtLmxlbmd0aDtiKyspe2lmKChnPW1bYl0pLmlzUGl4ZWwpby09Qz1nLmdldFZhbHVlKHRoaXMuX2hvc3QpLGVbbF09QztlbHNlIHMrPWcuaW50ZXJuYWxWYWx1ZTtsKyt9dmFyIHk9MDtsPTA7Zm9yKHZhciB2PTAsTz10aGlzLl9jb2x1bW5EZWZpbml0aW9uczt2PE8ubGVuZ3RoO3YrKyl7dmFyIEM7Zz1PW3ZdO2lmKHIucHVzaCh5KSxnLmlzUGl4ZWwpeSs9Zy5nZXRWYWx1ZSh0aGlzLl9ob3N0KTtlbHNlIHkrPUM9Zy5pbnRlcm5hbFZhbHVlL3MqbyxlW2xdPUM7bCsrfXQocixuLGUsaSl9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbihlLGkpe3ZhciByPXRoaXM7dGhpcy5fZ2V0R3JpZERlZmluaXRpb25zKGZ1bmN0aW9uKHQsZSxpLG4pe2Zvcih2YXIgbyBpbiByLl9jZWxscylpZihyLl9jZWxscy5oYXNPd25Qcm9wZXJ0eShvKSl7dmFyIHM9by5zcGxpdChcIjpcIiksYT1wYXJzZUludChzWzBdKSxoPXBhcnNlSW50KHNbMV0pLGw9ci5fY2VsbHNbb107bC5sZWZ0PXRbaF0rXCJweFwiLGwudG9wPWVbYV0rXCJweFwiLGwud2lkdGg9aVtoXStcInB4XCIsbC5oZWlnaHQ9blthXStcInB4XCIsbC5fbGVmdC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITAsbC5fdG9wLmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMCxsLl93aWR0aC5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITAsbC5faGVpZ2h0Lmlnbm9yZUFkYXB0aXZlU2NhbGluZz0hMH19KSx0LnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3NpbmcuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLl9mbGFnRGVzY2VuZGFudHNBc01hdHJpeERpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2NlbGxzKXtpZih0aGlzLl9jZWxscy5oYXNPd25Qcm9wZXJ0eSh0KSl0aGlzLl9jZWxsc1t0XS5fbWFya01hdHJpeEFzRGlydHkoKX19LGUucHJvdG90eXBlLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYz1mdW5jdGlvbihlKXt2YXIgaT10aGlzO3QucHJvdG90eXBlLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYy5jYWxsKHRoaXMsZSksdGhpcy5fZ2V0R3JpZERlZmluaXRpb25zKGZ1bmN0aW9uKHQscixuLG8pe2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYT1pLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3Rbc10rbltzXTtlLmJlZ2luUGF0aCgpLGUubW92ZVRvKGEsaS5fY3VycmVudE1lYXN1cmUudG9wKSxlLmxpbmVUbyhhLGkuX2N1cnJlbnRNZWFzdXJlLnRvcCtpLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLGUuc3Ryb2tlKCl9Zm9yKHM9MDtzPHIubGVuZ3RoO3MrKyl7dmFyIGg9aS5fY3VycmVudE1lYXN1cmUudG9wK3Jbc10rb1tzXTtlLmJlZ2luUGF0aCgpLGUubW92ZVRvKGkuX2N1cnJlbnRNZWFzdXJlLmxlZnQsaCksZS5saW5lVG8oaS5fY3VycmVudE1lYXN1cmUubGVmdCtpLl9jdXJyZW50TWVhc3VyZS53aWR0aCxoKSxlLnN0cm9rZSgpfX0pLGUucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO2Zvcih2YXIgZT0wLGk9dGhpcy5fY2hpbGRDb250cm9scztlPGkubGVuZ3RoO2UrKyl7aVtlXS5kaXNwb3NlKCl9dGhpcy5fY2hpbGRDb250cm9scz1bXX0sZX0oZyk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkdyaWRcIl09eDt2YXIgTT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl92YWx1ZT1zLkNvbG9yMy5SZWQoKSxpLl90bXBDb2xvcj1uZXcgcy5Db2xvcjMsaS5fcG9pbnRlclN0YXJ0ZWRPblNxdWFyZT0hMSxpLl9wb2ludGVyU3RhcnRlZE9uV2hlZWw9ITEsaS5fc3F1YXJlTGVmdD0wLGkuX3NxdWFyZVRvcD0wLGkuX3NxdWFyZVNpemU9MCxpLl9oPTM2MCxpLl9zPTEsaS5fdj0xLGkuX2xhc3RQb2ludGVyRG93bklEPS0xLGkub25WYWx1ZUNoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsaS5fcG9pbnRlcklzRG93bj0hMSxpLnZhbHVlPW5ldyBzLkNvbG9yMyguODgsLjEsLjEpLGkuc2l6ZT1cIjIwMHB4XCIsaS5pc1BvaW50ZXJCbG9ja2VyPSEwLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92YWx1ZS5lcXVhbHModCl8fCh0aGlzLl92YWx1ZS5jb3B5RnJvbSh0KSx0aGlzLl92YWx1ZS50b0hTVlRvUmVmKHRoaXMuX3RtcENvbG9yKSx0aGlzLl9oPXRoaXMuX3RtcENvbG9yLnIsdGhpcy5fcz1NYXRoLm1heCh0aGlzLl90bXBDb2xvci5nLDFlLTUpLHRoaXMuX3Y9TWF0aC5tYXgodGhpcy5fdG1wQ29sb3IuYiwxZS01KSx0aGlzLl9tYXJrQXNEaXJ0eSgpLHRoaXMuX3ZhbHVlLnI8PWUuX0Vwc2lsb24mJih0aGlzLl92YWx1ZS5yPTApLHRoaXMuX3ZhbHVlLmc8PWUuX0Vwc2lsb24mJih0aGlzLl92YWx1ZS5nPTApLHRoaXMuX3ZhbHVlLmI8PWUuX0Vwc2lsb24mJih0aGlzLl92YWx1ZS5iPTApLHRoaXMuX3ZhbHVlLnI+PTEtZS5fRXBzaWxvbiYmKHRoaXMuX3ZhbHVlLnI9MSksdGhpcy5fdmFsdWUuZz49MS1lLl9FcHNpbG9uJiYodGhpcy5fdmFsdWUuZz0xKSx0aGlzLl92YWx1ZS5iPj0xLWUuX0Vwc2lsb24mJih0aGlzLl92YWx1ZS5iPTEpLHRoaXMub25WYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzLl92YWx1ZSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fd2lkdGguZnJvbVN0cmluZyh0KSYmKHRoaXMuX2hlaWdodC5mcm9tU3RyaW5nKHQpLHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faGVpZ2h0LnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5faGVpZ2h0LmZyb21TdHJpbmcodCkmJih0aGlzLl93aWR0aC5mcm9tU3RyaW5nKHQpLHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLndpZHRoPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJDb2xvclBpY2tlclwifSxlLnByb3RvdHlwZS5fcHJlTWVhc3VyZT1mdW5jdGlvbih0LGUpe3Qud2lkdGg8dC5oZWlnaHQ/dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PXQud2lkdGg6dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg9dC5oZWlnaHR9LGUucHJvdG90eXBlLl91cGRhdGVTcXVhcmVQcm9wcz1mdW5jdGlvbigpe3ZhciB0PS41Kk1hdGgubWluKHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksZT0yKih0LS4yKnQpL01hdGguc3FydCgyKSxpPXQtLjUqZTt0aGlzLl9zcXVhcmVMZWZ0PXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQraSx0aGlzLl9zcXVhcmVUb3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wK2ksdGhpcy5fc3F1YXJlU2l6ZT1lfSxlLnByb3RvdHlwZS5fZHJhd0dyYWRpZW50U3F1YXJlPWZ1bmN0aW9uKHQsZSxpLHIsbixvKXt2YXIgcz1vLmNyZWF0ZUxpbmVhckdyYWRpZW50KGUsaSxyK2UsaSk7cy5hZGRDb2xvclN0b3AoMCxcIiNmZmZcIikscy5hZGRDb2xvclN0b3AoMSxcImhzbChcIit0K1wiLCAxMDAlLCA1MCUpXCIpLG8uZmlsbFN0eWxlPXMsby5maWxsUmVjdChlLGkscixuKTt2YXIgYT1vLmNyZWF0ZUxpbmVhckdyYWRpZW50KGUsaSxlLG4raSk7YS5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwwLDAsMClcIiksYS5hZGRDb2xvclN0b3AoMSxcIiMwMDBcIiksby5maWxsU3R5bGU9YSxvLmZpbGxSZWN0KGUsaSxyLG4pfSxlLnByb3RvdHlwZS5fZHJhd0NpcmNsZT1mdW5jdGlvbih0LGUsaSxyKXtyLmJlZ2luUGF0aCgpLHIuYXJjKHQsZSxpKzEsMCwyKk1hdGguUEksITEpLHIubGluZVdpZHRoPTMsci5zdHJva2VTdHlsZT1cIiMzMzMzMzNcIixyLnN0cm9rZSgpLHIuYmVnaW5QYXRoKCksci5hcmModCxlLGksMCwyKk1hdGguUEksITEpLHIubGluZVdpZHRoPTMsci5zdHJva2VTdHlsZT1cIiNmZmZmZmZcIixyLnN0cm9rZSgpfSxlLnByb3RvdHlwZS5fY3JlYXRlQ29sb3JXaGVlbENhbnZhcz1mdW5jdGlvbih0LGUpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7aS53aWR0aD0yKnQsaS5oZWlnaHQ9Mip0O2Zvcih2YXIgcj1pLmdldENvbnRleHQoXCIyZFwiKSxuPXIuZ2V0SW1hZ2VEYXRhKDAsMCwyKnQsMip0KSxvPW4uZGF0YSxhPXRoaXMuX3RtcENvbG9yLGg9dCp0LGw9dC1lLHU9bCpsLGM9LXQ7Yzx0O2MrKylmb3IodmFyIF89LXQ7Xzx0O18rKyl7dmFyIGQ9YypjK18qXztpZighKGQ+aHx8ZDx1KSl7dmFyIGY9TWF0aC5zcXJ0KGQpLHA9TWF0aC5hdGFuMihfLGMpO3MuQ29sb3IzLkhTVnRvUkdCVG9SZWYoMTgwKnAvTWF0aC5QSSsxODAsZi90LDEsYSk7dmFyIGc9NCooYyt0KzIqKF8rdCkqdCk7b1tnXT0yNTUqYS5yLG9bZysxXT0yNTUqYS5nLG9bZysyXT0yNTUqYS5iO3ZhciBiPS4yO2I9dDw1MD8uMjp0PjE1MD8uMDQ6LS4xNioodC01MCkvMTAwKy4yO3ZhciBtPShmLWwpLyh0LWwpO29bZyszXT1tPGI/bS9iKjI1NTptPjEtYj8yNTUqKDEtKG0tKDEtYikpL2IpOjI1NX19cmV0dXJuIHIucHV0SW1hZ2VEYXRhKG4sMCwwKSxpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KTt2YXIgZT0uNSpNYXRoLm1pbih0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLGk9LjIqZSxyPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsbj10aGlzLl9jdXJyZW50TWVhc3VyZS50b3A7dGhpcy5fY29sb3JXaGVlbENhbnZhcyYmdGhpcy5fY29sb3JXaGVlbENhbnZhcy53aWR0aD09MiplfHwodGhpcy5fY29sb3JXaGVlbENhbnZhcz10aGlzLl9jcmVhdGVDb2xvcldoZWVsQ2FudmFzKGUsaSkpLHRoaXMuX3VwZGF0ZVNxdWFyZVByb3BzKCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZLHQuZmlsbFJlY3QodGhpcy5fc3F1YXJlTGVmdCx0aGlzLl9zcXVhcmVUb3AsdGhpcy5fc3F1YXJlU2l6ZSx0aGlzLl9zcXVhcmVTaXplKSksdC5kcmF3SW1hZ2UodGhpcy5fY29sb3JXaGVlbENhbnZhcyxyLG4pLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0aGlzLl9kcmF3R3JhZGllbnRTcXVhcmUodGhpcy5faCx0aGlzLl9zcXVhcmVMZWZ0LHRoaXMuX3NxdWFyZVRvcCx0aGlzLl9zcXVhcmVTaXplLHRoaXMuX3NxdWFyZVNpemUsdCk7dmFyIG89dGhpcy5fc3F1YXJlTGVmdCt0aGlzLl9zcXVhcmVTaXplKnRoaXMuX3Mscz10aGlzLl9zcXVhcmVUb3ArdGhpcy5fc3F1YXJlU2l6ZSooMS10aGlzLl92KTt0aGlzLl9kcmF3Q2lyY2xlKG8scywuMDQqZSx0KTt2YXIgYT1lLS41Kmk7bz1yK2UrTWF0aC5jb3MoKHRoaXMuX2gtMTgwKSpNYXRoLlBJLzE4MCkqYSxzPW4rZStNYXRoLnNpbigodGhpcy5faC0xODApKk1hdGguUEkvMTgwKSphLHRoaXMuX2RyYXdDaXJjbGUobyxzLC4zNSppLHQpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcj1mdW5jdGlvbih0LGkpe2lmKHRoaXMuX3BvaW50ZXJTdGFydGVkT25XaGVlbCl7dmFyIHI9LjUqTWF0aC5taW4odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSxuPXIrdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCxvPXIrdGhpcy5fY3VycmVudE1lYXN1cmUudG9wO3RoaXMuX2g9MTgwKk1hdGguYXRhbjIoaS1vLHQtbikvTWF0aC5QSSsxODB9ZWxzZSB0aGlzLl9wb2ludGVyU3RhcnRlZE9uU3F1YXJlJiYodGhpcy5fdXBkYXRlU3F1YXJlUHJvcHMoKSx0aGlzLl9zPSh0LXRoaXMuX3NxdWFyZUxlZnQpL3RoaXMuX3NxdWFyZVNpemUsdGhpcy5fdj0xLShpLXRoaXMuX3NxdWFyZVRvcCkvdGhpcy5fc3F1YXJlU2l6ZSx0aGlzLl9zPU1hdGgubWluKHRoaXMuX3MsMSksdGhpcy5fcz1NYXRoLm1heCh0aGlzLl9zLGUuX0Vwc2lsb24pLHRoaXMuX3Y9TWF0aC5taW4odGhpcy5fdiwxKSx0aGlzLl92PU1hdGgubWF4KHRoaXMuX3YsZS5fRXBzaWxvbikpO3MuQ29sb3IzLkhTVnRvUkdCVG9SZWYodGhpcy5faCx0aGlzLl9zLHRoaXMuX3YsdGhpcy5fdG1wQ29sb3IpLHRoaXMudmFsdWU9dGhpcy5fdG1wQ29sb3J9LGUucHJvdG90eXBlLl9pc1BvaW50T25TcXVhcmU9ZnVuY3Rpb24odCxlKXt0aGlzLl91cGRhdGVTcXVhcmVQcm9wcygpO3ZhciBpPXRoaXMuX3NxdWFyZUxlZnQscj10aGlzLl9zcXVhcmVUb3Asbj10aGlzLl9zcXVhcmVTaXplO3JldHVybiB0Pj1pJiZ0PD1pK24mJmU+PXImJmU8PXIrbn0sZS5wcm90b3R5cGUuX2lzUG9pbnRPbldoZWVsPWZ1bmN0aW9uKHQsZSl7dmFyIGk9LjUqTWF0aC5taW4odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSxyPWktLjIqaSxuPXQtKGkrdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCksbz1lLShpK3RoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCkscz1uKm4rbypvO3JldHVybiBzPD1pKmkmJnM+PXIqcn0sZS5wcm90b3R5cGUuX29uUG9pbnRlckRvd249ZnVuY3Rpb24oZSxpLHIsbil7aWYoIXQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKSlyZXR1cm4hMTt0aGlzLl9wb2ludGVySXNEb3duPSEwLHRoaXMuX3BvaW50ZXJTdGFydGVkT25TcXVhcmU9ITEsdGhpcy5fcG9pbnRlclN0YXJ0ZWRPbldoZWVsPSExLHRoaXMuX2ludmVydFRyYW5zZm9ybU1hdHJpeC50cmFuc2Zvcm1Db29yZGluYXRlcyhpLngsaS55LHRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24pO3ZhciBvPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueCxzPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueTtyZXR1cm4gdGhpcy5faXNQb2ludE9uU3F1YXJlKG8scyk/dGhpcy5fcG9pbnRlclN0YXJ0ZWRPblNxdWFyZT0hMDp0aGlzLl9pc1BvaW50T25XaGVlbChvLHMpJiYodGhpcy5fcG9pbnRlclN0YXJ0ZWRPbldoZWVsPSEwKSx0aGlzLl91cGRhdGVWYWx1ZUZyb21Qb2ludGVyKG8scyksdGhpcy5faG9zdC5fY2FwdHVyaW5nQ29udHJvbFtyXT10aGlzLHRoaXMuX2xhc3RQb2ludGVyRG93bklEPXIsITB9LGUucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlPWZ1bmN0aW9uKGUsaSxyKXtpZihyPT10aGlzLl9sYXN0UG9pbnRlckRvd25JRCl7dGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKGkueCxpLnksdGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbik7dmFyIG49dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi54LG89dGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbi55O3RoaXMuX3BvaW50ZXJJc0Rvd24mJnRoaXMuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXIobixvKSx0LnByb3RvdHlwZS5fb25Qb2ludGVyTW92ZS5jYWxsKHRoaXMsZSxpLHIpfX0sZS5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKGUsaSxyLG4sbyl7dGhpcy5fcG9pbnRlcklzRG93bj0hMSxkZWxldGUgdGhpcy5faG9zdC5fY2FwdHVyaW5nQ29udHJvbFtyXSx0LnByb3RvdHlwZS5fb25Qb2ludGVyVXAuY2FsbCh0aGlzLGUsaSxyLG4sbyl9LGUuU2hvd1BpY2tlckRpYWxvZ0FzeW5jPWZ1bmN0aW9uKHQsaSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsbil7aS5waWNrZXJXaWR0aD1pLnBpY2tlcldpZHRofHxcIjY0MHB4XCIsaS5waWNrZXJIZWlnaHQ9aS5waWNrZXJIZWlnaHR8fFwiNDAwcHhcIixpLmhlYWRlckhlaWdodD1pLmhlYWRlckhlaWdodHx8XCIzNXB4XCIsaS5sYXN0Q29sb3I9aS5sYXN0Q29sb3J8fFwiIzAwMDAwMFwiLGkuc3dhdGNoTGltaXQ9aS5zd2F0Y2hMaW1pdHx8MjAsaS5udW1Td2F0Y2hlc1BlckxpbmU9aS5udW1Td2F0Y2hlc1BlckxpbmV8fDEwO3ZhciBvLGEsaCxsLHUsYyxfLGQsZixnLGIsdixDLHcsTSxQLGssSSxBLFM9aS5zd2F0Y2hMaW1pdC9pLm51bVN3YXRjaGVzUGVyTGluZSxFPXBhcnNlRmxvYXQoaS5waWNrZXJXaWR0aCkvaS5udW1Td2F0Y2hlc1BlckxpbmUsTD1NYXRoLmZsb29yKC4yNSpFKSxSPUwqKGkubnVtU3dhdGNoZXNQZXJMaW5lKzEpLEQ9TWF0aC5mbG9vcigocGFyc2VGbG9hdChpLnBpY2tlcldpZHRoKS1SKS9pLm51bVN3YXRjaGVzUGVyTGluZSksQj1EKlMrTCooUysxKSxOPShwYXJzZUludChpLnBpY2tlckhlaWdodCkrQitNYXRoLmZsb29yKC4yNSpEKSkudG9TdHJpbmcoKStcInB4XCIsVj1cIiNjMGMwYzBcIixIPVwiIzUzNTM1M1wiLEY9XCIjNDE0MTQxXCIsaj1cIjUxNTE1MVwiLFc9XCIjNTU1NTU1XCIsej1cIiM0NTQ1NDVcIixHPXMuQ29sb3IzLkZyb21IZXhTdHJpbmcoXCIjZGRkZGRkXCIpLFg9Ry5yK0cuZytHLmIsWT1cIiNhYWFhYWFcIixVPVwiI2ZmZmZmZlwiLHE9W1wiUlwiLFwiR1wiLFwiQlwiXSxLPSExO2Z1bmN0aW9uIFoodCxlKXtBPWU7dmFyIGk9dC50b0hleFN0cmluZygpO2lmKGsuYmFja2dyb3VuZD1pLGcubmFtZSE9QSYmKGcudGV4dD1NYXRoLmZsb29yKDI1NSp0LnIpLnRvU3RyaW5nKCkpLGIubmFtZSE9QSYmKGIudGV4dD1NYXRoLmZsb29yKDI1NSp0LmcpLnRvU3RyaW5nKCkpLHYubmFtZSE9QSYmKHYudGV4dD1NYXRoLmZsb29yKDI1NSp0LmIpLnRvU3RyaW5nKCkpLEMubmFtZSE9QSYmKEMudGV4dD10LnIudG9TdHJpbmcoKSksdy5uYW1lIT1BJiYody50ZXh0PXQuZy50b1N0cmluZygpKSxNLm5hbWUhPUEmJihNLnRleHQ9dC5iLnRvU3RyaW5nKCkpLFAubmFtZSE9QSl7dmFyIHI9aS5zcGxpdChcIiNcIik7UC50ZXh0PXJbMV19Zi5uYW1lIT1BJiYoZi52YWx1ZT10KX1mdW5jdGlvbiBKKHQsZSl7dmFyIGk9dC50ZXh0O2lmKC9bXjAtOV0vZy50ZXN0KGkpKXQudGV4dD1JO2Vsc2UgaWYoXCJcIiE9aSYmKE1hdGguZmxvb3IocGFyc2VJbnQoaSkpPDA/aT1cIjBcIjpNYXRoLmZsb29yKHBhcnNlSW50KGkpKT4yNTU/aT1cIjI1NVwiOmlzTmFOKHBhcnNlSW50KGkpKSYmKGk9XCIwXCIpKSxBPT10Lm5hbWUmJihJPWkpLFwiXCIhPWkpe2k9cGFyc2VJbnQoaSkudG9TdHJpbmcoKSx0LnRleHQ9aTt2YXIgcj1zLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKGsuYmFja2dyb3VuZCk7QT09dC5uYW1lJiZaKFwiclwiPT1lP25ldyBzLkNvbG9yMyhwYXJzZUludChpKS8yNTUsci5nLHIuYik6XCJnXCI9PWU/bmV3IHMuQ29sb3IzKHIucixwYXJzZUludChpKS8yNTUsci5iKTpuZXcgcy5Db2xvcjMoci5yLHIuZyxwYXJzZUludChpKS8yNTUpLHQubmFtZSl9fWZ1bmN0aW9uIFEodCxlKXt2YXIgaT10LnRleHQ7aWYoL1teMC05XFwuXS9nLnRlc3QoaSkpdC50ZXh0PUk7ZWxzZXtcIlwiIT1pJiZcIi5cIiE9aSYmMCE9cGFyc2VGbG9hdChpKSYmKHBhcnNlRmxvYXQoaSk8MD9pPVwiMC4wXCI6cGFyc2VGbG9hdChpKT4xP2k9XCIxLjBcIjppc05hTihwYXJzZUZsb2F0KGkpKSYmKGk9XCIwLjBcIikpLEE9PXQubmFtZSYmKEk9aSksXCJcIiE9aSYmXCIuXCIhPWkmJjAhPXBhcnNlRmxvYXQoaSk/KGk9cGFyc2VGbG9hdChpKS50b1N0cmluZygpLHQudGV4dD1pKTppPVwiMC4wXCI7dmFyIHI9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhrLmJhY2tncm91bmQpO0E9PXQubmFtZSYmWihcInJcIj09ZT9uZXcgcy5Db2xvcjMocGFyc2VGbG9hdChpKSxyLmcsci5iKTpcImdcIj09ZT9uZXcgcy5Db2xvcjMoci5yLHBhcnNlRmxvYXQoaSksci5iKTpuZXcgcy5Db2xvcjMoci5yLHIuZyxwYXJzZUZsb2F0KGkpKSx0Lm5hbWUpfX1mdW5jdGlvbiAkKCl7aWYoaS5zYXZlZENvbG9ycyYmaS5zYXZlZENvbG9yc1tfXSl7aWYoSyl2YXIgdD1cImJcIjtlbHNlIHQ9XCJcIjt2YXIgZT1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcIlN3YXRjaF9cIitfLHQpO2UuZm9udEZhbWlseT1cIkJhYnlsb25KU2dseXBoc1wiO3ZhciByPXMuQ29sb3IzLkZyb21IZXhTdHJpbmcoaS5zYXZlZENvbG9yc1tfXSksbj1yLnIrci5nK3IuYjtlLmNvbG9yPW4+WD9ZOlUsZS5mb250U2l6ZT1NYXRoLmZsb29yKC43KkQpLGUudGV4dEJsb2NrLnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixlLmhlaWdodD1lLndpZHRoPUQudG9TdHJpbmcoKStcInB4XCIsZS5iYWNrZ3JvdW5kPWkuc2F2ZWRDb2xvcnNbX10sZS50aGlja25lc3M9Mjt2YXIgbz1fO3JldHVybiBlLnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ZS50aGlja25lc3M9NH0sZS5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtlLnRoaWNrbmVzcz0zfSxlLnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe2UudGhpY2tuZXNzPTN9LGUucG9pbnRlck91dEFuaW1hdGlvbj1mdW5jdGlvbigpe2UudGhpY2tuZXNzPTJ9LGUub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3ZhciB0O0s/KHQ9byxpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzLnNwbGljZSh0LDEpLGkuc2F2ZWRDb2xvcnMmJjA9PWkuc2F2ZWRDb2xvcnMubGVuZ3RoJiYoaXQoITEpLEs9ITEpLGV0KFwiXCIsQnQpKTppLnNhdmVkQ29sb3JzJiZaKHMuQ29sb3IzLkZyb21IZXhTdHJpbmcoaS5zYXZlZENvbG9yc1tvXSksZS5uYW1lKX0pLGV9cmV0dXJuIG51bGx9ZnVuY3Rpb24gdHQodCl7aWYodm9pZCAwIT09dCYmKEs9dCksSyl7Zm9yKHZhciBlPTA7ZTxkLmNoaWxkcmVuLmxlbmd0aDtlKyspe2QuY2hpbGRyZW5bZV0udGV4dEJsb2NrLnRleHQ9XCJiXCJ9dm9pZCAwIT09aCYmKGgudGV4dEJsb2NrLnRleHQ9XCJEb25lXCIpfWVsc2V7Zm9yKGU9MDtlPGQuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7ZC5jaGlsZHJlbltlXS50ZXh0QmxvY2sudGV4dD1cIlwifXZvaWQgMCE9PWgmJihoLnRleHRCbG9jay50ZXh0PVwiRWRpdFwiKX19ZnVuY3Rpb24gZXQodCxlKXtpZihpLnNhdmVkQ29sb3JzKXtcIlwiIT10JiZpLnNhdmVkQ29sb3JzLnB1c2godCksXz0wLGQuY2xlYXJDb250cm9scygpO3ZhciByPU1hdGguY2VpbChpLnNhdmVkQ29sb3JzLmxlbmd0aC9pLm51bVN3YXRjaGVzUGVyTGluZSk7aWYoMD09cil2YXIgbj0wO2Vsc2Ugbj1yKzE7aWYoZC5yb3dDb3VudCE9cituKXtmb3IodmFyIG89ZC5yb3dDb3VudCxzPTA7czxvO3MrKylkLnJlbW92ZVJvd0RlZmluaXRpb24oMCk7Zm9yKHM9MDtzPHIrbjtzKyspcyUyP2QuYWRkUm93RGVmaW5pdGlvbihELCEwKTpkLmFkZFJvd0RlZmluaXRpb24oTCwhMCl9ZC5oZWlnaHQ9KEQqcituKkwpLnRvU3RyaW5nKCkrXCJweFwiO2Zvcih2YXIgYT0xLGg9MTthPHIrbjthKz0yLGgrKyl7aWYoaS5zYXZlZENvbG9ycy5sZW5ndGg+aCppLm51bVN3YXRjaGVzUGVyTGluZSl2YXIgbD1pLm51bVN3YXRjaGVzUGVyTGluZTtlbHNlIGw9aS5zYXZlZENvbG9ycy5sZW5ndGgtKGgtMSkqaS5udW1Td2F0Y2hlc1BlckxpbmU7Zm9yKHZhciB1PU1hdGgubWluKE1hdGgubWF4KGwsMCksaS5udW1Td2F0Y2hlc1BlckxpbmUpLGM9MCxmPTE7Yzx1O2MrKylpZighKGM+aS5udW1Td2F0Y2hlc1BlckxpbmUpKXt2YXIgcD0kKCk7bnVsbCE9cCYmKGQuYWRkQ29udHJvbChwLGEsZiksZis9MixfKyspfX1pLnNhdmVkQ29sb3JzLmxlbmd0aD49aS5zd2F0Y2hMaW1pdD9ydChlLCEwKTpydChlLCExKX19ZnVuY3Rpb24gaXQodCl7dD8oKGg9Ty5DcmVhdGVTaW1wbGVCdXR0b24oXCJidXRFZGl0XCIsXCJFZGl0XCIpKS53aWR0aD1sLGguaGVpZ2h0PXUsaC5sZWZ0PU1hdGguZmxvb3IoLjEqcGFyc2VJbnQobCkpLnRvU3RyaW5nKCkrXCJweFwiLGgudG9wPSgtMSpwYXJzZUZsb2F0KGgubGVmdCkpLnRvU3RyaW5nKCkrXCJweFwiLGgudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQk9UVE9NLGguaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsaC50aGlja25lc3M9MixoLmNvbG9yPVYsaC5mb250U2l6ZT1hLGguYmFja2dyb3VuZD1ILGgub25Qb2ludGVyRW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2guYmFja2dyb3VuZD1GfSksaC5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2guYmFja2dyb3VuZD1IfSksaC5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe2guYmFja2dyb3VuZD1qfSxoLnBvaW50ZXJVcEFuaW1hdGlvbj1mdW5jdGlvbigpe2guYmFja2dyb3VuZD1GfSxoLm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtLPSFLLHR0KCl9KSxtdC5hZGRDb250cm9sKGgsMSwwKSk6bXQucmVtb3ZlQ29udHJvbChoKX1mdW5jdGlvbiBydCh0LGUpe2U/KHQuY29sb3I9Vyx0LmJhY2tncm91bmQ9eik6KHQuY29sb3I9Vix0LmJhY2tncm91bmQ9SCl9ZnVuY3Rpb24gbnQoZSl7aS5zYXZlZENvbG9ycyYmaS5zYXZlZENvbG9ycy5sZW5ndGg+MD9yKHtzYXZlZENvbG9yczppLnNhdmVkQ29sb3JzLHBpY2tlZENvbG9yOmV9KTpyKHtwaWNrZWRDb2xvcjplfSksdC5yZW1vdmVDb250cm9sKG90KX12YXIgb3Q9bmV3IHg7aWYob3QubmFtZT1cIkRpYWxvZyBDb250YWluZXJcIixvdC53aWR0aD1pLnBpY2tlcldpZHRoLGkuc2F2ZWRDb2xvcnMpe290LmhlaWdodD1OO3ZhciBzdD1wYXJzZUludChpLnBpY2tlckhlaWdodCkvcGFyc2VJbnQoTik7b3QuYWRkUm93RGVmaW5pdGlvbihzdCwhMSksb3QuYWRkUm93RGVmaW5pdGlvbigxLXN0LCExKX1lbHNlIG90LmhlaWdodD1pLnBpY2tlckhlaWdodCxvdC5hZGRSb3dEZWZpbml0aW9uKDEsITEpO2lmKHQuYWRkQ29udHJvbChvdCksaS5zYXZlZENvbG9ycyl7KGQ9bmV3IHgpLm5hbWU9XCJTd2F0Y2ggRHJhd2VyXCIsZC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1AsZC5iYWNrZ3JvdW5kPUgsZC53aWR0aD1pLnBpY2tlcldpZHRoO3ZhciBhdD1pLnNhdmVkQ29sb3JzLmxlbmd0aC9pLm51bVN3YXRjaGVzUGVyTGluZTtpZigwPT1hdCl2YXIgaHQ9MDtlbHNlIGh0PWF0KzE7ZC5oZWlnaHQ9KEQqYXQraHQqTCkudG9TdHJpbmcoKStcInB4XCIsZC50b3A9TWF0aC5mbG9vciguMjUqRCkudG9TdHJpbmcoKStcInB4XCI7Zm9yKHZhciBsdD0wO2x0PDIqTWF0aC5jZWlsKGkuc2F2ZWRDb2xvcnMubGVuZ3RoL2kubnVtU3dhdGNoZXNQZXJMaW5lKSsxO2x0KyspbHQlMiE9MD9kLmFkZFJvd0RlZmluaXRpb24oRCwhMCk6ZC5hZGRSb3dEZWZpbml0aW9uKEwsITApO2ZvcihsdD0wO2x0PDIqaS5udW1Td2F0Y2hlc1BlckxpbmUrMTtsdCsrKWx0JTIhPTA/ZC5hZGRDb2x1bW5EZWZpbml0aW9uKEQsITApOmQuYWRkQ29sdW1uRGVmaW5pdGlvbihMLCEwKTtvdC5hZGRDb250cm9sKGQsMSwwKX12YXIgdXQ9bmV3IHg7dXQubmFtZT1cIlBpY2tlciBQYW5lbFwiLHV0LmhlaWdodD1pLnBpY2tlckhlaWdodDt2YXIgY3Q9cGFyc2VJbnQoaS5oZWFkZXJIZWlnaHQpL3BhcnNlSW50KGkucGlja2VySGVpZ2h0KSxfdD1bY3QsMS1jdF07dXQuYWRkUm93RGVmaW5pdGlvbihfdFswXSwhMSksdXQuYWRkUm93RGVmaW5pdGlvbihfdFsxXSwhMSksb3QuYWRkQ29udHJvbCh1dCwwLDApO3ZhciBkdD1uZXcgbTtkdC5uYW1lPVwiRGlhbG9ndWUgSGVhZGVyIEJhclwiLGR0LmJhY2tncm91bmQ9XCIjY2NjY2NjXCIsZHQudGhpY2tuZXNzPTAsdXQuYWRkQ29udHJvbChkdCwwLDApO3ZhciBmdD1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcImNsb3NlQnV0dG9uXCIsXCJhXCIpO2Z0LmZvbnRGYW1pbHk9XCJCYWJ5bG9uSlNnbHlwaHNcIjt2YXIgcHQ9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhkdC5iYWNrZ3JvdW5kKTtvPW5ldyBzLkNvbG9yMygxLXB0LnIsMS1wdC5nLDEtcHQuYiksZnQuY29sb3I9by50b0hleFN0cmluZygpLGZ0LmZvbnRTaXplPU1hdGguZmxvb3IoLjYqcGFyc2VJbnQoaS5oZWFkZXJIZWlnaHQpKSxmdC50ZXh0QmxvY2sudGV4dFZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixmdC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfUklHSFQsZnQuaGVpZ2h0PWZ0LndpZHRoPWkuaGVhZGVySGVpZ2h0LGZ0LmJhY2tncm91bmQ9ZHQuYmFja2dyb3VuZCxmdC50aGlja25lc3M9MCxmdC5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe30sZnQucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ZnQuYmFja2dyb3VuZD1kdC5iYWNrZ3JvdW5kfSxmdC5wb2ludGVyRW50ZXJBbmltYXRpb249ZnVuY3Rpb24oKXtmdC5jb2xvcj1kdC5iYWNrZ3JvdW5kLGZ0LmJhY2tncm91bmQ9XCJyZWRcIn0sZnQucG9pbnRlck91dEFuaW1hdGlvbj1mdW5jdGlvbigpe2Z0LmNvbG9yPW8udG9IZXhTdHJpbmcoKSxmdC5iYWNrZ3JvdW5kPWR0LmJhY2tncm91bmR9LGZ0Lm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtudChBdC5iYWNrZ3JvdW5kKX0pLHV0LmFkZENvbnRyb2woZnQsMCwwKTt2YXIgZ3Q9bmV3IHg7Z3QubmFtZT1cIkRpYWxvZ3VlIEJvZHlcIixndC5iYWNrZ3JvdW5kPUg7dmFyIGJ0PVsuNDM3NSwuNTYyNV07Z3QuYWRkUm93RGVmaW5pdGlvbigxLCExKSxndC5hZGRDb2x1bW5EZWZpbml0aW9uKGJ0WzBdLCExKSxndC5hZGRDb2x1bW5EZWZpbml0aW9uKGJ0WzFdLCExKSx1dC5hZGRDb250cm9sKGd0LDEsMCk7dmFyIG10PW5ldyB4O210Lm5hbWU9XCJQaWNrZXIgR3JpZFwiLG10LmFkZFJvd0RlZmluaXRpb24oLjg1LCExKSxtdC5hZGRSb3dEZWZpbml0aW9uKC4xNSwhMSksZ3QuYWRkQ29udHJvbChtdCwwLDApLChmPW5ldyBlKS5uYW1lPVwiR1VJIENvbG9yIFBpY2tlclwiLGkucGlja2VySGVpZ2h0PGkucGlja2VyV2lkdGg/Zi53aWR0aD0uODk6Zi5oZWlnaHQ9Ljg5LGYudmFsdWU9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhpLmxhc3RDb2xvciksZi5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSLGYudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLGYub25Qb2ludGVyRG93bk9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT1mLm5hbWUsST1cIlwiLHR0KCExKX0pLGYub25WYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtBPT1mLm5hbWUmJloodCxmLm5hbWUpfSksbXQuYWRkQ29udHJvbChmLDAsMCk7dmFyIHl0PW5ldyB4O3l0Lm5hbWU9XCJEaWFsb2d1ZSBSaWdodCBIYWxmXCIseXQuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQ7dmFyIHZ0PVsuNTE0LC40ODZdO3l0LmFkZFJvd0RlZmluaXRpb24odnRbMF0sITEpLHl0LmFkZFJvd0RlZmluaXRpb24odnRbMV0sITEpLGd0LmFkZENvbnRyb2woeXQsMSwxKTt2YXIgT3Q9bmV3IHg7T3QubmFtZT1cIlN3YXRjaGVzIGFuZCBCdXR0b25zXCI7dmFyIEN0PVsuNDE3LC41ODNdO090LmFkZFJvd0RlZmluaXRpb24oMSwhMSksT3QuYWRkQ29sdW1uRGVmaW5pdGlvbihDdFswXSwhMSksT3QuYWRkQ29sdW1uRGVmaW5pdGlvbihDdFsxXSwhMSkseXQuYWRkQ29udHJvbChPdCwwLDApO3ZhciB3dD1uZXcgeDt3dC5uYW1lPVwiTmV3IGFuZCBDdXJyZW50IFN3YXRjaGVzXCI7dmFyIFR0PVsuMDQsLjE2LC42NCwuMTZdO3d0LmFkZFJvd0RlZmluaXRpb24oVHRbMF0sITEpLHd0LmFkZFJvd0RlZmluaXRpb24oVHRbMV0sITEpLHd0LmFkZFJvd0RlZmluaXRpb24oVHRbMl0sITEpLHd0LmFkZFJvd0RlZmluaXRpb24oVHRbM10sITEpLE90LmFkZENvbnRyb2wod3QsMCwwKTt2YXIgeHQ9bmV3IHg7eHQubmFtZT1cIkFjdGl2ZSBTd2F0Y2hlc1wiLHh0LndpZHRoPS42Nyx4dC5hZGRSb3dEZWZpbml0aW9uKC41LCExKSx4dC5hZGRSb3dEZWZpbml0aW9uKC41LCExKSx3dC5hZGRDb250cm9sKHh0LDIsMCk7dmFyIE10PU1hdGguZmxvb3IocGFyc2VJbnQoaS5waWNrZXJXaWR0aCkqYnRbMV0qQ3RbMF0qLjExKSxQdD1NYXRoLmZsb29yKHBhcnNlSW50KGkucGlja2VySGVpZ2h0KSpfdFsxXSp2dFswXSpUdFsxXSouNSk7aWYoaS5waWNrZXJXaWR0aD5pLnBpY2tlckhlaWdodCl2YXIga3Q9UHQ7ZWxzZSBrdD1NdDt2YXIgSXQ9bmV3IHk7SXQudGV4dD1cIm5ld1wiLEl0Lm5hbWU9XCJOZXcgQ29sb3IgTGFiZWxcIixJdC5jb2xvcj1WLEl0LmZvbnRTaXplPWt0LHd0LmFkZENvbnRyb2woSXQsMSwwKSwoaz1uZXcgbSkubmFtZT1cIk5ldyBDb2xvciBTd2F0Y2hcIixrLmJhY2tncm91bmQ9aS5sYXN0Q29sb3Isay50aGlja25lc3M9MCx4dC5hZGRDb250cm9sKGssMCwwKTt2YXIgQXQ9Ty5DcmVhdGVTaW1wbGVCdXR0b24oXCJjdXJyZW50U3dhdGNoXCIsXCJcIik7QXQuYmFja2dyb3VuZD1pLmxhc3RDb2xvcixBdC50aGlja25lc3M9MCxBdC5vblBvaW50ZXJDbGlja09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7WihzLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKEF0LmJhY2tncm91bmQpLEF0Lm5hbWUpLHR0KCExKX0pLEF0LnBvaW50ZXJEb3duQW5pbWF0aW9uPWZ1bmN0aW9uKCl7fSxBdC5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXt9LEF0LnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe30sQXQucG9pbnRlck91dEFuaW1hdGlvbj1mdW5jdGlvbigpe30seHQuYWRkQ29udHJvbChBdCwxLDApO3ZhciBTdD1uZXcgbTtTdC5uYW1lPVwiU3dhdGNoIE91dGxpbmVcIixTdC53aWR0aD0uNjcsU3QudGhpY2tuZXNzPTIsU3QuY29sb3I9XCIjNDA0MDQwXCIsU3QuaXNIaXRUZXN0VmlzaWJsZT0hMSx3dC5hZGRDb250cm9sKFN0LDIsMCk7dmFyIEV0PW5ldyB5O0V0Lm5hbWU9XCJDdXJyZW50IENvbG9yIExhYmVsXCIsRXQudGV4dD1cImN1cnJlbnRcIixFdC5jb2xvcj1WLEV0LmZvbnRTaXplPWt0LHd0LmFkZENvbnRyb2woRXQsMywwKTt2YXIgTHQ9bmV3IHg7THQubmFtZT1cIkJ1dHRvbiBHcmlkXCIsTHQuaGVpZ2h0PS44O0x0LmFkZFJvd0RlZmluaXRpb24oMS8zLCExKSxMdC5hZGRSb3dEZWZpbml0aW9uKDEvMywhMSksTHQuYWRkUm93RGVmaW5pdGlvbigxLzMsITEpLE90LmFkZENvbnRyb2woTHQsMCwxKSxsPU1hdGguZmxvb3IocGFyc2VJbnQoaS5waWNrZXJXaWR0aCkqYnRbMV0qQ3RbMV0qLjY3KS50b1N0cmluZygpK1wicHhcIix1PU1hdGguZmxvb3IocGFyc2VJbnQoaS5waWNrZXJIZWlnaHQpKl90WzFdKnZ0WzBdKihwYXJzZUZsb2F0KEx0LmhlaWdodC50b1N0cmluZygpKS8xMDApKigxLzMpKi43KS50b1N0cmluZygpK1wicHhcIixhPXBhcnNlRmxvYXQobCk+cGFyc2VGbG9hdCh1KT9NYXRoLmZsb29yKC40NSpwYXJzZUZsb2F0KHUpKTpNYXRoLmZsb29yKC4xMSpwYXJzZUZsb2F0KGwpKTt2YXIgUnQ9Ty5DcmVhdGVTaW1wbGVCdXR0b24oXCJidXRPS1wiLFwiT0tcIik7UnQud2lkdGg9bCxSdC5oZWlnaHQ9dSxSdC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsUnQudGhpY2tuZXNzPTIsUnQuY29sb3I9VixSdC5mb250U2l6ZT1hLFJ0LmJhY2tncm91bmQ9SCxSdC5vblBvaW50ZXJFbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7UnQuYmFja2dyb3VuZD1GfSksUnQub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtSdC5iYWNrZ3JvdW5kPUh9KSxSdC5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe1J0LmJhY2tncm91bmQ9an0sUnQucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7UnQuYmFja2dyb3VuZD1GfSxSdC5vblBvaW50ZXJDbGlja09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7dHQoITEpLG50KGsuYmFja2dyb3VuZCl9KSxMdC5hZGRDb250cm9sKFJ0LDAsMCk7dmFyIER0PU8uQ3JlYXRlU2ltcGxlQnV0dG9uKFwiYnV0Q2FuY2VsXCIsXCJDYW5jZWxcIik7aWYoRHQud2lkdGg9bCxEdC5oZWlnaHQ9dSxEdC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsRHQudGhpY2tuZXNzPTIsRHQuY29sb3I9VixEdC5mb250U2l6ZT1hLER0LmJhY2tncm91bmQ9SCxEdC5vblBvaW50ZXJFbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7RHQuYmFja2dyb3VuZD1GfSksRHQub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtEdC5iYWNrZ3JvdW5kPUh9KSxEdC5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe0R0LmJhY2tncm91bmQ9an0sRHQucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7RHQuYmFja2dyb3VuZD1GfSxEdC5vblBvaW50ZXJDbGlja09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7dHQoITEpLG50KEF0LmJhY2tncm91bmQpfSksTHQuYWRkQ29udHJvbChEdCwxLDApLGkuc2F2ZWRDb2xvcnMpe3ZhciBCdD1PLkNyZWF0ZVNpbXBsZUJ1dHRvbihcImJ1dFNhdmVcIixcIlNhdmVcIik7QnQud2lkdGg9bCxCdC5oZWlnaHQ9dSxCdC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVIsQnQudGhpY2tuZXNzPTIsQnQuZm9udFNpemU9YSxpLnNhdmVkQ29sb3JzLmxlbmd0aDxpLnN3YXRjaExpbWl0PyhCdC5jb2xvcj1WLEJ0LmJhY2tncm91bmQ9SCk6cnQoQnQsITApLEJ0Lm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzLmxlbmd0aDxpLnN3YXRjaExpbWl0JiYoQnQuYmFja2dyb3VuZD1GKX0pLEJ0Lm9uUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7aS5zYXZlZENvbG9ycyYmaS5zYXZlZENvbG9ycy5sZW5ndGg8aS5zd2F0Y2hMaW1pdCYmKEJ0LmJhY2tncm91bmQ9SCl9KSxCdC5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe2kuc2F2ZWRDb2xvcnMmJmkuc2F2ZWRDb2xvcnMubGVuZ3RoPGkuc3dhdGNoTGltaXQmJihCdC5iYWNrZ3JvdW5kPWopfSxCdC5wb2ludGVyVXBBbmltYXRpb249ZnVuY3Rpb24oKXtpLnNhdmVkQ29sb3JzJiZpLnNhdmVkQ29sb3JzLmxlbmd0aDxpLnN3YXRjaExpbWl0JiYoQnQuYmFja2dyb3VuZD1GKX0sQnQub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2kuc2F2ZWRDb2xvcnMmJigwPT1pLnNhdmVkQ29sb3JzLmxlbmd0aCYmaXQoITApLGkuc2F2ZWRDb2xvcnMubGVuZ3RoPGkuc3dhdGNoTGltaXQmJmV0KGsuYmFja2dyb3VuZCxCdCksdHQoITEpKX0pLGkuc2F2ZWRDb2xvcnMubGVuZ3RoPjAmJml0KCEwKSxMdC5hZGRDb250cm9sKEJ0LDIsMCl9dmFyIE50PW5ldyB4O050Lm5hbWU9XCJEaWFsb2cgTG93ZXIgUmlnaHRcIixOdC5hZGRSb3dEZWZpbml0aW9uKC4wMiwhMSksTnQuYWRkUm93RGVmaW5pdGlvbiguNjMsITEpLE50LmFkZFJvd0RlZmluaXRpb24oLjIxLCExKSxOdC5hZGRSb3dEZWZpbml0aW9uKC4xNCwhMSkseXQuYWRkQ29udHJvbChOdCwxLDApLGM9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhpLmxhc3RDb2xvcik7dmFyIFZ0PW5ldyB4O1Z0Lm5hbWU9XCJSR0IgVmFsdWVzXCIsVnQud2lkdGg9LjgyLFZ0LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUixWdC5hZGRSb3dEZWZpbml0aW9uKDEvMywhMSksVnQuYWRkUm93RGVmaW5pdGlvbigxLzMsITEpLFZ0LmFkZFJvd0RlZmluaXRpb24oMS8zLCExKSxWdC5hZGRDb2x1bW5EZWZpbml0aW9uKC4xLCExKSxWdC5hZGRDb2x1bW5EZWZpbml0aW9uKC4yLCExKSxWdC5hZGRDb2x1bW5EZWZpbml0aW9uKC43LCExKSxOdC5hZGRDb250cm9sKFZ0LDEsMCk7Zm9yKGx0PTA7bHQ8cS5sZW5ndGg7bHQrKyl7KEh0PW5ldyB5KS50ZXh0PXFbbHRdLEh0LmNvbG9yPVYsSHQuZm9udFNpemU9YSxWdC5hZGRDb250cm9sKEh0LGx0LDApfShnPW5ldyBUKS53aWR0aD0uODMsZy5oZWlnaHQ9LjcyLGcubmFtZT1cInJJbnRGaWVsZFwiLGcuZm9udFNpemU9YSxnLnRleHQ9KDI1NSpjLnIpLnRvU3RyaW5nKCksZy5jb2xvcj1cIiNmMGYwZjBcIixnLmJhY2tncm91bmQ9XCIjNDU0NTQ1XCIsZy5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPWcubmFtZSxJPWcudGV4dCx0dCghMSl9KSxnLm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7XCJcIj09Zy50ZXh0JiYoZy50ZXh0PVwiMFwiKSxKKGcsXCJyXCIpLEE9PWcubmFtZSYmKEE9XCJcIil9KSxnLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9PWcubmFtZSYmSihnLFwiclwiKX0pLFZ0LmFkZENvbnRyb2woZywwLDEpLChiPW5ldyBUKS53aWR0aD0uODMsYi5oZWlnaHQ9LjcyLGIubmFtZT1cImdJbnRGaWVsZFwiLGIuZm9udFNpemU9YSxiLnRleHQ9KDI1NSpjLmcpLnRvU3RyaW5nKCksYi5jb2xvcj1cIiNmMGYwZjBcIixiLmJhY2tncm91bmQ9XCIjNDU0NTQ1XCIsYi5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPWIubmFtZSxJPWIudGV4dCx0dCghMSl9KSxiLm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7XCJcIj09Yi50ZXh0JiYoYi50ZXh0PVwiMFwiKSxKKGIsXCJnXCIpLEE9PWIubmFtZSYmKEE9XCJcIil9KSxiLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9PWIubmFtZSYmSihiLFwiZ1wiKX0pLFZ0LmFkZENvbnRyb2woYiwxLDEpLCh2PW5ldyBUKS53aWR0aD0uODMsdi5oZWlnaHQ9LjcyLHYubmFtZT1cImJJbnRGaWVsZFwiLHYuZm9udFNpemU9YSx2LnRleHQ9KDI1NSpjLmIpLnRvU3RyaW5nKCksdi5jb2xvcj1cIiNmMGYwZjBcIix2LmJhY2tncm91bmQ9XCIjNDU0NTQ1XCIsdi5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPXYubmFtZSxJPXYudGV4dCx0dCghMSl9KSx2Lm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7XCJcIj09di50ZXh0JiYodi50ZXh0PVwiMFwiKSxKKHYsXCJiXCIpLEE9PXYubmFtZSYmKEE9XCJcIil9KSx2Lm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9PXYubmFtZSYmSih2LFwiYlwiKX0pLFZ0LmFkZENvbnRyb2wodiwyLDEpLChDPW5ldyBUKS53aWR0aD0uOTUsQy5oZWlnaHQ9LjcyLEMubmFtZT1cInJEZWNGaWVsZFwiLEMuZm9udFNpemU9YSxDLnRleHQ9Yy5yLnRvU3RyaW5nKCksQy5jb2xvcj1cIiNmMGYwZjBcIixDLmJhY2tncm91bmQ9XCIjNDU0NTQ1XCIsQy5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPUMubmFtZSxJPUMudGV4dCx0dCghMSl9KSxDLm9uQmx1ck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7MCE9cGFyc2VGbG9hdChDLnRleHQpJiZcIlwiIT1DLnRleHR8fChDLnRleHQ9XCIwXCIsUShDLFwiclwiKSksQT09Qy5uYW1lJiYoQT1cIlwiKX0pLEMub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT09Qy5uYW1lJiZRKEMsXCJyXCIpfSksVnQuYWRkQ29udHJvbChDLDAsMiksKHc9bmV3IFQpLndpZHRoPS45NSx3LmhlaWdodD0uNzIsdy5uYW1lPVwiZ0RlY0ZpZWxkXCIsdy5mb250U2l6ZT1hLHcudGV4dD1jLmcudG9TdHJpbmcoKSx3LmNvbG9yPVwiI2YwZjBmMFwiLHcuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIix3Lm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9dy5uYW1lLEk9dy50ZXh0LHR0KCExKX0pLHcub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXswIT1wYXJzZUZsb2F0KHcudGV4dCkmJlwiXCIhPXcudGV4dHx8KHcudGV4dD1cIjBcIixRKHcsXCJnXCIpKSxBPT13Lm5hbWUmJihBPVwiXCIpfSksdy5vblRleHRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtBPT13Lm5hbWUmJlEodyxcImdcIil9KSxWdC5hZGRDb250cm9sKHcsMSwyKSwoTT1uZXcgVCkud2lkdGg9Ljk1LE0uaGVpZ2h0PS43MixNLm5hbWU9XCJiRGVjRmllbGRcIixNLmZvbnRTaXplPWEsTS50ZXh0PWMuYi50b1N0cmluZygpLE0uY29sb3I9XCIjZjBmMGYwXCIsTS5iYWNrZ3JvdW5kPVwiIzQ1NDU0NVwiLE0ub25Gb2N1c09ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7QT1NLm5hbWUsST1NLnRleHQsdHQoITEpfSksTS5vbkJsdXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpezAhPXBhcnNlRmxvYXQoTS50ZXh0KSYmXCJcIiE9TS50ZXh0fHwoTS50ZXh0PVwiMFwiLFEoTSxcImJcIikpLEE9PU0ubmFtZSYmKEE9XCJcIil9KSxNLm9uVGV4dENoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9PU0ubmFtZSYmUShNLFwiYlwiKX0pLFZ0LmFkZENvbnRyb2woTSwyLDIpO3ZhciBIdCxGdD1uZXcgeDtGdC5uYW1lPVwiSGV4IFZhbHVlXCIsRnQud2lkdGg9LjgyLEZ0LmFkZFJvd0RlZmluaXRpb24oMSwhMSksRnQuYWRkQ29sdW1uRGVmaW5pdGlvbiguMSwhMSksRnQuYWRkQ29sdW1uRGVmaW5pdGlvbiguOSwhMSksTnQuYWRkQ29udHJvbChGdCwyLDApLChIdD1uZXcgeSkudGV4dD1cIiNcIixIdC5jb2xvcj1WLEh0LmZvbnRTaXplPWEsRnQuYWRkQ29udHJvbChIdCwwLDApLChQPW5ldyBUKS53aWR0aD0uOTYsUC5oZWlnaHQ9LjcyLFAubmFtZT1cImhleEZpZWxkXCIsUC5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfQ0VOVEVSLFAuZm9udFNpemU9YTt2YXIganQ9aS5sYXN0Q29sb3Iuc3BsaXQoXCIjXCIpO1AudGV4dD1qdFsxXSxQLmNvbG9yPVwiI2YwZjBmMFwiLFAuYmFja2dyb3VuZD1cIiM0NTQ1NDVcIixQLm9uRm9jdXNPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe0E9UC5uYW1lLEk9UC50ZXh0LHR0KCExKX0pLFAub25CbHVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtpZigzPT1QLnRleHQubGVuZ3RoKXt2YXIgdD1QLnRleHQuc3BsaXQoXCJcIik7UC50ZXh0PXRbMF0rdFswXSt0WzFdK3RbMV0rdFsyXSt0WzJdfVwiXCI9PVAudGV4dCYmKFAudGV4dD1cIjAwMDAwMFwiLFoocy5Db2xvcjMuRnJvbUhleFN0cmluZyhQLnRleHQpLFwiYlwiKSksQT09UC5uYW1lJiYoQT1cIlwiKX0pLFAub25UZXh0Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7dmFyIHQ9UC50ZXh0LGU9L1teMC05QS1GXS9pLnRlc3QodCk7aWYoKFAudGV4dC5sZW5ndGg+Nnx8ZSkmJkE9PVAubmFtZSlQLnRleHQ9STtlbHNle2lmKFAudGV4dC5sZW5ndGg8Nilmb3IodmFyIGk9Ni1QLnRleHQubGVuZ3RoLHI9MDtyPGk7cisrKXQ9XCIwXCIrdDtpZigzPT1QLnRleHQubGVuZ3RoKXt2YXIgbj1QLnRleHQuc3BsaXQoXCJcIik7dD1uWzBdK25bMF0rblsxXStuWzFdK25bMl0rblsyXX10PVwiI1wiK3QsQT09UC5uYW1lJiYoST1QLnRleHQsWihzLkNvbG9yMy5Gcm9tSGV4U3RyaW5nKHQpLFAubmFtZSkpfX0pLEZ0LmFkZENvbnRyb2woUCwwLDEpLGkuc2F2ZWRDb2xvcnMmJmkuc2F2ZWRDb2xvcnMubGVuZ3RoPjAmJmV0KFwiXCIsQnQpfSl9LGUuX0Vwc2lsb249MWUtNixlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuQ29sb3JQaWNrZXJcIl09TTt2YXIgUD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl90aGlja25lc3M9MSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGhpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aGlja25lc3MhPT10JiYodGhpcy5fdGhpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJFbGxpcHNlXCJ9LGUucHJvdG90eXBlLl9sb2NhbERyYXc9ZnVuY3Rpb24odCl7dC5zYXZlKCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSxwLmRyYXdFbGxpcHNlKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzIsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMi10aGlzLl90aGlja25lc3MvMix0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQvMi10aGlzLl90aGlja25lc3MvMix0KSx0aGlzLl9iYWNrZ3JvdW5kJiYodC5maWxsU3R5bGU9dGhpcy5fYmFja2dyb3VuZCx0LmZpbGwoKSksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHRoaXMuX3RoaWNrbmVzcyYmKHRoaXMuY29sb3ImJih0LnN0cm9rZVN0eWxlPXRoaXMuY29sb3IpLHQubGluZVdpZHRoPXRoaXMuX3RoaWNrbmVzcyx0LnN0cm9rZSgpKSx0LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nLmNhbGwodGhpcyxlLGkpLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi53aWR0aC09Mip0aGlzLl90aGlja25lc3MsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmhlaWdodC09Mip0aGlzLl90aGlja25lc3MsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmxlZnQrPXRoaXMuX3RoaWNrbmVzcyx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4udG9wKz10aGlzLl90aGlja25lc3N9LGUucHJvdG90eXBlLl9jbGlwRm9yQ2hpbGRyZW49ZnVuY3Rpb24odCl7cC5kcmF3RWxsaXBzZSh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzIsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzIsdCksdC5jbGlwKCl9LGV9KGcpO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5FbGxpcHNlXCJdPVA7dmFyIGs9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5fYmVmb3JlUmVuZGVyVGV4dD1mdW5jdGlvbih0KXtmb3IodmFyIGU9XCJcIixpPTA7aTx0Lmxlbmd0aDtpKyspZSs9XCLigKJcIjtyZXR1cm4gZX0sZX0oVCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLklucHV0UGFzc3dvcmRcIl09azt2YXIgST1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl9saW5lV2lkdGg9MSxpLl94MT1uZXcgYSgwKSxpLl95MT1uZXcgYSgwKSxpLl94Mj1uZXcgYSgwKSxpLl95Mj1uZXcgYSgwKSxpLl9kYXNoPW5ldyBBcnJheSxpLl9hdXRvbWF0aWNTaXplPSEwLGkuaXNIaXRUZXN0VmlzaWJsZT0hMSxpLl9ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxpLl92ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1AsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRhc2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rhc2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kYXNoIT09dCYmKHRoaXMuX2Rhc2g9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb25uZWN0ZWRDb250cm9sXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0ZWRDb250cm9sfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9jb25uZWN0ZWRDb250cm9sIT09dCYmKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xEaXJ0eU9ic2VydmVyJiZ0aGlzLl9jb25uZWN0ZWRDb250cm9sJiYodGhpcy5fY29ubmVjdGVkQ29udHJvbC5vbkRpcnR5T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fY29ubmVjdGVkQ29udHJvbERpcnR5T2JzZXJ2ZXIpLHRoaXMuX2Nvbm5lY3RlZENvbnRyb2xEaXJ0eU9ic2VydmVyPW51bGwpLHQmJih0aGlzLl9jb25uZWN0ZWRDb250cm9sRGlydHlPYnNlcnZlcj10Lm9uRGlydHlPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3JldHVybiBlLl9tYXJrQXNEaXJ0eSgpfSkpLHRoaXMuX2Nvbm5lY3RlZENvbnRyb2w9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ4MVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feDEudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl94MS50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3gxLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwieTFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3kxLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feTEudG9TdHJpbmcodGhpcy5faG9zdCkhPT10JiZ0aGlzLl95MS5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIngyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl94Mi50b1N0cmluZyh0aGlzLl9ob3N0KX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3gyLnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5feDIuZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ5MlwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feTIudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl95Mi50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3kyLmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibGluZVdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lV2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9saW5lV2lkdGghPT10JiYodGhpcy5fbGluZVdpZHRoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaG9yaXpvbnRhbEFsaWdubWVudFwiLHtzZXQ6ZnVuY3Rpb24odCl7fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZlcnRpY2FsQWxpZ25tZW50XCIse3NldDpmdW5jdGlvbih0KXt9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiX2VmZmVjdGl2ZVgyXCIse2dldDpmdW5jdGlvbigpe3JldHVybih0aGlzLl9jb25uZWN0ZWRDb250cm9sP3RoaXMuX2Nvbm5lY3RlZENvbnRyb2wuY2VudGVyWDowKSt0aGlzLl94Mi5nZXRWYWx1ZSh0aGlzLl9ob3N0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfZWZmZWN0aXZlWTJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX2Nvbm5lY3RlZENvbnRyb2w/dGhpcy5fY29ubmVjdGVkQ29udHJvbC5jZW50ZXJZOjApK3RoaXMuX3kyLmdldFZhbHVlKHRoaXMuX2hvc3QpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiTGluZVwifSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpLHRoaXMuX2FwcGx5U3RhdGVzKHQpLHQuc3Ryb2tlU3R5bGU9dGhpcy5jb2xvcix0LmxpbmVXaWR0aD10aGlzLl9saW5lV2lkdGgsdC5zZXRMaW5lRGFzaCh0aGlzLl9kYXNoKSx0LmJlZ2luUGF0aCgpLHQubW92ZVRvKHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUubGVmdCt0aGlzLl94MS5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLnRvcCt0aGlzLl95MS5nZXRWYWx1ZSh0aGlzLl9ob3N0KSksdC5saW5lVG8odGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2VmZmVjdGl2ZVgyLHRoaXMuX2NhY2hlZFBhcmVudE1lYXN1cmUudG9wK3RoaXMuX2VmZmVjdGl2ZVkyKSx0LnN0cm9rZSgpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fbWVhc3VyZT1mdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoPU1hdGguYWJzKHRoaXMuX3gxLmdldFZhbHVlKHRoaXMuX2hvc3QpLXRoaXMuX2VmZmVjdGl2ZVgyKSt0aGlzLl9saW5lV2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PU1hdGguYWJzKHRoaXMuX3kxLmdldFZhbHVlKHRoaXMuX2hvc3QpLXRoaXMuX2VmZmVjdGl2ZVkyKSt0aGlzLl9saW5lV2lkdGh9LGUucHJvdG90eXBlLl9jb21wdXRlQWxpZ25tZW50PWZ1bmN0aW9uKHQsZSl7dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdD10LmxlZnQrTWF0aC5taW4odGhpcy5feDEuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fZWZmZWN0aXZlWDIpLXRoaXMuX2xpbmVXaWR0aC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcD10LnRvcCtNYXRoLm1pbih0aGlzLl95MS5nZXRWYWx1ZSh0aGlzLl9ob3N0KSx0aGlzLl9lZmZlY3RpdmVZMiktdGhpcy5fbGluZVdpZHRoLzJ9LGUucHJvdG90eXBlLm1vdmVUb1ZlY3RvcjM9ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9ob3N0JiZ0aGlzLnBhcmVudD09PXRoaXMuX2hvc3QuX3Jvb3RDb250YWluZXIpe3ZhciByPXRoaXMuX2hvc3QuX2dldEdsb2JhbFZpZXdwb3J0KGUpLG49cy5WZWN0b3IzLlByb2plY3QodCxzLk1hdHJpeC5JZGVudGl0eSgpLGUuZ2V0VHJhbnNmb3JtTWF0cml4KCkscik7dGhpcy5fbW92ZVRvUHJvamVjdGVkUG9zaXRpb24obixpKSxuLno8MHx8bi56PjE/dGhpcy5ub3RSZW5kZXJhYmxlPSEwOnRoaXMubm90UmVuZGVyYWJsZT0hMX1lbHNlIHMuVG9vbHMuRXJyb3IoXCJDYW5ub3QgbW92ZSBhIGNvbnRyb2wgdG8gYSB2ZWN0b3IzIGlmIHRoZSBjb250cm9sIGlzIG5vdCBhdCByb290IGxldmVsXCIpfSxlLnByb3RvdHlwZS5fbW92ZVRvUHJvamVjdGVkUG9zaXRpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMSk7dmFyIGk9dC54K3RoaXMuX2xpbmtPZmZzZXRYLmdldFZhbHVlKHRoaXMuX2hvc3QpK1wicHhcIixyPXQueSt0aGlzLl9saW5rT2Zmc2V0WS5nZXRWYWx1ZSh0aGlzLl9ob3N0KStcInB4XCI7ZT8odGhpcy54Mj1pLHRoaXMueTI9cix0aGlzLl94Mi5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITAsdGhpcy5feTIuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwKToodGhpcy54MT1pLHRoaXMueTE9cix0aGlzLl94MS5pZ25vcmVBZGFwdGl2ZVNjYWxpbmc9ITAsdGhpcy5feTEuaWdub3JlQWRhcHRpdmVTY2FsaW5nPSEwKX0sZX0ocCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkxpbmVcIl09STt2YXIgQT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5fbXVsdGlMaW5lPXQsdGhpcy5feD1uZXcgYSgwKSx0aGlzLl95PW5ldyBhKDApLHRoaXMuX3BvaW50PW5ldyBzLlZlY3RvcjIoMCwwKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwieFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feC50b1N0cmluZyh0aGlzLl9tdWx0aUxpbmUuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feC50b1N0cmluZyh0aGlzLl9tdWx0aUxpbmUuX2hvc3QpIT09dCYmdGhpcy5feC5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tdWx0aUxpbmUuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwieVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feS50b1N0cmluZyh0aGlzLl9tdWx0aUxpbmUuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5feS50b1N0cmluZyh0aGlzLl9tdWx0aUxpbmUuX2hvc3QpIT09dCYmdGhpcy5feS5mcm9tU3RyaW5nKHQpJiZ0aGlzLl9tdWx0aUxpbmUuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiY29udHJvbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udHJvbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRyb2whPT10JiYodGhpcy5fY29udHJvbCYmdGhpcy5fY29udHJvbE9ic2VydmVyJiYodGhpcy5fY29udHJvbC5vbkRpcnR5T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fY29udHJvbE9ic2VydmVyKSx0aGlzLl9jb250cm9sT2JzZXJ2ZXI9bnVsbCksdGhpcy5fY29udHJvbD10LHRoaXMuX2NvbnRyb2wmJih0aGlzLl9jb250cm9sT2JzZXJ2ZXI9dGhpcy5fY29udHJvbC5vbkRpcnR5T2JzZXJ2YWJsZS5hZGQodGhpcy5fbXVsdGlMaW5lLm9uUG9pbnRVcGRhdGUpKSx0aGlzLl9tdWx0aUxpbmUuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm1lc2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tZXNoIT09dCYmKHRoaXMuX21lc2gmJnRoaXMuX21lc2hPYnNlcnZlciYmdGhpcy5fbWVzaC5nZXRTY2VuZSgpLm9uQWZ0ZXJDYW1lcmFSZW5kZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9tZXNoT2JzZXJ2ZXIpLHRoaXMuX21lc2g9dCx0aGlzLl9tZXNoJiYodGhpcy5fbWVzaE9ic2VydmVyPXRoaXMuX21lc2guZ2V0U2NlbmUoKS5vbkFmdGVyQ2FtZXJhUmVuZGVyT2JzZXJ2YWJsZS5hZGQodGhpcy5fbXVsdGlMaW5lLm9uUG9pbnRVcGRhdGUpKSx0aGlzLl9tdWx0aUxpbmUuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlc2V0TGlua3M9ZnVuY3Rpb24oKXt0aGlzLmNvbnRyb2w9bnVsbCx0aGlzLm1lc2g9bnVsbH0sdC5wcm90b3R5cGUudHJhbnNsYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvaW50PXRoaXMuX3RyYW5zbGF0ZVBvaW50KCksdGhpcy5fcG9pbnR9LHQucHJvdG90eXBlLl90cmFuc2xhdGVQb2ludD1mdW5jdGlvbigpe2lmKG51bGwhPXRoaXMuX21lc2gpcmV0dXJuIHRoaXMuX211bHRpTGluZS5faG9zdC5nZXRQcm9qZWN0ZWRQb3NpdGlvbih0aGlzLl9tZXNoLmdldEJvdW5kaW5nSW5mbygpLmJvdW5kaW5nU3BoZXJlLmNlbnRlcix0aGlzLl9tZXNoLmdldFdvcmxkTWF0cml4KCkpO2lmKG51bGwhPXRoaXMuX2NvbnRyb2wpcmV0dXJuIG5ldyBzLlZlY3RvcjIodGhpcy5fY29udHJvbC5jZW50ZXJYLHRoaXMuX2NvbnRyb2wuY2VudGVyWSk7dmFyIHQ9dGhpcy5fbXVsdGlMaW5lLl9ob3N0LGU9dGhpcy5feC5nZXRWYWx1ZUluUGl4ZWwodCxOdW1iZXIodC5fY2FudmFzLndpZHRoKSksaT10aGlzLl95LmdldFZhbHVlSW5QaXhlbCh0LE51bWJlcih0Ll9jYW52YXMuaGVpZ2h0KSk7cmV0dXJuIG5ldyBzLlZlY3RvcjIoZSxpKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMucmVzZXRMaW5rcygpfSx0fSgpLFM9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fbGluZVdpZHRoPTEsaS5vblBvaW50VXBkYXRlPWZ1bmN0aW9uKCl7aS5fbWFya0FzRGlydHkoKX0saS5fYXV0b21hdGljU2l6ZT0hMCxpLmlzSGl0VGVzdFZpc2libGU9ITEsaS5faG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsaS5fdmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLGkuX2Rhc2g9W10saS5fcG9pbnRzPVtdLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkYXNoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXNofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGFzaCE9PXQmJih0aGlzLl9kYXNoPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0QXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BvaW50c1t0XXx8KHRoaXMuX3BvaW50c1t0XT1uZXcgQSh0aGlzKSksdGhpcy5fcG9pbnRzW3RdfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWVbaV09YXJndW1lbnRzW2ldO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5wdXNoKGUpfSl9LGUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRBdCh0aGlzLl9wb2ludHMubGVuZ3RoKTtyZXR1cm4gbnVsbD09dD9lOih0IGluc3RhbmNlb2Ygcy5BYnN0cmFjdE1lc2g/ZS5tZXNoPXQ6dCBpbnN0YW5jZW9mIHA/ZS5jb250cm9sPXQ6bnVsbCE9dC54JiZudWxsIT10LnkmJihlLng9dC54LGUueT10LnkpLGUpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU7aWYodCBpbnN0YW5jZW9mIEEpe2lmKC0xPT09KGU9dGhpcy5fcG9pbnRzLmluZGV4T2YodCkpKXJldHVybn1lbHNlIGU9dDt2YXIgaT10aGlzLl9wb2ludHNbZV07aSYmKGkuZGlzcG9zZSgpLHRoaXMuX3BvaW50cy5zcGxpY2UoZSwxKSl9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLl9wb2ludHMubGVuZ3RoPjA7KXRoaXMucmVtb3ZlKHRoaXMuX3BvaW50cy5sZW5ndGgtMSl9LGUucHJvdG90eXBlLnJlc2V0TGlua3M9ZnVuY3Rpb24oKXt0aGlzLl9wb2ludHMuZm9yRWFjaChmdW5jdGlvbih0KXtudWxsIT10JiZ0LnJlc2V0TGlua3MoKX0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsaW5lV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xpbmVXaWR0aCE9PXQmJih0aGlzLl9saW5lV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJob3Jpem9udGFsQWxpZ25tZW50XCIse3NldDpmdW5jdGlvbih0KXt9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmVydGljYWxBbGlnbm1lbnRcIix7c2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpTGluZVwifSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0LGUpe3Quc2F2ZSgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSksdGhpcy5fYXBwbHlTdGF0ZXModCksdC5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHQubGluZVdpZHRoPXRoaXMuX2xpbmVXaWR0aCx0LnNldExpbmVEYXNoKHRoaXMuX2Rhc2gpLHQuYmVnaW5QYXRoKCk7dmFyIGk9ITA7dGhpcy5fcG9pbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmKGk/KHQubW92ZVRvKGUuX3BvaW50LngsZS5fcG9pbnQueSksaT0hMSk6dC5saW5lVG8oZS5fcG9pbnQueCxlLl9wb2ludC55KSl9KSx0LnN0cm9rZSgpLHQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fYWRkaXRpb25hbFByb2Nlc3Npbmc9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3RoaXMuX21pblg9bnVsbCx0aGlzLl9taW5ZPW51bGwsdGhpcy5fbWF4WD1udWxsLHRoaXMuX21heFk9bnVsbCx0aGlzLl9wb2ludHMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3QmJih0LnRyYW5zbGF0ZSgpLChudWxsPT1pLl9taW5YfHx0Ll9wb2ludC54PGkuX21pblgpJiYoaS5fbWluWD10Ll9wb2ludC54KSwobnVsbD09aS5fbWluWXx8dC5fcG9pbnQueTxpLl9taW5ZKSYmKGkuX21pblk9dC5fcG9pbnQueSksKG51bGw9PWkuX21heFh8fHQuX3BvaW50Lng+aS5fbWF4WCkmJihpLl9tYXhYPXQuX3BvaW50LngpLChudWxsPT1pLl9tYXhZfHx0Ll9wb2ludC55PmkuX21heFkpJiYoaS5fbWF4WT10Ll9wb2ludC55KSl9KSxudWxsPT10aGlzLl9taW5YJiYodGhpcy5fbWluWD0wKSxudWxsPT10aGlzLl9taW5ZJiYodGhpcy5fbWluWT0wKSxudWxsPT10aGlzLl9tYXhYJiYodGhpcy5fbWF4WD0wKSxudWxsPT10aGlzLl9tYXhZJiYodGhpcy5fbWF4WT0wKX0sZS5wcm90b3R5cGUuX21lYXN1cmU9ZnVuY3Rpb24oKXtudWxsIT10aGlzLl9taW5YJiZudWxsIT10aGlzLl9tYXhYJiZudWxsIT10aGlzLl9taW5ZJiZudWxsIT10aGlzLl9tYXhZJiYodGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg9TWF0aC5hYnModGhpcy5fbWF4WC10aGlzLl9taW5YKSt0aGlzLl9saW5lV2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0PU1hdGguYWJzKHRoaXMuX21heFktdGhpcy5fbWluWSkrdGhpcy5fbGluZVdpZHRoKX0sZS5wcm90b3R5cGUuX2NvbXB1dGVBbGlnbm1lbnQ9ZnVuY3Rpb24odCxlKXtudWxsIT10aGlzLl9taW5YJiZudWxsIT10aGlzLl9taW5ZJiYodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdD10aGlzLl9taW5YLXRoaXMuX2xpbmVXaWR0aC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcD10aGlzLl9taW5ZLXRoaXMuX2xpbmVXaWR0aC8yKX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMucmVzZXQoKSx0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LGV9KHApO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5NdWx0aUxpbmVcIl09Uzt2YXIgRT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl9pc0NoZWNrZWQ9ITEsaS5fYmFja2dyb3VuZD1cImJsYWNrXCIsaS5fY2hlY2tTaXplUmF0aW89LjgsaS5fdGhpY2tuZXNzPTEsaS5ncm91cD1cIlwiLGkub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLGkuaXNQb2ludGVyQmxvY2tlcj0hMCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGhpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aGlja25lc3MhPT10JiYodGhpcy5fdGhpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hlY2tTaXplUmF0aW9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrU2l6ZVJhdGlvfSxzZXQ6ZnVuY3Rpb24odCl7dD1NYXRoLm1heChNYXRoLm1pbigxLHQpLDApLHRoaXMuX2NoZWNrU2l6ZVJhdGlvIT09dCYmKHRoaXMuX2NoZWNrU2l6ZVJhdGlvPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tncm91bmQhPT10JiYodGhpcy5fYmFja2dyb3VuZD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzQ2hlY2tlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDaGVja2VkfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9pc0NoZWNrZWQhPT10JiYodGhpcy5faXNDaGVja2VkPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLm9uSXNDaGVja2VkQ2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHQpLHRoaXMuX2lzQ2hlY2tlZCYmdGhpcy5faG9zdCYmdGhpcy5faG9zdC5leGVjdXRlT25BbGxDb250cm9scyhmdW5jdGlvbih0KXtpZih0IT09ZSYmdm9pZCAwIT09dC5ncm91cCl7dmFyIGk9dDtpLmdyb3VwPT09ZS5ncm91cCYmKGkuaXNDaGVja2VkPSExKX19KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJSYWRpb0J1dHRvblwifSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KTt2YXIgZT10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC10aGlzLl90aGlja25lc3MsaT10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtdGhpcy5fdGhpY2tuZXNzO2lmKCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Q29sb3I9dGhpcy5zaGFkb3dDb2xvcix0LnNoYWRvd0JsdXI9dGhpcy5zaGFkb3dCbHVyLHQuc2hhZG93T2Zmc2V0WD10aGlzLnNoYWRvd09mZnNldFgsdC5zaGFkb3dPZmZzZXRZPXRoaXMuc2hhZG93T2Zmc2V0WSkscC5kcmF3RWxsaXBzZSh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzIsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLzItdGhpcy5fdGhpY2tuZXNzLzIsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzItdGhpcy5fdGhpY2tuZXNzLzIsdCksdC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuX2JhY2tncm91bmQ6dGhpcy5fZGlzYWJsZWRDb2xvcix0LmZpbGwoKSwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0JsdXI9MCx0LnNoYWRvd09mZnNldFg9MCx0LnNoYWRvd09mZnNldFk9MCksdC5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHQubGluZVdpZHRoPXRoaXMuX3RoaWNrbmVzcyx0LnN0cm9rZSgpLHRoaXMuX2lzQ2hlY2tlZCl7dC5maWxsU3R5bGU9dGhpcy5faXNFbmFibGVkP3RoaXMuY29sb3I6dGhpcy5fZGlzYWJsZWRDb2xvcjt2YXIgcj1lKnRoaXMuX2NoZWNrU2l6ZVJhdGlvLG49aSp0aGlzLl9jaGVja1NpemVSYXRpbztwLmRyYXdFbGxpcHNlKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgvMix0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LzIsci8yLXRoaXMuX3RoaWNrbmVzcy8yLG4vMi10aGlzLl90aGlja25lc3MvMix0KSx0LmZpbGwoKX10LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlckRvd249ZnVuY3Rpb24oZSxpLHIsbil7cmV0dXJuISF0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bi5jYWxsKHRoaXMsZSxpLHIsbikmJih0aGlzLmlzQ2hlY2tlZHx8KHRoaXMuaXNDaGVja2VkPSEwKSwhMCl9LGUuQWRkUmFkaW9CdXR0b25XaXRoSGVhZGVyPWZ1bmN0aW9uKHQsaSxyLG4pe3ZhciBvPW5ldyBDO28uaXNWZXJ0aWNhbD0hMSxvLmhlaWdodD1cIjMwcHhcIjt2YXIgcz1uZXcgZTtzLndpZHRoPVwiMjBweFwiLHMuaGVpZ2h0PVwiMjBweFwiLHMuaXNDaGVja2VkPXIscy5jb2xvcj1cImdyZWVuXCIscy5ncm91cD1pLHMub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7cmV0dXJuIG4ocyx0KX0pLG8uYWRkQ29udHJvbChzKTt2YXIgYT1uZXcgeTtyZXR1cm4gYS50ZXh0PXQsYS53aWR0aD1cIjE4MHB4XCIsYS5wYWRkaW5nTGVmdD1cIjVweFwiLGEudGV4dEhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULGEuY29sb3I9XCJ3aGl0ZVwiLG8uYWRkQ29udHJvbChhKSxvfSxlfShwKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuUmFkaW9CdXR0b25cIl09RTt2YXIgTD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLm5hbWU9ZSxpLl90aHVtYldpZHRoPW5ldyBhKDIwLGEuVU5JVE1PREVfUElYRUwsITEpLGkuX21pbmltdW09MCxpLl9tYXhpbXVtPTEwMCxpLl92YWx1ZT01MCxpLl9pc1ZlcnRpY2FsPSExLGkuX2Jhck9mZnNldD1uZXcgYSg1LGEuVU5JVE1PREVfUElYRUwsITEpLGkuX2lzVGh1bWJDbGFtcGVkPSExLGkuX2Rpc3BsYXlUaHVtYj0hMCxpLl9zdGVwPTAsaS5fbGFzdFBvaW50ZXJEb3duSUQ9LTEsaS5fZWZmZWN0aXZlQmFyT2Zmc2V0PTAsaS5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxpLl9wb2ludGVySXNEb3duPSExLGkuaXNQb2ludGVyQmxvY2tlcj0hMCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzcGxheVRodW1iXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNwbGF5VGh1bWJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNwbGF5VGh1bWIhPT10JiYodGhpcy5fZGlzcGxheVRodW1iPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3RlcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RlcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0ZXAhPT10JiYodGhpcy5fc3RlcD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhck9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFyT2Zmc2V0LnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFyT2Zmc2V0LnRvU3RyaW5nKHRoaXMuX2hvc3QpIT09dCYmdGhpcy5fYmFyT2Zmc2V0LmZyb21TdHJpbmcodCkmJnRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFyT2Zmc2V0SW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Jhck9mZnNldC5nZXRWYWx1ZUluUGl4ZWwodGhpcy5faG9zdCx0aGlzLl9jYWNoZWRQYXJlbnRNZWFzdXJlLndpZHRoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYldpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYldpZHRoLnRvU3RyaW5nKHRoaXMuX2hvc3QpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGh1bWJXaWR0aC50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX3RodW1iV2lkdGguZnJvbVN0cmluZyh0KSYmdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYldpZHRoSW5QaXhlbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWVJblBpeGVsKHRoaXMuX2hvc3QsdGhpcy5fY2FjaGVkUGFyZW50TWVhc3VyZS53aWR0aCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWluaW11bVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluaW11bX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21pbmltdW0hPT10JiYodGhpcy5fbWluaW11bT10LHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy52YWx1ZT1NYXRoLm1heChNYXRoLm1pbih0aGlzLnZhbHVlLHRoaXMuX21heGltdW0pLHRoaXMuX21pbmltdW0pKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYXhpbXVtXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhpbXVtfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWF4aW11bSE9PXQmJih0aGlzLl9tYXhpbXVtPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLnZhbHVlPU1hdGgubWF4KE1hdGgubWluKHRoaXMudmFsdWUsdGhpcy5fbWF4aW11bSksdGhpcy5fbWluaW11bSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3Q9TWF0aC5tYXgoTWF0aC5taW4odCx0aGlzLl9tYXhpbXVtKSx0aGlzLl9taW5pbXVtKSx0aGlzLl92YWx1ZSE9PXQmJih0aGlzLl92YWx1ZT10LHRoaXMuX21hcmtBc0RpcnR5KCksdGhpcy5vblZhbHVlQ2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMuX3ZhbHVlKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNWZXJ0aWNhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNWZXJ0aWNhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzVmVydGljYWwhPT10JiYodGhpcy5faXNWZXJ0aWNhbD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzVGh1bWJDbGFtcGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1RodW1iQ2xhbXBlZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzVGh1bWJDbGFtcGVkIT09dCYmKHRoaXMuX2lzVGh1bWJDbGFtcGVkPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJCYXNlU2xpZGVyXCJ9LGUucHJvdG90eXBlLl9nZXRUaHVtYlBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNWZXJ0aWNhbD8odGhpcy5tYXhpbXVtLXRoaXMudmFsdWUpLyh0aGlzLm1heGltdW0tdGhpcy5taW5pbXVtKSp0aGlzLl9iYWNrZ3JvdW5kQm94TGVuZ3RoOih0aGlzLnZhbHVlLXRoaXMubWluaW11bSkvKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pKnRoaXMuX2JhY2tncm91bmRCb3hMZW5ndGh9LGUucHJvdG90eXBlLl9nZXRUaHVtYlRoaWNrbmVzcz1mdW5jdGlvbih0KXt2YXIgZT0wO3N3aXRjaCh0KXtjYXNlXCJjaXJjbGVcIjplPXRoaXMuX3RodW1iV2lkdGguaXNQaXhlbD9NYXRoLm1heCh0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MpOnRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MqdGhpcy5fdGh1bWJXaWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KTticmVhaztjYXNlXCJyZWN0YW5nbGVcIjplPXRoaXMuX3RodW1iV2lkdGguaXNQaXhlbD9NYXRoLm1pbih0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MpOnRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MqdGhpcy5fdGh1bWJXaWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuX3ByZXBhcmVSZW5kZXJpbmdEYXRhPWZ1bmN0aW9uKHQpe3RoaXMuX2VmZmVjdGl2ZUJhck9mZnNldD0wLHRoaXMuX3JlbmRlckxlZnQ9dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9yZW5kZXJUb3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX3JlbmRlcldpZHRoPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX3JlbmRlckhlaWdodD10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQsdGhpcy5fYmFja2dyb3VuZEJveExlbmd0aD1NYXRoLm1heCh0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3M9TWF0aC5taW4odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcz10aGlzLl9nZXRUaHVtYlRoaWNrbmVzcyh0KSx0aGlzLmRpc3BsYXlUaHVtYiYmKHRoaXMuX2JhY2tncm91bmRCb3hMZW5ndGgtPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKSx0aGlzLmlzVmVydGljYWwmJnRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodDx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aD9jb25zb2xlLmVycm9yKFwiSGVpZ2h0IHNob3VsZCBiZSBncmVhdGVyIHRoYW4gd2lkdGhcIik6KHRoaXMuX2Jhck9mZnNldC5pc1BpeGVsP3RoaXMuX2VmZmVjdGl2ZUJhck9mZnNldD1NYXRoLm1pbih0aGlzLl9iYXJPZmZzZXQuZ2V0VmFsdWUodGhpcy5faG9zdCksdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyk6dGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0PXRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MqdGhpcy5fYmFyT2Zmc2V0LmdldFZhbHVlKHRoaXMuX2hvc3QpLHRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MtPTIqdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LHRoaXMuaXNWZXJ0aWNhbD8odGhpcy5fcmVuZGVyTGVmdCs9dGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LCF0aGlzLmlzVGh1bWJDbGFtcGVkJiZ0aGlzLmRpc3BsYXlUaHVtYiYmKHRoaXMuX3JlbmRlclRvcCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MvMiksdGhpcy5fcmVuZGVySGVpZ2h0PXRoaXMuX2JhY2tncm91bmRCb3hMZW5ndGgsdGhpcy5fcmVuZGVyV2lkdGg9dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyk6KHRoaXMuX3JlbmRlclRvcCs9dGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0LCF0aGlzLmlzVGh1bWJDbGFtcGVkJiZ0aGlzLmRpc3BsYXlUaHVtYiYmKHRoaXMuX3JlbmRlckxlZnQrPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLzIpLHRoaXMuX3JlbmRlckhlaWdodD10aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzLHRoaXMuX3JlbmRlcldpZHRoPXRoaXMuX2JhY2tncm91bmRCb3hMZW5ndGgpKX0sZS5wcm90b3R5cGUuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXI9ZnVuY3Rpb24odCxlKXt2YXIgaTswIT10aGlzLnJvdGF0aW9uJiYodGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQsZSx0aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uKSx0PXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueCxlPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueSksaT10aGlzLl9pc1ZlcnRpY2FsP3RoaXMuX21pbmltdW0rKDEtKGUtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKS90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKih0aGlzLl9tYXhpbXVtLXRoaXMuX21pbmltdW0pOnRoaXMuX21pbmltdW0rKHQtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCkvdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgqKHRoaXMuX21heGltdW0tdGhpcy5fbWluaW11bSk7dmFyIHI9MS90aGlzLl9zdGVwfDA7dGhpcy52YWx1ZT10aGlzLl9zdGVwPyhpKnJ8MCkvcjppfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtyZXR1cm4hIXQucHJvdG90eXBlLl9vblBvaW50ZXJEb3duLmNhbGwodGhpcyxlLGkscixuKSYmKHRoaXMuX3BvaW50ZXJJc0Rvd249ITAsdGhpcy5fdXBkYXRlVmFsdWVGcm9tUG9pbnRlcihpLngsaS55KSx0aGlzLl9ob3N0Ll9jYXB0dXJpbmdDb250cm9sW3JdPXRoaXMsdGhpcy5fbGFzdFBvaW50ZXJEb3duSUQ9ciwhMCl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJNb3ZlPWZ1bmN0aW9uKGUsaSxyKXtyPT10aGlzLl9sYXN0UG9pbnRlckRvd25JRCYmKHRoaXMuX3BvaW50ZXJJc0Rvd24mJnRoaXMuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXIoaS54LGkueSksdC5wcm90b3R5cGUuX29uUG9pbnRlck1vdmUuY2FsbCh0aGlzLGUsaSxyKSl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJVcD1mdW5jdGlvbihlLGkscixuLG8pe3RoaXMuX3BvaW50ZXJJc0Rvd249ITEsZGVsZXRlIHRoaXMuX2hvc3QuX2NhcHR1cmluZ0NvbnRyb2xbcl0sdC5wcm90b3R5cGUuX29uUG9pbnRlclVwLmNhbGwodGhpcyxlLGkscixuLG8pfSxlfShwKSxSPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2JhY2tncm91bmQ9XCJibGFja1wiLGkuX2JvcmRlckNvbG9yPVwid2hpdGVcIixpLl9pc1RodW1iQ2lyY2xlPSExLGkuX2Rpc3BsYXlWYWx1ZUJhcj0hMCxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzcGxheVZhbHVlQmFyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNwbGF5VmFsdWVCYXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNwbGF5VmFsdWVCYXIhPT10JiYodGhpcy5fZGlzcGxheVZhbHVlQmFyPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYm9yZGVyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvcmRlckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYm9yZGVyQ29sb3IhPT10JiYodGhpcy5fYm9yZGVyQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNUaHVtYkNpcmNsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNUaHVtYkNpcmNsZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lzVGh1bWJDaXJjbGUhPT10JiYodGhpcy5faXNUaHVtYkNpcmNsZT10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiU2xpZGVyXCJ9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7dC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5fcHJlcGFyZVJlbmRlcmluZ0RhdGEodGhpcy5pc1RodW1iQ2lyY2xlP1wiY2lyY2xlXCI6XCJyZWN0YW5nbGVcIik7dmFyIGk9dGhpcy5fcmVuZGVyTGVmdCxyPXRoaXMuX3JlbmRlclRvcCxuPXRoaXMuX3JlbmRlcldpZHRoLG89dGhpcy5fcmVuZGVySGVpZ2h0LHM9MDt0aGlzLmlzVGh1bWJDbGFtcGVkJiZ0aGlzLmlzVGh1bWJDaXJjbGU/KHRoaXMuaXNWZXJ0aWNhbD9yKz10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcy8yOmkrPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLzIscz10aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzLzIpOnM9KHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLXRoaXMuX2VmZmVjdGl2ZUJhck9mZnNldCkvMiwodGhpcy5zaGFkb3dCbHVyfHx0aGlzLnNoYWRvd09mZnNldFh8fHRoaXMuc2hhZG93T2Zmc2V0WSkmJih0LnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3IsdC5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cix0LnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHQuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFkpO3ZhciBhPXRoaXMuX2dldFRodW1iUG9zaXRpb24oKTt0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHRoaXMuaXNWZXJ0aWNhbD90aGlzLmlzVGh1bWJDbGFtcGVkP3RoaXMuaXNUaHVtYkNpcmNsZT8odC5iZWdpblBhdGgoKSx0LmFyYyhpK3RoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MvMixyLHMsTWF0aC5QSSwyKk1hdGguUEkpLHQuZmlsbCgpLHQuZmlsbFJlY3QoaSxyLG4sbykpOnQuZmlsbFJlY3QoaSxyLG4sbyt0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dC5maWxsUmVjdChpLHIsbixvKTp0aGlzLmlzVGh1bWJDbGFtcGVkP3RoaXMuaXNUaHVtYkNpcmNsZT8odC5iZWdpblBhdGgoKSx0LmFyYyhpK3RoaXMuX2JhY2tncm91bmRCb3hMZW5ndGgscit0aGlzLl9iYWNrZ3JvdW5kQm94VGhpY2tuZXNzLzIscywwLDIqTWF0aC5QSSksdC5maWxsKCksdC5maWxsUmVjdChpLHIsbixvKSk6dC5maWxsUmVjdChpLHIsbit0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyxvKTp0LmZpbGxSZWN0KGkscixuLG8pLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0LmZpbGxTdHlsZT10aGlzLmNvbG9yLHRoaXMuX2Rpc3BsYXlWYWx1ZUJhciYmKHRoaXMuaXNWZXJ0aWNhbD90aGlzLmlzVGh1bWJDbGFtcGVkP3RoaXMuaXNUaHVtYkNpcmNsZT8odC5iZWdpblBhdGgoKSx0LmFyYyhpK3RoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MvMixyK3RoaXMuX2JhY2tncm91bmRCb3hMZW5ndGgscywwLDIqTWF0aC5QSSksdC5maWxsKCksdC5maWxsUmVjdChpLHIrYSxuLG8tYSkpOnQuZmlsbFJlY3QoaSxyK2EsbixvLWErdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpOnQuZmlsbFJlY3QoaSxyK2EsbixvLWEpOnRoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuaXNUaHVtYkNpcmNsZT8odC5iZWdpblBhdGgoKSx0LmFyYyhpLHIrdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy8yLHMsMCwyKk1hdGguUEkpLHQuZmlsbCgpLHQuZmlsbFJlY3QoaSxyLGEsbykpOnQuZmlsbFJlY3QoaSxyLGEsbykpLHRoaXMuZGlzcGxheVRodW1iJiYoKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dDb2xvcj10aGlzLnNoYWRvd0NvbG9yLHQuc2hhZG93Qmx1cj10aGlzLnNoYWRvd0JsdXIsdC5zaGFkb3dPZmZzZXRYPXRoaXMuc2hhZG93T2Zmc2V0WCx0LnNoYWRvd09mZnNldFk9dGhpcy5zaGFkb3dPZmZzZXRZKSx0aGlzLl9pc1RodW1iQ2lyY2xlPyh0LmJlZ2luUGF0aCgpLHRoaXMuaXNWZXJ0aWNhbD90LmFyYyhpK3RoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MvMixyK2EscywwLDIqTWF0aC5QSSk6dC5hcmMoaSthLHIrdGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcy8yLHMsMCwyKk1hdGguUEkpLHQuZmlsbCgpLCh0aGlzLnNoYWRvd0JsdXJ8fHRoaXMuc2hhZG93T2Zmc2V0WHx8dGhpcy5zaGFkb3dPZmZzZXRZKSYmKHQuc2hhZG93Qmx1cj0wLHQuc2hhZG93T2Zmc2V0WD0wLHQuc2hhZG93T2Zmc2V0WT0wKSx0LnN0cm9rZVN0eWxlPXRoaXMuX2JvcmRlckNvbG9yLHQuc3Ryb2tlKCkpOih0aGlzLmlzVmVydGljYWw/dC5maWxsUmVjdChpLXRoaXMuX2VmZmVjdGl2ZUJhck9mZnNldCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArYSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dC5maWxsUmVjdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2EsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksKHRoaXMuc2hhZG93Qmx1cnx8dGhpcy5zaGFkb3dPZmZzZXRYfHx0aGlzLnNoYWRvd09mZnNldFkpJiYodC5zaGFkb3dCbHVyPTAsdC5zaGFkb3dPZmZzZXRYPTAsdC5zaGFkb3dPZmZzZXRZPTApLHQuc3Ryb2tlU3R5bGU9dGhpcy5fYm9yZGVyQ29sb3IsdGhpcy5pc1ZlcnRpY2FsP3Quc3Ryb2tlUmVjdChpLXRoaXMuX2VmZmVjdGl2ZUJhck9mZnNldCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArYSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dC5zdHJva2VSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrYSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSkpLHQucmVzdG9yZSgpfSxlfShMKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuU2xpZGVyXCJdPVI7dmFyIEQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMubmFtZT10LHRoaXMuX2dyb3VwUGFuZWw9bmV3IEMsdGhpcy5fc2VsZWN0b3JzPW5ldyBBcnJheSx0aGlzLl9ncm91cFBhbmVsLnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCx0aGlzLl9ncm91cFBhbmVsLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULHRoaXMuX2dyb3VwSGVhZGVyPXRoaXMuX2FkZEdyb3VwSGVhZGVyKHQpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJncm91cFBhbmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncm91cFBhbmVsfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNlbGVjdG9yc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0b3JzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhlYWRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3JvdXBIZWFkZXIudGV4dH0sc2V0OmZ1bmN0aW9uKHQpe1wibGFiZWxcIiE9PXRoaXMuX2dyb3VwSGVhZGVyLnRleHQmJih0aGlzLl9ncm91cEhlYWRlci50ZXh0PXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9hZGRHcm91cEhlYWRlcj1mdW5jdGlvbih0KXt2YXIgZT1uZXcgeShcImdyb3VwSGVhZFwiLHQpO3JldHVybiBlLndpZHRoPS45LGUuaGVpZ2h0PVwiMzBweFwiLGUudGV4dFdyYXBwaW5nPSEwLGUuY29sb3I9XCJibGFja1wiLGUuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsZS50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsZS5sZWZ0PVwiMnB4XCIsdGhpcy5fZ3JvdXBQYW5lbC5hZGRDb250cm9sKGUpLGV9LHQucHJvdG90eXBlLl9nZXRTZWxlY3Rvcj1mdW5jdGlvbih0KXtpZighKHQ8MHx8dD49dGhpcy5fc2VsZWN0b3JzLmxlbmd0aCkpcmV0dXJuIHRoaXMuX3NlbGVjdG9yc1t0XX0sdC5wcm90b3R5cGUucmVtb3ZlU2VsZWN0b3I9ZnVuY3Rpb24odCl7dDwwfHx0Pj10aGlzLl9zZWxlY3RvcnMubGVuZ3RofHwodGhpcy5fZ3JvdXBQYW5lbC5yZW1vdmVDb250cm9sKHRoaXMuX3NlbGVjdG9yc1t0XSksdGhpcy5fc2VsZWN0b3JzLnNwbGljZSh0LDEpKX0sdH0oKSxCPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuYWRkQ2hlY2tib3g9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWUmJihlPWZ1bmN0aW9uKHQpe30pLHZvaWQgMD09PWkmJihpPSExKTtpPWl8fCExO3ZhciByPW5ldyB3O3Iud2lkdGg9XCIyMHB4XCIsci5oZWlnaHQ9XCIyMHB4XCIsci5jb2xvcj1cIiMzNjQyNDlcIixyLmJhY2tncm91bmQ9XCIjQ0NDQ0NDXCIsci5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLm9uSXNDaGVja2VkQ2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe2UodCl9KTt2YXIgbj1wLkFkZEhlYWRlcihyLHQsXCIyMDBweFwiLHtpc0hvcml6b250YWw6ITAsY29udHJvbEZpcnN0OiEwfSk7bi5oZWlnaHQ9XCIzMHB4XCIsbi5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxuLmxlZnQ9XCI0cHhcIix0aGlzLmdyb3VwUGFuZWwuYWRkQ29udHJvbChuKSx0aGlzLnNlbGVjdG9ycy5wdXNoKG4pLHIuaXNDaGVja2VkPWksdGhpcy5ncm91cFBhbmVsLnBhcmVudCYmdGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQmJihyLmNvbG9yPXRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50LmJ1dHRvbkNvbG9yLHIuYmFja2dyb3VuZD10aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudC5idXR0b25CYWNrZ3JvdW5kKX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yTGFiZWw9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblsxXS50ZXh0PWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckxhYmVsQ29sb3I9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblsxXS5jb2xvcj1lfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JCdXR0b25Db2xvcj1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLmNvbG9yPWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckJ1dHRvbkJhY2tncm91bmQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblswXS5iYWNrZ3JvdW5kPWV9LGV9KEQpLE49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5fc2VsZWN0TmI9MCxlfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuYWRkUmFkaW89ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWUmJihlPWZ1bmN0aW9uKHQpe30pLHZvaWQgMD09PWkmJihpPSExKTt2YXIgcj10aGlzLl9zZWxlY3ROYisrLG49bmV3IEU7bi5uYW1lPXQsbi53aWR0aD1cIjIwcHhcIixuLmhlaWdodD1cIjIwcHhcIixuLmNvbG9yPVwiIzM2NDI0OVwiLG4uYmFja2dyb3VuZD1cIiNDQ0NDQ0NcIixuLmdyb3VwPXRoaXMubmFtZSxuLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG4ub25Jc0NoZWNrZWRDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7dCYmZShyKX0pO3ZhciBvPXAuQWRkSGVhZGVyKG4sdCxcIjIwMHB4XCIse2lzSG9yaXpvbnRhbDohMCxjb250cm9sRmlyc3Q6ITB9KTtvLmhlaWdodD1cIjMwcHhcIixvLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULG8ubGVmdD1cIjRweFwiLHRoaXMuZ3JvdXBQYW5lbC5hZGRDb250cm9sKG8pLHRoaXMuc2VsZWN0b3JzLnB1c2gobyksbi5pc0NoZWNrZWQ9aSx0aGlzLmdyb3VwUGFuZWwucGFyZW50JiZ0aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudCYmKG4uY29sb3I9dGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQuYnV0dG9uQ29sb3Isbi5iYWNrZ3JvdW5kPXRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50LmJ1dHRvbkJhY2tncm91bmQpfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JMYWJlbD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLnRleHQ9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yTGFiZWxDb2xvcj1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLmNvbG9yPWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckJ1dHRvbkNvbG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5zZWxlY3RvcnNbdF0uY2hpbGRyZW5bMF0uY29sb3I9ZX0sZS5wcm90b3R5cGUuX3NldFNlbGVjdG9yQnV0dG9uQmFja2dyb3VuZD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLmJhY2tncm91bmQ9ZX0sZX0oRCksVj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIG51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLmFkZFNsaWRlcj1mdW5jdGlvbih0LGUsaSxyLG4sbyxzKXt2b2lkIDA9PT1lJiYoZT1mdW5jdGlvbih0KXt9KSx2b2lkIDA9PT1pJiYoaT1cIlVuaXRzXCIpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PW8mJihvPTApLHZvaWQgMD09PXMmJihzPWZ1bmN0aW9uKHQpe3JldHVybiAwfHR9KTt2YXIgYT1uZXcgUjthLm5hbWU9aSxhLnZhbHVlPW8sYS5taW5pbXVtPXIsYS5tYXhpbXVtPW4sYS53aWR0aD0uOSxhLmhlaWdodD1cIjIwcHhcIixhLmNvbG9yPVwiIzM2NDI0OVwiLGEuYmFja2dyb3VuZD1cIiNDQ0NDQ0NcIixhLmJvcmRlckNvbG9yPVwiYmxhY2tcIixhLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULGEubGVmdD1cIjRweFwiLGEucGFkZGluZ0JvdHRvbT1cIjRweFwiLGEub25WYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXthLnBhcmVudC5jaGlsZHJlblswXS50ZXh0PWEucGFyZW50LmNoaWxkcmVuWzBdLm5hbWUrXCI6IFwiK3ModCkrXCIgXCIrYS5uYW1lLGUodCl9KTt2YXIgaD1wLkFkZEhlYWRlcihhLHQrXCI6IFwiK3MobykrXCIgXCIraSxcIjMwcHhcIix7aXNIb3Jpem9udGFsOiExLGNvbnRyb2xGaXJzdDohMX0pO2guaGVpZ2h0PVwiNjBweFwiLGguaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsaC5sZWZ0PVwiNHB4XCIsaC5jaGlsZHJlblswXS5uYW1lPXQsdGhpcy5ncm91cFBhbmVsLmFkZENvbnRyb2woaCksdGhpcy5zZWxlY3RvcnMucHVzaChoKSx0aGlzLmdyb3VwUGFuZWwucGFyZW50JiZ0aGlzLmdyb3VwUGFuZWwucGFyZW50LnBhcmVudCYmKGEuY29sb3I9dGhpcy5ncm91cFBhbmVsLnBhcmVudC5wYXJlbnQuYnV0dG9uQ29sb3IsYS5iYWNrZ3JvdW5kPXRoaXMuZ3JvdXBQYW5lbC5wYXJlbnQucGFyZW50LmJ1dHRvbkJhY2tncm91bmQpfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JMYWJlbD1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzBdLm5hbWU9ZSx0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblswXS50ZXh0PWUrXCI6IFwiK3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLnZhbHVlK1wiIFwiK3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLm5hbWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckxhYmVsQ29sb3I9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblswXS5jb2xvcj1lfSxlLnByb3RvdHlwZS5fc2V0U2VsZWN0b3JCdXR0b25Db2xvcj1mdW5jdGlvbih0LGUpe3RoaXMuc2VsZWN0b3JzW3RdLmNoaWxkcmVuWzFdLmNvbG9yPWV9LGUucHJvdG90eXBlLl9zZXRTZWxlY3RvckJ1dHRvbkJhY2tncm91bmQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNlbGVjdG9yc1t0XS5jaGlsZHJlblsxXS5iYWNrZ3JvdW5kPWV9LGV9KEQpLEg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPVtdKTt2YXIgcj10LmNhbGwodGhpcyxlKXx8dGhpcztpZihyLm5hbWU9ZSxyLmdyb3Vwcz1pLHIuX2J1dHRvbkNvbG9yPVwiIzM2NDI0OVwiLHIuX2J1dHRvbkJhY2tncm91bmQ9XCIjQ0NDQ0NDXCIsci5faGVhZGVyQ29sb3I9XCJibGFja1wiLHIuX2JhckNvbG9yPVwid2hpdGVcIixyLl9iYXJIZWlnaHQ9XCIycHhcIixyLl9zcGFjZXJIZWlnaHQ9XCIyMHB4XCIsci5fYmFycz1uZXcgQXJyYXksci5fZ3JvdXBzPWksci50aGlja25lc3M9MixyLl9wYW5lbD1uZXcgQyxyLl9wYW5lbC52ZXJ0aWNhbEFsaWdubWVudD1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9UT1Asci5fcGFuZWwuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsci5fcGFuZWwudG9wPTUsci5fcGFuZWwubGVmdD01LHIuX3BhbmVsLndpZHRoPS45NSxpLmxlbmd0aD4wKXtmb3IodmFyIG49MDtuPGkubGVuZ3RoLTE7bisrKXIuX3BhbmVsLmFkZENvbnRyb2woaVtuXS5ncm91cFBhbmVsKSxyLl9hZGRTcGFjZXIoKTtyLl9wYW5lbC5hZGRDb250cm9sKGlbaS5sZW5ndGgtMV0uZ3JvdXBQYW5lbCl9cmV0dXJuIHIuYWRkQ29udHJvbChyLl9wYW5lbCkscn1yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiU2VsZWN0aW9uUGFuZWxcIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGVhZGVyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlYWRlckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faGVhZGVyQ29sb3IhPT10JiYodGhpcy5faGVhZGVyQ29sb3I9dCx0aGlzLl9zZXRIZWFkZXJDb2xvcigpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0SGVhZGVyQ29sb3I9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2dyb3Vwcy5sZW5ndGg7dCsrKXRoaXMuX2dyb3Vwc1t0XS5ncm91cFBhbmVsLmNoaWxkcmVuWzBdLmNvbG9yPXRoaXMuX2hlYWRlckNvbG9yfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidXR0b25Db2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnV0dG9uQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9idXR0b25Db2xvciE9PXQmJih0aGlzLl9idXR0b25Db2xvcj10LHRoaXMuX3NldGJ1dHRvbkNvbG9yKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9zZXRidXR0b25Db2xvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fZ3JvdXBzLmxlbmd0aDt0KyspZm9yKHZhciBlPTA7ZTx0aGlzLl9ncm91cHNbdF0uc2VsZWN0b3JzLmxlbmd0aDtlKyspdGhpcy5fZ3JvdXBzW3RdLl9zZXRTZWxlY3RvckJ1dHRvbkNvbG9yKGUsdGhpcy5fYnV0dG9uQ29sb3IpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsYWJlbENvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYWJlbENvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGFiZWxDb2xvciE9PXQmJih0aGlzLl9sYWJlbENvbG9yPXQsdGhpcy5fc2V0TGFiZWxDb2xvcigpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0TGFiZWxDb2xvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fZ3JvdXBzLmxlbmd0aDt0KyspZm9yKHZhciBlPTA7ZTx0aGlzLl9ncm91cHNbdF0uc2VsZWN0b3JzLmxlbmd0aDtlKyspdGhpcy5fZ3JvdXBzW3RdLl9zZXRTZWxlY3RvckxhYmVsQ29sb3IoZSx0aGlzLl9sYWJlbENvbG9yKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYnV0dG9uQmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnV0dG9uQmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2J1dHRvbkJhY2tncm91bmQhPT10JiYodGhpcy5fYnV0dG9uQmFja2dyb3VuZD10LHRoaXMuX3NldEJ1dHRvbkJhY2tncm91bmQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldEJ1dHRvbkJhY2tncm91bmQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2dyb3Vwcy5sZW5ndGg7dCsrKWZvcih2YXIgZT0wO2U8dGhpcy5fZ3JvdXBzW3RdLnNlbGVjdG9ycy5sZW5ndGg7ZSsrKXRoaXMuX2dyb3Vwc1t0XS5fc2V0U2VsZWN0b3JCdXR0b25CYWNrZ3JvdW5kKGUsdGhpcy5fYnV0dG9uQmFja2dyb3VuZCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhckNvbG9yIT09dCYmKHRoaXMuX2JhckNvbG9yPXQsdGhpcy5fc2V0QmFyQ29sb3IoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldEJhckNvbG9yPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9iYXJzLmxlbmd0aDt0KyspdGhpcy5fYmFyc1t0XS5jaGlsZHJlblswXS5iYWNrZ3JvdW5kPXRoaXMuX2JhckNvbG9yfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXJIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhckhlaWdodCE9PXQmJih0aGlzLl9iYXJIZWlnaHQ9dCx0aGlzLl9zZXRCYXJIZWlnaHQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldEJhckhlaWdodD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fYmFycy5sZW5ndGg7dCsrKXRoaXMuX2JhcnNbdF0uY2hpbGRyZW5bMF0uaGVpZ2h0PXRoaXMuX2JhckhlaWdodH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic3BhY2VySGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zcGFjZXJIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zcGFjZXJIZWlnaHQhPT10JiYodGhpcy5fc3BhY2VySGVpZ2h0PXQsdGhpcy5fc2V0U3BhY2VySGVpZ2h0KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9zZXRTcGFjZXJIZWlnaHQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2JhcnMubGVuZ3RoO3QrKyl0aGlzLl9iYXJzW3RdLmhlaWdodD10aGlzLl9zcGFjZXJIZWlnaHR9LGUucHJvdG90eXBlLl9hZGRTcGFjZXI9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZzt0LndpZHRoPTEsdC5oZWlnaHQ9dGhpcy5fc3BhY2VySGVpZ2h0LHQuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQ7dmFyIGU9bmV3IG07ZS53aWR0aD0xLGUuaGVpZ2h0PXRoaXMuX2JhckhlaWdodCxlLmhvcml6b250YWxBbGlnbm1lbnQ9cC5IT1JJWk9OVEFMX0FMSUdOTUVOVF9MRUZULGUudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfQ0VOVEVSLGUuYmFja2dyb3VuZD10aGlzLl9iYXJDb2xvcixlLmNvbG9yPVwidHJhbnNwYXJlbnRcIix0LmFkZENvbnRyb2woZSksdGhpcy5fcGFuZWwuYWRkQ29udHJvbCh0KSx0aGlzLl9iYXJzLnB1c2godCl9LGUucHJvdG90eXBlLmFkZEdyb3VwPWZ1bmN0aW9uKHQpe3RoaXMuX2dyb3Vwcy5sZW5ndGg+MCYmdGhpcy5fYWRkU3BhY2VyKCksdGhpcy5fcGFuZWwuYWRkQ29udHJvbCh0Lmdyb3VwUGFuZWwpLHRoaXMuX2dyb3Vwcy5wdXNoKHQpLHQuZ3JvdXBQYW5lbC5jaGlsZHJlblswXS5jb2xvcj10aGlzLl9oZWFkZXJDb2xvcjtmb3IodmFyIGU9MDtlPHQuc2VsZWN0b3JzLmxlbmd0aDtlKyspdC5fc2V0U2VsZWN0b3JCdXR0b25Db2xvcihlLHRoaXMuX2J1dHRvbkNvbG9yKSx0Ll9zZXRTZWxlY3RvckJ1dHRvbkJhY2tncm91bmQoZSx0aGlzLl9idXR0b25CYWNrZ3JvdW5kKX0sZS5wcm90b3R5cGUucmVtb3ZlR3JvdXA9ZnVuY3Rpb24odCl7aWYoISh0PDB8fHQ+PXRoaXMuX2dyb3Vwcy5sZW5ndGgpKXt2YXIgZT10aGlzLl9ncm91cHNbdF07dGhpcy5fcGFuZWwucmVtb3ZlQ29udHJvbChlLmdyb3VwUGFuZWwpLHRoaXMuX2dyb3Vwcy5zcGxpY2UodCwxKSx0PHRoaXMuX2JhcnMubGVuZ3RoJiYodGhpcy5fcGFuZWwucmVtb3ZlQ29udHJvbCh0aGlzLl9iYXJzW3RdKSx0aGlzLl9iYXJzLnNwbGljZSh0LDEpKX19LGUucHJvdG90eXBlLnNldEhlYWRlck5hbWU9ZnVuY3Rpb24odCxlKXtlPDB8fGU+PXRoaXMuX2dyb3Vwcy5sZW5ndGh8fCh0aGlzLl9ncm91cHNbZV0uZ3JvdXBQYW5lbC5jaGlsZHJlblswXS50ZXh0PXQpfSxlLnByb3RvdHlwZS5yZWxhYmVsPWZ1bmN0aW9uKHQsZSxpKXtpZighKGU8MHx8ZT49dGhpcy5fZ3JvdXBzLmxlbmd0aCkpe3ZhciByPXRoaXMuX2dyb3Vwc1tlXTtpPDB8fGk+PXIuc2VsZWN0b3JzLmxlbmd0aHx8ci5fc2V0U2VsZWN0b3JMYWJlbChpLHQpfX0sZS5wcm90b3R5cGUucmVtb3ZlRnJvbUdyb3VwU2VsZWN0b3I9ZnVuY3Rpb24odCxlKXtpZighKHQ8MHx8dD49dGhpcy5fZ3JvdXBzLmxlbmd0aCkpe3ZhciBpPXRoaXMuX2dyb3Vwc1t0XTtlPDB8fGU+PWkuc2VsZWN0b3JzLmxlbmd0aHx8aS5yZW1vdmVTZWxlY3RvcihlKX19LGUucHJvdG90eXBlLmFkZFRvR3JvdXBDaGVja2JveD1mdW5jdGlvbih0LGUsaSxyKXsodm9pZCAwPT09aSYmKGk9ZnVuY3Rpb24oKXt9KSx2b2lkIDA9PT1yJiYocj0hMSksdDwwfHx0Pj10aGlzLl9ncm91cHMubGVuZ3RoKXx8dGhpcy5fZ3JvdXBzW3RdLmFkZENoZWNrYm94KGUsaSxyKX0sZS5wcm90b3R5cGUuYWRkVG9Hcm91cFJhZGlvPWZ1bmN0aW9uKHQsZSxpLHIpeyh2b2lkIDA9PT1pJiYoaT1mdW5jdGlvbigpe30pLHZvaWQgMD09PXImJihyPSExKSx0PDB8fHQ+PXRoaXMuX2dyb3Vwcy5sZW5ndGgpfHx0aGlzLl9ncm91cHNbdF0uYWRkUmFkaW8oZSxpLHIpfSxlLnByb3RvdHlwZS5hZGRUb0dyb3VwU2xpZGVyPWZ1bmN0aW9uKHQsZSxpLHIsbixvLHMsYSl7KHZvaWQgMD09PWkmJihpPWZ1bmN0aW9uKCl7fSksdm9pZCAwPT09ciYmKHI9XCJVbml0c1wiKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1vJiYobz0wKSx2b2lkIDA9PT1zJiYocz0wKSx2b2lkIDA9PT1hJiYoYT1mdW5jdGlvbih0KXtyZXR1cm4gMHx0fSksdDwwfHx0Pj10aGlzLl9ncm91cHMubGVuZ3RoKXx8dGhpcy5fZ3JvdXBzW3RdLmFkZFNsaWRlcihlLGkscixuLG8scyxhKX0sZX0obSksRj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLl9mcmVlemVDb250cm9scz0hMSxpLl9idWNrZXRXaWR0aD0wLGkuX2J1Y2tldEhlaWdodD0wLGkuX2J1Y2tldHM9e30saX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZyZWV6ZUNvbnRyb2xzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcmVlemVDb250cm9sc30sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2ZyZWV6ZUNvbnRyb2xzIT09dCl7dGhpcy5fZnJlZXplQ29udHJvbHM9ITE7dmFyIGU9dGhpcy5ob3N0LmdldFNpemUoKSxpPWUud2lkdGgscj1lLmhlaWdodCxuPXRoaXMuaG9zdC5nZXRDb250ZXh0KCksbz1uZXcgXygwLDAsaSxyKTt0aGlzLmhvc3QuX251bUxheW91dENhbGxzPTAsdGhpcy5ob3N0Ll9yb290Q29udGFpbmVyLl9sYXlvdXQobyxuKSx0JiYodGhpcy5fdXBkYXRlTWVhc3VyZXMoKSx0aGlzLl91c2VCdWNrZXRzKCkmJnRoaXMuX21ha2VCdWNrZXRzKCkpLHRoaXMuX2ZyZWV6ZUNvbnRyb2xzPXQsdGhpcy5ob3N0Lm1hcmtBc0RpcnR5KCl9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJ1Y2tldFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWNrZXRXaWR0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidWNrZXRIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1Y2tldEhlaWdodH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zZXRCdWNrZXRTaXplcz1mdW5jdGlvbih0LGUpe3RoaXMuX2J1Y2tldFdpZHRoPXQsdGhpcy5fYnVja2V0SGVpZ2h0PWUsdGhpcy5fdXNlQnVja2V0cygpP3RoaXMuX2ZyZWV6ZUNvbnRyb2xzJiZ0aGlzLl9tYWtlQnVja2V0cygpOnRoaXMuX2J1Y2tldHM9e319LGUucHJvdG90eXBlLl91c2VCdWNrZXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1Y2tldFdpZHRoPjAmJnRoaXMuX2J1Y2tldEhlaWdodD4wfSxlLnByb3RvdHlwZS5fbWFrZUJ1Y2tldHM9ZnVuY3Rpb24oKXt0aGlzLl9idWNrZXRzPXt9LHRoaXMuX2J1Y2tldExlbj1NYXRoLmNlaWwodGhpcy53aWR0aEluUGl4ZWxzL3RoaXMuX2J1Y2tldFdpZHRoKSx0aGlzLl9kaXNwYXRjaEluQnVja2V0cyh0aGlzLl9jaGlsZHJlbil9LGUucHJvdG90eXBlLl9kaXNwYXRjaEluQnVja2V0cz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoOysrZSl7Zm9yKHZhciBpPXRbZV0scj1NYXRoLm1heCgwLE1hdGguZmxvb3IoKGkuX2N1cnJlbnRNZWFzdXJlLmxlZnQtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCkvdGhpcy5fYnVja2V0V2lkdGgpKSxuPU1hdGguZmxvb3IoKGkuX2N1cnJlbnRNZWFzdXJlLmxlZnQtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLl9jdXJyZW50TWVhc3VyZS53aWR0aC0xKS90aGlzLl9idWNrZXRXaWR0aCksbz1NYXRoLm1heCgwLE1hdGguZmxvb3IoKGkuX2N1cnJlbnRNZWFzdXJlLnRvcC10aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApL3RoaXMuX2J1Y2tldEhlaWdodCkpLHM9TWF0aC5mbG9vcigoaS5fY3VycmVudE1lYXN1cmUudG9wLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtpLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtMSkvdGhpcy5fYnVja2V0SGVpZ2h0KTtvPD1zOyl7Zm9yKHZhciBhPXI7YTw9bjsrK2Epe3ZhciBoPW8qdGhpcy5fYnVja2V0TGVuK2EsbD10aGlzLl9idWNrZXRzW2hdO2x8fChsPVtdLHRoaXMuX2J1Y2tldHNbaF09bCksbC5wdXNoKGkpfW8rK31pIGluc3RhbmNlb2YgZyYmaS5fY2hpbGRyZW4ubGVuZ3RoPjAmJnRoaXMuX2Rpc3BhdGNoSW5CdWNrZXRzKGkuX2NoaWxkcmVuKX19LGUucHJvdG90eXBlLl91cGRhdGVNZWFzdXJlcz1mdW5jdGlvbigpe3ZhciB0PTB8dGhpcy5sZWZ0SW5QaXhlbHMsZT0wfHRoaXMudG9wSW5QaXhlbHM7dGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLmxlZnQtPXQsdGhpcy5fbWVhc3VyZUZvckNoaWxkcmVuLnRvcC09ZSx0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LT10LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcC09ZSx0aGlzLl91cGRhdGVDaGlsZHJlbk1lYXN1cmVzKHRoaXMuX2NoaWxkcmVuLHQsZSl9LGUucHJvdG90eXBlLl91cGRhdGVDaGlsZHJlbk1lYXN1cmVzPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoOysrcil7dmFyIG49dFtyXTtuLl9jdXJyZW50TWVhc3VyZS5sZWZ0LT1lLG4uX2N1cnJlbnRNZWFzdXJlLnRvcC09aSxuLl9jdXN0b21EYXRhLl9vcmlnTGVmdD1uLl9jdXJyZW50TWVhc3VyZS5sZWZ0LG4uX2N1c3RvbURhdGEuX29yaWdUb3A9bi5fY3VycmVudE1lYXN1cmUudG9wLG4gaW5zdGFuY2VvZiBnJiZuLl9jaGlsZHJlbi5sZW5ndGg+MCYmdGhpcy5fdXBkYXRlQ2hpbGRyZW5NZWFzdXJlcyhuLl9jaGlsZHJlbixlLGkpfX0sZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJTY3JvbGxWaWV3ZXJXaW5kb3dcIn0sZS5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUuX2FkZGl0aW9uYWxQcm9jZXNzaW5nLmNhbGwodGhpcyxlLGkpLHRoaXMuX3BhcmVudE1lYXN1cmU9ZSx0aGlzLl9tZWFzdXJlRm9yQ2hpbGRyZW4ubGVmdD10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi50b3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi53aWR0aD1lLndpZHRoLHRoaXMuX21lYXN1cmVGb3JDaGlsZHJlbi5oZWlnaHQ9ZS5oZWlnaHR9LGUucHJvdG90eXBlLl9sYXlvdXQ9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5fZnJlZXplQ29udHJvbHM/KHRoaXMuaW52YWxpZGF0ZVJlY3QoKSwhMSk6dC5wcm90b3R5cGUuX2xheW91dC5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUuX3Njcm9sbENoaWxkcmVuPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoOysrcil7dmFyIG49dFtyXTtuLl9jdXJyZW50TWVhc3VyZS5sZWZ0PW4uX2N1c3RvbURhdGEuX29yaWdMZWZ0K2Usbi5fY3VycmVudE1lYXN1cmUudG9wPW4uX2N1c3RvbURhdGEuX29yaWdUb3AraSxuLl9pc0NsaXBwZWQ9ITEsbiBpbnN0YW5jZW9mIGcmJm4uX2NoaWxkcmVuLmxlbmd0aD4wJiZ0aGlzLl9zY3JvbGxDaGlsZHJlbihuLl9jaGlsZHJlbixlLGkpfX0sZS5wcm90b3R5cGUuX3Njcm9sbENoaWxkcmVuV2l0aEJ1Y2tldHM9ZnVuY3Rpb24odCxlLGkscil7Zm9yKHZhciBuPU1hdGgubWF4KDAsTWF0aC5mbG9vcigtdC90aGlzLl9idWNrZXRXaWR0aCkpLG89TWF0aC5mbG9vcigoLXQrdGhpcy5fcGFyZW50TWVhc3VyZS53aWR0aC0xKS90aGlzLl9idWNrZXRXaWR0aCkscz1NYXRoLm1heCgwLE1hdGguZmxvb3IoLWUvdGhpcy5fYnVja2V0SGVpZ2h0KSksYT1NYXRoLmZsb29yKCgtZSt0aGlzLl9wYXJlbnRNZWFzdXJlLmhlaWdodC0xKS90aGlzLl9idWNrZXRIZWlnaHQpO3M8PWE7KXtmb3IodmFyIGg9bjtoPD1vOysraCl7dmFyIGw9cyp0aGlzLl9idWNrZXRMZW4raCx1PXRoaXMuX2J1Y2tldHNbbF07aWYodSlmb3IodmFyIGM9MDtjPHUubGVuZ3RoOysrYyl7dmFyIF89dVtjXTtfLl9jdXJyZW50TWVhc3VyZS5sZWZ0PV8uX2N1c3RvbURhdGEuX29yaWdMZWZ0K2ksXy5fY3VycmVudE1lYXN1cmUudG9wPV8uX2N1c3RvbURhdGEuX29yaWdUb3ArcixfLl9pc0NsaXBwZWQ9ITF9fXMrK319LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKGUsaSl7aWYodGhpcy5fZnJlZXplQ29udHJvbHMpe3RoaXMuX2xvY2FsRHJhdyhlKSx0aGlzLmNsaXBDaGlsZHJlbiYmdGhpcy5fY2xpcEZvckNoaWxkcmVuKGUpO3ZhciByPXRoaXMubGVmdEluUGl4ZWxzLG49dGhpcy50b3BJblBpeGVsczt0aGlzLl91c2VCdWNrZXRzKCk/KHRoaXMuX3Njcm9sbENoaWxkcmVuV2l0aEJ1Y2tldHModGhpcy5fb2xkTGVmdCx0aGlzLl9vbGRUb3AscixuKSx0aGlzLl9zY3JvbGxDaGlsZHJlbldpdGhCdWNrZXRzKHIsbixyLG4pKTp0aGlzLl9zY3JvbGxDaGlsZHJlbih0aGlzLl9jaGlsZHJlbixyLG4pLHRoaXMuX29sZExlZnQ9cix0aGlzLl9vbGRUb3A9bjtmb3IodmFyIG89MCxzPXRoaXMuX2NoaWxkcmVuO288cy5sZW5ndGg7bysrKXt2YXIgYT1zW29dO2EuX2ludGVyc2VjdHNSZWN0KHRoaXMuX3BhcmVudE1lYXN1cmUpJiZhLl9yZW5kZXIoZSx0aGlzLl9wYXJlbnRNZWFzdXJlKX19ZWxzZSB0LnByb3RvdHlwZS5fZHJhdy5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlPWZ1bmN0aW9uKCl7aWYodGhpcy5fZnJlZXplQ29udHJvbHMpdC5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlLmNhbGwodGhpcyk7ZWxzZXtmb3IodmFyIGU9dGhpcy5wYXJlbnRDbGllbnRXaWR0aCxpPXRoaXMucGFyZW50Q2xpZW50SGVpZ2h0LHI9MCxuPXRoaXMuY2hpbGRyZW47cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07by5pc1Zpc2libGUmJiFvLm5vdFJlbmRlcmFibGUmJihvLmhvcml6b250YWxBbGlnbm1lbnQ9PT1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUiYmby5fb2Zmc2V0TGVmdCh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LW8uX2N1cnJlbnRNZWFzdXJlLmxlZnQpLG8udmVydGljYWxBbGlnbm1lbnQ9PT1wLlZFUlRJQ0FMX0FMSUdOTUVOVF9DRU5URVImJm8uX29mZnNldFRvcCh0aGlzLl9jdXJyZW50TWVhc3VyZS50b3Atby5fY3VycmVudE1lYXN1cmUudG9wKSxlPU1hdGgubWF4KGUsby5fY3VycmVudE1lYXN1cmUubGVmdC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K28uX2N1cnJlbnRNZWFzdXJlLndpZHRoKSxpPU1hdGgubWF4KGksby5fY3VycmVudE1lYXN1cmUudG9wLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCtvLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKX10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCE9PWUmJih0aGlzLl93aWR0aC51cGRhdGVJblBsYWNlKGUsYS5VTklUTU9ERV9QSVhFTCksdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGg9ZSx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwLHRoaXMuX2lzRGlydHk9ITApLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCE9PWkmJih0aGlzLl9oZWlnaHQudXBkYXRlSW5QbGFjZShpLGEuVU5JVE1PREVfUElYRUwpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodD1pLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITAsdGhpcy5faXNEaXJ0eT0hMCksdC5wcm90b3R5cGUuX3Bvc3RNZWFzdXJlLmNhbGwodGhpcyl9fSxlfShnKSxqPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX2JhY2tncm91bmQ9XCJibGFja1wiLGkuX2JvcmRlckNvbG9yPVwid2hpdGVcIixpLl90ZW1wTWVhc3VyZT1uZXcgXygwLDAsMCwwKSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYm9yZGVyQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvcmRlckNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYm9yZGVyQ29sb3IhPT10JiYodGhpcy5fYm9yZGVyQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJTY3JvbGxiYXJcIn0sZS5wcm90b3R5cGUuX2dldFRodW1iVGhpY2tuZXNzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iV2lkdGguaXNQaXhlbD90aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpOnRoaXMuX2JhY2tncm91bmRCb3hUaGlja25lc3MqdGhpcy5fdGh1bWJXaWR0aC5nZXRWYWx1ZSh0aGlzLl9ob3N0KX0sZS5wcm90b3R5cGUuX2RyYXc9ZnVuY3Rpb24odCl7dC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5fcHJlcGFyZVJlbmRlcmluZ0RhdGEoXCJyZWN0YW5nbGVcIik7dmFyIGU9dGhpcy5fcmVuZGVyTGVmdCxpPXRoaXMuX2dldFRodW1iUG9zaXRpb24oKTt0LmZpbGxTdHlsZT10aGlzLl9iYWNrZ3JvdW5kLHQuZmlsbFJlY3QodGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AsdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0LmZpbGxTdHlsZT10aGlzLmNvbG9yLHRoaXMuaXNWZXJ0aWNhbD8odGhpcy5fdGVtcE1lYXN1cmUubGVmdD1lLXRoaXMuX2VmZmVjdGl2ZUJhck9mZnNldCx0aGlzLl90ZW1wTWVhc3VyZS50b3A9dGhpcy5fY3VycmVudE1lYXN1cmUudG9wK2ksdGhpcy5fdGVtcE1lYXN1cmUud2lkdGg9dGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsdGhpcy5fdGVtcE1lYXN1cmUuaGVpZ2h0PXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKToodGhpcy5fdGVtcE1lYXN1cmUubGVmdD10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K2ksdGhpcy5fdGVtcE1lYXN1cmUudG9wPXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl90ZW1wTWVhc3VyZS53aWR0aD10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyx0aGlzLl90ZW1wTWVhc3VyZS5oZWlnaHQ9dGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSx0LmZpbGxSZWN0KHRoaXMuX3RlbXBNZWFzdXJlLmxlZnQsdGhpcy5fdGVtcE1lYXN1cmUudG9wLHRoaXMuX3RlbXBNZWFzdXJlLndpZHRoLHRoaXMuX3RlbXBNZWFzdXJlLmhlaWdodCksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl91cGRhdGVWYWx1ZUZyb21Qb2ludGVyPWZ1bmN0aW9uKHQsZSl7MCE9dGhpcy5yb3RhdGlvbiYmKHRoaXMuX2ludmVydFRyYW5zZm9ybU1hdHJpeC50cmFuc2Zvcm1Db29yZGluYXRlcyh0LGUsdGhpcy5fdHJhbnNmb3JtZWRQb3NpdGlvbiksdD10aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uLngsZT10aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uLnkpLHRoaXMuX2ZpcnN0JiYodGhpcy5fZmlyc3Q9ITEsdGhpcy5fb3JpZ2luWD10LHRoaXMuX29yaWdpblk9ZSwodDx0aGlzLl90ZW1wTWVhc3VyZS5sZWZ0fHx0PnRoaXMuX3RlbXBNZWFzdXJlLmxlZnQrdGhpcy5fdGVtcE1lYXN1cmUud2lkdGh8fGU8dGhpcy5fdGVtcE1lYXN1cmUudG9wfHxlPnRoaXMuX3RlbXBNZWFzdXJlLnRvcCt0aGlzLl90ZW1wTWVhc3VyZS5oZWlnaHQpJiYodGhpcy5pc1ZlcnRpY2FsP3RoaXMudmFsdWU9dGhpcy5taW5pbXVtKygxLShlLXRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCkvdGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0KSoodGhpcy5tYXhpbXVtLXRoaXMubWluaW11bSk6dGhpcy52YWx1ZT10aGlzLm1pbmltdW0rKHQtdGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCkvdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgqKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pKSk7dmFyIGk9MDtpPXRoaXMuaXNWZXJ0aWNhbD8tKGUtdGhpcy5fb3JpZ2luWSkvKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC10aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6KHQtdGhpcy5fb3JpZ2luWCkvKHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKSx0aGlzLnZhbHVlKz1pKih0aGlzLm1heGltdW0tdGhpcy5taW5pbXVtKSx0aGlzLl9vcmlnaW5YPXQsdGhpcy5fb3JpZ2luWT1lfSxlLnByb3RvdHlwZS5fb25Qb2ludGVyRG93bj1mdW5jdGlvbihlLGkscixuKXtyZXR1cm4gdGhpcy5fZmlyc3Q9ITAsdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd24uY2FsbCh0aGlzLGUsaSxyLG4pfSxlfShMKSxXPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3RodW1iTGVuZ3RoPS41LGkuX3RodW1iSGVpZ2h0PTEsaS5fYmFySW1hZ2VIZWlnaHQ9MSxpLl90ZW1wTWVhc3VyZT1uZXcgXygwLDAsMCwwKSxpLm51bTkwUm90YXRpb25JblZlcnRpY2FsTW9kZT0xLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tncm91bmRCYXNlSW1hZ2V9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2JhY2tncm91bmRCYXNlSW1hZ2UhPT10JiYodGhpcy5fYmFja2dyb3VuZEJhc2VJbWFnZT10LHRoaXMuaXNWZXJ0aWNhbCYmMCE9PXRoaXMubnVtOTBSb3RhdGlvbkluVmVydGljYWxNb2RlP3QuaXNMb2FkZWQ/KHRoaXMuX2JhY2tncm91bmRJbWFnZT10Ll9yb3RhdGU5MCh0aGlzLm51bTkwUm90YXRpb25JblZlcnRpY2FsTW9kZSwhMCksdGhpcy5fbWFya0FzRGlydHkoKSk6dC5vbkltYWdlTG9hZGVkT2JzZXJ2YWJsZS5hZGRPbmNlKGZ1bmN0aW9uKCl7dmFyIGk9dC5fcm90YXRlOTAoZS5udW05MFJvdGF0aW9uSW5WZXJ0aWNhbE1vZGUsITApO2UuX2JhY2tncm91bmRJbWFnZT1pLGkuaXNMb2FkZWR8fGkub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe2UuX21hcmtBc0RpcnR5KCl9KSxlLl9tYXJrQXNEaXJ0eSgpfSk6KHRoaXMuX2JhY2tncm91bmRJbWFnZT10LHQmJiF0LmlzTG9hZGVkJiZ0Lm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlLmFkZE9uY2UoZnVuY3Rpb24oKXtlLl9tYXJrQXNEaXJ0eSgpfSksdGhpcy5fbWFya0FzRGlydHkoKSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iQmFzZUltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl90aHVtYkJhc2VJbWFnZSE9PXQmJih0aGlzLl90aHVtYkJhc2VJbWFnZT10LHRoaXMuaXNWZXJ0aWNhbCYmMCE9PXRoaXMubnVtOTBSb3RhdGlvbkluVmVydGljYWxNb2RlP3QuaXNMb2FkZWQ/KHRoaXMuX3RodW1iSW1hZ2U9dC5fcm90YXRlOTAoLXRoaXMubnVtOTBSb3RhdGlvbkluVmVydGljYWxNb2RlLCEwKSx0aGlzLl9tYXJrQXNEaXJ0eSgpKTp0Lm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlLmFkZE9uY2UoZnVuY3Rpb24oKXt2YXIgaT10Ll9yb3RhdGU5MCgtZS5udW05MFJvdGF0aW9uSW5WZXJ0aWNhbE1vZGUsITApO2UuX3RodW1iSW1hZ2U9aSxpLmlzTG9hZGVkfHxpLm9uSW1hZ2VMb2FkZWRPYnNlcnZhYmxlLmFkZE9uY2UoZnVuY3Rpb24oKXtlLl9tYXJrQXNEaXJ0eSgpfSksZS5fbWFya0FzRGlydHkoKX0pOih0aGlzLl90aHVtYkltYWdlPXQsdCYmIXQuaXNMb2FkZWQmJnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe2UuX21hcmtBc0RpcnR5KCl9KSx0aGlzLl9tYXJrQXNEaXJ0eSgpKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJMZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iTGVuZ3RofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGh1bWJMZW5ndGghPT10JiYodGhpcy5fdGh1bWJMZW5ndGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0aHVtYkhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aHVtYkxlbmd0aCE9PXQmJih0aGlzLl90aHVtYkhlaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckltYWdlSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJJbWFnZUhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhckltYWdlSGVpZ2h0IT09dCYmKHRoaXMuX2JhckltYWdlSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJJbWFnZVNjcm9sbEJhclwifSxlLnByb3RvdHlwZS5fZ2V0VGh1bWJUaGlja25lc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJXaWR0aC5pc1BpeGVsP3RoaXMuX3RodW1iV2lkdGguZ2V0VmFsdWUodGhpcy5faG9zdCk6dGhpcy5fYmFja2dyb3VuZEJveFRoaWNrbmVzcyp0aGlzLl90aHVtYldpZHRoLmdldFZhbHVlKHRoaXMuX2hvc3QpfSxlLnByb3RvdHlwZS5fZHJhdz1mdW5jdGlvbih0KXt0LnNhdmUoKSx0aGlzLl9hcHBseVN0YXRlcyh0KSx0aGlzLl9wcmVwYXJlUmVuZGVyaW5nRGF0YShcInJlY3RhbmdsZVwiKTt2YXIgZT10aGlzLl9nZXRUaHVtYlBvc2l0aW9uKCksaT10aGlzLl9yZW5kZXJMZWZ0LHI9dGhpcy5fcmVuZGVyVG9wLG49dGhpcy5fcmVuZGVyV2lkdGgsbz10aGlzLl9yZW5kZXJIZWlnaHQ7dGhpcy5fYmFja2dyb3VuZEltYWdlJiYodGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMoaSxyLG4sbyksdGhpcy5pc1ZlcnRpY2FsPyh0aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyhpK24qKDEtdGhpcy5fYmFySW1hZ2VIZWlnaHQpKi41LHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCxuKnRoaXMuX2JhckltYWdlSGVpZ2h0LG8pLHRoaXMuX3RlbXBNZWFzdXJlLmhlaWdodCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MsdGhpcy5fYmFja2dyb3VuZEltYWdlLl9jdXJyZW50TWVhc3VyZS5jb3B5RnJvbSh0aGlzLl90ZW1wTWVhc3VyZSkpOih0aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LHIrbyooMS10aGlzLl9iYXJJbWFnZUhlaWdodCkqLjUsbixvKnRoaXMuX2JhckltYWdlSGVpZ2h0KSx0aGlzLl90ZW1wTWVhc3VyZS53aWR0aCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MsdGhpcy5fYmFja2dyb3VuZEltYWdlLl9jdXJyZW50TWVhc3VyZS5jb3B5RnJvbSh0aGlzLl90ZW1wTWVhc3VyZSkpLHRoaXMuX2JhY2tncm91bmRJbWFnZS5fZHJhdyh0KSksdGhpcy5pc1ZlcnRpY2FsP3RoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKGktdGhpcy5fZWZmZWN0aXZlQmFyT2Zmc2V0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoKigxLXRoaXMuX3RodW1iSGVpZ2h0KSouNSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ArZSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCp0aGlzLl90aHVtYkhlaWdodCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHModGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtlLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQqKDEtdGhpcy5fdGh1bWJIZWlnaHQpKi41LHRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCp0aGlzLl90aHVtYkhlaWdodCksdGhpcy5fdGh1bWJJbWFnZSYmKHRoaXMuX3RodW1iSW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSx0aGlzLl90aHVtYkltYWdlLl9kcmF3KHQpKSx0LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX3VwZGF0ZVZhbHVlRnJvbVBvaW50ZXI9ZnVuY3Rpb24odCxlKXswIT10aGlzLnJvdGF0aW9uJiYodGhpcy5faW52ZXJ0VHJhbnNmb3JtTWF0cml4LnRyYW5zZm9ybUNvb3JkaW5hdGVzKHQsZSx0aGlzLl90cmFuc2Zvcm1lZFBvc2l0aW9uKSx0PXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueCxlPXRoaXMuX3RyYW5zZm9ybWVkUG9zaXRpb24ueSksdGhpcy5fZmlyc3QmJih0aGlzLl9maXJzdD0hMSx0aGlzLl9vcmlnaW5YPXQsdGhpcy5fb3JpZ2luWT1lLCh0PHRoaXMuX3RlbXBNZWFzdXJlLmxlZnR8fHQ+dGhpcy5fdGVtcE1lYXN1cmUubGVmdCt0aGlzLl90ZW1wTWVhc3VyZS53aWR0aHx8ZTx0aGlzLl90ZW1wTWVhc3VyZS50b3B8fGU+dGhpcy5fdGVtcE1lYXN1cmUudG9wK3RoaXMuX3RlbXBNZWFzdXJlLmhlaWdodCkmJih0aGlzLmlzVmVydGljYWw/dGhpcy52YWx1ZT10aGlzLm1pbmltdW0rKDEtKGUtdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKS90aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpKih0aGlzLm1heGltdW0tdGhpcy5taW5pbXVtKTp0aGlzLnZhbHVlPXRoaXMubWluaW11bSsodC10aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0KS90aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCoodGhpcy5tYXhpbXVtLXRoaXMubWluaW11bSkpKTt2YXIgaT0wO2k9dGhpcy5pc1ZlcnRpY2FsPy0oZS10aGlzLl9vcmlnaW5ZKS8odGhpcy5fY3VycmVudE1lYXN1cmUuaGVpZ2h0LXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKToodC10aGlzLl9vcmlnaW5YKS8odGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgtdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpLHRoaXMudmFsdWUrPWkqKHRoaXMubWF4aW11bS10aGlzLm1pbmltdW0pLHRoaXMuX29yaWdpblg9dCx0aGlzLl9vcmlnaW5ZPWV9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKGUsaSxyLG4pe3JldHVybiB0aGlzLl9maXJzdD0hMCx0LnByb3RvdHlwZS5fb25Qb2ludGVyRG93bi5jYWxsKHRoaXMsZSxpLHIsbil9LGV9KEwpLHo9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciByPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiByLl9iYXJTaXplPTIwLHIuX3BvaW50ZXJJc092ZXI9ITEsci5fd2hlZWxQcmVjaXNpb249LjA1LHIuX3RodW1iTGVuZ3RoPS41LHIuX3RodW1iSGVpZ2h0PTEsci5fYmFySW1hZ2VIZWlnaHQ9MSxyLl9ob3Jpem9udGFsQmFySW1hZ2VIZWlnaHQ9MSxyLl92ZXJ0aWNhbEJhckltYWdlSGVpZ2h0PTEsci5fZm9yY2VIb3Jpem9udGFsQmFyPSExLHIuX2ZvcmNlVmVydGljYWxCYXI9ITEsci5fdXNlSW1hZ2VCYXI9aXx8ITEsci5vbkRpcnR5T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtyLl9ob3Jpem9udGFsQmFyU3BhY2UuY29sb3I9ci5jb2xvcixyLl92ZXJ0aWNhbEJhclNwYWNlLmNvbG9yPXIuY29sb3Isci5fZHJhZ1NwYWNlLmNvbG9yPXIuY29sb3J9KSxyLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtyLl9wb2ludGVySXNPdmVyPSEwfSksci5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3IuX3BvaW50ZXJJc092ZXI9ITF9KSxyLl9ncmlkPW5ldyB4LHIuX3VzZUltYWdlQmFyPyhyLl9ob3Jpem9udGFsQmFyPW5ldyBXLHIuX3ZlcnRpY2FsQmFyPW5ldyBXKTooci5faG9yaXpvbnRhbEJhcj1uZXcgaixyLl92ZXJ0aWNhbEJhcj1uZXcgaiksci5fd2luZG93PW5ldyBGKFwic2Nyb2xsVmlld2VyX3dpbmRvd1wiKSxyLl93aW5kb3cuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsci5fd2luZG93LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCxyLl9ncmlkLmFkZENvbHVtbkRlZmluaXRpb24oMSksci5fZ3JpZC5hZGRDb2x1bW5EZWZpbml0aW9uKDAsITApLHIuX2dyaWQuYWRkUm93RGVmaW5pdGlvbigxKSxyLl9ncmlkLmFkZFJvd0RlZmluaXRpb24oMCwhMCksdC5wcm90b3R5cGUuYWRkQ29udHJvbC5jYWxsKHIsci5fZ3JpZCksci5fZ3JpZC5hZGRDb250cm9sKHIuX3dpbmRvdywwLDApLHIuX3ZlcnRpY2FsQmFyU3BhY2U9bmV3IG0sci5fdmVydGljYWxCYXJTcGFjZS5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLl92ZXJ0aWNhbEJhclNwYWNlLnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX1RPUCxyLl92ZXJ0aWNhbEJhclNwYWNlLnRoaWNrbmVzcz0xLHIuX2dyaWQuYWRkQ29udHJvbChyLl92ZXJ0aWNhbEJhclNwYWNlLDAsMSksci5fYWRkQmFyKHIuX3ZlcnRpY2FsQmFyLHIuX3ZlcnRpY2FsQmFyU3BhY2UsITAsTWF0aC5QSSksci5faG9yaXpvbnRhbEJhclNwYWNlPW5ldyBtLHIuX2hvcml6b250YWxCYXJTcGFjZS5ob3Jpem9udGFsQWxpZ25tZW50PXAuSE9SSVpPTlRBTF9BTElHTk1FTlRfTEVGVCxyLl9ob3Jpem9udGFsQmFyU3BhY2UudmVydGljYWxBbGlnbm1lbnQ9cC5WRVJUSUNBTF9BTElHTk1FTlRfVE9QLHIuX2hvcml6b250YWxCYXJTcGFjZS50aGlja25lc3M9MSxyLl9ncmlkLmFkZENvbnRyb2woci5faG9yaXpvbnRhbEJhclNwYWNlLDEsMCksci5fYWRkQmFyKHIuX2hvcml6b250YWxCYXIsci5faG9yaXpvbnRhbEJhclNwYWNlLCExLDApLHIuX2RyYWdTcGFjZT1uZXcgbSxyLl9kcmFnU3BhY2UudGhpY2tuZXNzPTEsci5fZ3JpZC5hZGRDb250cm9sKHIuX2RyYWdTcGFjZSwxLDEpLHIuX3VzZUltYWdlQmFyfHwoci5iYXJDb2xvcj1cImdyZXlcIixyLmJhckJhY2tncm91bmQ9XCJ0cmFuc3BhcmVudFwiKSxyfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaG9yaXpvbnRhbEJhclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faG9yaXpvbnRhbEJhcn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2ZXJ0aWNhbEJhclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVydGljYWxCYXJ9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYWRkQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdD8odGhpcy5fd2luZG93LmFkZENvbnRyb2wodCksdGhpcyk6dGhpc30sZS5wcm90b3R5cGUucmVtb3ZlQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fd2luZG93LnJlbW92ZUNvbnRyb2wodCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2hpbGRyZW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpbmRvdy5jaGlsZHJlbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZmxhZ0Rlc2NlbmRhbnRzQXNNYXRyaXhEaXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5fY2hpbGRyZW47dDxlLmxlbmd0aDt0Kyspe2VbdF0uX21hcmtNYXRyaXhBc0RpcnR5KCl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmcmVlemVDb250cm9sc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93LmZyZWV6ZUNvbnRyb2xzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2luZG93LmZyZWV6ZUNvbnRyb2xzPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYnVja2V0V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpbmRvdy5idWNrZXRXaWR0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJidWNrZXRIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpbmRvdy5idWNrZXRIZWlnaHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuc2V0QnVja2V0U2l6ZXM9ZnVuY3Rpb24odCxlKXt0aGlzLl93aW5kb3cuc2V0QnVja2V0U2l6ZXModCxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZm9yY2VIb3Jpem9udGFsQmFyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JjZUhvcml6b250YWxCYXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ncmlkLnNldFJvd0RlZmluaXRpb24oMSx0P3RoaXMuX2JhclNpemU6MCwhMCksdGhpcy5faG9yaXpvbnRhbEJhci5pc1Zpc2libGU9dCx0aGlzLl9mb3JjZUhvcml6b250YWxCYXI9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmb3JjZVZlcnRpY2FsQmFyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JjZVZlcnRpY2FsQmFyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZ3JpZC5zZXRDb2x1bW5EZWZpbml0aW9uKDEsdD90aGlzLl9iYXJTaXplOjAsITApLHRoaXMuX3ZlcnRpY2FsQmFyLmlzVmlzaWJsZT10LHRoaXMuX2ZvcmNlVmVydGljYWxCYXI9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5yZXNldFdpbmRvdz1mdW5jdGlvbigpe3RoaXMuX3dpbmRvdy53aWR0aD1cIjEwMCVcIix0aGlzLl93aW5kb3cuaGVpZ2h0PVwiMTAwJVwifSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIlNjcm9sbFZpZXdlclwifSxlLnByb3RvdHlwZS5fYnVpbGRDbGllbnRTaXplcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaG9zdC5pZGVhbFJhdGlvO3RoaXMuX3dpbmRvdy5wYXJlbnRDbGllbnRXaWR0aD10aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC0odGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlfHx0aGlzLmZvcmNlVmVydGljYWxCYXI/dGhpcy5fYmFyU2l6ZSp0OjApLTIqdGhpcy50aGlja25lc3MsdGhpcy5fd2luZG93LnBhcmVudENsaWVudEhlaWdodD10aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQtKHRoaXMuX2hvcml6b250YWxCYXIuaXNWaXNpYmxlfHx0aGlzLmZvcmNlSG9yaXpvbnRhbEJhcj90aGlzLl9iYXJTaXplKnQ6MCktMip0aGlzLnRoaWNrbmVzcyx0aGlzLl9jbGllbnRXaWR0aD10aGlzLl93aW5kb3cucGFyZW50Q2xpZW50V2lkdGgsdGhpcy5fY2xpZW50SGVpZ2h0PXRoaXMuX3dpbmRvdy5wYXJlbnRDbGllbnRIZWlnaHR9LGUucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZz1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLl9hZGRpdGlvbmFsUHJvY2Vzc2luZy5jYWxsKHRoaXMsZSxpKSx0aGlzLl9idWlsZENsaWVudFNpemVzKCl9LGUucHJvdG90eXBlLl9wb3N0TWVhc3VyZT1mdW5jdGlvbigpe3QucHJvdG90eXBlLl9wb3N0TWVhc3VyZS5jYWxsKHRoaXMpLHRoaXMuX3VwZGF0ZVNjcm9sbGVyKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIndoZWVsUHJlY2lzaW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aGVlbFByZWNpc2lvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3doZWVsUHJlY2lzaW9uIT09dCYmKHQ8MCYmKHQ9MCksdD4xJiYodD0xKSx0aGlzLl93aGVlbFByZWNpc2lvbj10KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJzY3JvbGxCYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsQmFyU3BhY2UuYmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hvcml6b250YWxCYXJTcGFjZS5iYWNrZ3JvdW5kIT09dCYmKHRoaXMuX2hvcml6b250YWxCYXJTcGFjZS5iYWNrZ3JvdW5kPXQsdGhpcy5fdmVydGljYWxCYXJTcGFjZS5iYWNrZ3JvdW5kPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckNvbG9yXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJDb2xvcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhckNvbG9yIT09dCYmKHRoaXMuX2JhckNvbG9yPXQsdGhpcy5faG9yaXpvbnRhbEJhci5jb2xvcj10LHRoaXMuX3ZlcnRpY2FsQmFyLmNvbG9yPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fYmFySW1hZ2UhPT10KXt0aGlzLl9iYXJJbWFnZT10O3ZhciBlPXRoaXMuX2hvcml6b250YWxCYXIsaT10aGlzLl92ZXJ0aWNhbEJhcjtlLnRodW1iSW1hZ2U9dCxpLnRodW1iSW1hZ2U9dH19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaG9yaXpvbnRhbFRodW1iSW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hvcml6b250YWxCYXJJbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2hvcml6b250YWxCYXJJbWFnZSE9PXQmJih0aGlzLl9ob3Jpem9udGFsQmFySW1hZ2U9dCx0aGlzLl9ob3Jpem9udGFsQmFyLnRodW1iSW1hZ2U9dCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmVydGljYWxUaHVtYkltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJ0aWNhbEJhckltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdmVydGljYWxCYXJJbWFnZSE9PXQmJih0aGlzLl92ZXJ0aWNhbEJhckltYWdlPXQsdGhpcy5fdmVydGljYWxCYXIudGh1bWJJbWFnZT10KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXJTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXJTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFyU2l6ZSE9PXQmJih0aGlzLl9iYXJTaXplPXQsdGhpcy5fbWFya0FzRGlydHkoKSx0aGlzLl9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZSYmdGhpcy5fZ3JpZC5zZXRSb3dEZWZpbml0aW9uKDEsdGhpcy5fYmFyU2l6ZSwhMCksdGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlJiZ0aGlzLl9ncmlkLnNldENvbHVtbkRlZmluaXRpb24oMSx0aGlzLl9iYXJTaXplLCEwKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJMZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RodW1iTGVuZ3RofSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fdGh1bWJMZW5ndGghPT10KXt0PD0wJiYodD0uMSksdD4xJiYodD0xKSx0aGlzLl90aHVtYkxlbmd0aD10O3ZhciBlPXRoaXMuX2hvcml6b250YWxCYXIsaT10aGlzLl92ZXJ0aWNhbEJhcjtlLnRodW1iTGVuZ3RoPXQsaS50aHVtYkxlbmd0aD10LHRoaXMuX21hcmtBc0RpcnR5KCl9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRodW1iSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aHVtYkhlaWdodH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3RodW1iSGVpZ2h0IT09dCl7dDw9MCYmKHQ9LjEpLHQ+MSYmKHQ9MSksdGhpcy5fdGh1bWJIZWlnaHQ9dDt2YXIgZT10aGlzLl9ob3Jpem9udGFsQmFyLGk9dGhpcy5fdmVydGljYWxCYXI7ZS50aHVtYkhlaWdodD10LGkudGh1bWJIZWlnaHQ9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXJJbWFnZUhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFySW1hZ2VIZWlnaHR9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9iYXJJbWFnZUhlaWdodCE9PXQpe3Q8PTAmJih0PS4xKSx0PjEmJih0PTEpLHRoaXMuX2JhckltYWdlSGVpZ2h0PXQ7dmFyIGU9dGhpcy5faG9yaXpvbnRhbEJhcixpPXRoaXMuX3ZlcnRpY2FsQmFyO2UuYmFySW1hZ2VIZWlnaHQ9dCxpLmJhckltYWdlSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKX19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaG9yaXpvbnRhbEJhckltYWdlSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsQmFySW1hZ2VIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ob3Jpem9udGFsQmFySW1hZ2VIZWlnaHQhPT10JiYodDw9MCYmKHQ9LjEpLHQ+MSYmKHQ9MSksdGhpcy5faG9yaXpvbnRhbEJhckltYWdlSGVpZ2h0PXQsdGhpcy5faG9yaXpvbnRhbEJhci5iYXJJbWFnZUhlaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZlcnRpY2FsQmFySW1hZ2VIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnRpY2FsQmFySW1hZ2VIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92ZXJ0aWNhbEJhckltYWdlSGVpZ2h0IT09dCYmKHQ8PTAmJih0PS4xKSx0PjEmJih0PTEpLHRoaXMuX3ZlcnRpY2FsQmFySW1hZ2VIZWlnaHQ9dCx0aGlzLl92ZXJ0aWNhbEJhci5iYXJJbWFnZUhlaWdodD10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhckJhY2tncm91bmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhckJhY2tncm91bmR9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9iYXJCYWNrZ3JvdW5kIT09dCl7dGhpcy5fYmFyQmFja2dyb3VuZD10O3ZhciBlPXRoaXMuX2hvcml6b250YWxCYXIsaT10aGlzLl92ZXJ0aWNhbEJhcjtlLmJhY2tncm91bmQ9dCxpLmJhY2tncm91bmQ9dCx0aGlzLl9kcmFnU3BhY2UuYmFja2dyb3VuZD10fX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYXJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFyQmFja2dyb3VuZEltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFyQmFja2dyb3VuZEltYWdlLHRoaXMuX2JhckJhY2tncm91bmRJbWFnZT10O3ZhciBlPXRoaXMuX2hvcml6b250YWxCYXIsaT10aGlzLl92ZXJ0aWNhbEJhcjtlLmJhY2tncm91bmRJbWFnZT10LGkuYmFja2dyb3VuZEltYWdlPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaG9yaXpvbnRhbEJhckltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsQmFyQmFja2dyb3VuZEltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faG9yaXpvbnRhbEJhckJhY2tncm91bmRJbWFnZSx0aGlzLl9ob3Jpem9udGFsQmFyQmFja2dyb3VuZEltYWdlPXQsdGhpcy5faG9yaXpvbnRhbEJhci5iYWNrZ3JvdW5kSW1hZ2U9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2ZXJ0aWNhbEJhckltYWdlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJ0aWNhbEJhckJhY2tncm91bmRJbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZlcnRpY2FsQmFyQmFja2dyb3VuZEltYWdlLHRoaXMuX3ZlcnRpY2FsQmFyQmFja2dyb3VuZEltYWdlPXQsdGhpcy5fdmVydGljYWxCYXIuYmFja2dyb3VuZEltYWdlPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldFdpbmRvd1Bvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ob3N0LmlkZWFsUmF0aW8sZT10aGlzLl93aW5kb3cuX2N1cnJlbnRNZWFzdXJlLndpZHRoLGk9dGhpcy5fd2luZG93Ll9jdXJyZW50TWVhc3VyZS5oZWlnaHQscj10aGlzLl9jbGllbnRXaWR0aC1lLG49dGhpcy5fY2xpZW50SGVpZ2h0LWksbz10aGlzLl9ob3Jpem9udGFsQmFyLnZhbHVlL3QqcitcInB4XCIscz10aGlzLl92ZXJ0aWNhbEJhci52YWx1ZS90Km4rXCJweFwiO28hPT10aGlzLl93aW5kb3cubGVmdCYmKHRoaXMuX3dpbmRvdy5sZWZ0PW8sdGhpcy5mcmVlemVDb250cm9sc3x8KHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApKSxzIT09dGhpcy5fd2luZG93LnRvcCYmKHRoaXMuX3dpbmRvdy50b3A9cyx0aGlzLmZyZWV6ZUNvbnRyb2xzfHwodGhpcy5fcmVidWlsZExheW91dD0hMCkpfSxlLnByb3RvdHlwZS5fdXBkYXRlU2Nyb2xsZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl93aW5kb3cuX2N1cnJlbnRNZWFzdXJlLndpZHRoLGU9dGhpcy5fd2luZG93Ll9jdXJyZW50TWVhc3VyZS5oZWlnaHQ7dGhpcy5faG9yaXpvbnRhbEJhci5pc1Zpc2libGUmJnQ8PXRoaXMuX2NsaWVudFdpZHRoJiYhdGhpcy5mb3JjZUhvcml6b250YWxCYXI/KHRoaXMuX2dyaWQuc2V0Um93RGVmaW5pdGlvbigxLDAsITApLHRoaXMuX2hvcml6b250YWxCYXIuaXNWaXNpYmxlPSExLHRoaXMuX2hvcml6b250YWxCYXIudmFsdWU9MCx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKTohdGhpcy5faG9yaXpvbnRhbEJhci5pc1Zpc2libGUmJih0PnRoaXMuX2NsaWVudFdpZHRofHx0aGlzLmZvcmNlSG9yaXpvbnRhbEJhcikmJih0aGlzLl9ncmlkLnNldFJvd0RlZmluaXRpb24oMSx0aGlzLl9iYXJTaXplLCEwKSx0aGlzLl9ob3Jpem9udGFsQmFyLmlzVmlzaWJsZT0hMCx0aGlzLl9yZWJ1aWxkTGF5b3V0PSEwKSx0aGlzLl92ZXJ0aWNhbEJhci5pc1Zpc2libGUmJmU8PXRoaXMuX2NsaWVudEhlaWdodCYmIXRoaXMuZm9yY2VWZXJ0aWNhbEJhcj8odGhpcy5fZ3JpZC5zZXRDb2x1bW5EZWZpbml0aW9uKDEsMCwhMCksdGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlPSExLHRoaXMuX3ZlcnRpY2FsQmFyLnZhbHVlPTAsdGhpcy5fcmVidWlsZExheW91dD0hMCk6IXRoaXMuX3ZlcnRpY2FsQmFyLmlzVmlzaWJsZSYmKGU+dGhpcy5fY2xpZW50SGVpZ2h0fHx0aGlzLmZvcmNlVmVydGljYWxCYXIpJiYodGhpcy5fZ3JpZC5zZXRDb2x1bW5EZWZpbml0aW9uKDEsdGhpcy5fYmFyU2l6ZSwhMCksdGhpcy5fdmVydGljYWxCYXIuaXNWaXNpYmxlPSEwLHRoaXMuX3JlYnVpbGRMYXlvdXQ9ITApLHRoaXMuX2J1aWxkQ2xpZW50U2l6ZXMoKTt2YXIgaT10aGlzLmhvc3QuaWRlYWxSYXRpbzt0aGlzLl9ob3Jpem9udGFsQmFyLnRodW1iV2lkdGg9LjkqdGhpcy5fdGh1bWJMZW5ndGgqKHRoaXMuX2NsaWVudFdpZHRoL2kpK1wicHhcIix0aGlzLl92ZXJ0aWNhbEJhci50aHVtYldpZHRoPS45KnRoaXMuX3RodW1iTGVuZ3RoKih0aGlzLl9jbGllbnRIZWlnaHQvaSkrXCJweFwifSxlLnByb3RvdHlwZS5fbGluaz1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5fbGluay5jYWxsKHRoaXMsZSksdGhpcy5fYXR0YWNoV2hlZWwoKX0sZS5wcm90b3R5cGUuX2FkZEJhcj1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj10aGlzO3QucGFkZGluZ0xlZnQ9MCx0LndpZHRoPVwiMTAwJVwiLHQuaGVpZ2h0PVwiMTAwJVwiLHQuYmFyT2Zmc2V0PTAsdC52YWx1ZT0wLHQubWF4aW11bT0xLHQuaG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0NFTlRFUix0LnZlcnRpY2FsQWxpZ25tZW50PXAuVkVSVElDQUxfQUxJR05NRU5UX0NFTlRFUix0LmlzVmVydGljYWw9aSx0LnJvdGF0aW9uPXIsdC5pc1Zpc2libGU9ITEsZS5hZGRDb250cm9sKHQpLHQub25WYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtuLl9zZXRXaW5kb3dQb3NpdGlvbigpfSl9LGUucHJvdG90eXBlLl9hdHRhY2hXaGVlbD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5faG9zdCYmIXRoaXMuX29uV2hlZWxPYnNlcnZlciYmKHRoaXMuX29uV2hlZWxPYnNlcnZlcj10aGlzLm9uV2hlZWxPYnNlcnZhYmxlLmFkZChmdW5jdGlvbihlKXt0Ll9wb2ludGVySXNPdmVyJiYoMT09dC5fdmVydGljYWxCYXIuaXNWaXNpYmxlJiYoZS55PDAmJnQuX3ZlcnRpY2FsQmFyLnZhbHVlPjA/dC5fdmVydGljYWxCYXIudmFsdWUtPXQuX3doZWVsUHJlY2lzaW9uOmUueT4wJiZ0Ll92ZXJ0aWNhbEJhci52YWx1ZTx0Ll92ZXJ0aWNhbEJhci5tYXhpbXVtJiYodC5fdmVydGljYWxCYXIudmFsdWUrPXQuX3doZWVsUHJlY2lzaW9uKSksMT09dC5faG9yaXpvbnRhbEJhci5pc1Zpc2libGUmJihlLng8MCYmdC5faG9yaXpvbnRhbEJhci52YWx1ZTx0Ll9ob3Jpem9udGFsQmFyLm1heGltdW0/dC5faG9yaXpvbnRhbEJhci52YWx1ZSs9dC5fd2hlZWxQcmVjaXNpb246ZS54PjAmJnQuX2hvcml6b250YWxCYXIudmFsdWU+MCYmKHQuX2hvcml6b250YWxCYXIudmFsdWUtPXQuX3doZWVsUHJlY2lzaW9uKSkpfSkpfSxlLnByb3RvdHlwZS5fcmVuZGVySGlnaGxpZ2h0U3BlY2lmaWM9ZnVuY3Rpb24oZSl7dGhpcy5pc0hpZ2hsaWdodGVkJiYodC5wcm90b3R5cGUuX3JlbmRlckhpZ2hsaWdodFNwZWNpZmljLmNhbGwodGhpcyxlKSx0aGlzLl9ncmlkLl9yZW5kZXJIaWdobGlnaHRTcGVjaWZpYyhlKSxlLnJlc3RvcmUoKSl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLm9uV2hlZWxPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbldoZWVsT2JzZXJ2ZXIpLHRoaXMuX29uV2hlZWxPYnNlcnZlcj1udWxsLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sZX0obSk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLlNjcm9sbFZpZXdlclwiXT16O3ZhciBHPWZ1bmN0aW9uKCl7fSxYPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUub25LZXlQcmVzc09ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxlLmRlZmF1bHRCdXR0b25XaWR0aD1cIjQwcHhcIixlLmRlZmF1bHRCdXR0b25IZWlnaHQ9XCI0MHB4XCIsZS5kZWZhdWx0QnV0dG9uUGFkZGluZ0xlZnQ9XCIycHhcIixlLmRlZmF1bHRCdXR0b25QYWRkaW5nUmlnaHQ9XCIycHhcIixlLmRlZmF1bHRCdXR0b25QYWRkaW5nVG9wPVwiMnB4XCIsZS5kZWZhdWx0QnV0dG9uUGFkZGluZ0JvdHRvbT1cIjJweFwiLGUuZGVmYXVsdEJ1dHRvbkNvbG9yPVwiI0RERFwiLGUuZGVmYXVsdEJ1dHRvbkJhY2tncm91bmQ9XCIjMDcwNzA3XCIsZS5zaGlmdEJ1dHRvbkNvbG9yPVwiIzc3OTlGRlwiLGUuc2VsZWN0ZWRTaGlmdFRoaWNrbmVzcz0xLGUuc2hpZnRTdGF0ZT0wLGUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dD1udWxsLGUuX2Nvbm5lY3RlZElucHV0VGV4dHM9W10sZS5fb25LZXlQcmVzc09ic2VydmVyPW51bGwsZX1yZXR1cm4gbihlLHQpLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiVmlydHVhbEtleWJvYXJkXCJ9LGUucHJvdG90eXBlLl9jcmVhdGVLZXk9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLHI9Ty5DcmVhdGVTaW1wbGVCdXR0b24odCx0KTtyZXR1cm4gci53aWR0aD1lJiZlLndpZHRoP2Uud2lkdGg6dGhpcy5kZWZhdWx0QnV0dG9uV2lkdGgsci5oZWlnaHQ9ZSYmZS5oZWlnaHQ/ZS5oZWlnaHQ6dGhpcy5kZWZhdWx0QnV0dG9uSGVpZ2h0LHIuY29sb3I9ZSYmZS5jb2xvcj9lLmNvbG9yOnRoaXMuZGVmYXVsdEJ1dHRvbkNvbG9yLHIuYmFja2dyb3VuZD1lJiZlLmJhY2tncm91bmQ/ZS5iYWNrZ3JvdW5kOnRoaXMuZGVmYXVsdEJ1dHRvbkJhY2tncm91bmQsci5wYWRkaW5nTGVmdD1lJiZlLnBhZGRpbmdMZWZ0P2UucGFkZGluZ0xlZnQ6dGhpcy5kZWZhdWx0QnV0dG9uUGFkZGluZ0xlZnQsci5wYWRkaW5nUmlnaHQ9ZSYmZS5wYWRkaW5nUmlnaHQ/ZS5wYWRkaW5nUmlnaHQ6dGhpcy5kZWZhdWx0QnV0dG9uUGFkZGluZ1JpZ2h0LHIucGFkZGluZ1RvcD1lJiZlLnBhZGRpbmdUb3A/ZS5wYWRkaW5nVG9wOnRoaXMuZGVmYXVsdEJ1dHRvblBhZGRpbmdUb3Asci5wYWRkaW5nQm90dG9tPWUmJmUucGFkZGluZ0JvdHRvbT9lLnBhZGRpbmdCb3R0b206dGhpcy5kZWZhdWx0QnV0dG9uUGFkZGluZ0JvdHRvbSxyLnRoaWNrbmVzcz0wLHIuaXNGb2N1c0ludmlzaWJsZT0hMCxyLnNoYWRvd0NvbG9yPXRoaXMuc2hhZG93Q29sb3Isci5zaGFkb3dCbHVyPXRoaXMuc2hhZG93Qmx1cixyLnNoYWRvd09mZnNldFg9dGhpcy5zaGFkb3dPZmZzZXRYLHIuc2hhZG93T2Zmc2V0WT10aGlzLnNoYWRvd09mZnNldFksci5vblBvaW50ZXJVcE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7aS5vbktleVByZXNzT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModCl9KSxyfSxlLnByb3RvdHlwZS5hZGRLZXlzUm93PWZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IEM7aS5pc1ZlcnRpY2FsPSExLGkuaXNGb2N1c0ludmlzaWJsZT0hMDtmb3IodmFyIHI9bnVsbCxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPW51bGw7ZSYmZS5sZW5ndGg9PT10Lmxlbmd0aCYmKG89ZVtuXSk7dmFyIHM9dGhpcy5fY3JlYXRlS2V5KHRbbl0sbyk7KCFyfHxzLmhlaWdodEluUGl4ZWxzPnIuaGVpZ2h0SW5QaXhlbHMpJiYocj1zKSxpLmFkZENvbnRyb2wocyl9aS5oZWlnaHQ9cj9yLmhlaWdodDp0aGlzLmRlZmF1bHRCdXR0b25IZWlnaHQsdGhpcy5hZGRDb250cm9sKGkpfSxlLnByb3RvdHlwZS5hcHBseVNoaWZ0U3RhdGU9ZnVuY3Rpb24odCl7aWYodGhpcy5jaGlsZHJlbilmb3IodmFyIGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy5jaGlsZHJlbltlXTtpZihpJiZpLmNoaWxkcmVuKWZvcih2YXIgcj1pLG49MDtuPHIuY2hpbGRyZW4ubGVuZ3RoO24rKyl7dmFyIG89ci5jaGlsZHJlbltuXTtpZihvJiZvLmNoaWxkcmVuWzBdKXt2YXIgcz1vLmNoaWxkcmVuWzBdO1wi4oenXCI9PT1zLnRleHQmJihvLmNvbG9yPXQ/dGhpcy5zaGlmdEJ1dHRvbkNvbG9yOnRoaXMuZGVmYXVsdEJ1dHRvbkNvbG9yLG8udGhpY2tuZXNzPXQ+MT90aGlzLnNlbGVjdGVkU2hpZnRUaGlja25lc3M6MCkscy50ZXh0PXQ+MD9zLnRleHQudG9VcHBlckNhc2UoKTpzLnRleHQudG9Mb3dlckNhc2UoKX19fX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29ubmVjdGVkSW5wdXRUZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCF0aGlzLl9jb25uZWN0ZWRJbnB1dFRleHRzLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5wdXQ9PT10fSkpe251bGw9PT10aGlzLl9vbktleVByZXNzT2JzZXJ2ZXImJih0aGlzLl9vbktleVByZXNzT2JzZXJ2ZXI9dGhpcy5vbktleVByZXNzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7aWYoZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0KXtzd2l0Y2goZS5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0Ll9ob3N0LmZvY3VzZWRDb250cm9sPWUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dCx0KXtjYXNlXCLih6dcIjpyZXR1cm4gZS5zaGlmdFN0YXRlKyssZS5zaGlmdFN0YXRlPjImJihlLnNoaWZ0U3RhdGU9MCksdm9pZCBlLmFwcGx5U2hpZnRTdGF0ZShlLnNoaWZ0U3RhdGUpO2Nhc2VcIuKGkFwiOnJldHVybiB2b2lkIGUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dC5wcm9jZXNzS2V5KDgpO2Nhc2VcIuKGtVwiOnJldHVybiB2b2lkIGUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dC5wcm9jZXNzS2V5KDEzKX1lLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQucHJvY2Vzc0tleSgtMSxlLnNoaWZ0U3RhdGU/dC50b1VwcGVyQ2FzZSgpOnQpLDE9PT1lLnNoaWZ0U3RhdGUmJihlLnNoaWZ0U3RhdGU9MCxlLmFwcGx5U2hpZnRTdGF0ZShlLnNoaWZ0U3RhdGUpKX19KSksdGhpcy5pc1Zpc2libGU9ITEsdGhpcy5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PXQsdC5fY29ubmVjdGVkVmlydHVhbEtleWJvYXJkPXRoaXM7dmFyIGk9dC5vbkZvY3VzT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtlLl9jdXJyZW50bHlDb25uZWN0ZWRJbnB1dFRleHQ9dCx0Ll9jb25uZWN0ZWRWaXJ0dWFsS2V5Ym9hcmQ9ZSxlLmlzVmlzaWJsZT0hMH0pLHI9dC5vbkJsdXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3QuX2Nvbm5lY3RlZFZpcnR1YWxLZXlib2FyZD1udWxsLGUuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dD1udWxsLGUuaXNWaXNpYmxlPSExfSk7dGhpcy5fY29ubmVjdGVkSW5wdXRUZXh0cy5wdXNoKHtpbnB1dDp0LG9uQmx1ck9ic2VydmVyOnIsb25Gb2N1c09ic2VydmVyOml9KX19LGUucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0KXt2YXIgaT10aGlzLl9jb25uZWN0ZWRJbnB1dFRleHRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pbnB1dD09PXR9KTsxPT09aS5sZW5ndGgmJih0aGlzLl9yZW1vdmVDb25uZWN0ZWRJbnB1dE9ic2VydmFibGVzKGlbMF0pLHRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHM9dGhpcy5fY29ubmVjdGVkSW5wdXRUZXh0cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5wdXQhPT10fSksdGhpcy5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PT09dCYmKHRoaXMuX2N1cnJlbnRseUNvbm5lY3RlZElucHV0VGV4dD1udWxsKSl9ZWxzZSB0aGlzLl9jb25uZWN0ZWRJbnB1dFRleHRzLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fcmVtb3ZlQ29ubmVjdGVkSW5wdXRPYnNlcnZhYmxlcyh0KX0pLHRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHM9W107MD09PXRoaXMuX2Nvbm5lY3RlZElucHV0VGV4dHMubGVuZ3RoJiYodGhpcy5fY3VycmVudGx5Q29ubmVjdGVkSW5wdXRUZXh0PW51bGwsdGhpcy5vbktleVByZXNzT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25LZXlQcmVzc09ic2VydmVyKSx0aGlzLl9vbktleVByZXNzT2JzZXJ2ZXI9bnVsbCl9LGUucHJvdG90eXBlLl9yZW1vdmVDb25uZWN0ZWRJbnB1dE9ic2VydmFibGVzPWZ1bmN0aW9uKHQpe3QuaW5wdXQuX2Nvbm5lY3RlZFZpcnR1YWxLZXlib2FyZD1udWxsLHQuaW5wdXQub25Gb2N1c09ic2VydmFibGUucmVtb3ZlKHQub25Gb2N1c09ic2VydmVyKSx0LmlucHV0Lm9uQmx1ck9ic2VydmFibGUucmVtb3ZlKHQub25CbHVyT2JzZXJ2ZXIpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuZGlzY29ubmVjdCgpfSxlLkNyZWF0ZURlZmF1bHRMYXlvdXQ9ZnVuY3Rpb24odCl7dmFyIGk9bmV3IGUodCk7cmV0dXJuIGkuYWRkS2V5c1JvdyhbXCIxXCIsXCIyXCIsXCIzXCIsXCI0XCIsXCI1XCIsXCI2XCIsXCI3XCIsXCI4XCIsXCI5XCIsXCIwXCIsXCLihpBcIl0pLGkuYWRkS2V5c1JvdyhbXCJxXCIsXCJ3XCIsXCJlXCIsXCJyXCIsXCJ0XCIsXCJ5XCIsXCJ1XCIsXCJpXCIsXCJvXCIsXCJwXCJdKSxpLmFkZEtleXNSb3coW1wiYVwiLFwic1wiLFwiZFwiLFwiZlwiLFwiZ1wiLFwiaFwiLFwialwiLFwia1wiLFwibFwiLFwiO1wiLFwiJ1wiLFwi4oa1XCJdKSxpLmFkZEtleXNSb3coW1wi4oenXCIsXCJ6XCIsXCJ4XCIsXCJjXCIsXCJ2XCIsXCJiXCIsXCJuXCIsXCJtXCIsXCIsXCIsXCIuXCIsXCIvXCJdKSxpLmFkZEtleXNSb3coW1wiIFwiXSxbe3dpZHRoOlwiMjAwcHhcIn1dKSxpfSxlfShDKTtzLl9UeXBlU3RvcmUuUmVnaXN0ZXJlZFR5cGVzW1wiQkFCWUxPTi5HVUkuVmlydHVhbEtleWJvYXJkXCJdPVg7dmFyIFk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlKXx8dGhpcztyZXR1cm4gaS5uYW1lPWUsaS5fY2VsbFdpZHRoPTIwLGkuX2NlbGxIZWlnaHQ9MjAsaS5fbWlub3JMaW5lVGlja25lc3M9MSxpLl9taW5vckxpbmVDb2xvcj1cIkRhcmtHcmF5XCIsaS5fbWFqb3JMaW5lVGlja25lc3M9MixpLl9tYWpvckxpbmVDb2xvcj1cIldoaXRlXCIsaS5fbWFqb3JMaW5lRnJlcXVlbmN5PTUsaS5fYmFja2dyb3VuZD1cIkJsYWNrXCIsaS5fZGlzcGxheU1ham9yTGluZXM9ITAsaS5fZGlzcGxheU1pbm9yTGluZXM9ITAsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRpc3BsYXlNaW5vckxpbmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNwbGF5TWlub3JMaW5lc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3BsYXlNaW5vckxpbmVzIT09dCYmKHRoaXMuX2Rpc3BsYXlNaW5vckxpbmVzPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZGlzcGxheU1ham9yTGluZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXlNYWpvckxpbmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlzcGxheU1ham9yTGluZXMhPT10JiYodGhpcy5fZGlzcGxheU1ham9yTGluZXM9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrZ3JvdW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZCE9PXQmJih0aGlzLl9iYWNrZ3JvdW5kPXQsdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2VsbFdpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jZWxsV2lkdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jZWxsV2lkdGg9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNlbGxIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NlbGxIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jZWxsSGVpZ2h0PXQsdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtaW5vckxpbmVUaWNrbmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWlub3JMaW5lVGlja25lc3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9taW5vckxpbmVUaWNrbmVzcz10LHRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWlub3JMaW5lQ29sb3JcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbm9yTGluZUNvbG9yfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbWlub3JMaW5lQ29sb3I9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1ham9yTGluZVRpY2tuZXNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYWpvckxpbmVUaWNrbmVzc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX21ham9yTGluZVRpY2tuZXNzPXQsdGhpcy5fbWFya0FzRGlydHkoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtYWpvckxpbmVDb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFqb3JMaW5lQ29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYWpvckxpbmVDb2xvcj10LHRoaXMuX21hcmtBc0RpcnR5KCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibWFqb3JMaW5lRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYWpvckxpbmVGcmVxdWVuY3l9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tYWpvckxpbmVGcmVxdWVuY3k9dCx0aGlzLl9tYXJrQXNEaXJ0eSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7aWYodC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5faXNFbmFibGVkKXt0aGlzLl9iYWNrZ3JvdW5kJiYodC5maWxsU3R5bGU9dGhpcy5fYmFja2dyb3VuZCx0LmZpbGxSZWN0KHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wLHRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLHRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCkpO3ZhciBpPXRoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoL3RoaXMuX2NlbGxXaWR0aCxyPXRoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC90aGlzLl9jZWxsSGVpZ2h0LG49dGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCt0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aC8yLG89dGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodC8yO2lmKHRoaXMuX2Rpc3BsYXlNaW5vckxpbmVzKXt0LnN0cm9rZVN0eWxlPXRoaXMuX21pbm9yTGluZUNvbG9yLHQubGluZVdpZHRoPXRoaXMuX21pbm9yTGluZVRpY2tuZXNzO2Zvcih2YXIgcz0taS8yO3M8aS8yO3MrKyl7dmFyIGE9bitzKnRoaXMuY2VsbFdpZHRoO3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8oYSx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3ApLHQubGluZVRvKGEsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wK3RoaXMuX2N1cnJlbnRNZWFzdXJlLmhlaWdodCksdC5zdHJva2UoKX1mb3IodmFyIGg9LXIvMjtoPHIvMjtoKyspe3ZhciBsPW8raCp0aGlzLmNlbGxIZWlnaHQ7dC5iZWdpblBhdGgoKSx0Lm1vdmVUbyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0LGwpLHQubGluZVRvKHRoaXMuX2N1cnJlbnRNZWFzdXJlLmxlZnQrdGhpcy5fY3VycmVudE1lYXN1cmUud2lkdGgsbCksdC5zdHJva2UoKX19aWYodGhpcy5fZGlzcGxheU1ham9yTGluZXMpe3Quc3Ryb2tlU3R5bGU9dGhpcy5fbWFqb3JMaW5lQ29sb3IsdC5saW5lV2lkdGg9dGhpcy5fbWFqb3JMaW5lVGlja25lc3M7Zm9yKHM9LWkvMit0aGlzLl9tYWpvckxpbmVGcmVxdWVuY3k7czxpLzI7cys9dGhpcy5fbWFqb3JMaW5lRnJlcXVlbmN5KXthPW4rcyp0aGlzLmNlbGxXaWR0aDt0LmJlZ2luUGF0aCgpLHQubW92ZVRvKGEsdGhpcy5fY3VycmVudE1lYXN1cmUudG9wKSx0LmxpbmVUbyhhLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCt0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHQuc3Ryb2tlKCl9Zm9yKGg9LXIvMit0aGlzLl9tYWpvckxpbmVGcmVxdWVuY3k7aDxyLzI7aCs9dGhpcy5fbWFqb3JMaW5lRnJlcXVlbmN5KXtsPW8raCp0aGlzLmNlbGxIZWlnaHQ7dC5tb3ZlVG8odGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCxsKSx0LmxpbmVUbyh0aGlzLl9jdXJyZW50TWVhc3VyZS5sZWZ0K3RoaXMuX2N1cnJlbnRNZWFzdXJlLndpZHRoLGwpLHQuY2xvc2VQYXRoKCksdC5zdHJva2UoKX19fXQucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkRpc3BsYXlHcmlkXCJ9LGV9KHApO3MuX1R5cGVTdG9yZS5SZWdpc3RlcmVkVHlwZXNbXCJCQUJZTE9OLkdVSS5EaXNwbGF5R3JpZFwiXT1ZO3ZhciBVPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkubmFtZT1lLGkuX3RlbXBNZWFzdXJlPW5ldyBfKDAsMCwwLDApLGl9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkaXNwbGF5VGh1bWJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXlUaHVtYiYmbnVsbCE9dGhpcy50aHVtYkltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGlzcGxheVRodW1iIT09dCYmKHRoaXMuX2Rpc3BsYXlUaHVtYj10LHRoaXMuX21hcmtBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImJhY2tncm91bmRJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZEltYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UhPT10JiYodGhpcy5fYmFja2dyb3VuZEltYWdlPXQsdCYmIXQuaXNMb2FkZWQmJnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3JldHVybiBlLl9tYXJrQXNEaXJ0eSgpfSksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmFsdWVCYXJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWVCYXJJbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fdmFsdWVCYXJJbWFnZSE9PXQmJih0aGlzLl92YWx1ZUJhckltYWdlPXQsdCYmIXQuaXNMb2FkZWQmJnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3JldHVybiBlLl9tYXJrQXNEaXJ0eSgpfSksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidGh1bWJJbWFnZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGh1bWJJbWFnZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fdGh1bWJJbWFnZSE9PXQmJih0aGlzLl90aHVtYkltYWdlPXQsdCYmIXQuaXNMb2FkZWQmJnQub25JbWFnZUxvYWRlZE9ic2VydmFibGUuYWRkT25jZShmdW5jdGlvbigpe3JldHVybiBlLl9tYXJrQXNEaXJ0eSgpfSksdGhpcy5fbWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJJbWFnZUJhc2VkU2xpZGVyXCJ9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQsZSl7dC5zYXZlKCksdGhpcy5fYXBwbHlTdGF0ZXModCksdGhpcy5fcHJlcGFyZVJlbmRlcmluZ0RhdGEoXCJyZWN0YW5nbGVcIik7dmFyIGk9dGhpcy5fZ2V0VGh1bWJQb3NpdGlvbigpLHI9dGhpcy5fcmVuZGVyTGVmdCxuPXRoaXMuX3JlbmRlclRvcCxvPXRoaXMuX3JlbmRlcldpZHRoLHM9dGhpcy5fcmVuZGVySGVpZ2h0O3RoaXMuX2JhY2tncm91bmRJbWFnZSYmKHRoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHIsbixvLHMpLHRoaXMuaXNUaHVtYkNsYW1wZWQmJnRoaXMuZGlzcGxheVRodW1iJiYodGhpcy5pc1ZlcnRpY2FsP3RoaXMuX3RlbXBNZWFzdXJlLmhlaWdodCs9dGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3M6dGhpcy5fdGVtcE1lYXN1cmUud2lkdGgrPXRoaXMuX2VmZmVjdGl2ZVRodW1iVGhpY2tuZXNzKSx0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSx0aGlzLl9iYWNrZ3JvdW5kSW1hZ2UuX2RyYXcodCkpLHRoaXMuX3ZhbHVlQmFySW1hZ2UmJih0aGlzLmlzVmVydGljYWw/dGhpcy5pc1RodW1iQ2xhbXBlZCYmdGhpcy5kaXNwbGF5VGh1bWI/dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHMocixuK2ksbyxzLWkrdGhpcy5fZWZmZWN0aXZlVGh1bWJUaGlja25lc3MpOnRoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHIsbitpLG8scy1pKTp0aGlzLmlzVGh1bWJDbGFtcGVkJiZ0aGlzLmRpc3BsYXlUaHVtYj90aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyhyLG4saSt0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcy8yLHMpOnRoaXMuX3RlbXBNZWFzdXJlLmNvcHlGcm9tRmxvYXRzKHIsbixpLHMpLHRoaXMuX3ZhbHVlQmFySW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSx0aGlzLl92YWx1ZUJhckltYWdlLl9kcmF3KHQpKSx0aGlzLmRpc3BsYXlUaHVtYiYmKHRoaXMuaXNWZXJ0aWNhbD90aGlzLl90ZW1wTWVhc3VyZS5jb3B5RnJvbUZsb2F0cyhyLXRoaXMuX2VmZmVjdGl2ZUJhck9mZnNldCx0aGlzLl9jdXJyZW50TWVhc3VyZS50b3AraSx0aGlzLl9jdXJyZW50TWVhc3VyZS53aWR0aCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyk6dGhpcy5fdGVtcE1lYXN1cmUuY29weUZyb21GbG9hdHModGhpcy5fY3VycmVudE1lYXN1cmUubGVmdCtpLHRoaXMuX2N1cnJlbnRNZWFzdXJlLnRvcCx0aGlzLl9lZmZlY3RpdmVUaHVtYlRoaWNrbmVzcyx0aGlzLl9jdXJyZW50TWVhc3VyZS5oZWlnaHQpLHRoaXMuX3RodW1iSW1hZ2UuX2N1cnJlbnRNZWFzdXJlLmNvcHlGcm9tKHRoaXMuX3RlbXBNZWFzdXJlKSx0aGlzLl90aHVtYkltYWdlLl9kcmF3KHQpKSx0LnJlc3RvcmUoKX0sZX0oTCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkltYWdlQmFzZWRTbGlkZXJcIl09VTtwLkFkZEhlYWRlcj1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbj1uZXcgQyhcInBhbmVsXCIpLG89IXJ8fHIuaXNIb3Jpem9udGFsLHM9IXJ8fHIuY29udHJvbEZpcnN0O24uaXNWZXJ0aWNhbD0hbzt2YXIgYT1uZXcgeShcImhlYWRlclwiKTtyZXR1cm4gYS50ZXh0PWUsYS50ZXh0SG9yaXpvbnRhbEFsaWdubWVudD1wLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQsbz9hLndpZHRoPWk6YS5oZWlnaHQ9aSxzPyhuLmFkZENvbnRyb2wodCksbi5hZGRDb250cm9sKGEpLGEucGFkZGluZ0xlZnQ9XCI1cHhcIik6KG4uYWRkQ29udHJvbChhKSxuLmFkZENvbnRyb2wodCksYS5wYWRkaW5nUmlnaHQ9XCI1cHhcIiksYS5zaGFkb3dCbHVyPXQuc2hhZG93Qmx1cixhLnNoYWRvd0NvbG9yPXQuc2hhZG93Q29sb3IsYS5zaGFkb3dPZmZzZXRYPXQuc2hhZG93T2Zmc2V0WCxhLnNoYWRvd09mZnNldFk9dC5zaGFkb3dPZmZzZXRZLG59O3ZhciBxPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9mb250RmFtaWx5PVwiQXJpYWxcIix0aGlzLl9mb250U3R5bGU9XCJcIix0aGlzLl9mb250V2VpZ2h0PVwiXCIsdGhpcy5fZm9udFNpemU9bmV3IGEoMTgsYS5VTklUTU9ERV9QSVhFTCwhMSksdGhpcy5vbkNoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5faG9zdD10fXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmb250U2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFNpemUudG9TdHJpbmcodGhpcy5faG9zdCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250U2l6ZS50b1N0cmluZyh0aGlzLl9ob3N0KSE9PXQmJnRoaXMuX2ZvbnRTaXplLmZyb21TdHJpbmcodCkmJnRoaXMub25DaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZm9udEZhbWlseVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udEZhbWlseX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbnRGYW1pbHkhPT10JiYodGhpcy5fZm9udEZhbWlseT10LHRoaXMub25DaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcykpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRTdHlsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9udFN0eWxlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9udFN0eWxlIT09dCYmKHRoaXMuX2ZvbnRTdHlsZT10LHRoaXMub25DaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcykpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZvbnRXZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvbnRXZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mb250V2VpZ2h0IT09dCYmKHRoaXMuX2ZvbnRXZWlnaHQ9dCx0aGlzLm9uQ2hhbmdlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHRoaXMpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5vbkNoYW5nZWRPYnNlcnZhYmxlLmNsZWFyKCl9LHR9KCksSz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxyLG4sbyxhKXt2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz0hMSksdm9pZCAwPT09YSYmKGE9cy5UZXh0dXJlLk5FQVJFU1RfU0FNUExJTkdNT0RFKTt2YXIgaD10LmNhbGwodGhpcyxlLHt3aWR0aDppLGhlaWdodDpyfSxuLG8sYSxzLkNvbnN0YW50cy5URVhUVVJFRk9STUFUX1JHQkEpfHx0aGlzO3JldHVybiBoLl9pc0RpcnR5PSExLGguX3Jvb3RDb250YWluZXI9bmV3IGcoXCJyb290XCIpLGguX2xhc3RDb250cm9sT3Zlcj17fSxoLl9sYXN0Q29udHJvbERvd249e30saC5fY2FwdHVyaW5nQ29udHJvbD17fSxoLl9saW5rZWRDb250cm9scz1uZXcgQXJyYXksaC5faXNGdWxsc2NyZWVuPSExLGguX2Z1bGxzY3JlZW5WaWV3cG9ydD1uZXcgcy5WaWV3cG9ydCgwLDAsMSwxKSxoLl9pZGVhbFdpZHRoPTAsaC5faWRlYWxIZWlnaHQ9MCxoLl91c2VTbWFsbGVzdElkZWFsPSExLGguX3JlbmRlckF0SWRlYWxTaXplPSExLGguX2Jsb2NrTmV4dEZvY3VzQ2hlY2s9ITEsaC5fcmVuZGVyU2NhbGU9MSxoLl9jdXJzb3JDaGFuZ2VkPSExLGguX2RlZmF1bHRNb3VzZVBvaW50ZXJJZD0wLGguX251bUxheW91dENhbGxzPTAsaC5fbnVtUmVuZGVyQ2FsbHM9MCxoLl9jbGlwYm9hcmREYXRhPVwiXCIsaC5vbkNsaXBib2FyZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLm9uQ29udHJvbFBpY2tlZE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLm9uQmVnaW5MYXlvdXRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsaC5vbkVuZExheW91dE9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsaC5vbkVuZFJlbmRlck9ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSxoLnByZW11bEFscGhhPSExLGguX3VzZUludmFsaWRhdGVSZWN0T3B0aW1pemF0aW9uPSEwLGguX2ludmFsaWRhdGVkUmVjdGFuZ2xlPW51bGwsaC5fY2xlYXJNZWFzdXJlPW5ldyBfKDAsMCwwLDApLGgub25DbGlwYm9hcmRDb3B5PWZ1bmN0aW9uKHQpe3ZhciBlPXQsaT1uZXcgcy5DbGlwYm9hcmRJbmZvKHMuQ2xpcGJvYXJkRXZlbnRUeXBlcy5DT1BZLGUpO2gub25DbGlwYm9hcmRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhpKSxlLnByZXZlbnREZWZhdWx0KCl9LGgub25DbGlwYm9hcmRDdXQ9ZnVuY3Rpb24odCl7dmFyIGU9dCxpPW5ldyBzLkNsaXBib2FyZEluZm8ocy5DbGlwYm9hcmRFdmVudFR5cGVzLkNVVCxlKTtoLm9uQ2xpcGJvYXJkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMoaSksZS5wcmV2ZW50RGVmYXVsdCgpfSxoLm9uQ2xpcGJvYXJkUGFzdGU9ZnVuY3Rpb24odCl7dmFyIGU9dCxpPW5ldyBzLkNsaXBib2FyZEluZm8ocy5DbGlwYm9hcmRFdmVudFR5cGVzLlBBU1RFLGUpO2gub25DbGlwYm9hcmRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhpKSxlLnByZXZlbnREZWZhdWx0KCl9LChuPWguZ2V0U2NlbmUoKSkmJmguX3RleHR1cmU/KGguX3Jvb3RFbGVtZW50PW4uZ2V0RW5naW5lKCkuZ2V0SW5wdXRFbGVtZW50KCksaC5fcmVuZGVyT2JzZXJ2ZXI9bi5vbkJlZm9yZUNhbWVyYVJlbmRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe3JldHVybiBoLl9jaGVja1VwZGF0ZSh0KX0pLGguX3ByZUtleWJvYXJkT2JzZXJ2ZXI9bi5vblByZUtleWJvYXJkT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24odCl7aC5fZm9jdXNlZENvbnRyb2wmJih0LnR5cGU9PT1zLktleWJvYXJkRXZlbnRUeXBlcy5LRVlET1dOJiZoLl9mb2N1c2VkQ29udHJvbC5wcm9jZXNzS2V5Ym9hcmQodC5ldmVudCksdC5za2lwT25Qb2ludGVyT2JzZXJ2YWJsZT0hMCl9KSxoLl9yb290Q29udGFpbmVyLl9saW5rKGgpLGguaGFzQWxwaGE9ITAsaSYmcnx8KGguX3Jlc2l6ZU9ic2VydmVyPW4uZ2V0RW5naW5lKCkub25SZXNpemVPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe3JldHVybiBoLl9vblJlc2l6ZSgpfSksaC5fb25SZXNpemUoKSksaC5fdGV4dHVyZS5pc1JlYWR5PSEwLGgpOmh9cmV0dXJuIG4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJudW1MYXlvdXRDYWxsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbnVtTGF5b3V0Q2FsbHN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwibnVtUmVuZGVyQ2FsbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bVJlbmRlckNhbGxzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlbmRlclNjYWxlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJTY2FsZX0sc2V0OmZ1bmN0aW9uKHQpe3QhPT10aGlzLl9yZW5kZXJTY2FsZSYmKHRoaXMuX3JlbmRlclNjYWxlPXQsdGhpcy5fb25SZXNpemUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYmFja2dyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja2dyb3VuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tncm91bmQhPT10JiYodGhpcy5fYmFja2dyb3VuZD10LHRoaXMubWFya0FzRGlydHkoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaWRlYWxXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWRlYWxXaWR0aH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lkZWFsV2lkdGghPT10JiYodGhpcy5faWRlYWxXaWR0aD10LHRoaXMubWFya0FzRGlydHkoKSx0aGlzLl9yb290Q29udGFpbmVyLl9tYXJrQWxsQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpZGVhbEhlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWRlYWxIZWlnaHR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pZGVhbEhlaWdodCE9PXQmJih0aGlzLl9pZGVhbEhlaWdodD10LHRoaXMubWFya0FzRGlydHkoKSx0aGlzLl9yb290Q29udGFpbmVyLl9tYXJrQWxsQXNEaXJ0eSgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ1c2VTbWFsbGVzdElkZWFsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VTbWFsbGVzdElkZWFsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdXNlU21hbGxlc3RJZGVhbCE9PXQmJih0aGlzLl91c2VTbWFsbGVzdElkZWFsPXQsdGhpcy5tYXJrQXNEaXJ0eSgpLHRoaXMuX3Jvb3RDb250YWluZXIuX21hcmtBbGxBc0RpcnR5KCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlbmRlckF0SWRlYWxTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJBdElkZWFsU2l6ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3JlbmRlckF0SWRlYWxTaXplIT09dCYmKHRoaXMuX3JlbmRlckF0SWRlYWxTaXplPXQsdGhpcy5fb25SZXNpemUoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaWRlYWxSYXRpb1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD0wLGU9MDtyZXR1cm4gdGhpcy5faWRlYWxXaWR0aCYmKHQ9dGhpcy5nZXRTaXplKCkud2lkdGgvdGhpcy5faWRlYWxXaWR0aCksdGhpcy5faWRlYWxIZWlnaHQmJihlPXRoaXMuZ2V0U2l6ZSgpLmhlaWdodC90aGlzLl9pZGVhbEhlaWdodCksdGhpcy5fdXNlU21hbGxlc3RJZGVhbCYmdGhpcy5faWRlYWxXaWR0aCYmdGhpcy5faWRlYWxIZWlnaHQ/d2luZG93LmlubmVyV2lkdGg8d2luZG93LmlubmVySGVpZ2h0P3Q6ZTp0aGlzLl9pZGVhbFdpZHRoP3Q6dGhpcy5faWRlYWxIZWlnaHQ/ZToxfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImxheWVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXllclRvRGlzcG9zZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyb290Q29udGFpbmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldENoaWxkcmVuPWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuX3Jvb3RDb250YWluZXJdfSxlLnByb3RvdHlwZS5nZXREZXNjZW5kYW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyLmdldERlc2NlbmRhbnRzKHQsZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImZvY3VzZWRDb250cm9sXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb2N1c2VkQ29udHJvbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvY3VzZWRDb250cm9sIT10JiYodGhpcy5fZm9jdXNlZENvbnRyb2wmJnRoaXMuX2ZvY3VzZWRDb250cm9sLm9uQmx1cigpLHQmJnQub25Gb2N1cygpLHRoaXMuX2ZvY3VzZWRDb250cm9sPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzRm9yZWdyb3VuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5sYXllcnx8IXRoaXMubGF5ZXIuaXNCYWNrZ3JvdW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5sYXllciYmdGhpcy5sYXllci5pc0JhY2tncm91bmQhPT0hdCYmKHRoaXMubGF5ZXIuaXNCYWNrZ3JvdW5kPSF0KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjbGlwYm9hcmREYXRhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGlwYm9hcmREYXRhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2xpcGJvYXJkRGF0YT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldENsYXNzTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQWR2YW5jZWREeW5hbWljVGV4dHVyZVwifSxlLnByb3RvdHlwZS5leGVjdXRlT25BbGxDb250cm9scz1mdW5jdGlvbih0LGUpe2V8fChlPXRoaXMuX3Jvb3RDb250YWluZXIpLHQoZSk7Zm9yKHZhciBpPTAscj1lLmNoaWxkcmVuO2k8ci5sZW5ndGg7aSsrKXt2YXIgbj1yW2ldO24uY2hpbGRyZW4/dGhpcy5leGVjdXRlT25BbGxDb250cm9scyh0LG4pOnQobil9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ1c2VJbnZhbGlkYXRlUmVjdE9wdGltaXphdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlSW52YWxpZGF0ZVJlY3RPcHRpbWl6YXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLl91c2VJbnZhbGlkYXRlUmVjdE9wdGltaXphdGlvbj10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmludmFsaWRhdGVSZWN0PWZ1bmN0aW9uKHQsZSxpLHIpe2lmKHRoaXMuX3VzZUludmFsaWRhdGVSZWN0T3B0aW1pemF0aW9uKWlmKHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlKXt2YXIgbj1NYXRoLmNlaWwoTWF0aC5tYXgodGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUubGVmdCt0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS53aWR0aC0xLGkpKSxvPU1hdGguY2VpbChNYXRoLm1heCh0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS50b3ArdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUuaGVpZ2h0LTEscikpO3RoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLmxlZnQ9TWF0aC5mbG9vcihNYXRoLm1pbih0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS5sZWZ0LHQpKSx0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS50b3A9TWF0aC5mbG9vcihNYXRoLm1pbih0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZS50b3AsZSkpLHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLndpZHRoPW4tdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUubGVmdCsxLHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLmhlaWdodD1vLXRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlLnRvcCsxfWVsc2UgdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGU9bmV3IF8odCxlLGktdCsxLHItZSsxKX0sZS5wcm90b3R5cGUubWFya0FzRGlydHk9ZnVuY3Rpb24oKXt0aGlzLl9pc0RpcnR5PSEwfSxlLnByb3RvdHlwZS5jcmVhdGVTdHlsZT1mdW5jdGlvbigpe3JldHVybiBuZXcgcSh0aGlzKX0sZS5wcm90b3R5cGUuYWRkQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcm9vdENvbnRhaW5lci5hZGRDb250cm9sKHQpLHRoaXN9LGUucHJvdG90eXBlLnJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXIucmVtb3ZlQ29udHJvbCh0KSx0aGlzfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRTY2VuZSgpO2UmJih0aGlzLl9yb290RWxlbWVudD1udWxsLGUub25CZWZvcmVDYW1lcmFSZW5kZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9yZW5kZXJPYnNlcnZlciksdGhpcy5fcmVzaXplT2JzZXJ2ZXImJmUuZ2V0RW5naW5lKCkub25SZXNpemVPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9yZXNpemVPYnNlcnZlciksdGhpcy5fcG9pbnRlck1vdmVPYnNlcnZlciYmZS5vblByZVBvaW50ZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9wb2ludGVyTW92ZU9ic2VydmVyKSx0aGlzLl9wb2ludGVyT2JzZXJ2ZXImJmUub25Qb2ludGVyT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fcG9pbnRlck9ic2VydmVyKSx0aGlzLl9wcmVLZXlib2FyZE9ic2VydmVyJiZlLm9uUHJlS2V5Ym9hcmRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9wcmVLZXlib2FyZE9ic2VydmVyKSx0aGlzLl9jYW52YXNQb2ludGVyT3V0T2JzZXJ2ZXImJmUuZ2V0RW5naW5lKCkub25DYW52YXNQb2ludGVyT3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fY2FudmFzUG9pbnRlck91dE9ic2VydmVyKSx0aGlzLl9sYXllclRvRGlzcG9zZSYmKHRoaXMuX2xheWVyVG9EaXNwb3NlLnRleHR1cmU9bnVsbCx0aGlzLl9sYXllclRvRGlzcG9zZS5kaXNwb3NlKCksdGhpcy5fbGF5ZXJUb0Rpc3Bvc2U9bnVsbCksdGhpcy5fcm9vdENvbnRhaW5lci5kaXNwb3NlKCksdGhpcy5vbkNsaXBib2FyZE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uQ29udHJvbFBpY2tlZE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vbkVuZFJlbmRlck9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uQmVnaW5MYXlvdXRPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5vbkVuZExheW91dE9ic2VydmFibGUuY2xlYXIoKSx0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcykpfSxlLnByb3RvdHlwZS5fb25SZXNpemU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNjZW5lKCk7aWYodCl7dmFyIGU9dC5nZXRFbmdpbmUoKSxpPXRoaXMuZ2V0U2l6ZSgpLHI9ZS5nZXRSZW5kZXJXaWR0aCgpKnRoaXMuX3JlbmRlclNjYWxlLG49ZS5nZXRSZW5kZXJIZWlnaHQoKSp0aGlzLl9yZW5kZXJTY2FsZTt0aGlzLl9yZW5kZXJBdElkZWFsU2l6ZSYmKHRoaXMuX2lkZWFsV2lkdGg/KG49bip0aGlzLl9pZGVhbFdpZHRoL3Iscj10aGlzLl9pZGVhbFdpZHRoKTp0aGlzLl9pZGVhbEhlaWdodCYmKHI9cip0aGlzLl9pZGVhbEhlaWdodC9uLG49dGhpcy5faWRlYWxIZWlnaHQpKSxpLndpZHRoPT09ciYmaS5oZWlnaHQ9PT1ufHwodGhpcy5zY2FsZVRvKHIsbiksdGhpcy5tYXJrQXNEaXJ0eSgpLCh0aGlzLl9pZGVhbFdpZHRofHx0aGlzLl9pZGVhbEhlaWdodCkmJnRoaXMuX3Jvb3RDb250YWluZXIuX21hcmtBbGxBc0RpcnR5KCkpLHRoaXMuaW52YWxpZGF0ZVJlY3QoMCwwLGkud2lkdGgtMSxpLmhlaWdodC0xKX19LGUucHJvdG90eXBlLl9nZXRHbG9iYWxWaWV3cG9ydD1mdW5jdGlvbih0KXt2YXIgZT10LmdldEVuZ2luZSgpO3JldHVybiB0aGlzLl9mdWxsc2NyZWVuVmlld3BvcnQudG9HbG9iYWwoZS5nZXRSZW5kZXJXaWR0aCgpLGUuZ2V0UmVuZGVySGVpZ2h0KCkpfSxlLnByb3RvdHlwZS5nZXRQcm9qZWN0ZWRQb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0U2NlbmUoKTtpZighaSlyZXR1cm4gcy5WZWN0b3IyLlplcm8oKTt2YXIgcj10aGlzLl9nZXRHbG9iYWxWaWV3cG9ydChpKSxuPXMuVmVjdG9yMy5Qcm9qZWN0KHQsZSxpLmdldFRyYW5zZm9ybU1hdHJpeCgpLHIpO3JldHVybiBuLnNjYWxlSW5QbGFjZSh0aGlzLnJlbmRlclNjYWxlKSxuZXcgcy5WZWN0b3IyKG4ueCxuLnkpfSxlLnByb3RvdHlwZS5fY2hlY2tVcGRhdGU9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2xheWVyVG9EaXNwb3NlfHwwIT0odC5sYXllck1hc2smdGhpcy5fbGF5ZXJUb0Rpc3Bvc2UubGF5ZXJNYXNrKSl7aWYodGhpcy5faXNGdWxsc2NyZWVuJiZ0aGlzLl9saW5rZWRDb250cm9scy5sZW5ndGgpe3ZhciBlPXRoaXMuZ2V0U2NlbmUoKTtpZighZSlyZXR1cm47Zm9yKHZhciBpPXRoaXMuX2dldEdsb2JhbFZpZXdwb3J0KGUpLHI9MCxuPXRoaXMuX2xpbmtlZENvbnRyb2xzO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO2lmKG8uaXNWaXNpYmxlKXt2YXIgYT1vLl9saW5rZWRNZXNoO2lmKGEmJiFhLmlzRGlzcG9zZWQoKSl7dmFyIGg9YS5nZXRCb3VuZGluZ0luZm8/YS5nZXRCb3VuZGluZ0luZm8oKS5ib3VuZGluZ1NwaGVyZS5jZW50ZXI6cy5WZWN0b3IzLlplcm9SZWFkT25seSxsPXMuVmVjdG9yMy5Qcm9qZWN0KGgsYS5nZXRXb3JsZE1hdHJpeCgpLGUuZ2V0VHJhbnNmb3JtTWF0cml4KCksaSk7bC56PDB8fGwuej4xP28ubm90UmVuZGVyYWJsZT0hMDooby5ub3RSZW5kZXJhYmxlPSExLGwuc2NhbGVJblBsYWNlKHRoaXMucmVuZGVyU2NhbGUpLG8uX21vdmVUb1Byb2plY3RlZFBvc2l0aW9uKGwpKX1lbHNlIHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7by5saW5rV2l0aE1lc2gobnVsbCl9KX19fSh0aGlzLl9pc0RpcnR5fHx0aGlzLl9yb290Q29udGFpbmVyLmlzRGlydHkpJiYodGhpcy5faXNEaXJ0eT0hMSx0aGlzLl9yZW5kZXIoKSx0aGlzLnVwZGF0ZSghMCx0aGlzLnByZW11bEFscGhhKSl9fSxlLnByb3RvdHlwZS5fcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRTaXplKCksZT10LndpZHRoLGk9dC5oZWlnaHQscj10aGlzLmdldENvbnRleHQoKTtyLmZvbnQ9XCIxOHB4IEFyaWFsXCIsci5zdHJva2VTdHlsZT1cIndoaXRlXCIsdGhpcy5vbkJlZ2luTGF5b3V0T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyk7dmFyIG49bmV3IF8oMCwwLGUsaSk7dGhpcy5fbnVtTGF5b3V0Q2FsbHM9MCx0aGlzLl9yb290Q29udGFpbmVyLl9sYXlvdXQobixyKSx0aGlzLm9uRW5kTGF5b3V0T2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy5faXNEaXJ0eT0hMSx0aGlzLl9pbnZhbGlkYXRlZFJlY3RhbmdsZT90aGlzLl9jbGVhck1lYXN1cmUuY29weUZyb20odGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGUpOnRoaXMuX2NsZWFyTWVhc3VyZS5jb3B5RnJvbUZsb2F0cygwLDAsZSxpKSxyLmNsZWFyUmVjdCh0aGlzLl9jbGVhck1lYXN1cmUubGVmdCx0aGlzLl9jbGVhck1lYXN1cmUudG9wLHRoaXMuX2NsZWFyTWVhc3VyZS53aWR0aCx0aGlzLl9jbGVhck1lYXN1cmUuaGVpZ2h0KSx0aGlzLl9iYWNrZ3JvdW5kJiYoci5zYXZlKCksci5maWxsU3R5bGU9dGhpcy5fYmFja2dyb3VuZCxyLmZpbGxSZWN0KHRoaXMuX2NsZWFyTWVhc3VyZS5sZWZ0LHRoaXMuX2NsZWFyTWVhc3VyZS50b3AsdGhpcy5fY2xlYXJNZWFzdXJlLndpZHRoLHRoaXMuX2NsZWFyTWVhc3VyZS5oZWlnaHQpLHIucmVzdG9yZSgpKSx0aGlzLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzKSx0aGlzLl9udW1SZW5kZXJDYWxscz0wLHRoaXMuX3Jvb3RDb250YWluZXIuX3JlbmRlcihyLHRoaXMuX2ludmFsaWRhdGVkUmVjdGFuZ2xlKSx0aGlzLm9uRW5kUmVuZGVyT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcyksdGhpcy5faW52YWxpZGF0ZWRSZWN0YW5nbGU9bnVsbH0sZS5wcm90b3R5cGUuX2NoYW5nZUN1cnNvcj1mdW5jdGlvbih0KXt0aGlzLl9yb290RWxlbWVudCYmKHRoaXMuX3Jvb3RFbGVtZW50LnN0eWxlLmN1cnNvcj10LHRoaXMuX2N1cnNvckNoYW5nZWQ9ITApfSxlLnByb3RvdHlwZS5fcmVnaXN0ZXJMYXN0Q29udHJvbERvd249ZnVuY3Rpb24odCxlKXt0aGlzLl9sYXN0Q29udHJvbERvd25bZV09dCx0aGlzLm9uQ29udHJvbFBpY2tlZE9ic2VydmFibGUubm90aWZ5T2JzZXJ2ZXJzKHQpfSxlLnByb3RvdHlwZS5fZG9QaWNraW5nPWZ1bmN0aW9uKHQsZSxpLHIsbixvLGEpe3ZhciBoPXRoaXMuZ2V0U2NlbmUoKTtpZihoKXt2YXIgbD1oLmdldEVuZ2luZSgpLHU9dGhpcy5nZXRTaXplKCk7aWYodGhpcy5faXNGdWxsc2NyZWVuKXt2YXIgYz0oaC5jYW1lcmFUb1VzZUZvclBvaW50ZXJzfHxoLmFjdGl2ZUNhbWVyYSkudmlld3BvcnQ7dCo9dS53aWR0aC8obC5nZXRSZW5kZXJXaWR0aCgpKmMud2lkdGgpLGUqPXUuaGVpZ2h0LyhsLmdldFJlbmRlckhlaWdodCgpKmMuaGVpZ2h0KX10aGlzLl9jYXB0dXJpbmdDb250cm9sW3JdP3RoaXMuX2NhcHR1cmluZ0NvbnRyb2xbcl0uX3Byb2Nlc3NPYnNlcnZhYmxlcyhpLHQsZSxyLG4pOih0aGlzLl9jdXJzb3JDaGFuZ2VkPSExLHRoaXMuX3Jvb3RDb250YWluZXIuX3Byb2Nlc3NQaWNraW5nKHQsZSxpLHIsbixvLGEpfHwodGhpcy5fY2hhbmdlQ3Vyc29yKFwiXCIpLGk9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFJiZ0aGlzLl9sYXN0Q29udHJvbE92ZXJbcl0mJih0aGlzLl9sYXN0Q29udHJvbE92ZXJbcl0uX29uUG9pbnRlck91dCh0aGlzLl9sYXN0Q29udHJvbE92ZXJbcl0pLGRlbGV0ZSB0aGlzLl9sYXN0Q29udHJvbE92ZXJbcl0pKSx0aGlzLl9jdXJzb3JDaGFuZ2VkfHx0aGlzLl9jaGFuZ2VDdXJzb3IoXCJcIiksdGhpcy5fbWFuYWdlRm9jdXMoKSl9fSxlLnByb3RvdHlwZS5fY2xlYW5Db250cm9sQWZ0ZXJSZW1vdmFsRnJvbUxpc3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gdCl7aWYodC5oYXNPd25Qcm9wZXJ0eShpKSl0W2ldPT09ZSYmZGVsZXRlIHRbaV19fSxlLnByb3RvdHlwZS5fY2xlYW5Db250cm9sQWZ0ZXJSZW1vdmFsPWZ1bmN0aW9uKHQpe3RoaXMuX2NsZWFuQ29udHJvbEFmdGVyUmVtb3ZhbEZyb21MaXN0KHRoaXMuX2xhc3RDb250cm9sRG93bix0KSx0aGlzLl9jbGVhbkNvbnRyb2xBZnRlclJlbW92YWxGcm9tTGlzdCh0aGlzLl9sYXN0Q29udHJvbE92ZXIsdCl9LGUucHJvdG90eXBlLmF0dGFjaD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLmdldFNjZW5lKCk7aWYoZSl7dmFyIGk9bmV3IHMuVmlld3BvcnQoMCwwLDAsMCk7dGhpcy5fcG9pbnRlck1vdmVPYnNlcnZlcj1lLm9uUHJlUG9pbnRlck9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHIsbil7aWYoIWUuaXNQb2ludGVyQ2FwdHVyZWQoci5ldmVudC5wb2ludGVySWQpJiYoci50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSTU9WRXx8ci50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSVVB8fHIudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUkRPV058fHIudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUldIRUVMKSYmZSl7ci50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSTU9WRSYmci5ldmVudC5wb2ludGVySWQmJih0Ll9kZWZhdWx0TW91c2VQb2ludGVySWQ9ci5ldmVudC5wb2ludGVySWQpO3ZhciBvPWUuY2FtZXJhVG9Vc2VGb3JQb2ludGVyc3x8ZS5hY3RpdmVDYW1lcmEsYT1lLmdldEVuZ2luZSgpO28/by52aWV3cG9ydC50b0dsb2JhbFRvUmVmKGEuZ2V0UmVuZGVyV2lkdGgoKSxhLmdldFJlbmRlckhlaWdodCgpLGkpOihpLng9MCxpLnk9MCxpLndpZHRoPWEuZ2V0UmVuZGVyV2lkdGgoKSxpLmhlaWdodD1hLmdldFJlbmRlckhlaWdodCgpKTt2YXIgaD1lLnBvaW50ZXJYL2EuZ2V0SGFyZHdhcmVTY2FsaW5nTGV2ZWwoKS1pLngsbD1lLnBvaW50ZXJZL2EuZ2V0SGFyZHdhcmVTY2FsaW5nTGV2ZWwoKS0oYS5nZXRSZW5kZXJIZWlnaHQoKS1pLnktaS5oZWlnaHQpO3QuX3Nob3VsZEJsb2NrUG9pbnRlcj0hMTt2YXIgdT1yLmV2ZW50LnBvaW50ZXJJZHx8dC5fZGVmYXVsdE1vdXNlUG9pbnRlcklkO3QuX2RvUGlja2luZyhoLGwsci50eXBlLHUsci5ldmVudC5idXR0b24sci5ldmVudC5kZWx0YVgsci5ldmVudC5kZWx0YVkpLHQuX3Nob3VsZEJsb2NrUG9pbnRlciYmKHIuc2tpcE9uUG9pbnRlck9ic2VydmFibGU9dC5fc2hvdWxkQmxvY2tQb2ludGVyKX19KSx0aGlzLl9hdHRhY2hUb09uUG9pbnRlck91dChlKX19LGUucHJvdG90eXBlLnJlZ2lzdGVyQ2xpcGJvYXJkRXZlbnRzPWZ1bmN0aW9uKCl7c2VsZi5hZGRFdmVudExpc3RlbmVyKFwiY29weVwiLHRoaXMub25DbGlwYm9hcmRDb3B5LCExKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJjdXRcIix0aGlzLm9uQ2xpcGJvYXJkQ3V0LCExKSxzZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXN0ZVwiLHRoaXMub25DbGlwYm9hcmRQYXN0ZSwhMSl9LGUucHJvdG90eXBlLnVuUmVnaXN0ZXJDbGlwYm9hcmRFdmVudHM9ZnVuY3Rpb24oKXtzZWxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb3B5XCIsdGhpcy5vbkNsaXBib2FyZENvcHkpLHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImN1dFwiLHRoaXMub25DbGlwYm9hcmRDdXQpLHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhc3RlXCIsdGhpcy5vbkNsaXBib2FyZFBhc3RlKX0sZS5wcm90b3R5cGUuYXR0YWNoVG9NZXNoPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpczt2b2lkIDA9PT1lJiYoZT0hMCk7dmFyIHI9dGhpcy5nZXRTY2VuZSgpO3ImJih0aGlzLl9wb2ludGVyT2JzZXJ2ZXI9ci5vblBvaW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbihlLHIpe2lmKGUudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkV8fGUudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUlVQfHxlLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJET1dOKXt2YXIgbj1lLmV2ZW50LnBvaW50ZXJJZHx8aS5fZGVmYXVsdE1vdXNlUG9pbnRlcklkO2lmKGUucGlja0luZm8mJmUucGlja0luZm8uaGl0JiZlLnBpY2tJbmZvLnBpY2tlZE1lc2g9PT10KXt2YXIgbz1lLnBpY2tJbmZvLmdldFRleHR1cmVDb29yZGluYXRlcygpO2lmKG8pe3ZhciBhPWkuZ2V0U2l6ZSgpO2kuX2RvUGlja2luZyhvLngqYS53aWR0aCwoMS1vLnkpKmEuaGVpZ2h0LGUudHlwZSxuLGUuZXZlbnQuYnV0dG9uKX19ZWxzZSBpZihlLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJVUCl7aWYoaS5fbGFzdENvbnRyb2xEb3duW25dJiZpLl9sYXN0Q29udHJvbERvd25bbl0uX2ZvcmNlUG9pbnRlclVwKG4pLGRlbGV0ZSBpLl9sYXN0Q29udHJvbERvd25bbl0saS5mb2N1c2VkQ29udHJvbCl7dmFyIGg9aS5mb2N1c2VkQ29udHJvbC5rZWVwc0ZvY3VzV2l0aCgpLGw9ITA7aWYoaClmb3IodmFyIHU9MCxjPWg7dTxjLmxlbmd0aDt1Kyspe3ZhciBfPWNbdV07aWYoaSE9PV8uX2hvc3Qpe3ZhciBkPV8uX2hvc3Q7aWYoZC5fbGFzdENvbnRyb2xPdmVyW25dJiZkLl9sYXN0Q29udHJvbE92ZXJbbl0uaXNBc2NlbmRhbnQoXykpe2w9ITE7YnJlYWt9fX1sJiYoaS5mb2N1c2VkQ29udHJvbD1udWxsKX19ZWxzZSBlLnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFJiYoaS5fbGFzdENvbnRyb2xPdmVyW25dJiZpLl9sYXN0Q29udHJvbE92ZXJbbl0uX29uUG9pbnRlck91dChpLl9sYXN0Q29udHJvbE92ZXJbbl0sITApLGRlbGV0ZSBpLl9sYXN0Q29udHJvbE92ZXJbbl0pfX0pLHQuZW5hYmxlUG9pbnRlck1vdmVFdmVudHM9ZSx0aGlzLl9hdHRhY2hUb09uUG9pbnRlck91dChyKSl9LGUucHJvdG90eXBlLm1vdmVGb2N1c1RvQ29udHJvbD1mdW5jdGlvbih0KXt0aGlzLmZvY3VzZWRDb250cm9sPXQsdGhpcy5fbGFzdFBpY2tlZENvbnRyb2w9dCx0aGlzLl9ibG9ja05leHRGb2N1c0NoZWNrPSEwfSxlLnByb3RvdHlwZS5fbWFuYWdlRm9jdXM9ZnVuY3Rpb24oKXtpZih0aGlzLl9ibG9ja05leHRGb2N1c0NoZWNrKXJldHVybiB0aGlzLl9ibG9ja05leHRGb2N1c0NoZWNrPSExLHZvaWQodGhpcy5fbGFzdFBpY2tlZENvbnRyb2w9dGhpcy5fZm9jdXNlZENvbnRyb2wpO2lmKHRoaXMuX2ZvY3VzZWRDb250cm9sJiZ0aGlzLl9mb2N1c2VkQ29udHJvbCE9PXRoaXMuX2xhc3RQaWNrZWRDb250cm9sKXtpZih0aGlzLl9sYXN0UGlja2VkQ29udHJvbC5pc0ZvY3VzSW52aXNpYmxlKXJldHVybjt0aGlzLmZvY3VzZWRDb250cm9sPW51bGx9fSxlLnByb3RvdHlwZS5fYXR0YWNoVG9PblBvaW50ZXJPdXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9jYW52YXNQb2ludGVyT3V0T2JzZXJ2ZXI9dC5nZXRFbmdpbmUoKS5vbkNhbnZhc1BvaW50ZXJPdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0KXtlLl9sYXN0Q29udHJvbE92ZXJbdC5wb2ludGVySWRdJiZlLl9sYXN0Q29udHJvbE92ZXJbdC5wb2ludGVySWRdLl9vblBvaW50ZXJPdXQoZS5fbGFzdENvbnRyb2xPdmVyW3QucG9pbnRlcklkXSksZGVsZXRlIGUuX2xhc3RDb250cm9sT3Zlclt0LnBvaW50ZXJJZF0sZS5fbGFzdENvbnRyb2xEb3duW3QucG9pbnRlcklkXSYmZS5fbGFzdENvbnRyb2xEb3duW3QucG9pbnRlcklkXSE9PWUuX2NhcHR1cmluZ0NvbnRyb2xbdC5wb2ludGVySWRdJiYoZS5fbGFzdENvbnRyb2xEb3duW3QucG9pbnRlcklkXS5fZm9yY2VQb2ludGVyVXAoKSxkZWxldGUgZS5fbGFzdENvbnRyb2xEb3duW3QucG9pbnRlcklkXSl9KX0sZS5DcmVhdGVGb3JNZXNoPWZ1bmN0aW9uKHQsaSxyLG4sbyl7dm9pZCAwPT09aSYmKGk9MTAyNCksdm9pZCAwPT09ciYmKHI9MTAyNCksdm9pZCAwPT09biYmKG49ITApLHZvaWQgMD09PW8mJihvPSExKTt2YXIgYT1uZXcgZSh0Lm5hbWUrXCIgQWR2YW5jZWREeW5hbWljVGV4dHVyZVwiLGkscix0LmdldFNjZW5lKCksITAscy5UZXh0dXJlLlRSSUxJTkVBUl9TQU1QTElOR01PREUpLGg9bmV3IHMuU3RhbmRhcmRNYXRlcmlhbChcIkFkdmFuY2VkRHluYW1pY1RleHR1cmVNYXRlcmlhbFwiLHQuZ2V0U2NlbmUoKSk7cmV0dXJuIGguYmFja0ZhY2VDdWxsaW5nPSExLGguZGlmZnVzZUNvbG9yPXMuQ29sb3IzLkJsYWNrKCksaC5zcGVjdWxhckNvbG9yPXMuQ29sb3IzLkJsYWNrKCksbz8oaC5kaWZmdXNlVGV4dHVyZT1hLGguZW1pc3NpdmVUZXh0dXJlPWEsYS5oYXNBbHBoYT0hMCk6KGguZW1pc3NpdmVUZXh0dXJlPWEsaC5vcGFjaXR5VGV4dHVyZT1hKSx0Lm1hdGVyaWFsPWgsYS5hdHRhY2hUb01lc2godCxuKSxhfSxlLkNyZWF0ZUZ1bGxzY3JlZW5VST1mdW5jdGlvbih0LGkscixuKXt2b2lkIDA9PT1pJiYoaT0hMCksdm9pZCAwPT09ciYmKHI9bnVsbCksdm9pZCAwPT09biYmKG49cy5UZXh0dXJlLkJJTElORUFSX1NBTVBMSU5HTU9ERSk7dmFyIG89bmV3IGUodCwwLDAsciwhMSxuKSxhPW5ldyBzLkxheWVyKHQrXCJfbGF5ZXJcIixudWxsLHIsIWkpO3JldHVybiBhLnRleHR1cmU9byxvLl9sYXllclRvRGlzcG9zZT1hLG8uX2lzRnVsbHNjcmVlbj0hMCxvLmF0dGFjaCgpLG99LGV9KHMuRHluYW1pY1RleHR1cmUpLFo9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMudGV4dHVyZT10LHRoaXMuX2NhcHR1cmVSZW5kZXJUaW1lPSExLHRoaXMuX3JlbmRlclRpbWU9bmV3IHMuUGVyZkNvdW50ZXIsdGhpcy5fY2FwdHVyZUxheW91dFRpbWU9ITEsdGhpcy5fbGF5b3V0VGltZT1uZXcgcy5QZXJmQ291bnRlcix0aGlzLl9vbkJlZ2luUmVuZGVyT2JzZXJ2ZXI9bnVsbCx0aGlzLl9vbkVuZFJlbmRlck9ic2VydmVyPW51bGwsdGhpcy5fb25CZWdpbkxheW91dE9ic2VydmVyPW51bGwsdGhpcy5fb25FbmRMYXlvdXRPYnNlcnZlcj1udWxsfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJyZW5kZXJUaW1lQ291bnRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyVGltZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsYXlvdXRUaW1lQ291bnRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF5b3V0VGltZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjYXB0dXJlUmVuZGVyVGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FwdHVyZVJlbmRlclRpbWV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3QhPT10aGlzLl9jYXB0dXJlUmVuZGVyVGltZSYmKHRoaXMuX2NhcHR1cmVSZW5kZXJUaW1lPXQsdD8odGhpcy5fb25CZWdpblJlbmRlck9ic2VydmVyPXRoaXMudGV4dHVyZS5vbkJlZ2luUmVuZGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtlLl9yZW5kZXJUaW1lLmJlZ2luTW9uaXRvcmluZygpfSksdGhpcy5fb25FbmRSZW5kZXJPYnNlcnZlcj10aGlzLnRleHR1cmUub25FbmRSZW5kZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX3JlbmRlclRpbWUuZW5kTW9uaXRvcmluZyghMCl9KSk6KHRoaXMudGV4dHVyZS5vbkJlZ2luUmVuZGVyT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25CZWdpblJlbmRlck9ic2VydmVyKSx0aGlzLl9vbkJlZ2luUmVuZGVyT2JzZXJ2ZXI9bnVsbCx0aGlzLnRleHR1cmUub25FbmRSZW5kZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkVuZFJlbmRlck9ic2VydmVyKSx0aGlzLl9vbkVuZFJlbmRlck9ic2VydmVyPW51bGwpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjYXB0dXJlTGF5b3V0VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FwdHVyZUxheW91dFRpbWV9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3QhPT10aGlzLl9jYXB0dXJlTGF5b3V0VGltZSYmKHRoaXMuX2NhcHR1cmVMYXlvdXRUaW1lPXQsdD8odGhpcy5fb25CZWdpbkxheW91dE9ic2VydmVyPXRoaXMudGV4dHVyZS5vbkJlZ2luTGF5b3V0T2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtlLl9sYXlvdXRUaW1lLmJlZ2luTW9uaXRvcmluZygpfSksdGhpcy5fb25FbmRMYXlvdXRPYnNlcnZlcj10aGlzLnRleHR1cmUub25FbmRMYXlvdXRPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX2xheW91dFRpbWUuZW5kTW9uaXRvcmluZyghMCl9KSk6KHRoaXMudGV4dHVyZS5vbkJlZ2luTGF5b3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25CZWdpbkxheW91dE9ic2VydmVyKSx0aGlzLl9vbkJlZ2luTGF5b3V0T2JzZXJ2ZXI9bnVsbCx0aGlzLnRleHR1cmUub25FbmRMYXlvdXRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkVuZExheW91dE9ic2VydmVyKSx0aGlzLl9vbkVuZExheW91dE9ic2VydmVyPW51bGwpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy50ZXh0dXJlLm9uQmVnaW5SZW5kZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9vbkJlZ2luUmVuZGVyT2JzZXJ2ZXIpLHRoaXMuX29uQmVnaW5SZW5kZXJPYnNlcnZlcj1udWxsLHRoaXMudGV4dHVyZS5vbkVuZFJlbmRlck9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uRW5kUmVuZGVyT2JzZXJ2ZXIpLHRoaXMuX29uRW5kUmVuZGVyT2JzZXJ2ZXI9bnVsbCx0aGlzLnRleHR1cmUub25CZWdpbkxheW91dE9ic2VydmFibGUucmVtb3ZlKHRoaXMuX29uQmVnaW5MYXlvdXRPYnNlcnZlciksdGhpcy5fb25CZWdpbkxheW91dE9ic2VydmVyPW51bGwsdGhpcy50ZXh0dXJlLm9uRW5kTGF5b3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fb25FbmRMYXlvdXRPYnNlcnZlciksdGhpcy5fb25FbmRMYXlvdXRPYnNlcnZlcj1udWxsLHRoaXMudGV4dHVyZT1udWxsfSx0fSgpLEo9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PW51bGwpLHRoaXMuX25vZGVzPXt9LHRoaXMuX25vZGVUeXBlcz17ZWxlbWVudDoxLGF0dHJpYnV0ZToyLHRleHQ6M30sdGhpcy5faXNMb2FkZWQ9ITEsdGhpcy5fb2JqZWN0QXR0cmlidXRlcz17dGV4dEhvcml6b250YWxBbGlnbm1lbnQ6MSx0ZXh0VmVydGljYWxBbGlnbm1lbnQ6Mixob3Jpem9udGFsQWxpZ25tZW50OjMsdmVydGljYWxBbGlnbm1lbnQ6NCxzdHJldGNoOjV9LHQmJih0aGlzLl9wYXJlbnRDbGFzcz10KX1yZXR1cm4gdC5wcm90b3R5cGUuX2dldENoYWluRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT13aW5kb3c7dGhpcy5fcGFyZW50Q2xhc3MmJihlPXRoaXMuX3BhcmVudENsYXNzKTt2YXIgaT10O2k9aS5zcGxpdChcIi5cIik7Zm9yKHZhciByPTA7cjxpLmxlbmd0aDtyKyspZT1lW2lbcl1dO3JldHVybiBlfSx0LnByb3RvdHlwZS5fZ2V0Q2xhc3NBdHRyaWJ1dGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5zcGxpdChcIi5cIik7cmV0dXJuIHMuX1R5cGVTdG9yZS5HZXRDbGFzcyhcIkJBQllMT04uR1VJLlwiK2VbMF0pW2VbMV1dfSx0LnByb3RvdHlwZS5fY3JlYXRlR3VpRWxlbWVudD1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09aSYmKGk9ITApO3RyeXt2YXIgcj1uZXcocy5fVHlwZVN0b3JlLkdldENsYXNzKFwiQkFCWUxPTi5HVUkuXCIrdC5ub2RlTmFtZSkpO2UmJmkmJmUuYWRkQ29udHJvbChyKTtmb3IodmFyIG49MDtuPHQuYXR0cmlidXRlcy5sZW5ndGg7bisrKWlmKCF0LmF0dHJpYnV0ZXNbbl0ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZGF0YXNvdXJjZVwiKSlpZih0LmF0dHJpYnV0ZXNbbl0ubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwib2JzZXJ2YWJsZVwiKSl7dmFyIG89dGhpcy5fZ2V0Q2hhaW5FbGVtZW50KHQuYXR0cmlidXRlc1tuXS52YWx1ZSk7clt0LmF0dHJpYnV0ZXNbbl0ubmFtZV0uYWRkKG8pfWVsc2UgaWYoXCJsaW5rV2l0aE1lc2hcIj09dC5hdHRyaWJ1dGVzW25dLm5hbWUpdGhpcy5fcGFyZW50Q2xhc3M/ci5saW5rV2l0aE1lc2godGhpcy5fcGFyZW50Q2xhc3NbdC5hdHRyaWJ1dGVzW25dLnZhbHVlXSk6ci5saW5rV2l0aE1lc2god2luZG93W3QuYXR0cmlidXRlc1tuXS52YWx1ZV0pO2Vsc2UgaWYodC5hdHRyaWJ1dGVzW25dLnZhbHVlLnN0YXJ0c1dpdGgoXCJ7e1wiKSYmdC5hdHRyaWJ1dGVzW25dLnZhbHVlLmVuZHNXaXRoKFwifX1cIikpe289dGhpcy5fZ2V0Q2hhaW5FbGVtZW50KHQuYXR0cmlidXRlc1tuXS52YWx1ZS5zdWJzdHJpbmcoMix0LmF0dHJpYnV0ZXNbbl0udmFsdWUubGVuZ3RoLTIpKTtyW3QuYXR0cmlidXRlc1tuXS5uYW1lXT1vfWVsc2UgdGhpcy5fb2JqZWN0QXR0cmlidXRlc1t0LmF0dHJpYnV0ZXNbbl0ubmFtZV0/clt0LmF0dHJpYnV0ZXNbbl0ubmFtZV09dGhpcy5fZ2V0Q2xhc3NBdHRyaWJ1dGUodC5hdHRyaWJ1dGVzW25dLnZhbHVlKTpcInRydWVcIj09dC5hdHRyaWJ1dGVzW25dLnZhbHVlfHxcImZhbHNlXCI9PXQuYXR0cmlidXRlc1tuXS52YWx1ZT9yW3QuYXR0cmlidXRlc1tuXS5uYW1lXT1cInRydWVcIj09dC5hdHRyaWJ1dGVzW25dLnZhbHVlOnJbdC5hdHRyaWJ1dGVzW25dLm5hbWVdPWlzTmFOKE51bWJlcih0LmF0dHJpYnV0ZXNbbl0udmFsdWUpKT90LmF0dHJpYnV0ZXNbbl0udmFsdWU6TnVtYmVyKHQuYXR0cmlidXRlc1tuXS52YWx1ZSk7aWYoIXQuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpZFwiKSlyZXR1cm4gdGhpcy5fbm9kZXNbdC5ub2RlTmFtZStPYmplY3Qua2V5cyh0aGlzLl9ub2RlcykubGVuZ3RoK1wiX2dlblwiXT1yLHI7dmFyIGE9dC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImlkXCIpLnZhbHVlO2lmKGEuc3RhcnRzV2l0aChcInt7XCIpJiZhLmVuZHNXaXRoKFwifX1cIikmJihhPXRoaXMuX2dldENoYWluRWxlbWVudChhLnN1YnN0cmluZygyLGEubGVuZ3RoLTIpKSksdGhpcy5fbm9kZXNbYV0pdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBEdXBsaWNhdGUgSUQsIGV2ZXJ5IGVsZW1lbnQgc2hvdWxkIGhhdmUgYW4gdW5pcXVlIElEIGF0dHJpYnV0ZVwiO3JldHVybiB0aGlzLl9ub2Rlc1thXT1yLHJ9Y2F0Y2goZSl7dGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBFcnJvciBwYXJzaW5nIENvbnRyb2wgXCIrdC5ub2RlTmFtZStcIixcIitlK1wiLlwifX0sdC5wcm90b3R5cGUuX3BhcnNlR3JpZD1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciByLG4sbyxzLGEsaD10LmNoaWxkcmVuLGw9ITEsdT0tMSxjPS0xLF89MCxkPTA7ZDxoLmxlbmd0aDtkKyspaWYoaFtkXS5ub2RlVHlwZT09dGhpcy5fbm9kZVR5cGVzLmVsZW1lbnQpe2lmKFwiUm93XCIhPWhbZF0ubm9kZU5hbWUpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBFeHBlY3RpbmcgUm93IG5vZGUsIHJlY2VpdmVkIFwiK2hbZF0ubm9kZU5hbWU7aWYodSs9MSxvPWhbZF0uY2hpbGRyZW4sIWhbZF0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJoZWlnaHRcIikpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBIZWlnaHQgbXVzdCBiZSBkZWZpbmVkIGZvciBncmlkIHJvd3NcIjtuPU51bWJlcihoW2RdLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaGVpZ2h0XCIpLm5vZGVWYWx1ZSksbD0hIWhbZF0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpc1BpeGVsXCIpJiZKU09OLnBhcnNlKGhbZF0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJpc1BpeGVsXCIpLm5vZGVWYWx1ZSksZS5hZGRSb3dEZWZpbml0aW9uKG4sbCk7Zm9yKHZhciBmPTA7ZjxvLmxlbmd0aDtmKyspaWYob1tmXS5ub2RlVHlwZT09dGhpcy5fbm9kZVR5cGVzLmVsZW1lbnQpe2lmKFwiQ29sdW1uXCIhPW9bZl0ubm9kZU5hbWUpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBFeHBlY3RpbmcgQ29sdW1uIG5vZGUsIHJlY2VpdmVkIFwiK29bZl0ubm9kZU5hbWU7aWYoYys9MSx1PjAmJmM+Xyl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IEluIHRoZSBHcmlkIGVsZW1lbnQsIHRoZSBudW1iZXIgb2YgY29sdW1ucyBpcyBkZWZpbmVkIGluIHRoZSBmaXJzdCByb3csIGRvIG5vdCBhZGQgbW9yZSBjb2x1bW5zIGluIHRoZSBzdWJzZXF1ZW50IHJvd3MuXCI7aWYoMD09dSl7aWYoIW9bZl0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ3aWR0aFwiKSl0aHJvd1wiWG1sTG9hZGVyIEV4Y2VwdGlvbiA6IFdpZHRoIG11c3QgYmUgZGVmaW5lZCBmb3IgYWxsIHRoZSBncmlkIGNvbHVtbnMgaW4gdGhlIGZpcnN0IHJvd1wiO3I9TnVtYmVyKG9bZl0uYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oXCJ3aWR0aFwiKS5ub2RlVmFsdWUpLGw9ISFvW2ZdLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaXNQaXhlbFwiKSYmSlNPTi5wYXJzZShvW2ZdLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiaXNQaXhlbFwiKS5ub2RlVmFsdWUpLGUuYWRkQ29sdW1uRGVmaW5pdGlvbihyLGwpfXM9b1tmXS5jaGlsZHJlbjtmb3IodmFyIHA9MDtwPHMubGVuZ3RoO3ArKylzW3BdLm5vZGVUeXBlPT10aGlzLl9ub2RlVHlwZXMuZWxlbWVudCYmKGE9dGhpcy5fY3JlYXRlR3VpRWxlbWVudChzW3BdLGUsITEpLGUuYWRkQ29udHJvbChhLHUsYyksc1twXS5maXJzdENoaWxkJiZ0aGlzLl9wYXJzZVhtbChzW3BdLmZpcnN0Q2hpbGQsYSkpfTA9PXUmJihfPWMpLGM9LTF9dC5uZXh0U2libGluZyYmdGhpcy5fcGFyc2VYbWwodC5uZXh0U2libGluZyxpKX0sdC5wcm90b3R5cGUuX3BhcnNlRWxlbWVudD1mdW5jdGlvbih0LGUsaSl7dC5maXJzdENoaWxkJiZ0aGlzLl9wYXJzZVhtbCh0LmZpcnN0Q2hpbGQsZSksdC5uZXh0U2libGluZyYmdGhpcy5fcGFyc2VYbWwodC5uZXh0U2libGluZyxpKX0sdC5wcm90b3R5cGUuX3ByZXBhcmVTb3VyY2VFbGVtZW50PWZ1bmN0aW9uKHQsZSxpLHIsbil7dGhpcy5fcGFyZW50Q2xhc3M/dGhpcy5fcGFyZW50Q2xhc3NbaV09cltuXTp3aW5kb3dbaV09cltuXSx0LmZpcnN0Q2hpbGQmJnRoaXMuX3BhcnNlWG1sKHQuZmlyc3RDaGlsZCxlLCEwKX0sdC5wcm90b3R5cGUuX3BhcnNlRWxlbWVudHNGcm9tU291cmNlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10LmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKFwiZGF0YVNvdXJjZVwiKS52YWx1ZTtpZighci5pbmNsdWRlcyhcIiBpbiBcIikpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBNYWxmb3JtZWQgWE1MLCBEYXRhIFNvdXJjZSBtdXN0IGluY2x1ZGUgYW4gaW5cIjt2YXIgbj0hMCxvPXIuc3BsaXQoXCIgaW4gXCIpO2lmKG8ubGVuZ3RoPDIpdGhyb3dcIlhtbExvYWRlciBFeGNlcHRpb24gOiBNYWxmb3JtZWQgWE1MLCBEYXRhIFNvdXJjZSBtdXN0IGFuIGl0ZXJhdG9yIGFuZCBhIHNvdXJjZVwiO3ZhciBzPW9bMV07aWYocy5zdGFydHNXaXRoKFwie1wiKSYmcy5lbmRzV2l0aChcIn1cIikmJihuPSExKSwoIW58fHMuc3RhcnRzV2l0aChcIltcIikmJnMuZW5kc1dpdGgoXCJdXCIpKSYmKHM9cy5zdWJzdHJpbmcoMSxzLmxlbmd0aC0xKSkscz10aGlzLl9wYXJlbnRDbGFzcz90aGlzLl9wYXJlbnRDbGFzc1tzXTp3aW5kb3dbc10sbilmb3IodmFyIGE9MDthPHMubGVuZ3RoO2ErKyl0aGlzLl9wcmVwYXJlU291cmNlRWxlbWVudCh0LGUsb1swXSxzLGEpO2Vsc2UgZm9yKHZhciBhIGluIHMpdGhpcy5fcHJlcGFyZVNvdXJjZUVsZW1lbnQodCxlLG9bMF0scyxhKTt0Lm5leHRTaWJsaW5nJiZ0aGlzLl9wYXJzZVhtbCh0Lm5leHRTaWJsaW5nLGkpfSx0LnByb3RvdHlwZS5fcGFyc2VYbWw9ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWkmJihpPSExKSx0Lm5vZGVUeXBlPT10aGlzLl9ub2RlVHlwZXMuZWxlbWVudCl7aSYmdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLGUuaWQrKGUuX2NoaWxkcmVuLmxlbmd0aCsxKSk7dmFyIHI9dGhpcy5fY3JlYXRlR3VpRWxlbWVudCh0LGUpO1wiR3JpZFwiPT10Lm5vZGVOYW1lP3RoaXMuX3BhcnNlR3JpZCh0LHIsZSk6dC5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShcImRhdGFTb3VyY2VcIik/dGhpcy5fcGFyc2VFbGVtZW50c0Zyb21Tb3VyY2UodCxyLGUpOnRoaXMuX3BhcnNlRWxlbWVudCh0LHIsZSl9ZWxzZSB0Lm5leHRTaWJsaW5nJiZ0aGlzLl9wYXJzZVhtbCh0Lm5leHRTaWJsaW5nLGUsaSl9LHQucHJvdG90eXBlLmlzTG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzTG9hZGVkfSx0LnByb3RvdHlwZS5nZXROb2RlQnlJZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbm9kZXNbdF19LHQucHJvdG90eXBlLmdldE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGVzfSx0LnByb3RvdHlwZS5sb2FkTGF5b3V0PWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT1yLnJlYWR5U3RhdGUmJjIwMD09ci5zdGF0dXMpe2lmKCFyLnJlc3BvbnNlWE1MKXRocm93XCJYbWxMb2FkZXIgRXhjZXB0aW9uIDogWE1MIGZpbGUgaXMgbWFsZm9ybWVkIG9yIGNvcnJ1cHRlZC5cIjt2YXIgdD1yLnJlc3BvbnNlWE1MLmRvY3VtZW50RWxlbWVudDt0aGlzLl9wYXJzZVhtbCh0LmZpcnN0Q2hpbGQsZSksdGhpcy5faXNMb2FkZWQ9ITAsaSYmaSgpfX0uYmluZCh0aGlzKSxyLm9wZW4oXCJHRVRcIix0LCEwKSxyLnNlbmQoKX0sdH0oKSxRPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2b2lkIDA9PT1pJiYoaT0wKTt2YXIgcj10LmNhbGwodGhpcyxlLngsZS55LGUueil8fHRoaXM7cmV0dXJuIHIuYnV0dG9uSW5kZXg9aSxyfXJldHVybiBuKGUsdCksZX0ocy5WZWN0b3IzKSwkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLm5hbWU9dCx0aGlzLl9kb3duQ291bnQ9MCx0aGlzLl9lbnRlckNvdW50PS0xLHRoaXMuX2Rvd25Qb2ludGVySWRzPXt9LHRoaXMuX2lzVmlzaWJsZT0hMCx0aGlzLm9uUG9pbnRlck1vdmVPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJPdXRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5vblBvaW50ZXJDbGlja09ic2VydmFibGU9bmV3IHMuT2JzZXJ2YWJsZSx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZT1uZXcgcy5PYnNlcnZhYmxlLHRoaXMuX2JlaGF2aW9ycz1uZXcgQXJyYXl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBvc2l0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlP3RoaXMuX25vZGUucG9zaXRpb246cy5WZWN0b3IzLlplcm8oKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX25vZGUmJih0aGlzLl9ub2RlLnBvc2l0aW9uPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNjYWxpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGU/dGhpcy5fbm9kZS5zY2FsaW5nOm5ldyBzLlZlY3RvcjMoMSwxLDEpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbm9kZSYmKHRoaXMuX25vZGUuc2NhbGluZz10KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJiZWhhdmlvcnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JlaGF2aW9yc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5hZGRCZWhhdmlvcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKC0xIT09dGhpcy5fYmVoYXZpb3JzLmluZGV4T2YodCkpcmV0dXJuIHRoaXM7dC5pbml0KCk7dmFyIGk9dGhpcy5faG9zdC5zY2VuZTtyZXR1cm4gaS5pc0xvYWRpbmc/aS5vbkRhdGFMb2FkZWRPYnNlcnZhYmxlLmFkZE9uY2UoZnVuY3Rpb24oKXt0LmF0dGFjaChlKX0pOnQuYXR0YWNoKHRoaXMpLHRoaXMuX2JlaGF2aW9ycy5wdXNoKHQpLHRoaXN9LHQucHJvdG90eXBlLnJlbW92ZUJlaGF2aW9yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2JlaGF2aW9ycy5pbmRleE9mKHQpO3JldHVybi0xPT09ZT90aGlzOih0aGlzLl9iZWhhdmlvcnNbZV0uZGV0YWNoKCksdGhpcy5fYmVoYXZpb3JzLnNwbGljZShlLDEpLHRoaXMpfSx0LnByb3RvdHlwZS5nZXRCZWhhdmlvckJ5TmFtZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXRoaXMuX2JlaGF2aW9ycztlPGkubGVuZ3RoO2UrKyl7dmFyIHI9aVtlXTtpZihyLm5hbWU9PT10KXJldHVybiByfXJldHVybiBudWxsfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJpc1Zpc2libGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmlzaWJsZX0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzVmlzaWJsZSE9PXQpe3RoaXMuX2lzVmlzaWJsZT10O3ZhciBlPXRoaXMubWVzaDtlJiZlLnNldEVuYWJsZWQodCl9fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInR5cGVOYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRUeXBlTmFtZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmdldENsYXNzTmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRUeXBlTmFtZSgpfSx0LnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkNvbnRyb2wzRFwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJub2RlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub2RlfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm1lc2hcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vZGUgaW5zdGFuY2VvZiBzLkFic3RyYWN0TWVzaD90aGlzLl9ub2RlOm51bGx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUubGlua1RvVHJhbnNmb3JtTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbm9kZSYmKHRoaXMuX25vZGUucGFyZW50PXQpLHRoaXN9LHQucHJvdG90eXBlLl9wcmVwYXJlTm9kZT1mdW5jdGlvbih0KXtpZighdGhpcy5fbm9kZSl7aWYodGhpcy5fbm9kZT10aGlzLl9jcmVhdGVOb2RlKHQpLCF0aGlzLm5vZGUpcmV0dXJuO3RoaXMuX25vZGUubWV0YWRhdGE9dGhpcyx0aGlzLl9ub2RlLnBvc2l0aW9uPXRoaXMucG9zaXRpb24sdGhpcy5fbm9kZS5zY2FsaW5nPXRoaXMuc2NhbGluZzt2YXIgZT10aGlzLm1lc2g7ZSYmKGUuaXNQaWNrYWJsZT0hMCx0aGlzLl9hZmZlY3RNYXRlcmlhbChlKSl9fSx0LnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuX2FmZmVjdE1hdGVyaWFsPWZ1bmN0aW9uKHQpe3QubWF0ZXJpYWw9bnVsbH0sdC5wcm90b3R5cGUuX29uUG9pbnRlck1vdmU9ZnVuY3Rpb24odCxlKXt0aGlzLm9uUG9pbnRlck1vdmVPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhlLC0xLHQsdGhpcyl9LHQucHJvdG90eXBlLl9vblBvaW50ZXJFbnRlcj1mdW5jdGlvbih0KXtyZXR1cm4hKHRoaXMuX2VudGVyQ291bnQ+MCkmJigtMT09PXRoaXMuX2VudGVyQ291bnQmJih0aGlzLl9lbnRlckNvdW50PTApLHRoaXMuX2VudGVyQ291bnQrKyx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnModGhpcywtMSx0LHRoaXMpLHRoaXMucG9pbnRlckVudGVyQW5pbWF0aW9uJiZ0aGlzLnBvaW50ZXJFbnRlckFuaW1hdGlvbigpLCEwKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlck91dD1mdW5jdGlvbih0KXt0aGlzLl9lbnRlckNvdW50PTAsdGhpcy5vblBvaW50ZXJPdXRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyh0aGlzLC0xLHQsdGhpcyksdGhpcy5wb2ludGVyT3V0QW5pbWF0aW9uJiZ0aGlzLnBvaW50ZXJPdXRBbmltYXRpb24oKX0sdC5wcm90b3R5cGUuX29uUG9pbnRlckRvd249ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIDAhPT10aGlzLl9kb3duQ291bnQ/KHRoaXMuX2Rvd25Db3VudCsrLCExKToodGhpcy5fZG93bkNvdW50KyssdGhpcy5fZG93blBvaW50ZXJJZHNbaV09ITAsdGhpcy5vblBvaW50ZXJEb3duT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IFEoZSxyKSwtMSx0LHRoaXMpLHRoaXMucG9pbnRlckRvd25BbmltYXRpb24mJnRoaXMucG9pbnRlckRvd25BbmltYXRpb24oKSwhMCl9LHQucHJvdG90eXBlLl9vblBvaW50ZXJVcD1mdW5jdGlvbih0LGUsaSxyLG4pe3RoaXMuX2Rvd25Db3VudC0tLGRlbGV0ZSB0aGlzLl9kb3duUG9pbnRlcklkc1tpXSx0aGlzLl9kb3duQ291bnQ8MD90aGlzLl9kb3duQ291bnQ9MDowPT10aGlzLl9kb3duQ291bnQmJihuJiYodGhpcy5fZW50ZXJDb3VudD4wfHwtMT09PXRoaXMuX2VudGVyQ291bnQpJiZ0aGlzLm9uUG9pbnRlckNsaWNrT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobmV3IFEoZSxyKSwtMSx0LHRoaXMpLHRoaXMub25Qb2ludGVyVXBPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhuZXcgUShlLHIpLC0xLHQsdGhpcyksdGhpcy5wb2ludGVyVXBBbmltYXRpb24mJnRoaXMucG9pbnRlclVwQW5pbWF0aW9uKCkpfSx0LnByb3RvdHlwZS5mb3JjZVBvaW50ZXJVcD1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10JiYodD1udWxsKSxudWxsIT09dCl0aGlzLl9vblBvaW50ZXJVcCh0aGlzLHMuVmVjdG9yMy5aZXJvKCksdCwwLCEwKTtlbHNle2Zvcih2YXIgZSBpbiB0aGlzLl9kb3duUG9pbnRlcklkcyl0aGlzLl9vblBvaW50ZXJVcCh0aGlzLHMuVmVjdG9yMy5aZXJvKCksK2UsMCwhMCk7dGhpcy5fZG93bkNvdW50PjAmJih0aGlzLl9kb3duQ291bnQ9MSx0aGlzLl9vblBvaW50ZXJVcCh0aGlzLHMuVmVjdG9yMy5aZXJvKCksMCwwLCEwKSl9fSx0LnByb3RvdHlwZS5fcHJvY2Vzc09ic2VydmFibGVzPWZ1bmN0aW9uKHQsZSxpLHIpe2lmKHQ9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJNT1ZFKXt0aGlzLl9vblBvaW50ZXJNb3ZlKHRoaXMsZSk7dmFyIG49dGhpcy5faG9zdC5fbGFzdENvbnRyb2xPdmVyW2ldO3JldHVybiBuJiZuIT09dGhpcyYmbi5fb25Qb2ludGVyT3V0KHRoaXMpLG4hPT10aGlzJiZ0aGlzLl9vblBvaW50ZXJFbnRlcih0aGlzKSx0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbE92ZXJbaV09dGhpcywhMH1yZXR1cm4gdD09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUkRPV04/KHRoaXMuX29uUG9pbnRlckRvd24odGhpcyxlLGksciksdGhpcy5faG9zdC5fbGFzdENvbnRyb2xEb3duW2ldPXRoaXMsdGhpcy5faG9zdC5fbGFzdFBpY2tlZENvbnRyb2w9dGhpcywhMCk6dD09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUlVQJiYodGhpcy5faG9zdC5fbGFzdENvbnRyb2xEb3duW2ldJiZ0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25baV0uX29uUG9pbnRlclVwKHRoaXMsZSxpLHIsITApLGRlbGV0ZSB0aGlzLl9ob3N0Ll9sYXN0Q29udHJvbERvd25baV0sITApfSx0LnByb3RvdHlwZS5fZGlzcG9zZU5vZGU9ZnVuY3Rpb24oKXt0aGlzLl9ub2RlJiYodGhpcy5fbm9kZS5kaXNwb3NlKCksdGhpcy5fbm9kZT1udWxsKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMub25Qb2ludGVyRG93bk9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyTW92ZU9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGUuY2xlYXIoKSx0aGlzLm9uUG9pbnRlclVwT2JzZXJ2YWJsZS5jbGVhcigpLHRoaXMub25Qb2ludGVyQ2xpY2tPYnNlcnZhYmxlLmNsZWFyKCksdGhpcy5fZGlzcG9zZU5vZGUoKTtmb3IodmFyIHQ9MCxlPXRoaXMuX2JlaGF2aW9yczt0PGUubGVuZ3RoO3QrKyl7ZVt0XS5kZXRhY2goKX19LHR9KCksdHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5fZ2V0VHlwZU5hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkFic3RyYWN0QnV0dG9uM0RcIn0sZS5wcm90b3R5cGUuX2NyZWF0ZU5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzLlRyYW5zZm9ybU5vZGUoXCJidXR0b25cIit0aGlzLm5hbWUpfSxlfSgkKSxldD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLl9jb250ZW50UmVzb2x1dGlvbj01MTIsaS5fY29udGVudFNjYWxlUmF0aW89MixpLnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe2kubWVzaCYmKGkuX2N1cnJlbnRNYXRlcmlhbC5lbWlzc2l2ZUNvbG9yPXMuQ29sb3IzLlJlZCgpKX0saS5wb2ludGVyT3V0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5fY3VycmVudE1hdGVyaWFsLmVtaXNzaXZlQ29sb3I9cy5Db2xvcjMuQmxhY2soKX0saS5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe2kubWVzaCYmaS5tZXNoLnNjYWxpbmcuc2NhbGVJblBsYWNlKC45NSl9LGkucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7aS5tZXNoJiZpLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoMS8uOTUpfSxpfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGVudFJlc29sdXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRSZXNvbHV0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29udGVudFJlc29sdXRpb24hPT10JiYodGhpcy5fY29udGVudFJlc29sdXRpb249dCx0aGlzLl9yZXNldENvbnRlbnQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY29udGVudFNjYWxlUmF0aW9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRTY2FsZVJhdGlvfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29udGVudFNjYWxlUmF0aW8hPT10JiYodGhpcy5fY29udGVudFNjYWxlUmF0aW89dCx0aGlzLl9yZXNldENvbnRlbnQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2Rpc3Bvc2VGYWNhZGVUZXh0dXJlPWZ1bmN0aW9uKCl7dGhpcy5fZmFjYWRlVGV4dHVyZSYmKHRoaXMuX2ZhY2FkZVRleHR1cmUuZGlzcG9zZSgpLHRoaXMuX2ZhY2FkZVRleHR1cmU9bnVsbCl9LGUucHJvdG90eXBlLl9yZXNldENvbnRlbnQ9ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlRmFjYWRlVGV4dHVyZSgpLHRoaXMuY29udGVudD10aGlzLl9jb250ZW50fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb250ZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29udGVudD10LHRoaXMuX2hvc3QmJnRoaXMuX2hvc3QudXRpbGl0eUxheWVyJiYodGhpcy5fZmFjYWRlVGV4dHVyZT90aGlzLl9mYWNhZGVUZXh0dXJlLnJvb3RDb250YWluZXIuY2xlYXJDb250cm9scygpOih0aGlzLl9mYWNhZGVUZXh0dXJlPW5ldyBLKFwiRmFjYWRlXCIsdGhpcy5fY29udGVudFJlc29sdXRpb24sdGhpcy5fY29udGVudFJlc29sdXRpb24sdGhpcy5faG9zdC51dGlsaXR5TGF5ZXIudXRpbGl0eUxheWVyU2NlbmUsITAscy5UZXh0dXJlLlRSSUxJTkVBUl9TQU1QTElOR01PREUpLHRoaXMuX2ZhY2FkZVRleHR1cmUucm9vdENvbnRhaW5lci5zY2FsZVg9dGhpcy5fY29udGVudFNjYWxlUmF0aW8sdGhpcy5fZmFjYWRlVGV4dHVyZS5yb290Q29udGFpbmVyLnNjYWxlWT10aGlzLl9jb250ZW50U2NhbGVSYXRpbyx0aGlzLl9mYWNhZGVUZXh0dXJlLnByZW11bEFscGhhPSEwKSx0aGlzLl9mYWNhZGVUZXh0dXJlLmFkZENvbnRyb2wodCksdGhpcy5fYXBwbHlGYWNhZGUodGhpcy5fZmFjYWRlVGV4dHVyZSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9hcHBseUZhY2FkZT1mdW5jdGlvbih0KXt0aGlzLl9jdXJyZW50TWF0ZXJpYWwuZW1pc3NpdmVUZXh0dXJlPXR9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQnV0dG9uM0RcIn0sZS5wcm90b3R5cGUuX2NyZWF0ZU5vZGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSg2KSxpPTA7aTw2O2krKyllW2ldPW5ldyBzLlZlY3RvcjQoMCwwLDAsMCk7cmV0dXJuIGVbMV09bmV3IHMuVmVjdG9yNCgwLDAsMSwxKSxzLkJveEJ1aWxkZXIuQ3JlYXRlQm94KHRoaXMubmFtZStcIl9yb290TWVzaFwiLHt3aWR0aDoxLGhlaWdodDoxLGRlcHRoOi4wOCxmYWNlVVY6ZX0sdCl9LGUucHJvdG90eXBlLl9hZmZlY3RNYXRlcmlhbD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgcy5TdGFuZGFyZE1hdGVyaWFsKHRoaXMubmFtZStcIk1hdGVyaWFsXCIsdC5nZXRTY2VuZSgpKTtlLnNwZWN1bGFyQ29sb3I9cy5Db2xvcjMuQmxhY2soKSx0Lm1hdGVyaWFsPWUsdGhpcy5fY3VycmVudE1hdGVyaWFsPWUsdGhpcy5fcmVzZXRDb250ZW50KCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGlzcG9zZUZhY2FkZVRleHR1cmUoKSx0aGlzLl9jdXJyZW50TWF0ZXJpYWwmJnRoaXMuX2N1cnJlbnRNYXRlcmlhbC5kaXNwb3NlKCl9LGV9KHR0KSxpdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLl9ibG9ja0xheW91dD0hMSxpLl9jaGlsZHJlbj1uZXcgQXJyYXksaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNoaWxkcmVuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJibG9ja0xheW91dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmxvY2tMYXlvdXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ibG9ja0xheW91dCE9PXQmJih0aGlzLl9ibG9ja0xheW91dD10LHRoaXMuX2Jsb2NrTGF5b3V0fHx0aGlzLl9hcnJhbmdlQ2hpbGRyZW4oKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudXBkYXRlTGF5b3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmFuZ2VDaGlsZHJlbigpLHRoaXN9LGUucHJvdG90eXBlLmNvbnRhaW5zQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4tMSE9PXRoaXMuX2NoaWxkcmVuLmluZGV4T2YodCl9LGUucHJvdG90eXBlLmFkZENvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuLTEhPT10aGlzLl9jaGlsZHJlbi5pbmRleE9mKHQpP3RoaXM6KHQucGFyZW50PXRoaXMsdC5faG9zdD10aGlzLl9ob3N0LHRoaXMuX2NoaWxkcmVuLnB1c2godCksdGhpcy5faG9zdC51dGlsaXR5TGF5ZXImJih0Ll9wcmVwYXJlTm9kZSh0aGlzLl9ob3N0LnV0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZSksdC5ub2RlJiYodC5ub2RlLnBhcmVudD10aGlzLm5vZGUpLHRoaXMuYmxvY2tMYXlvdXR8fHRoaXMuX2FycmFuZ2VDaGlsZHJlbigpKSx0aGlzKX0sZS5wcm90b3R5cGUuX2FycmFuZ2VDaGlsZHJlbj1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuX2NyZWF0ZU5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzLlRyYW5zZm9ybU5vZGUoXCJDb250YWluZXJOb2RlXCIsdCl9LGUucHJvdG90eXBlLnJlbW92ZUNvbnRyb2w9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY2hpbGRyZW4uaW5kZXhPZih0KTtyZXR1cm4tMSE9PWUmJih0aGlzLl9jaGlsZHJlbi5zcGxpY2UoZSwxKSx0LnBhcmVudD1udWxsLHQuX2Rpc3Bvc2VOb2RlKCkpLHRoaXN9LGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiQ29udGFpbmVyM0RcIn0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLGk9dGhpcy5fY2hpbGRyZW47ZTxpLmxlbmd0aDtlKyspe2lbZV0uZGlzcG9zZSgpfXRoaXMuX2NoaWxkcmVuPVtdLHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sZS5VTlNFVF9PUklFTlRBVElPTj0wLGUuRkFDRU9SSUdJTl9PUklFTlRBVElPTj0xLGUuRkFDRU9SSUdJTlJFVkVSU0VEX09SSUVOVEFUSU9OPTIsZS5GQUNFRk9SV0FSRF9PUklFTlRBVElPTj0zLGUuRkFDRUZPUldBUkRSRVZFUlNFRF9PUklFTlRBVElPTj00LGV9KCQpLHJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuX2NvbHVtbnM9MTAsZS5fcm93cz0wLGUuX3Jvd1RoZW5Db2x1bT0hMCxlLl9vcmllbnRhdGlvbj1pdC5GQUNFT1JJR0lOX09SSUVOVEFUSU9OLGUubWFyZ2luPTAsZX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm9yaWVudGF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fb3JpZW50YXRpb24hPT10JiYodGhpcy5fb3JpZW50YXRpb249dCxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImNvbHVtbnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbHVtbnN9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2NvbHVtbnMhPT10JiYodGhpcy5fY29sdW1ucz10LHRoaXMuX3Jvd1RoZW5Db2x1bT0hMCxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJvd3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jvd3N9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3Jvd3MhPT10JiYodGhpcy5fcm93cz10LHRoaXMuX3Jvd1RoZW5Db2x1bT0hMSxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9hcnJhbmdlQ2hpbGRyZW49ZnVuY3Rpb24oKXt0aGlzLl9jZWxsV2lkdGg9MCx0aGlzLl9jZWxsSGVpZ2h0PTA7Zm9yKHZhciB0PTAsZT0wLGk9MCxyPXMuTWF0cml4LkludmVydCh0aGlzLm5vZGUuY29tcHV0ZVdvcmxkTWF0cml4KCEwKSksbj0wLG89dGhpcy5fY2hpbGRyZW47bjxvLmxlbmd0aDtuKyspe2lmKChtPW9bbl0pLm1lc2gpe2krKyxtLm1lc2guY29tcHV0ZVdvcmxkTWF0cml4KCEwKTt2YXIgYT1tLm1lc2guZ2V0SGllcmFyY2h5Qm91bmRpbmdWZWN0b3JzKCksaD1zLlRtcFZlY3RvcnMuVmVjdG9yM1swXSxsPXMuVG1wVmVjdG9ycy5WZWN0b3IzWzFdO2EubWF4LnN1YnRyYWN0VG9SZWYoYS5taW4sbCksbC5zY2FsZUluUGxhY2UoLjUpLHMuVmVjdG9yMy5UcmFuc2Zvcm1Ob3JtYWxUb1JlZihsLHIsaCksdGhpcy5fY2VsbFdpZHRoPU1hdGgubWF4KHRoaXMuX2NlbGxXaWR0aCwyKmgueCksdGhpcy5fY2VsbEhlaWdodD1NYXRoLm1heCh0aGlzLl9jZWxsSGVpZ2h0LDIqaC55KX19dGhpcy5fY2VsbFdpZHRoKz0yKnRoaXMubWFyZ2luLHRoaXMuX2NlbGxIZWlnaHQrPTIqdGhpcy5tYXJnaW4sdGhpcy5fcm93VGhlbkNvbHVtPyhlPXRoaXMuX2NvbHVtbnMsdD1NYXRoLmNlaWwoaS90aGlzLl9jb2x1bW5zKSk6KHQ9dGhpcy5fcm93cyxlPU1hdGguY2VpbChpL3RoaXMuX3Jvd3MpKTt2YXIgdT0uNSplKnRoaXMuX2NlbGxXaWR0aCxjPS41KnQqdGhpcy5fY2VsbEhlaWdodCxfPVtdLGQ9MDtpZih0aGlzLl9yb3dUaGVuQ29sdW0pZm9yKHZhciBmPTA7Zjx0O2YrKylmb3IodmFyIHA9MDtwPGUmJihfLnB1c2gobmV3IHMuVmVjdG9yMyhwKnRoaXMuX2NlbGxXaWR0aC11K3RoaXMuX2NlbGxXaWR0aC8yLGYqdGhpcy5fY2VsbEhlaWdodC1jK3RoaXMuX2NlbGxIZWlnaHQvMiwwKSksISgrK2Q+aSkpO3ArKyk7ZWxzZSBmb3IocD0wO3A8ZTtwKyspZm9yKGY9MDtmPHQmJihfLnB1c2gobmV3IHMuVmVjdG9yMyhwKnRoaXMuX2NlbGxXaWR0aC11K3RoaXMuX2NlbGxXaWR0aC8yLGYqdGhpcy5fY2VsbEhlaWdodC1jK3RoaXMuX2NlbGxIZWlnaHQvMiwwKSksISgrK2Q+aSkpO2YrKyk7ZD0wO2Zvcih2YXIgZz0wLGI9dGhpcy5fY2hpbGRyZW47ZzxiLmxlbmd0aDtnKyspe3ZhciBtOyhtPWJbZ10pLm1lc2gmJih0aGlzLl9tYXBHcmlkTm9kZShtLF9bZF0pLGQrKyl9dGhpcy5fZmluYWxQcm9jZXNzaW5nKCl9LGUucHJvdG90eXBlLl9maW5hbFByb2Nlc3Npbmc9ZnVuY3Rpb24oKXt9LGV9KGl0KSxudD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9yYWRpdXM9NSxlfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmFkaXVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpdXN9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3JhZGl1cyE9PXQmJih0aGlzLl9yYWRpdXM9dCxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9tYXBHcmlkTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQubWVzaDtpZihpKXt2YXIgcj10aGlzLl9jeWxpbmRyaWNhbE1hcHBpbmcoZSk7c3dpdGNoKHQucG9zaXRpb249cix0aGlzLm9yaWVudGF0aW9uKXtjYXNlIGl0LkZBQ0VPUklHSU5fT1JJRU5UQVRJT046aS5sb29rQXQobmV3IHMuVmVjdG9yMygyKnIueCxyLnksMipyLnopKTticmVhaztjYXNlIGl0LkZBQ0VPUklHSU5SRVZFUlNFRF9PUklFTlRBVElPTjppLmxvb2tBdChuZXcgcy5WZWN0b3IzKC1yLngsci55LC1yLnopKTticmVhaztjYXNlIGl0LkZBQ0VGT1JXQVJEX09SSUVOVEFUSU9OOmJyZWFrO2Nhc2UgaXQuRkFDRUZPUldBUkRSRVZFUlNFRF9PUklFTlRBVElPTjppLnJvdGF0ZShzLkF4aXMuWSxNYXRoLlBJLHMuU3BhY2UuTE9DQUwpfX19LGUucHJvdG90eXBlLl9jeWxpbmRyaWNhbE1hcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IHMuVmVjdG9yMygwLHQueSx0aGlzLl9yYWRpdXMpLGk9dC54L3RoaXMuX3JhZGl1cztyZXR1cm4gcy5NYXRyaXguUm90YXRpb25ZYXdQaXRjaFJvbGxUb1JlZihpLDAsMCxzLlRtcFZlY3RvcnMuTWF0cml4WzBdKSxzLlZlY3RvcjMuVHJhbnNmb3JtTm9ybWFsKGUscy5UbXBWZWN0b3JzLk1hdHJpeFswXSl9LGV9KHJ0KSxvdD1cInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5cXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjtcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWw7XFxuYXR0cmlidXRlIHZlYzIgdXY7XFxuXFxudW5pZm9ybSBtYXQ0IHdvcmxkO1xcbnVuaWZvcm0gbWF0NCB2aWV3UHJvamVjdGlvbjtcXG52YXJ5aW5nIHZlYzIgdlVWO1xcbiNpZmRlZiBCT1JERVJcXG52YXJ5aW5nIHZlYzIgc2NhbGVJbmZvO1xcbnVuaWZvcm0gZmxvYXQgYm9yZGVyV2lkdGg7XFxudW5pZm9ybSB2ZWMzIHNjYWxlRmFjdG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBIT1ZFUkxJR0hUXFxudmFyeWluZyB2ZWMzIHdvcmxkUG9zaXRpb247XFxuI2VuZGlmXFxudm9pZCBtYWluKHZvaWQpIHtcXG52VVY9dXY7XFxuI2lmZGVmIEJPUkRFUlxcbnZlYzMgc2NhbGU9c2NhbGVGYWN0b3I7XFxuZmxvYXQgbWluU2NhbGU9bWluKG1pbihzY2FsZS54LHNjYWxlLnkpLHNjYWxlLnopO1xcbmZsb2F0IG1heFNjYWxlPW1heChtYXgoc2NhbGUueCxzY2FsZS55KSxzY2FsZS56KTtcXG5mbG9hdCBtaW5PdmVyTWlkZGxlU2NhbGU9bWluU2NhbGUvKHNjYWxlLngrc2NhbGUueStzY2FsZS56LW1pblNjYWxlLW1heFNjYWxlKTtcXG5mbG9hdCBhcmVhWVo9c2NhbGUueSpzY2FsZS56O1xcbmZsb2F0IGFyZWFYWj1zY2FsZS54KnNjYWxlLno7XFxuZmxvYXQgYXJlYVhZPXNjYWxlLngqc2NhbGUueTtcXG5mbG9hdCBzY2FsZWRCb3JkZXJXaWR0aD1ib3JkZXJXaWR0aDtcXG5pZiAoYWJzKG5vcm1hbC54KSA9PSAxLjApXFxue1xcbnNjYWxlLng9c2NhbGUueTtcXG5zY2FsZS55PXNjYWxlLno7XFxuaWYgKGFyZWFZWj5hcmVhWFogJiYgYXJlYVlaPmFyZWFYWSlcXG57XFxuc2NhbGVkQm9yZGVyV2lkdGgqPW1pbk92ZXJNaWRkbGVTY2FsZTtcXG59XFxufVxcbmVsc2UgaWYgKGFicyhub3JtYWwueSkgPT0gMS4wKVxcbntcXG5zY2FsZS54PXNjYWxlLno7XFxuaWYgKGFyZWFYWj5hcmVhWFkgJiYgYXJlYVhaPmFyZWFZWilcXG57XFxuc2NhbGVkQm9yZGVyV2lkdGgqPW1pbk92ZXJNaWRkbGVTY2FsZTtcXG59XFxufVxcbmVsc2VcXG57XFxuaWYgKGFyZWFYWT5hcmVhWVogJiYgYXJlYVhZPmFyZWFYWilcXG57XFxuc2NhbGVkQm9yZGVyV2lkdGgqPW1pbk92ZXJNaWRkbGVTY2FsZTtcXG59XFxufVxcbmZsb2F0IHNjYWxlUmF0aW89bWluKHNjYWxlLngsc2NhbGUueSkvbWF4KHNjYWxlLngsc2NhbGUueSk7XFxuaWYgKHNjYWxlLng+c2NhbGUueSlcXG57XFxuc2NhbGVJbmZvLng9MS4wLShzY2FsZWRCb3JkZXJXaWR0aCpzY2FsZVJhdGlvKTtcXG5zY2FsZUluZm8ueT0xLjAtc2NhbGVkQm9yZGVyV2lkdGg7XFxufVxcbmVsc2VcXG57XFxuc2NhbGVJbmZvLng9MS4wLXNjYWxlZEJvcmRlcldpZHRoO1xcbnNjYWxlSW5mby55PTEuMC0oc2NhbGVkQm9yZGVyV2lkdGgqc2NhbGVSYXRpbyk7XFxufVxcbiNlbmRpZlxcbnZlYzQgd29ybGRQb3M9d29ybGQqdmVjNChwb3NpdGlvbiwxLjApO1xcbiNpZmRlZiBIT1ZFUkxJR0hUXFxud29ybGRQb3NpdGlvbj13b3JsZFBvcy54eXo7XFxuI2VuZGlmXFxuZ2xfUG9zaXRpb249dmlld1Byb2plY3Rpb24qd29ybGRQb3M7XFxufVxcblwiO3MuRWZmZWN0LlNoYWRlcnNTdG9yZS5mbHVlbnRWZXJ0ZXhTaGFkZXI9b3Q7dmFyIHN0PVwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnZhcnlpbmcgdmVjMiB2VVY7XFxudW5pZm9ybSB2ZWM0IGFsYmVkb0NvbG9yO1xcbiNpZmRlZiBJTk5FUkdMT1dcXG51bmlmb3JtIHZlYzQgaW5uZXJHbG93Q29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIEJPUkRFUlxcbnZhcnlpbmcgdmVjMiBzY2FsZUluZm87XFxudW5pZm9ybSBmbG9hdCBlZGdlU21vb3RoaW5nVmFsdWU7XFxudW5pZm9ybSBmbG9hdCBib3JkZXJNaW5WYWx1ZTtcXG4jZW5kaWZcXG4jaWZkZWYgSE9WRVJMSUdIVFxcbnZhcnlpbmcgdmVjMyB3b3JsZFBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMyBob3ZlclBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjNCBob3ZlckNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgaG92ZXJSYWRpdXM7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkVcXG51bmlmb3JtIHNhbXBsZXIyRCBhbGJlZG9TYW1wbGVyO1xcbiNlbmRpZlxcbnZvaWQgbWFpbih2b2lkKSB7XFxudmVjMyBhbGJlZG89YWxiZWRvQ29sb3IucmdiO1xcbmZsb2F0IGFscGhhPWFsYmVkb0NvbG9yLmE7XFxuI2lmZGVmIFRFWFRVUkVcXG5hbGJlZG89dGV4dHVyZTJEKGFsYmVkb1NhbXBsZXIsdlVWKS5yZ2I7XFxuI2VuZGlmXFxuI2lmZGVmIEhPVkVSTElHSFRcXG5mbG9hdCBwb2ludFRvSG92ZXI9KDEuMC1jbGFtcChsZW5ndGgoaG92ZXJQb3NpdGlvbi13b3JsZFBvc2l0aW9uKS9ob3ZlclJhZGl1cywwLiwxLikpKmhvdmVyQ29sb3IuYTtcXG5hbGJlZG89Y2xhbXAoYWxiZWRvK2hvdmVyQ29sb3IucmdiKnBvaW50VG9Ib3ZlciwwLiwxLik7XFxuI2Vsc2VcXG5mbG9hdCBwb2ludFRvSG92ZXI9MS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBCT1JERVJcXG5mbG9hdCBib3JkZXJQb3dlcj0xMC4wO1xcbmZsb2F0IGludmVyc2VCb3JkZXJQb3dlcj0xLjAvYm9yZGVyUG93ZXI7XFxudmVjMyBib3JkZXJDb2xvcj1hbGJlZG8qYm9yZGVyUG93ZXI7XFxudmVjMiBkaXN0YW5jZVRvRWRnZTtcXG5kaXN0YW5jZVRvRWRnZS54PWFicyh2VVYueC0wLjUpKjIuMDtcXG5kaXN0YW5jZVRvRWRnZS55PWFicyh2VVYueS0wLjUpKjIuMDtcXG5mbG9hdCBib3JkZXJWYWx1ZT1tYXgoc21vb3Roc3RlcChzY2FsZUluZm8ueC1lZGdlU21vb3RoaW5nVmFsdWUsc2NhbGVJbmZvLngrZWRnZVNtb290aGluZ1ZhbHVlLGRpc3RhbmNlVG9FZGdlLngpLFxcbnNtb290aHN0ZXAoc2NhbGVJbmZvLnktZWRnZVNtb290aGluZ1ZhbHVlLHNjYWxlSW5mby55K2VkZ2VTbW9vdGhpbmdWYWx1ZSxkaXN0YW5jZVRvRWRnZS55KSk7XFxuYm9yZGVyQ29sb3I9Ym9yZGVyQ29sb3IqYm9yZGVyVmFsdWUqbWF4KGJvcmRlck1pblZhbHVlKmludmVyc2VCb3JkZXJQb3dlcixwb2ludFRvSG92ZXIpO1xcbmFsYmVkbys9Ym9yZGVyQ29sb3I7XFxuYWxwaGE9bWF4KGFscGhhLGJvcmRlclZhbHVlKTtcXG4jZW5kaWZcXG4jaWZkZWYgSU5ORVJHTE9XXFxuXFxudmVjMiB1dkdsb3c9KHZVVi12ZWMyKDAuNSwwLjUpKSooaW5uZXJHbG93Q29sb3IuYSoyLjApO1xcbnV2R2xvdz11dkdsb3cqdXZHbG93O1xcbnV2R2xvdz11dkdsb3cqdXZHbG93O1xcbmFsYmVkbys9bWl4KHZlYzMoMC4wLDAuMCwwLjApLGlubmVyR2xvd0NvbG9yLnJnYix1dkdsb3cueCt1dkdsb3cueSk7XFxuI2VuZGlmXFxuZ2xfRnJhZ0NvbG9yPXZlYzQoYWxiZWRvLGFscGhhKTtcXG59XCI7cy5FZmZlY3QuU2hhZGVyc1N0b3JlLmZsdWVudFBpeGVsU2hhZGVyPXN0O3ZhciBhdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLklOTkVSR0xPVz0hMSxlLkJPUkRFUj0hMSxlLkhPVkVSTElHSFQ9ITEsZS5URVhUVVJFPSExLGUucmVidWlsZCgpLGV9cmV0dXJuIG4oZSx0KSxlfShzLk1hdGVyaWFsRGVmaW5lcyksaHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciByPXQuY2FsbCh0aGlzLGUsaSl8fHRoaXM7cmV0dXJuIHIuaW5uZXJHbG93Q29sb3JJbnRlbnNpdHk9LjUsci5pbm5lckdsb3dDb2xvcj1uZXcgcy5Db2xvcjMoMSwxLDEpLHIuYWxwaGE9MSxyLmFsYmVkb0NvbG9yPW5ldyBzLkNvbG9yMyguMywuMzUsLjQpLHIucmVuZGVyQm9yZGVycz0hMSxyLmJvcmRlcldpZHRoPS41LHIuZWRnZVNtb290aGluZ1ZhbHVlPS4wMixyLmJvcmRlck1pblZhbHVlPS4xLHIucmVuZGVySG92ZXJMaWdodD0hMSxyLmhvdmVyUmFkaXVzPTEsci5ob3ZlckNvbG9yPW5ldyBzLkNvbG9yNCguMywuMywuMywxKSxyLmhvdmVyUG9zaXRpb249cy5WZWN0b3IzLlplcm8oKSxyfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUubmVlZEFscGhhQmxlbmRpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gMSE9PXRoaXMuYWxwaGF9LGUucHJvdG90eXBlLm5lZWRBbHBoYVRlc3Rpbmc9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZS5wcm90b3R5cGUuZ2V0QWxwaGFUZXN0VGV4dHVyZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxlLnByb3RvdHlwZS5pc1JlYWR5Rm9yU3ViTWVzaD1mdW5jdGlvbih0LGUsaSl7aWYodGhpcy5pc0Zyb3plbiYmZS5lZmZlY3QmJmUuZWZmZWN0Ll93YXNQcmV2aW91c2x5UmVhZHkpcmV0dXJuITA7ZS5fbWF0ZXJpYWxEZWZpbmVzfHwoZS5fbWF0ZXJpYWxEZWZpbmVzPW5ldyBhdCk7dmFyIHI9dGhpcy5nZXRTY2VuZSgpLG49ZS5fbWF0ZXJpYWxEZWZpbmVzO2lmKCF0aGlzLmNoZWNrUmVhZHlPbkV2ZXJ5Q2FsbCYmZS5lZmZlY3QmJm4uX3JlbmRlcklkPT09ci5nZXRSZW5kZXJJZCgpKXJldHVybiEwO2lmKG4uX2FyZVRleHR1cmVzRGlydHkpaWYobi5JTk5FUkdMT1c9dGhpcy5pbm5lckdsb3dDb2xvckludGVuc2l0eT4wLG4uQk9SREVSPXRoaXMucmVuZGVyQm9yZGVycyxuLkhPVkVSTElHSFQ9dGhpcy5yZW5kZXJIb3ZlckxpZ2h0LHRoaXMuX2FsYmVkb1RleHR1cmUpe2lmKCF0aGlzLl9hbGJlZG9UZXh0dXJlLmlzUmVhZHlPck5vdEJsb2NraW5nKCkpcmV0dXJuITE7bi5URVhUVVJFPSEwfWVsc2Ugbi5URVhUVVJFPSExO3ZhciBvPXIuZ2V0RW5naW5lKCk7aWYobi5pc0RpcnR5KXtuLm1hcmtBc1Byb2Nlc3NlZCgpLHIucmVzZXRDYWNoZWRNYXRlcmlhbCgpO3ZhciBhPVtzLlZlcnRleEJ1ZmZlci5Qb3NpdGlvbktpbmRdO2EucHVzaChzLlZlcnRleEJ1ZmZlci5Ob3JtYWxLaW5kKSxhLnB1c2gocy5WZXJ0ZXhCdWZmZXIuVVZLaW5kKTt2YXIgaD1bXCJ3b3JsZFwiLFwidmlld1Byb2plY3Rpb25cIixcImlubmVyR2xvd0NvbG9yXCIsXCJhbGJlZG9Db2xvclwiLFwiYm9yZGVyV2lkdGhcIixcImVkZ2VTbW9vdGhpbmdWYWx1ZVwiLFwic2NhbGVGYWN0b3JcIixcImJvcmRlck1pblZhbHVlXCIsXCJob3ZlckNvbG9yXCIsXCJob3ZlclBvc2l0aW9uXCIsXCJob3ZlclJhZGl1c1wiXSxsPVtcImFsYmVkb1NhbXBsZXJcIl0sdT1uZXcgQXJyYXk7cy5NYXRlcmlhbEhlbHBlci5QcmVwYXJlVW5pZm9ybXNBbmRTYW1wbGVyc0xpc3Qoe3VuaWZvcm1zTmFtZXM6aCx1bmlmb3JtQnVmZmVyc05hbWVzOnUsc2FtcGxlcnM6bCxkZWZpbmVzOm4sbWF4U2ltdWx0YW5lb3VzTGlnaHRzOjR9KTt2YXIgYz1uLnRvU3RyaW5nKCk7ZS5zZXRFZmZlY3Qoci5nZXRFbmdpbmUoKS5jcmVhdGVFZmZlY3QoXCJmbHVlbnRcIix7YXR0cmlidXRlczphLHVuaWZvcm1zTmFtZXM6aCx1bmlmb3JtQnVmZmVyc05hbWVzOnUsc2FtcGxlcnM6bCxkZWZpbmVzOmMsZmFsbGJhY2tzOm51bGwsb25Db21waWxlZDp0aGlzLm9uQ29tcGlsZWQsb25FcnJvcjp0aGlzLm9uRXJyb3IsaW5kZXhQYXJhbWV0ZXJzOnttYXhTaW11bHRhbmVvdXNMaWdodHM6NH19LG8pKX1yZXR1cm4hKCFlLmVmZmVjdHx8IWUuZWZmZWN0LmlzUmVhZHkoKSkmJihuLl9yZW5kZXJJZD1yLmdldFJlbmRlcklkKCksZS5lZmZlY3QuX3dhc1ByZXZpb3VzbHlSZWFkeT0hMCwhMCl9LGUucHJvdG90eXBlLmJpbmRGb3JTdWJNZXNoPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLmdldFNjZW5lKCksbj1pLl9tYXRlcmlhbERlZmluZXM7aWYobil7dmFyIG89aS5lZmZlY3Q7byYmKHRoaXMuX2FjdGl2ZUVmZmVjdD1vLHRoaXMuYmluZE9ubHlXb3JsZE1hdHJpeCh0KSx0aGlzLl9hY3RpdmVFZmZlY3Quc2V0TWF0cml4KFwidmlld1Byb2plY3Rpb25cIixyLmdldFRyYW5zZm9ybU1hdHJpeCgpKSx0aGlzLl9tdXN0UmViaW5kKHIsbykmJih0aGlzLl9hY3RpdmVFZmZlY3Quc2V0Q29sb3I0KFwiYWxiZWRvQ29sb3JcIix0aGlzLmFsYmVkb0NvbG9yLHRoaXMuYWxwaGEpLG4uSU5ORVJHTE9XJiZ0aGlzLl9hY3RpdmVFZmZlY3Quc2V0Q29sb3I0KFwiaW5uZXJHbG93Q29sb3JcIix0aGlzLmlubmVyR2xvd0NvbG9yLHRoaXMuaW5uZXJHbG93Q29sb3JJbnRlbnNpdHkpLG4uQk9SREVSJiYodGhpcy5fYWN0aXZlRWZmZWN0LnNldEZsb2F0KFwiYm9yZGVyV2lkdGhcIix0aGlzLmJvcmRlcldpZHRoKSx0aGlzLl9hY3RpdmVFZmZlY3Quc2V0RmxvYXQoXCJlZGdlU21vb3RoaW5nVmFsdWVcIix0aGlzLmVkZ2VTbW9vdGhpbmdWYWx1ZSksdGhpcy5fYWN0aXZlRWZmZWN0LnNldEZsb2F0KFwiYm9yZGVyTWluVmFsdWVcIix0aGlzLmJvcmRlck1pblZhbHVlKSxlLmdldEJvdW5kaW5nSW5mbygpLmJvdW5kaW5nQm94LmV4dGVuZFNpemUubXVsdGlwbHlUb1JlZihlLnNjYWxpbmcscy5UbXBWZWN0b3JzLlZlY3RvcjNbMF0pLHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRWZWN0b3IzKFwic2NhbGVGYWN0b3JcIixzLlRtcFZlY3RvcnMuVmVjdG9yM1swXSkpLG4uSE9WRVJMSUdIVCYmKHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXREaXJlY3RDb2xvcjQoXCJob3ZlckNvbG9yXCIsdGhpcy5ob3ZlckNvbG9yKSx0aGlzLl9hY3RpdmVFZmZlY3Quc2V0RmxvYXQoXCJob3ZlclJhZGl1c1wiLHRoaXMuaG92ZXJSYWRpdXMpLHRoaXMuX2FjdGl2ZUVmZmVjdC5zZXRWZWN0b3IzKFwiaG92ZXJQb3NpdGlvblwiLHRoaXMuaG92ZXJQb3NpdGlvbikpLG4uVEVYVFVSRSYmdGhpcy5fYWN0aXZlRWZmZWN0LnNldFRleHR1cmUoXCJhbGJlZG9TYW1wbGVyXCIsdGhpcy5fYWxiZWRvVGV4dHVyZSkpLHRoaXMuX2FmdGVyQmluZChlLHRoaXMuX2FjdGl2ZUVmZmVjdCkpfX0sZS5wcm90b3R5cGUuZ2V0QWN0aXZlVGV4dHVyZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5wcm90b3R5cGUuZ2V0QWN0aXZlVGV4dHVyZXMuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuaGFzVGV4dHVyZT1mdW5jdGlvbihlKXtyZXR1cm4hIXQucHJvdG90eXBlLmhhc1RleHR1cmUuY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbih0KXt2YXIgaT10aGlzO3JldHVybiBzLlNlcmlhbGl6YXRpb25IZWxwZXIuQ2xvbmUoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodCxpLmdldFNjZW5lKCkpfSx0aGlzKX0sZS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9cy5TZXJpYWxpemF0aW9uSGVscGVyLlNlcmlhbGl6ZSh0aGlzKTtyZXR1cm4gdC5jdXN0b21UeXBlPVwiQkFCWUxPTi5HVUkuRmx1ZW50TWF0ZXJpYWxcIix0fSxlLnByb3RvdHlwZS5nZXRDbGFzc05hbWU9ZnVuY3Rpb24oKXtyZXR1cm5cIkZsdWVudE1hdGVyaWFsXCJ9LGUuUGFyc2U9ZnVuY3Rpb24odCxpLHIpe3JldHVybiBzLlNlcmlhbGl6YXRpb25IZWxwZXIuUGFyc2UoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodC5uYW1lLGkpfSx0LGkscil9LG8oW09iamVjdChzLnNlcmlhbGl6ZSkoKSxPYmplY3Qocy5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSxlLnByb3RvdHlwZSxcImlubmVyR2xvd0NvbG9ySW50ZW5zaXR5XCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemVBc0NvbG9yMykoKV0sZS5wcm90b3R5cGUsXCJpbm5lckdsb3dDb2xvclwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpXSxlLnByb3RvdHlwZSxcImFscGhhXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemVBc0NvbG9yMykoKV0sZS5wcm90b3R5cGUsXCJhbGJlZG9Db2xvclwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpLE9iamVjdChzLmV4cGFuZFRvUHJvcGVydHkpKFwiX21hcmtBbGxTdWJNZXNoZXNBc1RleHR1cmVzRGlydHlcIildLGUucHJvdG90eXBlLFwicmVuZGVyQm9yZGVyc1wiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplKSgpXSxlLnByb3RvdHlwZSxcImJvcmRlcldpZHRoXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemUpKCldLGUucHJvdG90eXBlLFwiZWRnZVNtb290aGluZ1ZhbHVlXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5zZXJpYWxpemUpKCldLGUucHJvdG90eXBlLFwiYm9yZGVyTWluVmFsdWVcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZSkoKSxPYmplY3Qocy5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0RpcnR5XCIpXSxlLnByb3RvdHlwZSxcInJlbmRlckhvdmVyTGlnaHRcIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZSkoKV0sZS5wcm90b3R5cGUsXCJob3ZlclJhZGl1c1wiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplQXNDb2xvcjQpKCldLGUucHJvdG90eXBlLFwiaG92ZXJDb2xvclwiLHZvaWQgMCksbyhbT2JqZWN0KHMuc2VyaWFsaXplQXNWZWN0b3IzKSgpXSxlLnByb3RvdHlwZSxcImhvdmVyUG9zaXRpb25cIix2b2lkIDApLG8oW09iamVjdChzLnNlcmlhbGl6ZUFzVGV4dHVyZSkoXCJhbGJlZG9UZXh0dXJlXCIpXSxlLnByb3RvdHlwZSxcIl9hbGJlZG9UZXh0dXJlXCIsdm9pZCAwKSxvKFtPYmplY3Qocy5leHBhbmRUb1Byb3BlcnR5KShcIl9tYXJrQWxsU3ViTWVzaGVzQXNUZXh0dXJlc0FuZE1pc2NEaXJ0eVwiKV0sZS5wcm90b3R5cGUsXCJhbGJlZG9UZXh0dXJlXCIsdm9pZCAwKSxlfShzLlB1c2hNYXRlcmlhbCk7cy5fVHlwZVN0b3JlLlJlZ2lzdGVyZWRUeXBlc1tcIkJBQllMT04uR1VJLkZsdWVudE1hdGVyaWFsXCJdPWh0O3ZhciBsdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dm9pZCAwPT09aSYmKGk9ITApO3ZhciByPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiByLl9zaGFyZU1hdGVyaWFscz0hMCxyLl9zaGFyZU1hdGVyaWFscz1pLHIucG9pbnRlckVudGVyQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ci5tZXNoJiZyLl9mcm9udFBsYXRlLnNldEVuYWJsZWQoITApfSxyLnBvaW50ZXJPdXRBbmltYXRpb249ZnVuY3Rpb24oKXtyLm1lc2gmJnIuX2Zyb250UGxhdGUuc2V0RW5hYmxlZCghMSl9LHJ9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5fZGlzcG9zZVRvb2x0aXA9ZnVuY3Rpb24oKXt0aGlzLl90b29sdGlwRmFkZT1udWxsLHRoaXMuX3Rvb2x0aXBUZXh0QmxvY2smJnRoaXMuX3Rvb2x0aXBUZXh0QmxvY2suZGlzcG9zZSgpLHRoaXMuX3Rvb2x0aXBUZXh0dXJlJiZ0aGlzLl90b29sdGlwVGV4dHVyZS5kaXNwb3NlKCksdGhpcy5fdG9vbHRpcE1lc2gmJnRoaXMuX3Rvb2x0aXBNZXNoLmRpc3Bvc2UoKSx0aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fdG9vbHRpcEhvdmVyT2JzZXJ2ZXIpLHRoaXMub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fdG9vbHRpcE91dE9ic2VydmVyKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmVuZGVyaW5nR3JvdXBJZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja1BsYXRlLnJlbmRlcmluZ0dyb3VwSWR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrUGxhdGUucmVuZGVyaW5nR3JvdXBJZD10LHRoaXMuX3RleHRQbGF0ZS5yZW5kZXJpbmdHcm91cElkPXQsdGhpcy5fZnJvbnRQbGF0ZS5yZW5kZXJpbmdHcm91cElkPXQsdGhpcy5fdG9vbHRpcE1lc2gmJih0aGlzLl90b29sdGlwTWVzaC5yZW5kZXJpbmdHcm91cElkPXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRvb2x0aXBUZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwVGV4dEJsb2NrP3RoaXMuX3Rvb2x0aXBUZXh0QmxvY2sudGV4dDpudWxsfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0KXtpZighdGhpcy5fdG9vbHRpcEZhZGUpe3RoaXMuX3Rvb2x0aXBNZXNoPXMuUGxhbmVCdWlsZGVyLkNyZWF0ZVBsYW5lKFwiXCIse3NpemU6MX0sdGhpcy5fYmFja1BsYXRlLl9zY2VuZSk7dmFyIGk9cy5QbGFuZUJ1aWxkZXIuQ3JlYXRlUGxhbmUoXCJcIix7c2l6ZToxLHNpZGVPcmllbnRhdGlvbjpzLk1lc2guRE9VQkxFU0lERX0sdGhpcy5fYmFja1BsYXRlLl9zY2VuZSkscj1uZXcgcy5TdGFuZGFyZE1hdGVyaWFsKFwiXCIsdGhpcy5fYmFja1BsYXRlLl9zY2VuZSk7ci5kaWZmdXNlQ29sb3I9cy5Db2xvcjMuRnJvbUhleFN0cmluZyhcIiMyMTIxMjFcIiksaS5tYXRlcmlhbD1yLGkuaXNQaWNrYWJsZT0hMSx0aGlzLl90b29sdGlwTWVzaC5hZGRDaGlsZChpKSxpLnBvc2l0aW9uLno9LjA1LHRoaXMuX3Rvb2x0aXBNZXNoLnNjYWxpbmcueT0xLzMsdGhpcy5fdG9vbHRpcE1lc2gucG9zaXRpb24ueT0uNyx0aGlzLl90b29sdGlwTWVzaC5wb3NpdGlvbi56PS0uMTUsdGhpcy5fdG9vbHRpcE1lc2guaXNQaWNrYWJsZT0hMSx0aGlzLl90b29sdGlwTWVzaC5wYXJlbnQ9dGhpcy5fYmFja1BsYXRlLHRoaXMuX3Rvb2x0aXBUZXh0dXJlPUsuQ3JlYXRlRm9yTWVzaCh0aGlzLl90b29sdGlwTWVzaCksdGhpcy5fdG9vbHRpcFRleHRCbG9jaz1uZXcgeSx0aGlzLl90b29sdGlwVGV4dEJsb2NrLnNjYWxlWT0zLHRoaXMuX3Rvb2x0aXBUZXh0QmxvY2suY29sb3I9XCJ3aGl0ZVwiLHRoaXMuX3Rvb2x0aXBUZXh0QmxvY2suZm9udFNpemU9MTMwLHRoaXMuX3Rvb2x0aXBUZXh0dXJlLmFkZENvbnRyb2wodGhpcy5fdG9vbHRpcFRleHRCbG9jayksdGhpcy5fdG9vbHRpcEZhZGU9bmV3IHMuRmFkZUluT3V0QmVoYXZpb3IsdGhpcy5fdG9vbHRpcEZhZGUuZGVsYXk9NTAwLHRoaXMuX3Rvb2x0aXBNZXNoLmFkZEJlaGF2aW9yKHRoaXMuX3Rvb2x0aXBGYWRlKSx0aGlzLl90b29sdGlwSG92ZXJPYnNlcnZlcj10aGlzLm9uUG9pbnRlckVudGVyT2JzZXJ2YWJsZS5hZGQoZnVuY3Rpb24oKXtlLl90b29sdGlwRmFkZSYmZS5fdG9vbHRpcEZhZGUuZmFkZUluKCEwKX0pLHRoaXMuX3Rvb2x0aXBPdXRPYnNlcnZlcj10aGlzLm9uUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKCl7ZS5fdG9vbHRpcEZhZGUmJmUuX3Rvb2x0aXBGYWRlLmZhZGVJbighMSl9KX10aGlzLl90b29sdGlwVGV4dEJsb2NrJiYodGhpcy5fdG9vbHRpcFRleHRCbG9jay50ZXh0PXQpfWVsc2UgdGhpcy5fZGlzcG9zZVRvb2x0aXAoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdGV4dCE9PXQmJih0aGlzLl90ZXh0PXQsdGhpcy5fcmVidWlsZENvbnRlbnQoKSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaW1hZ2VVcmxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlVXJsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faW1hZ2VVcmwhPT10JiYodGhpcy5faW1hZ2VVcmw9dCx0aGlzLl9yZWJ1aWxkQ29udGVudCgpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJiYWNrTWF0ZXJpYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tNYXRlcmlhbH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJmcm9udE1hdGVyaWFsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mcm9udE1hdGVyaWFsfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBsYXRlTWF0ZXJpYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXRlTWF0ZXJpYWx9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwic2hhcmVNYXRlcmlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYXJlTWF0ZXJpYWxzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRUeXBlTmFtZT1mdW5jdGlvbigpe3JldHVyblwiSG9sb2dyYXBoaWNCdXR0b25cIn0sZS5wcm90b3R5cGUuX3JlYnVpbGRDb250ZW50PWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zZUZhY2FkZVRleHR1cmUoKTt2YXIgdD1uZXcgQztpZih0LmlzVmVydGljYWw9ITAsdGhpcy5faW1hZ2VVcmwpe3ZhciBlPW5ldyB2O2Uuc291cmNlPXRoaXMuX2ltYWdlVXJsLGUucGFkZGluZ1RvcD1cIjQwcHhcIixlLmhlaWdodD1cIjE4MHB4XCIsZS53aWR0aD1cIjEwMHB4XCIsZS5wYWRkaW5nQm90dG9tPVwiNDBweFwiLHQuYWRkQ29udHJvbChlKX1pZih0aGlzLl90ZXh0KXt2YXIgaT1uZXcgeTtpLnRleHQ9dGhpcy5fdGV4dCxpLmNvbG9yPVwid2hpdGVcIixpLmhlaWdodD1cIjMwcHhcIixpLmZvbnRTaXplPTI0LHQuYWRkQ29udHJvbChpKX10aGlzLl9mcm9udFBsYXRlJiYodGhpcy5jb250ZW50PXQpfSxlLnByb3RvdHlwZS5fY3JlYXRlTm9kZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYmFja1BsYXRlPXMuQm94QnVpbGRlci5DcmVhdGVCb3godGhpcy5uYW1lK1wiQmFja01lc2hcIix7d2lkdGg6MSxoZWlnaHQ6MSxkZXB0aDouMDh9LGUpLHRoaXMuX2Zyb250UGxhdGU9cy5Cb3hCdWlsZGVyLkNyZWF0ZUJveCh0aGlzLm5hbWUrXCJGcm9udE1lc2hcIix7d2lkdGg6MSxoZWlnaHQ6MSxkZXB0aDouMDh9LGUpLHRoaXMuX2Zyb250UGxhdGUucGFyZW50PXRoaXMuX2JhY2tQbGF0ZSx0aGlzLl9mcm9udFBsYXRlLnBvc2l0aW9uLno9LS4wOCx0aGlzLl9mcm9udFBsYXRlLmlzUGlja2FibGU9ITEsdGhpcy5fZnJvbnRQbGF0ZS5zZXRFbmFibGVkKCExKSx0aGlzLl90ZXh0UGxhdGU9dC5wcm90b3R5cGUuX2NyZWF0ZU5vZGUuY2FsbCh0aGlzLGUpLHRoaXMuX3RleHRQbGF0ZS5wYXJlbnQ9dGhpcy5fYmFja1BsYXRlLHRoaXMuX3RleHRQbGF0ZS5wb3NpdGlvbi56PS0uMDgsdGhpcy5fdGV4dFBsYXRlLmlzUGlja2FibGU9ITEsdGhpcy5fYmFja1BsYXRlfSxlLnByb3RvdHlwZS5fYXBwbHlGYWNhZGU9ZnVuY3Rpb24odCl7dGhpcy5fcGxhdGVNYXRlcmlhbC5lbWlzc2l2ZVRleHR1cmU9dCx0aGlzLl9wbGF0ZU1hdGVyaWFsLm9wYWNpdHlUZXh0dXJlPXR9LGUucHJvdG90eXBlLl9jcmVhdGVCYWNrTWF0ZXJpYWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9iYWNrTWF0ZXJpYWw9bmV3IGh0KHRoaXMubmFtZStcIkJhY2sgTWF0ZXJpYWxcIix0LmdldFNjZW5lKCkpLHRoaXMuX2JhY2tNYXRlcmlhbC5yZW5kZXJIb3ZlckxpZ2h0PSEwLHRoaXMuX3BpY2tlZFBvaW50T2JzZXJ2ZXI9dGhpcy5faG9zdC5vblBpY2tlZFBvaW50Q2hhbmdlZE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe3Q/KGUuX2JhY2tNYXRlcmlhbC5ob3ZlclBvc2l0aW9uPXQsZS5fYmFja01hdGVyaWFsLmhvdmVyQ29sb3IuYT0xKTplLl9iYWNrTWF0ZXJpYWwuaG92ZXJDb2xvci5hPTB9KX0sZS5wcm90b3R5cGUuX2NyZWF0ZUZyb250TWF0ZXJpYWw9ZnVuY3Rpb24odCl7dGhpcy5fZnJvbnRNYXRlcmlhbD1uZXcgaHQodGhpcy5uYW1lK1wiRnJvbnQgTWF0ZXJpYWxcIix0LmdldFNjZW5lKCkpLHRoaXMuX2Zyb250TWF0ZXJpYWwuaW5uZXJHbG93Q29sb3JJbnRlbnNpdHk9MCx0aGlzLl9mcm9udE1hdGVyaWFsLmFscGhhPS41LHRoaXMuX2Zyb250TWF0ZXJpYWwucmVuZGVyQm9yZGVycz0hMH0sZS5wcm90b3R5cGUuX2NyZWF0ZVBsYXRlTWF0ZXJpYWw9ZnVuY3Rpb24odCl7dGhpcy5fcGxhdGVNYXRlcmlhbD1uZXcgcy5TdGFuZGFyZE1hdGVyaWFsKHRoaXMubmFtZStcIlBsYXRlIE1hdGVyaWFsXCIsdC5nZXRTY2VuZSgpKSx0aGlzLl9wbGF0ZU1hdGVyaWFsLnNwZWN1bGFyQ29sb3I9cy5Db2xvcjMuQmxhY2soKX0sZS5wcm90b3R5cGUuX2FmZmVjdE1hdGVyaWFsPWZ1bmN0aW9uKHQpe3RoaXMuX3NoYXJlTWF0ZXJpYWxzPyh0aGlzLl9ob3N0Ll9zaGFyZWRNYXRlcmlhbHMuYmFja0ZsdWVudE1hdGVyaWFsP3RoaXMuX2JhY2tNYXRlcmlhbD10aGlzLl9ob3N0Ll9zaGFyZWRNYXRlcmlhbHMuYmFja0ZsdWVudE1hdGVyaWFsOih0aGlzLl9jcmVhdGVCYWNrTWF0ZXJpYWwodCksdGhpcy5faG9zdC5fc2hhcmVkTWF0ZXJpYWxzLmJhY2tGbHVlbnRNYXRlcmlhbD10aGlzLl9iYWNrTWF0ZXJpYWwpLHRoaXMuX2hvc3QuX3NoYXJlZE1hdGVyaWFscy5mcm9udEZsdWVudE1hdGVyaWFsP3RoaXMuX2Zyb250TWF0ZXJpYWw9dGhpcy5faG9zdC5fc2hhcmVkTWF0ZXJpYWxzLmZyb250Rmx1ZW50TWF0ZXJpYWw6KHRoaXMuX2NyZWF0ZUZyb250TWF0ZXJpYWwodCksdGhpcy5faG9zdC5fc2hhcmVkTWF0ZXJpYWxzLmZyb250Rmx1ZW50TWF0ZXJpYWw9dGhpcy5fZnJvbnRNYXRlcmlhbCkpOih0aGlzLl9jcmVhdGVCYWNrTWF0ZXJpYWwodCksdGhpcy5fY3JlYXRlRnJvbnRNYXRlcmlhbCh0KSksdGhpcy5fY3JlYXRlUGxhdGVNYXRlcmlhbCh0KSx0aGlzLl9iYWNrUGxhdGUubWF0ZXJpYWw9dGhpcy5fYmFja01hdGVyaWFsLHRoaXMuX2Zyb250UGxhdGUubWF0ZXJpYWw9dGhpcy5fZnJvbnRNYXRlcmlhbCx0aGlzLl90ZXh0UGxhdGUubWF0ZXJpYWw9dGhpcy5fcGxhdGVNYXRlcmlhbCx0aGlzLl9yZWJ1aWxkQ29udGVudCgpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2Rpc3Bvc2VUb29sdGlwKCksdGhpcy5zaGFyZU1hdGVyaWFsc3x8KHRoaXMuX2JhY2tNYXRlcmlhbC5kaXNwb3NlKCksdGhpcy5fZnJvbnRNYXRlcmlhbC5kaXNwb3NlKCksdGhpcy5fcGxhdGVNYXRlcmlhbC5kaXNwb3NlKCksdGhpcy5fcGlja2VkUG9pbnRPYnNlcnZlciYmKHRoaXMuX2hvc3Qub25QaWNrZWRQb2ludENoYW5nZWRPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9waWNrZWRQb2ludE9ic2VydmVyKSx0aGlzLl9waWNrZWRQb2ludE9ic2VydmVyPW51bGwpKX0sZX0oZXQpLHV0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgcj10LmNhbGwodGhpcyxpKXx8dGhpcztyZXR1cm4gci5fY3VycmVudE1lc2g9ZSxyLnBvaW50ZXJFbnRlckFuaW1hdGlvbj1mdW5jdGlvbigpe3IubWVzaCYmci5tZXNoLnNjYWxpbmcuc2NhbGVJblBsYWNlKDEuMSl9LHIucG9pbnRlck91dEFuaW1hdGlvbj1mdW5jdGlvbigpe3IubWVzaCYmci5tZXNoLnNjYWxpbmcuc2NhbGVJblBsYWNlKDEvMS4xKX0sci5wb2ludGVyRG93bkFuaW1hdGlvbj1mdW5jdGlvbigpe3IubWVzaCYmci5tZXNoLnNjYWxpbmcuc2NhbGVJblBsYWNlKC45NSl9LHIucG9pbnRlclVwQW5pbWF0aW9uPWZ1bmN0aW9uKCl7ci5tZXNoJiZyLm1lc2guc2NhbGluZy5zY2FsZUluUGxhY2UoMS8uOTUpfSxyfXJldHVybiBuKGUsdCksZS5wcm90b3R5cGUuX2dldFR5cGVOYW1lPWZ1bmN0aW9uKCl7cmV0dXJuXCJNZXNoQnV0dG9uM0RcIn0sZS5wcm90b3R5cGUuX2NyZWF0ZU5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fY3VycmVudE1lc2guZ2V0Q2hpbGRNZXNoZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubWV0YWRhdGE9ZX0pLHRoaXMuX2N1cnJlbnRNZXNofSxlLnByb3RvdHlwZS5fYWZmZWN0TWF0ZXJpYWw9ZnVuY3Rpb24odCl7fSxlfShldCksY3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBudWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIG4oZSx0KSxlLnByb3RvdHlwZS5fbWFwR3JpZE5vZGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10Lm1lc2g7aWYoaSl7dC5wb3NpdGlvbj1lLmNsb25lKCk7dmFyIHI9cy5UbXBWZWN0b3JzLlZlY3RvcjNbMF07c3dpdGNoKHIuY29weUZyb20oZSksdGhpcy5vcmllbnRhdGlvbil7Y2FzZSBpdC5GQUNFT1JJR0lOX09SSUVOVEFUSU9OOmNhc2UgaXQuRkFDRUZPUldBUkRfT1JJRU5UQVRJT046ci5hZGRJblBsYWNlKG5ldyBzLlZlY3RvcjMoMCwwLDEpKSxpLmxvb2tBdChyKTticmVhaztjYXNlIGl0LkZBQ0VGT1JXQVJEUkVWRVJTRURfT1JJRU5UQVRJT046Y2FzZSBpdC5GQUNFT1JJR0lOUkVWRVJTRURfT1JJRU5UQVRJT046ci5hZGRJblBsYWNlKG5ldyBzLlZlY3RvcjMoMCwwLC0xKSksaS5sb29rQXQocil9fX0sZX0ocnQpLF90PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuX2l0ZXJhdGlvbj0xMDAsZX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIml0ZXJhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlcmF0aW9ufSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9pdGVyYXRpb24hPT10JiYodGhpcy5faXRlcmF0aW9uPXQscy5Ub29scy5TZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlLl9hcnJhbmdlQ2hpbGRyZW4oKX0pKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fbWFwR3JpZE5vZGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10Lm1lc2gscj10aGlzLl9zY2F0dGVyTWFwcGluZyhlKTtpZihpKXtzd2l0Y2godGhpcy5vcmllbnRhdGlvbil7Y2FzZSBpdC5GQUNFT1JJR0lOX09SSUVOVEFUSU9OOmNhc2UgaXQuRkFDRUZPUldBUkRfT1JJRU5UQVRJT046aS5sb29rQXQobmV3IHMuVmVjdG9yMygwLDAsMSkpO2JyZWFrO2Nhc2UgaXQuRkFDRUZPUldBUkRSRVZFUlNFRF9PUklFTlRBVElPTjpjYXNlIGl0LkZBQ0VPUklHSU5SRVZFUlNFRF9PUklFTlRBVElPTjppLmxvb2tBdChuZXcgcy5WZWN0b3IzKDAsMCwtMSkpfXQucG9zaXRpb249cn19LGUucHJvdG90eXBlLl9zY2F0dGVyTWFwcGluZz1mdW5jdGlvbih0KXtyZXR1cm4gdC54PSgxLTIqTWF0aC5yYW5kb20oKSkqdGhpcy5fY2VsbFdpZHRoLHQueT0oMS0yKk1hdGgucmFuZG9tKCkpKnRoaXMuX2NlbGxIZWlnaHQsdH0sZS5wcm90b3R5cGUuX2ZpbmFsUHJvY2Vzc2luZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTAsaT10aGlzLl9jaGlsZHJlbjtlPGkubGVuZ3RoO2UrKyl7dmFyIHI9aVtlXTtyLm1lc2gmJnQucHVzaChyLm1lc2gpfWZvcih2YXIgbj0wO248dGhpcy5faXRlcmF0aW9uO24rKyl7dC5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5wb3NpdGlvbi5sZW5ndGhTcXVhcmVkKCkscj1lLnBvc2l0aW9uLmxlbmd0aFNxdWFyZWQoKTtyZXR1cm4gaTxyPzE6aT5yPy0xOjB9KTtmb3IodmFyIG89TWF0aC5wb3codGhpcy5tYXJnaW4sMiksYT1NYXRoLm1heCh0aGlzLl9jZWxsV2lkdGgsdGhpcy5fY2VsbEhlaWdodCksaD1zLlRtcFZlY3RvcnMuVmVjdG9yMlswXSxsPXMuVG1wVmVjdG9ycy5WZWN0b3IzWzBdLHU9MDt1PHQubGVuZ3RoLTE7dSsrKWZvcih2YXIgYz11KzE7Yzx0Lmxlbmd0aDtjKyspaWYodSE9Yyl7dFtjXS5wb3NpdGlvbi5zdWJ0cmFjdFRvUmVmKHRbdV0ucG9zaXRpb24sbCksaC54PWwueCxoLnk9bC55O3ZhciBfPWEsZD1oLmxlbmd0aFNxdWFyZWQoKS1vOyhkLT1NYXRoLm1pbihkLG8pKTxNYXRoLnBvdyhfLDIpJiYoaC5ub3JtYWxpemUoKSxsLnNjYWxlSW5QbGFjZSguNSooXy1NYXRoLnNxcnQoZCkpKSx0W2NdLnBvc2l0aW9uLmFkZEluUGxhY2UobCksdFt1XS5wb3NpdGlvbi5zdWJ0cmFjdEluUGxhY2UobCkpfX19LGV9KHJ0KSxkdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9yYWRpdXM9NSxlfXJldHVybiBuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicmFkaXVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpdXN9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3JhZGl1cyE9PXQmJih0aGlzLl9yYWRpdXM9dCxzLlRvb2xzLlNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2FycmFuZ2VDaGlsZHJlbigpfSkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9tYXBHcmlkTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQubWVzaDtpZihpKXt2YXIgcj10aGlzLl9zcGhlcmljYWxNYXBwaW5nKGUpO3N3aXRjaCh0LnBvc2l0aW9uPXIsdGhpcy5vcmllbnRhdGlvbil7Y2FzZSBpdC5GQUNFT1JJR0lOX09SSUVOVEFUSU9OOmkubG9va0F0KG5ldyBzLlZlY3RvcjMoMipyLngsMipyLnksMipyLnopKTticmVhaztjYXNlIGl0LkZBQ0VPUklHSU5SRVZFUlNFRF9PUklFTlRBVElPTjppLmxvb2tBdChuZXcgcy5WZWN0b3IzKC1yLngsLXIueSwtci56KSk7YnJlYWs7Y2FzZSBpdC5GQUNFRk9SV0FSRF9PUklFTlRBVElPTjpicmVhaztjYXNlIGl0LkZBQ0VGT1JXQVJEUkVWRVJTRURfT1JJRU5UQVRJT046aS5yb3RhdGUocy5BeGlzLlksTWF0aC5QSSxzLlNwYWNlLkxPQ0FMKX19fSxlLnByb3RvdHlwZS5fc3BoZXJpY2FsTWFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgcy5WZWN0b3IzKDAsMCx0aGlzLl9yYWRpdXMpLGk9dC55L3RoaXMuX3JhZGl1cyxyPS10LngvdGhpcy5fcmFkaXVzO3JldHVybiBzLk1hdHJpeC5Sb3RhdGlvbllhd1BpdGNoUm9sbFRvUmVmKHIsaSwwLHMuVG1wVmVjdG9ycy5NYXRyaXhbMF0pLHMuVmVjdG9yMy5UcmFuc2Zvcm1Ob3JtYWwoZSxzLlRtcFZlY3RvcnMuTWF0cml4WzBdKX0sZX0ocnQpLGZ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dm9pZCAwPT09ZSYmKGU9ITEpO3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5faXNWZXJ0aWNhbD0hMSxpLm1hcmdpbj0uMSxpLl9pc1ZlcnRpY2FsPWUsaX1yZXR1cm4gbihlLHQpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzVmVydGljYWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVmVydGljYWx9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2lzVmVydGljYWwhPT10JiYodGhpcy5faXNWZXJ0aWNhbD10LHMuVG9vbHMuU2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5fYXJyYW5nZUNoaWxkcmVuKCl9KSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2FycmFuZ2VDaGlsZHJlbj1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPTAsaT0wLHI9MCxuPVtdLG89cy5NYXRyaXguSW52ZXJ0KHRoaXMubm9kZS5jb21wdXRlV29ybGRNYXRyaXgoITApKSxhPTAsaD10aGlzLl9jaGlsZHJlbjthPGgubGVuZ3RoO2ErKyl7aWYoKGY9aFthXSkubWVzaCl7cisrLGYubWVzaC5jb21wdXRlV29ybGRNYXRyaXgoITApLGYubWVzaC5nZXRXb3JsZE1hdHJpeCgpLm11bHRpcGx5VG9SZWYobyxzLlRtcFZlY3RvcnMuTWF0cml4WzBdKTt2YXIgbD1mLm1lc2guZ2V0Qm91bmRpbmdJbmZvKCkuYm91bmRpbmdCb3gsdT1zLlZlY3RvcjMuVHJhbnNmb3JtTm9ybWFsKGwuZXh0ZW5kU2l6ZSxzLlRtcFZlY3RvcnMuTWF0cml4WzBdKTtuLnB1c2godSksdGhpcy5faXNWZXJ0aWNhbD9pKz11Lnk6ZSs9dS54fX10aGlzLl9pc1ZlcnRpY2FsP2krPShyLTEpKnRoaXMubWFyZ2luLzI6ZSs9KHItMSkqdGhpcy5tYXJnaW4vMix0PXRoaXMuX2lzVmVydGljYWw/LWk6LWU7Zm9yKHZhciBjPTAsXz0wLGQ9dGhpcy5fY2hpbGRyZW47XzxkLmxlbmd0aDtfKyspe3ZhciBmO2lmKChmPWRbX10pLm1lc2gpe3ItLTt1PW5bYysrXTt0aGlzLl9pc1ZlcnRpY2FsPyhmLnBvc2l0aW9uLnk9dCt1LnksZi5wb3NpdGlvbi54PTAsdCs9Mip1LnkpOihmLnBvc2l0aW9uLng9dCt1LngsZi5wb3NpdGlvbi55PTAsdCs9Mip1LngpLHQrPXI+MD90aGlzLm1hcmdpbjowfX19LGV9KGl0KSxwdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIGU9dGhpczt0aGlzLl9sYXN0Q29udHJvbE92ZXI9e30sdGhpcy5fbGFzdENvbnRyb2xEb3duPXt9LHRoaXMub25QaWNrZWRQb2ludENoYW5nZWRPYnNlcnZhYmxlPW5ldyBzLk9ic2VydmFibGUsdGhpcy5fc2hhcmVkTWF0ZXJpYWxzPXt9LHRoaXMuX3NjZW5lPXR8fHMuRW5naW5lU3RvcmUuTGFzdENyZWF0ZWRTY2VuZSx0aGlzLl9zY2VuZURpc3Bvc2VPYnNlcnZlcj10aGlzLl9zY2VuZS5vbkRpc3Bvc2VPYnNlcnZhYmxlLmFkZChmdW5jdGlvbigpe2UuX3NjZW5lRGlzcG9zZU9ic2VydmVyPW51bGwsZS5fdXRpbGl0eUxheWVyPW51bGwsZS5kaXNwb3NlKCl9KSx0aGlzLl91dGlsaXR5TGF5ZXI9bmV3IHMuVXRpbGl0eUxheWVyUmVuZGVyZXIodGhpcy5fc2NlbmUpLHRoaXMuX3V0aWxpdHlMYXllci5vbmx5Q2hlY2tQb2ludGVyRG93bkV2ZW50cz0hMSx0aGlzLl91dGlsaXR5TGF5ZXIucGlja1V0aWxpdHlTY2VuZUZpcnN0PSExLHRoaXMuX3V0aWxpdHlMYXllci5tYWluU2NlbmVUcmFja2VyUHJlZGljYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lm1ldGFkYXRhJiZ0Lm1ldGFkYXRhLl9ub2RlfSx0aGlzLl9yb290Q29udGFpbmVyPW5ldyBpdChcIlJvb3RDb250YWluZXJcIiksdGhpcy5fcm9vdENvbnRhaW5lci5faG9zdD10aGlzO3ZhciBpPXRoaXMuX3V0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZTt0aGlzLl9wb2ludGVyT3V0T2JzZXJ2ZXI9dGhpcy5fdXRpbGl0eUxheWVyLm9uUG9pbnRlck91dE9ic2VydmFibGUuYWRkKGZ1bmN0aW9uKHQpe2UuX2hhbmRsZVBvaW50ZXJPdXQodCwhMCl9KSx0aGlzLl9wb2ludGVyT2JzZXJ2ZXI9aS5vblBvaW50ZXJPYnNlcnZhYmxlLmFkZChmdW5jdGlvbih0LGkpe2UuX2RvUGlja2luZyh0KX0pLHRoaXMuX3V0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZS5hdXRvQ2xlYXI9ITEsdGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lLmF1dG9DbGVhckRlcHRoQW5kU3RlbmNpbD0hMSxuZXcgcy5IZW1pc3BoZXJpY0xpZ2h0KFwiaGVtaVwiLHMuVmVjdG9yMy5VcCgpLHRoaXMuX3V0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZSl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInNjZW5lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2VuZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ1dGlsaXR5TGF5ZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3V0aWxpdHlMYXllcn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5faGFuZGxlUG9pbnRlck91dD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2xhc3RDb250cm9sT3Zlclt0XTtpJiYoaS5fb25Qb2ludGVyT3V0KGkpLGRlbGV0ZSB0aGlzLl9sYXN0Q29udHJvbE92ZXJbdF0pLGUmJnRoaXMuX2xhc3RDb250cm9sRG93blt0XSYmKHRoaXMuX2xhc3RDb250cm9sRG93blt0XS5mb3JjZVBvaW50ZXJVcCgpLGRlbGV0ZSB0aGlzLl9sYXN0Q29udHJvbERvd25bdF0pLHRoaXMub25QaWNrZWRQb2ludENoYW5nZWRPYnNlcnZhYmxlLm5vdGlmeU9ic2VydmVycyhudWxsKX0sdC5wcm90b3R5cGUuX2RvUGlja2luZz1mdW5jdGlvbih0KXtpZighdGhpcy5fdXRpbGl0eUxheWVyfHwhdGhpcy5fdXRpbGl0eUxheWVyLnNob3VsZFJlbmRlcnx8IXRoaXMuX3V0aWxpdHlMYXllci51dGlsaXR5TGF5ZXJTY2VuZS5hY3RpdmVDYW1lcmEpcmV0dXJuITE7dmFyIGU9dC5ldmVudCxpPWUucG9pbnRlcklkfHwwLHI9ZS5idXR0b24sbj10LnBpY2tJbmZvO2lmKCFufHwhbi5oaXQpcmV0dXJuIHRoaXMuX2hhbmRsZVBvaW50ZXJPdXQoaSx0LnR5cGU9PT1zLlBvaW50ZXJFdmVudFR5cGVzLlBPSU5URVJVUCksITE7dmFyIG89bi5waWNrZWRNZXNoLm1ldGFkYXRhO3JldHVybiBuLnBpY2tlZFBvaW50JiZ0aGlzLm9uUGlja2VkUG9pbnRDaGFuZ2VkT2JzZXJ2YWJsZS5ub3RpZnlPYnNlcnZlcnMobi5waWNrZWRQb2ludCksby5fcHJvY2Vzc09ic2VydmFibGVzKHQudHlwZSxuLnBpY2tlZFBvaW50LGkscil8fHQudHlwZT09PXMuUG9pbnRlckV2ZW50VHlwZXMuUE9JTlRFUk1PVkUmJih0aGlzLl9sYXN0Q29udHJvbE92ZXJbaV0mJnRoaXMuX2xhc3RDb250cm9sT3ZlcltpXS5fb25Qb2ludGVyT3V0KHRoaXMuX2xhc3RDb250cm9sT3ZlcltpXSksZGVsZXRlIHRoaXMuX2xhc3RDb250cm9sT3ZlcltpXSksdC50eXBlPT09cy5Qb2ludGVyRXZlbnRUeXBlcy5QT0lOVEVSVVAmJih0aGlzLl9sYXN0Q29udHJvbERvd25bZS5wb2ludGVySWRdJiYodGhpcy5fbGFzdENvbnRyb2xEb3duW2UucG9pbnRlcklkXS5mb3JjZVBvaW50ZXJVcCgpLGRlbGV0ZSB0aGlzLl9sYXN0Q29udHJvbERvd25bZS5wb2ludGVySWRdKSxcInRvdWNoXCI9PT1lLnBvaW50ZXJUeXBlJiZ0aGlzLl9oYW5kbGVQb2ludGVyT3V0KGksITEpKSwhMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwicm9vdENvbnRhaW5lclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcm9vdENvbnRhaW5lcn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jb250YWluc0NvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXIuY29udGFpbnNDb250cm9sKHQpfSx0LnByb3RvdHlwZS5hZGRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yb290Q29udGFpbmVyLmFkZENvbnRyb2wodCksdGhpc30sdC5wcm90b3R5cGUucmVtb3ZlQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcm9vdENvbnRhaW5lci5yZW1vdmVDb250cm9sKHQpLHRoaXN9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fcm9vdENvbnRhaW5lci5kaXNwb3NlKCksdGhpcy5fc2hhcmVkTWF0ZXJpYWxzKXRoaXMuX3NoYXJlZE1hdGVyaWFscy5oYXNPd25Qcm9wZXJ0eSh0KSYmdGhpcy5fc2hhcmVkTWF0ZXJpYWxzW3RdLmRpc3Bvc2UoKTt0aGlzLl9zaGFyZWRNYXRlcmlhbHM9e30sdGhpcy5fcG9pbnRlck91dE9ic2VydmVyJiZ0aGlzLl91dGlsaXR5TGF5ZXImJih0aGlzLl91dGlsaXR5TGF5ZXIub25Qb2ludGVyT3V0T2JzZXJ2YWJsZS5yZW1vdmUodGhpcy5fcG9pbnRlck91dE9ic2VydmVyKSx0aGlzLl9wb2ludGVyT3V0T2JzZXJ2ZXI9bnVsbCksdGhpcy5vblBpY2tlZFBvaW50Q2hhbmdlZE9ic2VydmFibGUuY2xlYXIoKTt2YXIgZT10aGlzLl91dGlsaXR5TGF5ZXI/dGhpcy5fdXRpbGl0eUxheWVyLnV0aWxpdHlMYXllclNjZW5lOm51bGw7ZSYmdGhpcy5fcG9pbnRlck9ic2VydmVyJiYoZS5vblBvaW50ZXJPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9wb2ludGVyT2JzZXJ2ZXIpLHRoaXMuX3BvaW50ZXJPYnNlcnZlcj1udWxsKSx0aGlzLl9zY2VuZSYmdGhpcy5fc2NlbmVEaXNwb3NlT2JzZXJ2ZXImJih0aGlzLl9zY2VuZS5vbkRpc3Bvc2VPYnNlcnZhYmxlLnJlbW92ZSh0aGlzLl9zY2VuZURpc3Bvc2VPYnNlcnZlciksdGhpcy5fc2NlbmVEaXNwb3NlT2JzZXJ2ZXI9bnVsbCksdGhpcy5fdXRpbGl0eUxheWVyJiZ0aGlzLl91dGlsaXR5TGF5ZXIuZGlzcG9zZSgpfSx0fSgpO2kuZChlLFwiQWR2YW5jZWREeW5hbWljVGV4dHVyZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEt9KSxpLmQoZSxcIkFkdmFuY2VkRHluYW1pY1RleHR1cmVJbnN0cnVtZW50YXRpb25cIixmdW5jdGlvbigpe3JldHVybiBafSksaS5kKGUsXCJWZWN0b3IyV2l0aEluZm9cIixmdW5jdGlvbigpe3JldHVybiBkfSksaS5kKGUsXCJNYXRyaXgyRFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSxpLmQoZSxcIk1lYXN1cmVcIixmdW5jdGlvbigpe3JldHVybiBffSksaS5kKGUsXCJNdWx0aUxpbmVQb2ludFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSxpLmQoZSxcIlN0eWxlXCIsZnVuY3Rpb24oKXtyZXR1cm4gcX0pLGkuZChlLFwiVmFsdWVBbmRVbml0XCIsZnVuY3Rpb24oKXtyZXR1cm4gYX0pLGkuZChlLFwiWG1sTG9hZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gSn0pLGkuZChlLFwiQnV0dG9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gT30pLGkuZChlLFwiQ2hlY2tib3hcIixmdW5jdGlvbigpe3JldHVybiB3fSksaS5kKGUsXCJDb2xvclBpY2tlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIE19KSxpLmQoZSxcIkNvbnRhaW5lclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGd9KSxpLmQoZSxcIkNvbnRyb2xcIixmdW5jdGlvbigpe3JldHVybiBwfSksaS5kKGUsXCJFbGxpcHNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gUH0pLGkuZChlLFwiR3JpZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHh9KSxpLmQoZSxcIkltYWdlXCIsZnVuY3Rpb24oKXtyZXR1cm4gdn0pLGkuZChlLFwiSW5wdXRUZXh0XCIsZnVuY3Rpb24oKXtyZXR1cm4gVH0pLGkuZChlLFwiSW5wdXRQYXNzd29yZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGt9KSxpLmQoZSxcIkxpbmVcIixmdW5jdGlvbigpe3JldHVybiBJfSksaS5kKGUsXCJNdWx0aUxpbmVcIixmdW5jdGlvbigpe3JldHVybiBTfSksaS5kKGUsXCJSYWRpb0J1dHRvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSxpLmQoZSxcIlN0YWNrUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiBDfSksaS5kKGUsXCJTZWxlY3Rvckdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gRH0pLGkuZChlLFwiQ2hlY2tib3hHcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEJ9KSxpLmQoZSxcIlJhZGlvR3JvdXBcIixmdW5jdGlvbigpe3JldHVybiBOfSksaS5kKGUsXCJTbGlkZXJHcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFZ9KSxpLmQoZSxcIlNlbGVjdGlvblBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gSH0pLGkuZChlLFwiU2Nyb2xsVmlld2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gen0pLGkuZChlLFwiVGV4dFdyYXBwaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gYn0pLGkuZChlLFwiVGV4dEJsb2NrXCIsZnVuY3Rpb24oKXtyZXR1cm4geX0pLGkuZChlLFwiS2V5UHJvcGVydHlTZXRcIixmdW5jdGlvbigpe3JldHVybiBHfSksaS5kKGUsXCJWaXJ0dWFsS2V5Ym9hcmRcIixmdW5jdGlvbigpe3JldHVybiBYfSksaS5kKGUsXCJSZWN0YW5nbGVcIixmdW5jdGlvbigpe3JldHVybiBtfSksaS5kKGUsXCJEaXNwbGF5R3JpZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSxpLmQoZSxcIkJhc2VTbGlkZXJcIixmdW5jdGlvbigpe3JldHVybiBMfSksaS5kKGUsXCJTbGlkZXJcIixmdW5jdGlvbigpe3JldHVybiBSfSksaS5kKGUsXCJJbWFnZUJhc2VkU2xpZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gVX0pLGkuZChlLFwiU2Nyb2xsQmFyXCIsZnVuY3Rpb24oKXtyZXR1cm4gan0pLGkuZChlLFwiSW1hZ2VTY3JvbGxCYXJcIixmdW5jdGlvbigpe3JldHVybiBXfSksaS5kKGUsXCJuYW1lXCIsZnVuY3Rpb24oKXtyZXR1cm5cIlN0YXRpY3NcIn0pLGkuZChlLFwiR1VJM0RNYW5hZ2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gcHR9KSxpLmQoZSxcIlZlY3RvcjNXaXRoSW5mb1wiLGZ1bmN0aW9uKCl7cmV0dXJuIFF9KSxpLmQoZSxcIkFic3RyYWN0QnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiB0dH0pLGkuZChlLFwiQnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiBldH0pLGkuZChlLFwiQ29udGFpbmVyM0RcIixmdW5jdGlvbigpe3JldHVybiBpdH0pLGkuZChlLFwiQ29udHJvbDNEXCIsZnVuY3Rpb24oKXtyZXR1cm4gJH0pLGkuZChlLFwiQ3lsaW5kZXJQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG50fSksaS5kKGUsXCJIb2xvZ3JhcGhpY0J1dHRvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGx0fSksaS5kKGUsXCJNZXNoQnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiB1dH0pLGkuZChlLFwiUGxhbmVQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGN0fSksaS5kKGUsXCJTY2F0dGVyUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiBfdH0pLGkuZChlLFwiU3BoZXJlUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiBkdH0pLGkuZChlLFwiU3RhY2tQYW5lbDNEXCIsZnVuY3Rpb24oKXtyZXR1cm4gZnR9KSxpLmQoZSxcIlZvbHVtZUJhc2VkUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiBydH0pLGkuZChlLFwiRmx1ZW50TWF0ZXJpYWxEZWZpbmVzXCIsZnVuY3Rpb24oKXtyZXR1cm4gYXR9KSxpLmQoZSxcIkZsdWVudE1hdGVyaWFsXCIsZnVuY3Rpb24oKXtyZXR1cm4gaHR9KX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKSxmdW5jdGlvbih0KXt2YXIgcj1pKDEpO2kuZChlLFwiQWR2YW5jZWREeW5hbWljVGV4dHVyZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQWR2YW5jZWREeW5hbWljVGV4dHVyZX0pLGkuZChlLFwiQWR2YW5jZWREeW5hbWljVGV4dHVyZUluc3RydW1lbnRhdGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQWR2YW5jZWREeW5hbWljVGV4dHVyZUluc3RydW1lbnRhdGlvbn0pLGkuZChlLFwiVmVjdG9yMldpdGhJbmZvXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5WZWN0b3IyV2l0aEluZm99KSxpLmQoZSxcIk1hdHJpeDJEXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5NYXRyaXgyRH0pLGkuZChlLFwiTWVhc3VyZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuTWVhc3VyZX0pLGkuZChlLFwiTXVsdGlMaW5lUG9pbnRcIixmdW5jdGlvbigpe3JldHVybiByLk11bHRpTGluZVBvaW50fSksaS5kKGUsXCJTdHlsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuU3R5bGV9KSxpLmQoZSxcIlZhbHVlQW5kVW5pdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVmFsdWVBbmRVbml0fSksaS5kKGUsXCJYbWxMb2FkZXJcIixmdW5jdGlvbigpe3JldHVybiByLlhtbExvYWRlcn0pLGkuZChlLFwiR1VJM0RNYW5hZ2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5HVUkzRE1hbmFnZXJ9KSxpLmQoZSxcIlZlY3RvcjNXaXRoSW5mb1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVmVjdG9yM1dpdGhJbmZvfSksaS5kKGUsXCJCdXR0b25cIixmdW5jdGlvbigpe3JldHVybiByLkJ1dHRvbn0pLGkuZChlLFwiQ2hlY2tib3hcIixmdW5jdGlvbigpe3JldHVybiByLkNoZWNrYm94fSksaS5kKGUsXCJDb2xvclBpY2tlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ29sb3JQaWNrZXJ9KSxpLmQoZSxcIkNvbnRhaW5lclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ29udGFpbmVyfSksaS5kKGUsXCJDb250cm9sXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5Db250cm9sfSksaS5kKGUsXCJFbGxpcHNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5FbGxpcHNlfSksaS5kKGUsXCJHcmlkXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5HcmlkfSksaS5kKGUsXCJJbWFnZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuSW1hZ2V9KSxpLmQoZSxcIklucHV0VGV4dFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuSW5wdXRUZXh0fSksaS5kKGUsXCJJbnB1dFBhc3N3b3JkXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5JbnB1dFBhc3N3b3JkfSksaS5kKGUsXCJMaW5lXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5MaW5lfSksaS5kKGUsXCJNdWx0aUxpbmVcIixmdW5jdGlvbigpe3JldHVybiByLk11bHRpTGluZX0pLGkuZChlLFwiUmFkaW9CdXR0b25cIixmdW5jdGlvbigpe3JldHVybiByLlJhZGlvQnV0dG9ufSksaS5kKGUsXCJTdGFja1BhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TdGFja1BhbmVsfSksaS5kKGUsXCJTZWxlY3Rvckdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TZWxlY3Rvckdyb3VwfSksaS5kKGUsXCJDaGVja2JveEdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5DaGVja2JveEdyb3VwfSksaS5kKGUsXCJSYWRpb0dyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5SYWRpb0dyb3VwfSksaS5kKGUsXCJTbGlkZXJHcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuU2xpZGVyR3JvdXB9KSxpLmQoZSxcIlNlbGVjdGlvblBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TZWxlY3Rpb25QYW5lbH0pLGkuZChlLFwiU2Nyb2xsVmlld2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TY3JvbGxWaWV3ZXJ9KSxpLmQoZSxcIlRleHRXcmFwcGluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuVGV4dFdyYXBwaW5nfSksaS5kKGUsXCJUZXh0QmxvY2tcIixmdW5jdGlvbigpe3JldHVybiByLlRleHRCbG9ja30pLGkuZChlLFwiS2V5UHJvcGVydHlTZXRcIixmdW5jdGlvbigpe3JldHVybiByLktleVByb3BlcnR5U2V0fSksaS5kKGUsXCJWaXJ0dWFsS2V5Ym9hcmRcIixmdW5jdGlvbigpe3JldHVybiByLlZpcnR1YWxLZXlib2FyZH0pLGkuZChlLFwiUmVjdGFuZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5SZWN0YW5nbGV9KSxpLmQoZSxcIkRpc3BsYXlHcmlkXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5EaXNwbGF5R3JpZH0pLGkuZChlLFwiQmFzZVNsaWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQmFzZVNsaWRlcn0pLGkuZChlLFwiU2xpZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TbGlkZXJ9KSxpLmQoZSxcIkltYWdlQmFzZWRTbGlkZXJcIixmdW5jdGlvbigpe3JldHVybiByLkltYWdlQmFzZWRTbGlkZXJ9KSxpLmQoZSxcIlNjcm9sbEJhclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuU2Nyb2xsQmFyfSksaS5kKGUsXCJJbWFnZVNjcm9sbEJhclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuSW1hZ2VTY3JvbGxCYXJ9KSxpLmQoZSxcIm5hbWVcIixmdW5jdGlvbigpe3JldHVybiByLm5hbWV9KSxpLmQoZSxcIkFic3RyYWN0QnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiByLkFic3RyYWN0QnV0dG9uM0R9KSxpLmQoZSxcIkJ1dHRvbjNEXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5CdXR0b24zRH0pLGkuZChlLFwiQ29udGFpbmVyM0RcIixmdW5jdGlvbigpe3JldHVybiByLkNvbnRhaW5lcjNEfSksaS5kKGUsXCJDb250cm9sM0RcIixmdW5jdGlvbigpe3JldHVybiByLkNvbnRyb2wzRH0pLGkuZChlLFwiQ3lsaW5kZXJQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuQ3lsaW5kZXJQYW5lbH0pLGkuZChlLFwiSG9sb2dyYXBoaWNCdXR0b25cIixmdW5jdGlvbigpe3JldHVybiByLkhvbG9ncmFwaGljQnV0dG9ufSksaS5kKGUsXCJNZXNoQnV0dG9uM0RcIixmdW5jdGlvbigpe3JldHVybiByLk1lc2hCdXR0b24zRH0pLGkuZChlLFwiUGxhbmVQYW5lbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuUGxhbmVQYW5lbH0pLGkuZChlLFwiU2NhdHRlclBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TY2F0dGVyUGFuZWx9KSxpLmQoZSxcIlNwaGVyZVBhbmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TcGhlcmVQYW5lbH0pLGkuZChlLFwiU3RhY2tQYW5lbDNEXCIsZnVuY3Rpb24oKXtyZXR1cm4gci5TdGFja1BhbmVsM0R9KSxpLmQoZSxcIlZvbHVtZUJhc2VkUGFuZWxcIixmdW5jdGlvbigpe3JldHVybiByLlZvbHVtZUJhc2VkUGFuZWx9KSxpLmQoZSxcIkZsdWVudE1hdGVyaWFsRGVmaW5lc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuRmx1ZW50TWF0ZXJpYWxEZWZpbmVzfSksaS5kKGUsXCJGbHVlbnRNYXRlcmlhbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHIuRmx1ZW50TWF0ZXJpYWx9KTt2YXIgbj12b2lkIDAhPT10P3Q6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwO3ZvaWQgMCE9PW4mJihuLkJBQllMT049bi5CQUJZTE9OfHx7fSxuLkJBQllMT04uR1VJPXIpfS5jYWxsKHRoaXMsaSgzKSl9LGZ1bmN0aW9uKHQsZSl7dmFyIGk7aT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXtpPWl8fG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCl9Y2F0Y2godCl7XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmKGk9d2luZG93KX10LmV4cG9ydHM9aX1dKX0pOyIsImNsYXNzIFN5c3RlbU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3N5c3RlbXMgPSBbXTtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcyA9IFtdOyAvLyBTeXN0ZW1zIHRoYXQgaGF2ZSBgZXhlY3V0ZWAgbWV0aG9kXG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gbnVsbDtcbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKFN5c3RlbSwgYXR0cmlidXRlcykge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX3N5c3RlbXMuZmluZChzID0+IHMuY29uc3RydWN0b3IubmFtZSA9PT0gU3lzdGVtLm5hbWUpICE9PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihgU3lzdGVtICcke1N5c3RlbS5uYW1lfScgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIHN5c3RlbSA9IG5ldyBTeXN0ZW0odGhpcy53b3JsZCwgYXR0cmlidXRlcyk7XG4gICAgaWYgKHN5c3RlbS5pbml0KSBzeXN0ZW0uaW5pdCgpO1xuICAgIHN5c3RlbS5vcmRlciA9IHRoaXMuX3N5c3RlbXMubGVuZ3RoO1xuICAgIHRoaXMuX3N5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgIGlmIChzeXN0ZW0uZXhlY3V0ZSkge1xuICAgICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgICAgdGhpcy5zb3J0U3lzdGVtcygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNvcnRTeXN0ZW1zKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSB8fCBhLm9yZGVyIC0gYi5vcmRlcjtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFN5c3RlbShTeXN0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5fc3lzdGVtcy5maW5kKHMgPT4gcyBpbnN0YW5jZW9mIFN5c3RlbSk7XG4gIH1cblxuICBnZXRTeXN0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zO1xuICB9XG5cbiAgcmVtb3ZlU3lzdGVtKFN5c3RlbSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX3N5c3RlbXMuaW5kZXhPZihTeXN0ZW0pO1xuICAgIGlmICghfmluZGV4KSByZXR1cm47XG5cbiAgICB0aGlzLl9zeXN0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBleGVjdXRlU3lzdGVtKHN5c3RlbSwgZGVsdGEsIHRpbWUpIHtcbiAgICBpZiAoc3lzdGVtLmluaXRpYWxpemVkKSB7XG4gICAgICBpZiAoc3lzdGVtLmNhbkV4ZWN1dGUoKSkge1xuICAgICAgICBsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHN5c3RlbS5leGVjdXRlKGRlbHRhLCB0aW1lKTtcbiAgICAgICAgc3lzdGVtLmV4ZWN1dGVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gc3lzdGVtO1xuICAgICAgICBzeXN0ZW0uY2xlYXJFdmVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLmZvckVhY2goc3lzdGVtID0+IHN5c3RlbS5zdG9wKCkpO1xuICB9XG5cbiAgZXhlY3V0ZShkZWx0YSwgdGltZSwgZm9yY2VQbGF5KSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuZm9yRWFjaChcbiAgICAgIHN5c3RlbSA9PlxuICAgICAgICAoZm9yY2VQbGF5IHx8IHN5c3RlbS5lbmFibGVkKSAmJiB0aGlzLmV4ZWN1dGVTeXN0ZW0oc3lzdGVtLCBkZWx0YSwgdGltZSlcbiAgICApO1xuICB9XG5cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgbnVtU3lzdGVtczogdGhpcy5fc3lzdGVtcy5sZW5ndGgsXG4gICAgICBzeXN0ZW1zOiB7fVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3N5c3RlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeXN0ZW0gPSB0aGlzLl9zeXN0ZW1zW2ldO1xuICAgICAgdmFyIHN5c3RlbVN0YXRzID0gKHN0YXRzLnN5c3RlbXNbc3lzdGVtLmNvbnN0cnVjdG9yLm5hbWVdID0ge1xuICAgICAgICBxdWVyaWVzOiB7fVxuICAgICAgfSk7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIHN5c3RlbS5jdHgpIHtcbiAgICAgICAgc3lzdGVtU3RhdHMucXVlcmllc1tuYW1lXSA9IHN5c3RlbS5jdHhbbmFtZV0uc3RhdHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIEV2ZW50RGlzcGF0Y2hlclxuICovXG5jbGFzcyBFdmVudERpc3BhdGNoZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLnN0YXRzID0ge1xuICAgICAgZmlyZWQ6IDAsXG4gICAgICBoYW5kbGVkOiAwXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSBldmVudCBpcyBmaXJlZFxuICAgKi9cbiAgYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0uaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICBsaXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gZXZlbnQgbGlzdGVuZXIgaXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgbGlzdCBvZiBsaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBjaGVja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBDYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBldmVudFxuICAgKi9cbiAgaGFzRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdLmluZGV4T2YobGlzdGVuZXIpICE9PSAtMVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gcmVtb3ZlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIENhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbGlzdGVuZXJBcnJheSA9IHRoaXMuX2xpc3RlbmVyc1tldmVudE5hbWVdO1xuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVyQXJyYXkuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGxpc3RlbmVyQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2ggYW4gZXZlbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIHRoZSBldmVudCB0byBkaXNwYXRjaFxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IChPcHRpb25hbCkgRW50aXR5IHRvIGVtaXRcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudFxuICAgKi9cbiAgZGlzcGF0Y2hFdmVudChldmVudE5hbWUsIGVudGl0eSwgY29tcG9uZW50KSB7XG4gICAgdGhpcy5zdGF0cy5maXJlZCsrO1xuXG4gICAgdmFyIGxpc3RlbmVyQXJyYXkgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXTtcbiAgICBpZiAobGlzdGVuZXJBcnJheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgYXJyYXkgPSBsaXN0ZW5lckFycmF5LnNsaWNlKDApO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5W2ldLmNhbGwodGhpcywgZW50aXR5LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBzdGF0cyBjb3VudGVyc1xuICAgKi9cbiAgcmVzZXRDb3VudGVycygpIHtcbiAgICB0aGlzLnN0YXRzLmZpcmVkID0gdGhpcy5zdGF0cy5oYW5kbGVkID0gMDtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgbmFtZSBvZiBhIGNvbXBvbmVudFxuICogQHBhcmFtIHtDb21wb25lbnR9IENvbXBvbmVudFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5uYW1lO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHZhbGlkIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBDb21wb25lbnRcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNvbXBvbmVudFByb3BlcnR5TmFtZShDb21wb25lbnQpIHtcbiAgdmFyIG5hbWUgPSBnZXROYW1lKENvbXBvbmVudCk7XG4gIHJldHVybiBuYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbn1cblxuLyoqXG4gKiBHZXQgYSBrZXkgZnJvbSBhIGxpc3Qgb2YgY29tcG9uZW50c1xuICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIEFycmF5IG9mIGNvbXBvbmVudHMgdG8gZ2VuZXJhdGUgdGhlIGtleVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcXVlcnlLZXkoQ29tcG9uZW50cykge1xuICB2YXIgbmFtZXMgPSBbXTtcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCBDb21wb25lbnRzLmxlbmd0aDsgbisrKSB7XG4gICAgdmFyIFQgPSBDb21wb25lbnRzW25dO1xuICAgIGlmICh0eXBlb2YgVCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdmFyIG9wZXJhdG9yID0gVC5vcGVyYXRvciA9PT0gXCJub3RcIiA/IFwiIVwiIDogVC5vcGVyYXRvcjtcbiAgICAgIG5hbWVzLnB1c2gob3BlcmF0b3IgKyBnZXROYW1lKFQuQ29tcG9uZW50KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWVzLnB1c2goZ2V0TmFtZShUKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5hbWVzLnNvcnQoKS5qb2luKFwiLVwiKTtcbn1cblxuY2xhc3MgUXVlcnkge1xuICAvKipcbiAgICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIExpc3Qgb2YgdHlwZXMgb2YgY29tcG9uZW50cyB0byBxdWVyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoQ29tcG9uZW50cywgbWFuYWdlcikge1xuICAgIHRoaXMuQ29tcG9uZW50cyA9IFtdO1xuICAgIHRoaXMuTm90Q29tcG9uZW50cyA9IFtdO1xuXG4gICAgQ29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNvbXBvbmVudCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aGlzLk5vdENvbXBvbmVudHMucHVzaChjb21wb25lbnQuQ29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQ29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5Db21wb25lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIGEgcXVlcnkgd2l0aG91dCBjb21wb25lbnRzXCIpO1xuICAgIH1cblxuICAgIHRoaXMuZW50aXRpZXMgPSBbXTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyID0gbmV3IEV2ZW50RGlzcGF0Y2hlcigpO1xuXG4gICAgLy8gVGhpcyBxdWVyeSBpcyBiZWluZyB1c2VkIGJ5IGEgcmVhY3RpdmUgc3lzdGVtXG4gICAgdGhpcy5yZWFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5rZXkgPSBxdWVyeUtleShDb21wb25lbnRzKTtcblxuICAgIC8vIEZpbGwgdGhlIHF1ZXJ5IHdpdGggdGhlIGV4aXN0aW5nIGVudGl0aWVzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYW5hZ2VyLl9lbnRpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVudGl0eSA9IG1hbmFnZXIuX2VudGl0aWVzW2ldO1xuICAgICAgaWYgKHRoaXMubWF0Y2goZW50aXR5KSkge1xuICAgICAgICAvLyBAdG9kbyA/Pz8gdGhpcy5hZGRFbnRpdHkoZW50aXR5KTsgPT4gcHJldmVudGluZyB0aGUgZXZlbnQgdG8gYmUgZ2VuZXJhdGVkXG4gICAgICAgIGVudGl0eS5xdWVyaWVzLnB1c2godGhpcyk7XG4gICAgICAgIHRoaXMuZW50aXRpZXMucHVzaChlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZW50aXR5IHRvIHRoaXMgcXVlcnlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKi9cbiAgYWRkRW50aXR5KGVudGl0eSkge1xuICAgIGVudGl0eS5xdWVyaWVzLnB1c2godGhpcyk7XG4gICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQURERUQsIGVudGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGVudGl0eSBmcm9tIHRoaXMgcXVlcnlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKi9cbiAgcmVtb3ZlRW50aXR5KGVudGl0eSkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuICAgIGlmICh+aW5kZXgpIHtcbiAgICAgIHRoaXMuZW50aXRpZXMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgaW5kZXggPSBlbnRpdHkucXVlcmllcy5pbmRleE9mKHRoaXMpO1xuICAgICAgZW50aXR5LnF1ZXJpZXMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgUXVlcnkucHJvdG90eXBlLkVOVElUWV9SRU1PVkVELFxuICAgICAgICBlbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgbWF0Y2goZW50aXR5KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVudGl0eS5oYXNBbGxDb21wb25lbnRzKHRoaXMuQ29tcG9uZW50cykgJiZcbiAgICAgICFlbnRpdHkuaGFzQW55Q29tcG9uZW50cyh0aGlzLk5vdENvbXBvbmVudHMpXG4gICAgKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2V5OiB0aGlzLmtleSxcbiAgICAgIHJlYWN0aXZlOiB0aGlzLnJlYWN0aXZlLFxuICAgICAgY29tcG9uZW50czoge1xuICAgICAgICBpbmNsdWRlZDogdGhpcy5Db21wb25lbnRzLm1hcChDID0+IEMubmFtZSksXG4gICAgICAgIG5vdDogdGhpcy5Ob3RDb21wb25lbnRzLm1hcChDID0+IEMubmFtZSlcbiAgICAgIH0sXG4gICAgICBudW1FbnRpdGllczogdGhpcy5lbnRpdGllcy5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzdGF0cyBmb3IgdGhpcyBxdWVyeVxuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG51bUNvbXBvbmVudHM6IHRoaXMuQ29tcG9uZW50cy5sZW5ndGgsXG4gICAgICBudW1FbnRpdGllczogdGhpcy5lbnRpdGllcy5sZW5ndGhcbiAgICB9O1xuICB9XG59XG5cblF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQURERUQgPSBcIlF1ZXJ5I0VOVElUWV9BRERFRFwiO1xuUXVlcnkucHJvdG90eXBlLkVOVElUWV9SRU1PVkVEID0gXCJRdWVyeSNFTlRJVFlfUkVNT1ZFRFwiO1xuUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VEID0gXCJRdWVyeSNDT01QT05FTlRfQ0hBTkdFRFwiO1xuXG52YXIgbmV4dElkID0gMDtcblxuY2xhc3MgRW50aXR5IHtcbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICB0aGlzLl93b3JsZCA9IHdvcmxkIHx8IG51bGw7XG5cbiAgICAvLyBVbmlxdWUgSUQgZm9yIHRoaXMgZW50aXR5XG4gICAgdGhpcy5pZCA9IG5leHRJZCsrO1xuXG4gICAgLy8gTGlzdCBvZiBjb21wb25lbnRzIHR5cGVzIHRoZSBlbnRpdHkgaGFzXG4gICAgdGhpcy5fQ29tcG9uZW50VHlwZXMgPSBbXTtcblxuICAgIC8vIEluc3RhbmNlIG9mIHRoZSBjb21wb25lbnRzXG4gICAgdGhpcy5fY29tcG9uZW50cyA9IHt9O1xuXG4gICAgdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlID0ge307XG5cbiAgICAvLyBRdWVyaWVzIHdoZXJlIHRoZSBlbnRpdHkgaXMgYWRkZWRcbiAgICB0aGlzLnF1ZXJpZXMgPSBbXTtcblxuICAgIC8vIFVzZWQgZm9yIGRlZmVycmVkIHJlbW92YWxcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlc1RvUmVtb3ZlID0gW107XG5cbiAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgZ2V0Q29tcG9uZW50KENvbXBvbmVudCwgaW5jbHVkZVJlbW92ZWQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1tDb21wb25lbnQubmFtZV07XG5cbiAgICBpZiAoIWNvbXBvbmVudCAmJiBpbmNsdWRlUmVtb3ZlZCA9PT0gdHJ1ZSkge1xuICAgICAgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5uYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gIGNvbXBvbmVudDtcbiAgfVxuXG4gIGdldFJlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNUb1JlbW92ZVtDb21wb25lbnQubmFtZV07XG4gIH1cblxuICBnZXRDb21wb25lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50c1RvUmVtb3ZlKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmU7XG4gIH1cblxuICBnZXRDb21wb25lbnRUeXBlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fQ29tcG9uZW50VHlwZXM7XG4gIH1cblxuICBnZXRNdXRhYmxlQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzW0NvbXBvbmVudC5uYW1lXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW2ldO1xuICAgICAgLy8gQHRvZG8gYWNjZWxlcmF0ZSB0aGlzIGNoZWNrLiBNYXliZSBoYXZpbmcgcXVlcnkuX0NvbXBvbmVudHMgYXMgYW4gb2JqZWN0XG4gICAgICBpZiAocXVlcnkucmVhY3RpdmUgJiYgcXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGNvbXBvbmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgYWRkQ29tcG9uZW50KENvbXBvbmVudCwgdmFsdWVzKSB7XG4gICAgdGhpcy5fd29ybGQuZW50aXR5QWRkQ29tcG9uZW50KHRoaXMsIENvbXBvbmVudCwgdmFsdWVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlbW92ZUNvbXBvbmVudChDb21wb25lbnQsIGZvcmNlUmVtb3ZlKSB7XG4gICAgdGhpcy5fd29ybGQuZW50aXR5UmVtb3ZlQ29tcG9uZW50KHRoaXMsIENvbXBvbmVudCwgZm9yY2VSZW1vdmUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaGFzQ29tcG9uZW50KENvbXBvbmVudCwgaW5jbHVkZVJlbW92ZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgISF+dGhpcy5fQ29tcG9uZW50VHlwZXMuaW5kZXhPZihDb21wb25lbnQpIHx8XG4gICAgICAoaW5jbHVkZVJlbW92ZWQgPT09IHRydWUgJiYgdGhpcy5oYXNSZW1vdmVkQ29tcG9uZW50KENvbXBvbmVudCkpXG4gICAgKTtcbiAgfVxuXG4gIGhhc1JlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuICEhfnRoaXMuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUuaW5kZXhPZihDb21wb25lbnQpO1xuICB9XG5cbiAgaGFzQWxsQ29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzQ29tcG9uZW50KENvbXBvbmVudHNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaGFzQW55Q29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5oYXNDb21wb25lbnQoQ29tcG9uZW50c1tpXSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZW1vdmVBbGxDb21wb25lbnRzKGZvcmNlUmVtb3ZlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkLmVudGl0eVJlbW92ZUFsbENvbXBvbmVudHModGhpcywgZm9yY2VSZW1vdmUpO1xuICB9XG5cbiAgLy8gRVhUUkFTXG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgZW50aXR5LiBUbyBiZSB1c2VkIHdoZW4gcmV0dXJuaW5nIGFuIGVudGl0eSB0byB0aGUgcG9vbFxuICByZXNldCgpIHtcbiAgICB0aGlzLmlkID0gbmV4dElkKys7XG4gICAgdGhpcy5fd29ybGQgPSBudWxsO1xuICAgIHRoaXMuX0NvbXBvbmVudFR5cGVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5xdWVyaWVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fY29tcG9uZW50cyA9IHt9O1xuICB9XG5cbiAgcmVtb3ZlKGZvcmNlUmVtb3ZlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkLnJlbW92ZUVudGl0eSh0aGlzLCBmb3JjZVJlbW92ZSk7XG4gIH1cbn1cblxuY2xhc3MgT2JqZWN0UG9vbCB7XG4gIC8vIEB0b2RvIEFkZCBpbml0aWFsIHNpemVcbiAgY29uc3RydWN0b3IoVCwgaW5pdGlhbFNpemUpIHtcbiAgICB0aGlzLmZyZWVMaXN0ID0gW107XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy5UID0gVDtcbiAgICB0aGlzLmlzT2JqZWN0UG9vbCA9IHRydWU7XG5cbiAgICB2YXIgZXh0cmFBcmdzID0gbnVsbDtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGV4dHJhQXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBleHRyYUFyZ3Muc2hpZnQoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZUVsZW1lbnQgPSBleHRyYUFyZ3NcbiAgICAgID8gKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgVCguLi5leHRyYUFyZ3MpO1xuICAgICAgICB9XG4gICAgICA6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IFQoKTtcbiAgICAgICAgfTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFNpemUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuZXhwYW5kKGluaXRpYWxTaXplKTtcbiAgICB9XG4gIH1cblxuICBhcXVpcmUoKSB7XG4gICAgLy8gR3JvdyB0aGUgbGlzdCBieSAyMCVpc2ggaWYgd2UncmUgb3V0XG4gICAgaWYgKHRoaXMuZnJlZUxpc3QubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRoaXMuZXhwYW5kKE1hdGgucm91bmQodGhpcy5jb3VudCAqIDAuMikgKyAxKTtcbiAgICB9XG5cbiAgICB2YXIgaXRlbSA9IHRoaXMuZnJlZUxpc3QucG9wKCk7XG5cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIHJlbGVhc2UoaXRlbSkge1xuICAgIGl0ZW0ucmVzZXQoKTtcbiAgICB0aGlzLmZyZWVMaXN0LnB1c2goaXRlbSk7XG4gIH1cblxuICBleHBhbmQoY291bnQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGNvdW50OyBuKyspIHtcbiAgICAgIHRoaXMuZnJlZUxpc3QucHVzaCh0aGlzLmNyZWF0ZUVsZW1lbnQoKSk7XG4gICAgfVxuICAgIHRoaXMuY291bnQgKz0gY291bnQ7XG4gIH1cblxuICB0b3RhbFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnQ7XG4gIH1cblxuICB0b3RhbEZyZWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnJlZUxpc3QubGVuZ3RoO1xuICB9XG5cbiAgdG90YWxVc2VkKCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50IC0gdGhpcy5mcmVlTGlzdC5sZW5ndGg7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFF1ZXJ5TWFuYWdlclxuICovXG5jbGFzcyBRdWVyeU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICAvLyBRdWVyaWVzIGluZGV4ZWQgYnkgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbXBvbmVudHMgaXQgaGFzXG4gICAgdGhpcy5fcXVlcmllcyA9IHt9O1xuICB9XG5cbiAgb25FbnRpdHlSZW1vdmVkKGVudGl0eSkge1xuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICBpZiAoZW50aXR5LnF1ZXJpZXMuaW5kZXhPZihxdWVyeSkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZUVudGl0eShlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIGFkZGVkIHRvIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB0aGF0IGp1c3QgZ290IHRoZSBuZXcgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICovXG4gIG9uRW50aXR5Q29tcG9uZW50QWRkZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICAvLyBAdG9kbyBVc2UgYml0bWFzayBmb3IgY2hlY2tpbmcgY29tcG9uZW50cz9cblxuICAgIC8vIENoZWNrIGVhY2ggaW5kZXhlZCBxdWVyeSB0byBzZWUgaWYgd2UgbmVlZCB0byBhZGQgdGhpcyBlbnRpdHkgdG8gdGhlIGxpc3RcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5yZW1vdmVFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgZW50aXR5IG9ubHkgaWY6XG4gICAgICAvLyBDb21wb25lbnQgaXMgaW4gdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGhhcyBBTEwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGlzIG5vdCBhbHJlYWR5IGluIHRoZSBxdWVyeVxuICAgICAgaWYgKFxuICAgICAgICAhfnF1ZXJ5LkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpIHx8XG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpIHx8XG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgIClcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIHF1ZXJ5LmFkZEVudGl0eShlbnRpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbVxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCB0byByZW1vdmUgZnJvbSB0aGUgZW50aXR5XG4gICAqL1xuICBvbkVudGl0eUNvbXBvbmVudFJlbW92ZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgICF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgIHF1ZXJ5Lm1hdGNoKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5hZGRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgISF+cXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgJiZcbiAgICAgICAgISF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpXG4gICAgICApIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlRW50aXR5KGVudGl0eSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBxdWVyeSBmb3IgdGhlIHNwZWNpZmllZCBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRzIENvbXBvbmVudHMgdGhhdCB0aGUgcXVlcnkgc2hvdWxkIGhhdmVcbiAgICovXG4gIGdldFF1ZXJ5KENvbXBvbmVudHMpIHtcbiAgICB2YXIga2V5ID0gcXVlcnlLZXkoQ29tcG9uZW50cyk7XG4gICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1trZXldO1xuICAgIGlmICghcXVlcnkpIHtcbiAgICAgIHRoaXMuX3F1ZXJpZXNba2V5XSA9IHF1ZXJ5ID0gbmV3IFF1ZXJ5KENvbXBvbmVudHMsIHRoaXMuX3dvcmxkKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzb21lIHN0YXRzIGZyb20gdGhpcyBjbGFzc1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge307XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHN0YXRzW3F1ZXJ5TmFtZV0gPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0uc3RhdHMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG59XG5cbmNsYXNzIFN5c3RlbVN0YXRlQ29tcG9uZW50IHt9XG5cblN5c3RlbVN0YXRlQ29tcG9uZW50LmlzU3lzdGVtU3RhdGVDb21wb25lbnQgPSB0cnVlO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgRW50aXR5TWFuYWdlclxuICovXG5jbGFzcyBFbnRpdHlNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5jb21wb25lbnRzTWFuYWdlciA9IHdvcmxkLmNvbXBvbmVudHNNYW5hZ2VyO1xuXG4gICAgLy8gQWxsIHRoZSBlbnRpdGllcyBpbiB0aGlzIGluc3RhbmNlXG4gICAgdGhpcy5fZW50aXRpZXMgPSBbXTtcblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlciA9IG5ldyBRdWVyeU1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XG4gICAgdGhpcy5fZW50aXR5UG9vbCA9IG5ldyBPYmplY3RQb29sKEVudGl0eSk7XG5cbiAgICAvLyBEZWZlcnJlZCBkZWxldGlvblxuICAgIHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkID0gdHJ1ZTtcblxuICAgIHRoaXMubnVtU3RhdGVDb21wb25lbnRzID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZW50aXR5XG4gICAqL1xuICBjcmVhdGVFbnRpdHkoKSB7XG4gICAgdmFyIGVudGl0eSA9IHRoaXMuX2VudGl0eVBvb2wuYXF1aXJlKCk7XG4gICAgZW50aXR5LmFsaXZlID0gdHJ1ZTtcbiAgICBlbnRpdHkuX3dvcmxkID0gdGhpcztcbiAgICB0aGlzLl9lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChFTlRJVFlfQ1JFQVRFRCwgZW50aXR5KTtcbiAgICByZXR1cm4gZW50aXR5O1xuICB9XG5cbiAgLy8gQ09NUE9ORU5UU1xuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHdoZXJlIHRoZSBjb21wb25lbnQgd2lsbCBiZSBhZGRlZFxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCB0byBiZSBhZGRlZCB0byB0aGUgZW50aXR5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgT3B0aW9uYWwgdmFsdWVzIHRvIHJlcGxhY2UgdGhlIGRlZmF1bHQgYXR0cmlidXRlc1xuICAgKi9cbiAgZW50aXR5QWRkQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50LCB2YWx1ZXMpIHtcbiAgICBpZiAofmVudGl0eS5fQ29tcG9uZW50VHlwZXMuaW5kZXhPZihDb21wb25lbnQpKSByZXR1cm47XG5cbiAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnB1c2goQ29tcG9uZW50KTtcblxuICAgIGlmIChDb21wb25lbnQuX19wcm90b19fID09PSBTeXN0ZW1TdGF0ZUNvbXBvbmVudCkge1xuICAgICAgdGhpcy5udW1TdGF0ZUNvbXBvbmVudHMrKztcbiAgICB9XG5cbiAgICB2YXIgY29tcG9uZW50UG9vbCA9IHRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuZ2V0Q29tcG9uZW50c1Bvb2woXG4gICAgICBDb21wb25lbnRcbiAgICApO1xuICAgIHZhciBjb21wb25lbnQgPSBjb21wb25lbnRQb29sLmFxdWlyZSgpO1xuXG4gICAgZW50aXR5Ll9jb21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSA9IGNvbXBvbmVudDtcblxuICAgIGlmICh2YWx1ZXMpIHtcbiAgICAgIGlmIChjb21wb25lbnQuY29weSkge1xuICAgICAgICBjb21wb25lbnQuY29weSh2YWx1ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICBjb21wb25lbnRbbmFtZV0gPSB2YWx1ZXNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlDb21wb25lbnRBZGRlZChlbnRpdHksIENvbXBvbmVudCk7XG4gICAgdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5jb21wb25lbnRBZGRlZFRvRW50aXR5KENvbXBvbmVudCk7XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KENPTVBPTkVOVF9BRERFRCwgZW50aXR5LCBDb21wb25lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB3aGljaCB3aWxsIGdldCByZW1vdmVkIHRoZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHsqfSBDb21wb25lbnQgQ29tcG9uZW50IHRvIHJlbW92ZSBmcm9tIHRoZSBlbnRpdHlcbiAgICogQHBhcmFtIHtCb29sfSBpbW1lZGlhdGVseSBJZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIGNvbXBvbmVudCBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGRlZmVycmVkIChEZWZhdWx0IGlzIGZhbHNlKVxuICAgKi9cbiAgZW50aXR5UmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50LCBpbW1lZGlhdGVseSkge1xuICAgIHZhciBpbmRleCA9IGVudGl0eS5fQ29tcG9uZW50VHlwZXMuaW5kZXhPZihDb21wb25lbnQpO1xuICAgIGlmICghfmluZGV4KSByZXR1cm47XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KENPTVBPTkVOVF9SRU1PVkUsIGVudGl0eSwgQ29tcG9uZW50KTtcblxuICAgIGlmIChpbW1lZGlhdGVseSkge1xuICAgICAgdGhpcy5fZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUucHVzaChlbnRpdHkpO1xuXG4gICAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUucHVzaChDb21wb25lbnQpO1xuXG4gICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldE5hbWUoQ29tcG9uZW50KTtcbiAgICAgIGVudGl0eS5fY29tcG9uZW50c1RvUmVtb3ZlW2NvbXBvbmVudE5hbWVdID1cbiAgICAgICAgZW50aXR5Ll9jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgICAgZGVsZXRlIGVudGl0eS5fY29tcG9uZW50c1tjb21wb25lbnROYW1lXTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBlYWNoIGluZGV4ZWQgcXVlcnkgdG8gc2VlIGlmIHdlIG5lZWQgdG8gcmVtb3ZlIGl0XG4gICAgdGhpcy5fcXVlcnlNYW5hZ2VyLm9uRW50aXR5Q29tcG9uZW50UmVtb3ZlZChlbnRpdHksIENvbXBvbmVudCk7XG5cbiAgICBpZiAoQ29tcG9uZW50Ll9fcHJvdG9fXyA9PT0gU3lzdGVtU3RhdGVDb21wb25lbnQpIHtcbiAgICAgIHRoaXMubnVtU3RhdGVDb21wb25lbnRzLS07XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBlbnRpdHkgd2FzIGEgZ2hvc3Qgd2FpdGluZyBmb3IgdGhlIGxhc3Qgc3lzdGVtIHN0YXRlIGNvbXBvbmVudCB0byBiZSByZW1vdmVkXG4gICAgICBpZiAodGhpcy5udW1TdGF0ZUNvbXBvbmVudHMgPT09IDAgJiYgIWVudGl0eS5hbGl2ZSkge1xuICAgICAgICBlbnRpdHkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX2VudGl0eVJlbW92ZUNvbXBvbmVudFN5bmMoZW50aXR5LCBDb21wb25lbnQsIGluZGV4KSB7XG4gICAgLy8gUmVtb3ZlIFQgbGlzdGluZyBvbiBlbnRpdHkgYW5kIHByb3BlcnR5IHJlZiwgdGhlbiBmcmVlIHRoZSBjb21wb25lbnQuXG4gICAgZW50aXR5Ll9Db21wb25lbnRUeXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHZhciBwcm9wTmFtZSA9IGNvbXBvbmVudFByb3BlcnR5TmFtZShDb21wb25lbnQpO1xuICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0TmFtZShDb21wb25lbnQpO1xuICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuX2NvbXBvbmVudHNbY29tcG9uZW50TmFtZV07XG4gICAgZGVsZXRlIGVudGl0eS5fY29tcG9uZW50c1tjb21wb25lbnROYW1lXTtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sW3Byb3BOYW1lXS5yZWxlYXNlKGNvbXBvbmVudCk7XG4gICAgdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5jb21wb25lbnRSZW1vdmVkRnJvbUVudGl0eShDb21wb25lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdGhlIGNvbXBvbmVudHMgZnJvbSBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgZnJvbSB3aGljaCB0aGUgY29tcG9uZW50cyB3aWxsIGJlIHJlbW92ZWRcbiAgICovXG4gIGVudGl0eVJlbW92ZUFsbENvbXBvbmVudHMoZW50aXR5LCBpbW1lZGlhdGVseSkge1xuICAgIGxldCBDb21wb25lbnRzID0gZW50aXR5Ll9Db21wb25lbnRUeXBlcztcblxuICAgIGZvciAobGV0IGogPSBDb21wb25lbnRzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICBpZiAoQ29tcG9uZW50c1tqXS5fX3Byb3RvX18gIT09IFN5c3RlbVN0YXRlQ29tcG9uZW50KVxuICAgICAgICB0aGlzLmVudGl0eVJlbW92ZUNvbXBvbmVudChlbnRpdHksIENvbXBvbmVudHNbal0sIGltbWVkaWF0ZWx5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBlbnRpdHkgZnJvbSB0aGlzIG1hbmFnZXIuIEl0IHdpbGwgY2xlYXIgYWxzbyBpdHMgY29tcG9uZW50c1xuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB0byByZW1vdmUgZnJvbSB0aGUgbWFuYWdlclxuICAgKiBAcGFyYW0ge0Jvb2x9IGltbWVkaWF0ZWx5IElmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgY29tcG9uZW50IGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZGVmZXJyZWQgKERlZmF1bHQgaXMgZmFsc2UpXG4gICAqL1xuICByZW1vdmVFbnRpdHkoZW50aXR5LCBpbW1lZGlhdGVseSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX2VudGl0aWVzLmluZGV4T2YoZW50aXR5KTtcblxuICAgIGlmICghfmluZGV4KSB0aHJvdyBuZXcgRXJyb3IoXCJUcmllZCB0byByZW1vdmUgZW50aXR5IG5vdCBpbiBsaXN0XCIpO1xuXG4gICAgZW50aXR5LmFsaXZlID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5udW1TdGF0ZUNvbXBvbmVudHMgPT09IDApIHtcbiAgICAgIC8vIFJlbW92ZSBmcm9tIGVudGl0eSBsaXN0XG4gICAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEVOVElUWV9SRU1PVkVELCBlbnRpdHkpO1xuICAgICAgdGhpcy5fcXVlcnlNYW5hZ2VyLm9uRW50aXR5UmVtb3ZlZChlbnRpdHkpO1xuICAgICAgaWYgKGltbWVkaWF0ZWx5ID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX3JlbGVhc2VFbnRpdHkoZW50aXR5LCBpbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUucHVzaChlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyhlbnRpdHksIGltbWVkaWF0ZWx5KTtcbiAgfVxuXG4gIF9yZWxlYXNlRW50aXR5KGVudGl0eSwgaW5kZXgpIHtcbiAgICB0aGlzLl9lbnRpdGllcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgLy8gUHJldmVudCBhbnkgYWNjZXNzIGFuZCBmcmVlXG4gICAgZW50aXR5Ll93b3JsZCA9IG51bGw7XG4gICAgdGhpcy5fZW50aXR5UG9vbC5yZWxlYXNlKGVudGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBlbnRpdGllcyBmcm9tIHRoaXMgbWFuYWdlclxuICAgKi9cbiAgcmVtb3ZlQWxsRW50aXRpZXMoKSB7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMuX2VudGl0aWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLnJlbW92ZUVudGl0eSh0aGlzLl9lbnRpdGllc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgcHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCgpIHtcbiAgICBpZiAoIXRoaXMuZGVmZXJyZWRSZW1vdmFsRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGllc1RvUmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZW50aXR5ID0gdGhpcy5lbnRpdGllc1RvUmVtb3ZlW2ldO1xuICAgICAgbGV0IGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuICAgICAgdGhpcy5fcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KTtcbiAgICB9XG4gICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlLmxlbmd0aCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZW50aXR5ID0gdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmVbaV07XG4gICAgICB3aGlsZSAoZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IENvbXBvbmVudCA9IGVudGl0eS5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5wb3AoKTtcblxuICAgICAgICB2YXIgcHJvcE5hbWUgPSBjb21wb25lbnRQcm9wZXJ0eU5hbWUoQ29tcG9uZW50KTtcbiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXROYW1lKENvbXBvbmVudCk7XG4gICAgICAgIHZhciBjb21wb25lbnQgPSBlbnRpdHkuX2NvbXBvbmVudHNUb1JlbW92ZVtjb21wb25lbnROYW1lXTtcbiAgICAgICAgZGVsZXRlIGVudGl0eS5fY29tcG9uZW50c1RvUmVtb3ZlW2NvbXBvbmVudE5hbWVdO1xuICAgICAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sW3Byb3BOYW1lXS5yZWxlYXNlKGNvbXBvbmVudCk7XG4gICAgICAgIHRoaXMud29ybGQuY29tcG9uZW50c01hbmFnZXIuY29tcG9uZW50UmVtb3ZlZEZyb21FbnRpdHkoQ29tcG9uZW50KTtcblxuICAgICAgICAvL3RoaXMuX2VudGl0eVJlbW92ZUNvbXBvbmVudFN5bmMoZW50aXR5LCBDb21wb25lbnQsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZS5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHF1ZXJ5IGJhc2VkIG9uIGEgbGlzdCBvZiBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7QXJyYXkoQ29tcG9uZW50KX0gQ29tcG9uZW50cyBMaXN0IG9mIGNvbXBvbmVudHMgdGhhdCB3aWxsIGZvcm0gdGhlIHF1ZXJ5XG4gICAqL1xuICBxdWVyeUNvbXBvbmVudHMoQ29tcG9uZW50cykge1xuICAgIHJldHVybiB0aGlzLl9xdWVyeU1hbmFnZXIuZ2V0UXVlcnkoQ29tcG9uZW50cyk7XG4gIH1cblxuICAvLyBFWFRSQVNcblxuICAvKipcbiAgICogUmV0dXJuIG51bWJlciBvZiBlbnRpdGllc1xuICAgKi9cbiAgY291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0aWVzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc29tZSBzdGF0c1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgbnVtRW50aXRpZXM6IHRoaXMuX2VudGl0aWVzLmxlbmd0aCxcbiAgICAgIG51bVF1ZXJpZXM6IE9iamVjdC5rZXlzKHRoaXMuX3F1ZXJ5TWFuYWdlci5fcXVlcmllcykubGVuZ3RoLFxuICAgICAgcXVlcmllczogdGhpcy5fcXVlcnlNYW5hZ2VyLnN0YXRzKCksXG4gICAgICBudW1Db21wb25lbnRQb29sOiBPYmplY3Qua2V5cyh0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sKVxuICAgICAgICAubGVuZ3RoLFxuICAgICAgY29tcG9uZW50UG9vbDoge30sXG4gICAgICBldmVudERpc3BhdGNoZXI6IHRoaXMuZXZlbnREaXNwYXRjaGVyLnN0YXRzXG4gICAgfTtcblxuICAgIGZvciAodmFyIGNuYW1lIGluIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2wpIHtcbiAgICAgIHZhciBwb29sID0gdGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbFtjbmFtZV07XG4gICAgICBzdGF0cy5jb21wb25lbnRQb29sW2NuYW1lXSA9IHtcbiAgICAgICAgdXNlZDogcG9vbC50b3RhbFVzZWQoKSxcbiAgICAgICAgc2l6ZTogcG9vbC5jb3VudFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuY29uc3QgRU5USVRZX0NSRUFURUQgPSBcIkVudGl0eU1hbmFnZXIjRU5USVRZX0NSRUFURVwiO1xuY29uc3QgRU5USVRZX1JFTU9WRUQgPSBcIkVudGl0eU1hbmFnZXIjRU5USVRZX1JFTU9WRURcIjtcbmNvbnN0IENPTVBPTkVOVF9BRERFRCA9IFwiRW50aXR5TWFuYWdlciNDT01QT05FTlRfQURERURcIjtcbmNvbnN0IENPTVBPTkVOVF9SRU1PVkUgPSBcIkVudGl0eU1hbmFnZXIjQ09NUE9ORU5UX1JFTU9WRVwiO1xuXG5jbGFzcyBEdW1teU9iamVjdFBvb2wge1xuICBjb25zdHJ1Y3RvcihUKSB7XG4gICAgdGhpcy5pc0R1bW15T2JqZWN0UG9vbCA9IHRydWU7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy51c2VkID0gMDtcbiAgICB0aGlzLlQgPSBUO1xuICB9XG5cbiAgYXF1aXJlKCkge1xuICAgIHRoaXMudXNlZCsrO1xuICAgIHRoaXMuY291bnQrKztcbiAgICByZXR1cm4gbmV3IHRoaXMuVCgpO1xuICB9XG5cbiAgcmVsZWFzZSgpIHtcbiAgICB0aGlzLnVzZWQtLTtcbiAgfVxuXG4gIHRvdGFsU2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgfVxuXG4gIHRvdGFsRnJlZSgpIHtcbiAgICByZXR1cm4gSW5maW5pdHk7XG4gIH1cblxuICB0b3RhbFVzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlZDtcbiAgfVxufVxuXG5jbGFzcyBDb21wb25lbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Db21wb25lbnRzID0ge307XG4gICAgdGhpcy5fY29tcG9uZW50UG9vbCA9IHt9O1xuICAgIHRoaXMubnVtQ29tcG9uZW50cyA9IHt9O1xuICB9XG5cbiAgcmVnaXN0ZXJDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0pIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ29tcG9uZW50IHR5cGU6ICcke0NvbXBvbmVudC5uYW1lfScgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0gPSBDb21wb25lbnQ7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSA9IDA7XG4gIH1cblxuICBjb21wb25lbnRBZGRlZFRvRW50aXR5KENvbXBvbmVudCkge1xuICAgIGlmICghdGhpcy5Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSkge1xuICAgICAgdGhpcy5yZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMubnVtQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0rKztcbiAgfVxuXG4gIGNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCkge1xuICAgIHRoaXMubnVtQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0tLTtcbiAgfVxuXG4gIGdldENvbXBvbmVudHNQb29sKENvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50UHJvcGVydHlOYW1lKENvbXBvbmVudCk7XG5cbiAgICBpZiAoIXRoaXMuX2NvbXBvbmVudFBvb2xbY29tcG9uZW50TmFtZV0pIHtcbiAgICAgIGlmIChDb21wb25lbnQucHJvdG90eXBlLnJlc2V0KSB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFBvb2xbY29tcG9uZW50TmFtZV0gPSBuZXcgT2JqZWN0UG9vbChDb21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBDb21wb25lbnQgJyR7Q29tcG9uZW50Lm5hbWV9JyB3b24ndCBiZW5lZml0IGZyb20gcG9vbGluZyBiZWNhdXNlICdyZXNldCcgbWV0aG9kIHdhcyBub3QgaW1wbGVtZW5ldGVkLmBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50UG9vbFtjb21wb25lbnROYW1lXSA9IG5ldyBEdW1teU9iamVjdFBvb2woQ29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50UG9vbFtjb21wb25lbnROYW1lXTtcbiAgfVxufVxuXG52YXIgbmFtZSA9IFwiZWNzeVwiO1xudmFyIHZlcnNpb24gPSBcIjAuMi4wXCI7XG52YXIgZGVzY3JpcHRpb24gPSBcIkVudGl0eSBDb21wb25lbnQgU3lzdGVtIGluIEpTXCI7XG52YXIgbWFpbiA9IFwiYnVpbGQvZWNzeS5qc1wiO1xudmFyIG1vZHVsZSA9IFwiYnVpbGQvZWNzeS5tb2R1bGUuanNcIjtcbnZhciB0eXBlcyA9IFwic3JjL2luZGV4LmQudHNcIjtcbnZhciBzY3JpcHRzID0ge1xuXHRidWlsZDogXCJyb2xsdXAgLWMgJiYgbnBtIHJ1biBkb2NzXCIsXG5cdGRvY3M6IFwicm0gZG9jcy9hcGkvX3NpZGViYXIubWQ7IHR5cGVkb2MgLS1yZWFkbWUgbm9uZSAtLW1vZGUgZmlsZSAtLWV4Y2x1ZGVFeHRlcm5hbHMgLS1wbHVnaW4gdHlwZWRvYy1wbHVnaW4tbWFya2Rvd24gIC0tdGhlbWUgZG9jcy90aGVtZSAtLWhpZGVTb3VyY2VzIC0taGlkZUJyZWFkY3J1bWJzIC0tb3V0IGRvY3MvYXBpLyAtLWluY2x1ZGVEZWNsYXJhdGlvbnMgLS1pbmNsdWRlcyAnc3JjLyoqLyouZC50cycgc3JjOyB0b3VjaCBkb2NzL2FwaS9fc2lkZWJhci5tZFwiLFxuXHRcImRldjpkb2NzXCI6IFwibm9kZW1vbiAtZSB0cyAteCAnbnBtIHJ1biBkb2NzJyAtdyBzcmNcIixcblx0ZGV2OiBcImNvbmN1cnJlbnRseSAtLW5hbWVzICdST0xMVVAsRE9DUyxIVFRQJyAtYyAnYmdCbHVlLmJvbGQsYmdZZWxsb3cuYm9sZCxiZ0dyZWVuLmJvbGQnICdyb2xsdXAgLWMgLXcgLW0gaW5saW5lJyAnbnBtIHJ1biBkZXY6ZG9jcycgJ25wbSBydW4gZGV2OnNlcnZlcidcIixcblx0XCJkZXY6c2VydmVyXCI6IFwiaHR0cC1zZXJ2ZXIgLWMtMSAtcCA4MDgwIC0tY29yc1wiLFxuXHRsaW50OiBcImVzbGludCBzcmMgdGVzdCBleGFtcGxlc1wiLFxuXHRzdGFydDogXCJucG0gcnVuIGRldlwiLFxuXHR0ZXN0OiBcImF2YVwiLFxuXHR0cmF2aXM6IFwibnBtIHJ1biBsaW50ICYmIG5wbSBydW4gdGVzdCAmJiBucG0gcnVuIGJ1aWxkXCIsXG5cdFwid2F0Y2g6dGVzdFwiOiBcImF2YSAtLXdhdGNoXCJcbn07XG52YXIgcmVwb3NpdG9yeSA9IHtcblx0dHlwZTogXCJnaXRcIixcblx0dXJsOiBcImdpdCtodHRwczovL2dpdGh1Yi5jb20vZmVybmFuZG9qc2cvZWNzeS5naXRcIlxufTtcbnZhciBrZXl3b3JkcyA9IFtcblx0XCJlY3NcIixcblx0XCJlbnRpdHkgY29tcG9uZW50IHN5c3RlbVwiXG5dO1xudmFyIGF1dGhvciA9IFwiRmVybmFuZG8gU2VycmFubyA8ZmVybmFuZG9qc2dAZ21haWwuY29tPiAoaHR0cDovL2Zlcm5hbmRvanNnLmNvbSlcIjtcbnZhciBsaWNlbnNlID0gXCJNSVRcIjtcbnZhciBidWdzID0ge1xuXHR1cmw6IFwiaHR0cHM6Ly9naXRodWIuY29tL2Zlcm5hbmRvanNnL2Vjc3kvaXNzdWVzXCJcbn07XG52YXIgYXZhID0ge1xuXHRmaWxlczogW1xuXHRcdFwidGVzdC8qKi8qLnRlc3QuanNcIlxuXHRdLFxuXHRzb3VyY2VzOiBbXG5cdFx0XCJzcmMvKiovKi5qc1wiXG5cdF0sXG5cdHJlcXVpcmU6IFtcblx0XHRcImJhYmVsLXJlZ2lzdGVyXCIsXG5cdFx0XCJlc21cIlxuXHRdXG59O1xudmFyIGpzcG0gPSB7XG5cdGZpbGVzOiBbXG5cdFx0XCJwYWNrYWdlLmpzb25cIixcblx0XHRcIkxJQ0VOU0VcIixcblx0XHRcIlJFQURNRS5tZFwiLFxuXHRcdFwiYnVpbGQvZWNzeS5qc1wiLFxuXHRcdFwiYnVpbGQvZWNzeS5taW4uanNcIixcblx0XHRcImJ1aWxkL2Vjc3kubW9kdWxlLmpzXCJcblx0XSxcblx0ZGlyZWN0b3JpZXM6IHtcblx0fVxufTtcbnZhciBob21lcGFnZSA9IFwiaHR0cHM6Ly9naXRodWIuY29tL2Zlcm5hbmRvanNnL2Vjc3kjcmVhZG1lXCI7XG52YXIgZGV2RGVwZW5kZW5jaWVzID0ge1xuXHRhdmE6IFwiXjEuNC4xXCIsXG5cdFwiYmFiZWwtY2xpXCI6IFwiXjYuMjYuMFwiLFxuXHRcImJhYmVsLWNvcmVcIjogXCJeNi4yNi4zXCIsXG5cdFwiYmFiZWwtZXNsaW50XCI6IFwiXjEwLjAuM1wiLFxuXHRcImJhYmVsLWxvYWRlclwiOiBcIl44LjAuNlwiLFxuXHRjb25jdXJyZW50bHk6IFwiXjQuMS4yXCIsXG5cdFwiZG9jc2lmeS1jbGlcIjogXCJeNC40LjBcIixcblx0ZXNsaW50OiBcIl41LjE2LjBcIixcblx0XCJlc2xpbnQtY29uZmlnLXByZXR0aWVyXCI6IFwiXjQuMy4wXCIsXG5cdFwiZXNsaW50LXBsdWdpbi1wcmV0dGllclwiOiBcIl4zLjEuMVwiLFxuXHRcImh0dHAtc2VydmVyXCI6IFwiXjAuMTEuMVwiLFxuXHRub2RlbW9uOiBcIl4xLjE5LjRcIixcblx0cHJldHRpZXI6IFwiXjEuMTkuMVwiLFxuXHRyb2xsdXA6IFwiXjEuMjcuOFwiLFxuXHRcInJvbGx1cC1wbHVnaW4tanNvblwiOiBcIl40LjAuMFwiLFxuXHRcInJvbGx1cC1wbHVnaW4tdGVyc2VyXCI6IFwiXjUuMS4yXCIsXG5cdHR5cGVkb2M6IFwiXjAuMTUuM1wiLFxuXHRcInR5cGVkb2MtcGx1Z2luLW1hcmtkb3duXCI6IFwiXjIuMi4xMVwiLFxuXHR0eXBlc2NyaXB0OiBcIl4zLjcuMlwiXG59O1xudmFyIHBqc29uID0ge1xuXHRuYW1lOiBuYW1lLFxuXHR2ZXJzaW9uOiB2ZXJzaW9uLFxuXHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG5cdG1haW46IG1haW4sXG5cdFwianNuZXh0Om1haW5cIjogXCJidWlsZC9lY3N5Lm1vZHVsZS5qc1wiLFxuXHRtb2R1bGU6IG1vZHVsZSxcblx0dHlwZXM6IHR5cGVzLFxuXHRzY3JpcHRzOiBzY3JpcHRzLFxuXHRyZXBvc2l0b3J5OiByZXBvc2l0b3J5LFxuXHRrZXl3b3Jkczoga2V5d29yZHMsXG5cdGF1dGhvcjogYXV0aG9yLFxuXHRsaWNlbnNlOiBsaWNlbnNlLFxuXHRidWdzOiBidWdzLFxuXHRhdmE6IGF2YSxcblx0anNwbToganNwbSxcblx0aG9tZXBhZ2U6IGhvbWVwYWdlLFxuXHRkZXZEZXBlbmRlbmNpZXM6IGRldkRlcGVuZGVuY2llc1xufTtcblxuY29uc3QgVmVyc2lvbiA9IHBqc29uLnZlcnNpb247XG5cbmNsYXNzIFdvcmxkIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb21wb25lbnRzTWFuYWdlciA9IG5ldyBDb21wb25lbnRNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuZW50aXR5TWFuYWdlciA9IG5ldyBFbnRpdHlNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtTWFuYWdlciA9IG5ldyBTeXN0ZW1NYW5hZ2VyKHRoaXMpO1xuXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuZXZlbnRRdWV1ZXMgPSB7fTtcblxuICAgIGlmICh0eXBlb2YgQ3VzdG9tRXZlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudChcImVjc3ktd29ybGQtY3JlYXRlZFwiLCB7XG4gICAgICAgIGRldGFpbDogeyB3b3JsZDogdGhpcywgdmVyc2lvbjogVmVyc2lvbiB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIH1cblxuICByZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLnJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWdpc3RlclN5c3RlbShTeXN0ZW0sIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLnN5c3RlbU1hbmFnZXIucmVnaXN0ZXJTeXN0ZW0oU3lzdGVtLCBhdHRyaWJ1dGVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldFN5c3RlbShTeXN0ZW1DbGFzcykge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbU1hbmFnZXIuZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKTtcbiAgfVxuXG4gIGdldFN5c3RlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtTWFuYWdlci5nZXRTeXN0ZW1zKCk7XG4gIH1cblxuICBleGVjdXRlKGRlbHRhLCB0aW1lKSB7XG4gICAgaWYgKCFkZWx0YSkge1xuICAgICAgbGV0IHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGRlbHRhID0gdGltZSAtIHRoaXMubGFzdFRpbWU7XG4gICAgICB0aGlzLmxhc3RUaW1lID0gdGltZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICB0aGlzLnN5c3RlbU1hbmFnZXIuZXhlY3V0ZShkZWx0YSwgdGltZSk7XG4gICAgICB0aGlzLmVudGl0eU1hbmFnZXIucHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCgpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBwbGF5KCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBjcmVhdGVFbnRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXR5TWFuYWdlci5jcmVhdGVFbnRpdHkoKTtcbiAgfVxuXG4gIHN0YXRzKCkge1xuICAgIHZhciBzdGF0cyA9IHtcbiAgICAgIGVudGl0aWVzOiB0aGlzLmVudGl0eU1hbmFnZXIuc3RhdHMoKSxcbiAgICAgIHN5c3RlbTogdGhpcy5zeXN0ZW1NYW5hZ2VyLnN0YXRzKClcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoc3RhdHMsIG51bGwsIDIpKTtcbiAgfVxufVxuXG5jbGFzcyBTeXN0ZW0ge1xuICBjYW5FeGVjdXRlKCkge1xuICAgIGlmICh0aGlzLl9tYW5kYXRvcnlRdWVyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBxdWVyeSA9IHRoaXMuX21hbmRhdG9yeVF1ZXJpZXNbaV07XG4gICAgICBpZiAocXVlcnkuZW50aXRpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHdvcmxkLCBhdHRyaWJ1dGVzKSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAvLyBAdG9kbyBCZXR0ZXIgbmFtaW5nIDopXG4gICAgdGhpcy5fcXVlcmllcyA9IHt9O1xuICAgIHRoaXMucXVlcmllcyA9IHt9O1xuXG4gICAgdGhpcy5wcmlvcml0eSA9IDA7XG5cbiAgICAvLyBVc2VkIGZvciBzdGF0c1xuICAgIHRoaXMuZXhlY3V0ZVRpbWUgPSAwO1xuXG4gICAgaWYgKGF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcy5wcmlvcml0eSkge1xuICAgICAgdGhpcy5wcmlvcml0eSA9IGF0dHJpYnV0ZXMucHJpb3JpdHk7XG4gICAgfVxuXG4gICAgdGhpcy5fbWFuZGF0b3J5UXVlcmllcyA9IFtdO1xuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzKSB7XG4gICAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzKSB7XG4gICAgICAgIHZhciBxdWVyeUNvbmZpZyA9IHRoaXMuY29uc3RydWN0b3IucXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgICB2YXIgQ29tcG9uZW50cyA9IHF1ZXJ5Q29uZmlnLmNvbXBvbmVudHM7XG4gICAgICAgIGlmICghQ29tcG9uZW50cyB8fCBDb21wb25lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidjb21wb25lbnRzJyBhdHRyaWJ1dGUgY2FuJ3QgYmUgZW1wdHkgaW4gYSBxdWVyeVwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLndvcmxkLmVudGl0eU1hbmFnZXIucXVlcnlDb21wb25lbnRzKENvbXBvbmVudHMpO1xuICAgICAgICB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0gPSBxdWVyeTtcbiAgICAgICAgaWYgKHF1ZXJ5Q29uZmlnLm1hbmRhdG9yeSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMucHVzaChxdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV0gPSB7XG4gICAgICAgICAgcmVzdWx0czogcXVlcnkuZW50aXRpZXNcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWFjdGl2ZSBjb25maWd1cmF0aW9uIGFkZGVkL3JlbW92ZWQvY2hhbmdlZFxuICAgICAgICB2YXIgdmFsaWRFdmVudHMgPSBbXCJhZGRlZFwiLCBcInJlbW92ZWRcIiwgXCJjaGFuZ2VkXCJdO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50TWFwcGluZyA9IHtcbiAgICAgICAgICBhZGRlZDogUXVlcnkucHJvdG90eXBlLkVOVElUWV9BRERFRCxcbiAgICAgICAgICByZW1vdmVkOiBRdWVyeS5wcm90b3R5cGUuRU5USVRZX1JFTU9WRUQsXG4gICAgICAgICAgY2hhbmdlZDogUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VEIC8vIFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQ0hBTkdFRFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChxdWVyeUNvbmZpZy5saXN0ZW4pIHtcbiAgICAgICAgICB2YWxpZEV2ZW50cy5mb3JFYWNoKGV2ZW50TmFtZSA9PiB7XG4gICAgICAgICAgICAvLyBJcyB0aGUgZXZlbnQgZW5hYmxlZCBvbiB0aGlzIHN5c3RlbSdzIHF1ZXJ5P1xuICAgICAgICAgICAgaWYgKHF1ZXJ5Q29uZmlnLmxpc3RlbltldmVudE5hbWVdKSB7XG4gICAgICAgICAgICAgIGxldCBldmVudCA9IHF1ZXJ5Q29uZmlnLmxpc3RlbltldmVudE5hbWVdO1xuXG4gICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT09IFwiY2hhbmdlZFwiKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkucmVhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChldmVudCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgLy8gQW55IGNoYW5nZSBvbiB0aGUgZW50aXR5IGZyb20gdGhlIGNvbXBvbmVudHMgaW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgICAgICBsZXQgZXZlbnRMaXN0ID0gKHRoaXMucXVlcmllc1txdWVyeU5hbWVdW2V2ZW50TmFtZV0gPSBbXSk7XG4gICAgICAgICAgICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VELFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgIChlbnRpdHksIGNoYW5nZWRDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuaW5kZXhPZihjaGFuZ2VkQ29tcG9uZW50LmNvbnN0cnVjdG9yKSAhPT0gLTEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0gW10pO1xuXG4gICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBldmVudE1hcHBpbmdbZXZlbnROYW1lXSxcbiAgICAgICAgICAgICAgICAgIGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEBmaXhtZSBvdmVyaGVhZD9cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmV4ZWN1dGVUaW1lID0gMDtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEBxdWVzdGlvbiByZW5hbWUgdG8gY2xlYXIgcXVldWVzP1xuICBjbGVhckV2ZW50cygpIHtcbiAgICBmb3IgKGxldCBxdWVyeU5hbWUgaW4gdGhpcy5xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgIGlmIChxdWVyeS5hZGRlZCkge1xuICAgICAgICBxdWVyeS5hZGRlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LnJlbW92ZWQpIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LmNoYW5nZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnkuY2hhbmdlZCkpIHtcbiAgICAgICAgICBxdWVyeS5jaGFuZ2VkLmxlbmd0aCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBxdWVyeS5jaGFuZ2VkKSB7XG4gICAgICAgICAgICBxdWVyeS5jaGFuZ2VkW25hbWVdLmxlbmd0aCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHZhciBqc29uID0ge1xuICAgICAgbmFtZTogdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxuICAgICAgZXhlY3V0ZVRpbWU6IHRoaXMuZXhlY3V0ZVRpbWUsXG4gICAgICBwcmlvcml0eTogdGhpcy5wcmlvcml0eSxcbiAgICAgIHF1ZXJpZXM6IHt9XG4gICAgfTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyaWVzID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzO1xuICAgICAgZm9yIChsZXQgcXVlcnlOYW1lIGluIHF1ZXJpZXMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBxdWVyeURlZmluaXRpb24gPSBxdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBqc29uUXVlcnkgPSAoanNvbi5xdWVyaWVzW3F1ZXJ5TmFtZV0gPSB7XG4gICAgICAgICAga2V5OiB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0ua2V5XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGpzb25RdWVyeS5tYW5kYXRvcnkgPSBxdWVyeURlZmluaXRpb24ubWFuZGF0b3J5ID09PSB0cnVlO1xuICAgICAgICBqc29uUXVlcnkucmVhY3RpdmUgPVxuICAgICAgICAgIHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4gJiZcbiAgICAgICAgICAocXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5hZGRlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgcXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5yZW1vdmVkID09PSB0cnVlIHx8XG4gICAgICAgICAgICBxdWVyeURlZmluaXRpb24ubGlzdGVuLmNoYW5nZWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5jaGFuZ2VkKSk7XG5cbiAgICAgICAgaWYgKGpzb25RdWVyeS5yZWFjdGl2ZSkge1xuICAgICAgICAgIGpzb25RdWVyeS5saXN0ZW4gPSB7fTtcblxuICAgICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbXCJhZGRlZFwiLCBcInJlbW92ZWRcIiwgXCJjaGFuZ2VkXCJdO1xuICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICAgICAgaWYgKHF1ZXJ5W21ldGhvZF0pIHtcbiAgICAgICAgICAgICAganNvblF1ZXJ5Lmxpc3RlblttZXRob2RdID0ge1xuICAgICAgICAgICAgICAgIGVudGl0aWVzOiBxdWVyeVttZXRob2RdLmxlbmd0aFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cbn1cblxuZnVuY3Rpb24gTm90KENvbXBvbmVudCkge1xuICByZXR1cm4ge1xuICAgIG9wZXJhdG9yOiBcIm5vdFwiLFxuICAgIENvbXBvbmVudDogQ29tcG9uZW50XG4gIH07XG59XG5cbmNsYXNzIENvbXBvbmVudCB7fVxuXG5Db21wb25lbnQuaXNDb21wb25lbnQgPSB0cnVlO1xuXG5jbGFzcyBUYWdDb21wb25lbnQge1xuICByZXNldCgpIHt9XG59XG5cblRhZ0NvbXBvbmVudC5pc1RhZ0NvbXBvbmVudCA9IHRydWU7XG5cbmZ1bmN0aW9uIGNyZWF0ZVR5cGUodHlwZURlZmluaXRpb24pIHtcbiAgdmFyIG1hbmRhdG9yeUZ1bmN0aW9ucyA9IFtcbiAgICBcImNyZWF0ZVwiLFxuICAgIFwicmVzZXRcIixcbiAgICBcImNsZWFyXCJcbiAgICAvKlwiY29weVwiKi9cbiAgXTtcblxuICB2YXIgdW5kZWZpbmVkRnVuY3Rpb25zID0gbWFuZGF0b3J5RnVuY3Rpb25zLmZpbHRlcihmID0+IHtcbiAgICByZXR1cm4gIXR5cGVEZWZpbml0aW9uW2ZdO1xuICB9KTtcblxuICBpZiAodW5kZWZpbmVkRnVuY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgY3JlYXRlVHlwZSBleHBlY3QgdHlwZSBkZWZpbml0aW9uIHRvIGltcGxlbWVudHMgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnM6ICR7dW5kZWZpbmVkRnVuY3Rpb25zLmpvaW4oXG4gICAgICAgIFwiLCBcIlxuICAgICAgKX1gXG4gICAgKTtcbiAgfVxuXG4gIHR5cGVEZWZpbml0aW9uLmlzVHlwZSA9IHRydWU7XG4gIHJldHVybiB0eXBlRGVmaW5pdGlvbjtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZCB0eXBlc1xuICovXG52YXIgVHlwZXMgPSB7fTtcblxuVHlwZXMuTnVtYmVyID0gY3JlYXRlVHlwZSh7XG4gIGJhc2VUeXBlOiBOdW1iZXIsXG4gIGlzU2ltcGxlVHlwZTogdHJ1ZSxcbiAgY3JlYXRlOiBkZWZhdWx0VmFsdWUgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInVuZGVmaW5lZFwiID8gZGVmYXVsdFZhbHVlIDogMDtcbiAgfSxcbiAgcmVzZXQ6IChzcmMsIGtleSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHNyY1trZXldID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcmNba2V5XSA9IDA7XG4gICAgfVxuICB9LFxuICBjbGVhcjogKHNyYywga2V5KSA9PiB7XG4gICAgc3JjW2tleV0gPSAwO1xuICB9XG59KTtcblxuVHlwZXMuQm9vbGVhbiA9IGNyZWF0ZVR5cGUoe1xuICBiYXNlVHlwZTogQm9vbGVhbixcbiAgaXNTaW1wbGVUeXBlOiB0cnVlLFxuICBjcmVhdGU6IGRlZmF1bHRWYWx1ZSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIgPyBkZWZhdWx0VmFsdWUgOiBmYWxzZTtcbiAgfSxcbiAgcmVzZXQ6IChzcmMsIGtleSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHNyY1trZXldID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcmNba2V5XSA9IGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgY2xlYXI6IChzcmMsIGtleSkgPT4ge1xuICAgIHNyY1trZXldID0gZmFsc2U7XG4gIH1cbn0pO1xuXG5UeXBlcy5TdHJpbmcgPSBjcmVhdGVUeXBlKHtcbiAgYmFzZVR5cGU6IFN0cmluZyxcbiAgaXNTaW1wbGVUeXBlOiB0cnVlLFxuICBjcmVhdGU6IGRlZmF1bHRWYWx1ZSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIgPyBkZWZhdWx0VmFsdWUgOiBcIlwiO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldID0gXCJcIjtcbiAgICB9XG4gIH0sXG4gIGNsZWFyOiAoc3JjLCBrZXkpID0+IHtcbiAgICBzcmNba2V5XSA9IFwiXCI7XG4gIH1cbn0pO1xuXG5UeXBlcy5BcnJheSA9IGNyZWF0ZVR5cGUoe1xuICBiYXNlVHlwZTogQXJyYXksXG4gIGNyZWF0ZTogZGVmYXVsdFZhbHVlID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZS5zbGljZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBbXTtcbiAgfSxcbiAgcmVzZXQ6IChzcmMsIGtleSwgZGVmYXVsdFZhbHVlKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHNyY1trZXldID0gZGVmYXVsdFZhbHVlLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldLmxlbmd0aCA9IDA7XG4gICAgfVxuICB9LFxuICBjbGVhcjogKHNyYywga2V5KSA9PiB7XG4gICAgc3JjW2tleV0ubGVuZ3RoID0gMDtcbiAgfSxcbiAgY29weTogKHNyYywgZHN0LCBrZXkpID0+IHtcbiAgICBzcmNba2V5XSA9IGRzdFtrZXldLnNsaWNlKCk7XG4gIH1cbn0pO1xuXG52YXIgc3RhbmRhcmRUeXBlcyA9IHtcbiAgbnVtYmVyOiBUeXBlcy5OdW1iZXIsXG4gIGJvb2xlYW46IFR5cGVzLkJvb2xlYW4sXG4gIHN0cmluZzogVHlwZXMuU3RyaW5nXG59O1xuXG4vKipcbiAqIFRyeSB0byBpbmZlciB0aGUgdHlwZSBvZiB0aGUgdmFsdWVcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ30gVHlwZSBvZiB0aGUgYXR0cmlidXRlXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpbmZlclR5cGUodmFsdWUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIFR5cGVzLkFycmF5O1xuICB9XG5cbiAgaWYgKHN0YW5kYXJkVHlwZXNbdHlwZW9mIHZhbHVlXSkge1xuICAgIHJldHVybiBzdGFuZGFyZFR5cGVzW3R5cGVvZiB2YWx1ZV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50Q2xhc3Moc2NoZW1hLCBuYW1lKSB7XG4gIC8vdmFyIENvbXBvbmVudCA9IG5ldyBGdW5jdGlvbihgcmV0dXJuIGZ1bmN0aW9uICR7bmFtZX0oKSB7fWApKCk7XG4gIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICBsZXQgdHlwZSA9IHNjaGVtYVtrZXldLnR5cGU7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICBzY2hlbWFba2V5XS50eXBlID0gaW5mZXJUeXBlKHNjaGVtYVtrZXldLmRlZmF1bHQpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBDb21wb25lbnQgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICB2YXIgYXR0ciA9IHNjaGVtYVtrZXldO1xuICAgICAgbGV0IHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgICBpZiAodHlwZSAmJiB0eXBlLmlzVHlwZSkge1xuICAgICAgICB0aGlzW2tleV0gPSB0eXBlLmNyZWF0ZShhdHRyLmRlZmF1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpc1trZXldID0gYXR0ci5kZWZhdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBpZiAodHlwZW9mIG5hbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29tcG9uZW50LCBcIm5hbWVcIiwgeyB2YWx1ZTogbmFtZSB9KTtcbiAgfVxuXG4gIENvbXBvbmVudC5wcm90b3R5cGUuc2NoZW1hID0gc2NoZW1hO1xuXG4gIHZhciBrbm93blR5cGVzID0gdHJ1ZTtcbiAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgIHZhciBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgaWYgKCFhdHRyLnR5cGUpIHtcbiAgICAgIGF0dHIudHlwZSA9IGluZmVyVHlwZShhdHRyLmRlZmF1bHQpO1xuICAgIH1cblxuICAgIHZhciB0eXBlID0gYXR0ci50eXBlO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIHR5cGUgZGVmaW5pdGlvbiBmb3IgYXR0cmlidXRlICcke2tleX0nYCk7XG4gICAgICBrbm93blR5cGVzID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFrbm93blR5cGVzKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFRoaXMgY29tcG9uZW50IGNhbid0IHVzZSBwb29saW5nIGJlY2F1c2Ugc29tZSBkYXRhIHR5cGVzIGFyZSBub3QgcmVnaXN0ZXJlZC4gUGxlYXNlIHByb3ZpZGUgYSB0eXBlIGNyZWF0ZWQgd2l0aCAnY3JlYXRlVHlwZSdgXG4gICAgKTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIGxldCBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICBDb21wb25lbnQucHJvdG90eXBlW2tleV0gPSBhdHRyLmRlZmF1bHQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIENvbXBvbmVudC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uKHNyYykge1xuICAgICAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgICAgICBpZiAoc3JjW2tleV0pIHtcbiAgICAgICAgICBsZXQgdHlwZSA9IHNjaGVtYVtrZXldLnR5cGU7XG4gICAgICAgICAgaWYgKHR5cGUuaXNTaW1wbGVUeXBlKSB7XG4gICAgICAgICAgICB0aGlzW2tleV0gPSBzcmNba2V5XTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUuY29weSkge1xuICAgICAgICAgICAgdHlwZS5jb3B5KHRoaXMsIHNyYywga2V5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQHRvZG8gRGV0ZWN0IHRoYXQgaXQncyBub3QgcG9zc2libGUgdG8gY29weSBhbGwgdGhlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIC8vIGFuZCBqdXN0IGF2b2lkIGNyZWF0aW5nIHRoZSBjb3B5IGZ1bmN0aW9uXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIGBVbmtub3duIGNvcHkgZnVuY3Rpb24gZm9yIGF0dHJpYnV0ZSAnJHtrZXl9JyBkYXRhIHR5cGVgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBDb21wb25lbnQucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgIGxldCBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICAgIGxldCB0eXBlID0gYXR0ci50eXBlO1xuICAgICAgICBpZiAodHlwZS5yZXNldCkgdHlwZS5yZXNldCh0aGlzLCBrZXksIGF0dHIuZGVmYXVsdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgbGV0IHR5cGUgPSBzY2hlbWFba2V5XS50eXBlO1xuICAgICAgICBpZiAodHlwZS5jbGVhcikgdHlwZS5jbGVhcih0aGlzLCBrZXkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICBsZXQgYXR0ciA9IHNjaGVtYVtrZXldO1xuICAgICAgbGV0IHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgICBDb21wb25lbnQucHJvdG90eXBlW2tleV0gPSBhdHRyLmRlZmF1bHQ7XG5cbiAgICAgIGlmICh0eXBlLnJlc2V0KSB7XG4gICAgICAgIHR5cGUucmVzZXQoQ29tcG9uZW50LnByb3RvdHlwZSwga2V5LCBhdHRyLmRlZmF1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBDb21wb25lbnQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlSWQobGVuZ3RoKSB7XG4gIHZhciByZXN1bHQgPSBcIlwiO1xuICB2YXIgY2hhcmFjdGVycyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5XCI7XG4gIHZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGluamVjdFNjcmlwdChzcmMsIG9uTG9hZCkge1xuICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgLy8gQHRvZG8gVXNlIGxpbmsgdG8gdGhlIGVjc3ktZGV2dG9vbHMgcmVwbz9cbiAgc2NyaXB0LnNyYyA9IHNyYztcbiAgc2NyaXB0Lm9ubG9hZCA9IG9uTG9hZDtcbiAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChzY3JpcHQpO1xufVxuXG4vKiBnbG9iYWwgUGVlciAqL1xuXG5mdW5jdGlvbiBob29rQ29uc29sZUFuZEVycm9ycyhjb25uZWN0aW9uKSB7XG4gIHZhciB3cmFwRnVuY3Rpb25zID0gW1wiZXJyb3JcIiwgXCJ3YXJuaW5nXCIsIFwibG9nXCJdO1xuICB3cmFwRnVuY3Rpb25zLmZvckVhY2goa2V5ID0+IHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGVba2V5XSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB2YXIgZm4gPSBjb25zb2xlW2tleV0uYmluZChjb25zb2xlKTtcbiAgICAgIGNvbnNvbGVba2V5XSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24uc2VuZCh7XG4gICAgICAgICAgbWV0aG9kOiBcImNvbnNvbGVcIixcbiAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgYXJnczogSlNPTi5zdHJpbmdpZnkoYXJncylcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGVycm9yID0+IHtcbiAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgbWV0aG9kOiBcImVycm9yXCIsXG4gICAgICBlcnJvcjogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5lcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyb3IuZXJyb3Iuc3RhY2tcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlUmVtb3RlSWRIVE1MKHJlbW90ZUlkKSB7XG4gIGxldCBpbmZvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgaW5mb0Rpdi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMztcbiAgICBjb2xvcjogI2FhYTtcbiAgICBkaXNwbGF5OmZsZXg7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsO1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgaGVpZ2h0OiA0MHB4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGxlZnQ6IDA7XG4gICAgb3BhY2l0eTogMC45O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgdG9wOiAwO1xuICBgO1xuXG4gIGluZm9EaXYuaW5uZXJIVE1MID0gYE9wZW4gRUNTWSBkZXZ0b29scyB0byBjb25uZWN0IHRvIHRoaXMgcGFnZSB1c2luZyB0aGUgY29kZTombmJzcDs8YiBzdHlsZT1cImNvbG9yOiAjZmZmXCI+JHtyZW1vdGVJZH08L2I+Jm5ic3A7PGJ1dHRvbiBvbkNsaWNrPVwiZ2VuZXJhdGVOZXdDb2RlKClcIj5HZW5lcmF0ZSBuZXcgY29kZTwvYnV0dG9uPmA7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5mb0Rpdik7XG5cbiAgcmV0dXJuIGluZm9EaXY7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZVJlbW90ZURldnRvb2xzKHJlbW90ZUlkKSB7XG4gIHdpbmRvdy5nZW5lcmF0ZU5ld0NvZGUgPSAoKSA9PiB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgIHJlbW90ZUlkID0gZ2VuZXJhdGVJZCg2KTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJlY3N5UmVtb3RlSWRcIiwgcmVtb3RlSWQpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoZmFsc2UpO1xuICB9O1xuXG4gIHJlbW90ZUlkID0gcmVtb3RlSWQgfHwgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZWNzeVJlbW90ZUlkXCIpO1xuICBpZiAoIXJlbW90ZUlkKSB7XG4gICAgcmVtb3RlSWQgPSBnZW5lcmF0ZUlkKDYpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImVjc3lSZW1vdGVJZFwiLCByZW1vdGVJZCk7XG4gIH1cblxuICBsZXQgaW5mb0RpdiA9IGluY2x1ZGVSZW1vdGVJZEhUTUwocmVtb3RlSWQpO1xuXG4gIHdpbmRvdy5fX0VDU1lfUkVNT1RFX0RFVlRPT0xTX0lOSkVDVEVEID0gdHJ1ZTtcbiAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFMgPSB7fTtcblxuICBsZXQgVmVyc2lvbiA9IFwiXCI7XG5cbiAgLy8gVGhpcyBpcyB1c2VkIHRvIGNvbGxlY3QgdGhlIHdvcmxkcyBjcmVhdGVkIGJlZm9yZSB0aGUgY29tbXVuaWNhdGlvbiBpcyBiZWluZyBlc3RhYmxpc2hlZFxuICBsZXQgd29ybGRzQmVmb3JlTG9hZGluZyA9IFtdO1xuICBsZXQgb25Xb3JsZENyZWF0ZWQgPSBlID0+IHtcbiAgICB2YXIgd29ybGQgPSBlLmRldGFpbC53b3JsZDtcbiAgICBWZXJzaW9uID0gZS5kZXRhaWwudmVyc2lvbjtcbiAgICB3b3JsZHNCZWZvcmVMb2FkaW5nLnB1c2god29ybGQpO1xuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVjc3ktd29ybGQtY3JlYXRlZFwiLCBvbldvcmxkQ3JlYXRlZCk7XG5cbiAgbGV0IG9uTG9hZGVkID0gKCkgPT4ge1xuICAgIHZhciBwZWVyID0gbmV3IFBlZXIocmVtb3RlSWQpO1xuICAgIHBlZXIub24oXCJvcGVuXCIsICgvKiBpZCAqLykgPT4ge1xuICAgICAgcGVlci5vbihcImNvbm5lY3Rpb25cIiwgY29ubmVjdGlvbiA9PiB7XG4gICAgICAgIHdpbmRvdy5fX0VDU1lfUkVNT1RFX0RFVlRPT0xTLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICBjb25uZWN0aW9uLm9uKFwib3BlblwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBpbmZvRGl2LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGluZm9EaXYuaW5uZXJIVE1MID0gXCJDb25uZWN0ZWRcIjtcblxuICAgICAgICAgIC8vIFJlY2VpdmUgbWVzc2FnZXNcbiAgICAgICAgICBjb25uZWN0aW9uLm9uKFwiZGF0YVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcImluaXRcIikge1xuICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0L2phdmFzY3JpcHRcIik7XG4gICAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblxuICAgICAgICAgICAgICAgIC8vIE9uY2UgdGhlIHNjcmlwdCBpcyBpbmplY3RlZCB3ZSBkb24ndCBuZWVkIHRvIGxpc3RlblxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIixcbiAgICAgICAgICAgICAgICAgIG9uV29ybGRDcmVhdGVkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB3b3JsZHNCZWZvcmVMb2FkaW5nLmZvckVhY2god29ybGQgPT4ge1xuICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7IHdvcmxkOiB3b3JsZCwgdmVyc2lvbjogVmVyc2lvbiB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgc2NyaXB0LmlubmVySFRNTCA9IGRhdGEuc2NyaXB0O1xuICAgICAgICAgICAgICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQoKTtcblxuICAgICAgICAgICAgICBob29rQ29uc29sZUFuZEVycm9ycyhjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImV4ZWN1dGVTY3JpcHRcIikge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBldmFsKGRhdGEuc2NyaXB0KTtcbiAgICAgICAgICAgICAgaWYgKGRhdGEucmV0dXJuRXZhbCkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZCh7XG4gICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiZXZhbFJldHVyblwiLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBJbmplY3QgUGVlckpTIHNjcmlwdFxuICBpbmplY3RTY3JpcHQoXG4gICAgXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3BlZXJqc0AwLjMuMjAvZGlzdC9wZWVyLm1pbi5qc1wiLFxuICAgIG9uTG9hZGVkXG4gICk7XG59XG5cbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG5cbi8vIEB0b2RvIFByb3ZpZGUgYSB3YXkgdG8gZGlzYWJsZSBpdCBpZiBuZWVkZWRcbmlmICh1cmxQYXJhbXMuaGFzKFwiZW5hYmxlLXJlbW90ZS1kZXZ0b29sc1wiKSkge1xuICBlbmFibGVSZW1vdGVEZXZ0b29scygpO1xufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIE5vdCwgU3lzdGVtLCBTeXN0ZW1TdGF0ZUNvbXBvbmVudCwgVGFnQ29tcG9uZW50LCBUeXBlcywgVmVyc2lvbiwgV29ybGQsIGNyZWF0ZUNvbXBvbmVudENsYXNzLCBjcmVhdGVUeXBlLCBlbmFibGVSZW1vdGVEZXZ0b29scyB9O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgcmVzb2x2ZXIpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHtcbiAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgJ2Vycm9yJywgaGFuZGxlciwgZmxhZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCBsaXN0ZW5lciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGVcbiAgICAvLyBFdmVudEVtaXR0ZXJzLCB3ZSBkbyBub3QgbGlzdGVuIGZvciBgZXJyb3JgIGV2ZW50cyBoZXJlLlxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbiB3cmFwTGlzdGVuZXIoYXJnKSB7XG4gICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlXG4gICAgICAvLyBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5LlxuICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcihhcmcpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7XG4gIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHN1cnJvZ2F0ZV9wYWlyc18xID0gcmVxdWlyZShcIi4vc3Vycm9nYXRlLXBhaXJzXCIpO1xudmFyIEhUTUxfQUxQSEEgPSBbJ2Fwb3MnLCAnbmJzcCcsICdpZXhjbCcsICdjZW50JywgJ3BvdW5kJywgJ2N1cnJlbicsICd5ZW4nLCAnYnJ2YmFyJywgJ3NlY3QnLCAndW1sJywgJ2NvcHknLCAnb3JkZicsICdsYXF1bycsICdub3QnLCAnc2h5JywgJ3JlZycsICdtYWNyJywgJ2RlZycsICdwbHVzbW4nLCAnc3VwMicsICdzdXAzJywgJ2FjdXRlJywgJ21pY3JvJywgJ3BhcmEnLCAnbWlkZG90JywgJ2NlZGlsJywgJ3N1cDEnLCAnb3JkbScsICdyYXF1bycsICdmcmFjMTQnLCAnZnJhYzEyJywgJ2ZyYWMzNCcsICdpcXVlc3QnLCAnQWdyYXZlJywgJ0FhY3V0ZScsICdBY2lyYycsICdBdGlsZGUnLCAnQXVtbCcsICdBcmluZycsICdBRWxpZycsICdDY2VkaWwnLCAnRWdyYXZlJywgJ0VhY3V0ZScsICdFY2lyYycsICdFdW1sJywgJ0lncmF2ZScsICdJYWN1dGUnLCAnSWNpcmMnLCAnSXVtbCcsICdFVEgnLCAnTnRpbGRlJywgJ09ncmF2ZScsICdPYWN1dGUnLCAnT2NpcmMnLCAnT3RpbGRlJywgJ091bWwnLCAndGltZXMnLCAnT3NsYXNoJywgJ1VncmF2ZScsICdVYWN1dGUnLCAnVWNpcmMnLCAnVXVtbCcsICdZYWN1dGUnLCAnVEhPUk4nLCAnc3psaWcnLCAnYWdyYXZlJywgJ2FhY3V0ZScsICdhY2lyYycsICdhdGlsZGUnLCAnYXVtbCcsICdhcmluZycsICdhZWxpZycsICdjY2VkaWwnLCAnZWdyYXZlJywgJ2VhY3V0ZScsICdlY2lyYycsICdldW1sJywgJ2lncmF2ZScsICdpYWN1dGUnLCAnaWNpcmMnLCAnaXVtbCcsICdldGgnLCAnbnRpbGRlJywgJ29ncmF2ZScsICdvYWN1dGUnLCAnb2NpcmMnLCAnb3RpbGRlJywgJ291bWwnLCAnZGl2aWRlJywgJ29zbGFzaCcsICd1Z3JhdmUnLCAndWFjdXRlJywgJ3VjaXJjJywgJ3V1bWwnLCAneWFjdXRlJywgJ3Rob3JuJywgJ3l1bWwnLCAncXVvdCcsICdhbXAnLCAnbHQnLCAnZ3QnLCAnT0VsaWcnLCAnb2VsaWcnLCAnU2Nhcm9uJywgJ3NjYXJvbicsICdZdW1sJywgJ2NpcmMnLCAndGlsZGUnLCAnZW5zcCcsICdlbXNwJywgJ3RoaW5zcCcsICd6d25qJywgJ3p3aicsICdscm0nLCAncmxtJywgJ25kYXNoJywgJ21kYXNoJywgJ2xzcXVvJywgJ3JzcXVvJywgJ3NicXVvJywgJ2xkcXVvJywgJ3JkcXVvJywgJ2JkcXVvJywgJ2RhZ2dlcicsICdEYWdnZXInLCAncGVybWlsJywgJ2xzYXF1bycsICdyc2FxdW8nLCAnZXVybycsICdmbm9mJywgJ0FscGhhJywgJ0JldGEnLCAnR2FtbWEnLCAnRGVsdGEnLCAnRXBzaWxvbicsICdaZXRhJywgJ0V0YScsICdUaGV0YScsICdJb3RhJywgJ0thcHBhJywgJ0xhbWJkYScsICdNdScsICdOdScsICdYaScsICdPbWljcm9uJywgJ1BpJywgJ1JobycsICdTaWdtYScsICdUYXUnLCAnVXBzaWxvbicsICdQaGknLCAnQ2hpJywgJ1BzaScsICdPbWVnYScsICdhbHBoYScsICdiZXRhJywgJ2dhbW1hJywgJ2RlbHRhJywgJ2Vwc2lsb24nLCAnemV0YScsICdldGEnLCAndGhldGEnLCAnaW90YScsICdrYXBwYScsICdsYW1iZGEnLCAnbXUnLCAnbnUnLCAneGknLCAnb21pY3JvbicsICdwaScsICdyaG8nLCAnc2lnbWFmJywgJ3NpZ21hJywgJ3RhdScsICd1cHNpbG9uJywgJ3BoaScsICdjaGknLCAncHNpJywgJ29tZWdhJywgJ3RoZXRhc3ltJywgJ3Vwc2loJywgJ3BpdicsICdidWxsJywgJ2hlbGxpcCcsICdwcmltZScsICdQcmltZScsICdvbGluZScsICdmcmFzbCcsICd3ZWllcnAnLCAnaW1hZ2UnLCAncmVhbCcsICd0cmFkZScsICdhbGVmc3ltJywgJ2xhcnInLCAndWFycicsICdyYXJyJywgJ2RhcnInLCAnaGFycicsICdjcmFycicsICdsQXJyJywgJ3VBcnInLCAnckFycicsICdkQXJyJywgJ2hBcnInLCAnZm9yYWxsJywgJ3BhcnQnLCAnZXhpc3QnLCAnZW1wdHknLCAnbmFibGEnLCAnaXNpbicsICdub3RpbicsICduaScsICdwcm9kJywgJ3N1bScsICdtaW51cycsICdsb3dhc3QnLCAncmFkaWMnLCAncHJvcCcsICdpbmZpbicsICdhbmcnLCAnYW5kJywgJ29yJywgJ2NhcCcsICdjdXAnLCAnaW50JywgJ3RoZXJlNCcsICdzaW0nLCAnY29uZycsICdhc3ltcCcsICduZScsICdlcXVpdicsICdsZScsICdnZScsICdzdWInLCAnc3VwJywgJ25zdWInLCAnc3ViZScsICdzdXBlJywgJ29wbHVzJywgJ290aW1lcycsICdwZXJwJywgJ3Nkb3QnLCAnbGNlaWwnLCAncmNlaWwnLCAnbGZsb29yJywgJ3JmbG9vcicsICdsYW5nJywgJ3JhbmcnLCAnbG96JywgJ3NwYWRlcycsICdjbHVicycsICdoZWFydHMnLCAnZGlhbXMnXTtcbnZhciBIVE1MX0NPREVTID0gWzM5LCAxNjAsIDE2MSwgMTYyLCAxNjMsIDE2NCwgMTY1LCAxNjYsIDE2NywgMTY4LCAxNjksIDE3MCwgMTcxLCAxNzIsIDE3MywgMTc0LCAxNzUsIDE3NiwgMTc3LCAxNzgsIDE3OSwgMTgwLCAxODEsIDE4MiwgMTgzLCAxODQsIDE4NSwgMTg2LCAxODcsIDE4OCwgMTg5LCAxOTAsIDE5MSwgMTkyLCAxOTMsIDE5NCwgMTk1LCAxOTYsIDE5NywgMTk4LCAxOTksIDIwMCwgMjAxLCAyMDIsIDIwMywgMjA0LCAyMDUsIDIwNiwgMjA3LCAyMDgsIDIwOSwgMjEwLCAyMTEsIDIxMiwgMjEzLCAyMTQsIDIxNSwgMjE2LCAyMTcsIDIxOCwgMjE5LCAyMjAsIDIyMSwgMjIyLCAyMjMsIDIyNCwgMjI1LCAyMjYsIDIyNywgMjI4LCAyMjksIDIzMCwgMjMxLCAyMzIsIDIzMywgMjM0LCAyMzUsIDIzNiwgMjM3LCAyMzgsIDIzOSwgMjQwLCAyNDEsIDI0MiwgMjQzLCAyNDQsIDI0NSwgMjQ2LCAyNDcsIDI0OCwgMjQ5LCAyNTAsIDI1MSwgMjUyLCAyNTMsIDI1NCwgMjU1LCAzNCwgMzgsIDYwLCA2MiwgMzM4LCAzMzksIDM1MiwgMzUzLCAzNzYsIDcxMCwgNzMyLCA4MTk0LCA4MTk1LCA4MjAxLCA4MjA0LCA4MjA1LCA4MjA2LCA4MjA3LCA4MjExLCA4MjEyLCA4MjE2LCA4MjE3LCA4MjE4LCA4MjIwLCA4MjIxLCA4MjIyLCA4MjI0LCA4MjI1LCA4MjQwLCA4MjQ5LCA4MjUwLCA4MzY0LCA0MDIsIDkxMywgOTE0LCA5MTUsIDkxNiwgOTE3LCA5MTgsIDkxOSwgOTIwLCA5MjEsIDkyMiwgOTIzLCA5MjQsIDkyNSwgOTI2LCA5MjcsIDkyOCwgOTI5LCA5MzEsIDkzMiwgOTMzLCA5MzQsIDkzNSwgOTM2LCA5MzcsIDk0NSwgOTQ2LCA5NDcsIDk0OCwgOTQ5LCA5NTAsIDk1MSwgOTUyLCA5NTMsIDk1NCwgOTU1LCA5NTYsIDk1NywgOTU4LCA5NTksIDk2MCwgOTYxLCA5NjIsIDk2MywgOTY0LCA5NjUsIDk2NiwgOTY3LCA5NjgsIDk2OSwgOTc3LCA5NzgsIDk4MiwgODIyNiwgODIzMCwgODI0MiwgODI0MywgODI1NCwgODI2MCwgODQ3MiwgODQ2NSwgODQ3NiwgODQ4MiwgODUwMSwgODU5MiwgODU5MywgODU5NCwgODU5NSwgODU5NiwgODYyOSwgODY1NiwgODY1NywgODY1OCwgODY1OSwgODY2MCwgODcwNCwgODcwNiwgODcwNywgODcwOSwgODcxMSwgODcxMiwgODcxMywgODcxNSwgODcxOSwgODcyMSwgODcyMiwgODcyNywgODczMCwgODczMywgODczNCwgODczNiwgODc0MywgODc0NCwgODc0NSwgODc0NiwgODc0NywgODc1NiwgODc2NCwgODc3MywgODc3NiwgODgwMCwgODgwMSwgODgwNCwgODgwNSwgODgzNCwgODgzNSwgODgzNiwgODgzOCwgODgzOSwgODg1MywgODg1NSwgODg2OSwgODkwMSwgODk2OCwgODk2OSwgODk3MCwgODk3MSwgOTAwMSwgOTAwMiwgOTY3NCwgOTgyNCwgOTgyNywgOTgyOSwgOTgzMF07XG52YXIgYWxwaGFJbmRleCA9IHt9O1xudmFyIG51bUluZGV4ID0ge307XG4oZnVuY3Rpb24gKCkge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gSFRNTF9BTFBIQS5sZW5ndGg7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGEgPSBIVE1MX0FMUEhBW2ldO1xuICAgICAgICB2YXIgYyA9IEhUTUxfQ09ERVNbaV07XG4gICAgICAgIGFscGhhSW5kZXhbYV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICAgICAgICBudW1JbmRleFtjXSA9IGE7XG4gICAgICAgIGkrKztcbiAgICB9XG59KSgpO1xudmFyIEh0bWw0RW50aXRpZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSHRtbDRFbnRpdGllcygpIHtcbiAgICB9XG4gICAgSHRtbDRFbnRpdGllcy5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvJigjP1tcXHdcXGRdKyk7Py9nLCBmdW5jdGlvbiAocywgZW50aXR5KSB7XG4gICAgICAgICAgICB2YXIgY2hyO1xuICAgICAgICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMCkgPT09IFwiI1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBlbnRpdHkuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCkgPT09ICd4JyA/XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGVudGl0eS5zdWJzdHIoMiksIDE2KSA6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGVudGl0eS5zdWJzdHIoMSkpO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oY29kZSkgfHwgY29kZSA+PSAtMzI3NjgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPD0gNjU1MzUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHIgPSBzdXJyb2dhdGVfcGFpcnNfMS5mcm9tQ29kZVBvaW50KGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hyID0gYWxwaGFJbmRleFtlbnRpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNociB8fCBzO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEh0bWw0RW50aXRpZXMuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw0RW50aXRpZXMoKS5kZWNvZGUoc3RyKTtcbiAgICB9O1xuICAgIEh0bWw0RW50aXRpZXMucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBudW1JbmRleFtzdHIuY2hhckNvZGVBdChpKV07XG4gICAgICAgICAgICByZXN1bHQgKz0gYWxwaGEgPyBcIiZcIiArIGFscGhhICsgXCI7XCIgOiBzdHIuY2hhckF0KGkpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBIdG1sNEVudGl0aWVzLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sNEVudGl0aWVzKCkuZW5jb2RlKHN0cik7XG4gICAgfTtcbiAgICBIdG1sNEVudGl0aWVzLnByb3RvdHlwZS5lbmNvZGVOb25VVEYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHN0ckxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGNjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBudW1JbmRleFtjY107XG4gICAgICAgICAgICBpZiAoYWxwaGEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCImXCIgKyBhbHBoYSArIFwiO1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2MgPCAzMiB8fCBjYyA+IDEyNikge1xuICAgICAgICAgICAgICAgIGlmIChjYyA+PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlRnJvbSAmJiBjYyA8PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBzdXJyb2dhdGVfcGFpcnNfMS5nZXRDb2RlUG9pbnQoc3RyLCBpKSArICc7JztcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBjYyArICc7JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgSHRtbDRFbnRpdGllcy5lbmNvZGVOb25VVEYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbDRFbnRpdGllcygpLmVuY29kZU5vblVURihzdHIpO1xuICAgIH07XG4gICAgSHRtbDRFbnRpdGllcy5wcm90b3R5cGUuZW5jb2RlTm9uQVNDSUkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHN0ckxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIGlmIChjIDw9IDI1NSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzdHJbaSsrXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjID49IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVGcm9tICYmIGMgPD0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZVRvKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBzdXJyb2dhdGVfcGFpcnNfMS5nZXRDb2RlUG9pbnQoc3RyLCBpKSArICc7JztcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIGMgKyAnOyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEh0bWw0RW50aXRpZXMuZW5jb2RlTm9uQVNDSUkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHRtbDRFbnRpdGllcygpLmVuY29kZU5vbkFTQ0lJKHN0cik7XG4gICAgfTtcbiAgICByZXR1cm4gSHRtbDRFbnRpdGllcztcbn0oKSk7XG5leHBvcnRzLkh0bWw0RW50aXRpZXMgPSBIdG1sNEVudGl0aWVzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgc3Vycm9nYXRlX3BhaXJzXzEgPSByZXF1aXJlKFwiLi9zdXJyb2dhdGUtcGFpcnNcIik7XG52YXIgRU5USVRJRVMgPSBbWydBYWN1dGUnLCBbMTkzXV0sIFsnYWFjdXRlJywgWzIyNV1dLCBbJ0FicmV2ZScsIFsyNThdXSwgWydhYnJldmUnLCBbMjU5XV0sIFsnYWMnLCBbODc2Nl1dLCBbJ2FjZCcsIFs4NzY3XV0sIFsnYWNFJywgWzg3NjYsIDgxOV1dLCBbJ0FjaXJjJywgWzE5NF1dLCBbJ2FjaXJjJywgWzIyNl1dLCBbJ2FjdXRlJywgWzE4MF1dLCBbJ0FjeScsIFsxMDQwXV0sIFsnYWN5JywgWzEwNzJdXSwgWydBRWxpZycsIFsxOThdXSwgWydhZWxpZycsIFsyMzBdXSwgWydhZicsIFs4Mjg5XV0sIFsnQWZyJywgWzEyMDA2OF1dLCBbJ2FmcicsIFsxMjAwOTRdXSwgWydBZ3JhdmUnLCBbMTkyXV0sIFsnYWdyYXZlJywgWzIyNF1dLCBbJ2FsZWZzeW0nLCBbODUwMV1dLCBbJ2FsZXBoJywgWzg1MDFdXSwgWydBbHBoYScsIFs5MTNdXSwgWydhbHBoYScsIFs5NDVdXSwgWydBbWFjcicsIFsyNTZdXSwgWydhbWFjcicsIFsyNTddXSwgWydhbWFsZycsIFsxMDgxNV1dLCBbJ2FtcCcsIFszOF1dLCBbJ0FNUCcsIFszOF1dLCBbJ2FuZGFuZCcsIFsxMDgzN11dLCBbJ0FuZCcsIFsxMDgzNV1dLCBbJ2FuZCcsIFs4NzQzXV0sIFsnYW5kZCcsIFsxMDg0NF1dLCBbJ2FuZHNsb3BlJywgWzEwODQwXV0sIFsnYW5kdicsIFsxMDg0Ml1dLCBbJ2FuZycsIFs4NzM2XV0sIFsnYW5nZScsIFsxMDY2MF1dLCBbJ2FuZ2xlJywgWzg3MzZdXSwgWydhbmdtc2RhYScsIFsxMDY2NF1dLCBbJ2FuZ21zZGFiJywgWzEwNjY1XV0sIFsnYW5nbXNkYWMnLCBbMTA2NjZdXSwgWydhbmdtc2RhZCcsIFsxMDY2N11dLCBbJ2FuZ21zZGFlJywgWzEwNjY4XV0sIFsnYW5nbXNkYWYnLCBbMTA2NjldXSwgWydhbmdtc2RhZycsIFsxMDY3MF1dLCBbJ2FuZ21zZGFoJywgWzEwNjcxXV0sIFsnYW5nbXNkJywgWzg3MzddXSwgWydhbmdydCcsIFs4NzM1XV0sIFsnYW5ncnR2YicsIFs4ODk0XV0sIFsnYW5ncnR2YmQnLCBbMTA2NTNdXSwgWydhbmdzcGgnLCBbODczOF1dLCBbJ2FuZ3N0JywgWzE5N11dLCBbJ2FuZ3phcnInLCBbOTA4NF1dLCBbJ0FvZ29uJywgWzI2MF1dLCBbJ2FvZ29uJywgWzI2MV1dLCBbJ0FvcGYnLCBbMTIwMTIwXV0sIFsnYW9wZicsIFsxMjAxNDZdXSwgWydhcGFjaXInLCBbMTA4NjNdXSwgWydhcCcsIFs4Nzc2XV0sIFsnYXBFJywgWzEwODY0XV0sIFsnYXBlJywgWzg3NzhdXSwgWydhcGlkJywgWzg3NzldXSwgWydhcG9zJywgWzM5XV0sIFsnQXBwbHlGdW5jdGlvbicsIFs4Mjg5XV0sIFsnYXBwcm94JywgWzg3NzZdXSwgWydhcHByb3hlcScsIFs4Nzc4XV0sIFsnQXJpbmcnLCBbMTk3XV0sIFsnYXJpbmcnLCBbMjI5XV0sIFsnQXNjcicsIFsxMTk5NjRdXSwgWydhc2NyJywgWzExOTk5MF1dLCBbJ0Fzc2lnbicsIFs4Nzg4XV0sIFsnYXN0JywgWzQyXV0sIFsnYXN5bXAnLCBbODc3Nl1dLCBbJ2FzeW1wZXEnLCBbODc4MV1dLCBbJ0F0aWxkZScsIFsxOTVdXSwgWydhdGlsZGUnLCBbMjI3XV0sIFsnQXVtbCcsIFsxOTZdXSwgWydhdW1sJywgWzIyOF1dLCBbJ2F3Y29uaW50JywgWzg3NTVdXSwgWydhd2ludCcsIFsxMDc2OV1dLCBbJ2JhY2tjb25nJywgWzg3ODBdXSwgWydiYWNrZXBzaWxvbicsIFsxMDE0XV0sIFsnYmFja3ByaW1lJywgWzgyNDVdXSwgWydiYWNrc2ltJywgWzg3NjVdXSwgWydiYWNrc2ltZXEnLCBbODkwOV1dLCBbJ0JhY2tzbGFzaCcsIFs4NzI2XV0sIFsnQmFydicsIFsxMDk4M11dLCBbJ2JhcnZlZScsIFs4ODkzXV0sIFsnYmFyd2VkJywgWzg5NjVdXSwgWydCYXJ3ZWQnLCBbODk2Nl1dLCBbJ2JhcndlZGdlJywgWzg5NjVdXSwgWydiYnJrJywgWzkxNDFdXSwgWydiYnJrdGJyaycsIFs5MTQyXV0sIFsnYmNvbmcnLCBbODc4MF1dLCBbJ0JjeScsIFsxMDQxXV0sIFsnYmN5JywgWzEwNzNdXSwgWydiZHF1bycsIFs4MjIyXV0sIFsnYmVjYXVzJywgWzg3NTddXSwgWydiZWNhdXNlJywgWzg3NTddXSwgWydCZWNhdXNlJywgWzg3NTddXSwgWydiZW1wdHl2JywgWzEwNjcyXV0sIFsnYmVwc2knLCBbMTAxNF1dLCBbJ2Jlcm5vdScsIFs4NDkyXV0sIFsnQmVybm91bGxpcycsIFs4NDkyXV0sIFsnQmV0YScsIFs5MTRdXSwgWydiZXRhJywgWzk0Nl1dLCBbJ2JldGgnLCBbODUwMl1dLCBbJ2JldHdlZW4nLCBbODgxMl1dLCBbJ0JmcicsIFsxMjAwNjldXSwgWydiZnInLCBbMTIwMDk1XV0sIFsnYmlnY2FwJywgWzg4OThdXSwgWydiaWdjaXJjJywgWzk3MTFdXSwgWydiaWdjdXAnLCBbODg5OV1dLCBbJ2JpZ29kb3QnLCBbMTA3NTJdXSwgWydiaWdvcGx1cycsIFsxMDc1M11dLCBbJ2JpZ290aW1lcycsIFsxMDc1NF1dLCBbJ2JpZ3NxY3VwJywgWzEwNzU4XV0sIFsnYmlnc3RhcicsIFs5NzMzXV0sIFsnYmlndHJpYW5nbGVkb3duJywgWzk2NjFdXSwgWydiaWd0cmlhbmdsZXVwJywgWzk2NTFdXSwgWydiaWd1cGx1cycsIFsxMDc1Nl1dLCBbJ2JpZ3ZlZScsIFs4ODk3XV0sIFsnYmlnd2VkZ2UnLCBbODg5Nl1dLCBbJ2JrYXJvdycsIFsxMDUwOV1dLCBbJ2JsYWNrbG96ZW5nZScsIFsxMDczMV1dLCBbJ2JsYWNrc3F1YXJlJywgWzk2NDJdXSwgWydibGFja3RyaWFuZ2xlJywgWzk2NTJdXSwgWydibGFja3RyaWFuZ2xlZG93bicsIFs5NjYyXV0sIFsnYmxhY2t0cmlhbmdsZWxlZnQnLCBbOTY2Nl1dLCBbJ2JsYWNrdHJpYW5nbGVyaWdodCcsIFs5NjU2XV0sIFsnYmxhbmsnLCBbOTI1MV1dLCBbJ2JsazEyJywgWzk2MThdXSwgWydibGsxNCcsIFs5NjE3XV0sIFsnYmxrMzQnLCBbOTYxOV1dLCBbJ2Jsb2NrJywgWzk2MDhdXSwgWydibmUnLCBbNjEsIDg0MjFdXSwgWydibmVxdWl2JywgWzg4MDEsIDg0MjFdXSwgWydiTm90JywgWzEwOTg5XV0sIFsnYm5vdCcsIFs4OTc2XV0sIFsnQm9wZicsIFsxMjAxMjFdXSwgWydib3BmJywgWzEyMDE0N11dLCBbJ2JvdCcsIFs4ODY5XV0sIFsnYm90dG9tJywgWzg4NjldXSwgWydib3d0aWUnLCBbODkwNF1dLCBbJ2JveGJveCcsIFsxMDY5N11dLCBbJ2JveGRsJywgWzk0ODhdXSwgWydib3hkTCcsIFs5NTU3XV0sIFsnYm94RGwnLCBbOTU1OF1dLCBbJ2JveERMJywgWzk1NTldXSwgWydib3hkcicsIFs5NDg0XV0sIFsnYm94ZFInLCBbOTU1NF1dLCBbJ2JveERyJywgWzk1NTVdXSwgWydib3hEUicsIFs5NTU2XV0sIFsnYm94aCcsIFs5NDcyXV0sIFsnYm94SCcsIFs5NTUyXV0sIFsnYm94aGQnLCBbOTUxNl1dLCBbJ2JveEhkJywgWzk1NzJdXSwgWydib3hoRCcsIFs5NTczXV0sIFsnYm94SEQnLCBbOTU3NF1dLCBbJ2JveGh1JywgWzk1MjRdXSwgWydib3hIdScsIFs5NTc1XV0sIFsnYm94aFUnLCBbOTU3Nl1dLCBbJ2JveEhVJywgWzk1NzddXSwgWydib3htaW51cycsIFs4ODYzXV0sIFsnYm94cGx1cycsIFs4ODYyXV0sIFsnYm94dGltZXMnLCBbODg2NF1dLCBbJ2JveHVsJywgWzk0OTZdXSwgWydib3h1TCcsIFs5NTYzXV0sIFsnYm94VWwnLCBbOTU2NF1dLCBbJ2JveFVMJywgWzk1NjVdXSwgWydib3h1cicsIFs5NDkyXV0sIFsnYm94dVInLCBbOTU2MF1dLCBbJ2JveFVyJywgWzk1NjFdXSwgWydib3hVUicsIFs5NTYyXV0sIFsnYm94dicsIFs5NDc0XV0sIFsnYm94VicsIFs5NTUzXV0sIFsnYm94dmgnLCBbOTUzMl1dLCBbJ2JveHZIJywgWzk1NzhdXSwgWydib3hWaCcsIFs5NTc5XV0sIFsnYm94VkgnLCBbOTU4MF1dLCBbJ2JveHZsJywgWzk1MDhdXSwgWydib3h2TCcsIFs5NTY5XV0sIFsnYm94VmwnLCBbOTU3MF1dLCBbJ2JveFZMJywgWzk1NzFdXSwgWydib3h2cicsIFs5NTAwXV0sIFsnYm94dlInLCBbOTU2Nl1dLCBbJ2JveFZyJywgWzk1NjddXSwgWydib3hWUicsIFs5NTY4XV0sIFsnYnByaW1lJywgWzgyNDVdXSwgWydicmV2ZScsIFs3MjhdXSwgWydCcmV2ZScsIFs3MjhdXSwgWydicnZiYXInLCBbMTY2XV0sIFsnYnNjcicsIFsxMTk5OTFdXSwgWydCc2NyJywgWzg0OTJdXSwgWydic2VtaScsIFs4MjcxXV0sIFsnYnNpbScsIFs4NzY1XV0sIFsnYnNpbWUnLCBbODkwOV1dLCBbJ2Jzb2xiJywgWzEwNjkzXV0sIFsnYnNvbCcsIFs5Ml1dLCBbJ2Jzb2xoc3ViJywgWzEwMTg0XV0sIFsnYnVsbCcsIFs4MjI2XV0sIFsnYnVsbGV0JywgWzgyMjZdXSwgWydidW1wJywgWzg3ODJdXSwgWydidW1wRScsIFsxMDkyNl1dLCBbJ2J1bXBlJywgWzg3ODNdXSwgWydCdW1wZXEnLCBbODc4Ml1dLCBbJ2J1bXBlcScsIFs4NzgzXV0sIFsnQ2FjdXRlJywgWzI2Ml1dLCBbJ2NhY3V0ZScsIFsyNjNdXSwgWydjYXBhbmQnLCBbMTA4MjBdXSwgWydjYXBicmN1cCcsIFsxMDgyNV1dLCBbJ2NhcGNhcCcsIFsxMDgyN11dLCBbJ2NhcCcsIFs4NzQ1XV0sIFsnQ2FwJywgWzg5MTRdXSwgWydjYXBjdXAnLCBbMTA4MjNdXSwgWydjYXBkb3QnLCBbMTA4MTZdXSwgWydDYXBpdGFsRGlmZmVyZW50aWFsRCcsIFs4NTE3XV0sIFsnY2FwcycsIFs4NzQ1LCA2NTAyNF1dLCBbJ2NhcmV0JywgWzgyNTddXSwgWydjYXJvbicsIFs3MTFdXSwgWydDYXlsZXlzJywgWzg0OTNdXSwgWydjY2FwcycsIFsxMDgyOV1dLCBbJ0NjYXJvbicsIFsyNjhdXSwgWydjY2Fyb24nLCBbMjY5XV0sIFsnQ2NlZGlsJywgWzE5OV1dLCBbJ2NjZWRpbCcsIFsyMzFdXSwgWydDY2lyYycsIFsyNjRdXSwgWydjY2lyYycsIFsyNjVdXSwgWydDY29uaW50JywgWzg3NTJdXSwgWydjY3VwcycsIFsxMDgyOF1dLCBbJ2NjdXBzc20nLCBbMTA4MzJdXSwgWydDZG90JywgWzI2Nl1dLCBbJ2Nkb3QnLCBbMjY3XV0sIFsnY2VkaWwnLCBbMTg0XV0sIFsnQ2VkaWxsYScsIFsxODRdXSwgWydjZW1wdHl2JywgWzEwNjc0XV0sIFsnY2VudCcsIFsxNjJdXSwgWydjZW50ZXJkb3QnLCBbMTgzXV0sIFsnQ2VudGVyRG90JywgWzE4M11dLCBbJ2NmcicsIFsxMjAwOTZdXSwgWydDZnInLCBbODQ5M11dLCBbJ0NIY3knLCBbMTA2M11dLCBbJ2NoY3knLCBbMTA5NV1dLCBbJ2NoZWNrJywgWzEwMDAzXV0sIFsnY2hlY2ttYXJrJywgWzEwMDAzXV0sIFsnQ2hpJywgWzkzNV1dLCBbJ2NoaScsIFs5NjddXSwgWydjaXJjJywgWzcxMF1dLCBbJ2NpcmNlcScsIFs4NzkxXV0sIFsnY2lyY2xlYXJyb3dsZWZ0JywgWzg2MzRdXSwgWydjaXJjbGVhcnJvd3JpZ2h0JywgWzg2MzVdXSwgWydjaXJjbGVkYXN0JywgWzg4NTldXSwgWydjaXJjbGVkY2lyYycsIFs4ODU4XV0sIFsnY2lyY2xlZGRhc2gnLCBbODg2MV1dLCBbJ0NpcmNsZURvdCcsIFs4ODU3XV0sIFsnY2lyY2xlZFInLCBbMTc0XV0sIFsnY2lyY2xlZFMnLCBbOTQxNl1dLCBbJ0NpcmNsZU1pbnVzJywgWzg4NTRdXSwgWydDaXJjbGVQbHVzJywgWzg4NTNdXSwgWydDaXJjbGVUaW1lcycsIFs4ODU1XV0sIFsnY2lyJywgWzk2NzVdXSwgWydjaXJFJywgWzEwNjkxXV0sIFsnY2lyZScsIFs4NzkxXV0sIFsnY2lyZm5pbnQnLCBbMTA3NjhdXSwgWydjaXJtaWQnLCBbMTA5OTFdXSwgWydjaXJzY2lyJywgWzEwNjkwXV0sIFsnQ2xvY2t3aXNlQ29udG91ckludGVncmFsJywgWzg3NTRdXSwgWydjbHVicycsIFs5ODI3XV0sIFsnY2x1YnN1aXQnLCBbOTgyN11dLCBbJ2NvbG9uJywgWzU4XV0sIFsnQ29sb24nLCBbODc1OV1dLCBbJ0NvbG9uZScsIFsxMDg2OF1dLCBbJ2NvbG9uZScsIFs4Nzg4XV0sIFsnY29sb25lcScsIFs4Nzg4XV0sIFsnY29tbWEnLCBbNDRdXSwgWydjb21tYXQnLCBbNjRdXSwgWydjb21wJywgWzg3MDVdXSwgWydjb21wZm4nLCBbODcyOF1dLCBbJ2NvbXBsZW1lbnQnLCBbODcwNV1dLCBbJ2NvbXBsZXhlcycsIFs4NDUwXV0sIFsnY29uZycsIFs4NzczXV0sIFsnY29uZ2RvdCcsIFsxMDg2MV1dLCBbJ0NvbmdydWVudCcsIFs4ODAxXV0sIFsnY29uaW50JywgWzg3NTBdXSwgWydDb25pbnQnLCBbODc1MV1dLCBbJ0NvbnRvdXJJbnRlZ3JhbCcsIFs4NzUwXV0sIFsnY29wZicsIFsxMjAxNDhdXSwgWydDb3BmJywgWzg0NTBdXSwgWydjb3Byb2QnLCBbODcyMF1dLCBbJ0NvcHJvZHVjdCcsIFs4NzIwXV0sIFsnY29weScsIFsxNjldXSwgWydDT1BZJywgWzE2OV1dLCBbJ2NvcHlzcicsIFs4NDcxXV0sIFsnQ291bnRlckNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbCcsIFs4NzU1XV0sIFsnY3JhcnInLCBbODYyOV1dLCBbJ2Nyb3NzJywgWzEwMDA3XV0sIFsnQ3Jvc3MnLCBbMTA3OTldXSwgWydDc2NyJywgWzExOTk2Nl1dLCBbJ2NzY3InLCBbMTE5OTkyXV0sIFsnY3N1YicsIFsxMDk1OV1dLCBbJ2NzdWJlJywgWzEwOTYxXV0sIFsnY3N1cCcsIFsxMDk2MF1dLCBbJ2NzdXBlJywgWzEwOTYyXV0sIFsnY3Rkb3QnLCBbODk0M11dLCBbJ2N1ZGFycmwnLCBbMTA1NTJdXSwgWydjdWRhcnJyJywgWzEwNTQ5XV0sIFsnY3VlcHInLCBbODkyNl1dLCBbJ2N1ZXNjJywgWzg5MjddXSwgWydjdWxhcnInLCBbODYzMF1dLCBbJ2N1bGFycnAnLCBbMTA1NTddXSwgWydjdXBicmNhcCcsIFsxMDgyNF1dLCBbJ2N1cGNhcCcsIFsxMDgyMl1dLCBbJ0N1cENhcCcsIFs4NzgxXV0sIFsnY3VwJywgWzg3NDZdXSwgWydDdXAnLCBbODkxNV1dLCBbJ2N1cGN1cCcsIFsxMDgyNl1dLCBbJ2N1cGRvdCcsIFs4ODQ1XV0sIFsnY3Vwb3InLCBbMTA4MjFdXSwgWydjdXBzJywgWzg3NDYsIDY1MDI0XV0sIFsnY3VyYXJyJywgWzg2MzFdXSwgWydjdXJhcnJtJywgWzEwNTU2XV0sIFsnY3VybHllcXByZWMnLCBbODkyNl1dLCBbJ2N1cmx5ZXFzdWNjJywgWzg5MjddXSwgWydjdXJseXZlZScsIFs4OTEwXV0sIFsnY3VybHl3ZWRnZScsIFs4OTExXV0sIFsnY3VycmVuJywgWzE2NF1dLCBbJ2N1cnZlYXJyb3dsZWZ0JywgWzg2MzBdXSwgWydjdXJ2ZWFycm93cmlnaHQnLCBbODYzMV1dLCBbJ2N1dmVlJywgWzg5MTBdXSwgWydjdXdlZCcsIFs4OTExXV0sIFsnY3djb25pbnQnLCBbODc1NF1dLCBbJ2N3aW50JywgWzg3NTNdXSwgWydjeWxjdHknLCBbOTAwNV1dLCBbJ2RhZ2dlcicsIFs4MjI0XV0sIFsnRGFnZ2VyJywgWzgyMjVdXSwgWydkYWxldGgnLCBbODUwNF1dLCBbJ2RhcnInLCBbODU5NV1dLCBbJ0RhcnInLCBbODYwOV1dLCBbJ2RBcnInLCBbODY1OV1dLCBbJ2Rhc2gnLCBbODIwOF1dLCBbJ0Rhc2h2JywgWzEwOTgwXV0sIFsnZGFzaHYnLCBbODg2N11dLCBbJ2Ria2Fyb3cnLCBbMTA1MTFdXSwgWydkYmxhYycsIFs3MzNdXSwgWydEY2Fyb24nLCBbMjcwXV0sIFsnZGNhcm9uJywgWzI3MV1dLCBbJ0RjeScsIFsxMDQ0XV0sIFsnZGN5JywgWzEwNzZdXSwgWydkZGFnZ2VyJywgWzgyMjVdXSwgWydkZGFycicsIFs4NjUwXV0sIFsnREQnLCBbODUxN11dLCBbJ2RkJywgWzg1MThdXSwgWydERG90cmFoZCcsIFsxMDUxM11dLCBbJ2Rkb3RzZXEnLCBbMTA4NzFdXSwgWydkZWcnLCBbMTc2XV0sIFsnRGVsJywgWzg3MTFdXSwgWydEZWx0YScsIFs5MTZdXSwgWydkZWx0YScsIFs5NDhdXSwgWydkZW1wdHl2JywgWzEwNjczXV0sIFsnZGZpc2h0JywgWzEwNjIzXV0sIFsnRGZyJywgWzEyMDA3MV1dLCBbJ2RmcicsIFsxMjAwOTddXSwgWydkSGFyJywgWzEwNTk3XV0sIFsnZGhhcmwnLCBbODY0M11dLCBbJ2RoYXJyJywgWzg2NDJdXSwgWydEaWFjcml0aWNhbEFjdXRlJywgWzE4MF1dLCBbJ0RpYWNyaXRpY2FsRG90JywgWzcyOV1dLCBbJ0RpYWNyaXRpY2FsRG91YmxlQWN1dGUnLCBbNzMzXV0sIFsnRGlhY3JpdGljYWxHcmF2ZScsIFs5Nl1dLCBbJ0RpYWNyaXRpY2FsVGlsZGUnLCBbNzMyXV0sIFsnZGlhbScsIFs4OTAwXV0sIFsnZGlhbW9uZCcsIFs4OTAwXV0sIFsnRGlhbW9uZCcsIFs4OTAwXV0sIFsnZGlhbW9uZHN1aXQnLCBbOTgzMF1dLCBbJ2RpYW1zJywgWzk4MzBdXSwgWydkaWUnLCBbMTY4XV0sIFsnRGlmZmVyZW50aWFsRCcsIFs4NTE4XV0sIFsnZGlnYW1tYScsIFs5ODldXSwgWydkaXNpbicsIFs4OTQ2XV0sIFsnZGl2JywgWzI0N11dLCBbJ2RpdmlkZScsIFsyNDddXSwgWydkaXZpZGVvbnRpbWVzJywgWzg5MDNdXSwgWydkaXZvbngnLCBbODkwM11dLCBbJ0RKY3knLCBbMTAyNl1dLCBbJ2RqY3knLCBbMTEwNl1dLCBbJ2RsY29ybicsIFs4OTkwXV0sIFsnZGxjcm9wJywgWzg5NzNdXSwgWydkb2xsYXInLCBbMzZdXSwgWydEb3BmJywgWzEyMDEyM11dLCBbJ2RvcGYnLCBbMTIwMTQ5XV0sIFsnRG90JywgWzE2OF1dLCBbJ2RvdCcsIFs3MjldXSwgWydEb3REb3QnLCBbODQxMl1dLCBbJ2RvdGVxJywgWzg3ODRdXSwgWydkb3RlcWRvdCcsIFs4Nzg1XV0sIFsnRG90RXF1YWwnLCBbODc4NF1dLCBbJ2RvdG1pbnVzJywgWzg3NjBdXSwgWydkb3RwbHVzJywgWzg3MjRdXSwgWydkb3RzcXVhcmUnLCBbODg2NV1dLCBbJ2RvdWJsZWJhcndlZGdlJywgWzg5NjZdXSwgWydEb3VibGVDb250b3VySW50ZWdyYWwnLCBbODc1MV1dLCBbJ0RvdWJsZURvdCcsIFsxNjhdXSwgWydEb3VibGVEb3duQXJyb3cnLCBbODY1OV1dLCBbJ0RvdWJsZUxlZnRBcnJvdycsIFs4NjU2XV0sIFsnRG91YmxlTGVmdFJpZ2h0QXJyb3cnLCBbODY2MF1dLCBbJ0RvdWJsZUxlZnRUZWUnLCBbMTA5ODBdXSwgWydEb3VibGVMb25nTGVmdEFycm93JywgWzEwMjMyXV0sIFsnRG91YmxlTG9uZ0xlZnRSaWdodEFycm93JywgWzEwMjM0XV0sIFsnRG91YmxlTG9uZ1JpZ2h0QXJyb3cnLCBbMTAyMzNdXSwgWydEb3VibGVSaWdodEFycm93JywgWzg2NThdXSwgWydEb3VibGVSaWdodFRlZScsIFs4ODcyXV0sIFsnRG91YmxlVXBBcnJvdycsIFs4NjU3XV0sIFsnRG91YmxlVXBEb3duQXJyb3cnLCBbODY2MV1dLCBbJ0RvdWJsZVZlcnRpY2FsQmFyJywgWzg3NDFdXSwgWydEb3duQXJyb3dCYXInLCBbMTA1MTVdXSwgWydkb3duYXJyb3cnLCBbODU5NV1dLCBbJ0Rvd25BcnJvdycsIFs4NTk1XV0sIFsnRG93bmFycm93JywgWzg2NTldXSwgWydEb3duQXJyb3dVcEFycm93JywgWzg2OTNdXSwgWydEb3duQnJldmUnLCBbNzg1XV0sIFsnZG93bmRvd25hcnJvd3MnLCBbODY1MF1dLCBbJ2Rvd25oYXJwb29ubGVmdCcsIFs4NjQzXV0sIFsnZG93bmhhcnBvb25yaWdodCcsIFs4NjQyXV0sIFsnRG93bkxlZnRSaWdodFZlY3RvcicsIFsxMDU3Nl1dLCBbJ0Rvd25MZWZ0VGVlVmVjdG9yJywgWzEwNTkwXV0sIFsnRG93bkxlZnRWZWN0b3JCYXInLCBbMTA1ODJdXSwgWydEb3duTGVmdFZlY3RvcicsIFs4NjM3XV0sIFsnRG93blJpZ2h0VGVlVmVjdG9yJywgWzEwNTkxXV0sIFsnRG93blJpZ2h0VmVjdG9yQmFyJywgWzEwNTgzXV0sIFsnRG93blJpZ2h0VmVjdG9yJywgWzg2NDFdXSwgWydEb3duVGVlQXJyb3cnLCBbODYxNV1dLCBbJ0Rvd25UZWUnLCBbODg2OF1dLCBbJ2RyYmthcm93JywgWzEwNTEyXV0sIFsnZHJjb3JuJywgWzg5OTFdXSwgWydkcmNyb3AnLCBbODk3Ml1dLCBbJ0RzY3InLCBbMTE5OTY3XV0sIFsnZHNjcicsIFsxMTk5OTNdXSwgWydEU2N5JywgWzEwMjldXSwgWydkc2N5JywgWzExMDldXSwgWydkc29sJywgWzEwNzQyXV0sIFsnRHN0cm9rJywgWzI3Ml1dLCBbJ2RzdHJvaycsIFsyNzNdXSwgWydkdGRvdCcsIFs4OTQ1XV0sIFsnZHRyaScsIFs5NjYzXV0sIFsnZHRyaWYnLCBbOTY2Ml1dLCBbJ2R1YXJyJywgWzg2OTNdXSwgWydkdWhhcicsIFsxMDYwN11dLCBbJ2R3YW5nbGUnLCBbMTA2NjJdXSwgWydEWmN5JywgWzEwMzldXSwgWydkemN5JywgWzExMTldXSwgWydkemlncmFycicsIFsxMDIzOV1dLCBbJ0VhY3V0ZScsIFsyMDFdXSwgWydlYWN1dGUnLCBbMjMzXV0sIFsnZWFzdGVyJywgWzEwODYyXV0sIFsnRWNhcm9uJywgWzI4Ml1dLCBbJ2VjYXJvbicsIFsyODNdXSwgWydFY2lyYycsIFsyMDJdXSwgWydlY2lyYycsIFsyMzRdXSwgWydlY2lyJywgWzg3OTBdXSwgWydlY29sb24nLCBbODc4OV1dLCBbJ0VjeScsIFsxMDY5XV0sIFsnZWN5JywgWzExMDFdXSwgWydlRERvdCcsIFsxMDg3MV1dLCBbJ0Vkb3QnLCBbMjc4XV0sIFsnZWRvdCcsIFsyNzldXSwgWydlRG90JywgWzg3ODVdXSwgWydlZScsIFs4NTE5XV0sIFsnZWZEb3QnLCBbODc4Nl1dLCBbJ0VmcicsIFsxMjAwNzJdXSwgWydlZnInLCBbMTIwMDk4XV0sIFsnZWcnLCBbMTA5MDZdXSwgWydFZ3JhdmUnLCBbMjAwXV0sIFsnZWdyYXZlJywgWzIzMl1dLCBbJ2VncycsIFsxMDkwMl1dLCBbJ2Vnc2RvdCcsIFsxMDkwNF1dLCBbJ2VsJywgWzEwOTA1XV0sIFsnRWxlbWVudCcsIFs4NzEyXV0sIFsnZWxpbnRlcnMnLCBbOTE5MV1dLCBbJ2VsbCcsIFs4NDY3XV0sIFsnZWxzJywgWzEwOTAxXV0sIFsnZWxzZG90JywgWzEwOTAzXV0sIFsnRW1hY3InLCBbMjc0XV0sIFsnZW1hY3InLCBbMjc1XV0sIFsnZW1wdHknLCBbODcwOV1dLCBbJ2VtcHR5c2V0JywgWzg3MDldXSwgWydFbXB0eVNtYWxsU3F1YXJlJywgWzk3MjNdXSwgWydlbXB0eXYnLCBbODcwOV1dLCBbJ0VtcHR5VmVyeVNtYWxsU3F1YXJlJywgWzk2NDNdXSwgWydlbXNwMTMnLCBbODE5Nl1dLCBbJ2Vtc3AxNCcsIFs4MTk3XV0sIFsnZW1zcCcsIFs4MTk1XV0sIFsnRU5HJywgWzMzMF1dLCBbJ2VuZycsIFszMzFdXSwgWydlbnNwJywgWzgxOTRdXSwgWydFb2dvbicsIFsyODBdXSwgWydlb2dvbicsIFsyODFdXSwgWydFb3BmJywgWzEyMDEyNF1dLCBbJ2VvcGYnLCBbMTIwMTUwXV0sIFsnZXBhcicsIFs4OTE3XV0sIFsnZXBhcnNsJywgWzEwNzIzXV0sIFsnZXBsdXMnLCBbMTA4NjVdXSwgWydlcHNpJywgWzk0OV1dLCBbJ0Vwc2lsb24nLCBbOTE3XV0sIFsnZXBzaWxvbicsIFs5NDldXSwgWydlcHNpdicsIFsxMDEzXV0sIFsnZXFjaXJjJywgWzg3OTBdXSwgWydlcWNvbG9uJywgWzg3ODldXSwgWydlcXNpbScsIFs4NzcwXV0sIFsnZXFzbGFudGd0cicsIFsxMDkwMl1dLCBbJ2Vxc2xhbnRsZXNzJywgWzEwOTAxXV0sIFsnRXF1YWwnLCBbMTA4NjldXSwgWydlcXVhbHMnLCBbNjFdXSwgWydFcXVhbFRpbGRlJywgWzg3NzBdXSwgWydlcXVlc3QnLCBbODc5OV1dLCBbJ0VxdWlsaWJyaXVtJywgWzg2NTJdXSwgWydlcXVpdicsIFs4ODAxXV0sIFsnZXF1aXZERCcsIFsxMDg3Ml1dLCBbJ2VxdnBhcnNsJywgWzEwNzI1XV0sIFsnZXJhcnInLCBbMTA2MDldXSwgWydlckRvdCcsIFs4Nzg3XV0sIFsnZXNjcicsIFs4NDk1XV0sIFsnRXNjcicsIFs4NDk2XV0sIFsnZXNkb3QnLCBbODc4NF1dLCBbJ0VzaW0nLCBbMTA4NjddXSwgWydlc2ltJywgWzg3NzBdXSwgWydFdGEnLCBbOTE5XV0sIFsnZXRhJywgWzk1MV1dLCBbJ0VUSCcsIFsyMDhdXSwgWydldGgnLCBbMjQwXV0sIFsnRXVtbCcsIFsyMDNdXSwgWydldW1sJywgWzIzNV1dLCBbJ2V1cm8nLCBbODM2NF1dLCBbJ2V4Y2wnLCBbMzNdXSwgWydleGlzdCcsIFs4NzA3XV0sIFsnRXhpc3RzJywgWzg3MDddXSwgWydleHBlY3RhdGlvbicsIFs4NDk2XV0sIFsnZXhwb25lbnRpYWxlJywgWzg1MTldXSwgWydFeHBvbmVudGlhbEUnLCBbODUxOV1dLCBbJ2ZhbGxpbmdkb3RzZXEnLCBbODc4Nl1dLCBbJ0ZjeScsIFsxMDYwXV0sIFsnZmN5JywgWzEwOTJdXSwgWydmZW1hbGUnLCBbOTc5Ml1dLCBbJ2ZmaWxpZycsIFs2NDI1OV1dLCBbJ2ZmbGlnJywgWzY0MjU2XV0sIFsnZmZsbGlnJywgWzY0MjYwXV0sIFsnRmZyJywgWzEyMDA3M11dLCBbJ2ZmcicsIFsxMjAwOTldXSwgWydmaWxpZycsIFs2NDI1N11dLCBbJ0ZpbGxlZFNtYWxsU3F1YXJlJywgWzk3MjRdXSwgWydGaWxsZWRWZXJ5U21hbGxTcXVhcmUnLCBbOTY0Ml1dLCBbJ2ZqbGlnJywgWzEwMiwgMTA2XV0sIFsnZmxhdCcsIFs5ODM3XV0sIFsnZmxsaWcnLCBbNjQyNThdXSwgWydmbHRucycsIFs5NjQ5XV0sIFsnZm5vZicsIFs0MDJdXSwgWydGb3BmJywgWzEyMDEyNV1dLCBbJ2ZvcGYnLCBbMTIwMTUxXV0sIFsnZm9yYWxsJywgWzg3MDRdXSwgWydGb3JBbGwnLCBbODcwNF1dLCBbJ2ZvcmsnLCBbODkxNl1dLCBbJ2Zvcmt2JywgWzEwOTY5XV0sIFsnRm91cmllcnRyZicsIFs4NDk3XV0sIFsnZnBhcnRpbnQnLCBbMTA3NjVdXSwgWydmcmFjMTInLCBbMTg5XV0sIFsnZnJhYzEzJywgWzg1MzFdXSwgWydmcmFjMTQnLCBbMTg4XV0sIFsnZnJhYzE1JywgWzg1MzNdXSwgWydmcmFjMTYnLCBbODUzN11dLCBbJ2ZyYWMxOCcsIFs4NTM5XV0sIFsnZnJhYzIzJywgWzg1MzJdXSwgWydmcmFjMjUnLCBbODUzNF1dLCBbJ2ZyYWMzNCcsIFsxOTBdXSwgWydmcmFjMzUnLCBbODUzNV1dLCBbJ2ZyYWMzOCcsIFs4NTQwXV0sIFsnZnJhYzQ1JywgWzg1MzZdXSwgWydmcmFjNTYnLCBbODUzOF1dLCBbJ2ZyYWM1OCcsIFs4NTQxXV0sIFsnZnJhYzc4JywgWzg1NDJdXSwgWydmcmFzbCcsIFs4MjYwXV0sIFsnZnJvd24nLCBbODk5NF1dLCBbJ2ZzY3InLCBbMTE5OTk1XV0sIFsnRnNjcicsIFs4NDk3XV0sIFsnZ2FjdXRlJywgWzUwMV1dLCBbJ0dhbW1hJywgWzkxNV1dLCBbJ2dhbW1hJywgWzk0N11dLCBbJ0dhbW1hZCcsIFs5ODhdXSwgWydnYW1tYWQnLCBbOTg5XV0sIFsnZ2FwJywgWzEwODg2XV0sIFsnR2JyZXZlJywgWzI4Nl1dLCBbJ2dicmV2ZScsIFsyODddXSwgWydHY2VkaWwnLCBbMjkwXV0sIFsnR2NpcmMnLCBbMjg0XV0sIFsnZ2NpcmMnLCBbMjg1XV0sIFsnR2N5JywgWzEwNDNdXSwgWydnY3knLCBbMTA3NV1dLCBbJ0dkb3QnLCBbMjg4XV0sIFsnZ2RvdCcsIFsyODldXSwgWydnZScsIFs4ODA1XV0sIFsnZ0UnLCBbODgwN11dLCBbJ2dFbCcsIFsxMDg5Ml1dLCBbJ2dlbCcsIFs4OTIzXV0sIFsnZ2VxJywgWzg4MDVdXSwgWydnZXFxJywgWzg4MDddXSwgWydnZXFzbGFudCcsIFsxMDg3OF1dLCBbJ2dlc2NjJywgWzEwOTIxXV0sIFsnZ2VzJywgWzEwODc4XV0sIFsnZ2VzZG90JywgWzEwODgwXV0sIFsnZ2VzZG90bycsIFsxMDg4Ml1dLCBbJ2dlc2RvdG9sJywgWzEwODg0XV0sIFsnZ2VzbCcsIFs4OTIzLCA2NTAyNF1dLCBbJ2dlc2xlcycsIFsxMDkwMF1dLCBbJ0dmcicsIFsxMjAwNzRdXSwgWydnZnInLCBbMTIwMTAwXV0sIFsnZ2cnLCBbODgxMV1dLCBbJ0dnJywgWzg5MjFdXSwgWydnZ2cnLCBbODkyMV1dLCBbJ2dpbWVsJywgWzg1MDNdXSwgWydHSmN5JywgWzEwMjddXSwgWydnamN5JywgWzExMDddXSwgWydnbGEnLCBbMTA5MTddXSwgWydnbCcsIFs4ODIzXV0sIFsnZ2xFJywgWzEwODk4XV0sIFsnZ2xqJywgWzEwOTE2XV0sIFsnZ25hcCcsIFsxMDg5MF1dLCBbJ2duYXBwcm94JywgWzEwODkwXV0sIFsnZ25lJywgWzEwODg4XV0sIFsnZ25FJywgWzg4MDldXSwgWydnbmVxJywgWzEwODg4XV0sIFsnZ25lcXEnLCBbODgwOV1dLCBbJ2duc2ltJywgWzg5MzVdXSwgWydHb3BmJywgWzEyMDEyNl1dLCBbJ2dvcGYnLCBbMTIwMTUyXV0sIFsnZ3JhdmUnLCBbOTZdXSwgWydHcmVhdGVyRXF1YWwnLCBbODgwNV1dLCBbJ0dyZWF0ZXJFcXVhbExlc3MnLCBbODkyM11dLCBbJ0dyZWF0ZXJGdWxsRXF1YWwnLCBbODgwN11dLCBbJ0dyZWF0ZXJHcmVhdGVyJywgWzEwOTE0XV0sIFsnR3JlYXRlckxlc3MnLCBbODgyM11dLCBbJ0dyZWF0ZXJTbGFudEVxdWFsJywgWzEwODc4XV0sIFsnR3JlYXRlclRpbGRlJywgWzg4MTldXSwgWydHc2NyJywgWzExOTk3MF1dLCBbJ2dzY3InLCBbODQ1OF1dLCBbJ2dzaW0nLCBbODgxOV1dLCBbJ2dzaW1lJywgWzEwODk0XV0sIFsnZ3NpbWwnLCBbMTA4OTZdXSwgWydndGNjJywgWzEwOTE5XV0sIFsnZ3RjaXInLCBbMTA4NzRdXSwgWydndCcsIFs2Ml1dLCBbJ0dUJywgWzYyXV0sIFsnR3QnLCBbODgxMV1dLCBbJ2d0ZG90JywgWzg5MTldXSwgWydndGxQYXInLCBbMTA2NDVdXSwgWydndHF1ZXN0JywgWzEwODc2XV0sIFsnZ3RyYXBwcm94JywgWzEwODg2XV0sIFsnZ3RyYXJyJywgWzEwNjE2XV0sIFsnZ3RyZG90JywgWzg5MTldXSwgWydndHJlcWxlc3MnLCBbODkyM11dLCBbJ2d0cmVxcWxlc3MnLCBbMTA4OTJdXSwgWydndHJsZXNzJywgWzg4MjNdXSwgWydndHJzaW0nLCBbODgxOV1dLCBbJ2d2ZXJ0bmVxcScsIFs4ODA5LCA2NTAyNF1dLCBbJ2d2bkUnLCBbODgwOSwgNjUwMjRdXSwgWydIYWNlaycsIFs3MTFdXSwgWydoYWlyc3AnLCBbODIwMl1dLCBbJ2hhbGYnLCBbMTg5XV0sIFsnaGFtaWx0JywgWzg0NTldXSwgWydIQVJEY3knLCBbMTA2Nl1dLCBbJ2hhcmRjeScsIFsxMDk4XV0sIFsnaGFycmNpcicsIFsxMDU2OF1dLCBbJ2hhcnInLCBbODU5Nl1dLCBbJ2hBcnInLCBbODY2MF1dLCBbJ2hhcnJ3JywgWzg2MjFdXSwgWydIYXQnLCBbOTRdXSwgWydoYmFyJywgWzg0NjNdXSwgWydIY2lyYycsIFsyOTJdXSwgWydoY2lyYycsIFsyOTNdXSwgWydoZWFydHMnLCBbOTgyOV1dLCBbJ2hlYXJ0c3VpdCcsIFs5ODI5XV0sIFsnaGVsbGlwJywgWzgyMzBdXSwgWydoZXJjb24nLCBbODg4OV1dLCBbJ2hmcicsIFsxMjAxMDFdXSwgWydIZnInLCBbODQ2MF1dLCBbJ0hpbGJlcnRTcGFjZScsIFs4NDU5XV0sIFsnaGtzZWFyb3cnLCBbMTA1MzNdXSwgWydoa3N3YXJvdycsIFsxMDUzNF1dLCBbJ2hvYXJyJywgWzg3MDNdXSwgWydob210aHQnLCBbODc2M11dLCBbJ2hvb2tsZWZ0YXJyb3cnLCBbODYxN11dLCBbJ2hvb2tyaWdodGFycm93JywgWzg2MThdXSwgWydob3BmJywgWzEyMDE1M11dLCBbJ0hvcGYnLCBbODQ2MV1dLCBbJ2hvcmJhcicsIFs4MjEzXV0sIFsnSG9yaXpvbnRhbExpbmUnLCBbOTQ3Ml1dLCBbJ2hzY3InLCBbMTE5OTk3XV0sIFsnSHNjcicsIFs4NDU5XV0sIFsnaHNsYXNoJywgWzg0NjNdXSwgWydIc3Ryb2snLCBbMjk0XV0sIFsnaHN0cm9rJywgWzI5NV1dLCBbJ0h1bXBEb3duSHVtcCcsIFs4NzgyXV0sIFsnSHVtcEVxdWFsJywgWzg3ODNdXSwgWydoeWJ1bGwnLCBbODI1OV1dLCBbJ2h5cGhlbicsIFs4MjA4XV0sIFsnSWFjdXRlJywgWzIwNV1dLCBbJ2lhY3V0ZScsIFsyMzddXSwgWydpYycsIFs4MjkxXV0sIFsnSWNpcmMnLCBbMjA2XV0sIFsnaWNpcmMnLCBbMjM4XV0sIFsnSWN5JywgWzEwNDhdXSwgWydpY3knLCBbMTA4MF1dLCBbJ0lkb3QnLCBbMzA0XV0sIFsnSUVjeScsIFsxMDQ1XV0sIFsnaWVjeScsIFsxMDc3XV0sIFsnaWV4Y2wnLCBbMTYxXV0sIFsnaWZmJywgWzg2NjBdXSwgWydpZnInLCBbMTIwMTAyXV0sIFsnSWZyJywgWzg0NjVdXSwgWydJZ3JhdmUnLCBbMjA0XV0sIFsnaWdyYXZlJywgWzIzNl1dLCBbJ2lpJywgWzg1MjBdXSwgWydpaWlpbnQnLCBbMTA3NjRdXSwgWydpaWludCcsIFs4NzQ5XV0sIFsnaWluZmluJywgWzEwNzE2XV0sIFsnaWlvdGEnLCBbODQ4OV1dLCBbJ0lKbGlnJywgWzMwNl1dLCBbJ2lqbGlnJywgWzMwN11dLCBbJ0ltYWNyJywgWzI5OF1dLCBbJ2ltYWNyJywgWzI5OV1dLCBbJ2ltYWdlJywgWzg0NjVdXSwgWydJbWFnaW5hcnlJJywgWzg1MjBdXSwgWydpbWFnbGluZScsIFs4NDY0XV0sIFsnaW1hZ3BhcnQnLCBbODQ2NV1dLCBbJ2ltYXRoJywgWzMwNV1dLCBbJ0ltJywgWzg0NjVdXSwgWydpbW9mJywgWzg4ODddXSwgWydpbXBlZCcsIFs0MzddXSwgWydJbXBsaWVzJywgWzg2NThdXSwgWydpbmNhcmUnLCBbODQ1M11dLCBbJ2luJywgWzg3MTJdXSwgWydpbmZpbicsIFs4NzM0XV0sIFsnaW5maW50aWUnLCBbMTA3MTddXSwgWydpbm9kb3QnLCBbMzA1XV0sIFsnaW50Y2FsJywgWzg4OTBdXSwgWydpbnQnLCBbODc0N11dLCBbJ0ludCcsIFs4NzQ4XV0sIFsnaW50ZWdlcnMnLCBbODQ4NF1dLCBbJ0ludGVncmFsJywgWzg3NDddXSwgWydpbnRlcmNhbCcsIFs4ODkwXV0sIFsnSW50ZXJzZWN0aW9uJywgWzg4OThdXSwgWydpbnRsYXJoaycsIFsxMDc3NV1dLCBbJ2ludHByb2QnLCBbMTA4MTJdXSwgWydJbnZpc2libGVDb21tYScsIFs4MjkxXV0sIFsnSW52aXNpYmxlVGltZXMnLCBbODI5MF1dLCBbJ0lPY3knLCBbMTAyNV1dLCBbJ2lvY3knLCBbMTEwNV1dLCBbJ0lvZ29uJywgWzMwMl1dLCBbJ2lvZ29uJywgWzMwM11dLCBbJ0lvcGYnLCBbMTIwMTI4XV0sIFsnaW9wZicsIFsxMjAxNTRdXSwgWydJb3RhJywgWzkyMV1dLCBbJ2lvdGEnLCBbOTUzXV0sIFsnaXByb2QnLCBbMTA4MTJdXSwgWydpcXVlc3QnLCBbMTkxXV0sIFsnaXNjcicsIFsxMTk5OThdXSwgWydJc2NyJywgWzg0NjRdXSwgWydpc2luJywgWzg3MTJdXSwgWydpc2luZG90JywgWzg5NDldXSwgWydpc2luRScsIFs4OTUzXV0sIFsnaXNpbnMnLCBbODk0OF1dLCBbJ2lzaW5zdicsIFs4OTQ3XV0sIFsnaXNpbnYnLCBbODcxMl1dLCBbJ2l0JywgWzgyOTBdXSwgWydJdGlsZGUnLCBbMjk2XV0sIFsnaXRpbGRlJywgWzI5N11dLCBbJ0l1a2N5JywgWzEwMzBdXSwgWydpdWtjeScsIFsxMTEwXV0sIFsnSXVtbCcsIFsyMDddXSwgWydpdW1sJywgWzIzOV1dLCBbJ0pjaXJjJywgWzMwOF1dLCBbJ2pjaXJjJywgWzMwOV1dLCBbJ0pjeScsIFsxMDQ5XV0sIFsnamN5JywgWzEwODFdXSwgWydKZnInLCBbMTIwMDc3XV0sIFsnamZyJywgWzEyMDEwM11dLCBbJ2ptYXRoJywgWzU2N11dLCBbJ0pvcGYnLCBbMTIwMTI5XV0sIFsnam9wZicsIFsxMjAxNTVdXSwgWydKc2NyJywgWzExOTk3M11dLCBbJ2pzY3InLCBbMTE5OTk5XV0sIFsnSnNlcmN5JywgWzEwMzJdXSwgWydqc2VyY3knLCBbMTExMl1dLCBbJ0p1a2N5JywgWzEwMjhdXSwgWydqdWtjeScsIFsxMTA4XV0sIFsnS2FwcGEnLCBbOTIyXV0sIFsna2FwcGEnLCBbOTU0XV0sIFsna2FwcGF2JywgWzEwMDhdXSwgWydLY2VkaWwnLCBbMzEwXV0sIFsna2NlZGlsJywgWzMxMV1dLCBbJ0tjeScsIFsxMDUwXV0sIFsna2N5JywgWzEwODJdXSwgWydLZnInLCBbMTIwMDc4XV0sIFsna2ZyJywgWzEyMDEwNF1dLCBbJ2tncmVlbicsIFszMTJdXSwgWydLSGN5JywgWzEwNjFdXSwgWydraGN5JywgWzEwOTNdXSwgWydLSmN5JywgWzEwMzZdXSwgWydramN5JywgWzExMTZdXSwgWydLb3BmJywgWzEyMDEzMF1dLCBbJ2tvcGYnLCBbMTIwMTU2XV0sIFsnS3NjcicsIFsxMTk5NzRdXSwgWydrc2NyJywgWzEyMDAwMF1dLCBbJ2xBYXJyJywgWzg2NjZdXSwgWydMYWN1dGUnLCBbMzEzXV0sIFsnbGFjdXRlJywgWzMxNF1dLCBbJ2xhZW1wdHl2JywgWzEwNjc2XV0sIFsnbGFncmFuJywgWzg0NjZdXSwgWydMYW1iZGEnLCBbOTIzXV0sIFsnbGFtYmRhJywgWzk1NV1dLCBbJ2xhbmcnLCBbMTAyMTZdXSwgWydMYW5nJywgWzEwMjE4XV0sIFsnbGFuZ2QnLCBbMTA2NDFdXSwgWydsYW5nbGUnLCBbMTAyMTZdXSwgWydsYXAnLCBbMTA4ODVdXSwgWydMYXBsYWNldHJmJywgWzg0NjZdXSwgWydsYXF1bycsIFsxNzFdXSwgWydsYXJyYicsIFs4Njc2XV0sIFsnbGFycmJmcycsIFsxMDUyN11dLCBbJ2xhcnInLCBbODU5Ml1dLCBbJ0xhcnInLCBbODYwNl1dLCBbJ2xBcnInLCBbODY1Nl1dLCBbJ2xhcnJmcycsIFsxMDUyNV1dLCBbJ2xhcnJoaycsIFs4NjE3XV0sIFsnbGFycmxwJywgWzg2MTldXSwgWydsYXJycGwnLCBbMTA1NTNdXSwgWydsYXJyc2ltJywgWzEwNjExXV0sIFsnbGFycnRsJywgWzg2MTBdXSwgWydsYXRhaWwnLCBbMTA1MjFdXSwgWydsQXRhaWwnLCBbMTA1MjNdXSwgWydsYXQnLCBbMTA5MjNdXSwgWydsYXRlJywgWzEwOTI1XV0sIFsnbGF0ZXMnLCBbMTA5MjUsIDY1MDI0XV0sIFsnbGJhcnInLCBbMTA1MDhdXSwgWydsQmFycicsIFsxMDUxMF1dLCBbJ2xiYnJrJywgWzEwMDk4XV0sIFsnbGJyYWNlJywgWzEyM11dLCBbJ2xicmFjaycsIFs5MV1dLCBbJ2xicmtlJywgWzEwNjM1XV0sIFsnbGJya3NsZCcsIFsxMDYzOV1dLCBbJ2xicmtzbHUnLCBbMTA2MzddXSwgWydMY2Fyb24nLCBbMzE3XV0sIFsnbGNhcm9uJywgWzMxOF1dLCBbJ0xjZWRpbCcsIFszMTVdXSwgWydsY2VkaWwnLCBbMzE2XV0sIFsnbGNlaWwnLCBbODk2OF1dLCBbJ2xjdWInLCBbMTIzXV0sIFsnTGN5JywgWzEwNTFdXSwgWydsY3knLCBbMTA4M11dLCBbJ2xkY2EnLCBbMTA1NTBdXSwgWydsZHF1bycsIFs4MjIwXV0sIFsnbGRxdW9yJywgWzgyMjJdXSwgWydsZHJkaGFyJywgWzEwNTk5XV0sIFsnbGRydXNoYXInLCBbMTA1NzFdXSwgWydsZHNoJywgWzg2MjZdXSwgWydsZScsIFs4ODA0XV0sIFsnbEUnLCBbODgwNl1dLCBbJ0xlZnRBbmdsZUJyYWNrZXQnLCBbMTAyMTZdXSwgWydMZWZ0QXJyb3dCYXInLCBbODY3Nl1dLCBbJ2xlZnRhcnJvdycsIFs4NTkyXV0sIFsnTGVmdEFycm93JywgWzg1OTJdXSwgWydMZWZ0YXJyb3cnLCBbODY1Nl1dLCBbJ0xlZnRBcnJvd1JpZ2h0QXJyb3cnLCBbODY0Nl1dLCBbJ2xlZnRhcnJvd3RhaWwnLCBbODYxMF1dLCBbJ0xlZnRDZWlsaW5nJywgWzg5NjhdXSwgWydMZWZ0RG91YmxlQnJhY2tldCcsIFsxMDIxNF1dLCBbJ0xlZnREb3duVGVlVmVjdG9yJywgWzEwNTkzXV0sIFsnTGVmdERvd25WZWN0b3JCYXInLCBbMTA1ODVdXSwgWydMZWZ0RG93blZlY3RvcicsIFs4NjQzXV0sIFsnTGVmdEZsb29yJywgWzg5NzBdXSwgWydsZWZ0aGFycG9vbmRvd24nLCBbODYzN11dLCBbJ2xlZnRoYXJwb29udXAnLCBbODYzNl1dLCBbJ2xlZnRsZWZ0YXJyb3dzJywgWzg2NDddXSwgWydsZWZ0cmlnaHRhcnJvdycsIFs4NTk2XV0sIFsnTGVmdFJpZ2h0QXJyb3cnLCBbODU5Nl1dLCBbJ0xlZnRyaWdodGFycm93JywgWzg2NjBdXSwgWydsZWZ0cmlnaHRhcnJvd3MnLCBbODY0Nl1dLCBbJ2xlZnRyaWdodGhhcnBvb25zJywgWzg2NTFdXSwgWydsZWZ0cmlnaHRzcXVpZ2Fycm93JywgWzg2MjFdXSwgWydMZWZ0UmlnaHRWZWN0b3InLCBbMTA1NzRdXSwgWydMZWZ0VGVlQXJyb3cnLCBbODYxMl1dLCBbJ0xlZnRUZWUnLCBbODg2N11dLCBbJ0xlZnRUZWVWZWN0b3InLCBbMTA1ODZdXSwgWydsZWZ0dGhyZWV0aW1lcycsIFs4OTA3XV0sIFsnTGVmdFRyaWFuZ2xlQmFyJywgWzEwNzAzXV0sIFsnTGVmdFRyaWFuZ2xlJywgWzg4ODJdXSwgWydMZWZ0VHJpYW5nbGVFcXVhbCcsIFs4ODg0XV0sIFsnTGVmdFVwRG93blZlY3RvcicsIFsxMDU3N11dLCBbJ0xlZnRVcFRlZVZlY3RvcicsIFsxMDU5Ml1dLCBbJ0xlZnRVcFZlY3RvckJhcicsIFsxMDU4NF1dLCBbJ0xlZnRVcFZlY3RvcicsIFs4NjM5XV0sIFsnTGVmdFZlY3RvckJhcicsIFsxMDU3OF1dLCBbJ0xlZnRWZWN0b3InLCBbODYzNl1dLCBbJ2xFZycsIFsxMDg5MV1dLCBbJ2xlZycsIFs4OTIyXV0sIFsnbGVxJywgWzg4MDRdXSwgWydsZXFxJywgWzg4MDZdXSwgWydsZXFzbGFudCcsIFsxMDg3N11dLCBbJ2xlc2NjJywgWzEwOTIwXV0sIFsnbGVzJywgWzEwODc3XV0sIFsnbGVzZG90JywgWzEwODc5XV0sIFsnbGVzZG90bycsIFsxMDg4MV1dLCBbJ2xlc2RvdG9yJywgWzEwODgzXV0sIFsnbGVzZycsIFs4OTIyLCA2NTAyNF1dLCBbJ2xlc2dlcycsIFsxMDg5OV1dLCBbJ2xlc3NhcHByb3gnLCBbMTA4ODVdXSwgWydsZXNzZG90JywgWzg5MThdXSwgWydsZXNzZXFndHInLCBbODkyMl1dLCBbJ2xlc3NlcXFndHInLCBbMTA4OTFdXSwgWydMZXNzRXF1YWxHcmVhdGVyJywgWzg5MjJdXSwgWydMZXNzRnVsbEVxdWFsJywgWzg4MDZdXSwgWydMZXNzR3JlYXRlcicsIFs4ODIyXV0sIFsnbGVzc2d0cicsIFs4ODIyXV0sIFsnTGVzc0xlc3MnLCBbMTA5MTNdXSwgWydsZXNzc2ltJywgWzg4MThdXSwgWydMZXNzU2xhbnRFcXVhbCcsIFsxMDg3N11dLCBbJ0xlc3NUaWxkZScsIFs4ODE4XV0sIFsnbGZpc2h0JywgWzEwNjIwXV0sIFsnbGZsb29yJywgWzg5NzBdXSwgWydMZnInLCBbMTIwMDc5XV0sIFsnbGZyJywgWzEyMDEwNV1dLCBbJ2xnJywgWzg4MjJdXSwgWydsZ0UnLCBbMTA4OTddXSwgWydsSGFyJywgWzEwNTk0XV0sIFsnbGhhcmQnLCBbODYzN11dLCBbJ2xoYXJ1JywgWzg2MzZdXSwgWydsaGFydWwnLCBbMTA2MDJdXSwgWydsaGJsaycsIFs5NjA0XV0sIFsnTEpjeScsIFsxMDMzXV0sIFsnbGpjeScsIFsxMTEzXV0sIFsnbGxhcnInLCBbODY0N11dLCBbJ2xsJywgWzg4MTBdXSwgWydMbCcsIFs4OTIwXV0sIFsnbGxjb3JuZXInLCBbODk5MF1dLCBbJ0xsZWZ0YXJyb3cnLCBbODY2Nl1dLCBbJ2xsaGFyZCcsIFsxMDYwM11dLCBbJ2xsdHJpJywgWzk3MjJdXSwgWydMbWlkb3QnLCBbMzE5XV0sIFsnbG1pZG90JywgWzMyMF1dLCBbJ2xtb3VzdGFjaGUnLCBbOTEzNl1dLCBbJ2xtb3VzdCcsIFs5MTM2XV0sIFsnbG5hcCcsIFsxMDg4OV1dLCBbJ2xuYXBwcm94JywgWzEwODg5XV0sIFsnbG5lJywgWzEwODg3XV0sIFsnbG5FJywgWzg4MDhdXSwgWydsbmVxJywgWzEwODg3XV0sIFsnbG5lcXEnLCBbODgwOF1dLCBbJ2xuc2ltJywgWzg5MzRdXSwgWydsb2FuZycsIFsxMDIyMF1dLCBbJ2xvYXJyJywgWzg3MDFdXSwgWydsb2JyaycsIFsxMDIxNF1dLCBbJ2xvbmdsZWZ0YXJyb3cnLCBbMTAyMjldXSwgWydMb25nTGVmdEFycm93JywgWzEwMjI5XV0sIFsnTG9uZ2xlZnRhcnJvdycsIFsxMDIzMl1dLCBbJ2xvbmdsZWZ0cmlnaHRhcnJvdycsIFsxMDIzMV1dLCBbJ0xvbmdMZWZ0UmlnaHRBcnJvdycsIFsxMDIzMV1dLCBbJ0xvbmdsZWZ0cmlnaHRhcnJvdycsIFsxMDIzNF1dLCBbJ2xvbmdtYXBzdG8nLCBbMTAyMzZdXSwgWydsb25ncmlnaHRhcnJvdycsIFsxMDIzMF1dLCBbJ0xvbmdSaWdodEFycm93JywgWzEwMjMwXV0sIFsnTG9uZ3JpZ2h0YXJyb3cnLCBbMTAyMzNdXSwgWydsb29wYXJyb3dsZWZ0JywgWzg2MTldXSwgWydsb29wYXJyb3dyaWdodCcsIFs4NjIwXV0sIFsnbG9wYXInLCBbMTA2MjldXSwgWydMb3BmJywgWzEyMDEzMV1dLCBbJ2xvcGYnLCBbMTIwMTU3XV0sIFsnbG9wbHVzJywgWzEwNzk3XV0sIFsnbG90aW1lcycsIFsxMDgwNF1dLCBbJ2xvd2FzdCcsIFs4NzI3XV0sIFsnbG93YmFyJywgWzk1XV0sIFsnTG93ZXJMZWZ0QXJyb3cnLCBbODYwMV1dLCBbJ0xvd2VyUmlnaHRBcnJvdycsIFs4NjAwXV0sIFsnbG96JywgWzk2NzRdXSwgWydsb3plbmdlJywgWzk2NzRdXSwgWydsb3pmJywgWzEwNzMxXV0sIFsnbHBhcicsIFs0MF1dLCBbJ2xwYXJsdCcsIFsxMDY0M11dLCBbJ2xyYXJyJywgWzg2NDZdXSwgWydscmNvcm5lcicsIFs4OTkxXV0sIFsnbHJoYXInLCBbODY1MV1dLCBbJ2xyaGFyZCcsIFsxMDYwNV1dLCBbJ2xybScsIFs4MjA2XV0sIFsnbHJ0cmknLCBbODg5NV1dLCBbJ2xzYXF1bycsIFs4MjQ5XV0sIFsnbHNjcicsIFsxMjAwMDFdXSwgWydMc2NyJywgWzg0NjZdXSwgWydsc2gnLCBbODYyNF1dLCBbJ0xzaCcsIFs4NjI0XV0sIFsnbHNpbScsIFs4ODE4XV0sIFsnbHNpbWUnLCBbMTA4OTNdXSwgWydsc2ltZycsIFsxMDg5NV1dLCBbJ2xzcWInLCBbOTFdXSwgWydsc3F1bycsIFs4MjE2XV0sIFsnbHNxdW9yJywgWzgyMThdXSwgWydMc3Ryb2snLCBbMzIxXV0sIFsnbHN0cm9rJywgWzMyMl1dLCBbJ2x0Y2MnLCBbMTA5MThdXSwgWydsdGNpcicsIFsxMDg3M11dLCBbJ2x0JywgWzYwXV0sIFsnTFQnLCBbNjBdXSwgWydMdCcsIFs4ODEwXV0sIFsnbHRkb3QnLCBbODkxOF1dLCBbJ2x0aHJlZScsIFs4OTA3XV0sIFsnbHRpbWVzJywgWzg5MDVdXSwgWydsdGxhcnInLCBbMTA2MTRdXSwgWydsdHF1ZXN0JywgWzEwODc1XV0sIFsnbHRyaScsIFs5NjY3XV0sIFsnbHRyaWUnLCBbODg4NF1dLCBbJ2x0cmlmJywgWzk2NjZdXSwgWydsdHJQYXInLCBbMTA2NDZdXSwgWydsdXJkc2hhcicsIFsxMDU3MF1dLCBbJ2x1cnVoYXInLCBbMTA1OThdXSwgWydsdmVydG5lcXEnLCBbODgwOCwgNjUwMjRdXSwgWydsdm5FJywgWzg4MDgsIDY1MDI0XV0sIFsnbWFjcicsIFsxNzVdXSwgWydtYWxlJywgWzk3OTRdXSwgWydtYWx0JywgWzEwMDE2XV0sIFsnbWFsdGVzZScsIFsxMDAxNl1dLCBbJ01hcCcsIFsxMDUwMV1dLCBbJ21hcCcsIFs4NjE0XV0sIFsnbWFwc3RvJywgWzg2MTRdXSwgWydtYXBzdG9kb3duJywgWzg2MTVdXSwgWydtYXBzdG9sZWZ0JywgWzg2MTJdXSwgWydtYXBzdG91cCcsIFs4NjEzXV0sIFsnbWFya2VyJywgWzk2NDZdXSwgWydtY29tbWEnLCBbMTA3OTNdXSwgWydNY3knLCBbMTA1Ml1dLCBbJ21jeScsIFsxMDg0XV0sIFsnbWRhc2gnLCBbODIxMl1dLCBbJ21ERG90JywgWzg3NjJdXSwgWydtZWFzdXJlZGFuZ2xlJywgWzg3MzddXSwgWydNZWRpdW1TcGFjZScsIFs4Mjg3XV0sIFsnTWVsbGludHJmJywgWzg0OTldXSwgWydNZnInLCBbMTIwMDgwXV0sIFsnbWZyJywgWzEyMDEwNl1dLCBbJ21obycsIFs4NDg3XV0sIFsnbWljcm8nLCBbMTgxXV0sIFsnbWlkYXN0JywgWzQyXV0sIFsnbWlkY2lyJywgWzEwOTkyXV0sIFsnbWlkJywgWzg3MzldXSwgWydtaWRkb3QnLCBbMTgzXV0sIFsnbWludXNiJywgWzg4NjNdXSwgWydtaW51cycsIFs4NzIyXV0sIFsnbWludXNkJywgWzg3NjBdXSwgWydtaW51c2R1JywgWzEwNzk0XV0sIFsnTWludXNQbHVzJywgWzg3MjNdXSwgWydtbGNwJywgWzEwOTcxXV0sIFsnbWxkcicsIFs4MjMwXV0sIFsnbW5wbHVzJywgWzg3MjNdXSwgWydtb2RlbHMnLCBbODg3MV1dLCBbJ01vcGYnLCBbMTIwMTMyXV0sIFsnbW9wZicsIFsxMjAxNThdXSwgWydtcCcsIFs4NzIzXV0sIFsnbXNjcicsIFsxMjAwMDJdXSwgWydNc2NyJywgWzg0OTldXSwgWydtc3Rwb3MnLCBbODc2Nl1dLCBbJ011JywgWzkyNF1dLCBbJ211JywgWzk1Nl1dLCBbJ211bHRpbWFwJywgWzg4ODhdXSwgWydtdW1hcCcsIFs4ODg4XV0sIFsnbmFibGEnLCBbODcxMV1dLCBbJ05hY3V0ZScsIFszMjNdXSwgWyduYWN1dGUnLCBbMzI0XV0sIFsnbmFuZycsIFs4NzM2LCA4NDAyXV0sIFsnbmFwJywgWzg3NzddXSwgWyduYXBFJywgWzEwODY0LCA4MjRdXSwgWyduYXBpZCcsIFs4Nzc5LCA4MjRdXSwgWyduYXBvcycsIFszMjldXSwgWyduYXBwcm94JywgWzg3NzddXSwgWyduYXR1cmFsJywgWzk4MzhdXSwgWyduYXR1cmFscycsIFs4NDY5XV0sIFsnbmF0dXInLCBbOTgzOF1dLCBbJ25ic3AnLCBbMTYwXV0sIFsnbmJ1bXAnLCBbODc4MiwgODI0XV0sIFsnbmJ1bXBlJywgWzg3ODMsIDgyNF1dLCBbJ25jYXAnLCBbMTA4MTldXSwgWydOY2Fyb24nLCBbMzI3XV0sIFsnbmNhcm9uJywgWzMyOF1dLCBbJ05jZWRpbCcsIFszMjVdXSwgWyduY2VkaWwnLCBbMzI2XV0sIFsnbmNvbmcnLCBbODc3NV1dLCBbJ25jb25nZG90JywgWzEwODYxLCA4MjRdXSwgWyduY3VwJywgWzEwODE4XV0sIFsnTmN5JywgWzEwNTNdXSwgWyduY3knLCBbMTA4NV1dLCBbJ25kYXNoJywgWzgyMTFdXSwgWyduZWFyaGsnLCBbMTA1MzJdXSwgWyduZWFycicsIFs4NTk5XV0sIFsnbmVBcnInLCBbODY2M11dLCBbJ25lYXJyb3cnLCBbODU5OV1dLCBbJ25lJywgWzg4MDBdXSwgWyduZWRvdCcsIFs4Nzg0LCA4MjRdXSwgWydOZWdhdGl2ZU1lZGl1bVNwYWNlJywgWzgyMDNdXSwgWydOZWdhdGl2ZVRoaWNrU3BhY2UnLCBbODIwM11dLCBbJ05lZ2F0aXZlVGhpblNwYWNlJywgWzgyMDNdXSwgWydOZWdhdGl2ZVZlcnlUaGluU3BhY2UnLCBbODIwM11dLCBbJ25lcXVpdicsIFs4ODAyXV0sIFsnbmVzZWFyJywgWzEwNTM2XV0sIFsnbmVzaW0nLCBbODc3MCwgODI0XV0sIFsnTmVzdGVkR3JlYXRlckdyZWF0ZXInLCBbODgxMV1dLCBbJ05lc3RlZExlc3NMZXNzJywgWzg4MTBdXSwgWyduZXhpc3QnLCBbODcwOF1dLCBbJ25leGlzdHMnLCBbODcwOF1dLCBbJ05mcicsIFsxMjAwODFdXSwgWyduZnInLCBbMTIwMTA3XV0sIFsnbmdFJywgWzg4MDcsIDgyNF1dLCBbJ25nZScsIFs4ODE3XV0sIFsnbmdlcScsIFs4ODE3XV0sIFsnbmdlcXEnLCBbODgwNywgODI0XV0sIFsnbmdlcXNsYW50JywgWzEwODc4LCA4MjRdXSwgWyduZ2VzJywgWzEwODc4LCA4MjRdXSwgWyduR2cnLCBbODkyMSwgODI0XV0sIFsnbmdzaW0nLCBbODgyMV1dLCBbJ25HdCcsIFs4ODExLCA4NDAyXV0sIFsnbmd0JywgWzg4MTVdXSwgWyduZ3RyJywgWzg4MTVdXSwgWyduR3R2JywgWzg4MTEsIDgyNF1dLCBbJ25oYXJyJywgWzg2MjJdXSwgWyduaEFycicsIFs4NjU0XV0sIFsnbmhwYXInLCBbMTA5OTRdXSwgWyduaScsIFs4NzE1XV0sIFsnbmlzJywgWzg5NTZdXSwgWyduaXNkJywgWzg5NTRdXSwgWyduaXYnLCBbODcxNV1dLCBbJ05KY3knLCBbMTAzNF1dLCBbJ25qY3knLCBbMTExNF1dLCBbJ25sYXJyJywgWzg2MDJdXSwgWydubEFycicsIFs4NjUzXV0sIFsnbmxkcicsIFs4MjI5XV0sIFsnbmxFJywgWzg4MDYsIDgyNF1dLCBbJ25sZScsIFs4ODE2XV0sIFsnbmxlZnRhcnJvdycsIFs4NjAyXV0sIFsnbkxlZnRhcnJvdycsIFs4NjUzXV0sIFsnbmxlZnRyaWdodGFycm93JywgWzg2MjJdXSwgWyduTGVmdHJpZ2h0YXJyb3cnLCBbODY1NF1dLCBbJ25sZXEnLCBbODgxNl1dLCBbJ25sZXFxJywgWzg4MDYsIDgyNF1dLCBbJ25sZXFzbGFudCcsIFsxMDg3NywgODI0XV0sIFsnbmxlcycsIFsxMDg3NywgODI0XV0sIFsnbmxlc3MnLCBbODgxNF1dLCBbJ25MbCcsIFs4OTIwLCA4MjRdXSwgWydubHNpbScsIFs4ODIwXV0sIFsnbkx0JywgWzg4MTAsIDg0MDJdXSwgWydubHQnLCBbODgxNF1dLCBbJ25sdHJpJywgWzg5MzhdXSwgWydubHRyaWUnLCBbODk0MF1dLCBbJ25MdHYnLCBbODgxMCwgODI0XV0sIFsnbm1pZCcsIFs4NzQwXV0sIFsnTm9CcmVhaycsIFs4Mjg4XV0sIFsnTm9uQnJlYWtpbmdTcGFjZScsIFsxNjBdXSwgWydub3BmJywgWzEyMDE1OV1dLCBbJ05vcGYnLCBbODQ2OV1dLCBbJ05vdCcsIFsxMDk4OF1dLCBbJ25vdCcsIFsxNzJdXSwgWydOb3RDb25ncnVlbnQnLCBbODgwMl1dLCBbJ05vdEN1cENhcCcsIFs4ODEzXV0sIFsnTm90RG91YmxlVmVydGljYWxCYXInLCBbODc0Ml1dLCBbJ05vdEVsZW1lbnQnLCBbODcxM11dLCBbJ05vdEVxdWFsJywgWzg4MDBdXSwgWydOb3RFcXVhbFRpbGRlJywgWzg3NzAsIDgyNF1dLCBbJ05vdEV4aXN0cycsIFs4NzA4XV0sIFsnTm90R3JlYXRlcicsIFs4ODE1XV0sIFsnTm90R3JlYXRlckVxdWFsJywgWzg4MTddXSwgWydOb3RHcmVhdGVyRnVsbEVxdWFsJywgWzg4MDcsIDgyNF1dLCBbJ05vdEdyZWF0ZXJHcmVhdGVyJywgWzg4MTEsIDgyNF1dLCBbJ05vdEdyZWF0ZXJMZXNzJywgWzg4MjVdXSwgWydOb3RHcmVhdGVyU2xhbnRFcXVhbCcsIFsxMDg3OCwgODI0XV0sIFsnTm90R3JlYXRlclRpbGRlJywgWzg4MjFdXSwgWydOb3RIdW1wRG93bkh1bXAnLCBbODc4MiwgODI0XV0sIFsnTm90SHVtcEVxdWFsJywgWzg3ODMsIDgyNF1dLCBbJ25vdGluJywgWzg3MTNdXSwgWydub3RpbmRvdCcsIFs4OTQ5LCA4MjRdXSwgWydub3RpbkUnLCBbODk1MywgODI0XV0sIFsnbm90aW52YScsIFs4NzEzXV0sIFsnbm90aW52YicsIFs4OTUxXV0sIFsnbm90aW52YycsIFs4OTUwXV0sIFsnTm90TGVmdFRyaWFuZ2xlQmFyJywgWzEwNzAzLCA4MjRdXSwgWydOb3RMZWZ0VHJpYW5nbGUnLCBbODkzOF1dLCBbJ05vdExlZnRUcmlhbmdsZUVxdWFsJywgWzg5NDBdXSwgWydOb3RMZXNzJywgWzg4MTRdXSwgWydOb3RMZXNzRXF1YWwnLCBbODgxNl1dLCBbJ05vdExlc3NHcmVhdGVyJywgWzg4MjRdXSwgWydOb3RMZXNzTGVzcycsIFs4ODEwLCA4MjRdXSwgWydOb3RMZXNzU2xhbnRFcXVhbCcsIFsxMDg3NywgODI0XV0sIFsnTm90TGVzc1RpbGRlJywgWzg4MjBdXSwgWydOb3ROZXN0ZWRHcmVhdGVyR3JlYXRlcicsIFsxMDkxNCwgODI0XV0sIFsnTm90TmVzdGVkTGVzc0xlc3MnLCBbMTA5MTMsIDgyNF1dLCBbJ25vdG5pJywgWzg3MTZdXSwgWydub3RuaXZhJywgWzg3MTZdXSwgWydub3RuaXZiJywgWzg5NThdXSwgWydub3RuaXZjJywgWzg5NTddXSwgWydOb3RQcmVjZWRlcycsIFs4ODMyXV0sIFsnTm90UHJlY2VkZXNFcXVhbCcsIFsxMDkyNywgODI0XV0sIFsnTm90UHJlY2VkZXNTbGFudEVxdWFsJywgWzg5MjhdXSwgWydOb3RSZXZlcnNlRWxlbWVudCcsIFs4NzE2XV0sIFsnTm90UmlnaHRUcmlhbmdsZUJhcicsIFsxMDcwNCwgODI0XV0sIFsnTm90UmlnaHRUcmlhbmdsZScsIFs4OTM5XV0sIFsnTm90UmlnaHRUcmlhbmdsZUVxdWFsJywgWzg5NDFdXSwgWydOb3RTcXVhcmVTdWJzZXQnLCBbODg0NywgODI0XV0sIFsnTm90U3F1YXJlU3Vic2V0RXF1YWwnLCBbODkzMF1dLCBbJ05vdFNxdWFyZVN1cGVyc2V0JywgWzg4NDgsIDgyNF1dLCBbJ05vdFNxdWFyZVN1cGVyc2V0RXF1YWwnLCBbODkzMV1dLCBbJ05vdFN1YnNldCcsIFs4ODM0LCA4NDAyXV0sIFsnTm90U3Vic2V0RXF1YWwnLCBbODg0MF1dLCBbJ05vdFN1Y2NlZWRzJywgWzg4MzNdXSwgWydOb3RTdWNjZWVkc0VxdWFsJywgWzEwOTI4LCA4MjRdXSwgWydOb3RTdWNjZWVkc1NsYW50RXF1YWwnLCBbODkyOV1dLCBbJ05vdFN1Y2NlZWRzVGlsZGUnLCBbODgzMSwgODI0XV0sIFsnTm90U3VwZXJzZXQnLCBbODgzNSwgODQwMl1dLCBbJ05vdFN1cGVyc2V0RXF1YWwnLCBbODg0MV1dLCBbJ05vdFRpbGRlJywgWzg3NjldXSwgWydOb3RUaWxkZUVxdWFsJywgWzg3NzJdXSwgWydOb3RUaWxkZUZ1bGxFcXVhbCcsIFs4Nzc1XV0sIFsnTm90VGlsZGVUaWxkZScsIFs4Nzc3XV0sIFsnTm90VmVydGljYWxCYXInLCBbODc0MF1dLCBbJ25wYXJhbGxlbCcsIFs4NzQyXV0sIFsnbnBhcicsIFs4NzQyXV0sIFsnbnBhcnNsJywgWzExMDA1LCA4NDIxXV0sIFsnbnBhcnQnLCBbODcwNiwgODI0XV0sIFsnbnBvbGludCcsIFsxMDc3Ml1dLCBbJ25wcicsIFs4ODMyXV0sIFsnbnByY3VlJywgWzg5MjhdXSwgWyducHJlYycsIFs4ODMyXV0sIFsnbnByZWNlcScsIFsxMDkyNywgODI0XV0sIFsnbnByZScsIFsxMDkyNywgODI0XV0sIFsnbnJhcnJjJywgWzEwNTQ3LCA4MjRdXSwgWyducmFycicsIFs4NjAzXV0sIFsnbnJBcnInLCBbODY1NV1dLCBbJ25yYXJydycsIFs4NjA1LCA4MjRdXSwgWyducmlnaHRhcnJvdycsIFs4NjAzXV0sIFsnblJpZ2h0YXJyb3cnLCBbODY1NV1dLCBbJ25ydHJpJywgWzg5MzldXSwgWyducnRyaWUnLCBbODk0MV1dLCBbJ25zYycsIFs4ODMzXV0sIFsnbnNjY3VlJywgWzg5MjldXSwgWyduc2NlJywgWzEwOTI4LCA4MjRdXSwgWydOc2NyJywgWzExOTk3N11dLCBbJ25zY3InLCBbMTIwMDAzXV0sIFsnbnNob3J0bWlkJywgWzg3NDBdXSwgWyduc2hvcnRwYXJhbGxlbCcsIFs4NzQyXV0sIFsnbnNpbScsIFs4NzY5XV0sIFsnbnNpbWUnLCBbODc3Ml1dLCBbJ25zaW1lcScsIFs4NzcyXV0sIFsnbnNtaWQnLCBbODc0MF1dLCBbJ25zcGFyJywgWzg3NDJdXSwgWyduc3FzdWJlJywgWzg5MzBdXSwgWyduc3FzdXBlJywgWzg5MzFdXSwgWyduc3ViJywgWzg4MzZdXSwgWyduc3ViRScsIFsxMDk0OSwgODI0XV0sIFsnbnN1YmUnLCBbODg0MF1dLCBbJ25zdWJzZXQnLCBbODgzNCwgODQwMl1dLCBbJ25zdWJzZXRlcScsIFs4ODQwXV0sIFsnbnN1YnNldGVxcScsIFsxMDk0OSwgODI0XV0sIFsnbnN1Y2MnLCBbODgzM11dLCBbJ25zdWNjZXEnLCBbMTA5MjgsIDgyNF1dLCBbJ25zdXAnLCBbODgzN11dLCBbJ25zdXBFJywgWzEwOTUwLCA4MjRdXSwgWyduc3VwZScsIFs4ODQxXV0sIFsnbnN1cHNldCcsIFs4ODM1LCA4NDAyXV0sIFsnbnN1cHNldGVxJywgWzg4NDFdXSwgWyduc3Vwc2V0ZXFxJywgWzEwOTUwLCA4MjRdXSwgWydudGdsJywgWzg4MjVdXSwgWydOdGlsZGUnLCBbMjA5XV0sIFsnbnRpbGRlJywgWzI0MV1dLCBbJ250bGcnLCBbODgyNF1dLCBbJ250cmlhbmdsZWxlZnQnLCBbODkzOF1dLCBbJ250cmlhbmdsZWxlZnRlcScsIFs4OTQwXV0sIFsnbnRyaWFuZ2xlcmlnaHQnLCBbODkzOV1dLCBbJ250cmlhbmdsZXJpZ2h0ZXEnLCBbODk0MV1dLCBbJ051JywgWzkyNV1dLCBbJ251JywgWzk1N11dLCBbJ251bScsIFszNV1dLCBbJ251bWVybycsIFs4NDcwXV0sIFsnbnVtc3AnLCBbODE5OV1dLCBbJ252YXAnLCBbODc4MSwgODQwMl1dLCBbJ252ZGFzaCcsIFs4ODc2XV0sIFsnbnZEYXNoJywgWzg4NzddXSwgWyduVmRhc2gnLCBbODg3OF1dLCBbJ25WRGFzaCcsIFs4ODc5XV0sIFsnbnZnZScsIFs4ODA1LCA4NDAyXV0sIFsnbnZndCcsIFs2MiwgODQwMl1dLCBbJ252SGFycicsIFsxMDUwMF1dLCBbJ252aW5maW4nLCBbMTA3MThdXSwgWydudmxBcnInLCBbMTA0OThdXSwgWydudmxlJywgWzg4MDQsIDg0MDJdXSwgWydudmx0JywgWzYwLCA4NDAyXV0sIFsnbnZsdHJpZScsIFs4ODg0LCA4NDAyXV0sIFsnbnZyQXJyJywgWzEwNDk5XV0sIFsnbnZydHJpZScsIFs4ODg1LCA4NDAyXV0sIFsnbnZzaW0nLCBbODc2NCwgODQwMl1dLCBbJ253YXJoaycsIFsxMDUzMV1dLCBbJ253YXJyJywgWzg1OThdXSwgWydud0FycicsIFs4NjYyXV0sIFsnbndhcnJvdycsIFs4NTk4XV0sIFsnbnduZWFyJywgWzEwNTM1XV0sIFsnT2FjdXRlJywgWzIxMV1dLCBbJ29hY3V0ZScsIFsyNDNdXSwgWydvYXN0JywgWzg4NTldXSwgWydPY2lyYycsIFsyMTJdXSwgWydvY2lyYycsIFsyNDRdXSwgWydvY2lyJywgWzg4NThdXSwgWydPY3knLCBbMTA1NF1dLCBbJ29jeScsIFsxMDg2XV0sIFsnb2Rhc2gnLCBbODg2MV1dLCBbJ09kYmxhYycsIFszMzZdXSwgWydvZGJsYWMnLCBbMzM3XV0sIFsnb2RpdicsIFsxMDgwOF1dLCBbJ29kb3QnLCBbODg1N11dLCBbJ29kc29sZCcsIFsxMDY4NF1dLCBbJ09FbGlnJywgWzMzOF1dLCBbJ29lbGlnJywgWzMzOV1dLCBbJ29mY2lyJywgWzEwNjg3XV0sIFsnT2ZyJywgWzEyMDA4Ml1dLCBbJ29mcicsIFsxMjAxMDhdXSwgWydvZ29uJywgWzczMV1dLCBbJ09ncmF2ZScsIFsyMTBdXSwgWydvZ3JhdmUnLCBbMjQyXV0sIFsnb2d0JywgWzEwNjg5XV0sIFsnb2hiYXInLCBbMTA2NzddXSwgWydvaG0nLCBbOTM3XV0sIFsnb2ludCcsIFs4NzUwXV0sIFsnb2xhcnInLCBbODYzNF1dLCBbJ29sY2lyJywgWzEwNjg2XV0sIFsnb2xjcm9zcycsIFsxMDY4M11dLCBbJ29saW5lJywgWzgyNTRdXSwgWydvbHQnLCBbMTA2ODhdXSwgWydPbWFjcicsIFszMzJdXSwgWydvbWFjcicsIFszMzNdXSwgWydPbWVnYScsIFs5MzddXSwgWydvbWVnYScsIFs5NjldXSwgWydPbWljcm9uJywgWzkyN11dLCBbJ29taWNyb24nLCBbOTU5XV0sIFsnb21pZCcsIFsxMDY3OF1dLCBbJ29taW51cycsIFs4ODU0XV0sIFsnT29wZicsIFsxMjAxMzRdXSwgWydvb3BmJywgWzEyMDE2MF1dLCBbJ29wYXInLCBbMTA2NzldXSwgWydPcGVuQ3VybHlEb3VibGVRdW90ZScsIFs4MjIwXV0sIFsnT3BlbkN1cmx5UXVvdGUnLCBbODIxNl1dLCBbJ29wZXJwJywgWzEwNjgxXV0sIFsnb3BsdXMnLCBbODg1M11dLCBbJ29yYXJyJywgWzg2MzVdXSwgWydPcicsIFsxMDgzNl1dLCBbJ29yJywgWzg3NDRdXSwgWydvcmQnLCBbMTA4NDVdXSwgWydvcmRlcicsIFs4NTAwXV0sIFsnb3JkZXJvZicsIFs4NTAwXV0sIFsnb3JkZicsIFsxNzBdXSwgWydvcmRtJywgWzE4Nl1dLCBbJ29yaWdvZicsIFs4ODg2XV0sIFsnb3JvcicsIFsxMDgzOF1dLCBbJ29yc2xvcGUnLCBbMTA4MzldXSwgWydvcnYnLCBbMTA4NDNdXSwgWydvUycsIFs5NDE2XV0sIFsnT3NjcicsIFsxMTk5NzhdXSwgWydvc2NyJywgWzg1MDBdXSwgWydPc2xhc2gnLCBbMjE2XV0sIFsnb3NsYXNoJywgWzI0OF1dLCBbJ29zb2wnLCBbODg1Nl1dLCBbJ090aWxkZScsIFsyMTNdXSwgWydvdGlsZGUnLCBbMjQ1XV0sIFsnb3RpbWVzYXMnLCBbMTA4MDZdXSwgWydPdGltZXMnLCBbMTA4MDddXSwgWydvdGltZXMnLCBbODg1NV1dLCBbJ091bWwnLCBbMjE0XV0sIFsnb3VtbCcsIFsyNDZdXSwgWydvdmJhcicsIFs5MDIxXV0sIFsnT3ZlckJhcicsIFs4MjU0XV0sIFsnT3ZlckJyYWNlJywgWzkxODJdXSwgWydPdmVyQnJhY2tldCcsIFs5MTQwXV0sIFsnT3ZlclBhcmVudGhlc2lzJywgWzkxODBdXSwgWydwYXJhJywgWzE4Ml1dLCBbJ3BhcmFsbGVsJywgWzg3NDFdXSwgWydwYXInLCBbODc0MV1dLCBbJ3BhcnNpbScsIFsxMDk5NV1dLCBbJ3BhcnNsJywgWzExMDA1XV0sIFsncGFydCcsIFs4NzA2XV0sIFsnUGFydGlhbEQnLCBbODcwNl1dLCBbJ1BjeScsIFsxMDU1XV0sIFsncGN5JywgWzEwODddXSwgWydwZXJjbnQnLCBbMzddXSwgWydwZXJpb2QnLCBbNDZdXSwgWydwZXJtaWwnLCBbODI0MF1dLCBbJ3BlcnAnLCBbODg2OV1dLCBbJ3BlcnRlbmsnLCBbODI0MV1dLCBbJ1BmcicsIFsxMjAwODNdXSwgWydwZnInLCBbMTIwMTA5XV0sIFsnUGhpJywgWzkzNF1dLCBbJ3BoaScsIFs5NjZdXSwgWydwaGl2JywgWzk4MV1dLCBbJ3BobW1hdCcsIFs4NDk5XV0sIFsncGhvbmUnLCBbOTc0Ml1dLCBbJ1BpJywgWzkyOF1dLCBbJ3BpJywgWzk2MF1dLCBbJ3BpdGNoZm9yaycsIFs4OTE2XV0sIFsncGl2JywgWzk4Ml1dLCBbJ3BsYW5jaycsIFs4NDYzXV0sIFsncGxhbmNraCcsIFs4NDYyXV0sIFsncGxhbmt2JywgWzg0NjNdXSwgWydwbHVzYWNpcicsIFsxMDc4N11dLCBbJ3BsdXNiJywgWzg4NjJdXSwgWydwbHVzY2lyJywgWzEwNzg2XV0sIFsncGx1cycsIFs0M11dLCBbJ3BsdXNkbycsIFs4NzI0XV0sIFsncGx1c2R1JywgWzEwNzg5XV0sIFsncGx1c2UnLCBbMTA4NjZdXSwgWydQbHVzTWludXMnLCBbMTc3XV0sIFsncGx1c21uJywgWzE3N11dLCBbJ3BsdXNzaW0nLCBbMTA3OTBdXSwgWydwbHVzdHdvJywgWzEwNzkxXV0sIFsncG0nLCBbMTc3XV0sIFsnUG9pbmNhcmVwbGFuZScsIFs4NDYwXV0sIFsncG9pbnRpbnQnLCBbMTA3NzNdXSwgWydwb3BmJywgWzEyMDE2MV1dLCBbJ1BvcGYnLCBbODQ3M11dLCBbJ3BvdW5kJywgWzE2M11dLCBbJ3ByYXAnLCBbMTA5MzVdXSwgWydQcicsIFsxMDkzOV1dLCBbJ3ByJywgWzg4MjZdXSwgWydwcmN1ZScsIFs4ODI4XV0sIFsncHJlY2FwcHJveCcsIFsxMDkzNV1dLCBbJ3ByZWMnLCBbODgyNl1dLCBbJ3ByZWNjdXJseWVxJywgWzg4MjhdXSwgWydQcmVjZWRlcycsIFs4ODI2XV0sIFsnUHJlY2VkZXNFcXVhbCcsIFsxMDkyN11dLCBbJ1ByZWNlZGVzU2xhbnRFcXVhbCcsIFs4ODI4XV0sIFsnUHJlY2VkZXNUaWxkZScsIFs4ODMwXV0sIFsncHJlY2VxJywgWzEwOTI3XV0sIFsncHJlY25hcHByb3gnLCBbMTA5MzddXSwgWydwcmVjbmVxcScsIFsxMDkzM11dLCBbJ3ByZWNuc2ltJywgWzg5MzZdXSwgWydwcmUnLCBbMTA5MjddXSwgWydwckUnLCBbMTA5MzFdXSwgWydwcmVjc2ltJywgWzg4MzBdXSwgWydwcmltZScsIFs4MjQyXV0sIFsnUHJpbWUnLCBbODI0M11dLCBbJ3ByaW1lcycsIFs4NDczXV0sIFsncHJuYXAnLCBbMTA5MzddXSwgWydwcm5FJywgWzEwOTMzXV0sIFsncHJuc2ltJywgWzg5MzZdXSwgWydwcm9kJywgWzg3MTldXSwgWydQcm9kdWN0JywgWzg3MTldXSwgWydwcm9mYWxhcicsIFs5MDA2XV0sIFsncHJvZmxpbmUnLCBbODk3OF1dLCBbJ3Byb2ZzdXJmJywgWzg5NzldXSwgWydwcm9wJywgWzg3MzNdXSwgWydQcm9wb3J0aW9uYWwnLCBbODczM11dLCBbJ1Byb3BvcnRpb24nLCBbODc1OV1dLCBbJ3Byb3B0bycsIFs4NzMzXV0sIFsncHJzaW0nLCBbODgzMF1dLCBbJ3BydXJlbCcsIFs4ODgwXV0sIFsnUHNjcicsIFsxMTk5NzldXSwgWydwc2NyJywgWzEyMDAwNV1dLCBbJ1BzaScsIFs5MzZdXSwgWydwc2knLCBbOTY4XV0sIFsncHVuY3NwJywgWzgyMDBdXSwgWydRZnInLCBbMTIwMDg0XV0sIFsncWZyJywgWzEyMDExMF1dLCBbJ3FpbnQnLCBbMTA3NjRdXSwgWydxb3BmJywgWzEyMDE2Ml1dLCBbJ1FvcGYnLCBbODQ3NF1dLCBbJ3FwcmltZScsIFs4Mjc5XV0sIFsnUXNjcicsIFsxMTk5ODBdXSwgWydxc2NyJywgWzEyMDAwNl1dLCBbJ3F1YXRlcm5pb25zJywgWzg0NjFdXSwgWydxdWF0aW50JywgWzEwNzc0XV0sIFsncXVlc3QnLCBbNjNdXSwgWydxdWVzdGVxJywgWzg3OTldXSwgWydxdW90JywgWzM0XV0sIFsnUVVPVCcsIFszNF1dLCBbJ3JBYXJyJywgWzg2NjddXSwgWydyYWNlJywgWzg3NjUsIDgxN11dLCBbJ1JhY3V0ZScsIFszNDBdXSwgWydyYWN1dGUnLCBbMzQxXV0sIFsncmFkaWMnLCBbODczMF1dLCBbJ3JhZW1wdHl2JywgWzEwNjc1XV0sIFsncmFuZycsIFsxMDIxN11dLCBbJ1JhbmcnLCBbMTAyMTldXSwgWydyYW5nZCcsIFsxMDY0Ml1dLCBbJ3JhbmdlJywgWzEwNjYxXV0sIFsncmFuZ2xlJywgWzEwMjE3XV0sIFsncmFxdW8nLCBbMTg3XV0sIFsncmFycmFwJywgWzEwNjEzXV0sIFsncmFycmInLCBbODY3N11dLCBbJ3JhcnJiZnMnLCBbMTA1MjhdXSwgWydyYXJyYycsIFsxMDU0N11dLCBbJ3JhcnInLCBbODU5NF1dLCBbJ1JhcnInLCBbODYwOF1dLCBbJ3JBcnInLCBbODY1OF1dLCBbJ3JhcnJmcycsIFsxMDUyNl1dLCBbJ3JhcnJoaycsIFs4NjE4XV0sIFsncmFycmxwJywgWzg2MjBdXSwgWydyYXJycGwnLCBbMTA1NjVdXSwgWydyYXJyc2ltJywgWzEwNjEyXV0sIFsnUmFycnRsJywgWzEwNTE4XV0sIFsncmFycnRsJywgWzg2MTFdXSwgWydyYXJydycsIFs4NjA1XV0sIFsncmF0YWlsJywgWzEwNTIyXV0sIFsnckF0YWlsJywgWzEwNTI0XV0sIFsncmF0aW8nLCBbODc1OF1dLCBbJ3JhdGlvbmFscycsIFs4NDc0XV0sIFsncmJhcnInLCBbMTA1MDldXSwgWydyQmFycicsIFsxMDUxMV1dLCBbJ1JCYXJyJywgWzEwNTEyXV0sIFsncmJicmsnLCBbMTAwOTldXSwgWydyYnJhY2UnLCBbMTI1XV0sIFsncmJyYWNrJywgWzkzXV0sIFsncmJya2UnLCBbMTA2MzZdXSwgWydyYnJrc2xkJywgWzEwNjM4XV0sIFsncmJya3NsdScsIFsxMDY0MF1dLCBbJ1JjYXJvbicsIFszNDRdXSwgWydyY2Fyb24nLCBbMzQ1XV0sIFsnUmNlZGlsJywgWzM0Ml1dLCBbJ3JjZWRpbCcsIFszNDNdXSwgWydyY2VpbCcsIFs4OTY5XV0sIFsncmN1YicsIFsxMjVdXSwgWydSY3knLCBbMTA1Nl1dLCBbJ3JjeScsIFsxMDg4XV0sIFsncmRjYScsIFsxMDU1MV1dLCBbJ3JkbGRoYXInLCBbMTA2MDFdXSwgWydyZHF1bycsIFs4MjIxXV0sIFsncmRxdW9yJywgWzgyMjFdXSwgWydDbG9zZUN1cmx5RG91YmxlUXVvdGUnLCBbODIyMV1dLCBbJ3Jkc2gnLCBbODYyN11dLCBbJ3JlYWwnLCBbODQ3Nl1dLCBbJ3JlYWxpbmUnLCBbODQ3NV1dLCBbJ3JlYWxwYXJ0JywgWzg0NzZdXSwgWydyZWFscycsIFs4NDc3XV0sIFsnUmUnLCBbODQ3Nl1dLCBbJ3JlY3QnLCBbOTY0NV1dLCBbJ3JlZycsIFsxNzRdXSwgWydSRUcnLCBbMTc0XV0sIFsnUmV2ZXJzZUVsZW1lbnQnLCBbODcxNV1dLCBbJ1JldmVyc2VFcXVpbGlicml1bScsIFs4NjUxXV0sIFsnUmV2ZXJzZVVwRXF1aWxpYnJpdW0nLCBbMTA2MDddXSwgWydyZmlzaHQnLCBbMTA2MjFdXSwgWydyZmxvb3InLCBbODk3MV1dLCBbJ3JmcicsIFsxMjAxMTFdXSwgWydSZnInLCBbODQ3Nl1dLCBbJ3JIYXInLCBbMTA1OTZdXSwgWydyaGFyZCcsIFs4NjQxXV0sIFsncmhhcnUnLCBbODY0MF1dLCBbJ3JoYXJ1bCcsIFsxMDYwNF1dLCBbJ1JobycsIFs5MjldXSwgWydyaG8nLCBbOTYxXV0sIFsncmhvdicsIFsxMDA5XV0sIFsnUmlnaHRBbmdsZUJyYWNrZXQnLCBbMTAyMTddXSwgWydSaWdodEFycm93QmFyJywgWzg2NzddXSwgWydyaWdodGFycm93JywgWzg1OTRdXSwgWydSaWdodEFycm93JywgWzg1OTRdXSwgWydSaWdodGFycm93JywgWzg2NThdXSwgWydSaWdodEFycm93TGVmdEFycm93JywgWzg2NDRdXSwgWydyaWdodGFycm93dGFpbCcsIFs4NjExXV0sIFsnUmlnaHRDZWlsaW5nJywgWzg5NjldXSwgWydSaWdodERvdWJsZUJyYWNrZXQnLCBbMTAyMTVdXSwgWydSaWdodERvd25UZWVWZWN0b3InLCBbMTA1ODldXSwgWydSaWdodERvd25WZWN0b3JCYXInLCBbMTA1ODFdXSwgWydSaWdodERvd25WZWN0b3InLCBbODY0Ml1dLCBbJ1JpZ2h0Rmxvb3InLCBbODk3MV1dLCBbJ3JpZ2h0aGFycG9vbmRvd24nLCBbODY0MV1dLCBbJ3JpZ2h0aGFycG9vbnVwJywgWzg2NDBdXSwgWydyaWdodGxlZnRhcnJvd3MnLCBbODY0NF1dLCBbJ3JpZ2h0bGVmdGhhcnBvb25zJywgWzg2NTJdXSwgWydyaWdodHJpZ2h0YXJyb3dzJywgWzg2NDldXSwgWydyaWdodHNxdWlnYXJyb3cnLCBbODYwNV1dLCBbJ1JpZ2h0VGVlQXJyb3cnLCBbODYxNF1dLCBbJ1JpZ2h0VGVlJywgWzg4NjZdXSwgWydSaWdodFRlZVZlY3RvcicsIFsxMDU4N11dLCBbJ3JpZ2h0dGhyZWV0aW1lcycsIFs4OTA4XV0sIFsnUmlnaHRUcmlhbmdsZUJhcicsIFsxMDcwNF1dLCBbJ1JpZ2h0VHJpYW5nbGUnLCBbODg4M11dLCBbJ1JpZ2h0VHJpYW5nbGVFcXVhbCcsIFs4ODg1XV0sIFsnUmlnaHRVcERvd25WZWN0b3InLCBbMTA1NzVdXSwgWydSaWdodFVwVGVlVmVjdG9yJywgWzEwNTg4XV0sIFsnUmlnaHRVcFZlY3RvckJhcicsIFsxMDU4MF1dLCBbJ1JpZ2h0VXBWZWN0b3InLCBbODYzOF1dLCBbJ1JpZ2h0VmVjdG9yQmFyJywgWzEwNTc5XV0sIFsnUmlnaHRWZWN0b3InLCBbODY0MF1dLCBbJ3JpbmcnLCBbNzMwXV0sIFsncmlzaW5nZG90c2VxJywgWzg3ODddXSwgWydybGFycicsIFs4NjQ0XV0sIFsncmxoYXInLCBbODY1Ml1dLCBbJ3JsbScsIFs4MjA3XV0sIFsncm1vdXN0YWNoZScsIFs5MTM3XV0sIFsncm1vdXN0JywgWzkxMzddXSwgWydybm1pZCcsIFsxMDk5MF1dLCBbJ3JvYW5nJywgWzEwMjIxXV0sIFsncm9hcnInLCBbODcwMl1dLCBbJ3JvYnJrJywgWzEwMjE1XV0sIFsncm9wYXInLCBbMTA2MzBdXSwgWydyb3BmJywgWzEyMDE2M11dLCBbJ1JvcGYnLCBbODQ3N11dLCBbJ3JvcGx1cycsIFsxMDc5OF1dLCBbJ3JvdGltZXMnLCBbMTA4MDVdXSwgWydSb3VuZEltcGxpZXMnLCBbMTA2MDhdXSwgWydycGFyJywgWzQxXV0sIFsncnBhcmd0JywgWzEwNjQ0XV0sIFsncnBwb2xpbnQnLCBbMTA3NzBdXSwgWydycmFycicsIFs4NjQ5XV0sIFsnUnJpZ2h0YXJyb3cnLCBbODY2N11dLCBbJ3JzYXF1bycsIFs4MjUwXV0sIFsncnNjcicsIFsxMjAwMDddXSwgWydSc2NyJywgWzg0NzVdXSwgWydyc2gnLCBbODYyNV1dLCBbJ1JzaCcsIFs4NjI1XV0sIFsncnNxYicsIFs5M11dLCBbJ3JzcXVvJywgWzgyMTddXSwgWydyc3F1b3InLCBbODIxN11dLCBbJ0Nsb3NlQ3VybHlRdW90ZScsIFs4MjE3XV0sIFsncnRocmVlJywgWzg5MDhdXSwgWydydGltZXMnLCBbODkwNl1dLCBbJ3J0cmknLCBbOTY1N11dLCBbJ3J0cmllJywgWzg4ODVdXSwgWydydHJpZicsIFs5NjU2XV0sIFsncnRyaWx0cmknLCBbMTA3MDJdXSwgWydSdWxlRGVsYXllZCcsIFsxMDc0MF1dLCBbJ3J1bHVoYXInLCBbMTA2MDBdXSwgWydyeCcsIFs4NDc4XV0sIFsnU2FjdXRlJywgWzM0Nl1dLCBbJ3NhY3V0ZScsIFszNDddXSwgWydzYnF1bycsIFs4MjE4XV0sIFsnc2NhcCcsIFsxMDkzNl1dLCBbJ1NjYXJvbicsIFszNTJdXSwgWydzY2Fyb24nLCBbMzUzXV0sIFsnU2MnLCBbMTA5NDBdXSwgWydzYycsIFs4ODI3XV0sIFsnc2NjdWUnLCBbODgyOV1dLCBbJ3NjZScsIFsxMDkyOF1dLCBbJ3NjRScsIFsxMDkzMl1dLCBbJ1NjZWRpbCcsIFszNTBdXSwgWydzY2VkaWwnLCBbMzUxXV0sIFsnU2NpcmMnLCBbMzQ4XV0sIFsnc2NpcmMnLCBbMzQ5XV0sIFsnc2NuYXAnLCBbMTA5MzhdXSwgWydzY25FJywgWzEwOTM0XV0sIFsnc2Nuc2ltJywgWzg5MzddXSwgWydzY3BvbGludCcsIFsxMDc3MV1dLCBbJ3Njc2ltJywgWzg4MzFdXSwgWydTY3knLCBbMTA1N11dLCBbJ3NjeScsIFsxMDg5XV0sIFsnc2RvdGInLCBbODg2NV1dLCBbJ3Nkb3QnLCBbODkwMV1dLCBbJ3Nkb3RlJywgWzEwODU0XV0sIFsnc2VhcmhrJywgWzEwNTMzXV0sIFsnc2VhcnInLCBbODYwMF1dLCBbJ3NlQXJyJywgWzg2NjRdXSwgWydzZWFycm93JywgWzg2MDBdXSwgWydzZWN0JywgWzE2N11dLCBbJ3NlbWknLCBbNTldXSwgWydzZXN3YXInLCBbMTA1MzddXSwgWydzZXRtaW51cycsIFs4NzI2XV0sIFsnc2V0bW4nLCBbODcyNl1dLCBbJ3NleHQnLCBbMTAwMzhdXSwgWydTZnInLCBbMTIwMDg2XV0sIFsnc2ZyJywgWzEyMDExMl1dLCBbJ3Nmcm93bicsIFs4OTk0XV0sIFsnc2hhcnAnLCBbOTgzOV1dLCBbJ1NIQ0hjeScsIFsxMDY1XV0sIFsnc2hjaGN5JywgWzEwOTddXSwgWydTSGN5JywgWzEwNjRdXSwgWydzaGN5JywgWzEwOTZdXSwgWydTaG9ydERvd25BcnJvdycsIFs4NTk1XV0sIFsnU2hvcnRMZWZ0QXJyb3cnLCBbODU5Ml1dLCBbJ3Nob3J0bWlkJywgWzg3MzldXSwgWydzaG9ydHBhcmFsbGVsJywgWzg3NDFdXSwgWydTaG9ydFJpZ2h0QXJyb3cnLCBbODU5NF1dLCBbJ1Nob3J0VXBBcnJvdycsIFs4NTkzXV0sIFsnc2h5JywgWzE3M11dLCBbJ1NpZ21hJywgWzkzMV1dLCBbJ3NpZ21hJywgWzk2M11dLCBbJ3NpZ21hZicsIFs5NjJdXSwgWydzaWdtYXYnLCBbOTYyXV0sIFsnc2ltJywgWzg3NjRdXSwgWydzaW1kb3QnLCBbMTA4NThdXSwgWydzaW1lJywgWzg3NzFdXSwgWydzaW1lcScsIFs4NzcxXV0sIFsnc2ltZycsIFsxMDkxMF1dLCBbJ3NpbWdFJywgWzEwOTEyXV0sIFsnc2ltbCcsIFsxMDkwOV1dLCBbJ3NpbWxFJywgWzEwOTExXV0sIFsnc2ltbmUnLCBbODc3NF1dLCBbJ3NpbXBsdXMnLCBbMTA3ODhdXSwgWydzaW1yYXJyJywgWzEwNjEwXV0sIFsnc2xhcnInLCBbODU5Ml1dLCBbJ1NtYWxsQ2lyY2xlJywgWzg3MjhdXSwgWydzbWFsbHNldG1pbnVzJywgWzg3MjZdXSwgWydzbWFzaHAnLCBbMTA4MDNdXSwgWydzbWVwYXJzbCcsIFsxMDcyNF1dLCBbJ3NtaWQnLCBbODczOV1dLCBbJ3NtaWxlJywgWzg5OTVdXSwgWydzbXQnLCBbMTA5MjJdXSwgWydzbXRlJywgWzEwOTI0XV0sIFsnc210ZXMnLCBbMTA5MjQsIDY1MDI0XV0sIFsnU09GVGN5JywgWzEwNjhdXSwgWydzb2Z0Y3knLCBbMTEwMF1dLCBbJ3NvbGJhcicsIFs5MDIzXV0sIFsnc29sYicsIFsxMDY5Ml1dLCBbJ3NvbCcsIFs0N11dLCBbJ1NvcGYnLCBbMTIwMTM4XV0sIFsnc29wZicsIFsxMjAxNjRdXSwgWydzcGFkZXMnLCBbOTgyNF1dLCBbJ3NwYWRlc3VpdCcsIFs5ODI0XV0sIFsnc3BhcicsIFs4NzQxXV0sIFsnc3FjYXAnLCBbODg1MV1dLCBbJ3NxY2FwcycsIFs4ODUxLCA2NTAyNF1dLCBbJ3NxY3VwJywgWzg4NTJdXSwgWydzcWN1cHMnLCBbODg1MiwgNjUwMjRdXSwgWydTcXJ0JywgWzg3MzBdXSwgWydzcXN1YicsIFs4ODQ3XV0sIFsnc3FzdWJlJywgWzg4NDldXSwgWydzcXN1YnNldCcsIFs4ODQ3XV0sIFsnc3FzdWJzZXRlcScsIFs4ODQ5XV0sIFsnc3FzdXAnLCBbODg0OF1dLCBbJ3Nxc3VwZScsIFs4ODUwXV0sIFsnc3FzdXBzZXQnLCBbODg0OF1dLCBbJ3Nxc3Vwc2V0ZXEnLCBbODg1MF1dLCBbJ3NxdWFyZScsIFs5NjMzXV0sIFsnU3F1YXJlJywgWzk2MzNdXSwgWydTcXVhcmVJbnRlcnNlY3Rpb24nLCBbODg1MV1dLCBbJ1NxdWFyZVN1YnNldCcsIFs4ODQ3XV0sIFsnU3F1YXJlU3Vic2V0RXF1YWwnLCBbODg0OV1dLCBbJ1NxdWFyZVN1cGVyc2V0JywgWzg4NDhdXSwgWydTcXVhcmVTdXBlcnNldEVxdWFsJywgWzg4NTBdXSwgWydTcXVhcmVVbmlvbicsIFs4ODUyXV0sIFsnc3F1YXJmJywgWzk2NDJdXSwgWydzcXUnLCBbOTYzM11dLCBbJ3NxdWYnLCBbOTY0Ml1dLCBbJ3NyYXJyJywgWzg1OTRdXSwgWydTc2NyJywgWzExOTk4Ml1dLCBbJ3NzY3InLCBbMTIwMDA4XV0sIFsnc3NldG1uJywgWzg3MjZdXSwgWydzc21pbGUnLCBbODk5NV1dLCBbJ3NzdGFyZicsIFs4OTAyXV0sIFsnU3RhcicsIFs4OTAyXV0sIFsnc3RhcicsIFs5NzM0XV0sIFsnc3RhcmYnLCBbOTczM11dLCBbJ3N0cmFpZ2h0ZXBzaWxvbicsIFsxMDEzXV0sIFsnc3RyYWlnaHRwaGknLCBbOTgxXV0sIFsnc3RybnMnLCBbMTc1XV0sIFsnc3ViJywgWzg4MzRdXSwgWydTdWInLCBbODkxMl1dLCBbJ3N1YmRvdCcsIFsxMDk0MV1dLCBbJ3N1YkUnLCBbMTA5NDldXSwgWydzdWJlJywgWzg4MzhdXSwgWydzdWJlZG90JywgWzEwOTQ3XV0sIFsnc3VibXVsdCcsIFsxMDk0NV1dLCBbJ3N1Ym5FJywgWzEwOTU1XV0sIFsnc3VibmUnLCBbODg0Ml1dLCBbJ3N1YnBsdXMnLCBbMTA5NDNdXSwgWydzdWJyYXJyJywgWzEwNjE3XV0sIFsnc3Vic2V0JywgWzg4MzRdXSwgWydTdWJzZXQnLCBbODkxMl1dLCBbJ3N1YnNldGVxJywgWzg4MzhdXSwgWydzdWJzZXRlcXEnLCBbMTA5NDldXSwgWydTdWJzZXRFcXVhbCcsIFs4ODM4XV0sIFsnc3Vic2V0bmVxJywgWzg4NDJdXSwgWydzdWJzZXRuZXFxJywgWzEwOTU1XV0sIFsnc3Vic2ltJywgWzEwOTUxXV0sIFsnc3Vic3ViJywgWzEwOTY1XV0sIFsnc3Vic3VwJywgWzEwOTYzXV0sIFsnc3VjY2FwcHJveCcsIFsxMDkzNl1dLCBbJ3N1Y2MnLCBbODgyN11dLCBbJ3N1Y2NjdXJseWVxJywgWzg4MjldXSwgWydTdWNjZWVkcycsIFs4ODI3XV0sIFsnU3VjY2VlZHNFcXVhbCcsIFsxMDkyOF1dLCBbJ1N1Y2NlZWRzU2xhbnRFcXVhbCcsIFs4ODI5XV0sIFsnU3VjY2VlZHNUaWxkZScsIFs4ODMxXV0sIFsnc3VjY2VxJywgWzEwOTI4XV0sIFsnc3VjY25hcHByb3gnLCBbMTA5MzhdXSwgWydzdWNjbmVxcScsIFsxMDkzNF1dLCBbJ3N1Y2Nuc2ltJywgWzg5MzddXSwgWydzdWNjc2ltJywgWzg4MzFdXSwgWydTdWNoVGhhdCcsIFs4NzE1XV0sIFsnc3VtJywgWzg3MjFdXSwgWydTdW0nLCBbODcyMV1dLCBbJ3N1bmcnLCBbOTgzNF1dLCBbJ3N1cDEnLCBbMTg1XV0sIFsnc3VwMicsIFsxNzhdXSwgWydzdXAzJywgWzE3OV1dLCBbJ3N1cCcsIFs4ODM1XV0sIFsnU3VwJywgWzg5MTNdXSwgWydzdXBkb3QnLCBbMTA5NDJdXSwgWydzdXBkc3ViJywgWzEwOTY4XV0sIFsnc3VwRScsIFsxMDk1MF1dLCBbJ3N1cGUnLCBbODgzOV1dLCBbJ3N1cGVkb3QnLCBbMTA5NDhdXSwgWydTdXBlcnNldCcsIFs4ODM1XV0sIFsnU3VwZXJzZXRFcXVhbCcsIFs4ODM5XV0sIFsnc3VwaHNvbCcsIFsxMDE4NV1dLCBbJ3N1cGhzdWInLCBbMTA5NjddXSwgWydzdXBsYXJyJywgWzEwNjE5XV0sIFsnc3VwbXVsdCcsIFsxMDk0Nl1dLCBbJ3N1cG5FJywgWzEwOTU2XV0sIFsnc3VwbmUnLCBbODg0M11dLCBbJ3N1cHBsdXMnLCBbMTA5NDRdXSwgWydzdXBzZXQnLCBbODgzNV1dLCBbJ1N1cHNldCcsIFs4OTEzXV0sIFsnc3Vwc2V0ZXEnLCBbODgzOV1dLCBbJ3N1cHNldGVxcScsIFsxMDk1MF1dLCBbJ3N1cHNldG5lcScsIFs4ODQzXV0sIFsnc3Vwc2V0bmVxcScsIFsxMDk1Nl1dLCBbJ3N1cHNpbScsIFsxMDk1Ml1dLCBbJ3N1cHN1YicsIFsxMDk2NF1dLCBbJ3N1cHN1cCcsIFsxMDk2Nl1dLCBbJ3N3YXJoaycsIFsxMDUzNF1dLCBbJ3N3YXJyJywgWzg2MDFdXSwgWydzd0FycicsIFs4NjY1XV0sIFsnc3dhcnJvdycsIFs4NjAxXV0sIFsnc3dud2FyJywgWzEwNTM4XV0sIFsnc3psaWcnLCBbMjIzXV0sIFsnVGFiJywgWzldXSwgWyd0YXJnZXQnLCBbODk4Ml1dLCBbJ1RhdScsIFs5MzJdXSwgWyd0YXUnLCBbOTY0XV0sIFsndGJyaycsIFs5MTQwXV0sIFsnVGNhcm9uJywgWzM1Nl1dLCBbJ3RjYXJvbicsIFszNTddXSwgWydUY2VkaWwnLCBbMzU0XV0sIFsndGNlZGlsJywgWzM1NV1dLCBbJ1RjeScsIFsxMDU4XV0sIFsndGN5JywgWzEwOTBdXSwgWyd0ZG90JywgWzg0MTFdXSwgWyd0ZWxyZWMnLCBbODk4MV1dLCBbJ1RmcicsIFsxMjAwODddXSwgWyd0ZnInLCBbMTIwMTEzXV0sIFsndGhlcmU0JywgWzg3NTZdXSwgWyd0aGVyZWZvcmUnLCBbODc1Nl1dLCBbJ1RoZXJlZm9yZScsIFs4NzU2XV0sIFsnVGhldGEnLCBbOTIwXV0sIFsndGhldGEnLCBbOTUyXV0sIFsndGhldGFzeW0nLCBbOTc3XV0sIFsndGhldGF2JywgWzk3N11dLCBbJ3RoaWNrYXBwcm94JywgWzg3NzZdXSwgWyd0aGlja3NpbScsIFs4NzY0XV0sIFsnVGhpY2tTcGFjZScsIFs4Mjg3LCA4MjAyXV0sIFsnVGhpblNwYWNlJywgWzgyMDFdXSwgWyd0aGluc3AnLCBbODIwMV1dLCBbJ3Roa2FwJywgWzg3NzZdXSwgWyd0aGtzaW0nLCBbODc2NF1dLCBbJ1RIT1JOJywgWzIyMl1dLCBbJ3Rob3JuJywgWzI1NF1dLCBbJ3RpbGRlJywgWzczMl1dLCBbJ1RpbGRlJywgWzg3NjRdXSwgWydUaWxkZUVxdWFsJywgWzg3NzFdXSwgWydUaWxkZUZ1bGxFcXVhbCcsIFs4NzczXV0sIFsnVGlsZGVUaWxkZScsIFs4Nzc2XV0sIFsndGltZXNiYXInLCBbMTA4MDFdXSwgWyd0aW1lc2InLCBbODg2NF1dLCBbJ3RpbWVzJywgWzIxNV1dLCBbJ3RpbWVzZCcsIFsxMDgwMF1dLCBbJ3RpbnQnLCBbODc0OV1dLCBbJ3RvZWEnLCBbMTA1MzZdXSwgWyd0b3Bib3QnLCBbOTAxNF1dLCBbJ3RvcGNpcicsIFsxMDk5M11dLCBbJ3RvcCcsIFs4ODY4XV0sIFsnVG9wZicsIFsxMjAxMzldXSwgWyd0b3BmJywgWzEyMDE2NV1dLCBbJ3RvcGZvcmsnLCBbMTA5NzBdXSwgWyd0b3NhJywgWzEwNTM3XV0sIFsndHByaW1lJywgWzgyNDRdXSwgWyd0cmFkZScsIFs4NDgyXV0sIFsnVFJBREUnLCBbODQ4Ml1dLCBbJ3RyaWFuZ2xlJywgWzk2NTNdXSwgWyd0cmlhbmdsZWRvd24nLCBbOTY2M11dLCBbJ3RyaWFuZ2xlbGVmdCcsIFs5NjY3XV0sIFsndHJpYW5nbGVsZWZ0ZXEnLCBbODg4NF1dLCBbJ3RyaWFuZ2xlcScsIFs4Nzk2XV0sIFsndHJpYW5nbGVyaWdodCcsIFs5NjU3XV0sIFsndHJpYW5nbGVyaWdodGVxJywgWzg4ODVdXSwgWyd0cmlkb3QnLCBbOTcwOF1dLCBbJ3RyaWUnLCBbODc5Nl1dLCBbJ3RyaW1pbnVzJywgWzEwODEwXV0sIFsnVHJpcGxlRG90JywgWzg0MTFdXSwgWyd0cmlwbHVzJywgWzEwODA5XV0sIFsndHJpc2InLCBbMTA3MDFdXSwgWyd0cml0aW1lJywgWzEwODExXV0sIFsndHJwZXppdW0nLCBbOTE4Nl1dLCBbJ1RzY3InLCBbMTE5OTgzXV0sIFsndHNjcicsIFsxMjAwMDldXSwgWydUU2N5JywgWzEwNjJdXSwgWyd0c2N5JywgWzEwOTRdXSwgWydUU0hjeScsIFsxMDM1XV0sIFsndHNoY3knLCBbMTExNV1dLCBbJ1RzdHJvaycsIFszNThdXSwgWyd0c3Ryb2snLCBbMzU5XV0sIFsndHdpeHQnLCBbODgxMl1dLCBbJ3R3b2hlYWRsZWZ0YXJyb3cnLCBbODYwNl1dLCBbJ3R3b2hlYWRyaWdodGFycm93JywgWzg2MDhdXSwgWydVYWN1dGUnLCBbMjE4XV0sIFsndWFjdXRlJywgWzI1MF1dLCBbJ3VhcnInLCBbODU5M11dLCBbJ1VhcnInLCBbODYwN11dLCBbJ3VBcnInLCBbODY1N11dLCBbJ1VhcnJvY2lyJywgWzEwNTY5XV0sIFsnVWJyY3knLCBbMTAzOF1dLCBbJ3VicmN5JywgWzExMThdXSwgWydVYnJldmUnLCBbMzY0XV0sIFsndWJyZXZlJywgWzM2NV1dLCBbJ1VjaXJjJywgWzIxOV1dLCBbJ3VjaXJjJywgWzI1MV1dLCBbJ1VjeScsIFsxMDU5XV0sIFsndWN5JywgWzEwOTFdXSwgWyd1ZGFycicsIFs4NjQ1XV0sIFsnVWRibGFjJywgWzM2OF1dLCBbJ3VkYmxhYycsIFszNjldXSwgWyd1ZGhhcicsIFsxMDYwNl1dLCBbJ3VmaXNodCcsIFsxMDYyMl1dLCBbJ1VmcicsIFsxMjAwODhdXSwgWyd1ZnInLCBbMTIwMTE0XV0sIFsnVWdyYXZlJywgWzIxN11dLCBbJ3VncmF2ZScsIFsyNDldXSwgWyd1SGFyJywgWzEwNTk1XV0sIFsndWhhcmwnLCBbODYzOV1dLCBbJ3VoYXJyJywgWzg2MzhdXSwgWyd1aGJsaycsIFs5NjAwXV0sIFsndWxjb3JuJywgWzg5ODhdXSwgWyd1bGNvcm5lcicsIFs4OTg4XV0sIFsndWxjcm9wJywgWzg5NzVdXSwgWyd1bHRyaScsIFs5NzIwXV0sIFsnVW1hY3InLCBbMzYyXV0sIFsndW1hY3InLCBbMzYzXV0sIFsndW1sJywgWzE2OF1dLCBbJ1VuZGVyQmFyJywgWzk1XV0sIFsnVW5kZXJCcmFjZScsIFs5MTgzXV0sIFsnVW5kZXJCcmFja2V0JywgWzkxNDFdXSwgWydVbmRlclBhcmVudGhlc2lzJywgWzkxODFdXSwgWydVbmlvbicsIFs4ODk5XV0sIFsnVW5pb25QbHVzJywgWzg4NDZdXSwgWydVb2dvbicsIFszNzBdXSwgWyd1b2dvbicsIFszNzFdXSwgWydVb3BmJywgWzEyMDE0MF1dLCBbJ3VvcGYnLCBbMTIwMTY2XV0sIFsnVXBBcnJvd0JhcicsIFsxMDUxNF1dLCBbJ3VwYXJyb3cnLCBbODU5M11dLCBbJ1VwQXJyb3cnLCBbODU5M11dLCBbJ1VwYXJyb3cnLCBbODY1N11dLCBbJ1VwQXJyb3dEb3duQXJyb3cnLCBbODY0NV1dLCBbJ3VwZG93bmFycm93JywgWzg1OTddXSwgWydVcERvd25BcnJvdycsIFs4NTk3XV0sIFsnVXBkb3duYXJyb3cnLCBbODY2MV1dLCBbJ1VwRXF1aWxpYnJpdW0nLCBbMTA2MDZdXSwgWyd1cGhhcnBvb25sZWZ0JywgWzg2MzldXSwgWyd1cGhhcnBvb25yaWdodCcsIFs4NjM4XV0sIFsndXBsdXMnLCBbODg0Nl1dLCBbJ1VwcGVyTGVmdEFycm93JywgWzg1OThdXSwgWydVcHBlclJpZ2h0QXJyb3cnLCBbODU5OV1dLCBbJ3Vwc2knLCBbOTY1XV0sIFsnVXBzaScsIFs5NzhdXSwgWyd1cHNpaCcsIFs5NzhdXSwgWydVcHNpbG9uJywgWzkzM11dLCBbJ3Vwc2lsb24nLCBbOTY1XV0sIFsnVXBUZWVBcnJvdycsIFs4NjEzXV0sIFsnVXBUZWUnLCBbODg2OV1dLCBbJ3VwdXBhcnJvd3MnLCBbODY0OF1dLCBbJ3VyY29ybicsIFs4OTg5XV0sIFsndXJjb3JuZXInLCBbODk4OV1dLCBbJ3VyY3JvcCcsIFs4OTc0XV0sIFsnVXJpbmcnLCBbMzY2XV0sIFsndXJpbmcnLCBbMzY3XV0sIFsndXJ0cmknLCBbOTcyMV1dLCBbJ1VzY3InLCBbMTE5OTg0XV0sIFsndXNjcicsIFsxMjAwMTBdXSwgWyd1dGRvdCcsIFs4OTQ0XV0sIFsnVXRpbGRlJywgWzM2MF1dLCBbJ3V0aWxkZScsIFszNjFdXSwgWyd1dHJpJywgWzk2NTNdXSwgWyd1dHJpZicsIFs5NjUyXV0sIFsndXVhcnInLCBbODY0OF1dLCBbJ1V1bWwnLCBbMjIwXV0sIFsndXVtbCcsIFsyNTJdXSwgWyd1d2FuZ2xlJywgWzEwNjYzXV0sIFsndmFuZ3J0JywgWzEwNjUyXV0sIFsndmFyZXBzaWxvbicsIFsxMDEzXV0sIFsndmFya2FwcGEnLCBbMTAwOF1dLCBbJ3Zhcm5vdGhpbmcnLCBbODcwOV1dLCBbJ3ZhcnBoaScsIFs5ODFdXSwgWyd2YXJwaScsIFs5ODJdXSwgWyd2YXJwcm9wdG8nLCBbODczM11dLCBbJ3ZhcnInLCBbODU5N11dLCBbJ3ZBcnInLCBbODY2MV1dLCBbJ3ZhcnJobycsIFsxMDA5XV0sIFsndmFyc2lnbWEnLCBbOTYyXV0sIFsndmFyc3Vic2V0bmVxJywgWzg4NDIsIDY1MDI0XV0sIFsndmFyc3Vic2V0bmVxcScsIFsxMDk1NSwgNjUwMjRdXSwgWyd2YXJzdXBzZXRuZXEnLCBbODg0MywgNjUwMjRdXSwgWyd2YXJzdXBzZXRuZXFxJywgWzEwOTU2LCA2NTAyNF1dLCBbJ3ZhcnRoZXRhJywgWzk3N11dLCBbJ3ZhcnRyaWFuZ2xlbGVmdCcsIFs4ODgyXV0sIFsndmFydHJpYW5nbGVyaWdodCcsIFs4ODgzXV0sIFsndkJhcicsIFsxMDk4NF1dLCBbJ1ZiYXInLCBbMTA5ODddXSwgWyd2QmFydicsIFsxMDk4NV1dLCBbJ1ZjeScsIFsxMDQyXV0sIFsndmN5JywgWzEwNzRdXSwgWyd2ZGFzaCcsIFs4ODY2XV0sIFsndkRhc2gnLCBbODg3Ml1dLCBbJ1ZkYXNoJywgWzg4NzNdXSwgWydWRGFzaCcsIFs4ODc1XV0sIFsnVmRhc2hsJywgWzEwOTgyXV0sIFsndmVlYmFyJywgWzg4OTFdXSwgWyd2ZWUnLCBbODc0NF1dLCBbJ1ZlZScsIFs4ODk3XV0sIFsndmVlZXEnLCBbODc5NF1dLCBbJ3ZlbGxpcCcsIFs4OTQyXV0sIFsndmVyYmFyJywgWzEyNF1dLCBbJ1ZlcmJhcicsIFs4MjE0XV0sIFsndmVydCcsIFsxMjRdXSwgWydWZXJ0JywgWzgyMTRdXSwgWydWZXJ0aWNhbEJhcicsIFs4NzM5XV0sIFsnVmVydGljYWxMaW5lJywgWzEyNF1dLCBbJ1ZlcnRpY2FsU2VwYXJhdG9yJywgWzEwMDcyXV0sIFsnVmVydGljYWxUaWxkZScsIFs4NzY4XV0sIFsnVmVyeVRoaW5TcGFjZScsIFs4MjAyXV0sIFsnVmZyJywgWzEyMDA4OV1dLCBbJ3ZmcicsIFsxMjAxMTVdXSwgWyd2bHRyaScsIFs4ODgyXV0sIFsndm5zdWInLCBbODgzNCwgODQwMl1dLCBbJ3Zuc3VwJywgWzg4MzUsIDg0MDJdXSwgWydWb3BmJywgWzEyMDE0MV1dLCBbJ3ZvcGYnLCBbMTIwMTY3XV0sIFsndnByb3AnLCBbODczM11dLCBbJ3ZydHJpJywgWzg4ODNdXSwgWydWc2NyJywgWzExOTk4NV1dLCBbJ3ZzY3InLCBbMTIwMDExXV0sIFsndnN1Ym5FJywgWzEwOTU1LCA2NTAyNF1dLCBbJ3ZzdWJuZScsIFs4ODQyLCA2NTAyNF1dLCBbJ3ZzdXBuRScsIFsxMDk1NiwgNjUwMjRdXSwgWyd2c3VwbmUnLCBbODg0MywgNjUwMjRdXSwgWydWdmRhc2gnLCBbODg3NF1dLCBbJ3Z6aWd6YWcnLCBbMTA2NTBdXSwgWydXY2lyYycsIFszNzJdXSwgWyd3Y2lyYycsIFszNzNdXSwgWyd3ZWRiYXInLCBbMTA4NDddXSwgWyd3ZWRnZScsIFs4NzQzXV0sIFsnV2VkZ2UnLCBbODg5Nl1dLCBbJ3dlZGdlcScsIFs4NzkzXV0sIFsnd2VpZXJwJywgWzg0NzJdXSwgWydXZnInLCBbMTIwMDkwXV0sIFsnd2ZyJywgWzEyMDExNl1dLCBbJ1dvcGYnLCBbMTIwMTQyXV0sIFsnd29wZicsIFsxMjAxNjhdXSwgWyd3cCcsIFs4NDcyXV0sIFsnd3InLCBbODc2OF1dLCBbJ3dyZWF0aCcsIFs4NzY4XV0sIFsnV3NjcicsIFsxMTk5ODZdXSwgWyd3c2NyJywgWzEyMDAxMl1dLCBbJ3hjYXAnLCBbODg5OF1dLCBbJ3hjaXJjJywgWzk3MTFdXSwgWyd4Y3VwJywgWzg4OTldXSwgWyd4ZHRyaScsIFs5NjYxXV0sIFsnWGZyJywgWzEyMDA5MV1dLCBbJ3hmcicsIFsxMjAxMTddXSwgWyd4aGFycicsIFsxMDIzMV1dLCBbJ3hoQXJyJywgWzEwMjM0XV0sIFsnWGknLCBbOTI2XV0sIFsneGknLCBbOTU4XV0sIFsneGxhcnInLCBbMTAyMjldXSwgWyd4bEFycicsIFsxMDIzMl1dLCBbJ3htYXAnLCBbMTAyMzZdXSwgWyd4bmlzJywgWzg5NTVdXSwgWyd4b2RvdCcsIFsxMDc1Ml1dLCBbJ1hvcGYnLCBbMTIwMTQzXV0sIFsneG9wZicsIFsxMjAxNjldXSwgWyd4b3BsdXMnLCBbMTA3NTNdXSwgWyd4b3RpbWUnLCBbMTA3NTRdXSwgWyd4cmFycicsIFsxMDIzMF1dLCBbJ3hyQXJyJywgWzEwMjMzXV0sIFsnWHNjcicsIFsxMTk5ODddXSwgWyd4c2NyJywgWzEyMDAxM11dLCBbJ3hzcWN1cCcsIFsxMDc1OF1dLCBbJ3h1cGx1cycsIFsxMDc1Nl1dLCBbJ3h1dHJpJywgWzk2NTFdXSwgWyd4dmVlJywgWzg4OTddXSwgWyd4d2VkZ2UnLCBbODg5Nl1dLCBbJ1lhY3V0ZScsIFsyMjFdXSwgWyd5YWN1dGUnLCBbMjUzXV0sIFsnWUFjeScsIFsxMDcxXV0sIFsneWFjeScsIFsxMTAzXV0sIFsnWWNpcmMnLCBbMzc0XV0sIFsneWNpcmMnLCBbMzc1XV0sIFsnWWN5JywgWzEwNjddXSwgWyd5Y3knLCBbMTA5OV1dLCBbJ3llbicsIFsxNjVdXSwgWydZZnInLCBbMTIwMDkyXV0sIFsneWZyJywgWzEyMDExOF1dLCBbJ1lJY3knLCBbMTAzMV1dLCBbJ3lpY3knLCBbMTExMV1dLCBbJ1lvcGYnLCBbMTIwMTQ0XV0sIFsneW9wZicsIFsxMjAxNzBdXSwgWydZc2NyJywgWzExOTk4OF1dLCBbJ3lzY3InLCBbMTIwMDE0XV0sIFsnWVVjeScsIFsxMDcwXV0sIFsneXVjeScsIFsxMTAyXV0sIFsneXVtbCcsIFsyNTVdXSwgWydZdW1sJywgWzM3Nl1dLCBbJ1phY3V0ZScsIFszNzddXSwgWyd6YWN1dGUnLCBbMzc4XV0sIFsnWmNhcm9uJywgWzM4MV1dLCBbJ3pjYXJvbicsIFszODJdXSwgWydaY3knLCBbMTA0N11dLCBbJ3pjeScsIFsxMDc5XV0sIFsnWmRvdCcsIFszNzldXSwgWyd6ZG90JywgWzM4MF1dLCBbJ3plZXRyZicsIFs4NDg4XV0sIFsnWmVyb1dpZHRoU3BhY2UnLCBbODIwM11dLCBbJ1pldGEnLCBbOTE4XV0sIFsnemV0YScsIFs5NTBdXSwgWyd6ZnInLCBbMTIwMTE5XV0sIFsnWmZyJywgWzg0ODhdXSwgWydaSGN5JywgWzEwNDZdXSwgWyd6aGN5JywgWzEwNzhdXSwgWyd6aWdyYXJyJywgWzg2NjldXSwgWyd6b3BmJywgWzEyMDE3MV1dLCBbJ1pvcGYnLCBbODQ4NF1dLCBbJ1pzY3InLCBbMTE5OTg5XV0sIFsnenNjcicsIFsxMjAwMTVdXSwgWyd6d2onLCBbODIwNV1dLCBbJ3p3bmonLCBbODIwNF1dXTtcbnZhciBERUNPREVfT05MWV9FTlRJVElFUyA9IFtbJ05ld0xpbmUnLCBbMTBdXV07XG52YXIgYWxwaGFJbmRleCA9IHt9O1xudmFyIGNoYXJJbmRleCA9IHt9O1xuY3JlYXRlSW5kZXhlcyhhbHBoYUluZGV4LCBjaGFySW5kZXgpO1xudmFyIEh0bWw1RW50aXRpZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSHRtbDVFbnRpdGllcygpIHtcbiAgICB9XG4gICAgSHRtbDVFbnRpdGllcy5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvJigjP1tcXHdcXGRdKyk7Py9nLCBmdW5jdGlvbiAocywgZW50aXR5KSB7XG4gICAgICAgICAgICB2YXIgY2hyO1xuICAgICAgICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMCkgPT09IFwiI1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBlbnRpdHkuY2hhckF0KDEpID09PSAneCcgP1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChlbnRpdHkuc3Vic3RyKDIpLnRvTG93ZXJDYXNlKCksIDE2KSA6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGVudGl0eS5zdWJzdHIoMSkpO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oY29kZSkgfHwgY29kZSA+PSAtMzI3NjgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgPD0gNjU1MzUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHIgPSBzdXJyb2dhdGVfcGFpcnNfMS5mcm9tQ29kZVBvaW50KGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hyID0gYWxwaGFJbmRleFtlbnRpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNociB8fCBzO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw1RW50aXRpZXMoKS5kZWNvZGUoc3RyKTtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgY2hhckluZm8gPSBjaGFySW5kZXhbc3RyLmNoYXJDb2RlQXQoaSldO1xuICAgICAgICAgICAgaWYgKGNoYXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFscGhhID0gY2hhckluZm9bc3RyLmNoYXJDb2RlQXQoaSArIDEpXTtcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBjaGFySW5mb1snJ107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gXCImXCIgKyBhbHBoYSArIFwiO1wiO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCArPSBzdHIuY2hhckF0KGkpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBIdG1sNUVudGl0aWVzLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sNUVudGl0aWVzKCkuZW5jb2RlKHN0cik7XG4gICAgfTtcbiAgICBIdG1sNUVudGl0aWVzLnByb3RvdHlwZS5lbmNvZGVOb25VVEYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0ckxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHN0ckxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIHZhciBjaGFySW5mbyA9IGNoYXJJbmRleFtjXTtcbiAgICAgICAgICAgIGlmIChjaGFySW5mbykge1xuICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IGNoYXJJbmZvW3N0ci5jaGFyQ29kZUF0KGkgKyAxKV07XG4gICAgICAgICAgICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFscGhhID0gY2hhckluZm9bJyddO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiJlwiICsgYWxwaGEgKyBcIjtcIjtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA8IDMyIHx8IGMgPiAxMjYpIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA+PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlRnJvbSAmJiBjIDw9IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVUbykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIHN1cnJvZ2F0ZV9wYWlyc18xLmdldENvZGVQb2ludChzdHIsIGkpICsgJzsnO1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIGMgKyAnOyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0ci5jaGFyQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMuZW5jb2RlTm9uVVRGID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gbmV3IEh0bWw1RW50aXRpZXMoKS5lbmNvZGVOb25VVEYoc3RyKTtcbiAgICB9O1xuICAgIEh0bWw1RW50aXRpZXMucHJvdG90eXBlLmVuY29kZU5vbkFTQ0lJID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICBpZiAoIXN0ciB8fCAhc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHJMZW5ndGggPSBzdHIubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzdHJMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICBpZiAoYyA8PSAyNTUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyW2krK107XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA+PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlRnJvbSAmJiBjIDw9IHN1cnJvZ2F0ZV9wYWlyc18xLmhpZ2hTdXJyb2dhdGVUbykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgc3Vycm9nYXRlX3BhaXJzXzEuZ2V0Q29kZVBvaW50KHN0ciwgaSkgKyAnOyc7XG4gICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBjICsgJzsnO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgSHRtbDVFbnRpdGllcy5lbmNvZGVOb25BU0NJSSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdG1sNUVudGl0aWVzKCkuZW5jb2RlTm9uQVNDSUkoc3RyKTtcbiAgICB9O1xuICAgIHJldHVybiBIdG1sNUVudGl0aWVzO1xufSgpKTtcbmV4cG9ydHMuSHRtbDVFbnRpdGllcyA9IEh0bWw1RW50aXRpZXM7XG5mdW5jdGlvbiBjcmVhdGVJbmRleGVzKGFscGhhSW5kZXgsIGNoYXJJbmRleCkge1xuICAgIHZhciBpID0gRU5USVRJRVMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIF9hID0gRU5USVRJRVNbaV0sIGFscGhhID0gX2FbMF0sIF9iID0gX2FbMV0sIGNociA9IF9iWzBdLCBjaHIyID0gX2JbMV07XG4gICAgICAgIHZhciBhZGRDaGFyID0gKGNociA8IDMyIHx8IGNociA+IDEyNikgfHwgY2hyID09PSA2MiB8fCBjaHIgPT09IDYwIHx8IGNociA9PT0gMzggfHwgY2hyID09PSAzNCB8fCBjaHIgPT09IDM5O1xuICAgICAgICB2YXIgY2hhckluZm8gPSB2b2lkIDA7XG4gICAgICAgIGlmIChhZGRDaGFyKSB7XG4gICAgICAgICAgICBjaGFySW5mbyA9IGNoYXJJbmRleFtjaHJdID0gY2hhckluZGV4W2Nocl0gfHwge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNocjIpIHtcbiAgICAgICAgICAgIGFscGhhSW5kZXhbYWxwaGFdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpICsgU3RyaW5nLmZyb21DaGFyQ29kZShjaHIyKTtcbiAgICAgICAgICAgIGFkZENoYXIgJiYgKGNoYXJJbmZvW2NocjJdID0gYWxwaGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWxwaGFJbmRleFthbHBoYV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocik7XG4gICAgICAgICAgICBhZGRDaGFyICYmIChjaGFySW5mb1snJ10gPSBhbHBoYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaSA9IERFQ09ERV9PTkxZX0VOVElUSUVTLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHZhciBfYyA9IERFQ09ERV9PTkxZX0VOVElUSUVTW2ldLCBhbHBoYSA9IF9jWzBdLCBfZCA9IF9jWzFdLCBjaHIgPSBfZFswXSwgY2hyMiA9IF9kWzFdO1xuICAgICAgICBhbHBoYUluZGV4W2FscGhhXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyKSArIChjaHIyID8gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIyKSA6ICcnKTtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB4bWxfZW50aXRpZXNfMSA9IHJlcXVpcmUoXCIuL3htbC1lbnRpdGllc1wiKTtcbmV4cG9ydHMuWG1sRW50aXRpZXMgPSB4bWxfZW50aXRpZXNfMS5YbWxFbnRpdGllcztcbnZhciBodG1sNF9lbnRpdGllc18xID0gcmVxdWlyZShcIi4vaHRtbDQtZW50aXRpZXNcIik7XG5leHBvcnRzLkh0bWw0RW50aXRpZXMgPSBodG1sNF9lbnRpdGllc18xLkh0bWw0RW50aXRpZXM7XG52YXIgaHRtbDVfZW50aXRpZXNfMSA9IHJlcXVpcmUoXCIuL2h0bWw1LWVudGl0aWVzXCIpO1xuZXhwb3J0cy5IdG1sNUVudGl0aWVzID0gaHRtbDVfZW50aXRpZXNfMS5IdG1sNUVudGl0aWVzO1xuZXhwb3J0cy5BbGxIdG1sRW50aXRpZXMgPSBodG1sNV9lbnRpdGllc18xLkh0bWw1RW50aXRpZXM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZnJvbUNvZGVQb2ludCA9IFN0cmluZy5mcm9tQ29kZVBvaW50IHx8IGZ1bmN0aW9uIChhc3RyYWxDb2RlUG9pbnQpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShNYXRoLmZsb29yKChhc3RyYWxDb2RlUG9pbnQgLSAweDEwMDAwKSAvIDB4NDAwKSArIDB4RDgwMCwgKGFzdHJhbENvZGVQb2ludCAtIDB4MTAwMDApICUgMHg0MDAgKyAweERDMDApO1xufTtcbmV4cG9ydHMuZ2V0Q29kZVBvaW50ID0gU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdCA/XG4gICAgZnVuY3Rpb24gKGlucHV0LCBwb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gaW5wdXQuY29kZVBvaW50QXQocG9zaXRpb24pO1xuICAgIH0gOlxuICAgIGZ1bmN0aW9uIChpbnB1dCwgcG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIChpbnB1dC5jaGFyQ29kZUF0KHBvc2l0aW9uKSAtIDB4RDgwMCkgKiAweDQwMFxuICAgICAgICAgICAgKyBpbnB1dC5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgLSAweERDMDAgKyAweDEwMDAwO1xuICAgIH07XG5leHBvcnRzLmhpZ2hTdXJyb2dhdGVGcm9tID0gMHhEODAwO1xuZXhwb3J0cy5oaWdoU3Vycm9nYXRlVG8gPSAweERCRkY7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBzdXJyb2dhdGVfcGFpcnNfMSA9IHJlcXVpcmUoXCIuL3N1cnJvZ2F0ZS1wYWlyc1wiKTtcbnZhciBBTFBIQV9JTkRFWCA9IHtcbiAgICAnJmx0JzogJzwnLFxuICAgICcmZ3QnOiAnPicsXG4gICAgJyZxdW90JzogJ1wiJyxcbiAgICAnJmFwb3MnOiAnXFwnJyxcbiAgICAnJmFtcCc6ICcmJyxcbiAgICAnJmx0Oyc6ICc8JyxcbiAgICAnJmd0Oyc6ICc+JyxcbiAgICAnJnF1b3Q7JzogJ1wiJyxcbiAgICAnJmFwb3M7JzogJ1xcJycsXG4gICAgJyZhbXA7JzogJyYnXG59O1xudmFyIENIQVJfSU5ERVggPSB7XG4gICAgNjA6ICdsdCcsXG4gICAgNjI6ICdndCcsXG4gICAgMzQ6ICdxdW90JyxcbiAgICAzOTogJ2Fwb3MnLFxuICAgIDM4OiAnYW1wJ1xufTtcbnZhciBDSEFSX1NfSU5ERVggPSB7XG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgJ1xcJyc6ICcmYXBvczsnLFxuICAgICcmJzogJyZhbXA7J1xufTtcbnZhciBYbWxFbnRpdGllcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBYbWxFbnRpdGllcygpIHtcbiAgICB9XG4gICAgWG1sRW50aXRpZXMucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1s8PlwiJyZdL2csIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ0hBUl9TX0lOREVYW3NdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFhtbEVudGl0aWVzLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYbWxFbnRpdGllcygpLmVuY29kZShzdHIpO1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyYjP1swLTlhLXpBLVpdKzs/L2csIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICBpZiAocy5jaGFyQXQoMSkgPT09ICcjJykge1xuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gcy5jaGFyQXQoMikudG9Mb3dlckNhc2UoKSA9PT0gJ3gnID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQocy5zdWJzdHIoMyksIDE2KSA6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHMuc3Vic3RyKDIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGNvZGUpIHx8IGNvZGUgPj0gLTMyNzY4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlIDw9IDY1NTM1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdXJyb2dhdGVfcGFpcnNfMS5mcm9tQ29kZVBvaW50KGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBBTFBIQV9JTkRFWFtzXSB8fCBzO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFhtbEVudGl0aWVzLmRlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYbWxFbnRpdGllcygpLmRlY29kZShzdHIpO1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMucHJvdG90eXBlLmVuY29kZU5vblVURiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgdmFyIGFscGhhID0gQ0hBUl9JTkRFWFtjXTtcbiAgICAgICAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIiZcIiArIGFscGhhICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMgPCAzMiB8fCBjID4gMTI2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPj0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZUZyb20gJiYgYyA8PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBzdXJyb2dhdGVfcGFpcnNfMS5nZXRDb2RlUG9pbnQoc3RyLCBpKSArICc7JztcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcmIycgKyBjICsgJzsnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBzdHIuY2hhckF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBYbWxFbnRpdGllcy5lbmNvZGVOb25VVEYgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgWG1sRW50aXRpZXMoKS5lbmNvZGVOb25VVEYoc3RyKTtcbiAgICB9O1xuICAgIFhtbEVudGl0aWVzLnByb3RvdHlwZS5lbmNvZGVOb25BU0NJSSA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RyTGVuZ3RoID0gc3RyLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc3RyTGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgaWYgKGMgPD0gMjU1KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0cltpKytdO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGMgPj0gc3Vycm9nYXRlX3BhaXJzXzEuaGlnaFN1cnJvZ2F0ZUZyb20gJiYgYyA8PSBzdXJyb2dhdGVfcGFpcnNfMS5oaWdoU3Vycm9nYXRlVG8pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyYjJyArIHN1cnJvZ2F0ZV9wYWlyc18xLmdldENvZGVQb2ludChzdHIsIGkpICsgJzsnO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnJiMnICsgYyArICc7JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgWG1sRW50aXRpZXMuZW5jb2RlTm9uQVNDSUkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBuZXcgWG1sRW50aXRpZXMoKS5lbmNvZGVOb25BU0NJSShzdHIpO1xuICAgIH07XG4gICAgcmV0dXJuIFhtbEVudGl0aWVzO1xufSgpKTtcbmV4cG9ydHMuWG1sRW50aXRpZXMgPSBYbWxFbnRpdGllcztcbiIsIi8qXG4qIGxvZ2xldmVsIC0gaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsXG4qXG4qIENvcHlyaWdodCAoYykgMjAxMyBUaW0gUGVycnlcbiogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuKi9cbihmdW5jdGlvbiAocm9vdCwgZGVmaW5pdGlvbikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkZWZpbml0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC5sb2cgPSBkZWZpbml0aW9uKCk7XG4gICAgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLyBTbGlnaHRseSBkdWJpb3VzIHRyaWNrcyB0byBjdXQgZG93biBtaW5pbWl6ZWQgZmlsZSBzaXplXG4gICAgdmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9O1xuICAgIHZhciB1bmRlZmluZWRUeXBlID0gXCJ1bmRlZmluZWRcIjtcbiAgICB2YXIgaXNJRSA9ICh0eXBlb2Ygd2luZG93ICE9PSB1bmRlZmluZWRUeXBlKSAmJiAodHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IgIT09IHVuZGVmaW5lZFR5cGUpICYmIChcbiAgICAgICAgL1RyaWRlbnRcXC98TVNJRSAvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpXG4gICAgKTtcblxuICAgIHZhciBsb2dNZXRob2RzID0gW1xuICAgICAgICBcInRyYWNlXCIsXG4gICAgICAgIFwiZGVidWdcIixcbiAgICAgICAgXCJpbmZvXCIsXG4gICAgICAgIFwid2FyblwiLFxuICAgICAgICBcImVycm9yXCJcbiAgICBdO1xuXG4gICAgLy8gQ3Jvc3MtYnJvd3NlciBiaW5kIGVxdWl2YWxlbnQgdGhhdCB3b3JrcyBhdCBsZWFzdCBiYWNrIHRvIElFNlxuICAgIGZ1bmN0aW9uIGJpbmRNZXRob2Qob2JqLCBtZXRob2ROYW1lKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBvYmpbbWV0aG9kTmFtZV07XG4gICAgICAgIGlmICh0eXBlb2YgbWV0aG9kLmJpbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuYmluZChvYmopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChtZXRob2QsIG9iaik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gTWlzc2luZyBiaW5kIHNoaW0gb3IgSUU4ICsgTW9kZXJuaXpyLCBmYWxsYmFjayB0byB3cmFwcGluZ1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5hcHBseShtZXRob2QsIFtvYmosIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcmFjZSgpIGRvZXNuJ3QgcHJpbnQgdGhlIG1lc3NhZ2UgaW4gSUUsIHNvIGZvciB0aGF0IGNhc2Ugd2UgbmVlZCB0byB3cmFwIGl0XG4gICAgZnVuY3Rpb24gdHJhY2VGb3JJRSgpIHtcbiAgICAgICAgaWYgKGNvbnNvbGUubG9nKSB7XG4gICAgICAgICAgICBpZiAoY29uc29sZS5sb2cuYXBwbHkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvbGQgSUUsIG5hdGl2ZSBjb25zb2xlIG1ldGhvZHMgdGhlbXNlbHZlcyBkb24ndCBoYXZlIGFwcGx5KCkuXG4gICAgICAgICAgICAgICAgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGNvbnNvbGUubG9nLCBbY29uc29sZSwgYXJndW1lbnRzXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnNvbGUudHJhY2UpIGNvbnNvbGUudHJhY2UoKTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCB0aGUgYmVzdCBsb2dnaW5nIG1ldGhvZCBwb3NzaWJsZSBmb3IgdGhpcyBlbnZcbiAgICAvLyBXaGVyZXZlciBwb3NzaWJsZSB3ZSB3YW50IHRvIGJpbmQsIG5vdCB3cmFwLCB0byBwcmVzZXJ2ZSBzdGFjayB0cmFjZXNcbiAgICBmdW5jdGlvbiByZWFsTWV0aG9kKG1ldGhvZE5hbWUpIHtcbiAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdkZWJ1ZycpIHtcbiAgICAgICAgICAgIG1ldGhvZE5hbWUgPSAnbG9nJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PT0gdW5kZWZpbmVkVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBObyBtZXRob2QgcG9zc2libGUsIGZvciBub3cgLSBmaXhlZCBsYXRlciBieSBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzXG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kTmFtZSA9PT0gJ3RyYWNlJyAmJiBpc0lFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VGb3JJRTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25zb2xlW21ldGhvZE5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kTWV0aG9kKGNvbnNvbGUsIG1ldGhvZE5hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnNvbGUubG9nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBiaW5kTWV0aG9kKGNvbnNvbGUsICdsb2cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBub29wO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgcHJpdmF0ZSBmdW5jdGlvbnMgYWx3YXlzIG5lZWQgYHRoaXNgIHRvIGJlIHNldCBwcm9wZXJseVxuXG4gICAgZnVuY3Rpb24gcmVwbGFjZUxvZ2dpbmdNZXRob2RzKGxldmVsLCBsb2dnZXJOYW1lKSB7XG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9nTWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBsb2dNZXRob2RzW2ldO1xuICAgICAgICAgICAgdGhpc1ttZXRob2ROYW1lXSA9IChpIDwgbGV2ZWwpID9cbiAgICAgICAgICAgICAgICBub29wIDpcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZEZhY3RvcnkobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Z1xuICAgICAgICB0aGlzLmxvZyA9IHRoaXMuZGVidWc7XG4gICAgfVxuXG4gICAgLy8gSW4gb2xkIElFIHZlcnNpb25zLCB0aGUgY29uc29sZSBpc24ndCBwcmVzZW50IHVudGlsIHlvdSBmaXJzdCBvcGVuIGl0LlxuICAgIC8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzXG4gICAgZnVuY3Rpb24gZW5hYmxlTG9nZ2luZ1doZW5Db25zb2xlQXJyaXZlcyhtZXRob2ROYW1lLCBsZXZlbCwgbG9nZ2VyTmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICAgICAgcmVwbGFjZUxvZ2dpbmdNZXRob2RzLmNhbGwodGhpcywgbGV2ZWwsIGxvZ2dlck5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXNbbWV0aG9kTmFtZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZFxuICAgIC8vIG90aGVyd2lzZSB3ZSB3YWl0IGZvciBhIGNvbnNvbGUgdG8gYXBwZWFyLCBhbmQgdGhlbiB0cnkgYWdhaW4uXG4gICAgZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkobWV0aG9kTmFtZSwgbGV2ZWwsIGxvZ2dlck5hbWUpIHtcbiAgICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgICAgcmV0dXJuIHJlYWxNZXRob2QobWV0aG9kTmFtZSkgfHxcbiAgICAgICAgICAgICAgIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2dnZXIobmFtZSwgZGVmYXVsdExldmVsLCBmYWN0b3J5KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY3VycmVudExldmVsO1xuXG4gICAgICB2YXIgc3RvcmFnZUtleSA9IFwibG9nbGV2ZWxcIjtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBzdG9yYWdlS2V5ICs9IFwiOlwiICsgbmFtZTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgc3RvcmFnZUtleSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShsZXZlbE51bSkge1xuICAgICAgICAgIHZhciBsZXZlbE5hbWUgPSAobG9nTWV0aG9kc1tsZXZlbE51bV0gfHwgJ3NpbGVudCcpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gdW5kZWZpbmVkVHlwZSB8fCAhc3RvcmFnZUtleSkgcmV0dXJuO1xuXG4gICAgICAgICAgLy8gVXNlIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGVcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlW3N0b3JhZ2VLZXldID0gbGV2ZWxOYW1lO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuXG4gICAgICAgICAgLy8gVXNlIHNlc3Npb24gY29va2llIGFzIGZhbGxiYWNrXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9XG4gICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0b3JhZ2VLZXkpICsgXCI9XCIgKyBsZXZlbE5hbWUgKyBcIjtcIjtcbiAgICAgICAgICB9IGNhdGNoIChpZ25vcmUpIHt9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCkge1xuICAgICAgICAgIHZhciBzdG9yZWRMZXZlbDtcblxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWRUeXBlIHx8ICFzdG9yYWdlS2V5KSByZXR1cm47XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc3RvcmFnZUtleV07XG4gICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gY29va2llcyBpZiBsb2NhbCBzdG9yYWdlIGdpdmVzIHVzIG5vdGhpbmdcbiAgICAgICAgICBpZiAodHlwZW9mIHN0b3JlZExldmVsID09PSB1bmRlZmluZWRUeXBlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICB2YXIgY29va2llID0gd2luZG93LmRvY3VtZW50LmNvb2tpZTtcbiAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGNvb2tpZS5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdG9yYWdlS2V5KSArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzdG9yZWRMZXZlbCA9IC9eKFteO10rKS8uZXhlYyhjb29raWUuc2xpY2UobG9jYXRpb24pKVsxXTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoaWdub3JlKSB7fVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHRoZSBzdG9yZWQgbGV2ZWwgaXMgbm90IHZhbGlkLCB0cmVhdCBpdCBhcyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG4gICAgICAgICAgaWYgKHNlbGYubGV2ZWxzW3N0b3JlZExldmVsXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHN0b3JlZExldmVsID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBzdG9yZWRMZXZlbDtcbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgICAqXG4gICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHNcbiAgICAgICAqXG4gICAgICAgKi9cblxuICAgICAgc2VsZi5uYW1lID0gbmFtZTtcblxuICAgICAgc2VsZi5sZXZlbHMgPSB7IFwiVFJBQ0VcIjogMCwgXCJERUJVR1wiOiAxLCBcIklORk9cIjogMiwgXCJXQVJOXCI6IDMsXG4gICAgICAgICAgXCJFUlJPUlwiOiA0LCBcIlNJTEVOVFwiOiA1fTtcblxuICAgICAgc2VsZi5tZXRob2RGYWN0b3J5ID0gZmFjdG9yeSB8fCBkZWZhdWx0TWV0aG9kRmFjdG9yeTtcblxuICAgICAgc2VsZi5nZXRMZXZlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudExldmVsO1xuICAgICAgfTtcblxuICAgICAgc2VsZi5zZXRMZXZlbCA9IGZ1bmN0aW9uIChsZXZlbCwgcGVyc2lzdCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09IFwic3RyaW5nXCIgJiYgc2VsZi5sZXZlbHNbbGV2ZWwudG9VcHBlckNhc2UoKV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBsZXZlbCA9IHNlbGYubGV2ZWxzW2xldmVsLnRvVXBwZXJDYXNlKCldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIGxldmVsID09PSBcIm51bWJlclwiICYmIGxldmVsID49IDAgJiYgbGV2ZWwgPD0gc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnRMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgICBpZiAocGVyc2lzdCAhPT0gZmFsc2UpIHsgIC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgICAgICAgICAgICAgICAgIHBlcnNpc3RMZXZlbElmUG9zc2libGUobGV2ZWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHNlbGYsIGxldmVsLCBuYW1lKTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSB1bmRlZmluZWRUeXBlICYmIGxldmVsIDwgc2VsZi5sZXZlbHMuU0lMRU5UKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gXCJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZ1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgXCJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiBcIiArIGxldmVsO1xuICAgICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHNlbGYuc2V0RGVmYXVsdExldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgICAgaWYgKCFnZXRQZXJzaXN0ZWRMZXZlbCgpKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0TGV2ZWwobGV2ZWwsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBzZWxmLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlRSQUNFLCBwZXJzaXN0KTtcbiAgICAgIH07XG5cbiAgICAgIHNlbGYuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKHBlcnNpc3QpIHtcbiAgICAgICAgICBzZWxmLnNldExldmVsKHNlbGYubGV2ZWxzLlNJTEVOVCwgcGVyc2lzdCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsXG4gICAgICB2YXIgaW5pdGlhbExldmVsID0gZ2V0UGVyc2lzdGVkTGV2ZWwoKTtcbiAgICAgIGlmIChpbml0aWFsTGV2ZWwgPT0gbnVsbCkge1xuICAgICAgICAgIGluaXRpYWxMZXZlbCA9IGRlZmF1bHRMZXZlbCA9PSBudWxsID8gXCJXQVJOXCIgOiBkZWZhdWx0TGV2ZWw7XG4gICAgICB9XG4gICAgICBzZWxmLnNldExldmVsKGluaXRpYWxMZXZlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICpcbiAgICAgKiBUb3AtbGV2ZWwgQVBJXG4gICAgICpcbiAgICAgKi9cblxuICAgIHZhciBkZWZhdWx0TG9nZ2VyID0gbmV3IExvZ2dlcigpO1xuXG4gICAgdmFyIF9sb2dnZXJzQnlOYW1lID0ge307XG4gICAgZGVmYXVsdExvZ2dlci5nZXRMb2dnZXIgPSBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZSkge1xuICAgICAgICBpZiAoKHR5cGVvZiBuYW1lICE9PSBcInN5bWJvbFwiICYmIHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB8fCBuYW1lID09PSBcIlwiKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci5cIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbG9nZ2VyID0gX2xvZ2dlcnNCeU5hbWVbbmFtZV07XG4gICAgICAgIGlmICghbG9nZ2VyKSB7XG4gICAgICAgICAgbG9nZ2VyID0gX2xvZ2dlcnNCeU5hbWVbbmFtZV0gPSBuZXcgTG9nZ2VyKFxuICAgICAgICAgICAgbmFtZSwgZGVmYXVsdExvZ2dlci5nZXRMZXZlbCgpLCBkZWZhdWx0TG9nZ2VyLm1ldGhvZEZhY3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2dnZXI7XG4gICAgfTtcblxuICAgIC8vIEdyYWIgdGhlIGN1cnJlbnQgZ2xvYmFsIGxvZyB2YXJpYWJsZSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuICAgIHZhciBfbG9nID0gKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZFR5cGUpID8gd2luZG93LmxvZyA6IHVuZGVmaW5lZDtcbiAgICBkZWZhdWx0TG9nZ2VyLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IHVuZGVmaW5lZFR5cGUgJiZcbiAgICAgICAgICAgICAgIHdpbmRvdy5sb2cgPT09IGRlZmF1bHRMb2dnZXIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2cgPSBfbG9nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRMb2dnZXI7XG4gICAgfTtcblxuICAgIGRlZmF1bHRMb2dnZXIuZ2V0TG9nZ2VycyA9IGZ1bmN0aW9uIGdldExvZ2dlcnMoKSB7XG4gICAgICAgIHJldHVybiBfbG9nZ2Vyc0J5TmFtZTtcbiAgICB9O1xuXG4gICAgLy8gRVM2IGRlZmF1bHQgZXhwb3J0LCBmb3IgY29tcGF0aWJpbGl0eVxuICAgIGRlZmF1bHRMb2dnZXJbJ2RlZmF1bHQnXSA9IGRlZmF1bHRMb2dnZXI7XG5cbiAgICByZXR1cm4gZGVmYXVsdExvZ2dlcjtcbn0pKTtcbiIsIi8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4xIGJ5IEBtYXRoaWFzICovXG47KGZ1bmN0aW9uKHJvb3QpIHtcblxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGVzICovXG5cdHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiZcblx0XHQhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXHR2YXIgZnJlZU1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmXG5cdFx0IW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cdHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG5cdGlmIChcblx0XHRmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsXG5cdCkge1xuXHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC5cblx0ICogQG5hbWUgcHVueWNvZGVcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR2YXIgcHVueWNvZGUsXG5cblx0LyoqIEhpZ2hlc3QgcG9zaXRpdmUgc2lnbmVkIDMyLWJpdCBmbG9hdCB2YWx1ZSAqL1xuXHRtYXhJbnQgPSAyMTQ3NDgzNjQ3LCAvLyBha2EuIDB4N0ZGRkZGRkYgb3IgMl4zMS0xXG5cblx0LyoqIEJvb3RzdHJpbmcgcGFyYW1ldGVycyAqL1xuXHRiYXNlID0gMzYsXG5cdHRNaW4gPSAxLFxuXHR0TWF4ID0gMjYsXG5cdHNrZXcgPSAzOCxcblx0ZGFtcCA9IDcwMCxcblx0aW5pdGlhbEJpYXMgPSA3Mixcblx0aW5pdGlhbE4gPSAxMjgsIC8vIDB4ODBcblx0ZGVsaW1pdGVyID0gJy0nLCAvLyAnXFx4MkQnXG5cblx0LyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi9cblx0cmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sXG5cdHJlZ2V4Tm9uQVNDSUkgPSAvW15cXHgyMC1cXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFyc1xuXHRyZWdleFNlcGFyYXRvcnMgPSAvW1xceDJFXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzXG5cblx0LyoqIEVycm9yIG1lc3NhZ2VzICovXG5cdGVycm9ycyA9IHtcblx0XHQnb3ZlcmZsb3cnOiAnT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MnLFxuXHRcdCdub3QtYmFzaWMnOiAnSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KScsXG5cdFx0J2ludmFsaWQtaW5wdXQnOiAnSW52YWxpZCBpbnB1dCdcblx0fSxcblxuXHQvKiogQ29udmVuaWVuY2Ugc2hvcnRjdXRzICovXG5cdGJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbixcblx0Zmxvb3IgPSBNYXRoLmZsb29yLFxuXHRzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuXG5cdC8qKiBUZW1wb3JhcnkgdmFyaWFibGUgKi9cblx0a2V5O1xuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgZXJyb3IgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhyb3dzIGEgYFJhbmdlRXJyb3JgIHdpdGggdGhlIGFwcGxpY2FibGUgZXJyb3IgbWVzc2FnZS5cblx0ICovXG5cdGZ1bmN0aW9uIGVycm9yKHR5cGUpIHtcblx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0ICogaXRlbS5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGFycmF5LCBmbikge1xuXHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0ICogYWRkcmVzc2VzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICogY2hhcmFjdGVyLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHQgKiBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHQvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LlxuXHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHR9XG5cdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0dmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpO1xuXHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlXG5cdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0ICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsXG5cdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBkZWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS5cblx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHtcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdCAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuXHRcdCAgICB2YWx1ZSxcblx0XHQgICAgZXh0cmE7XG5cdFx0d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0Ly8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0Ly8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGVuY29kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci5cblx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0ICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHR9XG5cdFx0cmV0dXJuIGJhc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2Vcblx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdCAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uXG5cdCAqL1xuXHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHQvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWlxuXHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdH1cblxuXHQvKipcblx0ICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi5cblx0ICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuNC4xJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykge1xuXHRcdFx0Ly8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtXG5cdFx0XHRmb3IgKGtleSBpbiBwdW55Y29kZSkge1xuXHRcdFx0XHRwdW55Y29kZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gcHVueWNvZGVba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG4vLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICB2YXIgb2JqID0ge307XG5cbiAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciByZWdleHAgPSAvXFwrL2c7XG4gIHFzID0gcXMuc3BsaXQoc2VwKTtcblxuICB2YXIgbWF4S2V5cyA9IDEwMDA7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG4gICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcbiAgfVxuXG4gIHZhciBsZW4gPSBxcy5sZW5ndGg7XG4gIC8vIG1heEtleXMgPD0gMCBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbGltaXQga2V5cyBjb3VudFxuICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHggPSBxc1tpXS5yZXBsYWNlKHJlZ2V4cCwgJyUyMCcpLFxuICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcbiAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAga3N0ciA9IHg7XG4gICAgICB2c3RyID0gJyc7XG4gICAgfVxuXG4gICAgayA9IGRlY29kZVVSSUNvbXBvbmVudChrc3RyKTtcbiAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBvYmpba10gPSB2O1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IHJlcXVpcmUoJy4vZGVjb2RlJyk7XG5leHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9lbmNvZGUnKTtcbiIsIi8qIHNvY2tqcy1jbGllbnQgdjEuNS4wIHwgaHR0cDovL3NvY2tqcy5vcmcgfCBNSVQgbGljZW5zZSAqL1xuKGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09XCJvYmplY3RcIiYmdHlwZW9mIG1vZHVsZSE9PVwidW5kZWZpbmVkXCIpe21vZHVsZS5leHBvcnRzPWYoKX1lbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiKXtnPXdpbmRvd31lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1lbHNlIGlmKHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuU29ja0pTID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciB0cmFuc3BvcnRMaXN0ID0gcmVxdWlyZSgnLi90cmFuc3BvcnQtbGlzdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbWFpbicpKHRyYW5zcG9ydExpc3QpO1xuXG4vLyBUT0RPIGNhbid0IGdldCByaWQgb2YgdGhpcyB1bnRpbCBhbGwgc2VydmVycyBkb1xuaWYgKCdfc29ja2pzX29ubG9hZCcgaW4gZ2xvYmFsKSB7XG4gIHNldFRpbWVvdXQoZ2xvYmFsLl9zb2NranNfb25sb2FkLCAxKTtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi9tYWluXCI6MTQsXCIuL3RyYW5zcG9ydC1saXN0XCI6MTZ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50ID0gcmVxdWlyZSgnLi9ldmVudCcpXG4gIDtcblxuZnVuY3Rpb24gQ2xvc2VFdmVudCgpIHtcbiAgRXZlbnQuY2FsbCh0aGlzKTtcbiAgdGhpcy5pbml0RXZlbnQoJ2Nsb3NlJywgZmFsc2UsIGZhbHNlKTtcbiAgdGhpcy53YXNDbGVhbiA9IGZhbHNlO1xuICB0aGlzLmNvZGUgPSAwO1xuICB0aGlzLnJlYXNvbiA9ICcnO1xufVxuXG5pbmhlcml0cyhDbG9zZUV2ZW50LCBFdmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2xvc2VFdmVudDtcblxufSx7XCIuL2V2ZW50XCI6NCxcImluaGVyaXRzXCI6NTd9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50VGFyZ2V0ID0gcmVxdWlyZSgnLi9ldmVudHRhcmdldCcpXG4gIDtcblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xufVxuXG5pbmhlcml0cyhFdmVudEVtaXR0ZXIsIEV2ZW50VGFyZ2V0KTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0eXBlKSB7XG4gICAgZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1t0eXBlXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIHNlbGYgPSB0aGlzXG4gICAgLCBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgc2VsZi5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5vbih0eXBlLCBnKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdHlwZSA9IGFyZ3VtZW50c1swXTtcbiAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1t0eXBlXTtcbiAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZXF1aXZhbGVudCBvZiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIHZhciBhcmdzID0gbmV3IEFycmF5KGwgLSAxKTtcbiAgZm9yICh2YXIgYWkgPSAxOyBhaSA8IGw7IGFpKyspIHtcbiAgICBhcmdzW2FpIC0gMV0gPSBhcmd1bWVudHNbYWldO1xuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEV2ZW50VGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO1xuXG5tb2R1bGUuZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbn0se1wiLi9ldmVudHRhcmdldFwiOjUsXCJpbmhlcml0c1wiOjU3fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIEV2ZW50KGV2ZW50VHlwZSkge1xuICB0aGlzLnR5cGUgPSBldmVudFR5cGU7XG59XG5cbkV2ZW50LnByb3RvdHlwZS5pbml0RXZlbnQgPSBmdW5jdGlvbihldmVudFR5cGUsIGNhbkJ1YmJsZSwgY2FuY2VsYWJsZSkge1xuICB0aGlzLnR5cGUgPSBldmVudFR5cGU7XG4gIHRoaXMuYnViYmxlcyA9IGNhbkJ1YmJsZTtcbiAgdGhpcy5jYW5jZWxhYmxlID0gY2FuY2VsYWJsZTtcbiAgdGhpcy50aW1lU3RhbXAgPSArbmV3IERhdGUoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24oKSB7fTtcbkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uKCkge307XG5cbkV2ZW50LkNBUFRVUklOR19QSEFTRSA9IDE7XG5FdmVudC5BVF9UQVJHRVQgPSAyO1xuRXZlbnQuQlVCQkxJTkdfUEhBU0UgPSAzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50O1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuLyogU2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiBET00yIEV2ZW50VGFyZ2V0LlxuICogICBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1FdmVudHMvZXZlbnRzLmh0bWwjRXZlbnRzLUV2ZW50VGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gRXZlbnRUYXJnZXQoKSB7XG4gIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xufVxuXG5FdmVudFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50VHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCEoZXZlbnRUeXBlIGluIHRoaXMuX2xpc3RlbmVycykpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IFtdO1xuICB9XG4gIHZhciBhcnIgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXTtcbiAgLy8gIzRcbiAgaWYgKGFyci5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAvLyBNYWtlIGEgY29weSBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggYSBjdXJyZW50IGRpc3BhdGNoRXZlbnQuXG4gICAgYXJyID0gYXJyLmNvbmNhdChbbGlzdGVuZXJdKTtcbiAgfVxuICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IGFycjtcbn07XG5cbkV2ZW50VGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lcikge1xuICB2YXIgYXJyID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV07XG4gIGlmICghYXJyKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBpZHggPSBhcnIuaW5kZXhPZihsaXN0ZW5lcik7XG4gIGlmIChpZHggIT09IC0xKSB7XG4gICAgaWYgKGFyci5sZW5ndGggPiAxKSB7XG4gICAgICAvLyBNYWtlIGEgY29weSBzbyBhcyBub3QgdG8gaW50ZXJmZXJlIHdpdGggYSBjdXJyZW50IGRpc3BhdGNoRXZlbnQuXG4gICAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IGFyci5zbGljZSgwLCBpZHgpLmNvbmNhdChhcnIuc2xpY2UoaWR4ICsgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJzW2V2ZW50VHlwZV07XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxufTtcblxuRXZlbnRUYXJnZXQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGV2ZW50ID0gYXJndW1lbnRzWzBdO1xuICB2YXIgdCA9IGV2ZW50LnR5cGU7XG4gIC8vIGVxdWl2YWxlbnQgb2YgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gW2V2ZW50XSA6IEFycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIC8vIFRPRE86IFRoaXMgZG9lc24ndCBtYXRjaCB0aGUgcmVhbCBiZWhhdmlvcjsgcGVyIHNwZWMsIG9uZm9vIGdldFxuICAvLyB0aGVpciBwbGFjZSBpbiBsaW5lIGZyb20gdGhlIC9maXJzdC8gdGltZSB0aGV5J3JlIHNldCBmcm9tXG4gIC8vIG5vbi1udWxsLiBBbHRob3VnaCBXZWJLaXQgYnVtcHMgaXQgdG8gdGhlIGVuZCBldmVyeSB0aW1lIGl0J3NcbiAgLy8gc2V0LlxuICBpZiAodGhpc1snb24nICsgdF0pIHtcbiAgICB0aGlzWydvbicgKyB0XS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuICBpZiAodCBpbiB0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICAvLyBHcmFiIGEgcmVmZXJlbmNlIHRvIHRoZSBsaXN0ZW5lcnMgbGlzdC4gcmVtb3ZlRXZlbnRMaXN0ZW5lciBtYXkgYWx0ZXIgdGhlIGxpc3QuXG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyc1t0XTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFRhcmdldDtcblxufSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQnKVxuICA7XG5cbmZ1bmN0aW9uIFRyYW5zcG9ydE1lc3NhZ2VFdmVudChkYXRhKSB7XG4gIEV2ZW50LmNhbGwodGhpcyk7XG4gIHRoaXMuaW5pdEV2ZW50KCdtZXNzYWdlJywgZmFsc2UsIGZhbHNlKTtcbiAgdGhpcy5kYXRhID0gZGF0YTtcbn1cblxuaW5oZXJpdHMoVHJhbnNwb3J0TWVzc2FnZUV2ZW50LCBFdmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNwb3J0TWVzc2FnZUV2ZW50O1xuXG59LHtcIi4vZXZlbnRcIjo0LFwiaW5oZXJpdHNcIjo1N31dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgaWZyYW1lVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL2lmcmFtZScpXG4gIDtcblxuZnVuY3Rpb24gRmFjYWRlSlModHJhbnNwb3J0KSB7XG4gIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgdHJhbnNwb3J0Lm9uKCdtZXNzYWdlJywgdGhpcy5fdHJhbnNwb3J0TWVzc2FnZS5iaW5kKHRoaXMpKTtcbiAgdHJhbnNwb3J0Lm9uKCdjbG9zZScsIHRoaXMuX3RyYW5zcG9ydENsb3NlLmJpbmQodGhpcykpO1xufVxuXG5GYWNhZGVKUy5wcm90b3R5cGUuX3RyYW5zcG9ydENsb3NlID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gIGlmcmFtZVV0aWxzLnBvc3RNZXNzYWdlKCdjJywgSlNPTjMuc3RyaW5naWZ5KFtjb2RlLCByZWFzb25dKSk7XG59O1xuRmFjYWRlSlMucHJvdG90eXBlLl90cmFuc3BvcnRNZXNzYWdlID0gZnVuY3Rpb24oZnJhbWUpIHtcbiAgaWZyYW1lVXRpbHMucG9zdE1lc3NhZ2UoJ3QnLCBmcmFtZSk7XG59O1xuRmFjYWRlSlMucHJvdG90eXBlLl9zZW5kID0gZnVuY3Rpb24oZGF0YSkge1xuICB0aGlzLl90cmFuc3BvcnQuc2VuZChkYXRhKTtcbn07XG5GYWNhZGVKUy5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX3RyYW5zcG9ydC5jbG9zZSgpO1xuICB0aGlzLl90cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhY2FkZUpTO1xuXG59LHtcIi4vdXRpbHMvaWZyYW1lXCI6NDcsXCJqc29uM1wiOjU4fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXJsVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3VybCcpXG4gICwgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvZXZlbnQnKVxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIEZhY2FkZUpTID0gcmVxdWlyZSgnLi9mYWNhZGUnKVxuICAsIEluZm9JZnJhbWVSZWNlaXZlciA9IHJlcXVpcmUoJy4vaW5mby1pZnJhbWUtcmVjZWl2ZXInKVxuICAsIGlmcmFtZVV0aWxzID0gcmVxdWlyZSgnLi91dGlscy9pZnJhbWUnKVxuICAsIGxvYyA9IHJlcXVpcmUoJy4vbG9jYXRpb24nKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6aWZyYW1lLWJvb3RzdHJhcCcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFNvY2tKUywgYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuICB2YXIgdHJhbnNwb3J0TWFwID0ge307XG4gIGF2YWlsYWJsZVRyYW5zcG9ydHMuZm9yRWFjaChmdW5jdGlvbihhdCkge1xuICAgIGlmIChhdC5mYWNhZGVUcmFuc3BvcnQpIHtcbiAgICAgIHRyYW5zcG9ydE1hcFthdC5mYWNhZGVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZV0gPSBhdC5mYWNhZGVUcmFuc3BvcnQ7XG4gICAgfVxuICB9KTtcblxuICAvLyBoYXJkLWNvZGVkIGZvciB0aGUgaW5mbyBpZnJhbWVcbiAgLy8gVE9ETyBzZWUgaWYgd2UgY2FuIG1ha2UgdGhpcyBtb3JlIGR5bmFtaWNcbiAgdHJhbnNwb3J0TWFwW0luZm9JZnJhbWVSZWNlaXZlci50cmFuc3BvcnROYW1lXSA9IEluZm9JZnJhbWVSZWNlaXZlcjtcbiAgdmFyIHBhcmVudE9yaWdpbjtcblxuICAvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbiAgU29ja0pTLmJvb3RzdHJhcF9pZnJhbWUgPSBmdW5jdGlvbigpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xuICAgIHZhciBmYWNhZGU7XG4gICAgaWZyYW1lVXRpbHMuY3VycmVudFdpbmRvd0lkID0gbG9jLmhhc2guc2xpY2UoMSk7XG4gICAgdmFyIG9uTWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLnNvdXJjZSAhPT0gcGFyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcGFyZW50T3JpZ2luID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwYXJlbnRPcmlnaW4gPSBlLm9yaWdpbjtcbiAgICAgIH1cbiAgICAgIGlmIChlLm9yaWdpbiAhPT0gcGFyZW50T3JpZ2luKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGlmcmFtZU1lc3NhZ2U7XG4gICAgICB0cnkge1xuICAgICAgICBpZnJhbWVNZXNzYWdlID0gSlNPTjMucGFyc2UoZS5kYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICAgICAgZGVidWcoJ2JhZCBqc29uJywgZS5kYXRhKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaWZyYW1lTWVzc2FnZS53aW5kb3dJZCAhPT0gaWZyYW1lVXRpbHMuY3VycmVudFdpbmRvd0lkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoaWZyYW1lTWVzc2FnZS50eXBlKSB7XG4gICAgICBjYXNlICdzJzpcbiAgICAgICAgdmFyIHA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcCA9IEpTT04zLnBhcnNlKGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGlnbm9yZWQpIHtcbiAgICAgICAgICBkZWJ1ZygnYmFkIGpzb24nLCBpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2ZXJzaW9uID0gcFswXTtcbiAgICAgICAgdmFyIHRyYW5zcG9ydCA9IHBbMV07XG4gICAgICAgIHZhciB0cmFuc1VybCA9IHBbMl07XG4gICAgICAgIHZhciBiYXNlVXJsID0gcFszXTtcbiAgICAgICAgZGVidWcodmVyc2lvbiwgdHJhbnNwb3J0LCB0cmFuc1VybCwgYmFzZVVybCk7XG4gICAgICAgIC8vIGNoYW5nZSB0aGlzIHRvIHNlbXZlciBsb2dpY1xuICAgICAgICBpZiAodmVyc2lvbiAhPT0gU29ja0pTLnZlcnNpb24pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29tcGF0aWJsZSBTb2NrSlMhIE1haW4gc2l0ZSB1c2VzOicgK1xuICAgICAgICAgICAgICAgICAgICAnIFwiJyArIHZlcnNpb24gKyAnXCIsIHRoZSBpZnJhbWU6JyArXG4gICAgICAgICAgICAgICAgICAgICcgXCInICsgU29ja0pTLnZlcnNpb24gKyAnXCIuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVybFV0aWxzLmlzT3JpZ2luRXF1YWwodHJhbnNVcmwsIGxvYy5ocmVmKSB8fFxuICAgICAgICAgICAgIXVybFV0aWxzLmlzT3JpZ2luRXF1YWwoYmFzZVVybCwgbG9jLmhyZWYpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGNvbm5lY3QgdG8gZGlmZmVyZW50IGRvbWFpbiBmcm9tIHdpdGhpbiBhbiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2lmcmFtZS4gKCcgKyBsb2MuaHJlZiArICcsICcgKyB0cmFuc1VybCArICcsICcgKyBiYXNlVXJsICsgJyknKTtcbiAgICAgICAgfVxuICAgICAgICBmYWNhZGUgPSBuZXcgRmFjYWRlSlMobmV3IHRyYW5zcG9ydE1hcFt0cmFuc3BvcnRdKHRyYW5zVXJsLCBiYXNlVXJsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGZhY2FkZS5fc2VuZChpZnJhbWVNZXNzYWdlLmRhdGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2MnOlxuICAgICAgICBpZiAoZmFjYWRlKSB7XG4gICAgICAgICAgZmFjYWRlLl9jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZhY2FkZSA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBldmVudFV0aWxzLmF0dGFjaEV2ZW50KCdtZXNzYWdlJywgb25NZXNzYWdlKTtcblxuICAgIC8vIFN0YXJ0XG4gICAgaWZyYW1lVXRpbHMucG9zdE1lc3NhZ2UoJ3MnKTtcbiAgfTtcbn07XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCIuL2ZhY2FkZVwiOjcsXCIuL2luZm8taWZyYW1lLXJlY2VpdmVyXCI6MTAsXCIuL2xvY2F0aW9uXCI6MTMsXCIuL3V0aWxzL2V2ZW50XCI6NDYsXCIuL3V0aWxzL2lmcmFtZVwiOjQ3LFwiLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTUsXCJqc29uM1wiOjU4fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgb2JqZWN0VXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL29iamVjdCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDppbmZvLWFqYXgnKTtcbn1cblxuZnVuY3Rpb24gSW5mb0FqYXgodXJsLCBBamF4T2JqZWN0KSB7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHQwID0gK25ldyBEYXRlKCk7XG4gIHRoaXMueG8gPSBuZXcgQWpheE9iamVjdCgnR0VUJywgdXJsKTtcblxuICB0aGlzLnhvLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKHN0YXR1cywgdGV4dCkge1xuICAgIHZhciBpbmZvLCBydHQ7XG4gICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBydHQgPSAoK25ldyBEYXRlKCkpIC0gdDA7XG4gICAgICBpZiAodGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGluZm8gPSBKU09OMy5wYXJzZSh0ZXh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlYnVnKCdiYWQganNvbicsIHRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghb2JqZWN0VXRpbHMuaXNPYmplY3QoaW5mbykpIHtcbiAgICAgICAgaW5mbyA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gICAgc2VsZi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKEluZm9BamF4LCBFdmVudEVtaXR0ZXIpO1xuXG5JbmZvQWpheC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy54by5jbG9zZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmZvQWpheDtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcIi4vdXRpbHMvb2JqZWN0XCI6NDksXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTcsXCJqc29uM1wiOjU4fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgWEhSTG9jYWxPYmplY3QgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWxvY2FsJylcbiAgLCBJbmZvQWpheCA9IHJlcXVpcmUoJy4vaW5mby1hamF4JylcbiAgO1xuXG5mdW5jdGlvbiBJbmZvUmVjZWl2ZXJJZnJhbWUodHJhbnNVcmwpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB0aGlzLmlyID0gbmV3IEluZm9BamF4KHRyYW5zVXJsLCBYSFJMb2NhbE9iamVjdCk7XG4gIHRoaXMuaXIub25jZSgnZmluaXNoJywgZnVuY3Rpb24oaW5mbywgcnR0KSB7XG4gICAgc2VsZi5pciA9IG51bGw7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgSlNPTjMuc3RyaW5naWZ5KFtpbmZvLCBydHRdKSk7XG4gIH0pO1xufVxuXG5pbmhlcml0cyhJbmZvUmVjZWl2ZXJJZnJhbWUsIEV2ZW50RW1pdHRlcik7XG5cbkluZm9SZWNlaXZlcklmcmFtZS50cmFuc3BvcnROYW1lID0gJ2lmcmFtZS1pbmZvLXJlY2VpdmVyJztcblxuSW5mb1JlY2VpdmVySWZyYW1lLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5pcikge1xuICAgIHRoaXMuaXIuY2xvc2UoKTtcbiAgICB0aGlzLmlyID0gbnVsbDtcbiAgfVxuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbmZvUmVjZWl2ZXJJZnJhbWU7XG5cbn0se1wiLi9pbmZvLWFqYXhcIjo5LFwiLi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbFwiOjM3LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTcsXCJqc29uM1wiOjU4fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJylcbiAgLCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvZXZlbnQnKVxuICAsIElmcmFtZVRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L2lmcmFtZScpXG4gICwgSW5mb1JlY2VpdmVySWZyYW1lID0gcmVxdWlyZSgnLi9pbmZvLWlmcmFtZS1yZWNlaXZlcicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDppbmZvLWlmcmFtZScpO1xufVxuXG5mdW5jdGlvbiBJbmZvSWZyYW1lKGJhc2VVcmwsIHVybCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBnbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZnIgPSBzZWxmLmlmciA9IG5ldyBJZnJhbWVUcmFuc3BvcnQoSW5mb1JlY2VpdmVySWZyYW1lLnRyYW5zcG9ydE5hbWUsIHVybCwgYmFzZVVybCk7XG5cbiAgICBpZnIub25jZSgnbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykge1xuICAgICAgaWYgKG1zZykge1xuICAgICAgICB2YXIgZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBkID0gSlNPTjMucGFyc2UobXNnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGRlYnVnKCdiYWQganNvbicsIG1zZyk7XG4gICAgICAgICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZm8gPSBkWzBdLCBydHQgPSBkWzFdO1xuICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gICAgICB9XG4gICAgICBzZWxmLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBpZnIub25jZSgnY2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZW1pdCgnZmluaXNoJyk7XG4gICAgICBzZWxmLmNsb3NlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gVE9ETyB0aGlzIHNlZW1zIHRoZSBzYW1lIGFzIHRoZSAnbmVlZEJvZHknIGZyb20gdHJhbnNwb3J0c1xuICBpZiAoIWdsb2JhbC5kb2N1bWVudC5ib2R5KSB7XG4gICAgdXRpbHMuYXR0YWNoRXZlbnQoJ2xvYWQnLCBnbyk7XG4gIH0gZWxzZSB7XG4gICAgZ28oKTtcbiAgfVxufVxuXG5pbmhlcml0cyhJbmZvSWZyYW1lLCBFdmVudEVtaXR0ZXIpO1xuXG5JbmZvSWZyYW1lLmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIElmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCk7XG59O1xuXG5JbmZvSWZyYW1lLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5pZnIpIHtcbiAgICB0aGlzLmlmci5jbG9zZSgpO1xuICB9XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIHRoaXMuaWZyID0gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb0lmcmFtZTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi9pbmZvLWlmcmFtZS1yZWNlaXZlclwiOjEwLFwiLi90cmFuc3BvcnQvaWZyYW1lXCI6MjIsXCIuL3V0aWxzL2V2ZW50XCI6NDYsXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTcsXCJqc29uM1wiOjU4fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi91dGlscy91cmwnKVxuICAsIFhEUiA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94ZHInKVxuICAsIFhIUkNvcnMgPSByZXF1aXJlKCcuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWNvcnMnKVxuICAsIFhIUkxvY2FsID0gcmVxdWlyZSgnLi90cmFuc3BvcnQvc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgWEhSRmFrZSA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0L3NlbmRlci94aHItZmFrZScpXG4gICwgSW5mb0lmcmFtZSA9IHJlcXVpcmUoJy4vaW5mby1pZnJhbWUnKVxuICAsIEluZm9BamF4ID0gcmVxdWlyZSgnLi9pbmZvLWFqYXgnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6aW5mby1yZWNlaXZlcicpO1xufVxuXG5mdW5jdGlvbiBJbmZvUmVjZWl2ZXIoYmFzZVVybCwgdXJsSW5mbykge1xuICBkZWJ1ZyhiYXNlVXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuZG9YaHIoYmFzZVVybCwgdXJsSW5mbyk7XG4gIH0sIDApO1xufVxuXG5pbmhlcml0cyhJbmZvUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbi8vIFRPRE8gdGhpcyBpcyBjdXJyZW50bHkgaWdub3JpbmcgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIHRyYW5zcG9ydHMgYW5kIHRoZSB3aGl0ZWxpc3RcblxuSW5mb1JlY2VpdmVyLl9nZXRSZWNlaXZlciA9IGZ1bmN0aW9uKGJhc2VVcmwsIHVybCwgdXJsSW5mbykge1xuICAvLyBkZXRlcm1pbmUgbWV0aG9kIG9mIENPUlMgc3VwcG9ydCAoaWYgbmVlZGVkKVxuICBpZiAodXJsSW5mby5zYW1lT3JpZ2luKSB7XG4gICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkxvY2FsKTtcbiAgfVxuICBpZiAoWEhSQ29ycy5lbmFibGVkKSB7XG4gICAgcmV0dXJuIG5ldyBJbmZvQWpheCh1cmwsIFhIUkNvcnMpO1xuICB9XG4gIGlmIChYRFIuZW5hYmxlZCAmJiB1cmxJbmZvLnNhbWVTY2hlbWUpIHtcbiAgICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWERSKTtcbiAgfVxuICBpZiAoSW5mb0lmcmFtZS5lbmFibGVkKCkpIHtcbiAgICByZXR1cm4gbmV3IEluZm9JZnJhbWUoYmFzZVVybCwgdXJsKTtcbiAgfVxuICByZXR1cm4gbmV3IEluZm9BamF4KHVybCwgWEhSRmFrZSk7XG59O1xuXG5JbmZvUmVjZWl2ZXIucHJvdG90eXBlLmRvWGhyID0gZnVuY3Rpb24oYmFzZVVybCwgdXJsSW5mbykge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgICAsIHVybCA9IHVybFV0aWxzLmFkZFBhdGgoYmFzZVVybCwgJy9pbmZvJylcbiAgICA7XG4gIGRlYnVnKCdkb1hocicsIHVybCk7XG5cbiAgdGhpcy54byA9IEluZm9SZWNlaXZlci5fZ2V0UmVjZWl2ZXIoYmFzZVVybCwgdXJsLCB1cmxJbmZvKTtcblxuICB0aGlzLnRpbWVvdXRSZWYgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd0aW1lb3V0Jyk7XG4gICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gICAgc2VsZi5lbWl0KCdmaW5pc2gnKTtcbiAgfSwgSW5mb1JlY2VpdmVyLnRpbWVvdXQpO1xuXG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oaW5mbywgcnR0KSB7XG4gICAgZGVidWcoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gICAgc2VsZi5fY2xlYW51cCh0cnVlKTtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIGluZm8sIHJ0dCk7XG4gIH0pO1xufTtcblxuSW5mb1JlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKHdhc0NsZWFuKSB7XG4gIGRlYnVnKCdfY2xlYW51cCcpO1xuICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0UmVmKTtcbiAgdGhpcy50aW1lb3V0UmVmID0gbnVsbDtcbiAgaWYgKCF3YXNDbGVhbiAmJiB0aGlzLnhvKSB7XG4gICAgdGhpcy54by5jbG9zZSgpO1xuICB9XG4gIHRoaXMueG8gPSBudWxsO1xufTtcblxuSW5mb1JlY2VpdmVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG59O1xuXG5JbmZvUmVjZWl2ZXIudGltZW91dCA9IDgwMDA7XG5cbm1vZHVsZS5leHBvcnRzID0gSW5mb1JlY2VpdmVyO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi9pbmZvLWFqYXhcIjo5LFwiLi9pbmZvLWlmcmFtZVwiOjExLFwiLi90cmFuc3BvcnQvc2VuZGVyL3hkclwiOjM0LFwiLi90cmFuc3BvcnQvc2VuZGVyL3hoci1jb3JzXCI6MzUsXCIuL3RyYW5zcG9ydC9zZW5kZXIveGhyLWZha2VcIjozNixcIi4vdHJhbnNwb3J0L3NlbmRlci94aHItbG9jYWxcIjozNyxcIi4vdXRpbHMvdXJsXCI6NTIsXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmxvY2F0aW9uIHx8IHtcbiAgb3JpZ2luOiAnaHR0cDovL2xvY2FsaG9zdDo4MCdcbiwgcHJvdG9jb2w6ICdodHRwOidcbiwgaG9zdDogJ2xvY2FsaG9zdCdcbiwgcG9ydDogODBcbiwgaHJlZjogJ2h0dHA6Ly9sb2NhbGhvc3QvJ1xuLCBoYXNoOiAnJ1xufTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuL3NoaW1zJyk7XG5cbnZhciBVUkwgPSByZXF1aXJlKCd1cmwtcGFyc2UnKVxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4vdXRpbHMvcmFuZG9tJylcbiAgLCBlc2NhcGUgPSByZXF1aXJlKCcuL3V0aWxzL2VzY2FwZScpXG4gICwgdXJsVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3VybCcpXG4gICwgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvZXZlbnQnKVxuICAsIHRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdXRpbHMvdHJhbnNwb3J0JylcbiAgLCBvYmplY3RVdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvb2JqZWN0JylcbiAgLCBicm93c2VyID0gcmVxdWlyZSgnLi91dGlscy9icm93c2VyJylcbiAgLCBsb2cgPSByZXF1aXJlKCcuL3V0aWxzL2xvZycpXG4gICwgRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50L2V2ZW50JylcbiAgLCBFdmVudFRhcmdldCA9IHJlcXVpcmUoJy4vZXZlbnQvZXZlbnR0YXJnZXQnKVxuICAsIGxvYyA9IHJlcXVpcmUoJy4vbG9jYXRpb24nKVxuICAsIENsb3NlRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50L2Nsb3NlJylcbiAgLCBUcmFuc3BvcnRNZXNzYWdlRXZlbnQgPSByZXF1aXJlKCcuL2V2ZW50L3RyYW5zLW1lc3NhZ2UnKVxuICAsIEluZm9SZWNlaXZlciA9IHJlcXVpcmUoJy4vaW5mby1yZWNlaXZlcicpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDptYWluJyk7XG59XG5cbnZhciB0cmFuc3BvcnRzO1xuXG4vLyBmb2xsb3cgY29uc3RydWN0b3Igc3RlcHMgZGVmaW5lZCBhdCBodHRwOi8vZGV2LnczLm9yZy9odG1sNS93ZWJzb2NrZXRzLyN0aGUtd2Vic29ja2V0LWludGVyZmFjZVxuZnVuY3Rpb24gU29ja0pTKHVybCwgcHJvdG9jb2xzLCBvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTb2NrSlMpKSB7XG4gICAgcmV0dXJuIG5ldyBTb2NrSlModXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpO1xuICB9XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdTb2NrSlM6IDEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudFwiKTtcbiAgfVxuICBFdmVudFRhcmdldC5jYWxsKHRoaXMpO1xuXG4gIHRoaXMucmVhZHlTdGF0ZSA9IFNvY2tKUy5DT05ORUNUSU5HO1xuICB0aGlzLmV4dGVuc2lvbnMgPSAnJztcbiAgdGhpcy5wcm90b2NvbCA9ICcnO1xuXG4gIC8vIG5vbi1zdGFuZGFyZCBleHRlbnNpb25cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvcHRpb25zLnByb3RvY29sc193aGl0ZWxpc3QpIHtcbiAgICBsb2cud2FybihcIidwcm90b2NvbHNfd2hpdGVsaXN0JyBpcyBERVBSRUNBVEVELiBVc2UgJ3RyYW5zcG9ydHMnIGluc3RlYWQuXCIpO1xuICB9XG4gIHRoaXMuX3RyYW5zcG9ydHNXaGl0ZWxpc3QgPSBvcHRpb25zLnRyYW5zcG9ydHM7XG4gIHRoaXMuX3RyYW5zcG9ydE9wdGlvbnMgPSBvcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMgfHwge307XG4gIHRoaXMuX3RpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQgfHwgMDtcblxuICB2YXIgc2Vzc2lvbklkID0gb3B0aW9ucy5zZXNzaW9uSWQgfHwgODtcbiAgaWYgKHR5cGVvZiBzZXNzaW9uSWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLl9nZW5lcmF0ZVNlc3Npb25JZCA9IHNlc3Npb25JZDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2Vzc2lvbklkID09PSAnbnVtYmVyJykge1xuICAgIHRoaXMuX2dlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gcmFuZG9tLnN0cmluZyhzZXNzaW9uSWQpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSWYgc2Vzc2lvbklkIGlzIHVzZWQgaW4gdGhlIG9wdGlvbnMsIGl0IG5lZWRzIHRvIGJlIGEgbnVtYmVyIG9yIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB0aGlzLl9zZXJ2ZXIgPSBvcHRpb25zLnNlcnZlciB8fCByYW5kb20ubnVtYmVyU3RyaW5nKDEwMDApO1xuXG4gIC8vIFN0ZXAgMSBvZiBXUyBzcGVjIC0gcGFyc2UgYW5kIHZhbGlkYXRlIHRoZSB1cmwuIElzc3VlICM4XG4gIHZhciBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gIGlmICghcGFyc2VkVXJsLmhvc3QgfHwgIXBhcnNlZFVybC5wcm90b2NvbCkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBVUkwgJ1wiICsgdXJsICsgXCInIGlzIGludmFsaWRcIik7XG4gIH0gZWxzZSBpZiAocGFyc2VkVXJsLmhhc2gpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1RoZSBVUkwgbXVzdCBub3QgY29udGFpbiBhIGZyYWdtZW50Jyk7XG4gIH0gZWxzZSBpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSAnaHR0cDonICYmIHBhcnNlZFVybC5wcm90b2NvbCAhPT0gJ2h0dHBzOicpIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgVVJMJ3Mgc2NoZW1lIG11c3QgYmUgZWl0aGVyICdodHRwOicgb3IgJ2h0dHBzOicuICdcIiArIHBhcnNlZFVybC5wcm90b2NvbCArIFwiJyBpcyBub3QgYWxsb3dlZC5cIik7XG4gIH1cblxuICB2YXIgc2VjdXJlID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcbiAgLy8gU3RlcCAyIC0gZG9uJ3QgYWxsb3cgc2VjdXJlIG9yaWdpbiB3aXRoIGFuIGluc2VjdXJlIHByb3RvY29sXG4gIGlmIChsb2MucHJvdG9jb2wgPT09ICdodHRwczonICYmICFzZWN1cmUpIHtcbiAgICAvLyBleGNlcHRpb24gaXMgMTI3LjAuMC4wLzggYW5kIDo6MSB1cmxzXG4gICAgaWYgKCF1cmxVdGlscy5pc0xvb3BiYWNrQWRkcihwYXJzZWRVcmwuaG9zdG5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlY3VyaXR5RXJyb3I6IEFuIGluc2VjdXJlIFNvY2tKUyBjb25uZWN0aW9uIG1heSBub3QgYmUgaW5pdGlhdGVkIGZyb20gYSBwYWdlIGxvYWRlZCBvdmVyIEhUVFBTJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3RlcCAzIC0gY2hlY2sgcG9ydCBhY2Nlc3MgLSBubyBuZWVkIGhlcmVcbiAgLy8gU3RlcCA0IC0gcGFyc2UgcHJvdG9jb2xzIGFyZ3VtZW50XG4gIGlmICghcHJvdG9jb2xzKSB7XG4gICAgcHJvdG9jb2xzID0gW107XG4gIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocHJvdG9jb2xzKSkge1xuICAgIHByb3RvY29scyA9IFtwcm90b2NvbHNdO1xuICB9XG5cbiAgLy8gU3RlcCA1IC0gY2hlY2sgcHJvdG9jb2xzIGFyZ3VtZW50XG4gIHZhciBzb3J0ZWRQcm90b2NvbHMgPSBwcm90b2NvbHMuc29ydCgpO1xuICBzb3J0ZWRQcm90b2NvbHMuZm9yRWFjaChmdW5jdGlvbihwcm90bywgaSkge1xuICAgIGlmICghcHJvdG8pIHtcbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBwcm90b2NvbHMgZW50cnkgJ1wiICsgcHJvdG8gKyBcIicgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuICAgIGlmIChpIDwgKHNvcnRlZFByb3RvY29scy5sZW5ndGggLSAxKSAmJiBwcm90byA9PT0gc29ydGVkUHJvdG9jb2xzW2kgKyAxXSkge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVGhlIHByb3RvY29scyBlbnRyeSAnXCIgKyBwcm90byArIFwiJyBpcyBkdXBsaWNhdGVkLlwiKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFN0ZXAgNiAtIGNvbnZlcnQgb3JpZ2luXG4gIHZhciBvID0gdXJsVXRpbHMuZ2V0T3JpZ2luKGxvYy5ocmVmKTtcbiAgdGhpcy5fb3JpZ2luID0gbyA/IG8udG9Mb3dlckNhc2UoKSA6IG51bGw7XG5cbiAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaFxuICBwYXJzZWRVcmwuc2V0KCdwYXRobmFtZScsIHBhcnNlZFVybC5wYXRobmFtZS5yZXBsYWNlKC9cXC8rJC8sICcnKSk7XG5cbiAgLy8gc3RvcmUgdGhlIHNhbml0aXplZCB1cmxcbiAgdGhpcy51cmwgPSBwYXJzZWRVcmwuaHJlZjtcbiAgZGVidWcoJ3VzaW5nIHVybCcsIHRoaXMudXJsKTtcblxuICAvLyBTdGVwIDcgLSBzdGFydCBjb25uZWN0aW9uIGluIGJhY2tncm91bmRcbiAgLy8gb2J0YWluIHNlcnZlciBpbmZvXG4gIC8vIGh0dHA6Ly9zb2NranMuZ2l0aHViLmlvL3NvY2tqcy1wcm90b2NvbC9zb2NranMtcHJvdG9jb2wtMC4zLjMuaHRtbCNzZWN0aW9uLTI2XG4gIHRoaXMuX3VybEluZm8gPSB7XG4gICAgbnVsbE9yaWdpbjogIWJyb3dzZXIuaGFzRG9tYWluKClcbiAgLCBzYW1lT3JpZ2luOiB1cmxVdGlscy5pc09yaWdpbkVxdWFsKHRoaXMudXJsLCBsb2MuaHJlZilcbiAgLCBzYW1lU2NoZW1lOiB1cmxVdGlscy5pc1NjaGVtZUVxdWFsKHRoaXMudXJsLCBsb2MuaHJlZilcbiAgfTtcblxuICB0aGlzLl9pciA9IG5ldyBJbmZvUmVjZWl2ZXIodGhpcy51cmwsIHRoaXMuX3VybEluZm8pO1xuICB0aGlzLl9pci5vbmNlKCdmaW5pc2gnLCB0aGlzLl9yZWNlaXZlSW5mby5iaW5kKHRoaXMpKTtcbn1cblxuaW5oZXJpdHMoU29ja0pTLCBFdmVudFRhcmdldCk7XG5cbmZ1bmN0aW9uIHVzZXJTZXRDb2RlKGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPT09IDEwMDAgfHwgKGNvZGUgPj0gMzAwMCAmJiBjb2RlIDw9IDQ5OTkpO1xufVxuXG5Tb2NrSlMucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7XG4gIC8vIFN0ZXAgMVxuICBpZiAoY29kZSAmJiAhdXNlclNldENvZGUoY29kZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWRBY2Nlc3NFcnJvcjogSW52YWxpZCBjb2RlJyk7XG4gIH1cbiAgLy8gU3RlcCAyLjQgc3RhdGVzIHRoZSBtYXggaXMgMTIzIGJ5dGVzLCBidXQgd2UgYXJlIGp1c3QgY2hlY2tpbmcgbGVuZ3RoXG4gIGlmIChyZWFzb24gJiYgcmVhc29uLmxlbmd0aCA+IDEyMykge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigncmVhc29uIGFyZ3VtZW50IGhhcyBhbiBpbnZhbGlkIGxlbmd0aCcpO1xuICB9XG5cbiAgLy8gU3RlcCAzLjFcbiAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNMT1NJTkcgfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ0xPU0VEKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVE9ETyBsb29rIGF0IGRvY3MgdG8gZGV0ZXJtaW5lIGhvdyB0byBzZXQgdGhpc1xuICB2YXIgd2FzQ2xlYW4gPSB0cnVlO1xuICB0aGlzLl9jbG9zZShjb2RlIHx8IDEwMDAsIHJlYXNvbiB8fCAnTm9ybWFsIGNsb3N1cmUnLCB3YXNDbGVhbik7XG59O1xuXG5Tb2NrSlMucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gIC8vICMxMyAtIGNvbnZlcnQgYW55dGhpbmcgbm9uLXN0cmluZyB0byBzdHJpbmdcbiAgLy8gVE9ETyB0aGlzIGN1cnJlbnRseSB0dXJucyBvYmplY3RzIGludG8gW29iamVjdCBPYmplY3RdXG4gIGlmICh0eXBlb2YgZGF0YSAhPT0gJ3N0cmluZycpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICB9XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkU3RhdGVFcnJvcjogVGhlIGNvbm5lY3Rpb24gaGFzIG5vdCBiZWVuIGVzdGFibGlzaGVkIHlldCcpO1xuICB9XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFNvY2tKUy5PUEVOKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuX3RyYW5zcG9ydC5zZW5kKGVzY2FwZS5xdW90ZShkYXRhKSk7XG59O1xuXG5Tb2NrSlMudmVyc2lvbiA9IHJlcXVpcmUoJy4vdmVyc2lvbicpO1xuXG5Tb2NrSlMuQ09OTkVDVElORyA9IDA7XG5Tb2NrSlMuT1BFTiA9IDE7XG5Tb2NrSlMuQ0xPU0lORyA9IDI7XG5Tb2NrSlMuQ0xPU0VEID0gMztcblxuU29ja0pTLnByb3RvdHlwZS5fcmVjZWl2ZUluZm8gPSBmdW5jdGlvbihpbmZvLCBydHQpIHtcbiAgZGVidWcoJ19yZWNlaXZlSW5mbycsIHJ0dCk7XG4gIHRoaXMuX2lyID0gbnVsbDtcbiAgaWYgKCFpbmZvKSB7XG4gICAgdGhpcy5fY2xvc2UoMTAwMiwgJ0Nhbm5vdCBjb25uZWN0IHRvIHNlcnZlcicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGVzdGFibGlzaCBhIHJvdW5kLXRyaXAgdGltZW91dCAoUlRPKSBiYXNlZCBvbiB0aGVcbiAgLy8gcm91bmQtdHJpcCB0aW1lIChSVFQpXG4gIHRoaXMuX3J0byA9IHRoaXMuY291bnRSVE8ocnR0KTtcbiAgLy8gYWxsb3cgc2VydmVyIHRvIG92ZXJyaWRlIHVybCB1c2VkIGZvciB0aGUgYWN0dWFsIHRyYW5zcG9ydFxuICB0aGlzLl90cmFuc1VybCA9IGluZm8uYmFzZV91cmwgPyBpbmZvLmJhc2VfdXJsIDogdGhpcy51cmw7XG4gIGluZm8gPSBvYmplY3RVdGlscy5leHRlbmQoaW5mbywgdGhpcy5fdXJsSW5mbyk7XG4gIGRlYnVnKCdpbmZvJywgaW5mbyk7XG4gIC8vIGRldGVybWluZSBsaXN0IG9mIGRlc2lyZWQgYW5kIHN1cHBvcnRlZCB0cmFuc3BvcnRzXG4gIHZhciBlbmFibGVkVHJhbnNwb3J0cyA9IHRyYW5zcG9ydHMuZmlsdGVyVG9FbmFibGVkKHRoaXMuX3RyYW5zcG9ydHNXaGl0ZWxpc3QsIGluZm8pO1xuICB0aGlzLl90cmFuc3BvcnRzID0gZW5hYmxlZFRyYW5zcG9ydHMubWFpbjtcbiAgZGVidWcodGhpcy5fdHJhbnNwb3J0cy5sZW5ndGggKyAnIGVuYWJsZWQgdHJhbnNwb3J0cycpO1xuXG4gIHRoaXMuX2Nvbm5lY3QoKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX2Nvbm5lY3QgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgVHJhbnNwb3J0ID0gdGhpcy5fdHJhbnNwb3J0cy5zaGlmdCgpOyBUcmFuc3BvcnQ7IFRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydHMuc2hpZnQoKSkge1xuICAgIGRlYnVnKCdhdHRlbXB0JywgVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUpO1xuICAgIGlmIChUcmFuc3BvcnQubmVlZEJvZHkpIHtcbiAgICAgIGlmICghZ2xvYmFsLmRvY3VtZW50LmJvZHkgfHxcbiAgICAgICAgICAodHlwZW9mIGdsb2JhbC5kb2N1bWVudC5yZWFkeVN0YXRlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgZ2xvYmFsLmRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdjb21wbGV0ZScgJiZcbiAgICAgICAgICAgIGdsb2JhbC5kb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnaW50ZXJhY3RpdmUnKSkge1xuICAgICAgICBkZWJ1Zygnd2FpdGluZyBmb3IgYm9keScpO1xuICAgICAgICB0aGlzLl90cmFuc3BvcnRzLnVuc2hpZnQoVHJhbnNwb3J0KTtcbiAgICAgICAgZXZlbnRVdGlscy5hdHRhY2hFdmVudCgnbG9hZCcsIHRoaXMuX2Nvbm5lY3QuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgdGltZW91dCBiYXNlZCBvbiBSVE8gYW5kIHJvdW5kIHRyaXBzLiBEZWZhdWx0IHRvIDVzXG4gICAgdmFyIHRpbWVvdXRNcyA9IE1hdGgubWF4KHRoaXMuX3RpbWVvdXQsICh0aGlzLl9ydG8gKiBUcmFuc3BvcnQucm91bmRUcmlwcykgfHwgNTAwMCk7XG4gICAgdGhpcy5fdHJhbnNwb3J0VGltZW91dElkID0gc2V0VGltZW91dCh0aGlzLl90cmFuc3BvcnRUaW1lb3V0LmJpbmQodGhpcyksIHRpbWVvdXRNcyk7XG4gICAgZGVidWcoJ3VzaW5nIHRpbWVvdXQnLCB0aW1lb3V0TXMpO1xuXG4gICAgdmFyIHRyYW5zcG9ydFVybCA9IHVybFV0aWxzLmFkZFBhdGgodGhpcy5fdHJhbnNVcmwsICcvJyArIHRoaXMuX3NlcnZlciArICcvJyArIHRoaXMuX2dlbmVyYXRlU2Vzc2lvbklkKCkpO1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5fdHJhbnNwb3J0T3B0aW9uc1tUcmFuc3BvcnQudHJhbnNwb3J0TmFtZV07XG4gICAgZGVidWcoJ3RyYW5zcG9ydCB1cmwnLCB0cmFuc3BvcnRVcmwpO1xuICAgIHZhciB0cmFuc3BvcnRPYmogPSBuZXcgVHJhbnNwb3J0KHRyYW5zcG9ydFVybCwgdGhpcy5fdHJhbnNVcmwsIG9wdGlvbnMpO1xuICAgIHRyYW5zcG9ydE9iai5vbignbWVzc2FnZScsIHRoaXMuX3RyYW5zcG9ydE1lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgdHJhbnNwb3J0T2JqLm9uY2UoJ2Nsb3NlJywgdGhpcy5fdHJhbnNwb3J0Q2xvc2UuYmluZCh0aGlzKSk7XG4gICAgdHJhbnNwb3J0T2JqLnRyYW5zcG9ydE5hbWUgPSBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZTtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSB0cmFuc3BvcnRPYmo7XG5cbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5fY2xvc2UoMjAwMCwgJ0FsbCB0cmFuc3BvcnRzIGZhaWxlZCcsIGZhbHNlKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX3RyYW5zcG9ydFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ190cmFuc3BvcnRUaW1lb3V0Jyk7XG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DT05ORUNUSU5HKSB7XG4gICAgaWYgKHRoaXMuX3RyYW5zcG9ydCkge1xuICAgICAgdGhpcy5fdHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fdHJhbnNwb3J0Q2xvc2UoMjAwNywgJ1RyYW5zcG9ydCB0aW1lZCBvdXQnKTtcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0TWVzc2FnZSA9IGZ1bmN0aW9uKG1zZykge1xuICBkZWJ1ZygnX3RyYW5zcG9ydE1lc3NhZ2UnLCBtc2cpO1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgICAsIHR5cGUgPSBtc2cuc2xpY2UoMCwgMSlcbiAgICAsIGNvbnRlbnQgPSBtc2cuc2xpY2UoMSlcbiAgICAsIHBheWxvYWRcbiAgICA7XG5cbiAgLy8gZmlyc3QgY2hlY2sgZm9yIG1lc3NhZ2VzIHRoYXQgZG9uJ3QgbmVlZCBhIHBheWxvYWRcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbyc6XG4gICAgICB0aGlzLl9vcGVuKCk7XG4gICAgICByZXR1cm47XG4gICAgY2FzZSAnaCc6XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdoZWFydGJlYXQnKSk7XG4gICAgICBkZWJ1ZygnaGVhcnRiZWF0JywgdGhpcy50cmFuc3BvcnQpO1xuICAgICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbnRlbnQpIHtcbiAgICB0cnkge1xuICAgICAgcGF5bG9hZCA9IEpTT04zLnBhcnNlKGNvbnRlbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRlYnVnKCdiYWQganNvbicsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkZWJ1ZygnZW1wdHkgcGF5bG9hZCcsIGNvbnRlbnQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ2EnOlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF5bG9hZCkpIHtcbiAgICAgICAgcGF5bG9hZC5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICBkZWJ1ZygnbWVzc2FnZScsIHNlbGYudHJhbnNwb3J0LCBwKTtcbiAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IFRyYW5zcG9ydE1lc3NhZ2VFdmVudChwKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnbSc6XG4gICAgICBkZWJ1ZygnbWVzc2FnZScsIHRoaXMudHJhbnNwb3J0LCBwYXlsb2FkKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVHJhbnNwb3J0TWVzc2FnZUV2ZW50KHBheWxvYWQpKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2MnOlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF5bG9hZCkgJiYgcGF5bG9hZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgdGhpcy5fY2xvc2UocGF5bG9hZFswXSwgcGF5bG9hZFsxXSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxufTtcblxuU29ja0pTLnByb3RvdHlwZS5fdHJhbnNwb3J0Q2xvc2UgPSBmdW5jdGlvbihjb2RlLCByZWFzb24pIHtcbiAgZGVidWcoJ190cmFuc3BvcnRDbG9zZScsIHRoaXMudHJhbnNwb3J0LCBjb2RlLCByZWFzb24pO1xuICBpZiAodGhpcy5fdHJhbnNwb3J0KSB7XG4gICAgdGhpcy5fdHJhbnNwb3J0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG51bGw7XG4gICAgdGhpcy50cmFuc3BvcnQgPSBudWxsO1xuICB9XG5cbiAgaWYgKCF1c2VyU2V0Q29kZShjb2RlKSAmJiBjb2RlICE9PSAyMDAwICYmIHRoaXMucmVhZHlTdGF0ZSA9PT0gU29ja0pTLkNPTk5FQ1RJTkcpIHtcbiAgICB0aGlzLl9jb25uZWN0KCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGhpcy5fY2xvc2UoY29kZSwgcmVhc29uKTtcbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX29wZW4gPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19vcGVuJywgdGhpcy5fdHJhbnNwb3J0ICYmIHRoaXMuX3RyYW5zcG9ydC50cmFuc3BvcnROYW1lLCB0aGlzLnJlYWR5U3RhdGUpO1xuICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBTb2NrSlMuQ09OTkVDVElORykge1xuICAgIGlmICh0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90cmFuc3BvcnRUaW1lb3V0SWQpO1xuICAgICAgdGhpcy5fdHJhbnNwb3J0VGltZW91dElkID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gU29ja0pTLk9QRU47XG4gICAgdGhpcy50cmFuc3BvcnQgPSB0aGlzLl90cmFuc3BvcnQudHJhbnNwb3J0TmFtZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdvcGVuJykpO1xuICAgIGRlYnVnKCdjb25uZWN0ZWQnLCB0aGlzLnRyYW5zcG9ydCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhlIHNlcnZlciBtaWdodCBoYXZlIGJlZW4gcmVzdGFydGVkLCBhbmQgbG9zdCB0cmFjayBvZiBvdXJcbiAgICAvLyBjb25uZWN0aW9uLlxuICAgIHRoaXMuX2Nsb3NlKDEwMDYsICdTZXJ2ZXIgbG9zdCBzZXNzaW9uJyk7XG4gIH1cbn07XG5cblNvY2tKUy5wcm90b3R5cGUuX2Nsb3NlID0gZnVuY3Rpb24oY29kZSwgcmVhc29uLCB3YXNDbGVhbikge1xuICBkZWJ1ZygnX2Nsb3NlJywgdGhpcy50cmFuc3BvcnQsIGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4sIHRoaXMucmVhZHlTdGF0ZSk7XG4gIHZhciBmb3JjZUZhaWwgPSBmYWxzZTtcblxuICBpZiAodGhpcy5faXIpIHtcbiAgICBmb3JjZUZhaWwgPSB0cnVlO1xuICAgIHRoaXMuX2lyLmNsb3NlKCk7XG4gICAgdGhpcy5faXIgPSBudWxsO1xuICB9XG4gIGlmICh0aGlzLl90cmFuc3BvcnQpIHtcbiAgICB0aGlzLl90cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSBudWxsO1xuICAgIHRoaXMudHJhbnNwb3J0ID0gbnVsbDtcbiAgfVxuXG4gIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFNvY2tKUy5DTE9TRUQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWRTdGF0ZUVycm9yOiBTb2NrSlMgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQnKTtcbiAgfVxuXG4gIHRoaXMucmVhZHlTdGF0ZSA9IFNvY2tKUy5DTE9TSU5HO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNvY2tKUy5DTE9TRUQ7XG5cbiAgICBpZiAoZm9yY2VGYWlsKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdlcnJvcicpKTtcbiAgICB9XG5cbiAgICB2YXIgZSA9IG5ldyBDbG9zZUV2ZW50KCdjbG9zZScpO1xuICAgIGUud2FzQ2xlYW4gPSB3YXNDbGVhbiB8fCBmYWxzZTtcbiAgICBlLmNvZGUgPSBjb2RlIHx8IDEwMDA7XG4gICAgZS5yZWFzb24gPSByZWFzb247XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgdGhpcy5vbm1lc3NhZ2UgPSB0aGlzLm9uY2xvc2UgPSB0aGlzLm9uZXJyb3IgPSBudWxsO1xuICAgIGRlYnVnKCdkaXNjb25uZWN0ZWQnKTtcbiAgfS5iaW5kKHRoaXMpLCAwKTtcbn07XG5cbi8vIFNlZTogaHR0cDovL3d3dy5lcmcuYWJkbi5hYy51ay9+Z2Vycml0L2RjY3Avbm90ZXMvY2NpZDIvcnRvX2VzdGltYXRvci9cbi8vIGFuZCBSRkMgMjk4OC5cblNvY2tKUy5wcm90b3R5cGUuY291bnRSVE8gPSBmdW5jdGlvbihydHQpIHtcbiAgLy8gSW4gYSBsb2NhbCBlbnZpcm9ubWVudCwgd2hlbiB1c2luZyBJRTgvOSBhbmQgdGhlIGBqc29ucC1wb2xsaW5nYFxuICAvLyB0cmFuc3BvcnQgdGhlIHRpbWUgbmVlZGVkIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gKHRoZSB0aW1lIHRoYXQgcGFzc1xuICAvLyBmcm9tIHRoZSBvcGVuaW5nIG9mIHRoZSB0cmFuc3BvcnQgdG8gdGhlIGNhbGwgb2YgYF9kaXNwYXRjaE9wZW5gKSBpc1xuICAvLyBhcm91bmQgMjAwbXNlYyAodGhlIGxvd2VyIGJvdW5kIHVzZWQgaW4gdGhlIGFydGljbGUgYWJvdmUpIGFuZCB0aGlzXG4gIC8vIGNhdXNlcyBzcHVyaW91cyB0aW1lb3V0cy4gRm9yIHRoaXMgcmVhc29uIHdlIGNhbGN1bGF0ZSBhIHZhbHVlIHNsaWdodGx5XG4gIC8vIGxhcmdlciB0aGFuIHRoYXQgdXNlZCBpbiB0aGUgYXJ0aWNsZS5cbiAgaWYgKHJ0dCA+IDEwMCkge1xuICAgIHJldHVybiA0ICogcnR0OyAvLyBydG8gPiA0MDBtc2VjXG4gIH1cbiAgcmV0dXJuIDMwMCArIHJ0dDsgLy8gMzAwbXNlYyA8IHJ0byA8PSA0MDBtc2VjXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGF2YWlsYWJsZVRyYW5zcG9ydHMpIHtcbiAgdHJhbnNwb3J0cyA9IHRyYW5zcG9ydChhdmFpbGFibGVUcmFuc3BvcnRzKTtcbiAgcmVxdWlyZSgnLi9pZnJhbWUtYm9vdHN0cmFwJykoU29ja0pTLCBhdmFpbGFibGVUcmFuc3BvcnRzKTtcbiAgcmV0dXJuIFNvY2tKUztcbn07XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4vZXZlbnQvY2xvc2VcIjoyLFwiLi9ldmVudC9ldmVudFwiOjQsXCIuL2V2ZW50L2V2ZW50dGFyZ2V0XCI6NSxcIi4vZXZlbnQvdHJhbnMtbWVzc2FnZVwiOjYsXCIuL2lmcmFtZS1ib290c3RyYXBcIjo4LFwiLi9pbmZvLXJlY2VpdmVyXCI6MTIsXCIuL2xvY2F0aW9uXCI6MTMsXCIuL3NoaW1zXCI6MTUsXCIuL3V0aWxzL2Jyb3dzZXJcIjo0NCxcIi4vdXRpbHMvZXNjYXBlXCI6NDUsXCIuL3V0aWxzL2V2ZW50XCI6NDYsXCIuL3V0aWxzL2xvZ1wiOjQ4LFwiLi91dGlscy9vYmplY3RcIjo0OSxcIi4vdXRpbHMvcmFuZG9tXCI6NTAsXCIuL3V0aWxzL3RyYW5zcG9ydFwiOjUxLFwiLi91dGlscy91cmxcIjo1MixcIi4vdmVyc2lvblwiOjUzLFwiZGVidWdcIjo1NSxcImluaGVyaXRzXCI6NTcsXCJqc29uM1wiOjU4LFwidXJsLXBhcnNlXCI6NjF9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoganNjczogZGlzYWJsZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBwdWxsZWQgc3BlY2lmaWMgc2hpbXMgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZXMtc2hpbXMvZXM1LXNoaW1cblxudmFyIEFycmF5UHJvdG90eXBlID0gQXJyYXkucHJvdG90eXBlO1xudmFyIE9iamVjdFByb3RvdHlwZSA9IE9iamVjdC5wcm90b3R5cGU7XG52YXIgRnVuY3Rpb25Qcm90b3R5cGUgPSBGdW5jdGlvbi5wcm90b3R5cGU7XG52YXIgU3RyaW5nUHJvdG90eXBlID0gU3RyaW5nLnByb3RvdHlwZTtcbnZhciBhcnJheV9zbGljZSA9IEFycmF5UHJvdG90eXBlLnNsaWNlO1xuXG52YXIgX3RvU3RyaW5nID0gT2JqZWN0UHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdFByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59O1xudmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KG9iaikge1xuICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbnZhciBpc1N0cmluZyA9IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBTdHJpbmddJztcbn07XG5cbnZhciBzdXBwb3J0c0Rlc2NyaXB0b3JzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIChmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAneCcsIHt9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkgeyAvKiB0aGlzIGlzIEVTMyAqL1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSgpKTtcblxuLy8gRGVmaW5lIGNvbmZpZ3VyYWJsZSwgd3JpdGFibGUgYW5kIG5vbi1lbnVtZXJhYmxlIHByb3BzXG4vLyBpZiB0aGV5IGRvbid0IGV4aXN0LlxudmFyIGRlZmluZVByb3BlcnR5O1xuaWYgKHN1cHBvcnRzRGVzY3JpcHRvcnMpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIG1ldGhvZCwgZm9yY2VBc3NpZ24pIHtcbiAgICAgICAgaWYgKCFmb3JjZUFzc2lnbiAmJiAobmFtZSBpbiBvYmplY3QpKSB7IHJldHVybjsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBuYW1lLCB7XG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG1ldGhvZFxuICAgICAgICB9KTtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIG1ldGhvZCwgZm9yY2VBc3NpZ24pIHtcbiAgICAgICAgaWYgKCFmb3JjZUFzc2lnbiAmJiAobmFtZSBpbiBvYmplY3QpKSB7IHJldHVybjsgfVxuICAgICAgICBvYmplY3RbbmFtZV0gPSBtZXRob2Q7XG4gICAgfTtcbn1cbnZhciBkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iamVjdCwgbWFwLCBmb3JjZUFzc2lnbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gbWFwKSB7XG4gICAgICAgIGlmIChPYmplY3RQcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtYXAsIG5hbWUpKSB7XG4gICAgICAgICAgZGVmaW5lUHJvcGVydHkob2JqZWN0LCBuYW1lLCBtYXBbbmFtZV0sIGZvcmNlQXNzaWduKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciB0b09iamVjdCA9IGZ1bmN0aW9uIChvKSB7XG4gICAgaWYgKG8gPT0gbnVsbCkgeyAvLyB0aGlzIG1hdGNoZXMgYm90aCBudWxsIGFuZCB1bmRlZmluZWRcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbid0IGNvbnZlcnQgXCIgKyBvICsgJyB0byBvYmplY3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdChvKTtcbn07XG5cbi8vXG4vLyBVdGlsXG4vLyA9PT09PT1cbi8vXG5cbi8vIEVTNSA5LjRcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDkuNFxuLy8gaHR0cDovL2pzcGVyZi5jb20vdG8taW50ZWdlclxuXG5mdW5jdGlvbiB0b0ludGVnZXIobnVtKSB7XG4gICAgdmFyIG4gPSArbnVtO1xuICAgIGlmIChuICE9PSBuKSB7IC8vIGlzTmFOXG4gICAgICAgIG4gPSAwO1xuICAgIH0gZWxzZSBpZiAobiAhPT0gMCAmJiBuICE9PSAoMSAvIDApICYmIG4gIT09IC0oMSAvIDApKSB7XG4gICAgICAgIG4gPSAobiA+IDAgfHwgLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhuKSk7XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBUb1VpbnQzMih4KSB7XG4gICAgcmV0dXJuIHggPj4+IDA7XG59XG5cbi8vXG4vLyBGdW5jdGlvblxuLy8gPT09PT09PT1cbi8vXG5cbi8vIEVTLTUgMTUuMy40LjVcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjMuNC41XG5cbmZ1bmN0aW9uIEVtcHR5KCkge31cblxuZGVmaW5lUHJvcGVydGllcyhGdW5jdGlvblByb3RvdHlwZSwge1xuICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQodGhhdCkgeyAvLyAubGVuZ3RoIGlzIDFcbiAgICAgICAgLy8gMS4gTGV0IFRhcmdldCBiZSB0aGUgdGhpcyB2YWx1ZS5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXM7XG4gICAgICAgIC8vIDIuIElmIElzQ2FsbGFibGUoVGFyZ2V0KSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoIWlzRnVuY3Rpb24odGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSAnICsgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzLiBMZXQgQSBiZSBhIG5ldyAocG9zc2libHkgZW1wdHkpIGludGVybmFsIGxpc3Qgb2YgYWxsIG9mIHRoZVxuICAgICAgICAvLyAgIGFyZ3VtZW50IHZhbHVlcyBwcm92aWRlZCBhZnRlciB0aGlzQXJnIChhcmcxLCBhcmcyIGV0YyksIGluIG9yZGVyLlxuICAgICAgICAvLyBYWFggc2xpY2VkQXJncyB3aWxsIHN0YW5kIGluIGZvciBcIkFcIiBpZiB1c2VkXG4gICAgICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOyAvLyBmb3Igbm9ybWFsIGNhbGxcbiAgICAgICAgLy8gNC4gTGV0IEYgYmUgYSBuZXcgbmF0aXZlIEVDTUFTY3JpcHQgb2JqZWN0LlxuICAgICAgICAvLyAxMS4gU2V0IHRoZSBbW1Byb3RvdHlwZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgdG8gdGhlIHN0YW5kYXJkXG4gICAgICAgIC8vICAgYnVpbHQtaW4gRnVuY3Rpb24gcHJvdG90eXBlIG9iamVjdCBhcyBzcGVjaWZpZWQgaW4gMTUuMy4zLjEuXG4gICAgICAgIC8vIDEyLiBTZXQgdGhlIFtbQ2FsbF1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgYXMgZGVzY3JpYmVkIGluXG4gICAgICAgIC8vICAgMTUuMy40LjUuMS5cbiAgICAgICAgLy8gMTMuIFNldCB0aGUgW1tDb25zdHJ1Y3RdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjIuXG4gICAgICAgIC8vIDE0LiBTZXQgdGhlIFtbSGFzSW5zdGFuY2VdXSBpbnRlcm5hbCBwcm9wZXJ0eSBvZiBGIGFzIGRlc2NyaWJlZCBpblxuICAgICAgICAvLyAgIDE1LjMuNC41LjMuXG4gICAgICAgIHZhciBiaW5kZXIgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgYm91bmQpIHtcbiAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4yIFtbQ29uc3RydWN0XV1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCBvZiBhIGZ1bmN0aW9uIG9iamVjdCxcbiAgICAgICAgICAgICAgICAvLyBGIHRoYXQgd2FzIGNyZWF0ZWQgdXNpbmcgdGhlIGJpbmQgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZyBzdGVwcyBhcmUgdGFrZW46XG4gICAgICAgICAgICAgICAgLy8gMS4gTGV0IHRhcmdldCBiZSB0aGUgdmFsdWUgb2YgRidzIFtbVGFyZ2V0RnVuY3Rpb25dXVxuICAgICAgICAgICAgICAgIC8vICAgaW50ZXJuYWwgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMi4gSWYgdGFyZ2V0IGhhcyBubyBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZCwgYVxuICAgICAgICAgICAgICAgIC8vICAgVHlwZUVycm9yIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG4gICAgICAgICAgICAgICAgLy8gMy4gTGV0IGJvdW5kQXJncyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRBcmdzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDQuIExldCBhcmdzIGJlIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWVzIGFzIHRoZSBsaXN0IEV4dHJhQXJncyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICAvLyA1LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsXG4gICAgICAgICAgICAgICAgLy8gICBtZXRob2Qgb2YgdGFyZ2V0IHByb3ZpZGluZyBhcmdzIGFzIHRoZSBhcmd1bWVudHMuXG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZS5jYWxsKGFyZ3VtZW50cykpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0KHJlc3VsdCkgPT09IHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAxNS4zLjQuNS4xIFtbQ2FsbF1dXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgW1tDYWxsXV0gaW50ZXJuYWwgbWV0aG9kIG9mIGEgZnVuY3Rpb24gb2JqZWN0LCBGLFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdhcyBjcmVhdGVkIHVzaW5nIHRoZSBiaW5kIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHZhbHVlIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzIEV4dHJhQXJncywgdGhlIGZvbGxvd2luZ1xuICAgICAgICAgICAgICAgIC8vIHN0ZXBzIGFyZSB0YWtlbjpcbiAgICAgICAgICAgICAgICAvLyAxLiBMZXQgYm91bmRBcmdzIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tCb3VuZEFyZ3NdXSBpbnRlcm5hbFxuICAgICAgICAgICAgICAgIC8vICAgcHJvcGVydHkuXG4gICAgICAgICAgICAgICAgLy8gMi4gTGV0IGJvdW5kVGhpcyBiZSB0aGUgdmFsdWUgb2YgRidzIFtbQm91bmRUaGlzXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDMuIExldCB0YXJnZXQgYmUgdGhlIHZhbHVlIG9mIEYncyBbW1RhcmdldEZ1bmN0aW9uXV0gaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAvLyAgIHByb3BlcnR5LlxuICAgICAgICAgICAgICAgIC8vIDQuIExldCBhcmdzIGJlIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gICBsaXN0IGJvdW5kQXJncyBpbiB0aGUgc2FtZSBvcmRlciBmb2xsb3dlZCBieSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWVzIGFzIHRoZSBsaXN0IEV4dHJhQXJncyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgICAgICAvLyA1LiBSZXR1cm4gdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NhbGxdXSBpbnRlcm5hbCBtZXRob2RcbiAgICAgICAgICAgICAgICAvLyAgIG9mIHRhcmdldCBwcm92aWRpbmcgYm91bmRUaGlzIGFzIHRoZSB0aGlzIHZhbHVlIGFuZFxuICAgICAgICAgICAgICAgIC8vICAgcHJvdmlkaW5nIGFyZ3MgYXMgdGhlIGFyZ3VtZW50cy5cblxuICAgICAgICAgICAgICAgIC8vIGVxdWl2OiB0YXJnZXQuY2FsbCh0aGlzLCAuLi5ib3VuZEFyZ3MsIC4uLmFyZ3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5hcHBseShcbiAgICAgICAgICAgICAgICAgICAgdGhhdCxcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UuY2FsbChhcmd1bWVudHMpKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIDE1LiBJZiB0aGUgW1tDbGFzc11dIGludGVybmFsIHByb3BlcnR5IG9mIFRhcmdldCBpcyBcIkZ1bmN0aW9uXCIsIHRoZW5cbiAgICAgICAgLy8gICAgIGEuIExldCBMIGJlIHRoZSBsZW5ndGggcHJvcGVydHkgb2YgVGFyZ2V0IG1pbnVzIHRoZSBsZW5ndGggb2YgQS5cbiAgICAgICAgLy8gICAgIGIuIFNldCB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIGVpdGhlciAwIG9yIEwsIHdoaWNoZXZlciBpc1xuICAgICAgICAvLyAgICAgICBsYXJnZXIuXG4gICAgICAgIC8vIDE2LiBFbHNlIHNldCB0aGUgbGVuZ3RoIG93biBwcm9wZXJ0eSBvZiBGIHRvIDAuXG5cbiAgICAgICAgdmFyIGJvdW5kTGVuZ3RoID0gTWF0aC5tYXgoMCwgdGFyZ2V0Lmxlbmd0aCAtIGFyZ3MubGVuZ3RoKTtcblxuICAgICAgICAvLyAxNy4gU2V0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBsZW5ndGggb3duIHByb3BlcnR5IG9mIEYgdG8gdGhlIHZhbHVlc1xuICAgICAgICAvLyAgIHNwZWNpZmllZCBpbiAxNS4zLjUuMS5cbiAgICAgICAgdmFyIGJvdW5kQXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvdW5kTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJvdW5kQXJncy5wdXNoKCckJyArIGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gWFhYIEJ1aWxkIGEgZHluYW1pYyBmdW5jdGlvbiB3aXRoIGRlc2lyZWQgYW1vdW50IG9mIGFyZ3VtZW50cyBpcyB0aGUgb25seVxuICAgICAgICAvLyB3YXkgdG8gc2V0IHRoZSBsZW5ndGggcHJvcGVydHkgb2YgYSBmdW5jdGlvbi5cbiAgICAgICAgLy8gSW4gZW52aXJvbm1lbnRzIHdoZXJlIENvbnRlbnQgU2VjdXJpdHkgUG9saWNpZXMgZW5hYmxlZCAoQ2hyb21lIGV4dGVuc2lvbnMsXG4gICAgICAgIC8vIGZvciBleC4pIGFsbCB1c2Ugb2YgZXZhbCBvciBGdW5jdGlvbiBjb3N0cnVjdG9yIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIC8vIEhvd2V2ZXIgaW4gYWxsIG9mIHRoZXNlIGVudmlyb25tZW50cyBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBleGlzdHNcbiAgICAgICAgLy8gYW5kIHNvIHRoaXMgY29kZSB3aWxsIG5ldmVyIGJlIGV4ZWN1dGVkLlxuICAgICAgICB2YXIgYm91bmQgPSBGdW5jdGlvbignYmluZGVyJywgJ3JldHVybiBmdW5jdGlvbiAoJyArIGJvdW5kQXJncy5qb2luKCcsJykgKyAnKXsgcmV0dXJuIGJpbmRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9JykoYmluZGVyKTtcblxuICAgICAgICBpZiAodGFyZ2V0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgRW1wdHkucHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgICAgIGJvdW5kLnByb3RvdHlwZSA9IG5ldyBFbXB0eSgpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZGFuZ2xpbmcgcmVmZXJlbmNlcy5cbiAgICAgICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE4LiBTZXQgdGhlIFtbRXh0ZW5zaWJsZV1dIGludGVybmFsIHByb3BlcnR5IG9mIEYgdG8gdHJ1ZS5cblxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIDE5LiBMZXQgdGhyb3dlciBiZSB0aGUgW1tUaHJvd1R5cGVFcnJvcl1dIGZ1bmN0aW9uIE9iamVjdCAoMTMuMi4zKS5cbiAgICAgICAgLy8gMjAuIENhbGwgdGhlIFtbRGVmaW5lT3duUHJvcGVydHldXSBpbnRlcm5hbCBtZXRob2Qgb2YgRiB3aXRoXG4gICAgICAgIC8vICAgYXJndW1lbnRzIFwiY2FsbGVyXCIsIFByb3BlcnR5RGVzY3JpcHRvciB7W1tHZXRdXTogdGhyb3dlciwgW1tTZXRdXTpcbiAgICAgICAgLy8gICB0aHJvd2VyLCBbW0VudW1lcmFibGVdXTogZmFsc2UsIFtbQ29uZmlndXJhYmxlXV06IGZhbHNlfSwgYW5kXG4gICAgICAgIC8vICAgZmFsc2UuXG4gICAgICAgIC8vIDIxLiBDYWxsIHRoZSBbW0RlZmluZU93blByb3BlcnR5XV0gaW50ZXJuYWwgbWV0aG9kIG9mIEYgd2l0aFxuICAgICAgICAvLyAgIGFyZ3VtZW50cyBcImFyZ3VtZW50c1wiLCBQcm9wZXJ0eURlc2NyaXB0b3Ige1tbR2V0XV06IHRocm93ZXIsXG4gICAgICAgIC8vICAgW1tTZXRdXTogdGhyb3dlciwgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiBmYWxzZX0sXG4gICAgICAgIC8vICAgYW5kIGZhbHNlLlxuXG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gTk9URSBGdW5jdGlvbiBvYmplY3RzIGNyZWF0ZWQgdXNpbmcgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgZG8gbm90XG4gICAgICAgIC8vIGhhdmUgYSBwcm90b3R5cGUgcHJvcGVydHkgb3IgdGhlIFtbQ29kZV1dLCBbW0Zvcm1hbFBhcmFtZXRlcnNdXSwgYW5kXG4gICAgICAgIC8vIFtbU2NvcGVdXSBpbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgICAvLyBYWFggY2FuJ3QgZGVsZXRlIHByb3RvdHlwZSBpbiBwdXJlLWpzLlxuXG4gICAgICAgIC8vIDIyLiBSZXR1cm4gRi5cbiAgICAgICAgcmV0dXJuIGJvdW5kO1xuICAgIH1cbn0pO1xuXG4vL1xuLy8gQXJyYXlcbi8vID09PT09XG4vL1xuXG4vLyBFUzUgMTUuNC4zLjJcbi8vIGh0dHA6Ly9lczUuZ2l0aHViLmNvbS8jeDE1LjQuMy4yXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9pc0FycmF5XG5kZWZpbmVQcm9wZXJ0aWVzKEFycmF5LCB7IGlzQXJyYXk6IGlzQXJyYXkgfSk7XG5cblxudmFyIGJveGVkU3RyaW5nID0gT2JqZWN0KCdhJyk7XG52YXIgc3BsaXRTdHJpbmcgPSBib3hlZFN0cmluZ1swXSAhPT0gJ2EnIHx8ICEoMCBpbiBib3hlZFN0cmluZyk7XG5cbnZhciBwcm9wZXJseUJveGVzQ29udGV4dCA9IGZ1bmN0aW9uIHByb3Blcmx5Qm94ZWQobWV0aG9kKSB7XG4gICAgLy8gQ2hlY2sgbm9kZSAwLjYuMjEgYnVnIHdoZXJlIHRoaXJkIHBhcmFtZXRlciBpcyBub3QgYm94ZWRcbiAgICB2YXIgcHJvcGVybHlCb3hlc05vblN0cmljdCA9IHRydWU7XG4gICAgdmFyIHByb3Blcmx5Qm94ZXNTdHJpY3QgPSB0cnVlO1xuICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgbWV0aG9kLmNhbGwoJ2ZvbycsIGZ1bmN0aW9uIChfLCBfXywgY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JykgeyBwcm9wZXJseUJveGVzTm9uU3RyaWN0ID0gZmFsc2U7IH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWV0aG9kLmNhbGwoWzFdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAndXNlIHN0cmljdCc7XG4gICAgICAgICAgICBwcm9wZXJseUJveGVzU3RyaWN0ID0gdHlwZW9mIHRoaXMgPT09ICdzdHJpbmcnO1xuICAgICAgICB9LCAneCcpO1xuICAgIH1cbiAgICByZXR1cm4gISFtZXRob2QgJiYgcHJvcGVybHlCb3hlc05vblN0cmljdCAmJiBwcm9wZXJseUJveGVzU3RyaWN0O1xufTtcblxuZGVmaW5lUHJvcGVydGllcyhBcnJheVByb3RvdHlwZSwge1xuICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZnVuIC8qLCB0aGlzcCovKSB7XG4gICAgICAgIHZhciBvYmplY3QgPSB0b09iamVjdCh0aGlzKSxcbiAgICAgICAgICAgIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBpc1N0cmluZyh0aGlzKSA/IHRoaXMuc3BsaXQoJycpIDogb2JqZWN0LFxuICAgICAgICAgICAgdGhpc3AgPSBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgICBpID0gLTEsXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICAvLyBJZiBubyBjYWxsYmFjayBmdW5jdGlvbiBvciBpZiBjYWxsYmFjayBpcyBub3QgYSBjYWxsYWJsZSBmdW5jdGlvblxuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oZnVuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyAvLyBUT0RPIG1lc3NhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlICgrK2kgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnZva2UgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggY2FsbCwgcGFzc2luZyBhcmd1bWVudHM6XG4gICAgICAgICAgICAgICAgLy8gY29udGV4dCwgcHJvcGVydHkgdmFsdWUsIHByb3BlcnR5IGtleSwgdGhpc0FyZyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0XG4gICAgICAgICAgICAgICAgZnVuLmNhbGwodGhpc3AsIHNlbGZbaV0sIGksIG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCAhcHJvcGVybHlCb3hlc0NvbnRleHQoQXJyYXlQcm90b3R5cGUuZm9yRWFjaCkpO1xuXG4vLyBFUzUgMTUuNC40LjE0XG4vLyBodHRwOi8vZXM1LmdpdGh1Yi5jb20vI3gxNS40LjQuMTRcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luZGV4T2ZcbnZhciBoYXNGaXJlZm94MkluZGV4T2ZCdWcgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiAmJiBbMCwgMV0uaW5kZXhPZigxLCAyKSAhPT0gLTE7XG5kZWZpbmVQcm9wZXJ0aWVzKEFycmF5UHJvdG90eXBlLCB7XG4gICAgaW5kZXhPZjogZnVuY3Rpb24gaW5kZXhPZihzb3VnaHQgLyosIGZyb21JbmRleCAqLyApIHtcbiAgICAgICAgdmFyIHNlbGYgPSBzcGxpdFN0cmluZyAmJiBpc1N0cmluZyh0aGlzKSA/IHRoaXMuc3BsaXQoJycpIDogdG9PYmplY3QodGhpcyksXG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGkgPSB0b0ludGVnZXIoYXJndW1lbnRzWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBuZWdhdGl2ZSBpbmRpY2VzXG4gICAgICAgIGkgPSBpID49IDAgPyBpIDogTWF0aC5tYXgoMCwgbGVuZ3RoICsgaSk7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHNlbGYgJiYgc2VsZltpXSA9PT0gc291Z2h0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbn0sIGhhc0ZpcmVmb3gySW5kZXhPZkJ1Zyk7XG5cbi8vXG4vLyBTdHJpbmdcbi8vID09PT09PVxuLy9cblxuLy8gRVM1IDE1LjUuNC4xNFxuLy8gaHR0cDovL2VzNS5naXRodWIuY29tLyN4MTUuNS40LjE0XG5cbi8vIFtidWdmaXgsIElFIGx0IDksIGZpcmVmb3ggNCwgS29ucXVlcm9yLCBPcGVyYSwgb2JzY3VyZSBicm93c2Vyc11cbi8vIE1hbnkgYnJvd3NlcnMgZG8gbm90IHNwbGl0IHByb3Blcmx5IHdpdGggcmVndWxhciBleHByZXNzaW9ucyBvciB0aGV5XG4vLyBkbyBub3QgcGVyZm9ybSB0aGUgc3BsaXQgY29ycmVjdGx5IHVuZGVyIG9ic2N1cmUgY29uZGl0aW9ucy5cbi8vIFNlZSBodHRwOi8vYmxvZy5zdGV2ZW5sZXZpdGhhbi5jb20vYXJjaGl2ZXMvY3Jvc3MtYnJvd3Nlci1zcGxpdFxuLy8gSSd2ZSB0ZXN0ZWQgaW4gbWFueSBicm93c2VycyBhbmQgdGhpcyBzZWVtcyB0byBjb3ZlciB0aGUgZGV2aWFudCBvbmVzOlxuLy8gICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pIHNob3VsZCBiZSBbXCJcIiwgXCJcIl0sIG5vdCBbXCJcIl1cbi8vICAgICcuJy5zcGxpdCgvKC4/KSguPykvKSBzaG91bGQgYmUgW1wiXCIsIFwiLlwiLCBcIlwiLCBcIlwiXSwgbm90IFtcIlwiLCBcIlwiXVxuLy8gICAgJ3Rlc3N0Jy5zcGxpdCgvKHMpKi8pIHNob3VsZCBiZSBbXCJ0XCIsIHVuZGVmaW5lZCwgXCJlXCIsIFwic1wiLCBcInRcIl0sIG5vdFxuLy8gICAgICAgW3VuZGVmaW5lZCwgXCJ0XCIsIHVuZGVmaW5lZCwgXCJlXCIsIC4uLl1cbi8vICAgICcnLnNwbGl0KC8uPy8pIHNob3VsZCBiZSBbXSwgbm90IFtcIlwiXVxuLy8gICAgJy4nLnNwbGl0KC8oKSgpLykgc2hvdWxkIGJlIFtcIi5cIl0sIG5vdCBbXCJcIiwgXCJcIiwgXCIuXCJdXG5cbnZhciBzdHJpbmdfc3BsaXQgPSBTdHJpbmdQcm90b3R5cGUuc3BsaXQ7XG5pZiAoXG4gICAgJ2FiJy5zcGxpdCgvKD86YWIpKi8pLmxlbmd0aCAhPT0gMiB8fFxuICAgICcuJy5zcGxpdCgvKC4/KSguPykvKS5sZW5ndGggIT09IDQgfHxcbiAgICAndGVzc3QnLnNwbGl0KC8ocykqLylbMV0gPT09ICd0JyB8fFxuICAgICd0ZXN0Jy5zcGxpdCgvKD86KS8sIC0xKS5sZW5ndGggIT09IDQgfHxcbiAgICAnJy5zcGxpdCgvLj8vKS5sZW5ndGggfHxcbiAgICAnLicuc3BsaXQoLygpKCkvKS5sZW5ndGggPiAxXG4pIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcGxpYW50RXhlY05wY2cgPSAvKCk/Py8uZXhlYygnJylbMV0gPT09IHZvaWQgMDsgLy8gTlBDRzogbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBcblxuICAgICAgICBTdHJpbmdQcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAoc2VwYXJhdG9yLCBsaW1pdCkge1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDAgJiYgbGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGBzZXBhcmF0b3JgIGlzIG5vdCBhIHJlZ2V4LCB1c2UgbmF0aXZlIHNwbGl0XG4gICAgICAgICAgICBpZiAoX3RvU3RyaW5nLmNhbGwoc2VwYXJhdG9yKSAhPT0gJ1tvYmplY3QgUmVnRXhwXScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nX3NwbGl0LmNhbGwodGhpcywgc2VwYXJhdG9yLCBsaW1pdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBbXSxcbiAgICAgICAgICAgICAgICBmbGFncyA9IChzZXBhcmF0b3IuaWdub3JlQ2FzZSA/ICdpJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2VwYXJhdG9yLm11bHRpbGluZSAgPyAnbScgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5leHRlbmRlZCAgID8gJ3gnIDogJycpICsgLy8gUHJvcG9zZWQgZm9yIEVTNlxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlcGFyYXRvci5zdGlja3kgICAgID8gJ3knIDogJycpLCAvLyBGaXJlZm94IDMrXG4gICAgICAgICAgICAgICAgbGFzdExhc3RJbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBgZ2xvYmFsYCBhbmQgYXZvaWQgYGxhc3RJbmRleGAgaXNzdWVzIGJ5IHdvcmtpbmcgd2l0aCBhIGNvcHlcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IyLCBtYXRjaCwgbGFzdEluZGV4LCBsYXN0TGVuZ3RoO1xuICAgICAgICAgICAgc2VwYXJhdG9yID0gbmV3IFJlZ0V4cChzZXBhcmF0b3Iuc291cmNlLCBmbGFncyArICdnJyk7XG4gICAgICAgICAgICBzdHJpbmcgKz0gJyc7IC8vIFR5cGUtY29udmVydFxuICAgICAgICAgICAgaWYgKCFjb21wbGlhbnRFeGVjTnBjZykge1xuICAgICAgICAgICAgICAgIC8vIERvZXNuJ3QgbmVlZCBmbGFncyBneSwgYnV0IHRoZXkgZG9uJ3QgaHVydFxuICAgICAgICAgICAgICAgIHNlcGFyYXRvcjIgPSBuZXcgUmVnRXhwKCdeJyArIHNlcGFyYXRvci5zb3VyY2UgKyAnJCg/IVxcXFxzKScsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIFZhbHVlcyBmb3IgYGxpbWl0YCwgcGVyIHRoZSBzcGVjOlxuICAgICAgICAgICAgICogSWYgdW5kZWZpbmVkOiA0Mjk0OTY3Mjk1IC8vIE1hdGgucG93KDIsIDMyKSAtIDFcbiAgICAgICAgICAgICAqIElmIDAsIEluZmluaXR5LCBvciBOYU46IDBcbiAgICAgICAgICAgICAqIElmIHBvc2l0aXZlIG51bWJlcjogbGltaXQgPSBNYXRoLmZsb29yKGxpbWl0KTsgaWYgKGxpbWl0ID4gNDI5NDk2NzI5NSkgbGltaXQgLT0gNDI5NDk2NzI5NjtcbiAgICAgICAgICAgICAqIElmIG5lZ2F0aXZlIG51bWJlcjogNDI5NDk2NzI5NiAtIE1hdGguZmxvb3IoTWF0aC5hYnMobGltaXQpKVxuICAgICAgICAgICAgICogSWYgb3RoZXI6IFR5cGUtY29udmVydCwgdGhlbiB1c2UgdGhlIGFib3ZlIHJ1bGVzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxpbWl0ID0gbGltaXQgPT09IHZvaWQgMCA/XG4gICAgICAgICAgICAgICAgLTEgPj4+IDAgOiAvLyBNYXRoLnBvdygyLCAzMikgLSAxXG4gICAgICAgICAgICAgICAgVG9VaW50MzIobGltaXQpO1xuICAgICAgICAgICAgd2hpbGUgKG1hdGNoID0gc2VwYXJhdG9yLmV4ZWMoc3RyaW5nKSkge1xuICAgICAgICAgICAgICAgIC8vIGBzZXBhcmF0b3IubGFzdEluZGV4YCBpcyBub3QgcmVsaWFibGUgY3Jvc3MtYnJvd3NlclxuICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPiBsYXN0TGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKHN0cmluZy5zbGljZShsYXN0TGFzdEluZGV4LCBtYXRjaC5pbmRleCkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3JcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXBzXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29tcGxpYW50RXhlY05wY2cgJiYgbWF0Y2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF0ucmVwbGFjZShzZXBhcmF0b3IyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbaV0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaC5pbmRleCA8IHN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5UHJvdG90eXBlLnB1c2guYXBwbHkob3V0cHV0LCBtYXRjaC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFzdExlbmd0aCA9IG1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdExhc3RJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXBhcmF0b3IubGFzdEluZGV4ID09PSBtYXRjaC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzZXBhcmF0b3IubGFzdEluZGV4Kys7IC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdExhc3RJbmRleCA9PT0gc3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXN0TGVuZ3RoIHx8ICFzZXBhcmF0b3IudGVzdCgnJykpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goc3RyaW5nLnNsaWNlKGxhc3RMYXN0SW5kZXgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQubGVuZ3RoID4gbGltaXQgPyBvdXRwdXQuc2xpY2UoMCwgbGltaXQpIDogb3V0cHV0O1xuICAgICAgICB9O1xuICAgIH0oKSk7XG5cbi8vIFtidWdmaXgsIGNocm9tZV1cbi8vIElmIHNlcGFyYXRvciBpcyB1bmRlZmluZWQsIHRoZW4gdGhlIHJlc3VsdCBhcnJheSBjb250YWlucyBqdXN0IG9uZSBTdHJpbmcsXG4vLyB3aGljaCBpcyB0aGUgdGhpcyB2YWx1ZSAoY29udmVydGVkIHRvIGEgU3RyaW5nKS4gSWYgbGltaXQgaXMgbm90IHVuZGVmaW5lZCxcbi8vIHRoZW4gdGhlIG91dHB1dCBhcnJheSBpcyB0cnVuY2F0ZWQgc28gdGhhdCBpdCBjb250YWlucyBubyBtb3JlIHRoYW4gbGltaXRcbi8vIGVsZW1lbnRzLlxuLy8gXCIwXCIuc3BsaXQodW5kZWZpbmVkLCAwKSAtPiBbXVxufSBlbHNlIGlmICgnMCcuc3BsaXQodm9pZCAwLCAwKS5sZW5ndGgpIHtcbiAgICBTdHJpbmdQcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiBzcGxpdChzZXBhcmF0b3IsIGxpbWl0KSB7XG4gICAgICAgIGlmIChzZXBhcmF0b3IgPT09IHZvaWQgMCAmJiBsaW1pdCA9PT0gMCkgeyByZXR1cm4gW107IH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ19zcGxpdC5jYWxsKHRoaXMsIHNlcGFyYXRvciwgbGltaXQpO1xuICAgIH07XG59XG5cbi8vIEVDTUEtMjYyLCAzcmQgQi4yLjNcbi8vIE5vdCBhbiBFQ01BU2NyaXB0IHN0YW5kYXJkLCBhbHRob3VnaCBFQ01BU2NyaXB0IDNyZCBFZGl0aW9uIGhhcyBhXG4vLyBub24tbm9ybWF0aXZlIHNlY3Rpb24gc3VnZ2VzdGluZyB1bmlmb3JtIHNlbWFudGljcyBhbmQgaXQgc2hvdWxkIGJlXG4vLyBub3JtYWxpemVkIGFjcm9zcyBhbGwgYnJvd3NlcnNcbi8vIFtidWdmaXgsIElFIGx0IDldIElFIDwgOSBzdWJzdHIoKSB3aXRoIG5lZ2F0aXZlIHZhbHVlIG5vdCB3b3JraW5nIGluIElFXG52YXIgc3RyaW5nX3N1YnN0ciA9IFN0cmluZ1Byb3RvdHlwZS5zdWJzdHI7XG52YXIgaGFzTmVnYXRpdmVTdWJzdHJCdWcgPSAnJy5zdWJzdHIgJiYgJzBiJy5zdWJzdHIoLTEpICE9PSAnYic7XG5kZWZpbmVQcm9wZXJ0aWVzKFN0cmluZ1Byb3RvdHlwZSwge1xuICAgIHN1YnN0cjogZnVuY3Rpb24gc3Vic3RyKHN0YXJ0LCBsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ19zdWJzdHIuY2FsbChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBzdGFydCA8IDAgPyAoKHN0YXJ0ID0gdGhpcy5sZW5ndGggKyBzdGFydCkgPCAwID8gMCA6IHN0YXJ0KSA6IHN0YXJ0LFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgICk7XG4gICAgfVxufSwgaGFzTmVnYXRpdmVTdWJzdHJCdWcpO1xuXG59LHt9XSwxNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gW1xuICAvLyBzdHJlYW1pbmcgdHJhbnNwb3J0c1xuICByZXF1aXJlKCcuL3RyYW5zcG9ydC93ZWJzb2NrZXQnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC94aHItc3RyZWFtaW5nJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQveGRyLXN0cmVhbWluZycpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L2V2ZW50c291cmNlJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvbGliL2lmcmFtZS13cmFwJykocmVxdWlyZSgnLi90cmFuc3BvcnQvZXZlbnRzb3VyY2UnKSlcblxuICAvLyBwb2xsaW5nIHRyYW5zcG9ydHNcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvaHRtbGZpbGUnKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC9saWIvaWZyYW1lLXdyYXAnKShyZXF1aXJlKCcuL3RyYW5zcG9ydC9odG1sZmlsZScpKVxuLCByZXF1aXJlKCcuL3RyYW5zcG9ydC94aHItcG9sbGluZycpXG4sIHJlcXVpcmUoJy4vdHJhbnNwb3J0L3hkci1wb2xsaW5nJylcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvbGliL2lmcmFtZS13cmFwJykocmVxdWlyZSgnLi90cmFuc3BvcnQveGhyLXBvbGxpbmcnKSlcbiwgcmVxdWlyZSgnLi90cmFuc3BvcnQvanNvbnAtcG9sbGluZycpXG5dO1xuXG59LHtcIi4vdHJhbnNwb3J0L2V2ZW50c291cmNlXCI6MjAsXCIuL3RyYW5zcG9ydC9odG1sZmlsZVwiOjIxLFwiLi90cmFuc3BvcnQvanNvbnAtcG9sbGluZ1wiOjIzLFwiLi90cmFuc3BvcnQvbGliL2lmcmFtZS13cmFwXCI6MjYsXCIuL3RyYW5zcG9ydC93ZWJzb2NrZXRcIjozOCxcIi4vdHJhbnNwb3J0L3hkci1wb2xsaW5nXCI6MzksXCIuL3RyYW5zcG9ydC94ZHItc3RyZWFtaW5nXCI6NDAsXCIuL3RyYW5zcG9ydC94aHItcG9sbGluZ1wiOjQxLFwiLi90cmFuc3BvcnQveGhyLXN0cmVhbWluZ1wiOjQyfV0sMTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCB1dGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2V2ZW50JylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gICwgWEhSID0gZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0XG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpicm93c2VyOnhocicpO1xufVxuXG5mdW5jdGlvbiBBYnN0cmFjdFhIUk9iamVjdChtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuICBkZWJ1ZyhtZXRob2QsIHVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fc3RhcnQobWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMpO1xuICB9LCAwKTtcbn1cblxuaW5oZXJpdHMoQWJzdHJhY3RYSFJPYmplY3QsIEV2ZW50RW1pdHRlcik7XG5cbkFic3RyYWN0WEhST2JqZWN0LnByb3RvdHlwZS5fc3RhcnQgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgcGF5bG9hZCwgb3B0cykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgdHJ5IHtcbiAgICB0aGlzLnhociA9IG5ldyBYSFIoKTtcbiAgfSBjYXRjaCAoeCkge1xuICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgfVxuXG4gIGlmICghdGhpcy54aHIpIHtcbiAgICBkZWJ1Zygnbm8geGhyJyk7XG4gICAgdGhpcy5lbWl0KCdmaW5pc2gnLCAwLCAnbm8geGhyIHN1cHBvcnQnKTtcbiAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2V2ZXJhbCBicm93c2VycyBjYWNoZSBQT1NUc1xuICB1cmwgPSB1cmxVdGlscy5hZGRRdWVyeSh1cmwsICd0PScgKyAoK25ldyBEYXRlKCkpKTtcblxuICAvLyBFeHBsb3JlciB0ZW5kcyB0byBrZWVwIGNvbm5lY3Rpb24gb3BlbiwgZXZlbiBhZnRlciB0aGVcbiAgLy8gdGFiIGdldHMgY2xvc2VkOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC81MjgwXG4gIHRoaXMudW5sb2FkUmVmID0gdXRpbHMudW5sb2FkQWRkKGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd1bmxvYWQgY2xlYW51cCcpO1xuICAgIHNlbGYuX2NsZWFudXAodHJ1ZSk7XG4gIH0pO1xuICB0cnkge1xuICAgIHRoaXMueGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgIGlmICh0aGlzLnRpbWVvdXQgJiYgJ3RpbWVvdXQnIGluIHRoaXMueGhyKSB7XG4gICAgICB0aGlzLnhoci50aW1lb3V0ID0gdGhpcy50aW1lb3V0O1xuICAgICAgdGhpcy54aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGRlYnVnKCd4aHIgdGltZW91dCcpO1xuICAgICAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcbiAgICAgICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGRlYnVnKCdleGNlcHRpb24nLCBlKTtcbiAgICAvLyBJRSByYWlzZXMgYW4gZXhjZXB0aW9uIG9uIHdyb25nIHBvcnQuXG4gICAgdGhpcy5lbWl0KCdmaW5pc2gnLCAwLCAnJyk7XG4gICAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCghb3B0cyB8fCAhb3B0cy5ub0NyZWRlbnRpYWxzKSAmJiBBYnN0cmFjdFhIUk9iamVjdC5zdXBwb3J0c0NPUlMpIHtcbiAgICBkZWJ1Zygnd2l0aENyZWRlbnRpYWxzJyk7XG4gICAgLy8gTW96aWxsYSBkb2NzIHNheXMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vWE1MSHR0cFJlcXVlc3QgOlxuICAgIC8vIFwiVGhpcyBuZXZlciBhZmZlY3RzIHNhbWUtc2l0ZSByZXF1ZXN0cy5cIlxuXG4gICAgdGhpcy54aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgfVxuICBpZiAob3B0cyAmJiBvcHRzLmhlYWRlcnMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gb3B0cy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgb3B0cy5oZWFkZXJzW2tleV0pO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzZWxmLnhocikge1xuICAgICAgdmFyIHggPSBzZWxmLnhocjtcbiAgICAgIHZhciB0ZXh0LCBzdGF0dXM7XG4gICAgICBkZWJ1ZygncmVhZHlTdGF0ZScsIHgucmVhZHlTdGF0ZSk7XG4gICAgICBzd2l0Y2ggKHgucmVhZHlTdGF0ZSkge1xuICAgICAgY2FzZSAzOlxuICAgICAgICAvLyBJRSBkb2Vzbid0IGxpa2UgcGVla2luZyBpbnRvIHJlc3BvbnNlVGV4dCBvciBzdGF0dXNcbiAgICAgICAgLy8gb24gTWljcm9zb2Z0LlhNTEhUVFAgYW5kIHJlYWR5c3RhdGU9M1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHN0YXR1cyA9IHguc3RhdHVzO1xuICAgICAgICAgIHRleHQgPSB4LnJlc3BvbnNlVGV4dDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICAgICAgfVxuICAgICAgICBkZWJ1Zygnc3RhdHVzJywgc3RhdHVzKTtcbiAgICAgICAgLy8gSUUgcmV0dXJucyAxMjIzIGZvciAyMDQ6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzE0NTBcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMTIyMykge1xuICAgICAgICAgIHN0YXR1cyA9IDIwNDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElFIGRvZXMgcmV0dXJuIHJlYWR5c3RhdGUgPT0gMyBmb3IgNDA0IGFuc3dlcnMuXG4gICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCAmJiB0ZXh0ICYmIHRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGRlYnVnKCdjaHVuaycpO1xuICAgICAgICAgIHNlbGYuZW1pdCgnY2h1bmsnLCBzdGF0dXMsIHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICBzdGF0dXMgPSB4LnN0YXR1cztcbiAgICAgICAgZGVidWcoJ3N0YXR1cycsIHN0YXR1cyk7XG4gICAgICAgIC8vIElFIHJldHVybnMgMTIyMyBmb3IgMjA0OiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xNDUwXG4gICAgICAgIGlmIChzdGF0dXMgPT09IDEyMjMpIHtcbiAgICAgICAgICBzdGF0dXMgPSAyMDQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSUUgcmV0dXJucyB0aGlzIGZvciBhIGJhZCBwb3J0XG4gICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS93aW5kb3dzL2Rlc2t0b3AvYWEzODM3NzAodj12cy44NSkuYXNweFxuICAgICAgICBpZiAoc3RhdHVzID09PSAxMjAwNSB8fCBzdGF0dXMgPT09IDEyMDI5KSB7XG4gICAgICAgICAgc3RhdHVzID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlYnVnKCdmaW5pc2gnLCBzdGF0dXMsIHgucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgc2VsZi5lbWl0KCdmaW5pc2gnLCBzdGF0dXMsIHgucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgc2VsZi5fY2xlYW51cChmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB0cnkge1xuICAgIHNlbGYueGhyLnNlbmQocGF5bG9hZCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcbiAgICBzZWxmLl9jbGVhbnVwKGZhbHNlKTtcbiAgfVxufTtcblxuQWJzdHJhY3RYSFJPYmplY3QucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oYWJvcnQpIHtcbiAgZGVidWcoJ2NsZWFudXAnKTtcbiAgaWYgKCF0aGlzLnhocikge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB1dGlscy51bmxvYWREZWwodGhpcy51bmxvYWRSZWYpO1xuXG4gIC8vIElFIG5lZWRzIHRoaXMgZmllbGQgdG8gYmUgYSBmdW5jdGlvblxuICB0aGlzLnhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHt9O1xuICBpZiAodGhpcy54aHIub250aW1lb3V0KSB7XG4gICAgdGhpcy54aHIub250aW1lb3V0ID0gbnVsbDtcbiAgfVxuXG4gIGlmIChhYm9ydCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnhoci5hYm9ydCgpO1xuICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICB9XG4gIH1cbiAgdGhpcy51bmxvYWRSZWYgPSB0aGlzLnhociA9IG51bGw7XG59O1xuXG5BYnN0cmFjdFhIUk9iamVjdC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMuX2NsZWFudXAodHJ1ZSk7XG59O1xuXG5BYnN0cmFjdFhIUk9iamVjdC5lbmFibGVkID0gISFYSFI7XG4vLyBvdmVycmlkZSBYTUxIdHRwUmVxdWVzdCBmb3IgSUU2Lzdcbi8vIG9iZnVzY2F0ZSB0byBhdm9pZCBmaXJld2FsbHNcbnZhciBheG8gPSBbJ0FjdGl2ZSddLmNvbmNhdCgnT2JqZWN0Jykuam9pbignWCcpO1xuaWYgKCFBYnN0cmFjdFhIUk9iamVjdC5lbmFibGVkICYmIChheG8gaW4gZ2xvYmFsKSkge1xuICBkZWJ1Zygnb3ZlcnJpZGluZyB4bWxodHRwcmVxdWVzdCcpO1xuICBYSFIgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBnbG9iYWxbYXhvXSgnTWljcm9zb2Z0LlhNTEhUVFAnKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG4gIEFic3RyYWN0WEhST2JqZWN0LmVuYWJsZWQgPSAhIW5ldyBYSFIoKTtcbn1cblxudmFyIGNvcnMgPSBmYWxzZTtcbnRyeSB7XG4gIGNvcnMgPSAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWEhSKCk7XG59IGNhdGNoIChpZ25vcmVkKSB7XG4gIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbn1cblxuQWJzdHJhY3RYSFJPYmplY3Quc3VwcG9ydHNDT1JTID0gY29ycztcblxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdFhIUk9iamVjdDtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi4vLi4vdXRpbHMvZXZlbnRcIjo0NixcIi4uLy4uL3V0aWxzL3VybFwiOjUyLFwiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xubW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuRXZlbnRTb3VyY2U7XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHt9XSwxOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBEcml2ZXIgPSBnbG9iYWwuV2ViU29ja2V0IHx8IGdsb2JhbC5Nb3pXZWJTb2NrZXQ7XG5pZiAoRHJpdmVyKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gV2ViU29ja2V0QnJvd3NlckRyaXZlcih1cmwpIHtcblx0XHRyZXR1cm4gbmV3IERyaXZlcih1cmwpO1xuXHR9O1xufSBlbHNlIHtcblx0bW9kdWxlLmV4cG9ydHMgPSB1bmRlZmluZWQ7XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHt9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSByZXF1aXJlKCcuL2xpYi9hamF4LWJhc2VkJylcbiAgLCBFdmVudFNvdXJjZVJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci9ldmVudHNvdXJjZScpXG4gICwgWEhSQ29yc09iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1jb3JzJylcbiAgLCBFdmVudFNvdXJjZURyaXZlciA9IHJlcXVpcmUoJ2V2ZW50c291cmNlJylcbiAgO1xuXG5mdW5jdGlvbiBFdmVudFNvdXJjZVRyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIUV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG5cbiAgQWpheEJhc2VkVHJhbnNwb3J0LmNhbGwodGhpcywgdHJhbnNVcmwsICcvZXZlbnRzb3VyY2UnLCBFdmVudFNvdXJjZVJlY2VpdmVyLCBYSFJDb3JzT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoRXZlbnRTb3VyY2VUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cbkV2ZW50U291cmNlVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICEhRXZlbnRTb3VyY2VEcml2ZXI7XG59O1xuXG5FdmVudFNvdXJjZVRyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ2V2ZW50c291cmNlJztcbkV2ZW50U291cmNlVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50U291cmNlVHJhbnNwb3J0O1xuXG59LHtcIi4vbGliL2FqYXgtYmFzZWRcIjoyNCxcIi4vcmVjZWl2ZXIvZXZlbnRzb3VyY2VcIjoyOSxcIi4vc2VuZGVyL3hoci1jb3JzXCI6MzUsXCJldmVudHNvdXJjZVwiOjE4LFwiaW5oZXJpdHNcIjo1N31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEh0bWxmaWxlUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL2h0bWxmaWxlJylcbiAgLCBYSFJMb2NhbE9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hoci1sb2NhbCcpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gIDtcblxuZnVuY3Rpb24gSHRtbEZpbGVUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy9odG1sZmlsZScsIEh0bWxmaWxlUmVjZWl2ZXIsIFhIUkxvY2FsT2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoSHRtbEZpbGVUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cbkh0bWxGaWxlVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbihpbmZvKSB7XG4gIHJldHVybiBIdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQgJiYgaW5mby5zYW1lT3JpZ2luO1xufTtcblxuSHRtbEZpbGVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdodG1sZmlsZSc7XG5IdG1sRmlsZVRyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjtcblxubW9kdWxlLmV4cG9ydHMgPSBIdG1sRmlsZVRyYW5zcG9ydDtcblxufSx7XCIuL2xpYi9hamF4LWJhc2VkXCI6MjQsXCIuL3JlY2VpdmVyL2h0bWxmaWxlXCI6MzAsXCIuL3NlbmRlci94aHItbG9jYWxcIjozNyxcImluaGVyaXRzXCI6NTd9XSwyMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBGZXcgY29vbCB0cmFuc3BvcnRzIGRvIHdvcmsgb25seSBmb3Igc2FtZS1vcmlnaW4uIEluIG9yZGVyIHRvIG1ha2Vcbi8vIHRoZW0gd29yayBjcm9zcy1kb21haW4gd2Ugc2hhbGwgdXNlIGlmcmFtZSwgc2VydmVkIGZyb20gdGhlXG4vLyByZW1vdGUgZG9tYWluLiBOZXcgYnJvd3NlcnMgaGF2ZSBjYXBhYmlsaXRpZXMgdG8gY29tbXVuaWNhdGUgd2l0aFxuLy8gY3Jvc3MgZG9tYWluIGlmcmFtZSB1c2luZyBwb3N0TWVzc2FnZSgpLiBJbiBJRSBpdCB3YXMgaW1wbGVtZW50ZWRcbi8vIGZyb20gSUUgOCssIGJ1dCBvZiBjb3Vyc2UsIElFIGdvdCBzb21lIGRldGFpbHMgd3Jvbmc6XG4vLyAgICBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvY2MxOTcwMTUodj1WUy44NSkuYXNweFxuLy8gICAgaHR0cDovL3N0ZXZlc291ZGVycy5jb20vbWlzYy90ZXN0LXBvc3RtZXNzYWdlLnBocFxuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgSlNPTjMgPSByZXF1aXJlKCdqc29uMycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gICwgdmVyc2lvbiA9IHJlcXVpcmUoJy4uL3ZlcnNpb24nKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXJsJylcbiAgLCBpZnJhbWVVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2lmcmFtZScpXG4gICwgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2V2ZW50JylcbiAgLCByYW5kb20gPSByZXF1aXJlKCcuLi91dGlscy9yYW5kb20nKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6dHJhbnNwb3J0OmlmcmFtZScpO1xufVxuXG5mdW5jdGlvbiBJZnJhbWVUcmFuc3BvcnQodHJhbnNwb3J0LCB0cmFuc1VybCwgYmFzZVVybCkge1xuICBpZiAoIUlmcmFtZVRyYW5zcG9ydC5lbmFibGVkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMub3JpZ2luID0gdXJsVXRpbHMuZ2V0T3JpZ2luKGJhc2VVcmwpO1xuICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICB0aGlzLnRyYW5zVXJsID0gdHJhbnNVcmw7XG4gIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0O1xuICB0aGlzLndpbmRvd0lkID0gcmFuZG9tLnN0cmluZyg4KTtcblxuICB2YXIgaWZyYW1lVXJsID0gdXJsVXRpbHMuYWRkUGF0aChiYXNlVXJsLCAnL2lmcmFtZS5odG1sJykgKyAnIycgKyB0aGlzLndpbmRvd0lkO1xuICBkZWJ1Zyh0cmFuc3BvcnQsIHRyYW5zVXJsLCBpZnJhbWVVcmwpO1xuXG4gIHRoaXMuaWZyYW1lT2JqID0gaWZyYW1lVXRpbHMuY3JlYXRlSWZyYW1lKGlmcmFtZVVybCwgZnVuY3Rpb24ocikge1xuICAgIGRlYnVnKCdlcnIgY2FsbGJhY2snKTtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgMTAwNiwgJ1VuYWJsZSB0byBsb2FkIGFuIGlmcmFtZSAoJyArIHIgKyAnKScpO1xuICAgIHNlbGYuY2xvc2UoKTtcbiAgfSk7XG5cbiAgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayA9IHRoaXMuX21lc3NhZ2UuYmluZCh0aGlzKTtcbiAgZXZlbnRVdGlscy5hdHRhY2hFdmVudCgnbWVzc2FnZScsIHRoaXMub25tZXNzYWdlQ2FsbGJhY2spO1xufVxuXG5pbmhlcml0cyhJZnJhbWVUcmFuc3BvcnQsIEV2ZW50RW1pdHRlcik7XG5cbklmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIGlmICh0aGlzLmlmcmFtZU9iaikge1xuICAgIGV2ZW50VXRpbHMuZGV0YWNoRXZlbnQoJ21lc3NhZ2UnLCB0aGlzLm9ubWVzc2FnZUNhbGxiYWNrKTtcbiAgICB0cnkge1xuICAgICAgLy8gV2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQsIElFIHJhaXNlcyBhbiBleGNlcHRpb25cbiAgICAgIC8vIG9uICdjb250ZW50V2luZG93Jy5cbiAgICAgIHRoaXMucG9zdE1lc3NhZ2UoJ2MnKTtcbiAgICB9IGNhdGNoICh4KSB7XG4gICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgfVxuICAgIHRoaXMuaWZyYW1lT2JqLmNsZWFudXAoKTtcbiAgICB0aGlzLmlmcmFtZU9iaiA9IG51bGw7XG4gICAgdGhpcy5vbm1lc3NhZ2VDYWxsYmFjayA9IHRoaXMuaWZyYW1lT2JqID0gbnVsbDtcbiAgfVxufTtcblxuSWZyYW1lVHJhbnNwb3J0LnByb3RvdHlwZS5fbWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgZGVidWcoJ21lc3NhZ2UnLCBlLmRhdGEpO1xuICBpZiAoIXVybFV0aWxzLmlzT3JpZ2luRXF1YWwoZS5vcmlnaW4sIHRoaXMub3JpZ2luKSkge1xuICAgIGRlYnVnKCdub3Qgc2FtZSBvcmlnaW4nLCBlLm9yaWdpbiwgdGhpcy5vcmlnaW4pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBpZnJhbWVNZXNzYWdlO1xuICB0cnkge1xuICAgIGlmcmFtZU1lc3NhZ2UgPSBKU09OMy5wYXJzZShlLmRhdGEpO1xuICB9IGNhdGNoIChpZ25vcmVkKSB7XG4gICAgZGVidWcoJ2JhZCBqc29uJywgZS5kYXRhKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaWZyYW1lTWVzc2FnZS53aW5kb3dJZCAhPT0gdGhpcy53aW5kb3dJZCkge1xuICAgIGRlYnVnKCdtaXNtYXRjaGVkIHdpbmRvdyBpZCcsIGlmcmFtZU1lc3NhZ2Uud2luZG93SWQsIHRoaXMud2luZG93SWQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHN3aXRjaCAoaWZyYW1lTWVzc2FnZS50eXBlKSB7XG4gIGNhc2UgJ3MnOlxuICAgIHRoaXMuaWZyYW1lT2JqLmxvYWRlZCgpO1xuICAgIC8vIHdpbmRvdyBnbG9iYWwgZGVwZW5kZW5jeVxuICAgIHRoaXMucG9zdE1lc3NhZ2UoJ3MnLCBKU09OMy5zdHJpbmdpZnkoW1xuICAgICAgdmVyc2lvblxuICAgICwgdGhpcy50cmFuc3BvcnRcbiAgICAsIHRoaXMudHJhbnNVcmxcbiAgICAsIHRoaXMuYmFzZVVybFxuICAgIF0pKTtcbiAgICBicmVhaztcbiAgY2FzZSAndCc6XG4gICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICBicmVhaztcbiAgY2FzZSAnYyc6XG4gICAgdmFyIGNkYXRhO1xuICAgIHRyeSB7XG4gICAgICBjZGF0YSA9IEpTT04zLnBhcnNlKGlmcmFtZU1lc3NhZ2UuZGF0YSk7XG4gICAgfSBjYXRjaCAoaWdub3JlZCkge1xuICAgICAgZGVidWcoJ2JhZCBqc29uJywgaWZyYW1lTWVzc2FnZS5kYXRhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbWl0KCdjbG9zZScsIGNkYXRhWzBdLCBjZGF0YVsxXSk7XG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIGJyZWFrO1xuICB9XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQucHJvdG90eXBlLnBvc3RNZXNzYWdlID0gZnVuY3Rpb24odHlwZSwgZGF0YSkge1xuICBkZWJ1ZygncG9zdE1lc3NhZ2UnLCB0eXBlLCBkYXRhKTtcbiAgdGhpcy5pZnJhbWVPYmoucG9zdChKU09OMy5zdHJpbmdpZnkoe1xuICAgIHdpbmRvd0lkOiB0aGlzLndpbmRvd0lkXG4gICwgdHlwZTogdHlwZVxuICAsIGRhdGE6IGRhdGEgfHwgJydcbiAgfSksIHRoaXMub3JpZ2luKTtcbn07XG5cbklmcmFtZVRyYW5zcG9ydC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgZGVidWcoJ3NlbmQnLCBtZXNzYWdlKTtcbiAgdGhpcy5wb3N0TWVzc2FnZSgnbScsIG1lc3NhZ2UpO1xufTtcblxuSWZyYW1lVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGlmcmFtZVV0aWxzLmlmcmFtZUVuYWJsZWQ7XG59O1xuXG5JZnJhbWVUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdpZnJhbWUnO1xuSWZyYW1lVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IElmcmFtZVRyYW5zcG9ydDtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcIi4uL3V0aWxzL2V2ZW50XCI6NDYsXCIuLi91dGlscy9pZnJhbWVcIjo0NyxcIi4uL3V0aWxzL3JhbmRvbVwiOjUwLFwiLi4vdXRpbHMvdXJsXCI6NTIsXCIuLi92ZXJzaW9uXCI6NTMsXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTcsXCJqc29uM1wiOjU4fV0sMjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyBUaGUgc2ltcGxlc3QgYW5kIG1vc3Qgcm9idXN0IHRyYW5zcG9ydCwgdXNpbmcgdGhlIHdlbGwta25vdyBjcm9zc1xuLy8gZG9tYWluIGhhY2sgLSBKU09OUC4gVGhpcyB0cmFuc3BvcnQgaXMgcXVpdGUgaW5lZmZpY2llbnQgLSBvbmVcbi8vIG1lc3NhZ2UgY291bGQgdXNlIHVwIHRvIG9uZSBodHRwIHJlcXVlc3QuIEJ1dCBhdCBsZWFzdCBpdCB3b3JrcyBhbG1vc3Rcbi8vIGV2ZXJ5d2hlcmUuXG4vLyBLbm93biBsaW1pdGF0aW9uczpcbi8vICAgbyB5b3Ugd2lsbCBnZXQgYSBzcGlubmluZyBjdXJzb3Jcbi8vICAgbyBmb3IgS29ucXVlcm9yIGEgZHVtYiB0aW1lciBpcyBuZWVkZWQgdG8gZGV0ZWN0IGVycm9yc1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgU2VuZGVyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL2xpYi9zZW5kZXItcmVjZWl2ZXInKVxuICAsIEpzb25wUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL2pzb25wJylcbiAgLCBqc29ucFNlbmRlciA9IHJlcXVpcmUoJy4vc2VuZGVyL2pzb25wJylcbiAgO1xuXG5mdW5jdGlvbiBKc29uUFRyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIUpzb25QVHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIFNlbmRlclJlY2VpdmVyLmNhbGwodGhpcywgdHJhbnNVcmwsICcvanNvbnAnLCBqc29ucFNlbmRlciwgSnNvbnBSZWNlaXZlcik7XG59XG5cbmluaGVyaXRzKEpzb25QVHJhbnNwb3J0LCBTZW5kZXJSZWNlaXZlcik7XG5cbkpzb25QVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICEhZ2xvYmFsLmRvY3VtZW50O1xufTtcblxuSnNvblBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdqc29ucC1wb2xsaW5nJztcbkpzb25QVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAxO1xuSnNvblBUcmFuc3BvcnQubmVlZEJvZHkgPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEpzb25QVHJhbnNwb3J0O1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuL2xpYi9zZW5kZXItcmVjZWl2ZXJcIjoyOCxcIi4vcmVjZWl2ZXIvanNvbnBcIjozMSxcIi4vc2VuZGVyL2pzb25wXCI6MzMsXCJpbmhlcml0c1wiOjU3fV0sMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBTZW5kZXJSZWNlaXZlciA9IHJlcXVpcmUoJy4vc2VuZGVyLXJlY2VpdmVyJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OmFqYXgtYmFzZWQnKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQWpheFNlbmRlcihBamF4T2JqZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbih1cmwsIHBheWxvYWQsIGNhbGxiYWNrKSB7XG4gICAgZGVidWcoJ2NyZWF0ZSBhamF4IHNlbmRlcicsIHVybCwgcGF5bG9hZCk7XG4gICAgdmFyIG9wdCA9IHt9O1xuICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG9wdC5oZWFkZXJzID0geydDb250ZW50LXR5cGUnOiAndGV4dC9wbGFpbid9O1xuICAgIH1cbiAgICB2YXIgYWpheFVybCA9IHVybFV0aWxzLmFkZFBhdGgodXJsLCAnL3hocl9zZW5kJyk7XG4gICAgdmFyIHhvID0gbmV3IEFqYXhPYmplY3QoJ1BPU1QnLCBhamF4VXJsLCBwYXlsb2FkLCBvcHQpO1xuICAgIHhvLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cyk7XG4gICAgICB4byA9IG51bGw7XG5cbiAgICAgIGlmIChzdGF0dXMgIT09IDIwMCAmJiBzdGF0dXMgIT09IDIwNCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdodHRwIHN0YXR1cyAnICsgc3RhdHVzKSk7XG4gICAgICB9XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdhYm9ydCcpO1xuICAgICAgeG8uY2xvc2UoKTtcbiAgICAgIHhvID0gbnVsbDtcblxuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignQWJvcnRlZCcpO1xuICAgICAgZXJyLmNvZGUgPSAxMDAwO1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBBamF4QmFzZWRUcmFuc3BvcnQodHJhbnNVcmwsIHVybFN1ZmZpeCwgUmVjZWl2ZXIsIEFqYXhPYmplY3QpIHtcbiAgU2VuZGVyUmVjZWl2ZXIuY2FsbCh0aGlzLCB0cmFuc1VybCwgdXJsU3VmZml4LCBjcmVhdGVBamF4U2VuZGVyKEFqYXhPYmplY3QpLCBSZWNlaXZlciwgQWpheE9iamVjdCk7XG59XG5cbmluaGVyaXRzKEFqYXhCYXNlZFRyYW5zcG9ydCwgU2VuZGVyUmVjZWl2ZXIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFqYXhCYXNlZFRyYW5zcG9ydDtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcIi4uLy4uL3V0aWxzL3VybFwiOjUyLFwiLi9zZW5kZXItcmVjZWl2ZXJcIjoyOCxcImRlYnVnXCI6NTUsXCJpbmhlcml0c1wiOjU3fV0sMjU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6YnVmZmVyZWQtc2VuZGVyJyk7XG59XG5cbmZ1bmN0aW9uIEJ1ZmZlcmVkU2VuZGVyKHVybCwgc2VuZGVyKSB7XG4gIGRlYnVnKHVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB0aGlzLnNlbmRCdWZmZXIgPSBbXTtcbiAgdGhpcy5zZW5kZXIgPSBzZW5kZXI7XG4gIHRoaXMudXJsID0gdXJsO1xufVxuXG5pbmhlcml0cyhCdWZmZXJlZFNlbmRlciwgRXZlbnRFbWl0dGVyKTtcblxuQnVmZmVyZWRTZW5kZXIucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gIGRlYnVnKCdzZW5kJywgbWVzc2FnZSk7XG4gIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKG1lc3NhZ2UpO1xuICBpZiAoIXRoaXMuc2VuZFN0b3ApIHtcbiAgICB0aGlzLnNlbmRTY2hlZHVsZSgpO1xuICB9XG59O1xuXG4vLyBGb3IgcG9sbGluZyB0cmFuc3BvcnRzIGluIGEgc2l0dWF0aW9uIHdoZW4gaW4gdGhlIG1lc3NhZ2UgY2FsbGJhY2ssXG4vLyBuZXcgbWVzc2FnZSBpcyBiZWluZyBzZW5kLiBJZiB0aGUgc2VuZGluZyBjb25uZWN0aW9uIHdhcyBzdGFydGVkXG4vLyBiZWZvcmUgcmVjZWl2aW5nIG9uZSwgaXQgaXMgcG9zc2libGUgdG8gc2F0dXJhdGUgdGhlIG5ldHdvcmsgYW5kXG4vLyB0aW1lb3V0IGR1ZSB0byB0aGUgbGFjayBvZiByZWNlaXZpbmcgc29ja2V0LiBUbyBhdm9pZCB0aGF0IHdlIGRlbGF5XG4vLyBzZW5kaW5nIG1lc3NhZ2VzIGJ5IHNvbWUgc21hbGwgdGltZSwgaW4gb3JkZXIgdG8gbGV0IHJlY2VpdmluZ1xuLy8gY29ubmVjdGlvbiBiZSBzdGFydGVkIGJlZm9yZWhhbmQuIFRoaXMgaXMgb25seSBhIGhhbGZtZWFzdXJlIGFuZFxuLy8gZG9lcyBub3QgZml4IHRoZSBiaWcgcHJvYmxlbSwgYnV0IGl0IGRvZXMgbWFrZSB0aGUgdGVzdHMgZ28gbW9yZVxuLy8gc3RhYmxlIG9uIHNsb3cgbmV0d29ya3MuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuc2VuZFNjaGVkdWxlV2FpdCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1Zygnc2VuZFNjaGVkdWxlV2FpdCcpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB0cmVmO1xuICB0aGlzLnNlbmRTdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3NlbmRTdG9wJyk7XG4gICAgc2VsZi5zZW5kU3RvcCA9IG51bGw7XG4gICAgY2xlYXJUaW1lb3V0KHRyZWYpO1xuICB9O1xuICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndGltZW91dCcpO1xuICAgIHNlbGYuc2VuZFN0b3AgPSBudWxsO1xuICAgIHNlbGYuc2VuZFNjaGVkdWxlKCk7XG4gIH0sIDI1KTtcbn07XG5cbkJ1ZmZlcmVkU2VuZGVyLnByb3RvdHlwZS5zZW5kU2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ3NlbmRTY2hlZHVsZScsIHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGgpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmICh0aGlzLnNlbmRCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgIHZhciBwYXlsb2FkID0gJ1snICsgdGhpcy5zZW5kQnVmZmVyLmpvaW4oJywnKSArICddJztcbiAgICB0aGlzLnNlbmRTdG9wID0gdGhpcy5zZW5kZXIodGhpcy51cmwsIHBheWxvYWQsIGZ1bmN0aW9uKGVycikge1xuICAgICAgc2VsZi5zZW5kU3RvcCA9IG51bGw7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGRlYnVnKCdlcnJvcicsIGVycik7XG4gICAgICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBlcnIuY29kZSB8fCAxMDA2LCAnU2VuZGluZyBlcnJvcjogJyArIGVycik7XG4gICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2VuZFNjaGVkdWxlV2FpdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdO1xuICB9XG59O1xuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5CdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMuX2NsZWFudXAoKTtcbiAgaWYgKHRoaXMuc2VuZFN0b3ApIHtcbiAgICB0aGlzLnNlbmRTdG9wKCk7XG4gICAgdGhpcy5zZW5kU3RvcCA9IG51bGw7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQnVmZmVyZWRTZW5kZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBJZnJhbWVUcmFuc3BvcnQgPSByZXF1aXJlKCcuLi9pZnJhbWUnKVxuICAsIG9iamVjdFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvb2JqZWN0JylcbiAgO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zcG9ydCkge1xuXG4gIGZ1bmN0aW9uIElmcmFtZVdyYXBUcmFuc3BvcnQodHJhbnNVcmwsIGJhc2VVcmwpIHtcbiAgICBJZnJhbWVUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc3BvcnQudHJhbnNwb3J0TmFtZSwgdHJhbnNVcmwsIGJhc2VVcmwpO1xuICB9XG5cbiAgaW5oZXJpdHMoSWZyYW1lV3JhcFRyYW5zcG9ydCwgSWZyYW1lVHJhbnNwb3J0KTtcblxuICBJZnJhbWVXcmFwVHJhbnNwb3J0LmVuYWJsZWQgPSBmdW5jdGlvbih1cmwsIGluZm8pIHtcbiAgICBpZiAoIWdsb2JhbC5kb2N1bWVudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBpZnJhbWVJbmZvID0gb2JqZWN0VXRpbHMuZXh0ZW5kKHt9LCBpbmZvKTtcbiAgICBpZnJhbWVJbmZvLnNhbWVPcmlnaW4gPSB0cnVlO1xuICAgIHJldHVybiB0cmFuc3BvcnQuZW5hYmxlZChpZnJhbWVJbmZvKSAmJiBJZnJhbWVUcmFuc3BvcnQuZW5hYmxlZCgpO1xuICB9O1xuXG4gIElmcmFtZVdyYXBUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICdpZnJhbWUtJyArIHRyYW5zcG9ydC50cmFuc3BvcnROYW1lO1xuICBJZnJhbWVXcmFwVHJhbnNwb3J0Lm5lZWRCb2R5ID0gdHJ1ZTtcbiAgSWZyYW1lV3JhcFRyYW5zcG9ydC5yb3VuZFRyaXBzID0gSWZyYW1lVHJhbnNwb3J0LnJvdW5kVHJpcHMgKyB0cmFuc3BvcnQucm91bmRUcmlwcyAtIDE7IC8vIGh0bWwsIGphdmFzY3JpcHQgKDIpICsgdHJhbnNwb3J0IC0gbm8gQ09SUyAoMSlcblxuICBJZnJhbWVXcmFwVHJhbnNwb3J0LmZhY2FkZVRyYW5zcG9ydCA9IHRyYW5zcG9ydDtcblxuICByZXR1cm4gSWZyYW1lV3JhcFRyYW5zcG9ydDtcbn07XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uLy4uL3V0aWxzL29iamVjdFwiOjQ5LFwiLi4vaWZyYW1lXCI6MjIsXCJpbmhlcml0c1wiOjU3fV0sMjc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6cG9sbGluZycpO1xufVxuXG5mdW5jdGlvbiBQb2xsaW5nKFJlY2VpdmVyLCByZWNlaXZlVXJsLCBBamF4T2JqZWN0KSB7XG4gIGRlYnVnKHJlY2VpdmVVcmwpO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcbiAgdGhpcy5SZWNlaXZlciA9IFJlY2VpdmVyO1xuICB0aGlzLnJlY2VpdmVVcmwgPSByZWNlaXZlVXJsO1xuICB0aGlzLkFqYXhPYmplY3QgPSBBamF4T2JqZWN0O1xuICB0aGlzLl9zY2hlZHVsZVJlY2VpdmVyKCk7XG59XG5cbmluaGVyaXRzKFBvbGxpbmcsIEV2ZW50RW1pdHRlcik7XG5cblBvbGxpbmcucHJvdG90eXBlLl9zY2hlZHVsZVJlY2VpdmVyID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdfc2NoZWR1bGVSZWNlaXZlcicpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBwb2xsID0gdGhpcy5wb2xsID0gbmV3IHRoaXMuUmVjZWl2ZXIodGhpcy5yZWNlaXZlVXJsLCB0aGlzLkFqYXhPYmplY3QpO1xuXG4gIHBvbGwub24oJ21lc3NhZ2UnLCBmdW5jdGlvbihtc2cpIHtcbiAgICBkZWJ1ZygnbWVzc2FnZScsIG1zZyk7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgbXNnKTtcbiAgfSk7XG5cbiAgcG9sbC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuICAgIGRlYnVnKCdjbG9zZScsIGNvZGUsIHJlYXNvbiwgc2VsZi5wb2xsSXNDbG9zaW5nKTtcbiAgICBzZWxmLnBvbGwgPSBwb2xsID0gbnVsbDtcblxuICAgIGlmICghc2VsZi5wb2xsSXNDbG9zaW5nKSB7XG4gICAgICBpZiAocmVhc29uID09PSAnbmV0d29yaycpIHtcbiAgICAgICAgc2VsZi5fc2NoZWR1bGVSZWNlaXZlcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5lbWl0KCdjbG9zZScsIGNvZGUgfHwgMTAwNiwgcmVhc29uKTtcbiAgICAgICAgc2VsZi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuUG9sbGluZy5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Fib3J0Jyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIHRoaXMucG9sbElzQ2xvc2luZyA9IHRydWU7XG4gIGlmICh0aGlzLnBvbGwpIHtcbiAgICB0aGlzLnBvbGwuYWJvcnQoKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb2xsaW5nO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJpbmhlcml0c1wiOjU3fV0sMjg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBCdWZmZXJlZFNlbmRlciA9IHJlcXVpcmUoJy4vYnVmZmVyZWQtc2VuZGVyJylcbiAgLCBQb2xsaW5nID0gcmVxdWlyZSgnLi9wb2xsaW5nJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnNlbmRlci1yZWNlaXZlcicpO1xufVxuXG5mdW5jdGlvbiBTZW5kZXJSZWNlaXZlcih0cmFuc1VybCwgdXJsU3VmZml4LCBzZW5kZXJGdW5jLCBSZWNlaXZlciwgQWpheE9iamVjdCkge1xuICB2YXIgcG9sbFVybCA9IHVybFV0aWxzLmFkZFBhdGgodHJhbnNVcmwsIHVybFN1ZmZpeCk7XG4gIGRlYnVnKHBvbGxVcmwpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIEJ1ZmZlcmVkU2VuZGVyLmNhbGwodGhpcywgdHJhbnNVcmwsIHNlbmRlckZ1bmMpO1xuXG4gIHRoaXMucG9sbCA9IG5ldyBQb2xsaW5nKFJlY2VpdmVyLCBwb2xsVXJsLCBBamF4T2JqZWN0KTtcbiAgdGhpcy5wb2xsLm9uKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKSB7XG4gICAgZGVidWcoJ3BvbGwgbWVzc2FnZScsIG1zZyk7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgbXNnKTtcbiAgfSk7XG4gIHRoaXMucG9sbC5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uKGNvZGUsIHJlYXNvbikge1xuICAgIGRlYnVnKCdwb2xsIGNsb3NlJywgY29kZSwgcmVhc29uKTtcbiAgICBzZWxmLnBvbGwgPSBudWxsO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBjb2RlLCByZWFzb24pO1xuICAgIHNlbGYuY2xvc2UoKTtcbiAgfSk7XG59XG5cbmluaGVyaXRzKFNlbmRlclJlY2VpdmVyLCBCdWZmZXJlZFNlbmRlcik7XG5cblNlbmRlclJlY2VpdmVyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBCdWZmZXJlZFNlbmRlci5wcm90b3R5cGUuY2xvc2UuY2FsbCh0aGlzKTtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gIGlmICh0aGlzLnBvbGwpIHtcbiAgICB0aGlzLnBvbGwuYWJvcnQoKTtcbiAgICB0aGlzLnBvbGwgPSBudWxsO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbmRlclJlY2VpdmVyO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi4vLi4vdXRpbHMvdXJsXCI6NTIsXCIuL2J1ZmZlcmVkLXNlbmRlclwiOjI1LFwiLi9wb2xsaW5nXCI6MjcsXCJkZWJ1Z1wiOjU1LFwiaW5oZXJpdHNcIjo1N31dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2Vzcyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBFdmVudFNvdXJjZURyaXZlciA9IHJlcXVpcmUoJ2V2ZW50c291cmNlJylcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnJlY2VpdmVyOmV2ZW50c291cmNlJyk7XG59XG5cbmZ1bmN0aW9uIEV2ZW50U291cmNlUmVjZWl2ZXIodXJsKSB7XG4gIGRlYnVnKHVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGVzID0gdGhpcy5lcyA9IG5ldyBFdmVudFNvdXJjZURyaXZlcih1cmwpO1xuICBlcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgZGVidWcoJ21lc3NhZ2UnLCBlLmRhdGEpO1xuICAgIHNlbGYuZW1pdCgnbWVzc2FnZScsIGRlY29kZVVSSShlLmRhdGEpKTtcbiAgfTtcbiAgZXMub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnZXJyb3InLCBlcy5yZWFkeVN0YXRlLCBlKTtcbiAgICAvLyBFUyBvbiByZWNvbm5lY3Rpb24gaGFzIHJlYWR5U3RhdGUgPSAwIG9yIDEuXG4gICAgLy8gb24gbmV0d29yayBlcnJvciBpdCdzIENMT1NFRCA9IDJcbiAgICB2YXIgcmVhc29uID0gKGVzLnJlYWR5U3RhdGUgIT09IDIgPyAnbmV0d29yaycgOiAncGVybWFuZW50Jyk7XG4gICAgc2VsZi5fY2xlYW51cCgpO1xuICAgIHNlbGYuX2Nsb3NlKHJlYXNvbik7XG4gIH07XG59XG5cbmluaGVyaXRzKEV2ZW50U291cmNlUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbkV2ZW50U291cmNlUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdhYm9ydCcpO1xuICB0aGlzLl9jbGVhbnVwKCk7XG4gIHRoaXMuX2Nsb3NlKCd1c2VyJyk7XG59O1xuXG5FdmVudFNvdXJjZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xlYW51cCcpO1xuICB2YXIgZXMgPSB0aGlzLmVzO1xuICBpZiAoZXMpIHtcbiAgICBlcy5vbm1lc3NhZ2UgPSBlcy5vbmVycm9yID0gbnVsbDtcbiAgICBlcy5jbG9zZSgpO1xuICAgIHRoaXMuZXMgPSBudWxsO1xuICB9XG59O1xuXG5FdmVudFNvdXJjZVJlY2VpdmVyLnByb3RvdHlwZS5fY2xvc2UgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgZGVidWcoJ2Nsb3NlJywgcmVhc29uKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICAvLyBTYWZhcmkgYW5kIGNocm9tZSA8IDE1IGNyYXNoIGlmIHdlIGNsb3NlIHdpbmRvdyBiZWZvcmVcbiAgLy8gd2FpdGluZyBmb3IgRVMgY2xlYW51cC4gU2VlOlxuICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9ODkxNTVcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcbiAgICBzZWxmLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICB9LCAyMDApO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFNvdXJjZVJlY2VpdmVyO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiZGVidWdcIjo1NSxcImV2ZW50c1wiOjMsXCJldmVudHNvdXJjZVwiOjE4LFwiaW5oZXJpdHNcIjo1N31dLDMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgaWZyYW1lVXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9pZnJhbWUnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCByYW5kb20gPSByZXF1aXJlKCcuLi8uLi91dGlscy9yYW5kb20nKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6cmVjZWl2ZXI6aHRtbGZpbGUnKTtcbn1cblxuZnVuY3Rpb24gSHRtbGZpbGVSZWNlaXZlcih1cmwpIHtcbiAgZGVidWcodXJsKTtcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWZyYW1lVXRpbHMucG9sbHV0ZUdsb2JhbE5hbWVzcGFjZSgpO1xuXG4gIHRoaXMuaWQgPSAnYScgKyByYW5kb20uc3RyaW5nKDYpO1xuICB1cmwgPSB1cmxVdGlscy5hZGRRdWVyeSh1cmwsICdjPScgKyBkZWNvZGVVUklDb21wb25lbnQoaWZyYW1lVXRpbHMuV1ByZWZpeCArICcuJyArIHRoaXMuaWQpKTtcblxuICBkZWJ1ZygndXNpbmcgaHRtbGZpbGUnLCBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCk7XG4gIHZhciBjb25zdHJ1Y3RGdW5jID0gSHRtbGZpbGVSZWNlaXZlci5odG1sZmlsZUVuYWJsZWQgP1xuICAgICAgaWZyYW1lVXRpbHMuY3JlYXRlSHRtbGZpbGUgOiBpZnJhbWVVdGlscy5jcmVhdGVJZnJhbWU7XG5cbiAgZ2xvYmFsW2lmcmFtZVV0aWxzLldQcmVmaXhdW3RoaXMuaWRdID0ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdzdGFydCcpO1xuICAgICAgc2VsZi5pZnJhbWVPYmoubG9hZGVkKCk7XG4gICAgfVxuICAsIG1lc3NhZ2U6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGRlYnVnKCdtZXNzYWdlJywgZGF0YSk7XG4gICAgICBzZWxmLmVtaXQoJ21lc3NhZ2UnLCBkYXRhKTtcbiAgICB9XG4gICwgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1Zygnc3RvcCcpO1xuICAgICAgc2VsZi5fY2xlYW51cCgpO1xuICAgICAgc2VsZi5fY2xvc2UoJ25ldHdvcmsnKTtcbiAgICB9XG4gIH07XG4gIHRoaXMuaWZyYW1lT2JqID0gY29uc3RydWN0RnVuYyh1cmwsIGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdjYWxsYmFjaycpO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICBzZWxmLl9jbG9zZSgncGVybWFuZW50Jyk7XG4gIH0pO1xufVxuXG5pbmhlcml0cyhIdG1sZmlsZVJlY2VpdmVyLCBFdmVudEVtaXR0ZXIpO1xuXG5IdG1sZmlsZVJlY2VpdmVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgdGhpcy5fY2xlYW51cCgpO1xuICB0aGlzLl9jbG9zZSgndXNlcicpO1xufTtcblxuSHRtbGZpbGVSZWNlaXZlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIGlmICh0aGlzLmlmcmFtZU9iaikge1xuICAgIHRoaXMuaWZyYW1lT2JqLmNsZWFudXAoKTtcbiAgICB0aGlzLmlmcmFtZU9iaiA9IG51bGw7XG4gIH1cbiAgZGVsZXRlIGdsb2JhbFtpZnJhbWVVdGlscy5XUHJlZml4XVt0aGlzLmlkXTtcbn07XG5cbkh0bWxmaWxlUmVjZWl2ZXIucHJvdG90eXBlLl9jbG9zZSA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICBkZWJ1ZygnX2Nsb3NlJywgcmVhc29uKTtcbiAgdGhpcy5lbWl0KCdjbG9zZScsIG51bGwsIHJlYXNvbik7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5IdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCA9IGZhbHNlO1xuXG4vLyBvYmZ1c2NhdGUgdG8gYXZvaWQgZmlyZXdhbGxzXG52YXIgYXhvID0gWydBY3RpdmUnXS5jb25jYXQoJ09iamVjdCcpLmpvaW4oJ1gnKTtcbmlmIChheG8gaW4gZ2xvYmFsKSB7XG4gIHRyeSB7XG4gICAgSHRtbGZpbGVSZWNlaXZlci5odG1sZmlsZUVuYWJsZWQgPSAhIW5ldyBnbG9iYWxbYXhvXSgnaHRtbGZpbGUnKTtcbiAgfSBjYXRjaCAoeCkge1xuICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgfVxufVxuXG5IdG1sZmlsZVJlY2VpdmVyLmVuYWJsZWQgPSBIdG1sZmlsZVJlY2VpdmVyLmh0bWxmaWxlRW5hYmxlZCB8fCBpZnJhbWVVdGlscy5pZnJhbWVFbmFibGVkO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEh0bWxmaWxlUmVjZWl2ZXI7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uLy4uL3V0aWxzL2lmcmFtZVwiOjQ3LFwiLi4vLi4vdXRpbHMvcmFuZG9tXCI6NTAsXCIuLi8uLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi8uLi91dGlscy9pZnJhbWUnKVxuICAsIHJhbmRvbSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3JhbmRvbScpXG4gICwgYnJvd3NlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2Jyb3dzZXInKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdXJsJylcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgO1xuXG52YXIgZGVidWcgPSBmdW5jdGlvbigpIHt9O1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdzb2NranMtY2xpZW50OnJlY2VpdmVyOmpzb25wJyk7XG59XG5cbmZ1bmN0aW9uIEpzb25wUmVjZWl2ZXIodXJsKSB7XG4gIGRlYnVnKHVybCk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG5cbiAgdXRpbHMucG9sbHV0ZUdsb2JhbE5hbWVzcGFjZSgpO1xuXG4gIHRoaXMuaWQgPSAnYScgKyByYW5kb20uc3RyaW5nKDYpO1xuICB2YXIgdXJsV2l0aElkID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsLCAnYz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHV0aWxzLldQcmVmaXggKyAnLicgKyB0aGlzLmlkKSk7XG5cbiAgZ2xvYmFsW3V0aWxzLldQcmVmaXhdW3RoaXMuaWRdID0gdGhpcy5fY2FsbGJhY2suYmluZCh0aGlzKTtcbiAgdGhpcy5fY3JlYXRlU2NyaXB0KHVybFdpdGhJZCk7XG5cbiAgLy8gRmFsbGJhY2sgbW9zdGx5IGZvciBLb25xdWVyb3IgLSBzdHVwaWQgdGltZXIsIDM1IHNlY29uZHMgc2hhbGwgYmUgcGxlbnR5LlxuICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3RpbWVvdXQnKTtcbiAgICBzZWxmLl9hYm9ydChuZXcgRXJyb3IoJ0pTT05QIHNjcmlwdCBsb2FkZWQgYWJub3JtYWxseSAodGltZW91dCknKSk7XG4gIH0sIEpzb25wUmVjZWl2ZXIudGltZW91dCk7XG59XG5cbmluaGVyaXRzKEpzb25wUmVjZWl2ZXIsIEV2ZW50RW1pdHRlcik7XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdhYm9ydCcpO1xuICBpZiAoZ2xvYmFsW3V0aWxzLldQcmVmaXhdW3RoaXMuaWRdKSB7XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignSlNPTlAgdXNlciBhYm9ydGVkIHJlYWQnKTtcbiAgICBlcnIuY29kZSA9IDEwMDA7XG4gICAgdGhpcy5fYWJvcnQoZXJyKTtcbiAgfVxufTtcblxuSnNvbnBSZWNlaXZlci50aW1lb3V0ID0gMzUwMDA7XG5Kc29ucFJlY2VpdmVyLnNjcmlwdEVycm9yVGltZW91dCA9IDEwMDA7XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9jYWxsYmFjayA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgZGVidWcoJ19jYWxsYmFjaycsIGRhdGEpO1xuICB0aGlzLl9jbGVhbnVwKCk7XG5cbiAgaWYgKHRoaXMuYWJvcnRpbmcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGF0YSkge1xuICAgIGRlYnVnKCdtZXNzYWdlJywgZGF0YSk7XG4gICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgZGF0YSk7XG4gIH1cbiAgdGhpcy5lbWl0KCdjbG9zZScsIG51bGwsICduZXR3b3JrJyk7XG4gIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG59O1xuXG5Kc29ucFJlY2VpdmVyLnByb3RvdHlwZS5fYWJvcnQgPSBmdW5jdGlvbihlcnIpIHtcbiAgZGVidWcoJ19hYm9ydCcsIGVycik7XG4gIHRoaXMuX2NsZWFudXAoKTtcbiAgdGhpcy5hYm9ydGluZyA9IHRydWU7XG4gIHRoaXMuZW1pdCgnY2xvc2UnLCBlcnIuY29kZSwgZXJyLm1lc3NhZ2UpO1xuICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xufTtcblxuSnNvbnBSZWNlaXZlci5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ19jbGVhbnVwJyk7XG4gIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XG4gIGlmICh0aGlzLnNjcmlwdDIpIHtcbiAgICB0aGlzLnNjcmlwdDIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdDIpO1xuICAgIHRoaXMuc2NyaXB0MiA9IG51bGw7XG4gIH1cbiAgaWYgKHRoaXMuc2NyaXB0KSB7XG4gICAgdmFyIHNjcmlwdCA9IHRoaXMuc2NyaXB0O1xuICAgIC8vIFVuZm9ydHVuYXRlbHksIHlvdSBjYW4ndCByZWFsbHkgYWJvcnQgc2NyaXB0IGxvYWRpbmcgb2ZcbiAgICAvLyB0aGUgc2NyaXB0LlxuICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHNjcmlwdC5vbmVycm9yID1cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbmNsaWNrID0gbnVsbDtcbiAgICB0aGlzLnNjcmlwdCA9IG51bGw7XG4gIH1cbiAgZGVsZXRlIGdsb2JhbFt1dGlscy5XUHJlZml4XVt0aGlzLmlkXTtcbn07XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9zY3JpcHRFcnJvciA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX3NjcmlwdEVycm9yJyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKHRoaXMuZXJyb3JUaW1lcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRoaXMuZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFzZWxmLmxvYWRlZE9rYXkpIHtcbiAgICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbmVycm9yKScpKTtcbiAgICB9XG4gIH0sIEpzb25wUmVjZWl2ZXIuc2NyaXB0RXJyb3JUaW1lb3V0KTtcbn07XG5cbkpzb25wUmVjZWl2ZXIucHJvdG90eXBlLl9jcmVhdGVTY3JpcHQgPSBmdW5jdGlvbih1cmwpIHtcbiAgZGVidWcoJ19jcmVhdGVTY3JpcHQnLCB1cmwpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzY3JpcHQgPSB0aGlzLnNjcmlwdCA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgdmFyIHNjcmlwdDI7ICAvLyBPcGVyYSBzeW5jaHJvbm91cyBsb2FkIHRyaWNrLlxuXG4gIHNjcmlwdC5pZCA9ICdhJyArIHJhbmRvbS5zdHJpbmcoOCk7XG4gIHNjcmlwdC5zcmMgPSB1cmw7XG4gIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gIHNjcmlwdC5jaGFyc2V0ID0gJ1VURi04JztcbiAgc2NyaXB0Lm9uZXJyb3IgPSB0aGlzLl9zY3JpcHRFcnJvci5iaW5kKHRoaXMpO1xuICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29ubG9hZCcpO1xuICAgIHNlbGYuX2Fib3J0KG5ldyBFcnJvcignSlNPTlAgc2NyaXB0IGxvYWRlZCBhYm5vcm1hbGx5IChvbmxvYWQpJykpO1xuICB9O1xuXG4gIC8vIElFOSBmaXJlcyAnZXJyb3InIGV2ZW50IGFmdGVyIG9ucmVhZHlzdGF0ZWNoYW5nZSBvciBiZWZvcmUsIGluIHJhbmRvbSBvcmRlci5cbiAgLy8gVXNlIGxvYWRlZE9rYXkgdG8gZGV0ZXJtaW5lIGlmIGFjdHVhbGx5IGVycm9yZWRcbiAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBzY3JpcHQucmVhZHlTdGF0ZSk7XG4gICAgaWYgKC9sb2FkZWR8Y2xvc2VkLy50ZXN0KHNjcmlwdC5yZWFkeVN0YXRlKSkge1xuICAgICAgaWYgKHNjcmlwdCAmJiBzY3JpcHQuaHRtbEZvciAmJiBzY3JpcHQub25jbGljaykge1xuICAgICAgICBzZWxmLmxvYWRlZE9rYXkgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEluIElFLCBhY3R1YWxseSBleGVjdXRlIHRoZSBzY3JpcHQuXG4gICAgICAgICAgc2NyaXB0Lm9uY2xpY2soKTtcbiAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgIC8vIGludGVudGlvbmFsbHkgZW1wdHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNjcmlwdCkge1xuICAgICAgICBzZWxmLl9hYm9ydChuZXcgRXJyb3IoJ0pTT05QIHNjcmlwdCBsb2FkZWQgYWJub3JtYWxseSAob25yZWFkeXN0YXRlY2hhbmdlKScpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIC8vIElFOiBldmVudC9odG1sRm9yL29uY2xpY2sgdHJpY2suXG4gIC8vIE9uZSBjYW4ndCByZWx5IG9uIHByb3BlciBvcmRlciBmb3Igb25yZWFkeXN0YXRlY2hhbmdlLiBJbiBvcmRlciB0b1xuICAvLyBtYWtlIHN1cmUsIHNldCBhICdodG1sRm9yJyBhbmQgJ2V2ZW50JyBwcm9wZXJ0aWVzLCBzbyB0aGF0XG4gIC8vIHNjcmlwdCBjb2RlIHdpbGwgYmUgaW5zdGFsbGVkIGFzICdvbmNsaWNrJyBoYW5kbGVyIGZvciB0aGVcbiAgLy8gc2NyaXB0IG9iamVjdC4gTGF0ZXIsIG9ucmVhZHlzdGF0ZWNoYW5nZSwgbWFudWFsbHkgZXhlY3V0ZSB0aGlzXG4gIC8vIGNvZGUuIEZGIGFuZCBDaHJvbWUgZG9lc24ndCB3b3JrIHdpdGggJ2V2ZW50JyBhbmQgJ2h0bWxGb3InXG4gIC8vIHNldC4gRm9yIHJlZmVyZW5jZSBzZWU6XG4gIC8vICAgaHR0cDovL2phdWJvdXJnLm5ldC8yMDEwLzA3L2xvYWRpbmctc2NyaXB0LWFzLW9uY2xpY2staGFuZGxlci1vZi5odG1sXG4gIC8vIEFsc28sIHJlYWQgb24gdGhhdCBhYm91dCBzY3JpcHQgb3JkZXJpbmc6XG4gIC8vICAgaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0R5bmFtaWNfU2NyaXB0X0V4ZWN1dGlvbl9PcmRlclxuICBpZiAodHlwZW9mIHNjcmlwdC5hc3luYyA9PT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLmRvY3VtZW50LmF0dGFjaEV2ZW50KSB7XG4gICAgLy8gQWNjb3JkaW5nIHRvIG1vemlsbGEgZG9jcywgaW4gcmVjZW50IGJyb3dzZXJzIHNjcmlwdC5hc3luYyBkZWZhdWx0c1xuICAgIC8vIHRvICd0cnVlJywgc28gd2UgbWF5IHVzZSBpdCB0byBkZXRlY3QgYSBnb29kIGJyb3dzZXI6XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSFRNTC9FbGVtZW50L3NjcmlwdFxuICAgIGlmICghYnJvd3Nlci5pc09wZXJhKCkpIHtcbiAgICAgIC8vIE5haXZlbHkgYXNzdW1lIHdlJ3JlIGluIElFXG4gICAgICB0cnkge1xuICAgICAgICBzY3JpcHQuaHRtbEZvciA9IHNjcmlwdC5pZDtcbiAgICAgICAgc2NyaXB0LmV2ZW50ID0gJ29uY2xpY2snO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAvLyBpbnRlbnRpb25hbGx5IGVtcHR5XG4gICAgICB9XG4gICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPcGVyYSwgc2Vjb25kIHN5bmMgc2NyaXB0IGhhY2tcbiAgICAgIHNjcmlwdDIgPSB0aGlzLnNjcmlwdDIgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICBzY3JpcHQyLnRleHQgPSBcInRyeXt2YXIgYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdcIiArIHNjcmlwdC5pZCArIFwiJyk7IGlmKGEpYS5vbmVycm9yKCk7fWNhdGNoKHgpe307XCI7XG4gICAgICBzY3JpcHQuYXN5bmMgPSBzY3JpcHQyLmFzeW5jID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmICh0eXBlb2Ygc2NyaXB0LmFzeW5jICE9PSAndW5kZWZpbmVkJykge1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gIH1cblxuICB2YXIgaGVhZCA9IGdsb2JhbC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICBoZWFkLmluc2VydEJlZm9yZShzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCk7XG4gIGlmIChzY3JpcHQyKSB7XG4gICAgaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0MiwgaGVhZC5maXJzdENoaWxkKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBKc29ucFJlY2VpdmVyO1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0sdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuLi8uLi91dGlscy9icm93c2VyXCI6NDQsXCIuLi8uLi91dGlscy9pZnJhbWVcIjo0NyxcIi4uLy4uL3V0aWxzL3JhbmRvbVwiOjUwLFwiLi4vLi4vdXRpbHMvdXJsXCI6NTIsXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpyZWNlaXZlcjp4aHInKTtcbn1cblxuZnVuY3Rpb24gWGhyUmVjZWl2ZXIodXJsLCBBamF4T2JqZWN0KSB7XG4gIGRlYnVnKHVybCk7XG4gIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgdGhpcy5idWZmZXJQb3NpdGlvbiA9IDA7XG5cbiAgdGhpcy54byA9IG5ldyBBamF4T2JqZWN0KCdQT1NUJywgdXJsLCBudWxsKTtcbiAgdGhpcy54by5vbignY2h1bmsnLCB0aGlzLl9jaHVua0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gIHRoaXMueG8ub25jZSgnZmluaXNoJywgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgZGVidWcoJ2ZpbmlzaCcsIHN0YXR1cywgdGV4dCk7XG4gICAgc2VsZi5fY2h1bmtIYW5kbGVyKHN0YXR1cywgdGV4dCk7XG4gICAgc2VsZi54byA9IG51bGw7XG4gICAgdmFyIHJlYXNvbiA9IHN0YXR1cyA9PT0gMjAwID8gJ25ldHdvcmsnIDogJ3Blcm1hbmVudCc7XG4gICAgZGVidWcoJ2Nsb3NlJywgcmVhc29uKTtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgbnVsbCwgcmVhc29uKTtcbiAgICBzZWxmLl9jbGVhbnVwKCk7XG4gIH0pO1xufVxuXG5pbmhlcml0cyhYaHJSZWNlaXZlciwgRXZlbnRFbWl0dGVyKTtcblxuWGhyUmVjZWl2ZXIucHJvdG90eXBlLl9jaHVua0hhbmRsZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRleHQpIHtcbiAgZGVidWcoJ19jaHVua0hhbmRsZXInLCBzdGF0dXMpO1xuICBpZiAoc3RhdHVzICE9PSAyMDAgfHwgIXRleHQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpZHggPSAtMTsgOyB0aGlzLmJ1ZmZlclBvc2l0aW9uICs9IGlkeCArIDEpIHtcbiAgICB2YXIgYnVmID0gdGV4dC5zbGljZSh0aGlzLmJ1ZmZlclBvc2l0aW9uKTtcbiAgICBpZHggPSBidWYuaW5kZXhPZignXFxuJyk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICB2YXIgbXNnID0gYnVmLnNsaWNlKDAsIGlkeCk7XG4gICAgaWYgKG1zZykge1xuICAgICAgZGVidWcoJ21lc3NhZ2UnLCBtc2cpO1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbXNnKTtcbiAgICB9XG4gIH1cbn07XG5cblhoclJlY2VpdmVyLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnX2NsZWFudXAnKTtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cblhoclJlY2VpdmVyLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnYWJvcnQnKTtcbiAgaWYgKHRoaXMueG8pIHtcbiAgICB0aGlzLnhvLmNsb3NlKCk7XG4gICAgZGVidWcoJ2Nsb3NlJyk7XG4gICAgdGhpcy5lbWl0KCdjbG9zZScsIG51bGwsICd1c2VyJyk7XG4gICAgdGhpcy54byA9IG51bGw7XG4gIH1cbiAgdGhpcy5fY2xlYW51cCgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBYaHJSZWNlaXZlcjtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmFuZG9tID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvcmFuZG9tJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpzZW5kZXI6anNvbnAnKTtcbn1cblxudmFyIGZvcm0sIGFyZWE7XG5cbmZ1bmN0aW9uIGNyZWF0ZUlmcmFtZShpZCkge1xuICBkZWJ1ZygnY3JlYXRlSWZyYW1lJywgaWQpO1xuICB0cnkge1xuICAgIC8vIGllNiBkeW5hbWljIGlmcmFtZXMgd2l0aCB0YXJnZXQ9XCJcIiBzdXBwb3J0ICh0aGFua3MgQ2hyaXMgTGFtYmFjaGVyKVxuICAgIHJldHVybiBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBuYW1lPVwiJyArIGlkICsgJ1wiPicpO1xuICB9IGNhdGNoICh4KSB7XG4gICAgdmFyIGlmcmFtZSA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUubmFtZSA9IGlkO1xuICAgIHJldHVybiBpZnJhbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9ybSgpIHtcbiAgZGVidWcoJ2NyZWF0ZUZvcm0nKTtcbiAgZm9ybSA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZm9ybS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gIGZvcm0ubWV0aG9kID0gJ1BPU1QnO1xuICBmb3JtLmVuY3R5cGUgPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcbiAgZm9ybS5hY2NlcHRDaGFyc2V0ID0gJ1VURi04JztcblxuICBhcmVhID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gIGFyZWEubmFtZSA9ICdkJztcbiAgZm9ybS5hcHBlbmRDaGlsZChhcmVhKTtcblxuICBnbG9iYWwuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1cmwsIHBheWxvYWQsIGNhbGxiYWNrKSB7XG4gIGRlYnVnKHVybCwgcGF5bG9hZCk7XG4gIGlmICghZm9ybSkge1xuICAgIGNyZWF0ZUZvcm0oKTtcbiAgfVxuICB2YXIgaWQgPSAnYScgKyByYW5kb20uc3RyaW5nKDgpO1xuICBmb3JtLnRhcmdldCA9IGlkO1xuICBmb3JtLmFjdGlvbiA9IHVybFV0aWxzLmFkZFF1ZXJ5KHVybFV0aWxzLmFkZFBhdGgodXJsLCAnL2pzb25wX3NlbmQnKSwgJ2k9JyArIGlkKTtcblxuICB2YXIgaWZyYW1lID0gY3JlYXRlSWZyYW1lKGlkKTtcbiAgaWZyYW1lLmlkID0gaWQ7XG4gIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICBmb3JtLmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cbiAgdHJ5IHtcbiAgICBhcmVhLnZhbHVlID0gcGF5bG9hZDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIHNlcmlvdXNseSBicm9rZW4gYnJvd3NlcnMgZ2V0IGhlcmVcbiAgfVxuICBmb3JtLnN1Ym1pdCgpO1xuXG4gIHZhciBjb21wbGV0ZWQgPSBmdW5jdGlvbihlcnIpIHtcbiAgICBkZWJ1ZygnY29tcGxldGVkJywgaWQsIGVycik7XG4gICAgaWYgKCFpZnJhbWUub25lcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gaWZyYW1lLm9uZXJyb3IgPSBpZnJhbWUub25sb2FkID0gbnVsbDtcbiAgICAvLyBPcGVyYSBtaW5pIGRvZXNuJ3QgbGlrZSBpZiB3ZSBHQyBpZnJhbWVcbiAgICAvLyBpbW1lZGlhdGVseSwgdGh1cyB0aGlzIHRpbWVvdXQuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdjbGVhbmluZyB1cCcsIGlkKTtcbiAgICAgIGlmcmFtZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcmFtZSk7XG4gICAgICBpZnJhbWUgPSBudWxsO1xuICAgIH0sIDUwMCk7XG4gICAgYXJlYS52YWx1ZSA9ICcnO1xuICAgIC8vIEl0IGlzIG5vdCBwb3NzaWJsZSB0byBkZXRlY3QgaWYgdGhlIGlmcmFtZSBzdWNjZWVkZWQgb3JcbiAgICAvLyBmYWlsZWQgdG8gc3VibWl0IG91ciBmb3JtLlxuICAgIGNhbGxiYWNrKGVycik7XG4gIH07XG4gIGlmcmFtZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBpZCk7XG4gICAgY29tcGxldGVkKCk7XG4gIH07XG4gIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25sb2FkJywgaWQpO1xuICAgIGNvbXBsZXRlZCgpO1xuICB9O1xuICBpZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBpZCwgaWZyYW1lLnJlYWR5U3RhdGUsIGUpO1xuICAgIGlmIChpZnJhbWUucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgY29tcGxldGVkKCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ2Fib3J0ZWQnLCBpZCk7XG4gICAgY29tcGxldGVkKG5ldyBFcnJvcignQWJvcnRlZCcpKTtcbiAgfTtcbn07XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uLy4uL3V0aWxzL3JhbmRvbVwiOjUwLFwiLi4vLi4vdXRpbHMvdXJsXCI6NTIsXCJkZWJ1Z1wiOjU1fV0sMzQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBldmVudFV0aWxzID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZXZlbnQnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuLi8uLi91dGlscy9icm93c2VyJylcbiAgLCB1cmxVdGlscyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL3VybCcpXG4gIDtcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDpzZW5kZXI6eGRyJyk7XG59XG5cbi8vIFJlZmVyZW5jZXM6XG4vLyAgIGh0dHA6Ly9hamF4aWFuLmNvbS9hcmNoaXZlcy8xMDAtbGluZS1hamF4LXdyYXBwZXJcbi8vICAgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2NjMjg4MDYwKHY9VlMuODUpLmFzcHhcblxuZnVuY3Rpb24gWERST2JqZWN0KG1ldGhvZCwgdXJsLCBwYXlsb2FkKSB7XG4gIGRlYnVnKG1ldGhvZCwgdXJsKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYuX3N0YXJ0KG1ldGhvZCwgdXJsLCBwYXlsb2FkKTtcbiAgfSwgMCk7XG59XG5cbmluaGVyaXRzKFhEUk9iamVjdCwgRXZlbnRFbWl0dGVyKTtcblxuWERST2JqZWN0LnByb3RvdHlwZS5fc3RhcnQgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgcGF5bG9hZCkge1xuICBkZWJ1ZygnX3N0YXJ0Jyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHhkciA9IG5ldyBnbG9iYWwuWERvbWFpblJlcXVlc3QoKTtcbiAgLy8gSUUgY2FjaGVzIGV2ZW4gUE9TVHNcbiAgdXJsID0gdXJsVXRpbHMuYWRkUXVlcnkodXJsLCAndD0nICsgKCtuZXcgRGF0ZSgpKSk7XG5cbiAgeGRyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicpO1xuICAgIHNlbGYuX2Vycm9yKCk7XG4gIH07XG4gIHhkci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1Zygnb250aW1lb3V0Jyk7XG4gICAgc2VsZi5fZXJyb3IoKTtcbiAgfTtcbiAgeGRyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygncHJvZ3Jlc3MnLCB4ZHIucmVzcG9uc2VUZXh0KTtcbiAgICBzZWxmLmVtaXQoJ2NodW5rJywgMjAwLCB4ZHIucmVzcG9uc2VUZXh0KTtcbiAgfTtcbiAgeGRyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCdsb2FkJyk7XG4gICAgc2VsZi5lbWl0KCdmaW5pc2gnLCAyMDAsIHhkci5yZXNwb25zZVRleHQpO1xuICAgIHNlbGYuX2NsZWFudXAoZmFsc2UpO1xuICB9O1xuICB0aGlzLnhkciA9IHhkcjtcbiAgdGhpcy51bmxvYWRSZWYgPSBldmVudFV0aWxzLnVubG9hZEFkZChmdW5jdGlvbigpIHtcbiAgICBzZWxmLl9jbGVhbnVwKHRydWUpO1xuICB9KTtcbiAgdHJ5IHtcbiAgICAvLyBGYWlscyB3aXRoIEFjY2Vzc0RlbmllZCBpZiBwb3J0IG51bWJlciBpcyBib2d1c1xuICAgIHRoaXMueGRyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgIGlmICh0aGlzLnRpbWVvdXQpIHtcbiAgICAgIHRoaXMueGRyLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQ7XG4gICAgfVxuICAgIHRoaXMueGRyLnNlbmQocGF5bG9hZCk7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICB0aGlzLl9lcnJvcigpO1xuICB9XG59O1xuXG5YRFJPYmplY3QucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmVtaXQoJ2ZpbmlzaCcsIDAsICcnKTtcbiAgdGhpcy5fY2xlYW51cChmYWxzZSk7XG59O1xuXG5YRFJPYmplY3QucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oYWJvcnQpIHtcbiAgZGVidWcoJ2NsZWFudXAnLCBhYm9ydCk7XG4gIGlmICghdGhpcy54ZHIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgZXZlbnRVdGlscy51bmxvYWREZWwodGhpcy51bmxvYWRSZWYpO1xuXG4gIHRoaXMueGRyLm9udGltZW91dCA9IHRoaXMueGRyLm9uZXJyb3IgPSB0aGlzLnhkci5vbnByb2dyZXNzID0gdGhpcy54ZHIub25sb2FkID0gbnVsbDtcbiAgaWYgKGFib3J0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMueGRyLmFib3J0KCk7XG4gICAgfSBjYXRjaCAoeCkge1xuICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgIH1cbiAgfVxuICB0aGlzLnVubG9hZFJlZiA9IHRoaXMueGRyID0gbnVsbDtcbn07XG5cblhEUk9iamVjdC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgZGVidWcoJ2Nsb3NlJyk7XG4gIHRoaXMuX2NsZWFudXAodHJ1ZSk7XG59O1xuXG4vLyBJRSA4LzkgaWYgdGhlIHJlcXVlc3QgdGFyZ2V0IHVzZXMgdGhlIHNhbWUgc2NoZW1lIC0gIzc5XG5YRFJPYmplY3QuZW5hYmxlZCA9ICEhKGdsb2JhbC5YRG9tYWluUmVxdWVzdCAmJiBicm93c2VyLmhhc0RvbWFpbigpKTtcblxubW9kdWxlLmV4cG9ydHMgPSBYRFJPYmplY3Q7XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHtcIi4uLy4uL3V0aWxzL2Jyb3dzZXJcIjo0NCxcIi4uLy4uL3V0aWxzL2V2ZW50XCI6NDYsXCIuLi8uLi91dGlscy91cmxcIjo1MixcImRlYnVnXCI6NTUsXCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIFhockRyaXZlciA9IHJlcXVpcmUoJy4uL2RyaXZlci94aHInKVxuICA7XG5cbmZ1bmN0aW9uIFhIUkNvcnNPYmplY3QobWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMpIHtcbiAgWGhyRHJpdmVyLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMpO1xufVxuXG5pbmhlcml0cyhYSFJDb3JzT2JqZWN0LCBYaHJEcml2ZXIpO1xuXG5YSFJDb3JzT2JqZWN0LmVuYWJsZWQgPSBYaHJEcml2ZXIuZW5hYmxlZCAmJiBYaHJEcml2ZXIuc3VwcG9ydHNDT1JTO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFhIUkNvcnNPYmplY3Q7XG5cbn0se1wiLi4vZHJpdmVyL3hoclwiOjE3LFwiaW5oZXJpdHNcIjo1N31dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlclxuICAsIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICA7XG5cbmZ1bmN0aW9uIFhIUkZha2UoLyogbWV0aG9kLCB1cmwsIHBheWxvYWQsIG9wdHMgKi8pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTtcblxuICB0aGlzLnRvID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBzZWxmLmVtaXQoJ2ZpbmlzaCcsIDIwMCwgJ3t9Jyk7XG4gIH0sIFhIUkZha2UudGltZW91dCk7XG59XG5cbmluaGVyaXRzKFhIUkZha2UsIEV2ZW50RW1pdHRlcik7XG5cblhIUkZha2UucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIGNsZWFyVGltZW91dCh0aGlzLnRvKTtcbn07XG5cblhIUkZha2UudGltZW91dCA9IDIwMDA7XG5cbm1vZHVsZS5leHBvcnRzID0gWEhSRmFrZTtcblxufSx7XCJldmVudHNcIjozLFwiaW5oZXJpdHNcIjo1N31dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIFhockRyaXZlciA9IHJlcXVpcmUoJy4uL2RyaXZlci94aHInKVxuICA7XG5cbmZ1bmN0aW9uIFhIUkxvY2FsT2JqZWN0KG1ldGhvZCwgdXJsLCBwYXlsb2FkIC8qLCBvcHRzICovKSB7XG4gIFhockRyaXZlci5jYWxsKHRoaXMsIG1ldGhvZCwgdXJsLCBwYXlsb2FkLCB7XG4gICAgbm9DcmVkZW50aWFsczogdHJ1ZVxuICB9KTtcbn1cblxuaW5oZXJpdHMoWEhSTG9jYWxPYmplY3QsIFhockRyaXZlcik7XG5cblhIUkxvY2FsT2JqZWN0LmVuYWJsZWQgPSBYaHJEcml2ZXIuZW5hYmxlZDtcblxubW9kdWxlLmV4cG9ydHMgPSBYSFJMb2NhbE9iamVjdDtcblxufSx7XCIuLi9kcml2ZXIveGhyXCI6MTcsXCJpbmhlcml0c1wiOjU3fV0sMzg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvZXZlbnQnKVxuICAsIHVybFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvdXJsJylcbiAgLCBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXJcbiAgLCBXZWJzb2NrZXREcml2ZXIgPSByZXF1aXJlKCcuL2RyaXZlci93ZWJzb2NrZXQnKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6d2Vic29ja2V0Jyk7XG59XG5cbmZ1bmN0aW9uIFdlYlNvY2tldFRyYW5zcG9ydCh0cmFuc1VybCwgaWdub3JlLCBvcHRpb25zKSB7XG4gIGlmICghV2ViU29ja2V0VHJhbnNwb3J0LmVuYWJsZWQoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG5cbiAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7XG4gIGRlYnVnKCdjb25zdHJ1Y3RvcicsIHRyYW5zVXJsKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciB1cmwgPSB1cmxVdGlscy5hZGRQYXRoKHRyYW5zVXJsLCAnL3dlYnNvY2tldCcpO1xuICBpZiAodXJsLnNsaWNlKDAsIDUpID09PSAnaHR0cHMnKSB7XG4gICAgdXJsID0gJ3dzcycgKyB1cmwuc2xpY2UoNSk7XG4gIH0gZWxzZSB7XG4gICAgdXJsID0gJ3dzJyArIHVybC5zbGljZSg0KTtcbiAgfVxuICB0aGlzLnVybCA9IHVybDtcblxuICB0aGlzLndzID0gbmV3IFdlYnNvY2tldERyaXZlcih0aGlzLnVybCwgW10sIG9wdGlvbnMpO1xuICB0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnbWVzc2FnZSBldmVudCcsIGUuZGF0YSk7XG4gICAgc2VsZi5lbWl0KCdtZXNzYWdlJywgZS5kYXRhKTtcbiAgfTtcbiAgLy8gRmlyZWZveCBoYXMgYW4gaW50ZXJlc3RpbmcgYnVnLiBJZiBhIHdlYnNvY2tldCBjb25uZWN0aW9uIGlzXG4gIC8vIGNyZWF0ZWQgYWZ0ZXIgb251bmxvYWQsIGl0IHN0YXlzIGFsaXZlIGV2ZW4gd2hlbiB1c2VyXG4gIC8vIG5hdmlnYXRlcyBhd2F5IGZyb20gdGhlIHBhZ2UuIEluIHN1Y2ggc2l0dWF0aW9uIGxldCdzIGxpZSAtXG4gIC8vIGxldCdzIG5vdCBvcGVuIHRoZSB3cyBjb25uZWN0aW9uIGF0IGFsbC4gU2VlOlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vc29ja2pzL3NvY2tqcy1jbGllbnQvaXNzdWVzLzI4XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NjA4NVxuICB0aGlzLnVubG9hZFJlZiA9IHV0aWxzLnVubG9hZEFkZChmdW5jdGlvbigpIHtcbiAgICBkZWJ1ZygndW5sb2FkJyk7XG4gICAgc2VsZi53cy5jbG9zZSgpO1xuICB9KTtcbiAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24oZSkge1xuICAgIGRlYnVnKCdjbG9zZSBldmVudCcsIGUuY29kZSwgZS5yZWFzb24pO1xuICAgIHNlbGYuZW1pdCgnY2xvc2UnLCBlLmNvZGUsIGUucmVhc29uKTtcbiAgICBzZWxmLl9jbGVhbnVwKCk7XG4gIH07XG4gIHRoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICBkZWJ1ZygnZXJyb3IgZXZlbnQnLCBlKTtcbiAgICBzZWxmLmVtaXQoJ2Nsb3NlJywgMTAwNiwgJ1dlYlNvY2tldCBjb25uZWN0aW9uIGJyb2tlbicpO1xuICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgfTtcbn1cblxuaW5oZXJpdHMoV2ViU29ja2V0VHJhbnNwb3J0LCBFdmVudEVtaXR0ZXIpO1xuXG5XZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHZhciBtc2cgPSAnWycgKyBkYXRhICsgJ10nO1xuICBkZWJ1Zygnc2VuZCcsIG1zZyk7XG4gIHRoaXMud3Muc2VuZChtc2cpO1xufTtcblxuV2ViU29ja2V0VHJhbnNwb3J0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2xvc2UnKTtcbiAgdmFyIHdzID0gdGhpcy53cztcbiAgdGhpcy5fY2xlYW51cCgpO1xuICBpZiAod3MpIHtcbiAgICB3cy5jbG9zZSgpO1xuICB9XG59O1xuXG5XZWJTb2NrZXRUcmFuc3BvcnQucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdfY2xlYW51cCcpO1xuICB2YXIgd3MgPSB0aGlzLndzO1xuICBpZiAod3MpIHtcbiAgICB3cy5vbm1lc3NhZ2UgPSB3cy5vbmNsb3NlID0gd3Mub25lcnJvciA9IG51bGw7XG4gIH1cbiAgdXRpbHMudW5sb2FkRGVsKHRoaXMudW5sb2FkUmVmKTtcbiAgdGhpcy51bmxvYWRSZWYgPSB0aGlzLndzID0gbnVsbDtcbiAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbn07XG5cbldlYlNvY2tldFRyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdlbmFibGVkJyk7XG4gIHJldHVybiAhIVdlYnNvY2tldERyaXZlcjtcbn07XG5XZWJTb2NrZXRUcmFuc3BvcnQudHJhbnNwb3J0TmFtZSA9ICd3ZWJzb2NrZXQnO1xuXG4vLyBJbiB0aGVvcnksIHdzIHNob3VsZCByZXF1aXJlIDEgcm91bmQgdHJpcC4gQnV0IGluIGNocm9tZSwgdGhpcyBpc1xuLy8gbm90IHZlcnkgc3RhYmxlIG92ZXIgU1NMLiBNb3N0IGxpa2VseSBhIHdzIGNvbm5lY3Rpb24gcmVxdWlyZXMgYVxuLy8gc2VwYXJhdGUgU1NMIGNvbm5lY3Rpb24sIGluIHdoaWNoIGNhc2UgMiByb3VuZCB0cmlwcyBhcmUgYW5cbi8vIGFic29sdXRlIG1pbnVtdW0uXG5XZWJTb2NrZXRUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0VHJhbnNwb3J0O1xuXG59KS5jYWxsKHRoaXMseyBlbnY6IHt9IH0pXG5cbn0se1wiLi4vdXRpbHMvZXZlbnRcIjo0NixcIi4uL3V0aWxzL3VybFwiOjUyLFwiLi9kcml2ZXIvd2Vic29ja2V0XCI6MTksXCJkZWJ1Z1wiOjU1LFwiZXZlbnRzXCI6MyxcImluaGVyaXRzXCI6NTd9XSwzOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbiAgLCBBamF4QmFzZWRUcmFuc3BvcnQgPSByZXF1aXJlKCcuL2xpYi9hamF4LWJhc2VkJylcbiAgLCBYZHJTdHJlYW1pbmdUcmFuc3BvcnQgPSByZXF1aXJlKCcuL3hkci1zdHJlYW1pbmcnKVxuICAsIFhoclJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci94aHInKVxuICAsIFhEUk9iamVjdCA9IHJlcXVpcmUoJy4vc2VuZGVyL3hkcicpXG4gIDtcblxuZnVuY3Rpb24gWGRyUG9sbGluZ1RyYW5zcG9ydCh0cmFuc1VybCkge1xuICBpZiAoIVhEUk9iamVjdC5lbmFibGVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUcmFuc3BvcnQgY3JlYXRlZCB3aGVuIGRpc2FibGVkJyk7XG4gIH1cbiAgQWpheEJhc2VkVHJhbnNwb3J0LmNhbGwodGhpcywgdHJhbnNVcmwsICcveGhyJywgWGhyUmVjZWl2ZXIsIFhEUk9iamVjdCk7XG59XG5cbmluaGVyaXRzKFhkclBvbGxpbmdUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cblhkclBvbGxpbmdUcmFuc3BvcnQuZW5hYmxlZCA9IFhkclN0cmVhbWluZ1RyYW5zcG9ydC5lbmFibGVkO1xuWGRyUG9sbGluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hkci1wb2xsaW5nJztcblhkclBvbGxpbmdUcmFuc3BvcnQucm91bmRUcmlwcyA9IDI7IC8vIHByZWZsaWdodCwgYWpheFxuXG5tb2R1bGUuZXhwb3J0cyA9IFhkclBvbGxpbmdUcmFuc3BvcnQ7XG5cbn0se1wiLi9saWIvYWpheC1iYXNlZFwiOjI0LFwiLi9yZWNlaXZlci94aHJcIjozMixcIi4vc2VuZGVyL3hkclwiOjM0LFwiLi94ZHItc3RyZWFtaW5nXCI6NDAsXCJpbmhlcml0c1wiOjU3fV0sNDA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG4gICwgQWpheEJhc2VkVHJhbnNwb3J0ID0gcmVxdWlyZSgnLi9saWIvYWpheC1iYXNlZCcpXG4gICwgWGhyUmVjZWl2ZXIgPSByZXF1aXJlKCcuL3JlY2VpdmVyL3hocicpXG4gICwgWERST2JqZWN0ID0gcmVxdWlyZSgnLi9zZW5kZXIveGRyJylcbiAgO1xuXG4vLyBBY2NvcmRpbmcgdG86XG4vLyAgIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTY0MTUwNy9kZXRlY3QtYnJvd3Nlci1zdXBwb3J0LWZvci1jcm9zcy1kb21haW4teG1saHR0cHJlcXVlc3RzXG4vLyAgIGh0dHA6Ly9oYWNrcy5tb3ppbGxhLm9yZy8yMDA5LzA3L2Nyb3NzLXNpdGUteG1saHR0cHJlcXVlc3Qtd2l0aC1jb3JzL1xuXG5mdW5jdGlvbiBYZHJTdHJlYW1pbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFYRFJPYmplY3QuZW5hYmxlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVHJhbnNwb3J0IGNyZWF0ZWQgd2hlbiBkaXNhYmxlZCcpO1xuICB9XG4gIEFqYXhCYXNlZFRyYW5zcG9ydC5jYWxsKHRoaXMsIHRyYW5zVXJsLCAnL3hocl9zdHJlYW1pbmcnLCBYaHJSZWNlaXZlciwgWERST2JqZWN0KTtcbn1cblxuaW5oZXJpdHMoWGRyU3RyZWFtaW5nVHJhbnNwb3J0LCBBamF4QmFzZWRUcmFuc3BvcnQpO1xuXG5YZHJTdHJlYW1pbmdUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKGluZm8pIHtcbiAgaWYgKGluZm8uY29va2llX25lZWRlZCB8fCBpbmZvLm51bGxPcmlnaW4pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIFhEUk9iamVjdC5lbmFibGVkICYmIGluZm8uc2FtZVNjaGVtZTtcbn07XG5cblhkclN0cmVhbWluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hkci1zdHJlYW1pbmcnO1xuWGRyU3RyZWFtaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxubW9kdWxlLmV4cG9ydHMgPSBYZHJTdHJlYW1pbmdUcmFuc3BvcnQ7XG5cbn0se1wiLi9saWIvYWpheC1iYXNlZFwiOjI0LFwiLi9yZWNlaXZlci94aHJcIjozMixcIi4vc2VuZGVyL3hkclwiOjM0LFwiaW5oZXJpdHNcIjo1N31dLDQxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIFhoclJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci94aHInKVxuICAsIFhIUkNvcnNPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItY29ycycpXG4gICwgWEhSTG9jYWxPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItbG9jYWwnKVxuICA7XG5cbmZ1bmN0aW9uIFhoclBvbGxpbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFYSFJMb2NhbE9iamVjdC5lbmFibGVkICYmICFYSFJDb3JzT2JqZWN0LmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy94aHInLCBYaHJSZWNlaXZlciwgWEhSQ29yc09iamVjdCk7XG59XG5cbmluaGVyaXRzKFhoclBvbGxpbmdUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cblhoclBvbGxpbmdUcmFuc3BvcnQuZW5hYmxlZCA9IGZ1bmN0aW9uKGluZm8pIHtcbiAgaWYgKGluZm8ubnVsbE9yaWdpbikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChYSFJMb2NhbE9iamVjdC5lbmFibGVkICYmIGluZm8uc2FtZU9yaWdpbikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBYSFJDb3JzT2JqZWN0LmVuYWJsZWQ7XG59O1xuXG5YaHJQb2xsaW5nVHJhbnNwb3J0LnRyYW5zcG9ydE5hbWUgPSAneGhyLXBvbGxpbmcnO1xuWGhyUG9sbGluZ1RyYW5zcG9ydC5yb3VuZFRyaXBzID0gMjsgLy8gcHJlZmxpZ2h0LCBhamF4XG5cbm1vZHVsZS5leHBvcnRzID0gWGhyUG9sbGluZ1RyYW5zcG9ydDtcblxufSx7XCIuL2xpYi9hamF4LWJhc2VkXCI6MjQsXCIuL3JlY2VpdmVyL3hoclwiOjMyLFwiLi9zZW5kZXIveGhyLWNvcnNcIjozNSxcIi4vc2VuZGVyL3hoci1sb2NhbFwiOjM3LFwiaW5oZXJpdHNcIjo1N31dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxuICAsIEFqYXhCYXNlZFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vbGliL2FqYXgtYmFzZWQnKVxuICAsIFhoclJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlci94aHInKVxuICAsIFhIUkNvcnNPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItY29ycycpXG4gICwgWEhSTG9jYWxPYmplY3QgPSByZXF1aXJlKCcuL3NlbmRlci94aHItbG9jYWwnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuLi91dGlscy9icm93c2VyJylcbiAgO1xuXG5mdW5jdGlvbiBYaHJTdHJlYW1pbmdUcmFuc3BvcnQodHJhbnNVcmwpIHtcbiAgaWYgKCFYSFJMb2NhbE9iamVjdC5lbmFibGVkICYmICFYSFJDb3JzT2JqZWN0LmVuYWJsZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zcG9ydCBjcmVhdGVkIHdoZW4gZGlzYWJsZWQnKTtcbiAgfVxuICBBamF4QmFzZWRUcmFuc3BvcnQuY2FsbCh0aGlzLCB0cmFuc1VybCwgJy94aHJfc3RyZWFtaW5nJywgWGhyUmVjZWl2ZXIsIFhIUkNvcnNPYmplY3QpO1xufVxuXG5pbmhlcml0cyhYaHJTdHJlYW1pbmdUcmFuc3BvcnQsIEFqYXhCYXNlZFRyYW5zcG9ydCk7XG5cblhoclN0cmVhbWluZ1RyYW5zcG9ydC5lbmFibGVkID0gZnVuY3Rpb24oaW5mbykge1xuICBpZiAoaW5mby5udWxsT3JpZ2luKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIE9wZXJhIGRvZXNuJ3Qgc3VwcG9ydCB4aHItc3RyZWFtaW5nICM2MFxuICAvLyBCdXQgaXQgbWlnaHQgYmUgYWJsZSB0byAjOTJcbiAgaWYgKGJyb3dzZXIuaXNPcGVyYSgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIFhIUkNvcnNPYmplY3QuZW5hYmxlZDtcbn07XG5cblhoclN0cmVhbWluZ1RyYW5zcG9ydC50cmFuc3BvcnROYW1lID0gJ3hoci1zdHJlYW1pbmcnO1xuWGhyU3RyZWFtaW5nVHJhbnNwb3J0LnJvdW5kVHJpcHMgPSAyOyAvLyBwcmVmbGlnaHQsIGFqYXhcblxuLy8gU2FmYXJpIGdldHMgY29uZnVzZWQgd2hlbiBhIHN0cmVhbWluZyBhamF4IHJlcXVlc3QgaXMgc3RhcnRlZFxuLy8gYmVmb3JlIG9ubG9hZC4gVGhpcyBjYXVzZXMgdGhlIGxvYWQgaW5kaWNhdG9yIHRvIHNwaW4gaW5kZWZpbmV0ZWx5LlxuLy8gT25seSByZXF1aXJlIGJvZHkgd2hlbiB1c2VkIGluIGEgYnJvd3NlclxuWGhyU3RyZWFtaW5nVHJhbnNwb3J0Lm5lZWRCb2R5ID0gISFnbG9iYWwuZG9jdW1lbnQ7XG5cbm1vZHVsZS5leHBvcnRzID0gWGhyU3RyZWFtaW5nVHJhbnNwb3J0O1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCIuLi91dGlscy9icm93c2VyXCI6NDQsXCIuL2xpYi9hamF4LWJhc2VkXCI6MjQsXCIuL3JlY2VpdmVyL3hoclwiOjMyLFwiLi9zZW5kZXIveGhyLWNvcnNcIjozNSxcIi4vc2VuZGVyL3hoci1sb2NhbFwiOjM3LFwiaW5oZXJpdHNcIjo1N31dLDQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxuaWYgKGdsb2JhbC5jcnlwdG8gJiYgZ2xvYmFsLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMpIHtcbiAgbW9kdWxlLmV4cG9ydHMucmFuZG9tQnl0ZXMgPSBmdW5jdGlvbihsZW5ndGgpIHtcbiAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgIGdsb2JhbC5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKTtcbiAgICByZXR1cm4gYnl0ZXM7XG4gIH07XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cy5yYW5kb21CeXRlcyA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHZhciBieXRlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ5dGVzW2ldID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xuICB9O1xufVxuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7fV0sNDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNPcGVyYTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5uYXZpZ2F0b3IgJiZcbiAgICAgIC9vcGVyYS9pLnRlc3QoZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICB9XG5cbiwgaXNLb25xdWVyb3I6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBnbG9iYWwubmF2aWdhdG9yICYmXG4gICAgICAva29ucXVlcm9yL2kudGVzdChnbG9iYWwubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gIH1cblxuICAvLyAjMTg3IHdyYXAgZG9jdW1lbnQuZG9tYWluIGluIHRyeS9jYXRjaCBiZWNhdXNlIG9mIFdQOCBmcm9tIGZpbGU6Ly8vXG4sIGhhc0RvbWFpbjogZnVuY3Rpb24gKCkge1xuICAgIC8vIG5vbi1icm93c2VyIGNsaWVudCBhbHdheXMgaGFzIGEgZG9tYWluXG4gICAgaWYgKCFnbG9iYWwuZG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gISFnbG9iYWwuZG9jdW1lbnQuZG9tYWluO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn07XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxuXG59LHt9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBKU09OMyA9IHJlcXVpcmUoJ2pzb24zJyk7XG5cbi8vIFNvbWUgZXh0cmEgY2hhcmFjdGVycyB0aGF0IENocm9tZSBnZXRzIHdyb25nLCBhbmQgc3Vic3RpdHV0ZXMgd2l0aFxuLy8gc29tZXRoaW5nIGVsc2Ugb24gdGhlIHdpcmUuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleCwgbm8tbWlzbGVhZGluZy1jaGFyYWN0ZXItY2xhc3NcbnZhciBleHRyYUVzY2FwYWJsZSA9IC9bXFx4MDAtXFx4MWZcXHVkODAwLVxcdWRmZmZcXHVmZmZlXFx1ZmZmZlxcdTAzMDAtXFx1MDMzM1xcdTAzM2QtXFx1MDM0NlxcdTAzNGEtXFx1MDM0Y1xcdTAzNTAtXFx1MDM1MlxcdTAzNTctXFx1MDM1OFxcdTAzNWMtXFx1MDM2MlxcdTAzNzRcXHUwMzdlXFx1MDM4N1xcdTA1OTEtXFx1MDVhZlxcdTA1YzRcXHUwNjEwLVxcdTA2MTdcXHUwNjUzLVxcdTA2NTRcXHUwNjU3LVxcdTA2NWJcXHUwNjVkLVxcdTA2NWVcXHUwNmRmLVxcdTA2ZTJcXHUwNmViLVxcdTA2ZWNcXHUwNzMwXFx1MDczMi1cXHUwNzMzXFx1MDczNS1cXHUwNzM2XFx1MDczYVxcdTA3M2RcXHUwNzNmLVxcdTA3NDFcXHUwNzQzXFx1MDc0NVxcdTA3NDdcXHUwN2ViLVxcdTA3ZjFcXHUwOTUxXFx1MDk1OC1cXHUwOTVmXFx1MDlkYy1cXHUwOWRkXFx1MDlkZlxcdTBhMzNcXHUwYTM2XFx1MGE1OS1cXHUwYTViXFx1MGE1ZVxcdTBiNWMtXFx1MGI1ZFxcdTBlMzgtXFx1MGUzOVxcdTBmNDNcXHUwZjRkXFx1MGY1MlxcdTBmNTdcXHUwZjVjXFx1MGY2OVxcdTBmNzItXFx1MGY3NlxcdTBmNzhcXHUwZjgwLVxcdTBmODNcXHUwZjkzXFx1MGY5ZFxcdTBmYTJcXHUwZmE3XFx1MGZhY1xcdTBmYjlcXHUxOTM5LVxcdTE5M2FcXHUxYTE3XFx1MWI2YlxcdTFjZGEtXFx1MWNkYlxcdTFkYzAtXFx1MWRjZlxcdTFkZmNcXHUxZGZlXFx1MWY3MVxcdTFmNzNcXHUxZjc1XFx1MWY3N1xcdTFmNzlcXHUxZjdiXFx1MWY3ZFxcdTFmYmJcXHUxZmJlXFx1MWZjOVxcdTFmY2JcXHUxZmQzXFx1MWZkYlxcdTFmZTNcXHUxZmViXFx1MWZlZS1cXHUxZmVmXFx1MWZmOVxcdTFmZmJcXHUxZmZkXFx1MjAwMC1cXHUyMDAxXFx1MjBkMC1cXHUyMGQxXFx1MjBkNC1cXHUyMGQ3XFx1MjBlNy1cXHUyMGU5XFx1MjEyNlxcdTIxMmEtXFx1MjEyYlxcdTIzMjktXFx1MjMyYVxcdTJhZGNcXHUzMDJiLVxcdTMwMmNcXHVhYWIyLVxcdWFhYjNcXHVmOTAwLVxcdWZhMGRcXHVmYTEwXFx1ZmExMlxcdWZhMTUtXFx1ZmExZVxcdWZhMjBcXHVmYTIyXFx1ZmEyNS1cXHVmYTI2XFx1ZmEyYS1cXHVmYTJkXFx1ZmEzMC1cXHVmYTZkXFx1ZmE3MC1cXHVmYWQ5XFx1ZmIxZFxcdWZiMWZcXHVmYjJhLVxcdWZiMzZcXHVmYjM4LVxcdWZiM2NcXHVmYjNlXFx1ZmI0MC1cXHVmYjQxXFx1ZmI0My1cXHVmYjQ0XFx1ZmI0Ni1cXHVmYjRlXFx1ZmZmMC1cXHVmZmZmXS9nXG4gICwgZXh0cmFMb29rdXA7XG5cbi8vIFRoaXMgbWF5IGJlIHF1aXRlIHNsb3csIHNvIGxldCdzIGRlbGF5IHVudGlsIHVzZXIgYWN0dWFsbHkgdXNlcyBiYWRcbi8vIGNoYXJhY3RlcnMuXG52YXIgdW5yb2xsTG9va3VwID0gZnVuY3Rpb24oZXNjYXBhYmxlKSB7XG4gIHZhciBpO1xuICB2YXIgdW5yb2xsZWQgPSB7fTtcbiAgdmFyIGMgPSBbXTtcbiAgZm9yIChpID0gMDsgaSA8IDY1NTM2OyBpKyspIHtcbiAgICBjLnB1c2goIFN0cmluZy5mcm9tQ2hhckNvZGUoaSkgKTtcbiAgfVxuICBlc2NhcGFibGUubGFzdEluZGV4ID0gMDtcbiAgYy5qb2luKCcnKS5yZXBsYWNlKGVzY2FwYWJsZSwgZnVuY3Rpb24oYSkge1xuICAgIHVucm9sbGVkWyBhIF0gPSAnXFxcXHUnICsgKCcwMDAwJyArIGEuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTtcbiAgICByZXR1cm4gJyc7XG4gIH0pO1xuICBlc2NhcGFibGUubGFzdEluZGV4ID0gMDtcbiAgcmV0dXJuIHVucm9sbGVkO1xufTtcblxuLy8gUXVvdGUgc3RyaW5nLCBhbHNvIHRha2luZyBjYXJlIG9mIHVuaWNvZGUgY2hhcmFjdGVycyB0aGF0IGJyb3dzZXJzXG4vLyBvZnRlbiBicmVhay4gRXNwZWNpYWxseSwgdGFrZSBjYXJlIG9mIHVuaWNvZGUgc3Vycm9nYXRlczpcbi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWFwcGluZ19vZl9Vbmljb2RlX2NoYXJhY3RlcnMjU3Vycm9nYXRlc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHF1b3RlOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICB2YXIgcXVvdGVkID0gSlNPTjMuc3RyaW5naWZ5KHN0cmluZyk7XG5cbiAgICAvLyBJbiBtb3N0IGNhc2VzIHRoaXMgc2hvdWxkIGJlIHZlcnkgZmFzdCBhbmQgZ29vZCBlbm91Z2guXG4gICAgZXh0cmFFc2NhcGFibGUubGFzdEluZGV4ID0gMDtcbiAgICBpZiAoIWV4dHJhRXNjYXBhYmxlLnRlc3QocXVvdGVkKSkge1xuICAgICAgcmV0dXJuIHF1b3RlZDtcbiAgICB9XG5cbiAgICBpZiAoIWV4dHJhTG9va3VwKSB7XG4gICAgICBleHRyYUxvb2t1cCA9IHVucm9sbExvb2t1cChleHRyYUVzY2FwYWJsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1b3RlZC5yZXBsYWNlKGV4dHJhRXNjYXBhYmxlLCBmdW5jdGlvbihhKSB7XG4gICAgICByZXR1cm4gZXh0cmFMb29rdXBbYV07XG4gICAgfSk7XG4gIH1cbn07XG5cbn0se1wianNvbjNcIjo1OH1dLDQ2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHJhbmRvbSA9IHJlcXVpcmUoJy4vcmFuZG9tJyk7XG5cbnZhciBvblVubG9hZCA9IHt9XG4gICwgYWZ0ZXJVbmxvYWQgPSBmYWxzZVxuICAgIC8vIGRldGVjdCBnb29nbGUgY2hyb21lIHBhY2thZ2VkIGFwcHMgYmVjYXVzZSB0aGV5IGRvbid0IGFsbG93IHRoZSAndW5sb2FkJyBldmVudFxuICAsIGlzQ2hyb21lUGFja2FnZWRBcHAgPSBnbG9iYWwuY2hyb21lICYmIGdsb2JhbC5jaHJvbWUuYXBwICYmIGdsb2JhbC5jaHJvbWUuYXBwLnJ1bnRpbWVcbiAgO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXR0YWNoRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5kb2N1bWVudCAmJiBnbG9iYWwuYXR0YWNoRXZlbnQpIHtcbiAgICAgIC8vIElFIHF1aXJrcy5cbiAgICAgIC8vIEFjY29yZGluZyB0bzogaHR0cDovL3N0ZXZlc291ZGVycy5jb20vbWlzYy90ZXN0LXBvc3RtZXNzYWdlLnBocFxuICAgICAgLy8gdGhlIG1lc3NhZ2UgZ2V0cyBkZWxpdmVyZWQgb25seSB0byAnZG9jdW1lbnQnLCBub3QgJ3dpbmRvdycuXG4gICAgICBnbG9iYWwuZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAvLyBJIGdldCAnd2luZG93JyBmb3IgaWU4LlxuICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfVxuXG4sIGRldGFjaEV2ZW50OiBmdW5jdGlvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZ2xvYmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChnbG9iYWwuZG9jdW1lbnQgJiYgZ2xvYmFsLmRldGFjaEV2ZW50KSB7XG4gICAgICBnbG9iYWwuZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICBnbG9iYWwuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiwgdW5sb2FkQWRkOiBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIGlmIChpc0Nocm9tZVBhY2thZ2VkQXBwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgcmVmID0gcmFuZG9tLnN0cmluZyg4KTtcbiAgICBvblVubG9hZFtyZWZdID0gbGlzdGVuZXI7XG4gICAgaWYgKGFmdGVyVW5sb2FkKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMudHJpZ2dlclVubG9hZENhbGxiYWNrcywgMCk7XG4gICAgfVxuICAgIHJldHVybiByZWY7XG4gIH1cblxuLCB1bmxvYWREZWw6IGZ1bmN0aW9uKHJlZikge1xuICAgIGlmIChyZWYgaW4gb25VbmxvYWQpIHtcbiAgICAgIGRlbGV0ZSBvblVubG9hZFtyZWZdO1xuICAgIH1cbiAgfVxuXG4sIHRyaWdnZXJVbmxvYWRDYWxsYmFja3M6IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHJlZiBpbiBvblVubG9hZCkge1xuICAgICAgb25VbmxvYWRbcmVmXSgpO1xuICAgICAgZGVsZXRlIG9uVW5sb2FkW3JlZl07XG4gICAgfVxuICB9XG59O1xuXG52YXIgdW5sb2FkVHJpZ2dlcmVkID0gZnVuY3Rpb24oKSB7XG4gIGlmIChhZnRlclVubG9hZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBhZnRlclVubG9hZCA9IHRydWU7XG4gIG1vZHVsZS5leHBvcnRzLnRyaWdnZXJVbmxvYWRDYWxsYmFja3MoKTtcbn07XG5cbi8vICd1bmxvYWQnIGFsb25lIGlzIG5vdCByZWxpYWJsZSBpbiBvcGVyYSB3aXRoaW4gYW4gaWZyYW1lLCBidXQgd2Vcbi8vIGNhbid0IHVzZSBgYmVmb3JldW5sb2FkYCBhcyBJRSBmaXJlcyBpdCBvbiBqYXZhc2NyaXB0OiBsaW5rcy5cbmlmICghaXNDaHJvbWVQYWNrYWdlZEFwcCkge1xuICBtb2R1bGUuZXhwb3J0cy5hdHRhY2hFdmVudCgndW5sb2FkJywgdW5sb2FkVHJpZ2dlcmVkKTtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi9yYW5kb21cIjo1MH1dLDQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAocHJvY2VzcyxnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRVdGlscyA9IHJlcXVpcmUoJy4vZXZlbnQnKVxuICAsIEpTT04zID0gcmVxdWlyZSgnanNvbjMnKVxuICAsIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Jyb3dzZXInKVxuICA7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6dXRpbHM6aWZyYW1lJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBXUHJlZml4OiAnX2pwJ1xuLCBjdXJyZW50V2luZG93SWQ6IG51bGxcblxuLCBwb2xsdXRlR2xvYmFsTmFtZXNwYWNlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIShtb2R1bGUuZXhwb3J0cy5XUHJlZml4IGluIGdsb2JhbCkpIHtcbiAgICAgIGdsb2JhbFttb2R1bGUuZXhwb3J0cy5XUHJlZml4XSA9IHt9O1xuICAgIH1cbiAgfVxuXG4sIHBvc3RNZXNzYWdlOiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG4gICAgaWYgKGdsb2JhbC5wYXJlbnQgIT09IGdsb2JhbCkge1xuICAgICAgZ2xvYmFsLnBhcmVudC5wb3N0TWVzc2FnZShKU09OMy5zdHJpbmdpZnkoe1xuICAgICAgICB3aW5kb3dJZDogbW9kdWxlLmV4cG9ydHMuY3VycmVudFdpbmRvd0lkXG4gICAgICAsIHR5cGU6IHR5cGVcbiAgICAgICwgZGF0YTogZGF0YSB8fCAnJ1xuICAgICAgfSksICcqJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdDYW5ub3QgcG9zdE1lc3NhZ2UsIG5vIHBhcmVudCB3aW5kb3cuJywgdHlwZSwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiwgY3JlYXRlSWZyYW1lOiBmdW5jdGlvbihpZnJhbWVVcmwsIGVycm9yQ2FsbGJhY2spIHtcbiAgICB2YXIgaWZyYW1lID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIHZhciB0cmVmLCB1bmxvYWRSZWY7XG4gICAgdmFyIHVuYXR0YWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1ZygndW5hdHRhY2gnKTtcbiAgICAgIGNsZWFyVGltZW91dCh0cmVmKTtcbiAgICAgIC8vIEV4cGxvcmVyIGhhZCBwcm9ibGVtcyB3aXRoIHRoYXQuXG4gICAgICB0cnkge1xuICAgICAgICBpZnJhbWUub25sb2FkID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgfVxuICAgICAgaWZyYW1lLm9uZXJyb3IgPSBudWxsO1xuICAgIH07XG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdjbGVhbnVwJyk7XG4gICAgICBpZiAoaWZyYW1lKSB7XG4gICAgICAgIHVuYXR0YWNoKCk7XG4gICAgICAgIC8vIFRoaXMgdGltZW91dCBtYWtlcyBjaHJvbWUgZmlyZSBvbmJlZm9yZXVubG9hZCBldmVudFxuICAgICAgICAvLyB3aXRoaW4gaWZyYW1lLiBXaXRob3V0IHRoZSB0aW1lb3V0IGl0IGdvZXMgc3RyYWlnaHQgdG9cbiAgICAgICAgLy8gb251bmxvYWQuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGlmcmFtZSkge1xuICAgICAgICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWZyYW1lID0gbnVsbDtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGV2ZW50VXRpbHMudW5sb2FkRGVsKHVubG9hZFJlZik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgb25lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgZGVidWcoJ29uZXJyb3InLCBlcnIpO1xuICAgICAgaWYgKGlmcmFtZSkge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBwb3N0ID0gZnVuY3Rpb24obXNnLCBvcmlnaW4pIHtcbiAgICAgIGRlYnVnKCdwb3N0JywgbXNnLCBvcmlnaW4pO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBXaGVuIHRoZSBpZnJhbWUgaXMgbm90IGxvYWRlZCwgSUUgcmFpc2VzIGFuIGV4Y2VwdGlvblxuICAgICAgICAgIC8vIG9uICdjb250ZW50V2luZG93Jy5cbiAgICAgICAgICBpZiAoaWZyYW1lICYmIGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtc2csIG9yaWdpbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoICh4KSB7XG4gICAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9O1xuXG4gICAgaWZyYW1lLnNyYyA9IGlmcmFtZVVybDtcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGlmcmFtZS5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBvbmVycm9yKCdvbmVycm9yJyk7XG4gICAgfTtcbiAgICBpZnJhbWUub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWJ1Zygnb25sb2FkJyk7XG4gICAgICAvLyBgb25sb2FkYCBpcyB0cmlnZ2VyZWQgYmVmb3JlIHNjcmlwdHMgb24gdGhlIGlmcmFtZSBhcmVcbiAgICAgIC8vIGV4ZWN1dGVkLiBHaXZlIGl0IGZldyBzZWNvbmRzIHRvIGFjdHVhbGx5IGxvYWQgc3R1ZmYuXG4gICAgICBjbGVhclRpbWVvdXQodHJlZik7XG4gICAgICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgb25lcnJvcignb25sb2FkIHRpbWVvdXQnKTtcbiAgICAgIH0sIDIwMDApO1xuICAgIH07XG4gICAgZ2xvYmFsLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICB0cmVmID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIG9uZXJyb3IoJ3RpbWVvdXQnKTtcbiAgICB9LCAxNTAwMCk7XG4gICAgdW5sb2FkUmVmID0gZXZlbnRVdGlscy51bmxvYWRBZGQoY2xlYW51cCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc3Q6IHBvc3RcbiAgICAsIGNsZWFudXA6IGNsZWFudXBcbiAgICAsIGxvYWRlZDogdW5hdHRhY2hcbiAgICB9O1xuICB9XG5cbi8qIGVzbGludCBuby11bmRlZjogXCJvZmZcIiwgbmV3LWNhcDogXCJvZmZcIiAqL1xuLCBjcmVhdGVIdG1sZmlsZTogZnVuY3Rpb24oaWZyYW1lVXJsLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgdmFyIGF4byA9IFsnQWN0aXZlJ10uY29uY2F0KCdPYmplY3QnKS5qb2luKCdYJyk7XG4gICAgdmFyIGRvYyA9IG5ldyBnbG9iYWxbYXhvXSgnaHRtbGZpbGUnKTtcbiAgICB2YXIgdHJlZiwgdW5sb2FkUmVmO1xuICAgIHZhciBpZnJhbWU7XG4gICAgdmFyIHVuYXR0YWNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQodHJlZik7XG4gICAgICBpZnJhbWUub25lcnJvciA9IG51bGw7XG4gICAgfTtcbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGRvYykge1xuICAgICAgICB1bmF0dGFjaCgpO1xuICAgICAgICBldmVudFV0aWxzLnVubG9hZERlbCh1bmxvYWRSZWYpO1xuICAgICAgICBpZnJhbWUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuICAgICAgICBpZnJhbWUgPSBkb2MgPSBudWxsO1xuICAgICAgICBDb2xsZWN0R2FyYmFnZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIG9uZXJyb3IgPSBmdW5jdGlvbihyKSB7XG4gICAgICBkZWJ1Zygnb25lcnJvcicsIHIpO1xuICAgICAgaWYgKGRvYykge1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIGVycm9yQ2FsbGJhY2socik7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgcG9zdCA9IGZ1bmN0aW9uKG1zZywgb3JpZ2luKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBXaGVuIHRoZSBpZnJhbWUgaXMgbm90IGxvYWRlZCwgSUUgcmFpc2VzIGFuIGV4Y2VwdGlvblxuICAgICAgICAvLyBvbiAnY29udGVudFdpbmRvdycuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtc2csIG9yaWdpbik7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgLy8gaW50ZW50aW9uYWxseSBlbXB0eVxuICAgICAgfVxuICAgIH07XG5cbiAgICBkb2Mub3BlbigpO1xuICAgIGRvYy53cml0ZSgnPGh0bWw+PHMnICsgJ2NyaXB0PicgK1xuICAgICAgICAgICAgICAnZG9jdW1lbnQuZG9tYWluPVwiJyArIGdsb2JhbC5kb2N1bWVudC5kb21haW4gKyAnXCI7JyArXG4gICAgICAgICAgICAgICc8L3MnICsgJ2NyaXB0PjwvaHRtbD4nKTtcbiAgICBkb2MuY2xvc2UoKTtcbiAgICBkb2MucGFyZW50V2luZG93W21vZHVsZS5leHBvcnRzLldQcmVmaXhdID0gZ2xvYmFsW21vZHVsZS5leHBvcnRzLldQcmVmaXhdO1xuICAgIHZhciBjID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGMpO1xuICAgIGlmcmFtZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBjLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgaWZyYW1lLnNyYyA9IGlmcmFtZVVybDtcbiAgICBpZnJhbWUub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgb25lcnJvcignb25lcnJvcicpO1xuICAgIH07XG4gICAgdHJlZiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBvbmVycm9yKCd0aW1lb3V0Jyk7XG4gICAgfSwgMTUwMDApO1xuICAgIHVubG9hZFJlZiA9IGV2ZW50VXRpbHMudW5sb2FkQWRkKGNsZWFudXApO1xuICAgIHJldHVybiB7XG4gICAgICBwb3N0OiBwb3N0XG4gICAgLCBjbGVhbnVwOiBjbGVhbnVwXG4gICAgLCBsb2FkZWQ6IHVuYXR0YWNoXG4gICAgfTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMuaWZyYW1lRW5hYmxlZCA9IGZhbHNlO1xuaWYgKGdsb2JhbC5kb2N1bWVudCkge1xuICAvLyBwb3N0TWVzc2FnZSBtaXNiZWhhdmVzIGluIGtvbnF1ZXJvciA0LjYuNSAtIHRoZSBtZXNzYWdlcyBhcmUgZGVsaXZlcmVkIHdpdGhcbiAgLy8gaHVnZSBkZWxheSwgb3Igbm90IGF0IGFsbC5cbiAgbW9kdWxlLmV4cG9ydHMuaWZyYW1lRW5hYmxlZCA9ICh0eXBlb2YgZ2xvYmFsLnBvc3RNZXNzYWdlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgdHlwZW9mIGdsb2JhbC5wb3N0TWVzc2FnZSA9PT0gJ29iamVjdCcpICYmICghYnJvd3Nlci5pc0tvbnF1ZXJvcigpKTtcbn1cblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9LHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se1wiLi9icm93c2VyXCI6NDQsXCIuL2V2ZW50XCI6NDYsXCJkZWJ1Z1wiOjU1LFwianNvbjNcIjo1OH1dLDQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGxvZ09iamVjdCA9IHt9O1xuWydsb2cnLCAnZGVidWcnLCAnd2FybiddLmZvckVhY2goZnVuY3Rpb24gKGxldmVsKSB7XG4gIHZhciBsZXZlbEV4aXN0cztcblxuICB0cnkge1xuICAgIGxldmVsRXhpc3RzID0gZ2xvYmFsLmNvbnNvbGUgJiYgZ2xvYmFsLmNvbnNvbGVbbGV2ZWxdICYmIGdsb2JhbC5jb25zb2xlW2xldmVsXS5hcHBseTtcbiAgfSBjYXRjaChlKSB7XG4gICAgLy8gZG8gbm90aGluZ1xuICB9XG5cbiAgbG9nT2JqZWN0W2xldmVsXSA9IGxldmVsRXhpc3RzID8gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWwuY29uc29sZVtsZXZlbF0uYXBwbHkoZ2xvYmFsLmNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gIH0gOiAobGV2ZWwgPT09ICdsb2cnID8gZnVuY3Rpb24gKCkge30gOiBsb2dPYmplY3QubG9nKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxvZ09iamVjdDtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDQ5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzT2JqZWN0OiBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH1cblxuLCBleHRlbmQ6IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghdGhpcy5pc09iamVjdChvYmopKSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICB2YXIgc291cmNlLCBwcm9wO1xuICAgIGZvciAodmFyIGkgPSAxLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGZvciAocHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIHByb3ApKSB7XG4gICAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cbn07XG5cbn0se31dLDUwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuXG4vLyBUaGlzIHN0cmluZyBoYXMgbGVuZ3RoIDMyLCBhIHBvd2VyIG9mIDIsIHNvIHRoZSBtb2R1bHVzIGRvZXNuJ3QgaW50cm9kdWNlIGFcbi8vIGJpYXMuXG52YXIgX3JhbmRvbVN0cmluZ0NoYXJzID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Jztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzdHJpbmc6IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIHZhciBtYXggPSBfcmFuZG9tU3RyaW5nQ2hhcnMubGVuZ3RoO1xuICAgIHZhciBieXRlcyA9IGNyeXB0by5yYW5kb21CeXRlcyhsZW5ndGgpO1xuICAgIHZhciByZXQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXQucHVzaChfcmFuZG9tU3RyaW5nQ2hhcnMuc3Vic3RyKGJ5dGVzW2ldICUgbWF4LCAxKSk7XG4gICAgfVxuICAgIHJldHVybiByZXQuam9pbignJyk7XG4gIH1cblxuLCBudW1iZXI6IGZ1bmN0aW9uKG1heCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXgpO1xuICB9XG5cbiwgbnVtYmVyU3RyaW5nOiBmdW5jdGlvbihtYXgpIHtcbiAgICB2YXIgdCA9ICgnJyArIChtYXggLSAxKSkubGVuZ3RoO1xuICAgIHZhciBwID0gbmV3IEFycmF5KHQgKyAxKS5qb2luKCcwJyk7XG4gICAgcmV0dXJuIChwICsgdGhpcy5udW1iZXIobWF4KSkuc2xpY2UoLXQpO1xuICB9XG59O1xuXG59LHtcImNyeXB0b1wiOjQzfV0sNTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChwcm9jZXNzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGRlYnVnID0gZnVuY3Rpb24oKSB7fTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnc29ja2pzLWNsaWVudDp1dGlsczp0cmFuc3BvcnQnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhdmFpbGFibGVUcmFuc3BvcnRzKSB7XG4gIHJldHVybiB7XG4gICAgZmlsdGVyVG9FbmFibGVkOiBmdW5jdGlvbih0cmFuc3BvcnRzV2hpdGVsaXN0LCBpbmZvKSB7XG4gICAgICB2YXIgdHJhbnNwb3J0cyA9IHtcbiAgICAgICAgbWFpbjogW11cbiAgICAgICwgZmFjYWRlOiBbXVxuICAgICAgfTtcbiAgICAgIGlmICghdHJhbnNwb3J0c1doaXRlbGlzdCkge1xuICAgICAgICB0cmFuc3BvcnRzV2hpdGVsaXN0ID0gW107XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0cmFuc3BvcnRzV2hpdGVsaXN0ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cmFuc3BvcnRzV2hpdGVsaXN0ID0gW3RyYW5zcG9ydHNXaGl0ZWxpc3RdO1xuICAgICAgfVxuXG4gICAgICBhdmFpbGFibGVUcmFuc3BvcnRzLmZvckVhY2goZnVuY3Rpb24odHJhbnMpIHtcbiAgICAgICAgaWYgKCF0cmFucykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmFucy50cmFuc3BvcnROYW1lID09PSAnd2Vic29ja2V0JyAmJiBpbmZvLndlYnNvY2tldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBkZWJ1ZygnZGlzYWJsZWQgZnJvbSBzZXJ2ZXInLCAnd2Vic29ja2V0Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRyYW5zcG9ydHNXaGl0ZWxpc3QubGVuZ3RoICYmXG4gICAgICAgICAgICB0cmFuc3BvcnRzV2hpdGVsaXN0LmluZGV4T2YodHJhbnMudHJhbnNwb3J0TmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgZGVidWcoJ25vdCBpbiB3aGl0ZWxpc3QnLCB0cmFucy50cmFuc3BvcnROYW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnMuZW5hYmxlZChpbmZvKSkge1xuICAgICAgICAgIGRlYnVnKCdlbmFibGVkJywgdHJhbnMudHJhbnNwb3J0TmFtZSk7XG4gICAgICAgICAgdHJhbnNwb3J0cy5tYWluLnB1c2godHJhbnMpO1xuICAgICAgICAgIGlmICh0cmFucy5mYWNhZGVUcmFuc3BvcnQpIHtcbiAgICAgICAgICAgIHRyYW5zcG9ydHMuZmFjYWRlLnB1c2godHJhbnMuZmFjYWRlVHJhbnNwb3J0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWcoJ2Rpc2FibGVkJywgdHJhbnMudHJhbnNwb3J0TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRyYW5zcG9ydHM7XG4gICAgfVxuICB9O1xufTtcblxufSkuY2FsbCh0aGlzLHsgZW52OiB7fSB9KVxuXG59LHtcImRlYnVnXCI6NTV9XSw1MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVVJMID0gcmVxdWlyZSgndXJsLXBhcnNlJyk7XG5cbnZhciBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ3NvY2tqcy1jbGllbnQ6dXRpbHM6dXJsJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRPcmlnaW46IGZ1bmN0aW9uKHVybCkge1xuICAgIGlmICghdXJsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgcCA9IG5ldyBVUkwodXJsKTtcbiAgICBpZiAocC5wcm90b2NvbCA9PT0gJ2ZpbGU6Jykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHBvcnQgPSBwLnBvcnQ7XG4gICAgaWYgKCFwb3J0KSB7XG4gICAgICBwb3J0ID0gKHAucHJvdG9jb2wgPT09ICdodHRwczonKSA/ICc0NDMnIDogJzgwJztcbiAgICB9XG5cbiAgICByZXR1cm4gcC5wcm90b2NvbCArICcvLycgKyBwLmhvc3RuYW1lICsgJzonICsgcG9ydDtcbiAgfVxuXG4sIGlzT3JpZ2luRXF1YWw6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcmVzID0gdGhpcy5nZXRPcmlnaW4oYSkgPT09IHRoaXMuZ2V0T3JpZ2luKGIpO1xuICAgIGRlYnVnKCdzYW1lJywgYSwgYiwgcmVzKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiwgaXNTY2hlbWVFcXVhbDogZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiAoYS5zcGxpdCgnOicpWzBdID09PSBiLnNwbGl0KCc6JylbMF0pO1xuICB9XG5cbiwgYWRkUGF0aDogZnVuY3Rpb24gKHVybCwgcGF0aCkge1xuICAgIHZhciBxcyA9IHVybC5zcGxpdCgnPycpO1xuICAgIHJldHVybiBxc1swXSArIHBhdGggKyAocXNbMV0gPyAnPycgKyBxc1sxXSA6ICcnKTtcbiAgfVxuXG4sIGFkZFF1ZXJ5OiBmdW5jdGlvbiAodXJsLCBxKSB7XG4gICAgcmV0dXJuIHVybCArICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICgnPycgKyBxKSA6ICgnJicgKyBxKSk7XG4gIH1cblxuLCBpc0xvb3BiYWNrQWRkcjogZnVuY3Rpb24gKGFkZHIpIHtcbiAgICByZXR1cm4gL14xMjdcXC4oWzAtOV17MSwzfSlcXC4oWzAtOV17MSwzfSlcXC4oWzAtOV17MSwzfSkkL2kudGVzdChhZGRyKSB8fCAvXlxcWzo6MVxcXSQvLnRlc3QoYWRkcik7XG4gIH1cbn07XG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCJkZWJ1Z1wiOjU1LFwidXJsLXBhcnNlXCI6NjF9XSw1MzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5tb2R1bGUuZXhwb3J0cyA9ICcxLjUuMCc7XG5cbn0se31dLDU0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuXG59LHt9XSw1NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKHByb2Nlc3Mpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqL1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcbmV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbJyMwMDAwQ0MnLCAnIzAwMDBGRicsICcjMDAzM0NDJywgJyMwMDMzRkYnLCAnIzAwNjZDQycsICcjMDA2NkZGJywgJyMwMDk5Q0MnLCAnIzAwOTlGRicsICcjMDBDQzAwJywgJyMwMENDMzMnLCAnIzAwQ0M2NicsICcjMDBDQzk5JywgJyMwMENDQ0MnLCAnIzAwQ0NGRicsICcjMzMwMENDJywgJyMzMzAwRkYnLCAnIzMzMzNDQycsICcjMzMzM0ZGJywgJyMzMzY2Q0MnLCAnIzMzNjZGRicsICcjMzM5OUNDJywgJyMzMzk5RkYnLCAnIzMzQ0MwMCcsICcjMzNDQzMzJywgJyMzM0NDNjYnLCAnIzMzQ0M5OScsICcjMzNDQ0NDJywgJyMzM0NDRkYnLCAnIzY2MDBDQycsICcjNjYwMEZGJywgJyM2NjMzQ0MnLCAnIzY2MzNGRicsICcjNjZDQzAwJywgJyM2NkNDMzMnLCAnIzk5MDBDQycsICcjOTkwMEZGJywgJyM5OTMzQ0MnLCAnIzk5MzNGRicsICcjOTlDQzAwJywgJyM5OUNDMzMnLCAnI0NDMDAwMCcsICcjQ0MwMDMzJywgJyNDQzAwNjYnLCAnI0NDMDA5OScsICcjQ0MwMENDJywgJyNDQzAwRkYnLCAnI0NDMzMwMCcsICcjQ0MzMzMzJywgJyNDQzMzNjYnLCAnI0NDMzM5OScsICcjQ0MzM0NDJywgJyNDQzMzRkYnLCAnI0NDNjYwMCcsICcjQ0M2NjMzJywgJyNDQzk5MDAnLCAnI0NDOTkzMycsICcjQ0NDQzAwJywgJyNDQ0NDMzMnLCAnI0ZGMDAwMCcsICcjRkYwMDMzJywgJyNGRjAwNjYnLCAnI0ZGMDA5OScsICcjRkYwMENDJywgJyNGRjAwRkYnLCAnI0ZGMzMwMCcsICcjRkYzMzMzJywgJyNGRjMzNjYnLCAnI0ZGMzM5OScsICcjRkYzM0NDJywgJyNGRjMzRkYnLCAnI0ZGNjYwMCcsICcjRkY2NjMzJywgJyNGRjk5MDAnLCAnI0ZGOTkzMycsICcjRkZDQzAwJywgJyNGRkNDMzMnXTtcbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wbGV4aXR5XG5cbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcbiAgLy8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuICAvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuICAvLyBleHBsaWNpdGx5XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgY29sb3JzLlxuXG5cbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG4gIC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cblxuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlIHx8IC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgd2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSB8fCAvLyBJcyBmaXJlZm94ID49IHYzMT9cbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG4gIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykgJiYgcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgPj0gMzEgfHwgLy8gRG91YmxlIGNoZWNrIHdlYmtpdCBpbiB1c2VyQWdlbnQganVzdCBpbiBjYXNlIHdlIGFyZSBpbiBhIHdvcmtlclxuICB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvYXBwbGV3ZWJraXRcXC8oXFxkKykvKTtcbn1cbi8qKlxuICogQ29sb3JpemUgbG9nIGFyZ3VtZW50cyBpZiBlbmFibGVkLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcbiAgYXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgKyB0aGlzLm5hbWVzcGFjZSArICh0aGlzLnVzZUNvbG9ycyA/ICcgJWMnIDogJyAnKSArIGFyZ3NbMF0gKyAodGhpcy51c2VDb2xvcnMgPyAnJWMgJyA6ICcgJykgKyAnKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuXG4gIGlmICghdGhpcy51c2VDb2xvcnMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG4gIGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpOyAvLyBUaGUgZmluYWwgXCIlY1wiIGlzIHNvbWV3aGF0IHRyaWNreSwgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvdGhlclxuICAvLyBhcmd1bWVudHMgcGFzc2VkIGVpdGhlciBiZWZvcmUgb3IgYWZ0ZXIgdGhlICVjLCBzbyB3ZSBuZWVkIHRvXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGNvcnJlY3QgaW5kZXggdG8gaW5zZXJ0IHRoZSBDU1MgaW50b1xuXG4gIHZhciBpbmRleCA9IDA7XG4gIHZhciBsYXN0QyA9IDA7XG4gIGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICBpZiAobWF0Y2ggPT09ICclJScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpbmRleCsrO1xuXG4gICAgaWYgKG1hdGNoID09PSAnJWMnKSB7XG4gICAgICAvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcbiAgICAgIC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG4gICAgICBsYXN0QyA9IGluZGV4O1xuICAgIH1cbiAgfSk7XG4gIGFyZ3Muc3BsaWNlKGxhc3RDLCAwLCBjKTtcbn1cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5sb2coKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmxvZ2AgaXMgbm90IGEgXCJmdW5jdGlvblwiLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuXG5mdW5jdGlvbiBsb2coKSB7XG4gIHZhciBfY29uc29sZTtcblxuICAvLyBUaGlzIGhhY2tlcnkgaXMgcmVxdWlyZWQgZm9yIElFOC85LCB3aGVyZVxuICAvLyB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbiBkb2Vzbid0IGhhdmUgJ2FwcGx5J1xuICByZXR1cm4gKHR5cGVvZiBjb25zb2xlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY29uc29sZSkpID09PSAnb2JqZWN0JyAmJiBjb25zb2xlLmxvZyAmJiAoX2NvbnNvbGUgPSBjb25zb2xlKS5sb2cuYXBwbHkoX2NvbnNvbGUsIGFyZ3VtZW50cyk7XG59XG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuICB0cnkge1xuICAgIGlmIChuYW1lc3BhY2VzKSB7XG4gICAgICBleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikgey8vIFN3YWxsb3dcbiAgICAvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cbiAgfVxufVxuLyoqXG4gKiBMb2FkIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybnMgdGhlIHByZXZpb3VzbHkgcGVyc2lzdGVkIGRlYnVnIG1vZGVzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5cbmZ1bmN0aW9uIGxvYWQoKSB7XG4gIHZhciByO1xuXG4gIHRyeSB7XG4gICAgciA9IGV4cG9ydHMuc3RvcmFnZS5nZXRJdGVtKCdkZWJ1ZycpO1xuICB9IGNhdGNoIChlcnJvcikge30gLy8gU3dhbGxvd1xuICAvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cbiAgLy8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXG5cbiAgaWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG4gICAgciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuICB9XG5cbiAgcmV0dXJuIHI7XG59XG4vKipcbiAqIExvY2Fsc3RvcmFnZSBhdHRlbXB0cyB0byByZXR1cm4gdGhlIGxvY2Fsc3RvcmFnZS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNhZmFyaSB0aHJvd3NcbiAqIHdoZW4gYSB1c2VyIGRpc2FibGVzIGNvb2tpZXMvbG9jYWxzdG9yYWdlXG4gKiBhbmQgeW91IGF0dGVtcHQgdG8gYWNjZXNzIGl0LlxuICpcbiAqIEByZXR1cm4ge0xvY2FsU3RvcmFnZX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuICB0cnkge1xuICAgIC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcbiAgICAvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7Ly8gU3dhbGxvd1xuICAgIC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcbnZhciBmb3JtYXR0ZXJzID0gbW9kdWxlLmV4cG9ydHMuZm9ybWF0dGVycztcbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuICB9XG59O1xuXG5cbn0pLmNhbGwodGhpcyx7IGVudjoge30gfSlcblxufSx7XCIuL2NvbW1vblwiOjU2fV0sNTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG4gIGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG4gIGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1ZztcbiAgY3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuICBjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcbiAgY3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuICBjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcbiAgY3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuICBPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcbiAgfSk7XG4gIC8qKlxuICAqIEFjdGl2ZSBgZGVidWdgIGluc3RhbmNlcy5cbiAgKi9cblxuICBjcmVhdGVEZWJ1Zy5pbnN0YW5jZXMgPSBbXTtcbiAgLyoqXG4gICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG4gICovXG5cbiAgY3JlYXRlRGVidWcubmFtZXMgPSBbXTtcbiAgY3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcbiAgLyoqXG4gICogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuICAqXG4gICogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuICAqL1xuXG4gIGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcbiAgLyoqXG4gICogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcbiAgKiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2VcbiAgKiBAYXBpIHByaXZhdGVcbiAgKi9cblxuICBmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcbiAgICB2YXIgaGFzaCA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgaGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG4gIH1cblxuICBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuICAvKipcbiAgKiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cbiAgKlxuICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgKiBAYXBpIHB1YmxpY1xuICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuICAgIHZhciBwcmV2VGltZTtcblxuICAgIGZ1bmN0aW9uIGRlYnVnKCkge1xuICAgICAgLy8gRGlzYWJsZWQ/XG4gICAgICBpZiAoIWRlYnVnLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGYgPSBkZWJ1ZzsgLy8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblxuICAgICAgdmFyIGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG4gICAgICB2YXIgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuICAgICAgc2VsZi5kaWZmID0gbXM7XG4gICAgICBzZWxmLnByZXYgPSBwcmV2VGltZTtcbiAgICAgIHNlbGYuY3VyciA9IGN1cnI7XG4gICAgICBwcmV2VGltZSA9IGN1cnI7XG4gICAgICBhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG4gICAgICAgIGFyZ3MudW5zaGlmdCgnJU8nKTtcbiAgICAgIH0gLy8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblxuXG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgYXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIGZ1bmN0aW9uIChtYXRjaCwgZm9ybWF0KSB7XG4gICAgICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcbiAgICAgICAgaWYgKG1hdGNoID09PSAnJSUnKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgdmFyIGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblxuICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWwgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgICBtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7IC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblxuICAgICAgICAgIGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICBpbmRleC0tO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfSk7IC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cbiAgICAgIGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcbiAgICAgIHZhciBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcbiAgICAgIGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH1cblxuICAgIGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcbiAgICBkZWJ1Zy5lbmFibGVkID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuICAgIGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuICAgIGRlYnVnLmNvbG9yID0gc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcbiAgICBkZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcbiAgICBkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7IC8vIERlYnVnLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuICAgIC8vIGRlYnVnLnJhd0xvZyA9IHJhd0xvZztcbiAgICAvLyBlbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXG4gICAgaWYgKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjcmVhdGVEZWJ1Zy5pbml0KGRlYnVnKTtcbiAgICB9XG5cbiAgICBjcmVhdGVEZWJ1Zy5pbnN0YW5jZXMucHVzaChkZWJ1Zyk7XG4gICAgcmV0dXJuIGRlYnVnO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICB2YXIgaW5kZXggPSBjcmVhdGVEZWJ1Zy5pbnN0YW5jZXMuaW5kZXhPZih0aGlzKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGNyZWF0ZURlYnVnLmluc3RhbmNlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG4gICAgcmV0dXJuIGNyZWF0ZURlYnVnKHRoaXMubmFtZXNwYWNlICsgKHR5cGVvZiBkZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gJzonIDogZGVsaW1pdGVyKSArIG5hbWVzcGFjZSk7XG4gIH1cbiAgLyoqXG4gICogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuICAqIHNlcGFyYXRlZCBieSBhIGNvbG9uIGFuZCB3aWxkY2FyZHMuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICAqIEBhcGkgcHVibGljXG4gICovXG5cblxuICBmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuICAgIGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG4gICAgY3JlYXRlRGVidWcubmFtZXMgPSBbXTtcbiAgICBjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuICAgIHZhciBpO1xuICAgIHZhciBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpLnNwbGl0KC9bXFxzLF0rLyk7XG4gICAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKCFzcGxpdFtpXSkge1xuICAgICAgICAvLyBpZ25vcmUgZW1wdHkgc3RyaW5nc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG5cbiAgICAgIGlmIChuYW1lc3BhY2VzWzBdID09PSAnLScpIHtcbiAgICAgICAgY3JlYXRlRGVidWcuc2tpcHMucHVzaChuZXcgUmVnRXhwKCdeJyArIG5hbWVzcGFjZXMuc3Vic3RyKDEpICsgJyQnKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBjcmVhdGVEZWJ1Zy5pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpbnN0YW5jZSA9IGNyZWF0ZURlYnVnLmluc3RhbmNlc1tpXTtcbiAgICAgIGluc3RhbmNlLmVuYWJsZWQgPSBjcmVhdGVEZWJ1Zy5lbmFibGVkKGluc3RhbmNlLm5hbWVzcGFjZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuICAqXG4gICogQGFwaSBwdWJsaWNcbiAgKi9cblxuXG4gIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgY3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcbiAgfVxuICAvKipcbiAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICpcbiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICogQGFwaSBwdWJsaWNcbiAgKi9cblxuXG4gIGZ1bmN0aW9uIGVuYWJsZWQobmFtZSkge1xuICAgIGlmIChuYW1lW25hbWUubGVuZ3RoIC0gMV0gPT09ICcqJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGk7XG4gICAgdmFyIGxlbjtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGNyZWF0ZURlYnVnLnNraXBzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoY3JlYXRlRGVidWcuc2tpcHNbaV0udGVzdChuYW1lKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgKiBDb2VyY2UgYHZhbGAuXG4gICpcbiAgKiBAcGFyYW0ge01peGVkfSB2YWxcbiAgKiBAcmV0dXJuIHtNaXhlZH1cbiAgKiBAYXBpIHByaXZhdGVcbiAgKi9cblxuXG4gIGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcbiAgICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIGNyZWF0ZURlYnVnLmVuYWJsZShjcmVhdGVEZWJ1Zy5sb2FkKCkpO1xuICByZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG5cblxufSx7XCJtc1wiOjU0fV0sNTc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgaWYgKHN1cGVyQ3Rvcikge1xuICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9O1xufSBlbHNlIHtcbiAgLy8gb2xkIHNjaG9vbCBzaGltIGZvciBvbGQgYnJvd3NlcnNcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBpZiAoc3VwZXJDdG9yKSB7XG4gICAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcbiAgICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICAgIH1cbiAgfVxufVxuXG59LHt9XSw1ODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4vKiEgSlNPTiB2My4zLjIgfCBodHRwczovL2Jlc3RpZWpzLmdpdGh1Yi5pby9qc29uMyB8IENvcHlyaWdodCAyMDEyLTIwMTUsIEtpdCBDYW1icmlkZ2UsIEJlbmphbWluIFRhbiB8IGh0dHA6Ly9raXQubWl0LWxpY2Vuc2Uub3JnICovXG47KGZ1bmN0aW9uICgpIHtcbiAgLy8gRGV0ZWN0IHRoZSBgZGVmaW5lYCBmdW5jdGlvbiBleHBvc2VkIGJ5IGFzeW5jaHJvbm91cyBtb2R1bGUgbG9hZGVycy4gVGhlXG4gIC8vIHN0cmljdCBgZGVmaW5lYCBjaGVjayBpcyBuZWNlc3NhcnkgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBgci5qc2AuXG4gIHZhciBpc0xvYWRlciA9IHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kO1xuXG4gIC8vIEEgc2V0IG9mIHR5cGVzIHVzZWQgdG8gZGlzdGluZ3Vpc2ggb2JqZWN0cyBmcm9tIHByaW1pdGl2ZXMuXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcbiAgICBcImZ1bmN0aW9uXCI6IHRydWUsXG4gICAgXCJvYmplY3RcIjogdHJ1ZVxuICB9O1xuXG4gIC8vIERldGVjdCB0aGUgYGV4cG9ydHNgIG9iamVjdCBleHBvc2VkIGJ5IENvbW1vbkpTIGltcGxlbWVudGF0aW9ucy5cbiAgdmFyIGZyZWVFeHBvcnRzID0gb2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuICAvLyBVc2UgdGhlIGBnbG9iYWxgIG9iamVjdCBleHBvc2VkIGJ5IE5vZGUgKGluY2x1ZGluZyBCcm93c2VyaWZ5IHZpYVxuICAvLyBgaW5zZXJ0LW1vZHVsZS1nbG9iYWxzYCksIE5hcndoYWwsIGFuZCBSaW5nbyBhcyB0aGUgZGVmYXVsdCBjb250ZXh0LFxuICAvLyBhbmQgdGhlIGB3aW5kb3dgIG9iamVjdCBpbiBicm93c2Vycy4gUmhpbm8gZXhwb3J0cyBhIGBnbG9iYWxgIGZ1bmN0aW9uXG4gIC8vIGluc3RlYWQuXG4gIHZhciByb290ID0gb2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93IHx8IHRoaXMsXG4gICAgICBmcmVlR2xvYmFsID0gZnJlZUV4cG9ydHMgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgdHlwZW9mIGdsb2JhbCA9PSBcIm9iamVjdFwiICYmIGdsb2JhbDtcblxuICBpZiAoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsKSkge1xuICAgIHJvb3QgPSBmcmVlR2xvYmFsO1xuICB9XG5cbiAgLy8gUHVibGljOiBJbml0aWFsaXplcyBKU09OIDMgdXNpbmcgdGhlIGdpdmVuIGBjb250ZXh0YCBvYmplY3QsIGF0dGFjaGluZyB0aGVcbiAgLy8gYHN0cmluZ2lmeWAgYW5kIGBwYXJzZWAgZnVuY3Rpb25zIHRvIHRoZSBzcGVjaWZpZWQgYGV4cG9ydHNgIG9iamVjdC5cbiAgZnVuY3Rpb24gcnVuSW5Db250ZXh0KGNvbnRleHQsIGV4cG9ydHMpIHtcbiAgICBjb250ZXh0IHx8IChjb250ZXh0ID0gcm9vdC5PYmplY3QoKSk7XG4gICAgZXhwb3J0cyB8fCAoZXhwb3J0cyA9IHJvb3QuT2JqZWN0KCkpO1xuXG4gICAgLy8gTmF0aXZlIGNvbnN0cnVjdG9yIGFsaWFzZXMuXG4gICAgdmFyIE51bWJlciA9IGNvbnRleHQuTnVtYmVyIHx8IHJvb3QuTnVtYmVyLFxuICAgICAgICBTdHJpbmcgPSBjb250ZXh0LlN0cmluZyB8fCByb290LlN0cmluZyxcbiAgICAgICAgT2JqZWN0ID0gY29udGV4dC5PYmplY3QgfHwgcm9vdC5PYmplY3QsXG4gICAgICAgIERhdGUgPSBjb250ZXh0LkRhdGUgfHwgcm9vdC5EYXRlLFxuICAgICAgICBTeW50YXhFcnJvciA9IGNvbnRleHQuU3ludGF4RXJyb3IgfHwgcm9vdC5TeW50YXhFcnJvcixcbiAgICAgICAgVHlwZUVycm9yID0gY29udGV4dC5UeXBlRXJyb3IgfHwgcm9vdC5UeXBlRXJyb3IsXG4gICAgICAgIE1hdGggPSBjb250ZXh0Lk1hdGggfHwgcm9vdC5NYXRoLFxuICAgICAgICBuYXRpdmVKU09OID0gY29udGV4dC5KU09OIHx8IHJvb3QuSlNPTjtcblxuICAgIC8vIERlbGVnYXRlIHRvIHRoZSBuYXRpdmUgYHN0cmluZ2lmeWAgYW5kIGBwYXJzZWAgaW1wbGVtZW50YXRpb25zLlxuICAgIGlmICh0eXBlb2YgbmF0aXZlSlNPTiA9PSBcIm9iamVjdFwiICYmIG5hdGl2ZUpTT04pIHtcbiAgICAgIGV4cG9ydHMuc3RyaW5naWZ5ID0gbmF0aXZlSlNPTi5zdHJpbmdpZnk7XG4gICAgICBleHBvcnRzLnBhcnNlID0gbmF0aXZlSlNPTi5wYXJzZTtcbiAgICB9XG5cbiAgICAvLyBDb252ZW5pZW5jZSBhbGlhc2VzLlxuICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgICAgIGdldENsYXNzID0gb2JqZWN0UHJvdG8udG9TdHJpbmcsXG4gICAgICAgIGlzUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgLy8gSW50ZXJuYWw6IENvbnRhaW5zIGB0cnkuLi5jYXRjaGAgbG9naWMgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMuXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBvdGhlciBmdW5jdGlvbnMgZnJvbSBiZWluZyBkZW9wdGltaXplZC5cbiAgICBmdW5jdGlvbiBhdHRlbXB0KGZ1bmMsIGVycm9yRnVuYykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZnVuYygpO1xuICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgIGlmIChlcnJvckZ1bmMpIHtcbiAgICAgICAgICBlcnJvckZ1bmMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRlc3QgdGhlIGBEYXRlI2dldFVUQypgIG1ldGhvZHMuIEJhc2VkIG9uIHdvcmsgYnkgQFlhZmZsZS5cbiAgICB2YXIgaXNFeHRlbmRlZCA9IG5ldyBEYXRlKC0zNTA5ODI3MzM0NTczMjkyKTtcbiAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFRoZSBgZ2V0VVRDRnVsbFllYXJgLCBgTW9udGhgLCBhbmQgYERhdGVgIG1ldGhvZHMgcmV0dXJuIG5vbnNlbnNpY2FsXG4gICAgICAvLyByZXN1bHRzIGZvciBjZXJ0YWluIGRhdGVzIGluIE9wZXJhID49IDEwLjUzLlxuICAgICAgaXNFeHRlbmRlZCA9IGlzRXh0ZW5kZWQuZ2V0VVRDRnVsbFllYXIoKSA9PSAtMTA5MjUyICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTW9udGgoKSA9PT0gMCAmJiBpc0V4dGVuZGVkLmdldFVUQ0RhdGUoKSA9PT0gMSAmJlxuICAgICAgICBpc0V4dGVuZGVkLmdldFVUQ0hvdXJzKCkgPT0gMTAgJiYgaXNFeHRlbmRlZC5nZXRVVENNaW51dGVzKCkgPT0gMzcgJiYgaXNFeHRlbmRlZC5nZXRVVENTZWNvbmRzKCkgPT0gNiAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbGxpc2Vjb25kcygpID09IDcwODtcbiAgICB9KTtcblxuICAgIC8vIEludGVybmFsOiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG5hdGl2ZSBgSlNPTi5zdHJpbmdpZnlgIGFuZCBgcGFyc2VgXG4gICAgLy8gaW1wbGVtZW50YXRpb25zIGFyZSBzcGVjLWNvbXBsaWFudC4gQmFzZWQgb24gd29yayBieSBLZW4gU255ZGVyLlxuICAgIGZ1bmN0aW9uIGhhcyhuYW1lKSB7XG4gICAgICBpZiAoaGFzW25hbWVdICE9IG51bGwpIHtcbiAgICAgICAgLy8gUmV0dXJuIGNhY2hlZCBmZWF0dXJlIHRlc3QgcmVzdWx0LlxuICAgICAgICByZXR1cm4gaGFzW25hbWVdO1xuICAgICAgfVxuICAgICAgdmFyIGlzU3VwcG9ydGVkO1xuICAgICAgaWYgKG5hbWUgPT0gXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIikge1xuICAgICAgICAvLyBJRSA8PSA3IGRvZXNuJ3Qgc3VwcG9ydCBhY2Nlc3Npbmcgc3RyaW5nIGNoYXJhY3RlcnMgdXNpbmcgc3F1YXJlXG4gICAgICAgIC8vIGJyYWNrZXQgbm90YXRpb24uIElFIDggb25seSBzdXBwb3J0cyB0aGlzIGZvciBwcmltaXRpdmVzLlxuICAgICAgICBpc1N1cHBvcnRlZCA9IFwiYVwiWzBdICE9IFwiYVwiO1xuICAgICAgfSBlbHNlIGlmIChuYW1lID09IFwianNvblwiKSB7XG4gICAgICAgIC8vIEluZGljYXRlcyB3aGV0aGVyIGJvdGggYEpTT04uc3RyaW5naWZ5YCBhbmQgYEpTT04ucGFyc2VgIGFyZVxuICAgICAgICAvLyBzdXBwb3J0ZWQuXG4gICAgICAgIGlzU3VwcG9ydGVkID0gaGFzKFwianNvbi1zdHJpbmdpZnlcIikgJiYgaGFzKFwiZGF0ZS1zZXJpYWxpemF0aW9uXCIpICYmIGhhcyhcImpzb24tcGFyc2VcIik7XG4gICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gXCJkYXRlLXNlcmlhbGl6YXRpb25cIikge1xuICAgICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciBgRGF0ZWBzIGNhbiBiZSBzZXJpYWxpemVkIGFjY3VyYXRlbHkgYnkgYEpTT04uc3RyaW5naWZ5YC5cbiAgICAgICAgaXNTdXBwb3J0ZWQgPSBoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiBpc0V4dGVuZGVkO1xuICAgICAgICBpZiAoaXNTdXBwb3J0ZWQpIHtcbiAgICAgICAgICB2YXIgc3RyaW5naWZ5ID0gZXhwb3J0cy5zdHJpbmdpZnk7XG4gICAgICAgICAgYXR0ZW1wdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc1N1cHBvcnRlZCA9XG4gICAgICAgICAgICAgIC8vIEpTT04gMiwgUHJvdG90eXBlIDw9IDEuNywgYW5kIG9sZGVyIFdlYktpdCBidWlsZHMgaW5jb3JyZWN0bHlcbiAgICAgICAgICAgICAgLy8gc2VyaWFsaXplIGV4dGVuZGVkIHllYXJzLlxuICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoLTguNjRlMTUpKSA9PSAnXCItMjcxODIxLTA0LTIwVDAwOjAwOjAwLjAwMFpcIicgJiZcbiAgICAgICAgICAgICAgLy8gVGhlIG1pbGxpc2Vjb25kcyBhcmUgb3B0aW9uYWwgaW4gRVMgNSwgYnV0IHJlcXVpcmVkIGluIDUuMS5cbiAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKDguNjRlMTUpKSA9PSAnXCIrMjc1NzYwLTA5LTEzVDAwOjAwOjAwLjAwMFpcIicgJiZcbiAgICAgICAgICAgICAgLy8gRmlyZWZveCA8PSAxMS4wIGluY29ycmVjdGx5IHNlcmlhbGl6ZXMgeWVhcnMgcHJpb3IgdG8gMCBhcyBuZWdhdGl2ZVxuICAgICAgICAgICAgICAvLyBmb3VyLWRpZ2l0IHllYXJzIGluc3RlYWQgb2Ygc2l4LWRpZ2l0IHllYXJzLiBDcmVkaXRzOiBAWWFmZmxlLlxuICAgICAgICAgICAgICBzdHJpbmdpZnkobmV3IERhdGUoLTYyMTk4NzU1MmU1KSkgPT0gJ1wiLTAwMDAwMS0wMS0wMVQwMDowMDowMC4wMDBaXCInICYmXG4gICAgICAgICAgICAgIC8vIFNhZmFyaSA8PSA1LjEuNSBhbmQgT3BlcmEgPj0gMTAuNTMgaW5jb3JyZWN0bHkgc2VyaWFsaXplIG1pbGxpc2Vjb25kXG4gICAgICAgICAgICAgIC8vIHZhbHVlcyBsZXNzIHRoYW4gMTAwMC4gQ3JlZGl0czogQFlhZmZsZS5cbiAgICAgICAgICAgICAgc3RyaW5naWZ5KG5ldyBEYXRlKC0xKSkgPT0gJ1wiMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaXCInO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWUsIHNlcmlhbGl6ZWQgPSAne1wiYVwiOlsxLHRydWUsZmFsc2UsbnVsbCxcIlxcXFx1MDAwMFxcXFxiXFxcXG5cXFxcZlxcXFxyXFxcXHRcIl19JztcbiAgICAgICAgLy8gVGVzdCBgSlNPTi5zdHJpbmdpZnlgLlxuICAgICAgICBpZiAobmFtZSA9PSBcImpzb24tc3RyaW5naWZ5XCIpIHtcbiAgICAgICAgICB2YXIgc3RyaW5naWZ5ID0gZXhwb3J0cy5zdHJpbmdpZnksIHN0cmluZ2lmeVN1cHBvcnRlZCA9IHR5cGVvZiBzdHJpbmdpZnkgPT0gXCJmdW5jdGlvblwiO1xuICAgICAgICAgIGlmIChzdHJpbmdpZnlTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIC8vIEEgdGVzdCBmdW5jdGlvbiBvYmplY3Qgd2l0aCBhIGN1c3RvbSBgdG9KU09OYCBtZXRob2QuXG4gICAgICAgICAgICAodmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfSkudG9KU09OID0gdmFsdWU7XG4gICAgICAgICAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc3RyaW5naWZ5U3VwcG9ydGVkID1cbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IDMuMWIxIGFuZCBiMiBzZXJpYWxpemUgc3RyaW5nLCBudW1iZXIsIGFuZCBib29sZWFuXG4gICAgICAgICAgICAgICAgLy8gcHJpbWl0aXZlcyBhcyBvYmplY3QgbGl0ZXJhbHMuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KDApID09PSBcIjBcIiAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCBiMiwgYW5kIEpTT04gMiBzZXJpYWxpemUgd3JhcHBlZCBwcmltaXRpdmVzIGFzIG9iamVjdFxuICAgICAgICAgICAgICAgIC8vIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShuZXcgTnVtYmVyKCkpID09PSBcIjBcIiAmJlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeShuZXcgU3RyaW5nKCkpID09ICdcIlwiJyAmJlxuICAgICAgICAgICAgICAgIC8vIEZGIDMuMWIxLCAyIHRocm93IGFuIGVycm9yIGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGAsIGB1bmRlZmluZWRgLCBvclxuICAgICAgICAgICAgICAgIC8vIGRvZXMgbm90IGRlZmluZSBhIGNhbm9uaWNhbCBKU09OIHJlcHJlc2VudGF0aW9uICh0aGlzIGFwcGxpZXMgdG9cbiAgICAgICAgICAgICAgICAvLyBvYmplY3RzIHdpdGggYHRvSlNPTmAgcHJvcGVydGllcyBhcyB3ZWxsLCAqdW5sZXNzKiB0aGV5IGFyZSBuZXN0ZWRcbiAgICAgICAgICAgICAgICAvLyB3aXRoaW4gYW4gb2JqZWN0IG9yIGFycmF5KS5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoZ2V0Q2xhc3MpID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAvLyBJRSA4IHNlcmlhbGl6ZXMgYHVuZGVmaW5lZGAgYXMgYFwidW5kZWZpbmVkXCJgLiBTYWZhcmkgPD0gNS4xLjcgYW5kXG4gICAgICAgICAgICAgICAgLy8gRkYgMy4xYjMgcGFzcyB0aGlzIHRlc3QuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KHVuZGVmaW5lZCkgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8PSA1LjEuNyBhbmQgRkYgMy4xYjMgdGhyb3cgYEVycm9yYHMgYW5kIGBUeXBlRXJyb3JgcyxcbiAgICAgICAgICAgICAgICAvLyByZXNwZWN0aXZlbHksIGlmIHRoZSB2YWx1ZSBpcyBvbWl0dGVkIGVudGlyZWx5LlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSgpID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgMiB0aHJvdyBhbiBlcnJvciBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgbm90IGEgbnVtYmVyLFxuICAgICAgICAgICAgICAgIC8vIHN0cmluZywgYXJyYXksIG9iamVjdCwgQm9vbGVhbiwgb3IgYG51bGxgIGxpdGVyYWwuIFRoaXMgYXBwbGllcyB0b1xuICAgICAgICAgICAgICAgIC8vIG9iamVjdHMgd2l0aCBjdXN0b20gYHRvSlNPTmAgbWV0aG9kcyBhcyB3ZWxsLCB1bmxlc3MgdGhleSBhcmUgbmVzdGVkXG4gICAgICAgICAgICAgICAgLy8gaW5zaWRlIG9iamVjdCBvciBhcnJheSBsaXRlcmFscy4gWVVJIDMuMC4wYjEgaWdub3JlcyBjdXN0b20gYHRvSlNPTmBcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIGVudGlyZWx5LlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSh2YWx1ZSkgPT09IFwiMVwiICYmXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt2YWx1ZV0pID09IFwiWzFdXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBQcm90b3R5cGUgPD0gMS42LjEgc2VyaWFsaXplcyBgW3VuZGVmaW5lZF1gIGFzIGBcIltdXCJgIGluc3RlYWQgb2ZcbiAgICAgICAgICAgICAgICAvLyBgXCJbbnVsbF1cImAuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt1bmRlZmluZWRdKSA9PSBcIltudWxsXVwiICYmXG4gICAgICAgICAgICAgICAgLy8gWVVJIDMuMC4wYjEgZmFpbHMgdG8gc2VyaWFsaXplIGBudWxsYCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkobnVsbCkgPT0gXCJudWxsXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgMiBoYWx0cyBzZXJpYWxpemF0aW9uIGlmIGFuIGFycmF5IGNvbnRhaW5zIGEgZnVuY3Rpb246XG4gICAgICAgICAgICAgICAgLy8gYFsxLCB0cnVlLCBnZXRDbGFzcywgMV1gIHNlcmlhbGl6ZXMgYXMgXCJbMSx0cnVlLF0sXCIuIEZGIDMuMWIzXG4gICAgICAgICAgICAgICAgLy8gZWxpZGVzIG5vbi1KU09OIHZhbHVlcyBmcm9tIG9iamVjdHMgYW5kIGFycmF5cywgdW5sZXNzIHRoZXlcbiAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY3VzdG9tIGB0b0pTT05gIG1ldGhvZHMuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KFt1bmRlZmluZWQsIGdldENsYXNzLCBudWxsXSkgPT0gXCJbbnVsbCxudWxsLG51bGxdXCIgJiZcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgc2VyaWFsaXphdGlvbiB0ZXN0LiBGRiAzLjFiMSB1c2VzIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlc1xuICAgICAgICAgICAgICAgIC8vIHdoZXJlIGNoYXJhY3RlciBlc2NhcGUgY29kZXMgYXJlIGV4cGVjdGVkIChlLmcuLCBgXFxiYCA9PiBgXFx1MDAwOGApLlxuICAgICAgICAgICAgICAgIHN0cmluZ2lmeSh7IFwiYVwiOiBbdmFsdWUsIHRydWUsIGZhbHNlLCBudWxsLCBcIlxceDAwXFxiXFxuXFxmXFxyXFx0XCJdIH0pID09IHNlcmlhbGl6ZWQgJiZcbiAgICAgICAgICAgICAgICAvLyBGRiAzLjFiMSBhbmQgYjIgaWdub3JlIHRoZSBgZmlsdGVyYCBhbmQgYHdpZHRoYCBhcmd1bWVudHMuXG4gICAgICAgICAgICAgICAgc3RyaW5naWZ5KG51bGwsIHZhbHVlKSA9PT0gXCIxXCIgJiZcbiAgICAgICAgICAgICAgICBzdHJpbmdpZnkoWzEsIDJdLCBudWxsLCAxKSA9PSBcIltcXG4gMSxcXG4gMlxcbl1cIjtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc3RyaW5naWZ5U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNTdXBwb3J0ZWQgPSBzdHJpbmdpZnlTdXBwb3J0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGVzdCBgSlNPTi5wYXJzZWAuXG4gICAgICAgIGlmIChuYW1lID09IFwianNvbi1wYXJzZVwiKSB7XG4gICAgICAgICAgdmFyIHBhcnNlID0gZXhwb3J0cy5wYXJzZSwgcGFyc2VTdXBwb3J0ZWQ7XG4gICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGF0dGVtcHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAvLyBGRiAzLjFiMSwgYjIgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYSBiYXJlIGxpdGVyYWwgaXMgcHJvdmlkZWQuXG4gICAgICAgICAgICAgIC8vIENvbmZvcm1pbmcgaW1wbGVtZW50YXRpb25zIHNob3VsZCBhbHNvIGNvZXJjZSB0aGUgaW5pdGlhbCBhcmd1bWVudCB0b1xuICAgICAgICAgICAgICAvLyBhIHN0cmluZyBwcmlvciB0byBwYXJzaW5nLlxuICAgICAgICAgICAgICBpZiAocGFyc2UoXCIwXCIpID09PSAwICYmICFwYXJzZShmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgcGFyc2luZyB0ZXN0LlxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2Uoc2VyaWFsaXplZCk7XG4gICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSB2YWx1ZVtcImFcIl0ubGVuZ3RoID09IDUgJiYgdmFsdWVbXCJhXCJdWzBdID09PSAxO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgYXR0ZW1wdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA8PSA1LjEuMiBhbmQgRkYgMy4xYjEgYWxsb3cgdW5lc2NhcGVkIHRhYnMgaW4gc3RyaW5ncy5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSAhcGFyc2UoJ1wiXFx0XCInKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEZGIDQuMCBhbmQgNC4wLjEgYWxsb3cgbGVhZGluZyBgK2Agc2lnbnMgYW5kIGxlYWRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAvLyBkZWNpbWFsIHBvaW50cy4gRkYgNC4wLCA0LjAuMSwgYW5kIElFIDktMTAgYWxzbyBhbGxvd1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGNlcnRhaW4gb2N0YWwgbGl0ZXJhbHMuXG4gICAgICAgICAgICAgICAgICAgICAgcGFyc2VTdXBwb3J0ZWQgPSBwYXJzZShcIjAxXCIpICE9PSAxO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChwYXJzZVN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGRiA0LjAsIDQuMC4xLCBhbmQgUmhpbm8gMS43UjMtUjQgYWxsb3cgdHJhaWxpbmcgZGVjaW1hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHBvaW50cy4gVGhlc2UgZW52aXJvbm1lbnRzLCBhbG9uZyB3aXRoIEZGIDMuMWIxIGFuZCAyLFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsc28gYWxsb3cgdHJhaWxpbmcgY29tbWFzIGluIEpTT04gb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgICAgICAgICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gcGFyc2UoXCIxLlwiKSAhPT0gMTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHBhcnNlU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNTdXBwb3J0ZWQgPSBwYXJzZVN1cHBvcnRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc1tuYW1lXSA9ICEhaXNTdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGhhc1tcImJ1Zy1zdHJpbmctY2hhci1pbmRleFwiXSA9IGhhc1tcImRhdGUtc2VyaWFsaXphdGlvblwiXSA9IGhhc1tcImpzb25cIl0gPSBoYXNbXCJqc29uLXN0cmluZ2lmeVwiXSA9IGhhc1tcImpzb24tcGFyc2VcIl0gPSBudWxsO1xuXG4gICAgaWYgKCFoYXMoXCJqc29uXCIpKSB7XG4gICAgICAvLyBDb21tb24gYFtbQ2xhc3NdXWAgbmFtZSBhbGlhc2VzLlxuICAgICAgdmFyIGZ1bmN0aW9uQ2xhc3MgPSBcIltvYmplY3QgRnVuY3Rpb25dXCIsXG4gICAgICAgICAgZGF0ZUNsYXNzID0gXCJbb2JqZWN0IERhdGVdXCIsXG4gICAgICAgICAgbnVtYmVyQ2xhc3MgPSBcIltvYmplY3QgTnVtYmVyXVwiLFxuICAgICAgICAgIHN0cmluZ0NsYXNzID0gXCJbb2JqZWN0IFN0cmluZ11cIixcbiAgICAgICAgICBhcnJheUNsYXNzID0gXCJbb2JqZWN0IEFycmF5XVwiLFxuICAgICAgICAgIGJvb2xlYW5DbGFzcyA9IFwiW29iamVjdCBCb29sZWFuXVwiO1xuXG4gICAgICAvLyBEZXRlY3QgaW5jb21wbGV0ZSBzdXBwb3J0IGZvciBhY2Nlc3Npbmcgc3RyaW5nIGNoYXJhY3RlcnMgYnkgaW5kZXguXG4gICAgICB2YXIgY2hhckluZGV4QnVnZ3kgPSBoYXMoXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIik7XG5cbiAgICAgIC8vIEludGVybmFsOiBOb3JtYWxpemVzIHRoZSBgZm9yLi4uaW5gIGl0ZXJhdGlvbiBhbGdvcml0aG0gYWNyb3NzXG4gICAgICAvLyBlbnZpcm9ubWVudHMuIEVhY2ggZW51bWVyYXRlZCBrZXkgaXMgeWllbGRlZCB0byBhIGBjYWxsYmFja2AgZnVuY3Rpb24uXG4gICAgICB2YXIgZm9yT3duID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNpemUgPSAwLCBQcm9wZXJ0aWVzLCBkb250RW51bXMsIHByb3BlcnR5O1xuXG4gICAgICAgIC8vIFRlc3RzIGZvciBidWdzIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50J3MgYGZvci4uLmluYCBhbGdvcml0aG0uIFRoZVxuICAgICAgICAvLyBgdmFsdWVPZmAgcHJvcGVydHkgaW5oZXJpdHMgdGhlIG5vbi1lbnVtZXJhYmxlIGZsYWcgZnJvbVxuICAgICAgICAvLyBgT2JqZWN0LnByb3RvdHlwZWAgaW4gb2xkZXIgdmVyc2lvbnMgb2YgSUUsIE5ldHNjYXBlLCBhbmQgTW96aWxsYS5cbiAgICAgICAgKFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy52YWx1ZU9mID0gMDtcbiAgICAgICAgfSkucHJvdG90eXBlLnZhbHVlT2YgPSAwO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgYFByb3BlcnRpZXNgIGNsYXNzLlxuICAgICAgICBkb250RW51bXMgPSBuZXcgUHJvcGVydGllcygpO1xuICAgICAgICBmb3IgKHByb3BlcnR5IGluIGRvbnRFbnVtcykge1xuICAgICAgICAgIC8vIElnbm9yZSBhbGwgcHJvcGVydGllcyBpbmhlcml0ZWQgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWAuXG4gICAgICAgICAgaWYgKGlzUHJvcGVydHkuY2FsbChkb250RW51bXMsIHByb3BlcnR5KSkge1xuICAgICAgICAgICAgc2l6ZSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBQcm9wZXJ0aWVzID0gZG9udEVudW1zID0gbnVsbDtcblxuICAgICAgICAvLyBOb3JtYWxpemUgdGhlIGl0ZXJhdGlvbiBhbGdvcml0aG0uXG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgIC8vIEEgbGlzdCBvZiBub24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGluaGVyaXRlZCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC5cbiAgICAgICAgICBkb250RW51bXMgPSBbXCJ2YWx1ZU9mXCIsIFwidG9TdHJpbmdcIiwgXCJ0b0xvY2FsZVN0cmluZ1wiLCBcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsIFwiaXNQcm90b3R5cGVPZlwiLCBcImhhc093blByb3BlcnR5XCIsIFwiY29uc3RydWN0b3JcIl07XG4gICAgICAgICAgLy8gSUUgPD0gOCwgTW96aWxsYSAxLjAsIGFuZCBOZXRzY2FwZSA2LjIgaWdub3JlIHNoYWRvd2VkIG5vbi1lbnVtZXJhYmxlXG4gICAgICAgICAgLy8gcHJvcGVydGllcy5cbiAgICAgICAgICBmb3JPd24gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIGlzRnVuY3Rpb24gPSBnZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcywgcHJvcGVydHksIGxlbmd0aDtcbiAgICAgICAgICAgIHZhciBoYXNQcm9wZXJ0eSA9ICFpc0Z1bmN0aW9uICYmIHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgIT0gXCJmdW5jdGlvblwiICYmIG9iamVjdFR5cGVzW3R5cGVvZiBvYmplY3QuaGFzT3duUHJvcGVydHldICYmIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSB8fCBpc1Byb3BlcnR5O1xuICAgICAgICAgICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgLy8gR2Vja28gPD0gMS4wIGVudW1lcmF0ZXMgdGhlIGBwcm90b3R5cGVgIHByb3BlcnR5IG9mIGZ1bmN0aW9ucyB1bmRlclxuICAgICAgICAgICAgICAvLyBjZXJ0YWluIGNvbmRpdGlvbnM7IElFIGRvZXMgbm90LlxuICAgICAgICAgICAgICBpZiAoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09IFwicHJvdG90eXBlXCIpICYmIGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IGludm9rZSB0aGUgY2FsbGJhY2sgZm9yIGVhY2ggbm9uLWVudW1lcmFibGUgcHJvcGVydHkuXG4gICAgICAgICAgICBmb3IgKGxlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7IHByb3BlcnR5ID0gZG9udEVudW1zWy0tbGVuZ3RoXTspIHtcbiAgICAgICAgICAgICAgaWYgKGhhc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5vIGJ1Z3MgZGV0ZWN0ZWQ7IHVzZSB0aGUgc3RhbmRhcmQgYGZvci4uLmluYCBhbGdvcml0aG0uXG4gICAgICAgICAgZm9yT3duID0gZnVuY3Rpb24gKG9iamVjdCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBpc0Z1bmN0aW9uID0gZ2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MsIHByb3BlcnR5LCBpc0NvbnN0cnVjdG9yO1xuICAgICAgICAgICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgaWYgKCEoaXNGdW5jdGlvbiAmJiBwcm9wZXJ0eSA9PSBcInByb3RvdHlwZVwiKSAmJiBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkgJiYgIShpc0NvbnN0cnVjdG9yID0gcHJvcGVydHkgPT09IFwiY29uc3RydWN0b3JcIikpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1hbnVhbGx5IGludm9rZSB0aGUgY2FsbGJhY2sgZm9yIHRoZSBgY29uc3RydWN0b3JgIHByb3BlcnR5IGR1ZSB0b1xuICAgICAgICAgICAgLy8gY3Jvc3MtZW52aXJvbm1lbnQgaW5jb25zaXN0ZW5jaWVzLlxuICAgICAgICAgICAgaWYgKGlzQ29uc3RydWN0b3IgfHwgaXNQcm9wZXJ0eS5jYWxsKG9iamVjdCwgKHByb3BlcnR5ID0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2socHJvcGVydHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvck93bihvYmplY3QsIGNhbGxiYWNrKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFB1YmxpYzogU2VyaWFsaXplcyBhIEphdmFTY3JpcHQgYHZhbHVlYCBhcyBhIEpTT04gc3RyaW5nLiBUaGUgb3B0aW9uYWxcbiAgICAgIC8vIGBmaWx0ZXJgIGFyZ3VtZW50IG1heSBzcGVjaWZ5IGVpdGhlciBhIGZ1bmN0aW9uIHRoYXQgYWx0ZXJzIGhvdyBvYmplY3QgYW5kXG4gICAgICAvLyBhcnJheSBtZW1iZXJzIGFyZSBzZXJpYWxpemVkLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIGFuZCBudW1iZXJzIHRoYXRcbiAgICAgIC8vIGluZGljYXRlcyB3aGljaCBwcm9wZXJ0aWVzIHNob3VsZCBiZSBzZXJpYWxpemVkLiBUaGUgb3B0aW9uYWwgYHdpZHRoYFxuICAgICAgLy8gYXJndW1lbnQgbWF5IGJlIGVpdGhlciBhIHN0cmluZyBvciBudW1iZXIgdGhhdCBzcGVjaWZpZXMgdGhlIGluZGVudGF0aW9uXG4gICAgICAvLyBsZXZlbCBvZiB0aGUgb3V0cHV0LlxuICAgICAgaWYgKCFoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSAmJiAhaGFzKFwiZGF0ZS1zZXJpYWxpemF0aW9uXCIpKSB7XG4gICAgICAgIC8vIEludGVybmFsOiBBIG1hcCBvZiBjb250cm9sIGNoYXJhY3RlcnMgYW5kIHRoZWlyIGVzY2FwZWQgZXF1aXZhbGVudHMuXG4gICAgICAgIHZhciBFc2NhcGVzID0ge1xuICAgICAgICAgIDkyOiBcIlxcXFxcXFxcXCIsXG4gICAgICAgICAgMzQ6ICdcXFxcXCInLFxuICAgICAgICAgIDg6IFwiXFxcXGJcIixcbiAgICAgICAgICAxMjogXCJcXFxcZlwiLFxuICAgICAgICAgIDEwOiBcIlxcXFxuXCIsXG4gICAgICAgICAgMTM6IFwiXFxcXHJcIixcbiAgICAgICAgICA5OiBcIlxcXFx0XCJcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogQ29udmVydHMgYHZhbHVlYCBpbnRvIGEgemVyby1wYWRkZWQgc3RyaW5nIHN1Y2ggdGhhdCBpdHNcbiAgICAgICAgLy8gbGVuZ3RoIGlzIGF0IGxlYXN0IGVxdWFsIHRvIGB3aWR0aGAuIFRoZSBgd2lkdGhgIG11c3QgYmUgPD0gNi5cbiAgICAgICAgdmFyIGxlYWRpbmdaZXJvZXMgPSBcIjAwMDAwMFwiO1xuICAgICAgICB2YXIgdG9QYWRkZWRTdHJpbmcgPSBmdW5jdGlvbiAod2lkdGgsIHZhbHVlKSB7XG4gICAgICAgICAgLy8gVGhlIGB8fCAwYCBleHByZXNzaW9uIGlzIG5lY2Vzc2FyeSB0byB3b3JrIGFyb3VuZCBhIGJ1ZyBpblxuICAgICAgICAgIC8vIE9wZXJhIDw9IDcuNTR1MiB3aGVyZSBgMCA9PSAtMGAsIGJ1dCBgU3RyaW5nKC0wKSAhPT0gXCIwXCJgLlxuICAgICAgICAgIHJldHVybiAobGVhZGluZ1plcm9lcyArICh2YWx1ZSB8fCAwKSkuc2xpY2UoLXdpZHRoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogU2VyaWFsaXplcyBhIGRhdGUgb2JqZWN0LlxuICAgICAgICB2YXIgc2VyaWFsaXplRGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBnZXREYXRhLCB5ZWFyLCBtb250aCwgZGF0ZSwgdGltZSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcztcbiAgICAgICAgICAvLyBEZWZpbmUgYWRkaXRpb25hbCB1dGlsaXR5IG1ldGhvZHMgaWYgdGhlIGBEYXRlYCBtZXRob2RzIGFyZSBidWdneS5cbiAgICAgICAgICBpZiAoIWlzRXh0ZW5kZWQpIHtcbiAgICAgICAgICAgIHZhciBmbG9vciA9IE1hdGguZmxvb3I7XG4gICAgICAgICAgICAvLyBBIG1hcHBpbmcgYmV0d2VlbiB0aGUgbW9udGhzIG9mIHRoZSB5ZWFyIGFuZCB0aGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlblxuICAgICAgICAgICAgLy8gSmFudWFyeSAxc3QgYW5kIHRoZSBmaXJzdCBvZiB0aGUgcmVzcGVjdGl2ZSBtb250aC5cbiAgICAgICAgICAgIHZhciBNb250aHMgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xuICAgICAgICAgICAgLy8gSW50ZXJuYWw6IENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkYXlzIGJldHdlZW4gdGhlIFVuaXggZXBvY2ggYW5kIHRoZVxuICAgICAgICAgICAgLy8gZmlyc3QgZGF5IG9mIHRoZSBnaXZlbiBtb250aC5cbiAgICAgICAgICAgIHZhciBnZXREYXkgPSBmdW5jdGlvbiAoeWVhciwgbW9udGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE1vbnRoc1ttb250aF0gKyAzNjUgKiAoeWVhciAtIDE5NzApICsgZmxvb3IoKHllYXIgLSAxOTY5ICsgKG1vbnRoID0gKyhtb250aCA+IDEpKSkgLyA0KSAtIGZsb29yKCh5ZWFyIC0gMTkwMSArIG1vbnRoKSAvIDEwMCkgKyBmbG9vcigoeWVhciAtIDE2MDEgKyBtb250aCkgLyA0MDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdldERhdGEgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgLy8gTWFudWFsbHkgY29tcHV0ZSB0aGUgeWVhciwgbW9udGgsIGRhdGUsIGhvdXJzLCBtaW51dGVzLFxuICAgICAgICAgICAgICAvLyBzZWNvbmRzLCBhbmQgbWlsbGlzZWNvbmRzIGlmIHRoZSBgZ2V0VVRDKmAgbWV0aG9kcyBhcmVcbiAgICAgICAgICAgICAgLy8gYnVnZ3kuIEFkYXB0ZWQgZnJvbSBAWWFmZmxlJ3MgYGRhdGUtc2hpbWAgcHJvamVjdC5cbiAgICAgICAgICAgICAgZGF0ZSA9IGZsb29yKHZhbHVlIC8gODY0ZTUpO1xuICAgICAgICAgICAgICBmb3IgKHllYXIgPSBmbG9vcihkYXRlIC8gMzY1LjI0MjUpICsgMTk3MCAtIDE7IGdldERheSh5ZWFyICsgMSwgMCkgPD0gZGF0ZTsgeWVhcisrKTtcbiAgICAgICAgICAgICAgZm9yIChtb250aCA9IGZsb29yKChkYXRlIC0gZ2V0RGF5KHllYXIsIDApKSAvIDMwLjQyKTsgZ2V0RGF5KHllYXIsIG1vbnRoICsgMSkgPD0gZGF0ZTsgbW9udGgrKyk7XG4gICAgICAgICAgICAgIGRhdGUgPSAxICsgZGF0ZSAtIGdldERheSh5ZWFyLCBtb250aCk7XG4gICAgICAgICAgICAgIC8vIFRoZSBgdGltZWAgdmFsdWUgc3BlY2lmaWVzIHRoZSB0aW1lIHdpdGhpbiB0aGUgZGF5IChzZWUgRVNcbiAgICAgICAgICAgICAgLy8gNS4xIHNlY3Rpb24gMTUuOS4xLjIpLiBUaGUgZm9ybXVsYSBgKEEgJSBCICsgQikgJSBCYCBpcyB1c2VkXG4gICAgICAgICAgICAgIC8vIHRvIGNvbXB1dGUgYEEgbW9kdWxvIEJgLCBhcyB0aGUgYCVgIG9wZXJhdG9yIGRvZXMgbm90XG4gICAgICAgICAgICAgIC8vIGNvcnJlc3BvbmQgdG8gdGhlIGBtb2R1bG9gIG9wZXJhdGlvbiBmb3IgbmVnYXRpdmUgbnVtYmVycy5cbiAgICAgICAgICAgICAgdGltZSA9ICh2YWx1ZSAlIDg2NGU1ICsgODY0ZTUpICUgODY0ZTU7XG4gICAgICAgICAgICAgIC8vIFRoZSBob3VycywgbWludXRlcywgc2Vjb25kcywgYW5kIG1pbGxpc2Vjb25kcyBhcmUgb2J0YWluZWQgYnlcbiAgICAgICAgICAgICAgLy8gZGVjb21wb3NpbmcgdGhlIHRpbWUgd2l0aGluIHRoZSBkYXkuIFNlZSBzZWN0aW9uIDE1LjkuMS4xMC5cbiAgICAgICAgICAgICAgaG91cnMgPSBmbG9vcih0aW1lIC8gMzZlNSkgJSAyNDtcbiAgICAgICAgICAgICAgbWludXRlcyA9IGZsb29yKHRpbWUgLyA2ZTQpICUgNjA7XG4gICAgICAgICAgICAgIHNlY29uZHMgPSBmbG9vcih0aW1lIC8gMWUzKSAlIDYwO1xuICAgICAgICAgICAgICBtaWxsaXNlY29uZHMgPSB0aW1lICUgMWUzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2V0RGF0YSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICB5ZWFyID0gdmFsdWUuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgbW9udGggPSB2YWx1ZS5nZXRVVENNb250aCgpO1xuICAgICAgICAgICAgICBkYXRlID0gdmFsdWUuZ2V0VVRDRGF0ZSgpO1xuICAgICAgICAgICAgICBob3VycyA9IHZhbHVlLmdldFVUQ0hvdXJzKCk7XG4gICAgICAgICAgICAgIG1pbnV0ZXMgPSB2YWx1ZS5nZXRVVENNaW51dGVzKCk7XG4gICAgICAgICAgICAgIHNlY29uZHMgPSB2YWx1ZS5nZXRVVENTZWNvbmRzKCk7XG4gICAgICAgICAgICAgIG1pbGxpc2Vjb25kcyA9IHZhbHVlLmdldFVUQ01pbGxpc2Vjb25kcygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VyaWFsaXplRGF0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDApIHtcbiAgICAgICAgICAgICAgLy8gRGF0ZXMgYXJlIHNlcmlhbGl6ZWQgYWNjb3JkaW5nIHRvIHRoZSBgRGF0ZSN0b0pTT05gIG1ldGhvZFxuICAgICAgICAgICAgICAvLyBzcGVjaWZpZWQgaW4gRVMgNS4xIHNlY3Rpb24gMTUuOS41LjQ0LiBTZWUgc2VjdGlvbiAxNS45LjEuMTVcbiAgICAgICAgICAgICAgLy8gZm9yIHRoZSBJU08gODYwMSBkYXRlIHRpbWUgc3RyaW5nIGZvcm1hdC5cbiAgICAgICAgICAgICAgZ2V0RGF0YSh2YWx1ZSk7XG4gICAgICAgICAgICAgIC8vIFNlcmlhbGl6ZSBleHRlbmRlZCB5ZWFycyBjb3JyZWN0bHkuXG4gICAgICAgICAgICAgIHZhbHVlID0gKHllYXIgPD0gMCB8fCB5ZWFyID49IDFlNCA/ICh5ZWFyIDwgMCA/IFwiLVwiIDogXCIrXCIpICsgdG9QYWRkZWRTdHJpbmcoNiwgeWVhciA8IDAgPyAteWVhciA6IHllYXIpIDogdG9QYWRkZWRTdHJpbmcoNCwgeWVhcikpICtcbiAgICAgICAgICAgICAgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBtb250aCArIDEpICsgXCItXCIgKyB0b1BhZGRlZFN0cmluZygyLCBkYXRlKSArXG4gICAgICAgICAgICAgIC8vIE1vbnRocywgZGF0ZXMsIGhvdXJzLCBtaW51dGVzLCBhbmQgc2Vjb25kcyBzaG91bGQgaGF2ZSB0d29cbiAgICAgICAgICAgICAgLy8gZGlnaXRzOyBtaWxsaXNlY29uZHMgc2hvdWxkIGhhdmUgdGhyZWUuXG4gICAgICAgICAgICAgIFwiVFwiICsgdG9QYWRkZWRTdHJpbmcoMiwgaG91cnMpICsgXCI6XCIgKyB0b1BhZGRlZFN0cmluZygyLCBtaW51dGVzKSArIFwiOlwiICsgdG9QYWRkZWRTdHJpbmcoMiwgc2Vjb25kcykgK1xuICAgICAgICAgICAgICAvLyBNaWxsaXNlY29uZHMgYXJlIG9wdGlvbmFsIGluIEVTIDUuMCwgYnV0IHJlcXVpcmVkIGluIDUuMS5cbiAgICAgICAgICAgICAgXCIuXCIgKyB0b1BhZGRlZFN0cmluZygzLCBtaWxsaXNlY29uZHMpICsgXCJaXCI7XG4gICAgICAgICAgICAgIHllYXIgPSBtb250aCA9IGRhdGUgPSBob3VycyA9IG1pbnV0ZXMgPSBzZWNvbmRzID0gbWlsbGlzZWNvbmRzID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBzZXJpYWxpemVEYXRlKHZhbHVlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBGb3IgZW52aXJvbm1lbnRzIHdpdGggYEpTT04uc3RyaW5naWZ5YCBidXQgYnVnZ3kgZGF0ZSBzZXJpYWxpemF0aW9uLFxuICAgICAgICAvLyB3ZSBvdmVycmlkZSB0aGUgbmF0aXZlIGBEYXRlI3RvSlNPTmAgaW1wbGVtZW50YXRpb24gd2l0aCBhXG4gICAgICAgIC8vIHNwZWMtY29tcGxpYW50IG9uZS5cbiAgICAgICAgaWYgKGhhcyhcImpzb24tc3RyaW5naWZ5XCIpICYmICFoYXMoXCJkYXRlLXNlcmlhbGl6YXRpb25cIikpIHtcbiAgICAgICAgICAvLyBJbnRlcm5hbDogdGhlIGBEYXRlI3RvSlNPTmAgaW1wbGVtZW50YXRpb24gdXNlZCB0byBvdmVycmlkZSB0aGUgbmF0aXZlIG9uZS5cbiAgICAgICAgICBmdW5jdGlvbiBkYXRlVG9KU09OIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXJpYWxpemVEYXRlKHRoaXMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFB1YmxpYzogYEpTT04uc3RyaW5naWZ5YC4gU2VlIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMuXG4gICAgICAgICAgdmFyIG5hdGl2ZVN0cmluZ2lmeSA9IGV4cG9ydHMuc3RyaW5naWZ5O1xuICAgICAgICAgIGV4cG9ydHMuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKHNvdXJjZSwgZmlsdGVyLCB3aWR0aCkge1xuICAgICAgICAgICAgdmFyIG5hdGl2ZVRvSlNPTiA9IERhdGUucHJvdG90eXBlLnRvSlNPTjtcbiAgICAgICAgICAgIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGRhdGVUb0pTT047XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gbmF0aXZlU3RyaW5naWZ5KHNvdXJjZSwgZmlsdGVyLCB3aWR0aCk7XG4gICAgICAgICAgICBEYXRlLnByb3RvdHlwZS50b0pTT04gPSBuYXRpdmVUb0pTT047XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJbnRlcm5hbDogRG91YmxlLXF1b3RlcyBhIHN0cmluZyBgdmFsdWVgLCByZXBsYWNpbmcgYWxsIEFTQ0lJIGNvbnRyb2xcbiAgICAgICAgICAvLyBjaGFyYWN0ZXJzIChjaGFyYWN0ZXJzIHdpdGggY29kZSB1bml0IHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDMxKSB3aXRoXG4gICAgICAgICAgLy8gdGhlaXIgZXNjYXBlZCBlcXVpdmFsZW50cy4gVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAgICAgICAgICAvLyBgUXVvdGUodmFsdWUpYCBvcGVyYXRpb24gZGVmaW5lZCBpbiBFUyA1LjEgc2VjdGlvbiAxNS4xMi4zLlxuICAgICAgICAgIHZhciB1bmljb2RlUHJlZml4ID0gXCJcXFxcdTAwXCI7XG4gICAgICAgICAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbiAoY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBjaGFyYWN0ZXIuY2hhckNvZGVBdCgwKSwgZXNjYXBlZCA9IEVzY2FwZXNbY2hhckNvZGVdO1xuICAgICAgICAgICAgaWYgKGVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5pY29kZVByZWZpeCArIHRvUGFkZGVkU3RyaW5nKDIsIGNoYXJDb2RlLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgcmVFc2NhcGUgPSAvW1xceDAwLVxceDFmXFx4MjJcXHg1Y10vZztcbiAgICAgICAgICB2YXIgcXVvdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJlRXNjYXBlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gJ1wiJyArXG4gICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICByZUVzY2FwZS50ZXN0KHZhbHVlKVxuICAgICAgICAgICAgICAgICAgPyB2YWx1ZS5yZXBsYWNlKHJlRXNjYXBlLCBlc2NhcGVDaGFyKVxuICAgICAgICAgICAgICAgICAgOiB2YWx1ZVxuICAgICAgICAgICAgICApICtcbiAgICAgICAgICAgICAgJ1wiJztcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gSW50ZXJuYWw6IFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZXMgYW4gb2JqZWN0LiBJbXBsZW1lbnRzIHRoZVxuICAgICAgICAgIC8vIGBTdHIoa2V5LCBob2xkZXIpYCwgYEpPKHZhbHVlKWAsIGFuZCBgSkEodmFsdWUpYCBvcGVyYXRpb25zLlxuICAgICAgICAgIHZhciBzZXJpYWxpemUgPSBmdW5jdGlvbiAocHJvcGVydHksIG9iamVjdCwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIGluZGVudGF0aW9uLCBzdGFjaykge1xuICAgICAgICAgICAgdmFyIHZhbHVlLCB0eXBlLCBjbGFzc05hbWUsIHJlc3VsdHMsIGVsZW1lbnQsIGluZGV4LCBsZW5ndGgsIHByZWZpeCwgcmVzdWx0O1xuICAgICAgICAgICAgYXR0ZW1wdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIE5lY2Vzc2FyeSBmb3IgaG9zdCBvYmplY3Qgc3VwcG9ydC5cbiAgICAgICAgICAgICAgdmFsdWUgPSBvYmplY3RbcHJvcGVydHldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLmdldFVUQ0Z1bGxZZWFyICYmIGdldENsYXNzLmNhbGwodmFsdWUpID09IGRhdGVDbGFzcyAmJiB2YWx1ZS50b0pTT04gPT09IERhdGUucHJvdG90eXBlLnRvSlNPTikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gc2VyaWFsaXplRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlLnRvSlNPTiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvSlNPTihwcm9wZXJ0eSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAvLyBJZiBhIHJlcGxhY2VtZW50IGZ1bmN0aW9uIHdhcyBwcm92aWRlZCwgY2FsbCBpdCB0byBvYnRhaW4gdGhlIHZhbHVlXG4gICAgICAgICAgICAgIC8vIGZvciBzZXJpYWxpemF0aW9uLlxuICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwob2JqZWN0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRXhpdCBlYXJseSBpZiB2YWx1ZSBpcyBgdW5kZWZpbmVkYCBvciBgbnVsbGAuXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdmFsdWUgOiBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgICAgICAvLyBPbmx5IGNhbGwgYGdldENsYXNzYCBpZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0LlxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoY2xhc3NOYW1lIHx8IHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgICAgY2FzZSBib29sZWFuQ2xhc3M6XG4gICAgICAgICAgICAgICAgLy8gQm9vbGVhbnMgYXJlIHJlcHJlc2VudGVkIGxpdGVyYWxseS5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIHZhbHVlO1xuICAgICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgIGNhc2UgbnVtYmVyQ2xhc3M6XG4gICAgICAgICAgICAgICAgLy8gSlNPTiBudW1iZXJzIG11c3QgYmUgZmluaXRlLiBgSW5maW5pdHlgIGFuZCBgTmFOYCBhcmUgc2VyaWFsaXplZCBhc1xuICAgICAgICAgICAgICAgIC8vIGBcIm51bGxcImAuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDAgPyBcIlwiICsgdmFsdWUgOiBcIm51bGxcIjtcbiAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICBjYXNlIHN0cmluZ0NsYXNzOlxuICAgICAgICAgICAgICAgIC8vIFN0cmluZ3MgYXJlIGRvdWJsZS1xdW90ZWQgYW5kIGVzY2FwZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1b3RlKFwiXCIgKyB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBzZXJpYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgIC8vIENoZWNrIGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhpcyBpcyBhIGxpbmVhciBzZWFyY2g7IHBlcmZvcm1hbmNlXG4gICAgICAgICAgICAgIC8vIGlzIGludmVyc2VseSBwcm9wb3J0aW9uYWwgdG8gdGhlIG51bWJlciBvZiB1bmlxdWUgbmVzdGVkIG9iamVjdHMuXG4gICAgICAgICAgICAgIGZvciAobGVuZ3RoID0gc3RhY2subGVuZ3RoOyBsZW5ndGgtLTspIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbbGVuZ3RoXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEN5Y2xpYyBzdHJ1Y3R1cmVzIGNhbm5vdCBiZSBzZXJpYWxpemVkIGJ5IGBKU09OLnN0cmluZ2lmeWAuXG4gICAgICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gQWRkIHRoZSBvYmplY3QgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgICAgICAgICAgICBzdGFjay5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsIGFuZCBpbmRlbnQgb25lIGFkZGl0aW9uYWwgbGV2ZWwuXG4gICAgICAgICAgICAgIHByZWZpeCA9IGluZGVudGF0aW9uO1xuICAgICAgICAgICAgICBpbmRlbnRhdGlvbiArPSB3aGl0ZXNwYWNlO1xuICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09IGFycmF5Q2xhc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBSZWN1cnNpdmVseSBzZXJpYWxpemUgYXJyYXkgZWxlbWVudHMuXG4gICAgICAgICAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBzZXJpYWxpemUoaW5kZXgsIHZhbHVlLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKTtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChlbGVtZW50ID09PSB1bmRlZmluZWQgPyBcIm51bGxcIiA6IGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRzLmxlbmd0aCA/ICh3aGl0ZXNwYWNlID8gXCJbXFxuXCIgKyBpbmRlbnRhdGlvbiArIHJlc3VsdHMuam9pbihcIixcXG5cIiArIGluZGVudGF0aW9uKSArIFwiXFxuXCIgKyBwcmVmaXggKyBcIl1cIiA6IChcIltcIiArIHJlc3VsdHMuam9pbihcIixcIikgKyBcIl1cIikpIDogXCJbXVwiO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHNlcmlhbGl6ZSBvYmplY3QgbWVtYmVycy4gTWVtYmVycyBhcmUgc2VsZWN0ZWQgZnJvbVxuICAgICAgICAgICAgICAgIC8vIGVpdGhlciBhIHVzZXItc3BlY2lmaWVkIGxpc3Qgb2YgcHJvcGVydHkgbmFtZXMsIG9yIHRoZSBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBpdHNlbGYuXG4gICAgICAgICAgICAgICAgZm9yT3duKHByb3BlcnRpZXMgfHwgdmFsdWUsIGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZXJpYWxpemUocHJvcGVydHksIHZhbHVlLCBjYWxsYmFjaywgcHJvcGVydGllcywgd2hpdGVzcGFjZSwgaW5kZW50YXRpb24sIHN0YWNrKTtcbiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjM6IFwiSWYgYGdhcGAge3doaXRlc3BhY2V9XG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG5vdCB0aGUgZW1wdHkgc3RyaW5nLCBsZXQgYG1lbWJlcmAge3F1b3RlKHByb3BlcnR5KSArIFwiOlwifVxuICAgICAgICAgICAgICAgICAgICAvLyBiZSB0aGUgY29uY2F0ZW5hdGlvbiBvZiBgbWVtYmVyYCBhbmQgdGhlIGBzcGFjZWAgY2hhcmFjdGVyLlwiXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBcImBzcGFjZWAgY2hhcmFjdGVyXCIgcmVmZXJzIHRvIHRoZSBsaXRlcmFsIHNwYWNlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYXJhY3Rlciwgbm90IHRoZSBgc3BhY2VgIHt3aWR0aH0gYXJndW1lbnQgcHJvdmlkZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gYEpTT04uc3RyaW5naWZ5YC5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHF1b3RlKHByb3BlcnR5KSArIFwiOlwiICsgKHdoaXRlc3BhY2UgPyBcIiBcIiA6IFwiXCIpICsgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0cy5sZW5ndGggPyAod2hpdGVzcGFjZSA/IFwie1xcblwiICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oXCIsXFxuXCIgKyBpbmRlbnRhdGlvbikgKyBcIlxcblwiICsgcHJlZml4ICsgXCJ9XCIgOiAoXCJ7XCIgKyByZXN1bHRzLmpvaW4oXCIsXCIpICsgXCJ9XCIpKSA6IFwie31cIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG9iamVjdCBmcm9tIHRoZSB0cmF2ZXJzZWQgb2JqZWN0IHN0YWNrLlxuICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gUHVibGljOiBgSlNPTi5zdHJpbmdpZnlgLiBTZWUgRVMgNS4xIHNlY3Rpb24gMTUuMTIuMy5cbiAgICAgICAgICBleHBvcnRzLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIChzb3VyY2UsIGZpbHRlciwgd2lkdGgpIHtcbiAgICAgICAgICAgIHZhciB3aGl0ZXNwYWNlLCBjYWxsYmFjaywgcHJvcGVydGllcywgY2xhc3NOYW1lO1xuICAgICAgICAgICAgaWYgKG9iamVjdFR5cGVzW3R5cGVvZiBmaWx0ZXJdICYmIGZpbHRlcikge1xuICAgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKGZpbHRlcik7XG4gICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gZnVuY3Rpb25DbGFzcykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZmlsdGVyO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCB0aGUgcHJvcGVydHkgbmFtZXMgYXJyYXkgaW50byBhIG1ha2VzaGlmdCBzZXQuXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMCwgbGVuZ3RoID0gZmlsdGVyLmxlbmd0aCwgdmFsdWU7IGluZGV4IDwgbGVuZ3RoOykge1xuICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmaWx0ZXJbaW5kZXgrK107XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gXCJbb2JqZWN0IFN0cmluZ11cIiB8fCBjbGFzc05hbWUgPT0gXCJbb2JqZWN0IE51bWJlcl1cIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW3ZhbHVlXSA9IDE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2lkdGgpIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lID0gZ2V0Q2xhc3MuY2FsbCh3aWR0aCk7XG4gICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gbnVtYmVyQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBgd2lkdGhgIHRvIGFuIGludGVnZXIgYW5kIGNyZWF0ZSBhIHN0cmluZyBjb250YWluaW5nXG4gICAgICAgICAgICAgICAgLy8gYHdpZHRoYCBudW1iZXIgb2Ygc3BhY2UgY2hhcmFjdGVycy5cbiAgICAgICAgICAgICAgICBpZiAoKHdpZHRoIC09IHdpZHRoICUgMSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiAxMCkge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDEwO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZm9yICh3aGl0ZXNwYWNlID0gXCJcIjsgd2hpdGVzcGFjZS5sZW5ndGggPCB3aWR0aDspIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpdGVzcGFjZSArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lID09IHN0cmluZ0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgd2hpdGVzcGFjZSA9IHdpZHRoLmxlbmd0aCA8PSAxMCA/IHdpZHRoIDogd2lkdGguc2xpY2UoMCwgMTApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPcGVyYSA8PSA3LjU0dTIgZGlzY2FyZHMgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggZW1wdHkgc3RyaW5nIGtleXNcbiAgICAgICAgICAgIC8vIChgXCJcImApIG9ubHkgaWYgdGhleSBhcmUgdXNlZCBkaXJlY3RseSB3aXRoaW4gYW4gb2JqZWN0IG1lbWJlciBsaXN0XG4gICAgICAgICAgICAvLyAoZS5nLiwgYCEoXCJcIiBpbiB7IFwiXCI6IDF9KWApLlxuICAgICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZShcIlwiLCAodmFsdWUgPSB7fSwgdmFsdWVbXCJcIl0gPSBzb3VyY2UsIHZhbHVlKSwgY2FsbGJhY2ssIHByb3BlcnRpZXMsIHdoaXRlc3BhY2UsIFwiXCIsIFtdKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFB1YmxpYzogUGFyc2VzIGEgSlNPTiBzb3VyY2Ugc3RyaW5nLlxuICAgICAgaWYgKCFoYXMoXCJqc29uLXBhcnNlXCIpKSB7XG4gICAgICAgIHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4gICAgICAgIC8vIEludGVybmFsOiBBIG1hcCBvZiBlc2NhcGVkIGNvbnRyb2wgY2hhcmFjdGVycyBhbmQgdGhlaXIgdW5lc2NhcGVkXG4gICAgICAgIC8vIGVxdWl2YWxlbnRzLlxuICAgICAgICB2YXIgVW5lc2NhcGVzID0ge1xuICAgICAgICAgIDkyOiBcIlxcXFxcIixcbiAgICAgICAgICAzNDogJ1wiJyxcbiAgICAgICAgICA0NzogXCIvXCIsXG4gICAgICAgICAgOTg6IFwiXFxiXCIsXG4gICAgICAgICAgMTE2OiBcIlxcdFwiLFxuICAgICAgICAgIDExMDogXCJcXG5cIixcbiAgICAgICAgICAxMDI6IFwiXFxmXCIsXG4gICAgICAgICAgMTE0OiBcIlxcclwiXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW50ZXJuYWw6IFN0b3JlcyB0aGUgcGFyc2VyIHN0YXRlLlxuICAgICAgICB2YXIgSW5kZXgsIFNvdXJjZTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmVzZXRzIHRoZSBwYXJzZXIgc3RhdGUgYW5kIHRocm93cyBhIGBTeW50YXhFcnJvcmAuXG4gICAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBJbmRleCA9IFNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgU3ludGF4RXJyb3IoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogUmV0dXJucyB0aGUgbmV4dCB0b2tlbiwgb3IgYFwiJFwiYCBpZiB0aGUgcGFyc2VyIGhhcyByZWFjaGVkXG4gICAgICAgIC8vIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzdHJpbmcuIEEgdG9rZW4gbWF5IGJlIGEgc3RyaW5nLCBudW1iZXIsIGBudWxsYFxuICAgICAgICAvLyBsaXRlcmFsLCBvciBCb29sZWFuIGxpdGVyYWwuXG4gICAgICAgIHZhciBsZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IFNvdXJjZSwgbGVuZ3RoID0gc291cmNlLmxlbmd0aCwgdmFsdWUsIGJlZ2luLCBwb3NpdGlvbiwgaXNTaWduZWQsIGNoYXJDb2RlO1xuICAgICAgICAgIHdoaWxlIChJbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGNoYXJDb2RlKSB7XG4gICAgICAgICAgICAgIGNhc2UgOTogY2FzZSAxMDogY2FzZSAxMzogY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHdoaXRlc3BhY2UgdG9rZW5zLCBpbmNsdWRpbmcgdGFicywgY2FycmlhZ2UgcmV0dXJucywgbGluZVxuICAgICAgICAgICAgICAgIC8vIGZlZWRzLCBhbmQgc3BhY2UgY2hhcmFjdGVycy5cbiAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIDEyMzogY2FzZSAxMjU6IGNhc2UgOTE6IGNhc2UgOTM6IGNhc2UgNTg6IGNhc2UgNDQ6XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgYSBwdW5jdHVhdG9yIHRva2VuIChge2AsIGB9YCwgYFtgLCBgXWAsIGA6YCwgb3IgYCxgKSBhdFxuICAgICAgICAgICAgICAgIC8vIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhckluZGV4QnVnZ3kgPyBzb3VyY2UuY2hhckF0KEluZGV4KSA6IHNvdXJjZVtJbmRleF07XG4gICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICAgICAgLy8gYFwiYCBkZWxpbWl0cyBhIEpTT04gc3RyaW5nOyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNoYXJhY3RlciBhbmRcbiAgICAgICAgICAgICAgICAvLyBiZWdpbiBwYXJzaW5nIHRoZSBzdHJpbmcuIFN0cmluZyB0b2tlbnMgYXJlIHByZWZpeGVkIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwgYEBgIGNoYXJhY3RlciB0byBkaXN0aW5ndWlzaCB0aGVtIGZyb20gcHVuY3R1YXRvcnMgYW5kXG4gICAgICAgICAgICAgICAgLy8gZW5kLW9mLXN0cmluZyB0b2tlbnMuXG4gICAgICAgICAgICAgICAgZm9yICh2YWx1ZSA9IFwiQFwiLCBJbmRleCsrOyBJbmRleCA8IGxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5lc2NhcGVkIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVycyAodGhvc2Ugd2l0aCBhIGNvZGUgdW5pdFxuICAgICAgICAgICAgICAgICAgICAvLyBsZXNzIHRoYW4gdGhlIHNwYWNlIGNoYXJhY3RlcikgYXJlIG5vdCBwZXJtaXR0ZWQuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXJDb2RlID09IDkyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgcmV2ZXJzZSBzb2xpZHVzIChgXFxgKSBtYXJrcyB0aGUgYmVnaW5uaW5nIG9mIGFuIGVzY2FwZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udHJvbCBjaGFyYWN0ZXIgKGluY2x1ZGluZyBgXCJgLCBgXFxgLCBhbmQgYC9gKSBvciBVbmljb2RlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjaGFyQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTI6IGNhc2UgMzQ6IGNhc2UgNDc6IGNhc2UgOTg6IGNhc2UgMTE2OiBjYXNlIDExMDogY2FzZSAxMDI6IGNhc2UgMTE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV2aXZlIGVzY2FwZWQgY29udHJvbCBjaGFyYWN0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gVW5lc2NhcGVzW2NoYXJDb2RlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBcXHVgIG1hcmtzIHRoZSBiZWdpbm5pbmcgb2YgYSBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdG8gdGhlIGZpcnN0IGNoYXJhY3RlciBhbmQgdmFsaWRhdGUgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3VyLWRpZ2l0IGNvZGUgcG9pbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWdpbiA9ICsrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHBvc2l0aW9uID0gSW5kZXggKyA0OyBJbmRleCA8IHBvc2l0aW9uOyBJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHZhbGlkIHNlcXVlbmNlIGNvbXByaXNlcyBmb3VyIGhleGRpZ2l0cyAoY2FzZS1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5zZW5zaXRpdmUpIHRoYXQgZm9ybSBhIHNpbmdsZSBoZXhhZGVjaW1hbCB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcgfHwgY2hhckNvZGUgPj0gOTcgJiYgY2hhckNvZGUgPD0gMTAyIHx8IGNoYXJDb2RlID49IDY1ICYmIGNoYXJDb2RlIDw9IDcwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV2aXZlIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGZyb21DaGFyQ29kZShcIjB4XCIgKyBzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBBbiB1bmVzY2FwZWQgZG91YmxlLXF1b3RlIGNoYXJhY3RlciBtYXJrcyB0aGUgZW5kIG9mIHRoZVxuICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cmluZy5cbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYmVnaW4gPSBJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW1pemUgZm9yIHRoZSBjb21tb24gY2FzZSB3aGVyZSBhIHN0cmluZyBpcyB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNoYXJDb2RlID49IDMyICYmIGNoYXJDb2RlICE9IDkyICYmIGNoYXJDb2RlICE9IDM0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgdGhlIHN0cmluZyBhcy1pcy5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gc291cmNlLnNsaWNlKGJlZ2luLCBJbmRleCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdG8gdGhlIG5leHQgY2hhcmFjdGVyIGFuZCByZXR1cm4gdGhlIHJldml2ZWQgc3RyaW5nLlxuICAgICAgICAgICAgICAgICAgSW5kZXgrKztcbiAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVW50ZXJtaW5hdGVkIHN0cmluZy5cbiAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFBhcnNlIG51bWJlcnMgYW5kIGxpdGVyYWxzLlxuICAgICAgICAgICAgICAgIGJlZ2luID0gSW5kZXg7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSBwYXN0IHRoZSBuZWdhdGl2ZSBzaWduLCBpZiBvbmUgaXMgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0NSkge1xuICAgICAgICAgICAgICAgICAgaXNTaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdCgrK0luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgYW4gaW50ZWdlciBvciBmbG9hdGluZy1wb2ludCB2YWx1ZS5cbiAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpIHtcbiAgICAgICAgICAgICAgICAgIC8vIExlYWRpbmcgemVyb2VzIGFyZSBpbnRlcnByZXRlZCBhcyBvY3RhbCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSA9PSA0OCAmJiAoKGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXggKyAxKSksIGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbGxlZ2FsIG9jdGFsIGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpc1NpZ25lZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGludGVnZXIgY29tcG9uZW50LlxuICAgICAgICAgICAgICAgICAgZm9yICg7IEluZGV4IDwgbGVuZ3RoICYmICgoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCkpLCBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7IEluZGV4KyspO1xuICAgICAgICAgICAgICAgICAgLy8gRmxvYXRzIGNhbm5vdCBjb250YWluIGEgbGVhZGluZyBkZWNpbWFsIHBvaW50OyBob3dldmVyLCB0aGlzXG4gICAgICAgICAgICAgICAgICAvLyBjYXNlIGlzIGFscmVhZHkgYWNjb3VudGVkIGZvciBieSB0aGUgcGFyc2VyLlxuICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSA9PSA0Nikge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICsrSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBkZWNpbWFsIGNvbXBvbmVudC5cbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHBvc2l0aW9uIDwgbGVuZ3RoOyBwb3NpdGlvbisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlIDwgNDggfHwgY2hhckNvZGUgPiA1Nykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PSBJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIElsbGVnYWwgdHJhaWxpbmcgZGVjaW1hbC5cbiAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEluZGV4ID0gcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvLyBQYXJzZSBleHBvbmVudHMuIFRoZSBgZWAgZGVub3RpbmcgdGhlIGV4cG9uZW50IGlzXG4gICAgICAgICAgICAgICAgICAvLyBjYXNlLWluc2Vuc2l0aXZlLlxuICAgICAgICAgICAgICAgICAgY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7XG4gICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gMTAxIHx8IGNoYXJDb2RlID09IDY5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNraXAgcGFzdCB0aGUgc2lnbiBmb2xsb3dpbmcgdGhlIGV4cG9uZW50LCBpZiBvbmUgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPT0gNDMgfHwgY2hhckNvZGUgPT0gNDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBleHBvbmVudGlhbCBjb21wb25lbnQuXG4gICAgICAgICAgICAgICAgICAgIGZvciAocG9zaXRpb24gPSBJbmRleDsgcG9zaXRpb24gPCBsZW5ndGg7IHBvc2l0aW9uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhckNvZGUgPCA0OCB8fCBjaGFyQ29kZSA+IDU3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09IEluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gSWxsZWdhbCBlbXB0eSBleHBvbmVudC5cbiAgICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEluZGV4ID0gcG9zaXRpb247XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAvLyBDb2VyY2UgdGhlIHBhcnNlZCB2YWx1ZSB0byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICAgICAgICAgICAgICAgICAgcmV0dXJuICtzb3VyY2Uuc2xpY2UoYmVnaW4sIEluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQSBuZWdhdGl2ZSBzaWduIG1heSBvbmx5IHByZWNlZGUgbnVtYmVycy5cbiAgICAgICAgICAgICAgICBpZiAoaXNTaWduZWQpIHtcbiAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGB0cnVlYCwgYGZhbHNlYCwgYW5kIGBudWxsYCBsaXRlcmFscy5cbiAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHNvdXJjZS5zbGljZShJbmRleCwgSW5kZXggKyA0KTtcbiAgICAgICAgICAgICAgICBpZiAodGVtcCA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgSW5kZXggKz0gNDtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGVtcCA9PSBcImZhbHNcIiAmJiBzb3VyY2UuY2hhckNvZGVBdChJbmRleCArIDQgKSA9PSAxMDEpIHtcbiAgICAgICAgICAgICAgICAgIEluZGV4ICs9IDU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wID09IFwibnVsbFwiKSB7XG4gICAgICAgICAgICAgICAgICBJbmRleCArPSA0O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFVucmVjb2duaXplZCB0b2tlbi5cbiAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNlbnRpbmVsIGAkYCBjaGFyYWN0ZXIgaWYgdGhlIHBhcnNlciBoYXMgcmVhY2hlZCB0aGUgZW5kXG4gICAgICAgICAgLy8gb2YgdGhlIHNvdXJjZSBzdHJpbmcuXG4gICAgICAgICAgcmV0dXJuIFwiJFwiO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBQYXJzZXMgYSBKU09OIGB2YWx1ZWAgdG9rZW4uXG4gICAgICAgIHZhciBnZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0cywgaGFzTWVtYmVycztcbiAgICAgICAgICBpZiAodmFsdWUgPT0gXCIkXCIpIHtcbiAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgZW5kIG9mIGlucHV0LlxuICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAoKGNoYXJJbmRleEJ1Z2d5ID8gdmFsdWUuY2hhckF0KDApIDogdmFsdWVbMF0pID09IFwiQFwiKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc2VudGluZWwgYEBgIGNoYXJhY3Rlci5cbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGFyc2Ugb2JqZWN0IGFuZCBhcnJheSBsaXRlcmFscy5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIltcIikge1xuICAgICAgICAgICAgICAvLyBQYXJzZXMgYSBKU09OIGFycmF5LCByZXR1cm5pbmcgYSBuZXcgSmF2YVNjcmlwdCBhcnJheS5cbiAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBsZXgoKTtcbiAgICAgICAgICAgICAgICAvLyBBIGNsb3Npbmcgc3F1YXJlIGJyYWNrZXQgbWFya3MgdGhlIGVuZCBvZiB0aGUgYXJyYXkgbGl0ZXJhbC5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXJyYXkgbGl0ZXJhbCBjb250YWlucyBlbGVtZW50cywgdGhlIGN1cnJlbnQgdG9rZW5cbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgYmUgYSBjb21tYSBzZXBhcmF0aW5nIHRoZSBwcmV2aW91cyBlbGVtZW50IGZyb20gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV4dC5cbiAgICAgICAgICAgICAgICBpZiAoaGFzTWVtYmVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIGFycmF5IGxpdGVyYWwuXG4gICAgICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBgLGAgbXVzdCBzZXBhcmF0ZSBlYWNoIGFycmF5IGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGhhc01lbWJlcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBFbGlzaW9ucyBhbmQgbGVhZGluZyBjb21tYXMgYXJlIG5vdCBwZXJtaXR0ZWQuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goZ2V0KHZhbHVlKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IFwie1wiKSB7XG4gICAgICAgICAgICAgIC8vIFBhcnNlcyBhIEpTT04gb2JqZWN0LCByZXR1cm5pbmcgYSBuZXcgSmF2YVNjcmlwdCBvYmplY3QuXG4gICAgICAgICAgICAgIHJlc3VsdHMgPSB7fTtcbiAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgLy8gQSBjbG9zaW5nIGN1cmx5IGJyYWNlIG1hcmtzIHRoZSBlbmQgb2YgdGhlIG9iamVjdCBsaXRlcmFsLlxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgbGl0ZXJhbCBjb250YWlucyBtZW1iZXJzLCB0aGUgY3VycmVudCB0b2tlblxuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBiZSBhIGNvbW1hIHNlcGFyYXRvci5cbiAgICAgICAgICAgICAgICBpZiAoaGFzTWVtYmVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBcIn1cIikge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZXhwZWN0ZWQgdHJhaWxpbmcgYCxgIGluIG9iamVjdCBsaXRlcmFsLlxuICAgICAgICAgICAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgYCxgIG11c3Qgc2VwYXJhdGUgZWFjaCBvYmplY3QgbWVtYmVyLlxuICAgICAgICAgICAgICAgICAgICBhYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBoYXNNZW1iZXJzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gTGVhZGluZyBjb21tYXMgYXJlIG5vdCBwZXJtaXR0ZWQsIG9iamVjdCBwcm9wZXJ0eSBuYW1lcyBtdXN0IGJlXG4gICAgICAgICAgICAgICAgLy8gZG91YmxlLXF1b3RlZCBzdHJpbmdzLCBhbmQgYSBgOmAgbXVzdCBzZXBhcmF0ZSBlYWNoIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgLy8gbmFtZSBhbmQgdmFsdWUuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiLFwiIHx8IHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiIHx8IChjaGFySW5kZXhCdWdneSA/IHZhbHVlLmNoYXJBdCgwKSA6IHZhbHVlWzBdKSAhPSBcIkBcIiB8fCBsZXgoKSAhPSBcIjpcIikge1xuICAgICAgICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0c1t2YWx1ZS5zbGljZSgxKV0gPSBnZXQobGV4KCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVW5leHBlY3RlZCB0b2tlbiBlbmNvdW50ZXJlZC5cbiAgICAgICAgICAgIGFib3J0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJbnRlcm5hbDogVXBkYXRlcyBhIHRyYXZlcnNlZCBvYmplY3QgbWVtYmVyLlxuICAgICAgICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnQgPSB3YWxrKHNvdXJjZSwgcHJvcGVydHksIGNhbGxiYWNrKTtcbiAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWxldGUgc291cmNlW3Byb3BlcnR5XTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc291cmNlW3Byb3BlcnR5XSA9IGVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEludGVybmFsOiBSZWN1cnNpdmVseSB0cmF2ZXJzZXMgYSBwYXJzZWQgSlNPTiBvYmplY3QsIGludm9raW5nIHRoZVxuICAgICAgICAvLyBgY2FsbGJhY2tgIGZ1bmN0aW9uIGZvciBlYWNoIHZhbHVlLiBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZVxuICAgICAgICAvLyBgV2Fsayhob2xkZXIsIG5hbWUpYCBvcGVyYXRpb24gZGVmaW5lZCBpbiBFUyA1LjEgc2VjdGlvbiAxNS4xMi4yLlxuICAgICAgICB2YXIgd2FsayA9IGZ1bmN0aW9uIChzb3VyY2UsIHByb3BlcnR5LCBjYWxsYmFjaykge1xuICAgICAgICAgIHZhciB2YWx1ZSA9IHNvdXJjZVtwcm9wZXJ0eV0sIGxlbmd0aDtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGBmb3JPd25gIGNhbid0IGJlIHVzZWQgdG8gdHJhdmVyc2UgYW4gYXJyYXkgaW4gT3BlcmEgPD0gOC41NFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBpdHMgYE9iamVjdCNoYXNPd25Qcm9wZXJ0eWAgaW1wbGVtZW50YXRpb24gcmV0dXJucyBgZmFsc2VgXG4gICAgICAgICAgICAvLyBmb3IgYXJyYXkgaW5kaWNlcyAoZS5nLiwgYCFbMSwgMiwgM10uaGFzT3duUHJvcGVydHkoXCIwXCIpYCkuXG4gICAgICAgICAgICBpZiAoZ2V0Q2xhc3MuY2FsbCh2YWx1ZSkgPT0gYXJyYXlDbGFzcykge1xuICAgICAgICAgICAgICBmb3IgKGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgbGVuZ3RoLS07KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGdldENsYXNzLCBmb3JPd24sIHZhbHVlLCBsZW5ndGgsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yT3duKHZhbHVlLCBmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUodmFsdWUsIHByb3BlcnR5LCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChzb3VyY2UsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUHVibGljOiBgSlNPTi5wYXJzZWAuIFNlZSBFUyA1LjEgc2VjdGlvbiAxNS4xMi4yLlxuICAgICAgICBleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICB2YXIgcmVzdWx0LCB2YWx1ZTtcbiAgICAgICAgICBJbmRleCA9IDA7XG4gICAgICAgICAgU291cmNlID0gXCJcIiArIHNvdXJjZTtcbiAgICAgICAgICByZXN1bHQgPSBnZXQobGV4KCkpO1xuICAgICAgICAgIC8vIElmIGEgSlNPTiBzdHJpbmcgY29udGFpbnMgbXVsdGlwbGUgdG9rZW5zLCBpdCBpcyBpbnZhbGlkLlxuICAgICAgICAgIGlmIChsZXgoKSAhPSBcIiRcIikge1xuICAgICAgICAgICAgYWJvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHBhcnNlciBzdGF0ZS5cbiAgICAgICAgICBJbmRleCA9IFNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGdldENsYXNzLmNhbGwoY2FsbGJhY2spID09IGZ1bmN0aW9uQ2xhc3MgPyB3YWxrKCh2YWx1ZSA9IHt9LCB2YWx1ZVtcIlwiXSA9IHJlc3VsdCwgdmFsdWUpLCBcIlwiLCBjYWxsYmFjaykgOiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0cy5ydW5JbkNvbnRleHQgPSBydW5JbkNvbnRleHQ7XG4gICAgcmV0dXJuIGV4cG9ydHM7XG4gIH1cblxuICBpZiAoZnJlZUV4cG9ydHMgJiYgIWlzTG9hZGVyKSB7XG4gICAgLy8gRXhwb3J0IGZvciBDb21tb25KUyBlbnZpcm9ubWVudHMuXG4gICAgcnVuSW5Db250ZXh0KHJvb3QsIGZyZWVFeHBvcnRzKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBFeHBvcnQgZm9yIHdlYiBicm93c2VycyBhbmQgSmF2YVNjcmlwdCBlbmdpbmVzLlxuICAgIHZhciBuYXRpdmVKU09OID0gcm9vdC5KU09OLFxuICAgICAgICBwcmV2aW91c0pTT04gPSByb290LkpTT04zLFxuICAgICAgICBpc1Jlc3RvcmVkID0gZmFsc2U7XG5cbiAgICB2YXIgSlNPTjMgPSBydW5JbkNvbnRleHQocm9vdCwgKHJvb3QuSlNPTjMgPSB7XG4gICAgICAvLyBQdWJsaWM6IFJlc3RvcmVzIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgZ2xvYmFsIGBKU09OYCBvYmplY3QgYW5kXG4gICAgICAvLyByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBgSlNPTjNgIG9iamVjdC5cbiAgICAgIFwibm9Db25mbGljdFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNSZXN0b3JlZCkge1xuICAgICAgICAgIGlzUmVzdG9yZWQgPSB0cnVlO1xuICAgICAgICAgIHJvb3QuSlNPTiA9IG5hdGl2ZUpTT047XG4gICAgICAgICAgcm9vdC5KU09OMyA9IHByZXZpb3VzSlNPTjtcbiAgICAgICAgICBuYXRpdmVKU09OID0gcHJldmlvdXNKU09OID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTjM7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgcm9vdC5KU09OID0ge1xuICAgICAgXCJwYXJzZVwiOiBKU09OMy5wYXJzZSxcbiAgICAgIFwic3RyaW5naWZ5XCI6IEpTT04zLnN0cmluZ2lmeVxuICAgIH07XG4gIH1cblxuICAvLyBFeHBvcnQgZm9yIGFzeW5jaHJvbm91cyBtb2R1bGUgbG9hZGVycy5cbiAgaWYgKGlzTG9hZGVyKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBKU09OMztcbiAgICB9KTtcbiAgfVxufSkuY2FsbCh0aGlzKTtcblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG5cbn0se31dLDU5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCB1bmRlZjtcblxuLyoqXG4gKiBEZWNvZGUgYSBVUkkgZW5jb2RlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBVUkkgZW5jb2RlZCBzdHJpbmcuXG4gKiBAcmV0dXJucyB7U3RyaW5nfE51bGx9IFRoZSBkZWNvZGVkIHN0cmluZy5cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGlucHV0LnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5jb2RlIGEgZ2l2ZW4gaW5wdXQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgdGhhdCBuZWVkcyB0byBiZSBlbmNvZGVkLlxuICogQHJldHVybnMge1N0cmluZ3xOdWxsfSBUaGUgZW5jb2RlZCBzdHJpbmcuXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFNpbXBsZSBxdWVyeSBzdHJpbmcgcGFyc2VyLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBxdWVyeSBUaGUgcXVlcnkgc3RyaW5nIHRoYXQgbmVlZHMgdG8gYmUgcGFyc2VkLlxuICogQHJldHVybnMge09iamVjdH1cbiAqIEBhcGkgcHVibGljXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5KSB7XG4gIHZhciBwYXJzZXIgPSAvKFtePT8mXSspPT8oW14mXSopL2dcbiAgICAsIHJlc3VsdCA9IHt9XG4gICAgLCBwYXJ0O1xuXG4gIHdoaWxlIChwYXJ0ID0gcGFyc2VyLmV4ZWMocXVlcnkpKSB7XG4gICAgdmFyIGtleSA9IGRlY29kZShwYXJ0WzFdKVxuICAgICAgLCB2YWx1ZSA9IGRlY29kZShwYXJ0WzJdKTtcblxuICAgIC8vXG4gICAgLy8gUHJldmVudCBvdmVycmlkaW5nIG9mIGV4aXN0aW5nIHByb3BlcnRpZXMuIFRoaXMgZW5zdXJlcyB0aGF0IGJ1aWxkLWluXG4gICAgLy8gbWV0aG9kcyBsaWtlIGB0b1N0cmluZ2Agb3IgX19wcm90b19fIGFyZSBub3Qgb3ZlcnJpZGVuIGJ5IG1hbGljaW91c1xuICAgIC8vIHF1ZXJ5c3RyaW5ncy5cbiAgICAvL1xuICAgIC8vIEluIHRoZSBjYXNlIGlmIGZhaWxlZCBkZWNvZGluZywgd2Ugd2FudCB0byBvbWl0IHRoZSBrZXkvdmFsdWUgcGFpcnNcbiAgICAvLyBmcm9tIHRoZSByZXN1bHQuXG4gICAgLy9cbiAgICBpZiAoa2V5ID09PSBudWxsIHx8IHZhbHVlID09PSBudWxsIHx8IGtleSBpbiByZXN1bHQpIGNvbnRpbnVlO1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSBhIHF1ZXJ5IHN0cmluZyB0byBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBPYmplY3QgdGhhdCBzaG91bGQgYmUgdHJhbnNmb3JtZWQuXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJlZml4IE9wdGlvbmFsIHByZWZpeC5cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5mdW5jdGlvbiBxdWVyeXN0cmluZ2lmeShvYmosIHByZWZpeCkge1xuICBwcmVmaXggPSBwcmVmaXggfHwgJyc7XG5cbiAgdmFyIHBhaXJzID0gW11cbiAgICAsIHZhbHVlXG4gICAgLCBrZXk7XG5cbiAgLy9cbiAgLy8gT3B0aW9uYWxseSBwcmVmaXggd2l0aCBhICc/JyBpZiBuZWVkZWRcbiAgLy9cbiAgaWYgKCdzdHJpbmcnICE9PSB0eXBlb2YgcHJlZml4KSBwcmVmaXggPSAnPyc7XG5cbiAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhcy5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgdmFsdWUgPSBvYmpba2V5XTtcblxuICAgICAgLy9cbiAgICAgIC8vIEVkZ2UgY2FzZXMgd2hlcmUgd2UgYWN0dWFsbHkgd2FudCB0byBlbmNvZGUgdGhlIHZhbHVlIHRvIGFuIGVtcHR5XG4gICAgICAvLyBzdHJpbmcgaW5zdGVhZCBvZiB0aGUgc3RyaW5naWZpZWQgdmFsdWUuXG4gICAgICAvL1xuICAgICAgaWYgKCF2YWx1ZSAmJiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmIHx8IGlzTmFOKHZhbHVlKSkpIHtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cblxuICAgICAga2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG5cbiAgICAgIC8vXG4gICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gZW5jb2RlIHRoZSBzdHJpbmdzLCB3ZSBzaG91bGQgYmFpbCBvdXQgYXMgd2UgZG9uJ3RcbiAgICAgIC8vIHdhbnQgdG8gYWRkIGludmFsaWQgc3RyaW5ncyB0byB0aGUgcXVlcnkuXG4gICAgICAvL1xuICAgICAgaWYgKGtleSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gbnVsbCkgY29udGludWU7XG4gICAgICBwYWlycy5wdXNoKGtleSArJz0nKyB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhaXJzLmxlbmd0aCA/IHByZWZpeCArIHBhaXJzLmpvaW4oJyYnKSA6ICcnO1xufVxuXG4vL1xuLy8gRXhwb3NlIHRoZSBtb2R1bGUuXG4vL1xuZXhwb3J0cy5zdHJpbmdpZnkgPSBxdWVyeXN0cmluZ2lmeTtcbmV4cG9ydHMucGFyc2UgPSBxdWVyeXN0cmluZztcblxufSx7fV0sNjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENoZWNrIGlmIHdlJ3JlIHJlcXVpcmVkIHRvIGFkZCBhIHBvcnQgbnVtYmVyLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkZWZhdWx0LXBvcnRcbiAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gcG9ydCBQb3J0IG51bWJlciB3ZSBuZWVkIHRvIGNoZWNrXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2wgUHJvdG9jb2wgd2UgbmVlZCB0byBjaGVjayBhZ2FpbnN0LlxuICogQHJldHVybnMge0Jvb2xlYW59IElzIGl0IGEgZGVmYXVsdCBwb3J0IGZvciB0aGUgZ2l2ZW4gcHJvdG9jb2xcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlcXVpcmVkKHBvcnQsIHByb3RvY29sKSB7XG4gIHByb3RvY29sID0gcHJvdG9jb2wuc3BsaXQoJzonKVswXTtcbiAgcG9ydCA9ICtwb3J0O1xuXG4gIGlmICghcG9ydCkgcmV0dXJuIGZhbHNlO1xuXG4gIHN3aXRjaCAocHJvdG9jb2wpIHtcbiAgICBjYXNlICdodHRwJzpcbiAgICBjYXNlICd3cyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDgwO1xuXG4gICAgY2FzZSAnaHR0cHMnOlxuICAgIGNhc2UgJ3dzcyc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDQ0MztcblxuICAgIGNhc2UgJ2Z0cCc6XG4gICAgcmV0dXJuIHBvcnQgIT09IDIxO1xuXG4gICAgY2FzZSAnZ29waGVyJzpcbiAgICByZXR1cm4gcG9ydCAhPT0gNzA7XG5cbiAgICBjYXNlICdmaWxlJzpcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gcG9ydCAhPT0gMDtcbn07XG5cbn0se31dLDYxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIHJlcXVpcmVkID0gcmVxdWlyZSgncmVxdWlyZXMtcG9ydCcpXG4gICwgcXMgPSByZXF1aXJlKCdxdWVyeXN0cmluZ2lmeScpXG4gICwgc2xhc2hlcyA9IC9eW0EtWmEtel1bQS1aYS16MC05Ky0uXSo6XFwvXFwvL1xuICAsIHByb3RvY29scmUgPSAvXihbYS16XVthLXowLTkuKy1dKjopPyhcXC9cXC8pPyhbXFxTXFxzXSopL2lcbiAgLCB3aGl0ZXNwYWNlID0gJ1tcXFxceDA5XFxcXHgwQVxcXFx4MEJcXFxceDBDXFxcXHgwRFxcXFx4MjBcXFxceEEwXFxcXHUxNjgwXFxcXHUxODBFXFxcXHUyMDAwXFxcXHUyMDAxXFxcXHUyMDAyXFxcXHUyMDAzXFxcXHUyMDA0XFxcXHUyMDA1XFxcXHUyMDA2XFxcXHUyMDA3XFxcXHUyMDA4XFxcXHUyMDA5XFxcXHUyMDBBXFxcXHUyMDJGXFxcXHUyMDVGXFxcXHUzMDAwXFxcXHUyMDI4XFxcXHUyMDI5XFxcXHVGRUZGXSdcbiAgLCBsZWZ0ID0gbmV3IFJlZ0V4cCgnXicrIHdoaXRlc3BhY2UgKycrJyk7XG5cbi8qKlxuICogVHJpbSBhIGdpdmVuIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB0byB0cmltLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiB0cmltTGVmdChzdHIpIHtcbiAgcmV0dXJuIChzdHIgPyBzdHIgOiAnJykudG9TdHJpbmcoKS5yZXBsYWNlKGxlZnQsICcnKTtcbn1cblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHBhcnNlIHJ1bGVzIGZvciB0aGUgVVJMIHBhcnNlciwgaXQgaW5mb3JtcyB0aGUgcGFyc2VyXG4gKiBhYm91dDpcbiAqXG4gKiAwLiBUaGUgY2hhciBpdCBOZWVkcyB0byBwYXJzZSwgaWYgaXQncyBhIHN0cmluZyBpdCBzaG91bGQgYmUgZG9uZSB1c2luZ1xuICogICAgaW5kZXhPZiwgUmVnRXhwIHVzaW5nIGV4ZWMgYW5kIE5hTiBtZWFucyBzZXQgYXMgY3VycmVudCB2YWx1ZS5cbiAqIDEuIFRoZSBwcm9wZXJ0eSB3ZSBzaG91bGQgc2V0IHdoZW4gcGFyc2luZyB0aGlzIHZhbHVlLlxuICogMi4gSW5kaWNhdGlvbiBpZiBpdCdzIGJhY2t3YXJkcyBvciBmb3J3YXJkIHBhcnNpbmcsIHdoZW4gc2V0IGFzIG51bWJlciBpdCdzXG4gKiAgICB0aGUgdmFsdWUgb2YgZXh0cmEgY2hhcnMgdGhhdCBzaG91bGQgYmUgc3BsaXQgb2ZmLlxuICogMy4gSW5oZXJpdCBmcm9tIGxvY2F0aW9uIGlmIG5vbiBleGlzdGluZyBpbiB0aGUgcGFyc2VyLlxuICogNC4gYHRvTG93ZXJDYXNlYCB0aGUgcmVzdWx0aW5nIHZhbHVlLlxuICovXG52YXIgcnVsZXMgPSBbXG4gIFsnIycsICdoYXNoJ10sICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBiYWNrLlxuICBbJz8nLCAncXVlcnknXSwgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgZnJvbSB0aGUgYmFjay5cbiAgZnVuY3Rpb24gc2FuaXRpemUoYWRkcmVzcykgeyAgICAgICAgICAvLyBTYW5pdGl6ZSB3aGF0IGlzIGxlZnQgb2YgdGhlIGFkZHJlc3NcbiAgICByZXR1cm4gYWRkcmVzcy5yZXBsYWNlKCdcXFxcJywgJy8nKTtcbiAgfSxcbiAgWycvJywgJ3BhdGhuYW1lJ10sICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGZyb20gdGhlIGJhY2suXG4gIFsnQCcsICdhdXRoJywgMV0sICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBmcm9tIHRoZSBmcm9udC5cbiAgW05hTiwgJ2hvc3QnLCB1bmRlZmluZWQsIDEsIDFdLCAgICAgICAvLyBTZXQgbGVmdCBvdmVyIHZhbHVlLlxuICBbLzooXFxkKykkLywgJ3BvcnQnLCB1bmRlZmluZWQsIDFdLCAgICAvLyBSZWdFeHAgdGhlIGJhY2suXG4gIFtOYU4sICdob3N0bmFtZScsIHVuZGVmaW5lZCwgMSwgMV0gICAgLy8gU2V0IGxlZnQgb3Zlci5cbl07XG5cbi8qKlxuICogVGhlc2UgcHJvcGVydGllcyBzaG91bGQgbm90IGJlIGNvcGllZCBvciBpbmhlcml0ZWQgZnJvbS4gVGhpcyBpcyBvbmx5IG5lZWRlZFxuICogZm9yIGFsbCBub24gYmxvYiBVUkwncyBhcyBhIGJsb2IgVVJMIGRvZXMgbm90IGluY2x1ZGUgYSBoYXNoLCBvbmx5IHRoZVxuICogb3JpZ2luLlxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgaWdub3JlID0geyBoYXNoOiAxLCBxdWVyeTogMSB9O1xuXG4vKipcbiAqIFRoZSBsb2NhdGlvbiBvYmplY3QgZGlmZmVycyB3aGVuIHlvdXIgY29kZSBpcyBsb2FkZWQgdGhyb3VnaCBhIG5vcm1hbCBwYWdlLFxuICogV29ya2VyIG9yIHRocm91Z2ggYSB3b3JrZXIgdXNpbmcgYSBibG9iLiBBbmQgd2l0aCB0aGUgYmxvYmJsZSBiZWdpbnMgdGhlXG4gKiB0cm91YmxlIGFzIHRoZSBsb2NhdGlvbiBvYmplY3Qgd2lsbCBjb250YWluIHRoZSBVUkwgb2YgdGhlIGJsb2IsIG5vdCB0aGVcbiAqIGxvY2F0aW9uIG9mIHRoZSBwYWdlIHdoZXJlIG91ciBjb2RlIGlzIGxvYWRlZCBpbi4gVGhlIGFjdHVhbCBvcmlnaW4gaXNcbiAqIGVuY29kZWQgaW4gdGhlIGBwYXRobmFtZWAgc28gd2UgY2FuIHRoYW5rZnVsbHkgZ2VuZXJhdGUgYSBnb29kIFwiZGVmYXVsdFwiXG4gKiBsb2NhdGlvbiBmcm9tIGl0IHNvIHdlIGNhbiBnZW5lcmF0ZSBwcm9wZXIgcmVsYXRpdmUgVVJMJ3MgYWdhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBsb2MgT3B0aW9uYWwgZGVmYXVsdCBsb2NhdGlvbiBvYmplY3QuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBsb2xjYXRpb24gb2JqZWN0LlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBsb2xjYXRpb24obG9jKSB7XG4gIHZhciBnbG9iYWxWYXI7XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSBnbG9iYWxWYXIgPSB3aW5kb3c7XG4gIGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSBnbG9iYWxWYXIgPSBnbG9iYWw7XG4gIGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykgZ2xvYmFsVmFyID0gc2VsZjtcbiAgZWxzZSBnbG9iYWxWYXIgPSB7fTtcblxuICB2YXIgbG9jYXRpb24gPSBnbG9iYWxWYXIubG9jYXRpb24gfHwge307XG4gIGxvYyA9IGxvYyB8fCBsb2NhdGlvbjtcblxuICB2YXIgZmluYWxkZXN0aW5hdGlvbiA9IHt9XG4gICAgLCB0eXBlID0gdHlwZW9mIGxvY1xuICAgICwga2V5O1xuXG4gIGlmICgnYmxvYjonID09PSBsb2MucHJvdG9jb2wpIHtcbiAgICBmaW5hbGRlc3RpbmF0aW9uID0gbmV3IFVybCh1bmVzY2FwZShsb2MucGF0aG5hbWUpLCB7fSk7XG4gIH0gZWxzZSBpZiAoJ3N0cmluZycgPT09IHR5cGUpIHtcbiAgICBmaW5hbGRlc3RpbmF0aW9uID0gbmV3IFVybChsb2MsIHt9KTtcbiAgICBmb3IgKGtleSBpbiBpZ25vcmUpIGRlbGV0ZSBmaW5hbGRlc3RpbmF0aW9uW2tleV07XG4gIH0gZWxzZSBpZiAoJ29iamVjdCcgPT09IHR5cGUpIHtcbiAgICBmb3IgKGtleSBpbiBsb2MpIHtcbiAgICAgIGlmIChrZXkgaW4gaWdub3JlKSBjb250aW51ZTtcbiAgICAgIGZpbmFsZGVzdGluYXRpb25ba2V5XSA9IGxvY1trZXldO1xuICAgIH1cblxuICAgIGlmIChmaW5hbGRlc3RpbmF0aW9uLnNsYXNoZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZmluYWxkZXN0aW5hdGlvbi5zbGFzaGVzID0gc2xhc2hlcy50ZXN0KGxvYy5ocmVmKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmluYWxkZXN0aW5hdGlvbjtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiBQcm90b2NvbEV4dHJhY3RcbiAqIEB0eXBlIE9iamVjdFxuICogQHByb3BlcnR5IHtTdHJpbmd9IHByb3RvY29sIFByb3RvY29sIG1hdGNoZWQgaW4gdGhlIFVSTCwgaW4gbG93ZXJjYXNlLlxuICogQHByb3BlcnR5IHtCb29sZWFufSBzbGFzaGVzIGB0cnVlYCBpZiBwcm90b2NvbCBpcyBmb2xsb3dlZCBieSBcIi8vXCIsIGVsc2UgYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSByZXN0IFJlc3Qgb2YgdGhlIFVSTCB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbC5cbiAqL1xuXG4vKipcbiAqIEV4dHJhY3QgcHJvdG9jb2wgaW5mb3JtYXRpb24gZnJvbSBhIFVSTCB3aXRoL3dpdGhvdXQgZG91YmxlIHNsYXNoIChcIi8vXCIpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhZGRyZXNzIFVSTCB3ZSB3YW50IHRvIGV4dHJhY3QgZnJvbS5cbiAqIEByZXR1cm4ge1Byb3RvY29sRXh0cmFjdH0gRXh0cmFjdGVkIGluZm9ybWF0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MpIHtcbiAgYWRkcmVzcyA9IHRyaW1MZWZ0KGFkZHJlc3MpO1xuICB2YXIgbWF0Y2ggPSBwcm90b2NvbHJlLmV4ZWMoYWRkcmVzcyk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm90b2NvbDogbWF0Y2hbMV0gPyBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpIDogJycsXG4gICAgc2xhc2hlczogISFtYXRjaFsyXSxcbiAgICByZXN0OiBtYXRjaFszXVxuICB9O1xufVxuXG4vKipcbiAqIFJlc29sdmUgYSByZWxhdGl2ZSBVUkwgcGF0aG5hbWUgYWdhaW5zdCBhIGJhc2UgVVJMIHBhdGhuYW1lLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZSBQYXRobmFtZSBvZiB0aGUgcmVsYXRpdmUgVVJMLlxuICogQHBhcmFtIHtTdHJpbmd9IGJhc2UgUGF0aG5hbWUgb2YgdGhlIGJhc2UgVVJMLlxuICogQHJldHVybiB7U3RyaW5nfSBSZXNvbHZlZCBwYXRobmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmUocmVsYXRpdmUsIGJhc2UpIHtcbiAgaWYgKHJlbGF0aXZlID09PSAnJykgcmV0dXJuIGJhc2U7XG5cbiAgdmFyIHBhdGggPSAoYmFzZSB8fCAnLycpLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpLmNvbmNhdChyZWxhdGl2ZS5zcGxpdCgnLycpKVxuICAgICwgaSA9IHBhdGgubGVuZ3RoXG4gICAgLCBsYXN0ID0gcGF0aFtpIC0gMV1cbiAgICAsIHVuc2hpZnQgPSBmYWxzZVxuICAgICwgdXAgPSAwO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAocGF0aFtpXSA9PT0gJy4nKSB7XG4gICAgICBwYXRoLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKHBhdGhbaV0gPT09ICcuLicpIHtcbiAgICAgIHBhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBpZiAoaSA9PT0gMCkgdW5zaGlmdCA9IHRydWU7XG4gICAgICBwYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgaWYgKHVuc2hpZnQpIHBhdGgudW5zaGlmdCgnJyk7XG4gIGlmIChsYXN0ID09PSAnLicgfHwgbGFzdCA9PT0gJy4uJykgcGF0aC5wdXNoKCcnKTtcblxuICByZXR1cm4gcGF0aC5qb2luKCcvJyk7XG59XG5cbi8qKlxuICogVGhlIGFjdHVhbCBVUkwgaW5zdGFuY2UuIEluc3RlYWQgb2YgcmV0dXJuaW5nIGFuIG9iamVjdCB3ZSd2ZSBvcHRlZC1pbiB0b1xuICogY3JlYXRlIGFuIGFjdHVhbCBjb25zdHJ1Y3RvciBhcyBpdCdzIG11Y2ggbW9yZSBtZW1vcnkgZWZmaWNpZW50IGFuZFxuICogZmFzdGVyIGFuZCBpdCBwbGVhc2VzIG15IE9DRC5cbiAqXG4gKiBJdCBpcyB3b3J0aCBub3RpbmcgdGhhdCB3ZSBzaG91bGQgbm90IHVzZSBgVVJMYCBhcyBjbGFzcyBuYW1lIHRvIHByZXZlbnRcbiAqIGNsYXNoZXMgd2l0aCB0aGUgZ2xvYmFsIFVSTCBpbnN0YW5jZSB0aGF0IGdvdCBpbnRyb2R1Y2VkIGluIGJyb3dzZXJzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3MgVVJMIHdlIHdhbnQgdG8gcGFyc2UuXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IFtsb2NhdGlvbl0gTG9jYXRpb24gZGVmYXVsdHMgZm9yIHJlbGF0aXZlIHBhdGhzLlxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSBbcGFyc2VyXSBQYXJzZXIgZm9yIHRoZSBxdWVyeSBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBVcmwoYWRkcmVzcywgbG9jYXRpb24sIHBhcnNlcikge1xuICBhZGRyZXNzID0gdHJpbUxlZnQoYWRkcmVzcyk7XG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVybCkpIHtcbiAgICByZXR1cm4gbmV3IFVybChhZGRyZXNzLCBsb2NhdGlvbiwgcGFyc2VyKTtcbiAgfVxuXG4gIHZhciByZWxhdGl2ZSwgZXh0cmFjdGVkLCBwYXJzZSwgaW5zdHJ1Y3Rpb24sIGluZGV4LCBrZXlcbiAgICAsIGluc3RydWN0aW9ucyA9IHJ1bGVzLnNsaWNlKClcbiAgICAsIHR5cGUgPSB0eXBlb2YgbG9jYXRpb25cbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIGkgPSAwO1xuXG4gIC8vXG4gIC8vIFRoZSBmb2xsb3dpbmcgaWYgc3RhdGVtZW50cyBhbGxvd3MgdGhpcyBtb2R1bGUgdHdvIGhhdmUgY29tcGF0aWJpbGl0eSB3aXRoXG4gIC8vIDIgZGlmZmVyZW50IEFQSTpcbiAgLy9cbiAgLy8gMS4gTm9kZS5qcydzIGB1cmwucGFyc2VgIGFwaSB3aGljaCBhY2NlcHRzIGEgVVJMLCBib29sZWFuIGFzIGFyZ3VtZW50c1xuICAvLyAgICB3aGVyZSB0aGUgYm9vbGVhbiBpbmRpY2F0ZXMgdGhhdCB0aGUgcXVlcnkgc3RyaW5nIHNob3VsZCBhbHNvIGJlIHBhcnNlZC5cbiAgLy9cbiAgLy8gMi4gVGhlIGBVUkxgIGludGVyZmFjZSBvZiB0aGUgYnJvd3NlciB3aGljaCBhY2NlcHRzIGEgVVJMLCBvYmplY3QgYXNcbiAgLy8gICAgYXJndW1lbnRzLiBUaGUgc3VwcGxpZWQgb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyBkZWZhdWx0IHZhbHVlcyAvIGZhbGwtYmFja1xuICAvLyAgICBmb3IgcmVsYXRpdmUgcGF0aHMuXG4gIC8vXG4gIGlmICgnb2JqZWN0JyAhPT0gdHlwZSAmJiAnc3RyaW5nJyAhPT0gdHlwZSkge1xuICAgIHBhcnNlciA9IGxvY2F0aW9uO1xuICAgIGxvY2F0aW9uID0gbnVsbDtcbiAgfVxuXG4gIGlmIChwYXJzZXIgJiYgJ2Z1bmN0aW9uJyAhPT0gdHlwZW9mIHBhcnNlcikgcGFyc2VyID0gcXMucGFyc2U7XG5cbiAgbG9jYXRpb24gPSBsb2xjYXRpb24obG9jYXRpb24pO1xuXG4gIC8vXG4gIC8vIEV4dHJhY3QgcHJvdG9jb2wgaW5mb3JtYXRpb24gYmVmb3JlIHJ1bm5pbmcgdGhlIGluc3RydWN0aW9ucy5cbiAgLy9cbiAgZXh0cmFjdGVkID0gZXh0cmFjdFByb3RvY29sKGFkZHJlc3MgfHwgJycpO1xuICByZWxhdGl2ZSA9ICFleHRyYWN0ZWQucHJvdG9jb2wgJiYgIWV4dHJhY3RlZC5zbGFzaGVzO1xuICB1cmwuc2xhc2hlcyA9IGV4dHJhY3RlZC5zbGFzaGVzIHx8IHJlbGF0aXZlICYmIGxvY2F0aW9uLnNsYXNoZXM7XG4gIHVybC5wcm90b2NvbCA9IGV4dHJhY3RlZC5wcm90b2NvbCB8fCBsb2NhdGlvbi5wcm90b2NvbCB8fCAnJztcbiAgYWRkcmVzcyA9IGV4dHJhY3RlZC5yZXN0O1xuXG4gIC8vXG4gIC8vIFdoZW4gdGhlIGF1dGhvcml0eSBjb21wb25lbnQgaXMgYWJzZW50IHRoZSBVUkwgc3RhcnRzIHdpdGggYSBwYXRoXG4gIC8vIGNvbXBvbmVudC5cbiAgLy9cbiAgaWYgKCFleHRyYWN0ZWQuc2xhc2hlcykgaW5zdHJ1Y3Rpb25zWzNdID0gWy8oLiopLywgJ3BhdGhuYW1lJ107XG5cbiAgZm9yICg7IGkgPCBpbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uc1tpXTtcblxuICAgIGlmICh0eXBlb2YgaW5zdHJ1Y3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFkZHJlc3MgPSBpbnN0cnVjdGlvbihhZGRyZXNzKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHBhcnNlID0gaW5zdHJ1Y3Rpb25bMF07XG4gICAga2V5ID0gaW5zdHJ1Y3Rpb25bMV07XG5cbiAgICBpZiAocGFyc2UgIT09IHBhcnNlKSB7XG4gICAgICB1cmxba2V5XSA9IGFkZHJlc3M7XG4gICAgfSBlbHNlIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHBhcnNlKSB7XG4gICAgICBpZiAofihpbmRleCA9IGFkZHJlc3MuaW5kZXhPZihwYXJzZSkpKSB7XG4gICAgICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIGluc3RydWN0aW9uWzJdKSB7XG4gICAgICAgICAgdXJsW2tleV0gPSBhZGRyZXNzLnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgICBhZGRyZXNzID0gYWRkcmVzcy5zbGljZShpbmRleCArIGluc3RydWN0aW9uWzJdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cmxba2V5XSA9IGFkZHJlc3Muc2xpY2UoaW5kZXgpO1xuICAgICAgICAgIGFkZHJlc3MgPSBhZGRyZXNzLnNsaWNlKDAsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKGluZGV4ID0gcGFyc2UuZXhlYyhhZGRyZXNzKSkpIHtcbiAgICAgIHVybFtrZXldID0gaW5kZXhbMV07XG4gICAgICBhZGRyZXNzID0gYWRkcmVzcy5zbGljZSgwLCBpbmRleC5pbmRleCk7XG4gICAgfVxuXG4gICAgdXJsW2tleV0gPSB1cmxba2V5XSB8fCAoXG4gICAgICByZWxhdGl2ZSAmJiBpbnN0cnVjdGlvblszXSA/IGxvY2F0aW9uW2tleV0gfHwgJycgOiAnJ1xuICAgICk7XG5cbiAgICAvL1xuICAgIC8vIEhvc3RuYW1lLCBob3N0IGFuZCBwcm90b2NvbCBzaG91bGQgYmUgbG93ZXJjYXNlZCBzbyB0aGV5IGNhbiBiZSB1c2VkIHRvXG4gICAgLy8gY3JlYXRlIGEgcHJvcGVyIGBvcmlnaW5gLlxuICAgIC8vXG4gICAgaWYgKGluc3RydWN0aW9uWzRdKSB1cmxba2V5XSA9IHVybFtrZXldLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICAvL1xuICAvLyBBbHNvIHBhcnNlIHRoZSBzdXBwbGllZCBxdWVyeSBzdHJpbmcgaW4gdG8gYW4gb2JqZWN0LiBJZiB3ZSdyZSBzdXBwbGllZFxuICAvLyB3aXRoIGEgY3VzdG9tIHBhcnNlciBhcyBmdW5jdGlvbiB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGJ1aWxkLWluXG4gIC8vIHBhcnNlci5cbiAgLy9cbiAgaWYgKHBhcnNlcikgdXJsLnF1ZXJ5ID0gcGFyc2VyKHVybC5xdWVyeSk7XG5cbiAgLy9cbiAgLy8gSWYgdGhlIFVSTCBpcyByZWxhdGl2ZSwgcmVzb2x2ZSB0aGUgcGF0aG5hbWUgYWdhaW5zdCB0aGUgYmFzZSBVUkwuXG4gIC8vXG4gIGlmIChcbiAgICAgIHJlbGF0aXZlXG4gICAgJiYgbG9jYXRpb24uc2xhc2hlc1xuICAgICYmIHVybC5wYXRobmFtZS5jaGFyQXQoMCkgIT09ICcvJ1xuICAgICYmICh1cmwucGF0aG5hbWUgIT09ICcnIHx8IGxvY2F0aW9uLnBhdGhuYW1lICE9PSAnJylcbiAgKSB7XG4gICAgdXJsLnBhdGhuYW1lID0gcmVzb2x2ZSh1cmwucGF0aG5hbWUsIGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgfVxuXG4gIC8vXG4gIC8vIFdlIHNob3VsZCBub3QgYWRkIHBvcnQgbnVtYmVycyBpZiB0aGV5IGFyZSBhbHJlYWR5IHRoZSBkZWZhdWx0IHBvcnQgbnVtYmVyXG4gIC8vIGZvciBhIGdpdmVuIHByb3RvY29sLiBBcyB0aGUgaG9zdCBhbHNvIGNvbnRhaW5zIHRoZSBwb3J0IG51bWJlciB3ZSdyZSBnb2luZ1xuICAvLyBvdmVycmlkZSBpdCB3aXRoIHRoZSBob3N0bmFtZSB3aGljaCBjb250YWlucyBubyBwb3J0IG51bWJlci5cbiAgLy9cbiAgaWYgKCFyZXF1aXJlZCh1cmwucG9ydCwgdXJsLnByb3RvY29sKSkge1xuICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lO1xuICAgIHVybC5wb3J0ID0gJyc7XG4gIH1cblxuICAvL1xuICAvLyBQYXJzZSBkb3duIHRoZSBgYXV0aGAgZm9yIHRoZSB1c2VybmFtZSBhbmQgcGFzc3dvcmQuXG4gIC8vXG4gIHVybC51c2VybmFtZSA9IHVybC5wYXNzd29yZCA9ICcnO1xuICBpZiAodXJsLmF1dGgpIHtcbiAgICBpbnN0cnVjdGlvbiA9IHVybC5hdXRoLnNwbGl0KCc6Jyk7XG4gICAgdXJsLnVzZXJuYW1lID0gaW5zdHJ1Y3Rpb25bMF0gfHwgJyc7XG4gICAgdXJsLnBhc3N3b3JkID0gaW5zdHJ1Y3Rpb25bMV0gfHwgJyc7XG4gIH1cblxuICB1cmwub3JpZ2luID0gdXJsLnByb3RvY29sICYmIHVybC5ob3N0ICYmIHVybC5wcm90b2NvbCAhPT0gJ2ZpbGU6J1xuICAgID8gdXJsLnByb3RvY29sICsnLy8nKyB1cmwuaG9zdFxuICAgIDogJ251bGwnO1xuXG4gIC8vXG4gIC8vIFRoZSBocmVmIGlzIGp1c3QgdGhlIGNvbXBpbGVkIHJlc3VsdC5cbiAgLy9cbiAgdXJsLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgY2hhbmdpbmcgcHJvcGVydGllcyBpbiB0aGUgVVJMIGluc3RhbmNlIHRvXG4gKiBpbnN1cmUgdGhhdCB0aGV5IGFsbCBwcm9wYWdhdGUgY29ycmVjdGx5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXJ0ICAgICAgICAgIFByb3BlcnR5IHdlIG5lZWQgdG8gYWRqdXN0LlxuICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgICAgICAgICAgVGhlIG5ld2x5IGFzc2lnbmVkIHZhbHVlLlxuICogQHBhcmFtIHtCb29sZWFufEZ1bmN0aW9ufSBmbiAgV2hlbiBzZXR0aW5nIHRoZSBxdWVyeSwgaXQgd2lsbCBiZSB0aGUgZnVuY3Rpb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZWQgdG8gcGFyc2UgdGhlIHF1ZXJ5LlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2hlbiBzZXR0aW5nIHRoZSBwcm90b2NvbCwgZG91YmxlIHNsYXNoIHdpbGwgYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQgZnJvbSB0aGUgZmluYWwgdXJsIGlmIGl0IGlzIHRydWUuXG4gKiBAcmV0dXJucyB7VVJMfSBVUkwgaW5zdGFuY2UgZm9yIGNoYWluaW5nLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBzZXQocGFydCwgdmFsdWUsIGZuKSB7XG4gIHZhciB1cmwgPSB0aGlzO1xuXG4gIHN3aXRjaCAocGFydCkge1xuICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgIGlmICgnc3RyaW5nJyA9PT0gdHlwZW9mIHZhbHVlICYmIHZhbHVlLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZSA9IChmbiB8fCBxcy5wYXJzZSkodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAncG9ydCc6XG4gICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcblxuICAgICAgaWYgKCFyZXF1aXJlZCh2YWx1ZSwgdXJsLnByb3RvY29sKSkge1xuICAgICAgICB1cmwuaG9zdCA9IHVybC5ob3N0bmFtZTtcbiAgICAgICAgdXJsW3BhcnRdID0gJyc7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgIHVybC5ob3N0ID0gdXJsLmhvc3RuYW1lICsnOicrIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2hvc3RuYW1lJzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAodXJsLnBvcnQpIHZhbHVlICs9ICc6JysgdXJsLnBvcnQ7XG4gICAgICB1cmwuaG9zdCA9IHZhbHVlO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdob3N0JzpcbiAgICAgIHVybFtwYXJ0XSA9IHZhbHVlO1xuXG4gICAgICBpZiAoLzpcXGQrJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnOicpO1xuICAgICAgICB1cmwucG9ydCA9IHZhbHVlLnBvcCgpO1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSB2YWx1ZS5qb2luKCc6Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cmwuaG9zdG5hbWUgPSB2YWx1ZTtcbiAgICAgICAgdXJsLnBvcnQgPSAnJztcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdwcm90b2NvbCc6XG4gICAgICB1cmwucHJvdG9jb2wgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdXJsLnNsYXNoZXMgPSAhZm47XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ3BhdGhuYW1lJzpcbiAgICBjYXNlICdoYXNoJzpcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB2YXIgY2hhciA9IHBhcnQgPT09ICdwYXRobmFtZScgPyAnLycgOiAnIyc7XG4gICAgICAgIHVybFtwYXJ0XSA9IHZhbHVlLmNoYXJBdCgwKSAhPT0gY2hhciA/IGNoYXIgKyB2YWx1ZSA6IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsW3BhcnRdID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICB1cmxbcGFydF0gPSB2YWx1ZTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaW5zID0gcnVsZXNbaV07XG5cbiAgICBpZiAoaW5zWzRdKSB1cmxbaW5zWzFdXSA9IHVybFtpbnNbMV1dLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICB1cmwub3JpZ2luID0gdXJsLnByb3RvY29sICYmIHVybC5ob3N0ICYmIHVybC5wcm90b2NvbCAhPT0gJ2ZpbGU6J1xuICAgID8gdXJsLnByb3RvY29sICsnLy8nKyB1cmwuaG9zdFxuICAgIDogJ251bGwnO1xuXG4gIHVybC5ocmVmID0gdXJsLnRvU3RyaW5nKCk7XG5cbiAgcmV0dXJuIHVybDtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIHByb3BlcnRpZXMgYmFjayBpbiB0byBhIHZhbGlkIGFuZCBmdWxsIFVSTCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5naWZ5IE9wdGlvbmFsIHF1ZXJ5IHN0cmluZ2lmeSBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtTdHJpbmd9IENvbXBpbGVkIHZlcnNpb24gb2YgdGhlIFVSTC5cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcoc3RyaW5naWZ5KSB7XG4gIGlmICghc3RyaW5naWZ5IHx8ICdmdW5jdGlvbicgIT09IHR5cGVvZiBzdHJpbmdpZnkpIHN0cmluZ2lmeSA9IHFzLnN0cmluZ2lmeTtcblxuICB2YXIgcXVlcnlcbiAgICAsIHVybCA9IHRoaXNcbiAgICAsIHByb3RvY29sID0gdXJsLnByb3RvY29sO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5jaGFyQXQocHJvdG9jb2wubGVuZ3RoIC0gMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonO1xuXG4gIHZhciByZXN1bHQgPSBwcm90b2NvbCArICh1cmwuc2xhc2hlcyA/ICcvLycgOiAnJyk7XG5cbiAgaWYgKHVybC51c2VybmFtZSkge1xuICAgIHJlc3VsdCArPSB1cmwudXNlcm5hbWU7XG4gICAgaWYgKHVybC5wYXNzd29yZCkgcmVzdWx0ICs9ICc6JysgdXJsLnBhc3N3b3JkO1xuICAgIHJlc3VsdCArPSAnQCc7XG4gIH1cblxuICByZXN1bHQgKz0gdXJsLmhvc3QgKyB1cmwucGF0aG5hbWU7XG5cbiAgcXVlcnkgPSAnb2JqZWN0JyA9PT0gdHlwZW9mIHVybC5xdWVyeSA/IHN0cmluZ2lmeSh1cmwucXVlcnkpIDogdXJsLnF1ZXJ5O1xuICBpZiAocXVlcnkpIHJlc3VsdCArPSAnPycgIT09IHF1ZXJ5LmNoYXJBdCgwKSA/ICc/JysgcXVlcnkgOiBxdWVyeTtcblxuICBpZiAodXJsLmhhc2gpIHJlc3VsdCArPSB1cmwuaGFzaDtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5VcmwucHJvdG90eXBlID0geyBzZXQ6IHNldCwgdG9TdHJpbmc6IHRvU3RyaW5nIH07XG5cbi8vXG4vLyBFeHBvc2UgdGhlIFVSTCBwYXJzZXIgYW5kIHNvbWUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRoYXQgbWlnaHQgYmUgdXNlZnVsIGZvclxuLy8gb3RoZXJzIG9yIHRlc3RpbmcuXG4vL1xuVXJsLmV4dHJhY3RQcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbDtcblVybC5sb2NhdGlvbiA9IGxvbGNhdGlvbjtcblVybC50cmltTGVmdCA9IHRyaW1MZWZ0O1xuVXJsLnFzID0gcXM7XG5cbm1vZHVsZS5leHBvcnRzID0gVXJsO1xuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcblxufSx7XCJxdWVyeXN0cmluZ2lmeVwiOjU5LFwicmVxdWlyZXMtcG9ydFwiOjYwfV19LHt9LFsxXSkoMSlcbn0pO1xuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNvY2tqcy5qcy5tYXBcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwdW55Y29kZSA9IHJlcXVpcmUoJ3B1bnljb2RlJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5leHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5leHBvcnRzLnJlc29sdmUgPSB1cmxSZXNvbHZlO1xuZXhwb3J0cy5yZXNvbHZlT2JqZWN0ID0gdXJsUmVzb2x2ZU9iamVjdDtcbmV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXG5leHBvcnRzLlVybCA9IFVybDtcblxuZnVuY3Rpb24gVXJsKCkge1xuICB0aGlzLnByb3RvY29sID0gbnVsbDtcbiAgdGhpcy5zbGFzaGVzID0gbnVsbDtcbiAgdGhpcy5hdXRoID0gbnVsbDtcbiAgdGhpcy5ob3N0ID0gbnVsbDtcbiAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgdGhpcy5ob3N0bmFtZSA9IG51bGw7XG4gIHRoaXMuaGFzaCA9IG51bGw7XG4gIHRoaXMuc2VhcmNoID0gbnVsbDtcbiAgdGhpcy5xdWVyeSA9IG51bGw7XG4gIHRoaXMucGF0aG5hbWUgPSBudWxsO1xuICB0aGlzLnBhdGggPSBudWxsO1xuICB0aGlzLmhyZWYgPSBudWxsO1xufVxuXG4vLyBSZWZlcmVuY2U6IFJGQyAzOTg2LCBSRkMgMTgwOCwgUkZDIDIzOTZcblxuLy8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcbi8vIGNvbXBpbGVkIG9uY2Ugb24gdGhlIGZpcnN0IG1vZHVsZSBsb2FkLlxudmFyIHByb3RvY29sUGF0dGVybiA9IC9eKFthLXowLTkuKy1dKzopL2ksXG4gICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXG4gICAgLy8gU3BlY2lhbCBjYXNlIGZvciBhIHNpbXBsZSBwYXRoIFVSTFxuICAgIHNpbXBsZVBhdGhQYXR0ZXJuID0gL14oXFwvXFwvPyg/IVxcLylbXlxcP1xcc10qKShcXD9bXlxcc10qKT8kLyxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG4gICAgLy8gV2UgYWN0dWFsbHkganVzdCBhdXRvLWVzY2FwZSB0aGVzZS5cbiAgICBkZWxpbXMgPSBbJzwnLCAnPicsICdcIicsICdgJywgJyAnLCAnXFxyJywgJ1xcbicsICdcXHQnXSxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIG5vdCBhbGxvd2VkIGZvciB2YXJpb3VzIHJlYXNvbnMuXG4gICAgdW53aXNlID0gWyd7JywgJ30nLCAnfCcsICdcXFxcJywgJ14nLCAnYCddLmNvbmNhdChkZWxpbXMpLFxuXG4gICAgLy8gQWxsb3dlZCBieSBSRkNzLCBidXQgY2F1c2Ugb2YgWFNTIGF0dGFja3MuICBBbHdheXMgZXNjYXBlIHRoZXNlLlxuICAgIGF1dG9Fc2NhcGUgPSBbJ1xcJyddLmNvbmNhdCh1bndpc2UpLFxuICAgIC8vIENoYXJhY3RlcnMgdGhhdCBhcmUgbmV2ZXIgZXZlciBhbGxvd2VkIGluIGEgaG9zdG5hbWUuXG4gICAgLy8gTm90ZSB0aGF0IGFueSBpbnZhbGlkIGNoYXJzIGFyZSBhbHNvIGhhbmRsZWQsIGJ1dCB0aGVzZVxuICAgIC8vIGFyZSB0aGUgb25lcyB0aGF0IGFyZSAqZXhwZWN0ZWQqIHRvIGJlIHNlZW4sIHNvIHdlIGZhc3QtcGF0aFxuICAgIC8vIHRoZW0uXG4gICAgbm9uSG9zdENoYXJzID0gWyclJywgJy8nLCAnPycsICc7JywgJyMnXS5jb25jYXQoYXV0b0VzY2FwZSksXG4gICAgaG9zdEVuZGluZ0NoYXJzID0gWycvJywgJz8nLCAnIyddLFxuICAgIGhvc3RuYW1lTWF4TGVuID0gMjU1LFxuICAgIGhvc3RuYW1lUGFydFBhdHRlcm4gPSAvXlsrYS16MC05QS1aXy1dezAsNjN9JC8sXG4gICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgY2FuIGFsbG93IFwidW5zYWZlXCIgYW5kIFwidW53aXNlXCIgY2hhcnMuXG4gICAgdW5zYWZlUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBuZXZlciBoYXZlIGEgaG9zdG5hbWUuXG4gICAgaG9zdGxlc3NQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuICAgIHNsYXNoZWRQcm90b2NvbCA9IHtcbiAgICAgICdodHRwJzogdHJ1ZSxcbiAgICAgICdodHRwcyc6IHRydWUsXG4gICAgICAnZnRwJzogdHJ1ZSxcbiAgICAgICdnb3BoZXInOiB0cnVlLFxuICAgICAgJ2ZpbGUnOiB0cnVlLFxuICAgICAgJ2h0dHA6JzogdHJ1ZSxcbiAgICAgICdodHRwczonOiB0cnVlLFxuICAgICAgJ2Z0cDonOiB0cnVlLFxuICAgICAgJ2dvcGhlcjonOiB0cnVlLFxuICAgICAgJ2ZpbGU6JzogdHJ1ZVxuICAgIH0sXG4gICAgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG5mdW5jdGlvbiB1cmxQYXJzZSh1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7XG4gIGlmICh1cmwgJiYgdXRpbC5pc09iamVjdCh1cmwpICYmIHVybCBpbnN0YW5jZW9mIFVybCkgcmV0dXJuIHVybDtcblxuICB2YXIgdSA9IG5ldyBVcmw7XG4gIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7XG4gIHJldHVybiB1O1xufVxuXG5VcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAoIXV0aWwuaXNTdHJpbmcodXJsKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQYXJhbWV0ZXIgJ3VybCcgbXVzdCBiZSBhIHN0cmluZywgbm90IFwiICsgdHlwZW9mIHVybCk7XG4gIH1cblxuICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci5cbiAgLy8gQmFjayBzbGFzaGVzIGJlZm9yZSB0aGUgcXVlcnkgc3RyaW5nIGdldCBjb252ZXJ0ZWQgdG8gZm9yd2FyZCBzbGFzaGVzXG4gIC8vIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI1OTE2XG4gIHZhciBxdWVyeUluZGV4ID0gdXJsLmluZGV4T2YoJz8nKSxcbiAgICAgIHNwbGl0dGVyID1cbiAgICAgICAgICAocXVlcnlJbmRleCAhPT0gLTEgJiYgcXVlcnlJbmRleCA8IHVybC5pbmRleE9mKCcjJykpID8gJz8nIDogJyMnLFxuICAgICAgdVNwbGl0ID0gdXJsLnNwbGl0KHNwbGl0dGVyKSxcbiAgICAgIHNsYXNoUmVnZXggPSAvXFxcXC9nO1xuICB1U3BsaXRbMF0gPSB1U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCAnLycpO1xuICB1cmwgPSB1U3BsaXQuam9pbihzcGxpdHRlcik7XG5cbiAgdmFyIHJlc3QgPSB1cmw7XG5cbiAgLy8gdHJpbSBiZWZvcmUgcHJvY2VlZGluZy5cbiAgLy8gVGhpcyBpcyB0byBzdXBwb3J0IHBhcnNlIHN0dWZmIGxpa2UgXCIgIGh0dHA6Ly9mb28uY29tICBcXG5cIlxuICByZXN0ID0gcmVzdC50cmltKCk7XG5cbiAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBUcnkgZmFzdCBwYXRoIHJlZ2V4cFxuICAgIHZhciBzaW1wbGVQYXRoID0gc2ltcGxlUGF0aFBhdHRlcm4uZXhlYyhyZXN0KTtcbiAgICBpZiAoc2ltcGxlUGF0aCkge1xuICAgICAgdGhpcy5wYXRoID0gcmVzdDtcbiAgICAgIHRoaXMuaHJlZiA9IHJlc3Q7XG4gICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTtcbiAgICAgIGlmIChzaW1wbGVQYXRoWzJdKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gc2ltcGxlUGF0aFsyXTtcbiAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICAgICAgdGhpcy5xdWVyeSA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb3RvID0gcHJvdG9jb2xQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gIGlmIChwcm90bykge1xuICAgIHByb3RvID0gcHJvdG9bMF07XG4gICAgdmFyIGxvd2VyUHJvdG8gPSBwcm90by50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpO1xuICB9XG5cbiAgLy8gZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3RcbiAgLy8gdXNlckBzZXJ2ZXIgaXMgKmFsd2F5cyogaW50ZXJwcmV0ZWQgYXMgYSBob3N0bmFtZSwgYW5kIHVybFxuICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG4gIC8vIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLlxuICBpZiAoc2xhc2hlc0Rlbm90ZUhvc3QgfHwgcHJvdG8gfHwgcmVzdC5tYXRjaCgvXlxcL1xcL1teQFxcL10rQFteQFxcL10rLykpIHtcbiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7XG4gICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7XG4gICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaG9zdGxlc3NQcm90b2NvbFtwcm90b10gJiZcbiAgICAgIChzbGFzaGVzIHx8IChwcm90byAmJiAhc2xhc2hlZFByb3RvY29sW3Byb3RvXSkpKSB7XG5cbiAgICAvLyB0aGVyZSdzIGEgaG9zdG5hbWUuXG4gICAgLy8gdGhlIGZpcnN0IGluc3RhbmNlIG9mIC8sID8sIDssIG9yICMgZW5kcyB0aGUgaG9zdC5cbiAgICAvL1xuICAgIC8vIElmIHRoZXJlIGlzIGFuIEAgaW4gdGhlIGhvc3RuYW1lLCB0aGVuIG5vbi1ob3N0IGNoYXJzICphcmUqIGFsbG93ZWRcbiAgICAvLyB0byB0aGUgbGVmdCBvZiB0aGUgbGFzdCBAIHNpZ24sIHVubGVzcyBzb21lIGhvc3QtZW5kaW5nIGNoYXJhY3RlclxuICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG4gICAgLy8gVVJMcyBhcmUgb2Jub3hpb3VzLlxuICAgIC8vXG4gICAgLy8gZXg6XG4gICAgLy8gaHR0cDovL2FAYkBjLyA9PiB1c2VyOmFAYiBob3N0OmNcbiAgICAvLyBodHRwOi8vYUBiP0BjID0+IHVzZXI6YSBob3N0OmMgcGF0aDovP0BjXG5cbiAgICAvLyB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuXG4gICAgLy8gUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS5cblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGFueSBob3N0RW5kaW5nQ2hhcnNcbiAgICB2YXIgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKGhvc3RFbmRpbmdDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuXG4gICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG4gICAgLy8gYXV0aCBwb3J0aW9uIGNhbm5vdCBnbyBwYXN0LCBvciB0aGUgbGFzdCBAIGNoYXIgaXMgdGhlIGRlY2lkZXIuXG4gICAgdmFyIGF1dGgsIGF0U2lnbjtcbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIGF0U2lnbiBjYW4gYmUgYW55d2hlcmUuXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGF0U2lnbiBtdXN0IGJlIGluIGF1dGggcG9ydGlvbi5cbiAgICAgIC8vIGh0dHA6Ly9hQGIvY0BkID0+IGhvc3Q6YiBhdXRoOmEgcGF0aDovY0BkXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG4gICAgLy8gUHVsbCB0aGF0IG9mZi5cbiAgICBpZiAoYXRTaWduICE9PSAtMSkge1xuICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcbiAgICAgIHJlc3QgPSByZXN0LnNsaWNlKGF0U2lnbiArIDEpO1xuICAgICAgdGhpcy5hdXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIH1cblxuICAgIC8vIHRoZSBob3N0IGlzIHRoZSByZW1haW5pbmcgdG8gdGhlIGxlZnQgb2YgdGhlIGZpcnN0IG5vbi1ob3N0IGNoYXJcbiAgICBob3N0RW5kID0gLTE7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub25Ib3N0Q2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2Yobm9uSG9zdENoYXJzW2ldKTtcbiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcbiAgICAgICAgaG9zdEVuZCA9IGhlYztcbiAgICB9XG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuICAgIGlmIChob3N0RW5kID09PSAtMSlcbiAgICAgIGhvc3RFbmQgPSByZXN0Lmxlbmd0aDtcblxuICAgIHRoaXMuaG9zdCA9IHJlc3Quc2xpY2UoMCwgaG9zdEVuZCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoaG9zdEVuZCk7XG5cbiAgICAvLyBwdWxsIG91dCBwb3J0LlxuICAgIHRoaXMucGFyc2VIb3N0KCk7XG5cbiAgICAvLyB3ZSd2ZSBpbmRpY2F0ZWQgdGhhdCB0aGVyZSBpcyBhIGhvc3RuYW1lLFxuICAgIC8vIHNvIGV2ZW4gaWYgaXQncyBlbXB0eSwgaXQgaGFzIHRvIGJlIHByZXNlbnQuXG4gICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cbiAgICAvLyBpZiBob3N0bmFtZSBiZWdpbnMgd2l0aCBbIGFuZCBlbmRzIHdpdGggXVxuICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuICAgIHZhciBpcHY2SG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lWzBdID09PSAnWycgJiZcbiAgICAgICAgdGhpcy5ob3N0bmFtZVt0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDFdID09PSAnXSc7XG5cbiAgICAvLyB2YWxpZGF0ZSBhIGxpdHRsZS5cbiAgICBpZiAoIWlwdjZIb3N0bmFtZSkge1xuICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBob3N0cGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gaG9zdHBhcnRzW2ldO1xuICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIXBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICB2YXIgbmV3cGFydCA9ICcnO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNoYXJDb2RlQXQoaikgPiAxMjcpIHtcbiAgICAgICAgICAgICAgLy8gd2UgcmVwbGFjZSBub24tQVNDSUkgY2hhciB3aXRoIGEgdGVtcG9yYXJ5IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3RcbiAgICAgICAgICAgICAgLy8gYnJva2VuIGJ5IHJlcGxhY2luZyBub24tQVNDSUkgYnkgbm90aGluZ1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gcGFydFtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2UgdGVzdCBhZ2FpbiB3aXRoIEFTQ0lJIGNoYXIgb25seVxuICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB2YXIgbm90SG9zdCA9IGhvc3RwYXJ0cy5zbGljZShpICsgMSk7XG4gICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgIHZhbGlkUGFydHMucHVzaChiaXRbMV0pO1xuICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3RIb3N0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ob3N0bmFtZSA9IHZhbGlkUGFydHMuam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIC8vIElETkEgU3VwcG9ydDogUmV0dXJucyBhIHB1bnljb2RlZCByZXByZXNlbnRhdGlvbiBvZiBcImRvbWFpblwiLlxuICAgICAgLy8gSXQgb25seSBjb252ZXJ0cyBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgdGhhdFxuICAgICAgLy8gaGF2ZSBub24tQVNDSUkgY2hhcmFjdGVycywgaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZlxuICAgICAgLy8geW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0IGFscmVhZHkgaXMgQVNDSUktb25seS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSBwdW55Y29kZS50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpO1xuICAgIH1cblxuICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG4gICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuICAgIHRoaXMuaG9zdCA9IGggKyBwO1xuICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cbiAgICAvLyBzdHJpcCBbIGFuZCBdIGZyb20gdGhlIGhvc3RuYW1lXG4gICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcbiAgICBpZiAoaXB2Nkhvc3RuYW1lKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS5zdWJzdHIoMSwgdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcbiAgICAgICAgcmVzdCA9ICcvJyArIHJlc3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG4gIC8vIGNob3Agb2ZmIGFueSBkZWxpbSBjaGFycy5cbiAgaWYgKCF1bnNhZmVQcm90b2NvbFtsb3dlclByb3RvXSkge1xuXG4gICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55IFwiYXV0b0VzY2FwZVwiIGNoYXJzIGdldFxuICAgIC8vIGVzY2FwZWQsIGV2ZW4gaWYgZW5jb2RlVVJJQ29tcG9uZW50IGRvZXNuJ3QgdGhpbmsgdGhleVxuICAgIC8vIG5lZWQgdG8gYmUuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdXRvRXNjYXBlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGFlID0gYXV0b0VzY2FwZVtpXTtcbiAgICAgIGlmIChyZXN0LmluZGV4T2YoYWUpID09PSAtMSlcbiAgICAgICAgY29udGludWU7XG4gICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTtcbiAgICAgIGlmIChlc2MgPT09IGFlKSB7XG4gICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG4gICAgICB9XG4gICAgICByZXN0ID0gcmVzdC5zcGxpdChhZSkuam9pbihlc2MpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gY2hvcCBvZmYgZnJvbSB0aGUgdGFpbCBmaXJzdC5cbiAgdmFyIGhhc2ggPSByZXN0LmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2ggIT09IC0xKSB7XG4gICAgLy8gZ290IGEgZnJhZ21lbnQgc3RyaW5nLlxuICAgIHRoaXMuaGFzaCA9IHJlc3Quc3Vic3RyKGhhc2gpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuICB9XG4gIHZhciBxbSA9IHJlc3QuaW5kZXhPZignPycpO1xuICBpZiAocW0gIT09IC0xKSB7XG4gICAgdGhpcy5zZWFyY2ggPSByZXN0LnN1YnN0cihxbSk7XG4gICAgdGhpcy5xdWVyeSA9IHJlc3Quc3Vic3RyKHFtICsgMSk7XG4gICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnF1ZXJ5KTtcbiAgICB9XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAvLyBubyBxdWVyeSBzdHJpbmcsIGJ1dCBwYXJzZVF1ZXJ5U3RyaW5nIHN0aWxsIHJlcXVlc3RlZFxuICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgdGhpcy5xdWVyeSA9IHt9O1xuICB9XG4gIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcbiAgaWYgKHNsYXNoZWRQcm90b2NvbFtsb3dlclByb3RvXSAmJlxuICAgICAgdGhpcy5ob3N0bmFtZSAmJiAhdGhpcy5wYXRobmFtZSkge1xuICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gIGlmICh0aGlzLnBhdGhuYW1lIHx8IHRoaXMuc2VhcmNoKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhdGhuYW1lIHx8ICcnO1xuICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG4gICAgdGhpcy5wYXRoID0gcCArIHM7XG4gIH1cblxuICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC5cbiAgdGhpcy5ocmVmID0gdGhpcy5mb3JtYXQoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5mdW5jdGlvbiB1cmxGb3JtYXQob2JqKSB7XG4gIC8vIGVuc3VyZSBpdCdzIGFuIG9iamVjdCwgYW5kIG5vdCBhIHN0cmluZyB1cmwuXG4gIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG4gIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGNhbGwgdXJsX2Zvcm1hdCgpIG9uIHN0cmluZ3NcbiAgLy8gdG8gY2xlYW4gdXAgcG90ZW50aWFsbHkgd29ua3kgdXJscy5cbiAgaWYgKHV0aWwuaXNTdHJpbmcob2JqKSkgb2JqID0gdXJsUGFyc2Uob2JqKTtcbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcbiAgcmV0dXJuIG9iai5mb3JtYXQoKTtcbn1cblxuVXJsLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGF1dGggPSB0aGlzLmF1dGggfHwgJyc7XG4gIGlmIChhdXRoKSB7XG4gICAgYXV0aCA9IGVuY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICBhdXRoID0gYXV0aC5yZXBsYWNlKC8lM0EvaSwgJzonKTtcbiAgICBhdXRoICs9ICdAJztcbiAgfVxuXG4gIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG4gICAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsXG4gICAgICBoYXNoID0gdGhpcy5oYXNoIHx8ICcnLFxuICAgICAgaG9zdCA9IGZhbHNlLFxuICAgICAgcXVlcnkgPSAnJztcblxuICBpZiAodGhpcy5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB0aGlzLmhvc3Q7XG4gIH0gZWxzZSBpZiAodGhpcy5ob3N0bmFtZSkge1xuICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG4gICAgICAgIHRoaXMuaG9zdG5hbWUgOlxuICAgICAgICAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nKTtcbiAgICBpZiAodGhpcy5wb3J0KSB7XG4gICAgICBob3N0ICs9ICc6JyArIHRoaXMucG9ydDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5xdWVyeSAmJlxuICAgICAgdXRpbC5pc09iamVjdCh0aGlzLnF1ZXJ5KSAmJlxuICAgICAgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG4gICAgcXVlcnkgPSBxdWVyeXN0cmluZy5zdHJpbmdpZnkodGhpcy5xdWVyeSk7XG4gIH1cblxuICB2YXIgc2VhcmNoID0gdGhpcy5zZWFyY2ggfHwgKHF1ZXJ5ICYmICgnPycgKyBxdWVyeSkpIHx8ICcnO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHByb3RvY29sICs9ICc6JztcblxuICAvLyBvbmx5IHRoZSBzbGFzaGVkUHJvdG9jb2xzIGdldCB0aGUgLy8uICBOb3QgbWFpbHRvOiwgeG1wcDosIGV0Yy5cbiAgLy8gdW5sZXNzIHRoZXkgaGFkIHRoZW0gdG8gYmVnaW4gd2l0aC5cbiAgaWYgKHRoaXMuc2xhc2hlcyB8fFxuICAgICAgKCFwcm90b2NvbCB8fCBzbGFzaGVkUHJvdG9jb2xbcHJvdG9jb2xdKSAmJiBob3N0ICE9PSBmYWxzZSkge1xuICAgIGhvc3QgPSAnLy8nICsgKGhvc3QgfHwgJycpO1xuICAgIGlmIChwYXRobmFtZSAmJiBwYXRobmFtZS5jaGFyQXQoMCkgIT09ICcvJykgcGF0aG5hbWUgPSAnLycgKyBwYXRobmFtZTtcbiAgfSBlbHNlIGlmICghaG9zdCkge1xuICAgIGhvc3QgPSAnJztcbiAgfVxuXG4gIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoO1xuICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09ICc/Jykgc2VhcmNoID0gJz8nICsgc2VhcmNoO1xuXG4gIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQobWF0Y2gpO1xuICB9KTtcbiAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoJyMnLCAnJTIzJyk7XG5cbiAgcmV0dXJuIHByb3RvY29sICsgaG9zdCArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcbn07XG5cbmZ1bmN0aW9uIHVybFJlc29sdmUoc291cmNlLCByZWxhdGl2ZSkge1xuICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7XG59XG5cblVybC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG4gIHJldHVybiB0aGlzLnJlc29sdmVPYmplY3QodXJsUGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKSkuZm9ybWF0KCk7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlT2JqZWN0KHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgaWYgKCFzb3VyY2UpIHJldHVybiByZWxhdGl2ZTtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICBpZiAodXRpbC5pc1N0cmluZyhyZWxhdGl2ZSkpIHtcbiAgICB2YXIgcmVsID0gbmV3IFVybCgpO1xuICAgIHJlbC5wYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpO1xuICAgIHJlbGF0aXZlID0gcmVsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcbiAgdmFyIHRrZXlzID0gT2JqZWN0LmtleXModGhpcyk7XG4gIGZvciAodmFyIHRrID0gMDsgdGsgPCB0a2V5cy5sZW5ndGg7IHRrKyspIHtcbiAgICB2YXIgdGtleSA9IHRrZXlzW3RrXTtcbiAgICByZXN1bHRbdGtleV0gPSB0aGlzW3RrZXldO1xuICB9XG5cbiAgLy8gaGFzaCBpcyBhbHdheXMgb3ZlcnJpZGRlbiwgbm8gbWF0dGVyIHdoYXQuXG4gIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuICByZXN1bHQuaGFzaCA9IHJlbGF0aXZlLmhhc2g7XG5cbiAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuICBpZiAocmVsYXRpdmUuaHJlZiA9PT0gJycpIHtcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG4gIGlmIChyZWxhdGl2ZS5zbGFzaGVzICYmICFyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgIC8vIHRha2UgZXZlcnl0aGluZyBleGNlcHQgdGhlIHByb3RvY29sIGZyb20gcmVsYXRpdmVcbiAgICB2YXIgcmtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7XG4gICAgZm9yICh2YXIgcmsgPSAwOyByayA8IHJrZXlzLmxlbmd0aDsgcmsrKykge1xuICAgICAgdmFyIHJrZXkgPSBya2V5c1tya107XG4gICAgICBpZiAocmtleSAhPT0gJ3Byb3RvY29sJylcbiAgICAgICAgcmVzdWx0W3JrZXldID0gcmVsYXRpdmVbcmtleV07XG4gICAgfVxuXG4gICAgLy91cmxQYXJzZSBhcHBlbmRzIHRyYWlsaW5nIC8gdG8gdXJscyBsaWtlIGh0dHA6Ly93d3cuZXhhbXBsZS5jb21cbiAgICBpZiAoc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF0gJiZcbiAgICAgICAgcmVzdWx0Lmhvc3RuYW1lICYmICFyZXN1bHQucGF0aG5hbWUpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gcmVzdWx0LnBhdGhuYW1lID0gJy8nO1xuICAgIH1cblxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAocmVsYXRpdmUucHJvdG9jb2wgJiYgcmVsYXRpdmUucHJvdG9jb2wgIT09IHJlc3VsdC5wcm90b2NvbCkge1xuICAgIC8vIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmdcbiAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3NcbiAgICAvLyBmaXJzdCwgaWYgaXQncyBub3QgZmlsZTosIHRoZW4gd2UgTVVTVCBoYXZlIGEgaG9zdCxcbiAgICAvLyBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aFxuICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cbiAgICAvLyBpZiBpdCBpcyBmaWxlOiwgdGhlbiB0aGUgaG9zdCBpcyBkcm9wcGVkLFxuICAgIC8vIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLlxuICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cbiAgICBpZiAoIXNsYXNoZWRQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIHZhciBrID0ga2V5c1t2XTtcbiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG4gICAgICB9XG4gICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7XG4gICAgaWYgKCFyZWxhdGl2ZS5ob3N0ICYmICFob3N0bGVzc1Byb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG4gICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSk7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3QpIHJlbGF0aXZlLmhvc3QgPSAnJztcbiAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG4gICAgICBpZiAocmVsUGF0aFswXSAhPT0gJycpIHJlbFBhdGgudW5zaGlmdCgnJyk7XG4gICAgICBpZiAocmVsUGF0aC5sZW5ndGggPCAyKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbGF0aXZlLnBhdGhuYW1lO1xuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcbiAgICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGg7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdDtcbiAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnBhdGhuYW1lIHx8IHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuICAgICAgdmFyIHMgPSByZXN1bHQuc2VhcmNoIHx8ICcnO1xuICAgICAgcmVzdWx0LnBhdGggPSBwICsgcztcbiAgICB9XG4gICAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG4gICAgICBpc1JlbEFicyA9IChcbiAgICAgICAgICByZWxhdGl2ZS5ob3N0IHx8XG4gICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcbiAgICAgICksXG4gICAgICBtdXN0RW5kQWJzID0gKGlzUmVsQWJzIHx8IGlzU291cmNlQWJzIHx8XG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuICAgICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsXG4gICAgICBzcmNQYXRoID0gcmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG4gICAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO1xuXG4gIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcbiAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZVxuICAvLyB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuXG4gIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG4gIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLlxuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG4gICAgcmVzdWx0LnBvcnQgPSBudWxsO1xuICAgIGlmIChyZXN1bHQuaG9zdCkge1xuICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG4gICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7XG4gICAgfVxuICAgIHJlc3VsdC5ob3N0ID0gJyc7XG4gICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZS5ob3N0bmFtZSA9IG51bGw7XG4gICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcbiAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7XG4gICAgICAgIGlmIChyZWxQYXRoWzBdID09PSAnJykgcmVsUGF0aFswXSA9IHJlbGF0aXZlLmhvc3Q7XG4gICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuICAgICAgfVxuICAgICAgcmVsYXRpdmUuaG9zdCA9IG51bGw7XG4gICAgfVxuICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7XG4gIH1cblxuICBpZiAoaXNSZWxBYnMpIHtcbiAgICAvLyBpdCdzIGFic29sdXRlLlxuICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cbiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3QgOiByZXN1bHQuaG9zdDtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSAocmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdG5hbWUgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICBzcmNQYXRoID0gcmVsUGF0aDtcbiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy5cbiAgfSBlbHNlIGlmIChyZWxQYXRoLmxlbmd0aCkge1xuICAgIC8vIGl0J3MgcmVsYXRpdmVcbiAgICAvLyB0aHJvdyBhd2F5IHRoZSBleGlzdGluZyBmaWxlLCBhbmQgdGFrZSB0aGUgbmV3IHBhdGggaW5zdGVhZC5cbiAgICBpZiAoIXNyY1BhdGgpIHNyY1BhdGggPSBbXTtcbiAgICBzcmNQYXRoLnBvcCgpO1xuICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICB9IGVsc2UgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHtcbiAgICAvLyBqdXN0IHB1bGwgb3V0IHRoZSBzZWFyY2guXG4gICAgLy8gbGlrZSBocmVmPSc/Zm9vJy5cbiAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcbiAgICBpZiAocHN5Y2hvdGljKSB7XG4gICAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IHNyY1BhdGguc2hpZnQoKTtcbiAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAgIC8vdGhpcyBlc3BlY2lhbGx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKCF1dGlsLmlzTnVsbChyZXN1bHQucGF0aG5hbWUpIHx8ICF1dGlsLmlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cbiAgICAvLyB3ZSd2ZSBhbHJlYWR5IGhhbmRsZWQgdGhlIG90aGVyIHN0dWZmIGFib3ZlLlxuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmIChyZXN1bHQuc2VhcmNoKSB7XG4gICAgICByZXN1bHQucGF0aCA9ICcvJyArIHJlc3VsdC5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGlmIGEgdXJsIEVORHMgaW4gLiBvciAuLiwgdGhlbiBpdCBtdXN0IGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSxcbiAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIGxhc3QgPSBzcmNQYXRoLnNsaWNlKC0xKVswXTtcbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoXG4gICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCB8fCBzcmNQYXRoLmxlbmd0aCA+IDEpICYmXG4gICAgICAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHx8IGxhc3QgPT09ICcnKTtcblxuICAvLyBzdHJpcCBzaW5nbGUgZG90cywgcmVzb2x2ZSBkb3VibGUgZG90cyB0byBwYXJlbnQgZGlyXG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBzcmNQYXRoLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICBsYXN0ID0gc3JjUGF0aFtpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoIW11c3RFbmRBYnMgJiYgIXJlbW92ZUFsbERvdHMpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJlxuICAgICAgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC5wdXNoKCcnKTtcbiAgfVxuXG4gIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHxcbiAgICAgIChzcmNQYXRoWzBdICYmIHNyY1BhdGhbMF0uY2hhckF0KDApID09PSAnLycpO1xuXG4gIC8vIHB1dCB0aGUgaG9zdCBiYWNrXG4gIGlmIChwc3ljaG90aWMpIHtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnO1xuICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKVxuICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTtcblxuICBpZiAobXVzdEVuZEFicyAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG4gIGlmICghdXRpbC5pc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhdXRpbC5pc051bGwocmVzdWx0LnNlYXJjaCkpIHtcbiAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICB9XG4gIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDtcbiAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBob3N0ID0gdGhpcy5ob3N0O1xuICB2YXIgcG9ydCA9IHBvcnRQYXR0ZXJuLmV4ZWMoaG9zdCk7XG4gIGlmIChwb3J0KSB7XG4gICAgcG9ydCA9IHBvcnRbMF07XG4gICAgaWYgKHBvcnQgIT09ICc6Jykge1xuICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG4gICAgfVxuICAgIGhvc3QgPSBob3N0LnN1YnN0cigwLCBob3N0Lmxlbmd0aCAtIHBvcnQubGVuZ3RoKTtcbiAgfVxuICBpZiAoaG9zdCkgdGhpcy5ob3N0bmFtZSA9IGhvc3Q7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNTdHJpbmc6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ3N0cmluZyc7XG4gIH0sXG4gIGlzT2JqZWN0OiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbiAgfSxcbiAgaXNOdWxsOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gYXJnID09PSBudWxsO1xuICB9LFxuICBpc051bGxPclVuZGVmaW5lZDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGFyZyA9PSBudWxsO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGVcbiAgbm8tdW51c2VkLXZhcnNcbiovXG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxubW9kdWxlLmV4cG9ydHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBCYXNlQ2xpZW50KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYXNlQ2xpZW50KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhCYXNlQ2xpZW50LCBudWxsLCBbe1xuICAgIGtleTogXCJnZXRDbGllbnRQYXRoXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldENsaWVudFBhdGgob3B0aW9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgbmVlZHMgaW1wbGVtZW50YXRpb24nKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQmFzZUNsaWVudDtcbn0oKTsiLCIndXNlIHN0cmljdCc7XG4vKiBlc2xpbnQtZGlzYWJsZVxuICBuby11bnVzZWQtdmFyc1xuKi9cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG52YXIgU29ja0pTID0gcmVxdWlyZSgnc29ja2pzLWNsaWVudC9kaXN0L3NvY2tqcycpO1xuXG52YXIgQmFzZUNsaWVudCA9IHJlcXVpcmUoJy4vQmFzZUNsaWVudCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Jhc2VDbGllbnQpIHtcbiAgX2luaGVyaXRzKFNvY2tKU0NsaWVudCwgX0Jhc2VDbGllbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU29ja0pTQ2xpZW50KTtcblxuICBmdW5jdGlvbiBTb2NrSlNDbGllbnQodXJsKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNvY2tKU0NsaWVudCk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIF90aGlzLnNvY2sgPSBuZXcgU29ja0pTKHVybCk7XG5cbiAgICBfdGhpcy5zb2NrLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7Ly8gVE9ETzogdXNlIGxvZ2dlciB0byBsb2cgdGhlIGVycm9yIGV2ZW50IG9uY2UgY2xpZW50IGFuZCBjbGllbnQtc3JjXG4gICAgICAvLyBhcmUgcmVvcmdhbml6ZWQgdG8gaGF2ZSB0aGUgc2FtZSBkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTb2NrSlNDbGllbnQsIFt7XG4gICAga2V5OiBcIm9uT3BlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9wZW4oZikge1xuICAgICAgdGhpcy5zb2NrLm9ub3BlbiA9IGY7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2xvc2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbG9zZShmKSB7XG4gICAgICB0aGlzLnNvY2sub25jbG9zZSA9IGY7XG4gICAgfSAvLyBjYWxsIGYgd2l0aCB0aGUgbWVzc2FnZSBzdHJpbmcgYXMgdGhlIGZpcnN0IGFyZ3VtZW50XG5cbiAgfSwge1xuICAgIGtleTogXCJvbk1lc3NhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25NZXNzYWdlKGYpIHtcbiAgICAgIHRoaXMuc29jay5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBmKGUuZGF0YSk7XG4gICAgICB9O1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImdldENsaWVudFBhdGhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50UGF0aChvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVxdWlyZS5yZXNvbHZlKCcuL1NvY2tKU0NsaWVudCcpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTb2NrSlNDbGllbnQ7XG59KEJhc2VDbGllbnQpOyIsIid1c2Ugc3RyaWN0Jztcbi8qIGdsb2JhbCBfX3Jlc291cmNlUXVlcnkgV29ya2VyR2xvYmFsU2NvcGUgc2VsZiAqL1xuXG4vKiBlc2xpbnQgcHJlZmVyLWRlc3RydWN0dXJpbmc6IG9mZiAqL1xuXG52YXIgc3RyaXBBbnNpID0gcmVxdWlyZSgnc3RyaXAtYW5zaScpO1xuXG52YXIgc29ja2V0ID0gcmVxdWlyZSgnLi9zb2NrZXQnKTtcblxudmFyIG92ZXJsYXkgPSByZXF1aXJlKCcuL292ZXJsYXknKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi91dGlscy9sb2cnKSxcbiAgICBsb2cgPSBfcmVxdWlyZS5sb2csXG4gICAgc2V0TG9nTGV2ZWwgPSBfcmVxdWlyZS5zZXRMb2dMZXZlbDtcblxudmFyIHNlbmRNZXNzYWdlID0gcmVxdWlyZSgnLi91dGlscy9zZW5kTWVzc2FnZScpO1xuXG52YXIgcmVsb2FkQXBwID0gcmVxdWlyZSgnLi91dGlscy9yZWxvYWRBcHAnKTtcblxudmFyIGNyZWF0ZVNvY2tldFVybCA9IHJlcXVpcmUoJy4vdXRpbHMvY3JlYXRlU29ja2V0VXJsJyk7XG5cbnZhciBzdGF0dXMgPSB7XG4gIGlzVW5sb2FkaW5nOiBmYWxzZSxcbiAgY3VycmVudEhhc2g6ICcnXG59O1xudmFyIG9wdGlvbnMgPSB7XG4gIGhvdDogZmFsc2UsXG4gIGhvdFJlbG9hZDogdHJ1ZSxcbiAgbGl2ZVJlbG9hZDogZmFsc2UsXG4gIGluaXRpYWw6IHRydWUsXG4gIHVzZVdhcm5pbmdPdmVybGF5OiBmYWxzZSxcbiAgdXNlRXJyb3JPdmVybGF5OiBmYWxzZSxcbiAgdXNlUHJvZ3Jlc3M6IGZhbHNlXG59O1xudmFyIHNvY2tldFVybCA9IGNyZWF0ZVNvY2tldFVybChfX3Jlc291cmNlUXVlcnkpO1xuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gIHN0YXR1cy5pc1VubG9hZGluZyA9IHRydWU7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBxcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gudG9Mb3dlckNhc2UoKTtcbiAgb3B0aW9ucy5ob3RSZWxvYWQgPSBxcy5pbmRleE9mKCdob3RyZWxvYWQ9ZmFsc2UnKSA9PT0gLTE7XG59XG5cbnZhciBvblNvY2tldE1lc3NhZ2UgPSB7XG4gIGhvdDogZnVuY3Rpb24gaG90KCkge1xuICAgIG9wdGlvbnMuaG90ID0gdHJ1ZTtcbiAgICBsb2cuaW5mbygnW1dEU10gSG90IE1vZHVsZSBSZXBsYWNlbWVudCBlbmFibGVkLicpO1xuICB9LFxuICBsaXZlUmVsb2FkOiBmdW5jdGlvbiBsaXZlUmVsb2FkKCkge1xuICAgIG9wdGlvbnMubGl2ZVJlbG9hZCA9IHRydWU7XG4gICAgbG9nLmluZm8oJ1tXRFNdIExpdmUgUmVsb2FkaW5nIGVuYWJsZWQuJyk7XG4gIH0sXG4gIGludmFsaWQ6IGZ1bmN0aW9uIGludmFsaWQoKSB7XG4gICAgbG9nLmluZm8oJ1tXRFNdIEFwcCB1cGRhdGVkLiBSZWNvbXBpbGluZy4uLicpOyAvLyBmaXhlcyAjMTA0Mi4gb3ZlcmxheSBkb2Vzbid0IGNsZWFyIGlmIGVycm9ycyBhcmUgZml4ZWQgYnV0IHdhcm5pbmdzIHJlbWFpbi5cblxuICAgIGlmIChvcHRpb25zLnVzZVdhcm5pbmdPdmVybGF5IHx8IG9wdGlvbnMudXNlRXJyb3JPdmVybGF5KSB7XG4gICAgICBvdmVybGF5LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgc2VuZE1lc3NhZ2UoJ0ludmFsaWQnKTtcbiAgfSxcbiAgaGFzaDogZnVuY3Rpb24gaGFzaChfaGFzaCkge1xuICAgIHN0YXR1cy5jdXJyZW50SGFzaCA9IF9oYXNoO1xuICB9LFxuICAnc3RpbGwtb2snOiBmdW5jdGlvbiBzdGlsbE9rKCkge1xuICAgIGxvZy5pbmZvKCdbV0RTXSBOb3RoaW5nIGNoYW5nZWQuJyk7XG5cbiAgICBpZiAob3B0aW9ucy51c2VXYXJuaW5nT3ZlcmxheSB8fCBvcHRpb25zLnVzZUVycm9yT3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5jbGVhcigpO1xuICAgIH1cblxuICAgIHNlbmRNZXNzYWdlKCdTdGlsbE9rJyk7XG4gIH0sXG4gICdsb2ctbGV2ZWwnOiBmdW5jdGlvbiBsb2dMZXZlbChsZXZlbCkge1xuICAgIHZhciBob3RDdHggPSByZXF1aXJlLmNvbnRleHQoJ3dlYnBhY2svaG90JywgZmFsc2UsIC9eXFwuXFwvbG9nJC8pO1xuXG4gICAgaWYgKGhvdEN0eC5rZXlzKCkuaW5kZXhPZignLi9sb2cnKSAhPT0gLTEpIHtcbiAgICAgIGhvdEN0eCgnLi9sb2cnKS5zZXRMb2dMZXZlbChsZXZlbCk7XG4gICAgfVxuXG4gICAgc2V0TG9nTGV2ZWwobGV2ZWwpO1xuICB9LFxuICBvdmVybGF5OiBmdW5jdGlvbiBvdmVybGF5KHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICBvcHRpb25zLnVzZVdhcm5pbmdPdmVybGF5ID0gZmFsc2U7XG4gICAgICAgIG9wdGlvbnMudXNlRXJyb3JPdmVybGF5ID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgIG9wdGlvbnMudXNlV2FybmluZ092ZXJsYXkgPSB2YWx1ZS53YXJuaW5ncztcbiAgICAgICAgb3B0aW9ucy51c2VFcnJvck92ZXJsYXkgPSB2YWx1ZS5lcnJvcnM7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBwcm9ncmVzczogZnVuY3Rpb24gcHJvZ3Jlc3MoX3Byb2dyZXNzKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMudXNlUHJvZ3Jlc3MgPSBfcHJvZ3Jlc3M7XG4gICAgfVxuICB9LFxuICAncHJvZ3Jlc3MtdXBkYXRlJzogZnVuY3Rpb24gcHJvZ3Jlc3NVcGRhdGUoZGF0YSkge1xuICAgIGlmIChvcHRpb25zLnVzZVByb2dyZXNzKSB7XG4gICAgICBsb2cuaW5mbyhcIltXRFNdIFwiLmNvbmNhdChkYXRhLnBlcmNlbnQsIFwiJSAtIFwiKS5jb25jYXQoZGF0YS5tc2csIFwiLlwiKSk7XG4gICAgfVxuXG4gICAgc2VuZE1lc3NhZ2UoJ1Byb2dyZXNzJywgZGF0YSk7XG4gIH0sXG4gIG9rOiBmdW5jdGlvbiBvaygpIHtcbiAgICBzZW5kTWVzc2FnZSgnT2snKTtcblxuICAgIGlmIChvcHRpb25zLnVzZVdhcm5pbmdPdmVybGF5IHx8IG9wdGlvbnMudXNlRXJyb3JPdmVybGF5KSB7XG4gICAgICBvdmVybGF5LmNsZWFyKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaW5pdGlhbCkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW5pdGlhbCA9IGZhbHNlO1xuICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cblxuICAgIHJlbG9hZEFwcChvcHRpb25zLCBzdGF0dXMpO1xuICB9LFxuICAnY29udGVudC1jaGFuZ2VkJzogZnVuY3Rpb24gY29udGVudENoYW5nZWQoKSB7XG4gICAgbG9nLmluZm8oJ1tXRFNdIENvbnRlbnQgYmFzZSBjaGFuZ2VkLiBSZWxvYWRpbmcuLi4nKTtcbiAgICBzZWxmLmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9LFxuICB3YXJuaW5nczogZnVuY3Rpb24gd2FybmluZ3MoX3dhcm5pbmdzKSB7XG4gICAgbG9nLndhcm4oJ1tXRFNdIFdhcm5pbmdzIHdoaWxlIGNvbXBpbGluZy4nKTtcblxuICAgIHZhciBzdHJpcHBlZFdhcm5pbmdzID0gX3dhcm5pbmdzLm1hcChmdW5jdGlvbiAod2FybmluZykge1xuICAgICAgcmV0dXJuIHN0cmlwQW5zaSh3YXJuaW5nKTtcbiAgICB9KTtcblxuICAgIHNlbmRNZXNzYWdlKCdXYXJuaW5ncycsIHN0cmlwcGVkV2FybmluZ3MpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpcHBlZFdhcm5pbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsb2cud2FybihzdHJpcHBlZFdhcm5pbmdzW2ldKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy51c2VXYXJuaW5nT3ZlcmxheSkge1xuICAgICAgb3ZlcmxheS5zaG93TWVzc2FnZShfd2FybmluZ3MpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmluaXRpYWwpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmluaXRpYWwgPSBmYWxzZTtcbiAgICB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmV0dXJuLWFzc2lnblxuXG5cbiAgICByZWxvYWRBcHAob3B0aW9ucywgc3RhdHVzKTtcbiAgfSxcbiAgZXJyb3JzOiBmdW5jdGlvbiBlcnJvcnMoX2Vycm9ycykge1xuICAgIGxvZy5lcnJvcignW1dEU10gRXJyb3JzIHdoaWxlIGNvbXBpbGluZy4gUmVsb2FkIHByZXZlbnRlZC4nKTtcblxuICAgIHZhciBzdHJpcHBlZEVycm9ycyA9IF9lcnJvcnMubWFwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgcmV0dXJuIHN0cmlwQW5zaShlcnJvcik7XG4gICAgfSk7XG5cbiAgICBzZW5kTWVzc2FnZSgnRXJyb3JzJywgc3RyaXBwZWRFcnJvcnMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpcHBlZEVycm9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgbG9nLmVycm9yKHN0cmlwcGVkRXJyb3JzW2ldKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy51c2VFcnJvck92ZXJsYXkpIHtcbiAgICAgIG92ZXJsYXkuc2hvd01lc3NhZ2UoX2Vycm9ycyk7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5pbml0aWFsID0gZmFsc2U7XG4gIH0sXG4gIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IpIHtcbiAgICBsb2cuZXJyb3IoX2Vycm9yKTtcbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgIGxvZy5lcnJvcignW1dEU10gRGlzY29ubmVjdGVkIScpO1xuICAgIHNlbmRNZXNzYWdlKCdDbG9zZScpO1xuICB9XG59O1xuc29ja2V0KHNvY2tldFVybCwgb25Tb2NrZXRNZXNzYWdlKTsiLCIndXNlIHN0cmljdCc7IC8vIFRoZSBlcnJvciBvdmVybGF5IGlzIGluc3BpcmVkIChhbmQgbW9zdGx5IGNvcGllZCkgZnJvbSBDcmVhdGUgUmVhY3QgQXBwIChodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2tpbmN1YmF0b3IvY3JlYXRlLXJlYWN0LWFwcClcbi8vIFRoZXksIGluIHR1cm4sIGdvdCBpbnNwaXJlZCBieSB3ZWJwYWNrLWhvdC1taWRkbGV3YXJlIChodHRwczovL2dpdGh1Yi5jb20vZ2xlbmphbWluL3dlYnBhY2staG90LW1pZGRsZXdhcmUpLlxuXG52YXIgYW5zaUhUTUwgPSByZXF1aXJlKCdhbnNpLWh0bWwnKTtcblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnaHRtbC1lbnRpdGllcycpLFxuICAgIEFsbEh0bWxFbnRpdGllcyA9IF9yZXF1aXJlLkFsbEh0bWxFbnRpdGllcztcblxudmFyIGVudGl0aWVzID0gbmV3IEFsbEh0bWxFbnRpdGllcygpO1xudmFyIGNvbG9ycyA9IHtcbiAgcmVzZXQ6IFsndHJhbnNwYXJlbnQnLCAndHJhbnNwYXJlbnQnXSxcbiAgYmxhY2s6ICcxODE4MTgnLFxuICByZWQ6ICdFMzYwNDknLFxuICBncmVlbjogJ0IzQ0I3NCcsXG4gIHllbGxvdzogJ0ZGRDA4MCcsXG4gIGJsdWU6ICc3Q0FGQzInLFxuICBtYWdlbnRhOiAnN0ZBQ0NBJyxcbiAgY3lhbjogJ0MzQzJFRicsXG4gIGxpZ2h0Z3JleTogJ0VCRTdFMycsXG4gIGRhcmtncmV5OiAnNkQ3ODkxJ1xufTtcbnZhciBvdmVybGF5SWZyYW1lID0gbnVsbDtcbnZhciBvdmVybGF5RGl2ID0gbnVsbDtcbnZhciBsYXN0T25PdmVybGF5RGl2UmVhZHkgPSBudWxsO1xuYW5zaUhUTUwuc2V0Q29sb3JzKGNvbG9ycyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXlJZnJhbWUob25JZnJhbWVMb2FkKSB7XG4gIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgaWZyYW1lLmlkID0gJ3dlYnBhY2stZGV2LXNlcnZlci1jbGllbnQtb3ZlcmxheSc7XG4gIGlmcmFtZS5zcmMgPSAnYWJvdXQ6YmxhbmsnO1xuICBpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICBpZnJhbWUuc3R5bGUubGVmdCA9IDA7XG4gIGlmcmFtZS5zdHlsZS50b3AgPSAwO1xuICBpZnJhbWUuc3R5bGUucmlnaHQgPSAwO1xuICBpZnJhbWUuc3R5bGUuYm90dG9tID0gMDtcbiAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzEwMHZ3JztcbiAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICcxMDB2aCc7XG4gIGlmcmFtZS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gIGlmcmFtZS5zdHlsZS56SW5kZXggPSA5OTk5OTk5OTk5O1xuICBpZnJhbWUub25sb2FkID0gb25JZnJhbWVMb2FkO1xuICByZXR1cm4gaWZyYW1lO1xufVxuXG5mdW5jdGlvbiBhZGRPdmVybGF5RGl2VG8oaWZyYW1lKSB7XG4gIHZhciBkaXYgPSBpZnJhbWUuY29udGVudERvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuaWQgPSAnd2VicGFjay1kZXYtc2VydmVyLWNsaWVudC1vdmVybGF5LWRpdic7XG4gIGRpdi5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gIGRpdi5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XG4gIGRpdi5zdHlsZS5sZWZ0ID0gMDtcbiAgZGl2LnN0eWxlLnRvcCA9IDA7XG4gIGRpdi5zdHlsZS5yaWdodCA9IDA7XG4gIGRpdi5zdHlsZS5ib3R0b20gPSAwO1xuICBkaXYuc3R5bGUud2lkdGggPSAnMTAwdncnO1xuICBkaXYuc3R5bGUuaGVpZ2h0ID0gJzEwMHZoJztcbiAgZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsIDAsIDAsIDAuODUpJztcbiAgZGl2LnN0eWxlLmNvbG9yID0gJyNFOEU4RTgnO1xuICBkaXYuc3R5bGUuZm9udEZhbWlseSA9ICdNZW5sbywgQ29uc29sYXMsIG1vbm9zcGFjZSc7XG4gIGRpdi5zdHlsZS5mb250U2l6ZSA9ICdsYXJnZSc7XG4gIGRpdi5zdHlsZS5wYWRkaW5nID0gJzJyZW0nO1xuICBkaXYuc3R5bGUubGluZUhlaWdodCA9ICcxLjInO1xuICBkaXYuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XG4gIGRpdi5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgaWZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gIHJldHVybiBkaXY7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZU92ZXJsYXlEaXZFeGlzdHMob25PdmVybGF5RGl2UmVhZHkpIHtcbiAgaWYgKG92ZXJsYXlEaXYpIHtcbiAgICAvLyBFdmVyeXRoaW5nIGlzIHJlYWR5LCBjYWxsIHRoZSBjYWxsYmFjayByaWdodCBhd2F5LlxuICAgIG9uT3ZlcmxheURpdlJlYWR5KG92ZXJsYXlEaXYpO1xuICAgIHJldHVybjtcbiAgfSAvLyBDcmVhdGluZyBhbiBpZnJhbWUgbWF5IGJlIGFzeW5jaHJvbm91cyBzbyB3ZSdsbCBzY2hlZHVsZSB0aGUgY2FsbGJhY2suXG4gIC8vIEluIGNhc2Ugb2YgbXVsdGlwbGUgY2FsbHMsIGxhc3QgY2FsbGJhY2sgd2lucy5cblxuXG4gIGxhc3RPbk92ZXJsYXlEaXZSZWFkeSA9IG9uT3ZlcmxheURpdlJlYWR5O1xuXG4gIGlmIChvdmVybGF5SWZyYW1lKSB7XG4gICAgLy8gV2UndmUgYWxyZWFkeSBjcmVhdGVkIGl0LlxuICAgIHJldHVybjtcbiAgfSAvLyBDcmVhdGUgaWZyYW1lIGFuZCwgd2hlbiBpdCBpcyByZWFkeSwgYSBkaXYgaW5zaWRlIGl0LlxuXG5cbiAgb3ZlcmxheUlmcmFtZSA9IGNyZWF0ZU92ZXJsYXlJZnJhbWUoZnVuY3Rpb24gKCkge1xuICAgIG92ZXJsYXlEaXYgPSBhZGRPdmVybGF5RGl2VG8ob3ZlcmxheUlmcmFtZSk7IC8vIE5vdyB3ZSBjYW4gdGFsayFcblxuICAgIGxhc3RPbk92ZXJsYXlEaXZSZWFkeShvdmVybGF5RGl2KTtcbiAgfSk7IC8vIFphbGdvIGFsZXJ0OiBvbklmcmFtZUxvYWQoKSB3aWxsIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseVxuICAvLyBvciBhc3luY2hyb25vdXNseSBkZXBlbmRpbmcgb24gdGhlIGJyb3dzZXIuXG4gIC8vIFdlIGRlbGF5IGFkZGluZyBpdCBzbyBgb3ZlcmxheUlmcmFtZWAgaXMgc2V0IHdoZW4gYG9uSWZyYW1lTG9hZGAgZmlyZXMuXG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5SWZyYW1lKTtcbn0gLy8gU3VjY2Vzc2Z1bCBjb21waWxhdGlvbi5cblxuXG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgaWYgKCFvdmVybGF5RGl2KSB7XG4gICAgLy8gSXQgaXMgbm90IHRoZXJlIGluIHRoZSBmaXJzdCBwbGFjZS5cbiAgICByZXR1cm47XG4gIH0gLy8gQ2xlYW4gdXAgYW5kIHJlc2V0IGludGVybmFsIHN0YXRlLlxuXG5cbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5SWZyYW1lKTtcbiAgb3ZlcmxheURpdiA9IG51bGw7XG4gIG92ZXJsYXlJZnJhbWUgPSBudWxsO1xuICBsYXN0T25PdmVybGF5RGl2UmVhZHkgPSBudWxsO1xufSAvLyBDb21waWxhdGlvbiB3aXRoIGVycm9ycyAoZS5nLiBzeW50YXggZXJyb3Igb3IgbWlzc2luZyBtb2R1bGVzKS5cblxuXG5mdW5jdGlvbiBzaG93TWVzc2FnZShtZXNzYWdlcykge1xuICBlbnN1cmVPdmVybGF5RGl2RXhpc3RzKGZ1bmN0aW9uIChkaXYpIHtcbiAgICAvLyBNYWtlIGl0IGxvb2sgc2ltaWxhciB0byBvdXIgdGVybWluYWwuXG4gICAgZGl2LmlubmVySFRNTCA9IFwiPHNwYW4gc3R5bGU9XFxcImNvbG9yOiAjXCIuY29uY2F0KGNvbG9ycy5yZWQsIFwiXFxcIj5GYWlsZWQgdG8gY29tcGlsZS48L3NwYW4+PGJyPjxicj5cIikuY29uY2F0KGFuc2lIVE1MKGVudGl0aWVzLmVuY29kZShtZXNzYWdlc1swXSkpKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjbGVhcjogY2xlYXIsXG4gIHNob3dNZXNzYWdlOiBzaG93TWVzc2FnZVxufTsiLCIndXNlIHN0cmljdCc7XG4vKiBnbG9iYWwgX193ZWJwYWNrX2Rldl9zZXJ2ZXJfY2xpZW50X18gKi9cblxuLyogZXNsaW50LWRpc2FibGVcbiAgY2FtZWxjYXNlXG4qL1xuLy8gdGhpcyBTb2NrSlNDbGllbnQgaXMgaGVyZSBhcyBhIGRlZmF1bHQgZmFsbGJhY2ssIGluIGNhc2UgaW5saW5lIG1vZGVcbi8vIGlzIG9mZiBvciB0aGUgY2xpZW50IGlzIG5vdCBpbmplY3RlZC4gVGhpcyB3aWxsIGJlIHN3aXRjaGVkIHRvXG4vLyBXZWJzb2NrZXRDbGllbnQgd2hlbiBpdCBiZWNvbWVzIHRoZSBkZWZhdWx0XG4vLyBpbXBvcnRhbnQ6IHRoZSBwYXRoIHRvIFNvY2tKU0NsaWVudCBoZXJlIGlzIG1hZGUgdG8gd29yayBpbiB0aGUgJ2NsaWVudCdcbi8vIGRpcmVjdG9yeSwgYnV0IGlzIHVwZGF0ZWQgdmlhIHRoZSB3ZWJwYWNrIGNvbXBpbGF0aW9uIHdoZW4gY29tcGlsZWQgZnJvbVxuLy8gdGhlICdjbGllbnQtc3JjJyBkaXJlY3RvcnlcblxudmFyIENsaWVudCA9IHR5cGVvZiBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfZGV2X3NlcnZlcl9jbGllbnRfXyA6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW5yZXNvbHZlZFxucmVxdWlyZSgnLi9jbGllbnRzL1NvY2tKU0NsaWVudCcpO1xudmFyIHJldHJpZXMgPSAwO1xudmFyIGNsaWVudCA9IG51bGw7XG5cbnZhciBzb2NrZXQgPSBmdW5jdGlvbiBpbml0U29ja2V0KHVybCwgaGFuZGxlcnMpIHtcbiAgY2xpZW50ID0gbmV3IENsaWVudCh1cmwpO1xuICBjbGllbnQub25PcGVuKGZ1bmN0aW9uICgpIHtcbiAgICByZXRyaWVzID0gMDtcbiAgfSk7XG4gIGNsaWVudC5vbkNsb3NlKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocmV0cmllcyA9PT0gMCkge1xuICAgICAgaGFuZGxlcnMuY2xvc2UoKTtcbiAgICB9IC8vIFRyeSB0byByZWNvbm5lY3QuXG5cblxuICAgIGNsaWVudCA9IG51bGw7IC8vIEFmdGVyIDEwIHJldHJpZXMgc3RvcCB0cnlpbmcsIHRvIHByZXZlbnQgbG9nc3BhbS5cblxuICAgIGlmIChyZXRyaWVzIDw9IDEwKSB7XG4gICAgICAvLyBFeHBvbmVudGlhbGx5IGluY3JlYXNlIHRpbWVvdXQgdG8gcmVjb25uZWN0LlxuICAgICAgLy8gUmVzcGVjdGZ1bGx5IGNvcGllZCBmcm9tIHRoZSBwYWNrYWdlIGBnb3RgLlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW1peGVkLW9wZXJhdG9ycywgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG4gICAgICB2YXIgcmV0cnlJbk1zID0gMTAwMCAqIE1hdGgucG93KDIsIHJldHJpZXMpICsgTWF0aC5yYW5kb20oKSAqIDEwMDtcbiAgICAgIHJldHJpZXMgKz0gMTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBzb2NrZXQodXJsLCBoYW5kbGVycyk7XG4gICAgICB9LCByZXRyeUluTXMpO1xuICAgIH1cbiAgfSk7XG4gIGNsaWVudC5vbk1lc3NhZ2UoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShkYXRhKTtcblxuICAgIGlmIChoYW5kbGVyc1ttc2cudHlwZV0pIHtcbiAgICAgIGhhbmRsZXJzW21zZy50eXBlXShtc2cuZGF0YSk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gc29ja2V0OyIsIid1c2Ugc3RyaWN0Jztcbi8qIGdsb2JhbCBzZWxmICovXG5cbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKTtcblxudmFyIGdldEN1cnJlbnRTY3JpcHRTb3VyY2UgPSByZXF1aXJlKCcuL2dldEN1cnJlbnRTY3JpcHRTb3VyY2UnKTtcblxuZnVuY3Rpb24gY3JlYXRlU29ja2V0VXJsKHJlc291cmNlUXVlcnksIGN1cnJlbnRMb2NhdGlvbikge1xuICB2YXIgdXJsUGFydHM7XG5cbiAgaWYgKHR5cGVvZiByZXNvdXJjZVF1ZXJ5ID09PSAnc3RyaW5nJyAmJiByZXNvdXJjZVF1ZXJ5ICE9PSAnJykge1xuICAgIC8vIElmIHRoaXMgYnVuZGxlIGlzIGlubGluZWQsIHVzZSB0aGUgcmVzb3VyY2UgcXVlcnkgdG8gZ2V0IHRoZSBjb3JyZWN0IHVybC5cbiAgICAvLyBmb3JtYXQgaXMgbGlrZSBgP2h0dHA6Ly8wLjAuMC4wOjgwOTYmc29ja1BvcnQ9ODA5NyZzb2NrSG9zdD1sb2NhbGhvc3RgXG4gICAgdXJsUGFydHMgPSB1cmwucGFyc2UocmVzb3VyY2VRdWVyeSAvLyBzdHJpcCBsZWFkaW5nIGA/YCBmcm9tIHF1ZXJ5IHN0cmluZyB0byBnZXQgYSB2YWxpZCBVUkxcbiAgICAuc3Vic3RyKDEpIC8vIHJlcGxhY2UgZmlyc3QgYCZgIHdpdGggYD9gIHRvIGhhdmUgYSB2YWxpZCBxdWVyeSBzdHJpbmdcbiAgICAucmVwbGFjZSgnJicsICc/JyksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIC8vIEVsc2UsIGdldCB0aGUgdXJsIGZyb20gdGhlIDxzY3JpcHQ+IHRoaXMgZmlsZSB3YXMgY2FsbGVkIHdpdGguXG4gICAgdmFyIHNjcmlwdEhvc3QgPSBnZXRDdXJyZW50U2NyaXB0U291cmNlKCk7XG4gICAgdXJsUGFydHMgPSB1cmwucGFyc2Uoc2NyaXB0SG9zdCB8fCAnLycsIHRydWUsIHRydWUpO1xuICB9IC8vIFVzZSBwYXJhbWV0ZXIgdG8gYWxsb3cgcGFzc2luZyBsb2NhdGlvbiBpbiB1bml0IHRlc3RzXG5cblxuICBpZiAodHlwZW9mIGN1cnJlbnRMb2NhdGlvbiA9PT0gJ3N0cmluZycgJiYgY3VycmVudExvY2F0aW9uICE9PSAnJykge1xuICAgIGN1cnJlbnRMb2NhdGlvbiA9IHVybC5wYXJzZShjdXJyZW50TG9jYXRpb24pO1xuICB9IGVsc2Uge1xuICAgIGN1cnJlbnRMb2NhdGlvbiA9IHNlbGYubG9jYXRpb247XG4gIH1cblxuICByZXR1cm4gZ2V0U29ja2V0VXJsKHVybFBhcnRzLCBjdXJyZW50TG9jYXRpb24pO1xufVxuLypcbiAqIEdldHMgc29ja2V0IFVSTCBiYXNlZCBvbiBTY3JpcHQgU291cmNlL0xvY2F0aW9uXG4gKiAoc2NyaXB0U3JjOiBVUkwsIGxvY2F0aW9uOiBVUkwpIC0+IFVSTFxuICovXG5cblxuZnVuY3Rpb24gZ2V0U29ja2V0VXJsKHVybFBhcnRzLCBsb2MpIHtcbiAgdmFyIGF1dGggPSB1cmxQYXJ0cy5hdXRoLFxuICAgICAgcXVlcnkgPSB1cmxQYXJ0cy5xdWVyeTtcbiAgdmFyIGhvc3RuYW1lID0gdXJsUGFydHMuaG9zdG5hbWUsXG4gICAgICBwcm90b2NvbCA9IHVybFBhcnRzLnByb3RvY29sLFxuICAgICAgcG9ydCA9IHVybFBhcnRzLnBvcnQ7XG5cbiAgaWYgKCFwb3J0IHx8IHBvcnQgPT09ICcwJykge1xuICAgIHBvcnQgPSBsb2MucG9ydDtcbiAgfSAvLyBjaGVjayBpcHY0IGFuZCBpcHY2IGBhbGwgaG9zdG5hbWVgXG4gIC8vIHdoeSBkbyB3ZSBuZWVkIHRoaXMgY2hlY2s/XG4gIC8vIGhvc3RuYW1lIG4vYSBmb3IgZmlsZSBwcm90b2NvbCAoZXhhbXBsZSwgd2hlbiB1c2luZyBlbGVjdHJvbiwgaW9uaWMpXG4gIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2svd2VicGFjay1kZXYtc2VydmVyL3B1bGwvMzg0XG5cblxuICBpZiAoKGhvc3RuYW1lID09PSAnMC4wLjAuMCcgfHwgaG9zdG5hbWUgPT09ICc6OicpICYmIGxvYy5ob3N0bmFtZSAmJiBsb2MucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID09PSAwKSB7XG4gICAgaG9zdG5hbWUgPSBsb2MuaG9zdG5hbWU7XG4gIH0gLy8gYGhvc3RuYW1lYCBjYW4gYmUgZW1wdHkgd2hlbiB0aGUgc2NyaXB0IHBhdGggaXMgcmVsYXRpdmUuIEluIHRoYXQgY2FzZSwgc3BlY2lmeWluZ1xuICAvLyBhIHByb3RvY29sIHdvdWxkIHJlc3VsdCBpbiBhbiBpbnZhbGlkIFVSTC5cbiAgLy8gV2hlbiBodHRwcyBpcyB1c2VkIGluIHRoZSBhcHAsIHNlY3VyZSB3ZWJzb2NrZXRzIGFyZSBhbHdheXMgbmVjZXNzYXJ5XG4gIC8vIGJlY2F1c2UgdGhlIGJyb3dzZXIgZG9lc24ndCBhY2NlcHQgbm9uLXNlY3VyZSB3ZWJzb2NrZXRzLlxuXG5cbiAgaWYgKGhvc3RuYW1lICYmIGhvc3RuYW1lICE9PSAnMTI3LjAuMC4xJyAmJiAobG9jLnByb3RvY29sID09PSAnaHR0cHM6JyB8fCB1cmxQYXJ0cy5ob3N0bmFtZSA9PT0gJzAuMC4wLjAnKSkge1xuICAgIHByb3RvY29sID0gbG9jLnByb3RvY29sO1xuICB9IC8vIGFsbCBvZiB0aGVzZSBzb2NrIHVybCBwYXJhbXMgYXJlIG9wdGlvbmFsbHkgcGFzc2VkIGluIHRocm91Z2hcbiAgLy8gcmVzb3VyY2VRdWVyeSwgc28gd2UgbmVlZCB0byBmYWxsIGJhY2sgdG8gdGhlIGRlZmF1bHQgaWZcbiAgLy8gdGhleSBhcmUgbm90IHByb3ZpZGVkXG5cblxuICB2YXIgc29ja0hvc3QgPSBxdWVyeS5zb2NrSG9zdCB8fCBob3N0bmFtZTtcbiAgdmFyIHNvY2tQYXRoID0gcXVlcnkuc29ja1BhdGggfHwgJy9zb2NranMtbm9kZSc7XG4gIHZhciBzb2NrUG9ydCA9IHF1ZXJ5LnNvY2tQb3J0IHx8IHBvcnQ7XG5cbiAgaWYgKHNvY2tQb3J0ID09PSAnbG9jYXRpb24nKSB7XG4gICAgc29ja1BvcnQgPSBsb2MucG9ydDtcbiAgfVxuXG4gIHJldHVybiB1cmwuZm9ybWF0KHtcbiAgICBwcm90b2NvbDogcHJvdG9jb2wsXG4gICAgYXV0aDogYXV0aCxcbiAgICBob3N0bmFtZTogc29ja0hvc3QsXG4gICAgcG9ydDogc29ja1BvcnQsXG4gICAgLy8gSWYgc29ja1BhdGggaXMgcHJvdmlkZWQgaXQnbGwgYmUgcGFzc2VkIGluIHZpYSB0aGUgcmVzb3VyY2VRdWVyeSBhcyBhXG4gICAgLy8gcXVlcnkgcGFyYW0gc28gaXQgaGFzIHRvIGJlIHBhcnNlZCBvdXQgb2YgdGhlIHF1ZXJ5c3RyaW5nIGluIG9yZGVyIGZvciB0aGVcbiAgICAvLyBjbGllbnQgdG8gb3BlbiB0aGUgc29ja2V0IHRvIHRoZSBjb3JyZWN0IGxvY2F0aW9uLlxuICAgIHBhdGhuYW1lOiBzb2NrUGF0aFxuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVTb2NrZXRVcmw7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRDdXJyZW50U2NyaXB0U291cmNlKCkge1xuICAvLyBgZG9jdW1lbnQuY3VycmVudFNjcmlwdGAgaXMgdGhlIG1vc3QgYWNjdXJhdGUgd2F5IHRvIGZpbmQgdGhlIGN1cnJlbnQgc2NyaXB0LFxuICAvLyBidXQgaXMgbm90IHN1cHBvcnRlZCBpbiBhbGwgYnJvd3NlcnMuXG4gIGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgfSAvLyBGYWxsIGJhY2sgdG8gZ2V0dGluZyBhbGwgc2NyaXB0cyBpbiB0aGUgZG9jdW1lbnQuXG5cblxuICB2YXIgc2NyaXB0RWxlbWVudHMgPSBkb2N1bWVudC5zY3JpcHRzIHx8IFtdO1xuICB2YXIgY3VycmVudFNjcmlwdCA9IHNjcmlwdEVsZW1lbnRzW3NjcmlwdEVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gIGlmIChjdXJyZW50U2NyaXB0KSB7XG4gICAgcmV0dXJuIGN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgfSAvLyBGYWlsIGFzIHRoZXJlIHdhcyBubyBzY3JpcHQgdG8gdXNlLlxuXG5cbiAgdGhyb3cgbmV3IEVycm9yKCdbV0RTXSBGYWlsZWQgdG8gZ2V0IGN1cnJlbnQgc2NyaXB0IHNvdXJjZS4nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRDdXJyZW50U2NyaXB0U291cmNlOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGxvZyA9IHJlcXVpcmUoJ2xvZ2xldmVsJykuZ2V0TG9nZ2VyKCd3ZWJwYWNrLWRldi1zZXJ2ZXInKTtcblxudmFyIElORk8gPSAnaW5mbyc7XG52YXIgV0FSTiA9ICd3YXJuJztcbnZhciBFUlJPUiA9ICdlcnJvcic7XG52YXIgREVCVUcgPSAnZGVidWcnO1xudmFyIFRSQUNFID0gJ3RyYWNlJztcbnZhciBTSUxFTlQgPSAnc2lsZW50JzsgLy8gZGVwcmVjYXRlZFxuLy8gVE9ETzogcmVtb3ZlIHRoZXNlIGF0IG1ham9yIHJlbGVhc2VkXG4vLyBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay93ZWJwYWNrLWRldi1zZXJ2ZXIvcHVsbC8xODI1XG5cbnZhciBXQVJOSU5HID0gJ3dhcm5pbmcnO1xudmFyIE5PTkUgPSAnbm9uZSc7IC8vIFNldCB0aGUgZGVmYXVsdCBsb2cgbGV2ZWxcblxubG9nLnNldERlZmF1bHRMZXZlbChJTkZPKTtcblxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcbiAgc3dpdGNoIChsZXZlbCkge1xuICAgIGNhc2UgSU5GTzpcbiAgICBjYXNlIFdBUk46XG4gICAgY2FzZSBFUlJPUjpcbiAgICBjYXNlIERFQlVHOlxuICAgIGNhc2UgVFJBQ0U6XG4gICAgICBsb2cuc2V0TGV2ZWwobGV2ZWwpO1xuICAgICAgYnJlYWs7XG4gICAgLy8gZGVwcmVjYXRlZFxuXG4gICAgY2FzZSBXQVJOSU5HOlxuICAgICAgLy8gbG9nbGV2ZWwncyB3YXJuaW5nIG5hbWUgaXMgZGlmZmVyZW50IGZyb20gd2VicGFjaydzXG4gICAgICBsb2cuc2V0TGV2ZWwoJ3dhcm4nKTtcbiAgICAgIGJyZWFrO1xuICAgIC8vIGRlcHJlY2F0ZWRcblxuICAgIGNhc2UgTk9ORTpcbiAgICBjYXNlIFNJTEVOVDpcbiAgICAgIGxvZy5kaXNhYmxlQWxsKCk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBsb2cuZXJyb3IoXCJbV0RTXSBVbmtub3duIGNsaWVudExvZ0xldmVsICdcIi5jb25jYXQobGV2ZWwsIFwiJ1wiKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGxvZzogbG9nLFxuICBzZXRMb2dMZXZlbDogc2V0TG9nTGV2ZWxcbn07IiwiJ3VzZSBzdHJpY3QnO1xuLyogZ2xvYmFsIFdvcmtlckdsb2JhbFNjb3BlIHNlbGYgKi9cblxudmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9sb2cnKSxcbiAgICBsb2cgPSBfcmVxdWlyZS5sb2c7XG5cbmZ1bmN0aW9uIHJlbG9hZEFwcChfcmVmLCBfcmVmMikge1xuICB2YXIgaG90UmVsb2FkID0gX3JlZi5ob3RSZWxvYWQsXG4gICAgICBob3QgPSBfcmVmLmhvdCxcbiAgICAgIGxpdmVSZWxvYWQgPSBfcmVmLmxpdmVSZWxvYWQ7XG4gIHZhciBpc1VubG9hZGluZyA9IF9yZWYyLmlzVW5sb2FkaW5nLFxuICAgICAgY3VycmVudEhhc2ggPSBfcmVmMi5jdXJyZW50SGFzaDtcblxuICBpZiAoaXNVbmxvYWRpbmcgfHwgIWhvdFJlbG9hZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChob3QpIHtcbiAgICBsb2cuaW5mbygnW1dEU10gQXBwIGhvdCB1cGRhdGUuLi4nKTtcblxuICAgIHZhciBob3RFbWl0dGVyID0gcmVxdWlyZSgnd2VicGFjay9ob3QvZW1pdHRlcicpO1xuXG4gICAgaG90RW1pdHRlci5lbWl0KCd3ZWJwYWNrSG90VXBkYXRlJywgY3VycmVudEhhc2gpO1xuXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLndpbmRvdykge1xuICAgICAgLy8gYnJvYWRjYXN0IHVwZGF0ZSB0byB3aW5kb3dcbiAgICAgIHNlbGYucG9zdE1lc3NhZ2UoXCJ3ZWJwYWNrSG90VXBkYXRlXCIuY29uY2F0KGN1cnJlbnRIYXNoKSwgJyonKTtcbiAgICB9XG4gIH0gLy8gYWxsb3cgcmVmcmVzaGluZyB0aGUgcGFnZSBvbmx5IGlmIGxpdmVSZWxvYWQgaXNuJ3QgZGlzYWJsZWRcbiAgZWxzZSBpZiAobGl2ZVJlbG9hZCkge1xuICAgICAgdmFyIHJvb3RXaW5kb3cgPSBzZWxmOyAvLyB1c2UgcGFyZW50IHdpbmRvdyBmb3IgcmVsb2FkIChpbiBjYXNlIHdlJ3JlIGluIGFuIGlmcmFtZSB3aXRoIG5vIHZhbGlkIHNyYylcblxuICAgICAgdmFyIGludGVydmFsSWQgPSBzZWxmLnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHJvb3RXaW5kb3cubG9jYXRpb24ucHJvdG9jb2wgIT09ICdhYm91dDonKSB7XG4gICAgICAgICAgLy8gcmVsb2FkIGltbWVkaWF0ZWx5IGlmIHByb3RvY29sIGlzIHZhbGlkXG4gICAgICAgICAgYXBwbHlSZWxvYWQocm9vdFdpbmRvdywgaW50ZXJ2YWxJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm9vdFdpbmRvdyA9IHJvb3RXaW5kb3cucGFyZW50O1xuXG4gICAgICAgICAgaWYgKHJvb3RXaW5kb3cucGFyZW50ID09PSByb290V2luZG93KSB7XG4gICAgICAgICAgICAvLyBpZiBwYXJlbnQgZXF1YWxzIGN1cnJlbnQgd2luZG93IHdlJ3ZlIHJlYWNoZWQgdGhlIHJvb3Qgd2hpY2ggd291bGQgY29udGludWUgZm9yZXZlciwgc28gdHJpZ2dlciBhIHJlbG9hZCBhbnl3YXlzXG4gICAgICAgICAgICBhcHBseVJlbG9hZChyb290V2luZG93LCBpbnRlcnZhbElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICBmdW5jdGlvbiBhcHBseVJlbG9hZChyb290V2luZG93LCBpbnRlcnZhbElkKSB7XG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICBsb2cuaW5mbygnW1dEU10gQXBwIHVwZGF0ZWQuIFJlbG9hZGluZy4uLicpO1xuICAgIHJvb3RXaW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZWxvYWRBcHA7IiwiJ3VzZSBzdHJpY3QnO1xuLyogZ2xvYmFsIF9fcmVzb3VyY2VRdWVyeSBXb3JrZXJHbG9iYWxTY29wZSBzZWxmICovXG4vLyBTZW5kIG1lc3NhZ2VzIHRvIHRoZSBvdXRzaWRlLCBzbyBwbHVnaW5zIGNhbiBjb25zdW1lIGl0LlxuXG5mdW5jdGlvbiBzZW5kTXNnKHR5cGUsIGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlID09PSAndW5kZWZpbmVkJyB8fCAhKHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSkpKSB7XG4gICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICB0eXBlOiBcIndlYnBhY2tcIi5jb25jYXQodHlwZSksXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSwgJyonKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNlbmRNc2c7IiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiAvW1xcdTAwMWJcXHUwMDliXVtbKCkjOz9dKig/OlswLTldezEsNH0oPzo7WzAtOV17MCw0fSkqKT9bMC05QS1QUlpjZi1ucXJ5PT48XS9nO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbnZhciBhbnNpUmVnZXggPSByZXF1aXJlKCdhbnNpLXJlZ2V4JykoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc3RyKSB7XG5cdHJldHVybiB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyA/IHN0ci5yZXBsYWNlKGFuc2lSZWdleCwgJycpIDogc3RyO1xufTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdGlmICghbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiIsInZhciBtYXAgPSB7XG5cdFwiLi9sb2dcIjogXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2hvdC9sb2cuanNcIlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9ob3Qgc3luYyBeXFxcXC5cXFxcL2xvZyRcIjsiLCJ2YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbm1vZHVsZS5leHBvcnRzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuIiwidmFyIGxvZ0xldmVsID0gXCJpbmZvXCI7XG5cbmZ1bmN0aW9uIGR1bW15KCkge31cblxuZnVuY3Rpb24gc2hvdWxkTG9nKGxldmVsKSB7XG5cdHZhciBzaG91bGRMb2cgPVxuXHRcdChsb2dMZXZlbCA9PT0gXCJpbmZvXCIgJiYgbGV2ZWwgPT09IFwiaW5mb1wiKSB8fFxuXHRcdChbXCJpbmZvXCIsIFwid2FybmluZ1wiXS5pbmRleE9mKGxvZ0xldmVsKSA+PSAwICYmIGxldmVsID09PSBcIndhcm5pbmdcIikgfHxcblx0XHQoW1wiaW5mb1wiLCBcIndhcm5pbmdcIiwgXCJlcnJvclwiXS5pbmRleE9mKGxvZ0xldmVsKSA+PSAwICYmIGxldmVsID09PSBcImVycm9yXCIpO1xuXHRyZXR1cm4gc2hvdWxkTG9nO1xufVxuXG5mdW5jdGlvbiBsb2dHcm91cChsb2dGbikge1xuXHRyZXR1cm4gZnVuY3Rpb24obGV2ZWwsIG1zZykge1xuXHRcdGlmIChzaG91bGRMb2cobGV2ZWwpKSB7XG5cdFx0XHRsb2dGbihtc2cpO1xuXHRcdH1cblx0fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsZXZlbCwgbXNnKSB7XG5cdGlmIChzaG91bGRMb2cobGV2ZWwpKSB7XG5cdFx0aWYgKGxldmVsID09PSBcImluZm9cIikge1xuXHRcdFx0Y29uc29sZS5sb2cobXNnKTtcblx0XHR9IGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5pbmdcIikge1xuXHRcdFx0Y29uc29sZS53YXJuKG1zZyk7XG5cdFx0fSBlbHNlIGlmIChsZXZlbCA9PT0gXCJlcnJvclwiKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKG1zZyk7XG5cdFx0fVxuXHR9XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBub2RlL25vLXVuc3VwcG9ydGVkLWZlYXR1cmVzL25vZGUtYnVpbHRpbnMgKi9cbnZhciBncm91cCA9IGNvbnNvbGUuZ3JvdXAgfHwgZHVtbXk7XG52YXIgZ3JvdXBDb2xsYXBzZWQgPSBjb25zb2xlLmdyb3VwQ29sbGFwc2VkIHx8IGR1bW15O1xudmFyIGdyb3VwRW5kID0gY29uc29sZS5ncm91cEVuZCB8fCBkdW1teTtcbi8qIGVzbGludC1lbmFibGUgbm9kZS9uby11bnN1cHBvcnRlZC1mZWF0dXJlcy9ub2RlLWJ1aWx0aW5zICovXG5cbm1vZHVsZS5leHBvcnRzLmdyb3VwID0gbG9nR3JvdXAoZ3JvdXApO1xuXG5tb2R1bGUuZXhwb3J0cy5ncm91cENvbGxhcHNlZCA9IGxvZ0dyb3VwKGdyb3VwQ29sbGFwc2VkKTtcblxubW9kdWxlLmV4cG9ydHMuZ3JvdXBFbmQgPSBsb2dHcm91cChncm91cEVuZCk7XG5cbm1vZHVsZS5leHBvcnRzLnNldExvZ0xldmVsID0gZnVuY3Rpb24obGV2ZWwpIHtcblx0bG9nTGV2ZWwgPSBsZXZlbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzLmZvcm1hdEVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG5cdHZhciBtZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG5cdHZhciBzdGFjayA9IGVyci5zdGFjaztcblx0aWYgKCFzdGFjaykge1xuXHRcdHJldHVybiBtZXNzYWdlO1xuXHR9IGVsc2UgaWYgKHN0YWNrLmluZGV4T2YobWVzc2FnZSkgPCAwKSB7XG5cdFx0cmV0dXJuIG1lc3NhZ2UgKyBcIlxcblwiICsgc3RhY2s7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHN0YWNrO1xuXHR9XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5HYW1lID0gdm9pZCAwO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgZWNzeV9iYWJ5bG9uXzEgPSByZXF1aXJlKFwiLi4vZWNzeS1iYWJ5bG9uXCIpO1xyXG5jbGFzcyBHYW1lIGV4dGVuZHMgZWNzeV8xLldvcmxkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IGFsbCBFbnRpdHkgaW5zdGFuY2VzLiAqL1xyXG4gICAgZ2V0IGVudGl0aWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzW1wiZW50aXR5TWFuYWdlclwiXS5fZW50aXRpZXM7XHJcbiAgICB9XHJcbiAgICAvKiogR2V0IGFsbCBTeXN0ZW0gaW5zdGFuY2VzLiAqL1xyXG4gICAgZ2V0IHN5c3RlbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXNbXCJzeXN0ZW1NYW5hZ2VyXCJdLl9zeXN0ZW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCBHYW1lU3lzdGVtIGluc3RhbmNlLiAqL1xyXG4gICAgZ2V0IGdhbWVTeXN0ZW0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3lzdGVtKGVjc3lfYmFieWxvbl8xLkdhbWVTeXN0ZW0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCBzaW5nbGV0b24gb2YgR2FtZSBpbnN0YW5jZS4gKi9cclxuICAgIHN0YXRpYyBpbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLl9nYW1lIHx8ICh0aGlzLl9nYW1lID0gbmV3IEdhbWUoKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IGdhbWUgd2l0aCBhbiBlbXB0eSBzY2VuZS5cclxuICAgICAqIEBwYXJhbSBjYW52YXMgQ2FudmFzIGZvciB3ZWJnbCBjb250ZXh0XHJcbiAgICAgKiBAcGFyYW0gc3lzdGVtcyBTeXN0ZW1zIGdvaW5nIHRvIHVzZWQgYmVzaWRlcyBHYW1lU3lzdGVtLCBUcmFuc2Zvcm1TeXN0ZW0gYW5kIENhbWVyYVN5c3RlbVxyXG4gICAgICovXHJcbiAgICBzdGFydChjYW52YXMsIHN5c3RlbXMpIHtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5yZWdpc3RlclN5c3RlbShlY3N5X2JhYnlsb25fMS5HYW1lU3lzdGVtKVxyXG4gICAgICAgICAgICAucmVnaXN0ZXJTeXN0ZW0oZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtU3lzdGVtKVxyXG4gICAgICAgICAgICAucmVnaXN0ZXJTeXN0ZW0oZWNzeV9iYWJ5bG9uXzEuQ2FtZXJhU3lzdGVtKTtcclxuICAgICAgICBzeXN0ZW1zLmZvckVhY2goc3lzdGVtID0+IHRoaXMucmVnaXN0ZXJTeXN0ZW0oc3lzdGVtKSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3lzdGVtLnN0YXJ0KGNhbnZhcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKiogQ3JlYXRlIGFuIGVudGl0eSB3aXRoIFRyYW5zZm9ybSBjb21wb25lbnQuICovXHJcbiAgICBjcmVhdGVFbnRpdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pO1xyXG4gICAgfVxyXG4gICAgLyoqIENyZWF0ZSBhIHNjZW5lIGVudGl0eS4gKi9cclxuICAgIGNyZWF0ZVNjZW5lKGNvbG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5TY2VuZSwgeyBjb2xvcjogY29sb3IgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogU2hvdyBCYWJ5bG9uLmpzIGluc2VwY3RvciAqL1xyXG4gICAgc2hvd0RlYnVnZ2VyKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN5c3RlbS5hY3RpdmVTY2VuZS5kZWJ1Z0xheWVyLnNob3coKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkdhbWUgPSBHYW1lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNhbWVyYSA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KENhbWVyYSwgeyBwb2ludGVyTG9jazogdHJ1ZSB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBDYW1lcmEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTG9jayBwb2ludGVyIHdoZW4gdXNpbmcgdGhlIGNhbWVyYS5cclxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyX0xvY2tfQVBJXHJcbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBvaW50ZXJMb2NrID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5DYW1lcmEgPSBDYW1lcmE7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuSW5wdXQgPSBleHBvcnRzLklucHV0VHlwZXMgPSB2b2lkIDA7XHJcbnZhciBJbnB1dFR5cGVzO1xyXG4oZnVuY3Rpb24gKElucHV0VHlwZXMpIHtcclxuICAgIElucHV0VHlwZXNbXCJLZXlib2FyZFwiXSA9IFwiS2V5Ym9hcmRcIjtcclxufSkoSW5wdXRUeXBlcyA9IGV4cG9ydHMuSW5wdXRUeXBlcyB8fCAoZXhwb3J0cy5JbnB1dFR5cGVzID0ge30pKTtcclxuLyoqXHJcbiAqIEBleGFtcGxlIEtleWJvYXJkXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KElucHV0LCB7IG9uS2V5OiBvbktleSB9KTtcclxuICogZnVuY3Rpb24gb25LZXkoa2V5LCBkb3duLCB1cCkge1xyXG4gKiAgIGlmIChkb3duKSBjb25zb2xlLmxvZyhrZXkgKyBcIiBpcyBwcmVzc2luZy5cIik7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBJbnB1dCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKiogQGRlZmF1bHQgXCJLZXlib2FyZFwiICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gSW5wdXRUeXBlcy5LZXlib2FyZDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLklucHV0ID0gSW5wdXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTGlnaHQgPSBleHBvcnRzLkxpZ2h0VHlwZXMgPSB2b2lkIDA7XHJcbmNvbnN0IG1hdGhVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGhVdGlsc1wiKTtcclxudmFyIExpZ2h0VHlwZXM7XHJcbihmdW5jdGlvbiAoTGlnaHRUeXBlcykge1xyXG4gICAgTGlnaHRUeXBlc1tcIlBvaW50XCJdID0gXCJQb2ludFwiO1xyXG4gICAgTGlnaHRUeXBlc1tcIkRpcmVjdGlvbmFsXCJdID0gXCJEaXJlY3Rpb25hbFwiO1xyXG4gICAgTGlnaHRUeXBlc1tcIlNwb3RcIl0gPSBcIlNwb3RcIjtcclxuICAgIExpZ2h0VHlwZXNbXCJIZW1pc3BoZXJpY1wiXSA9IFwiSGVtaXNwaGVyaWNcIjtcclxufSkoTGlnaHRUeXBlcyA9IGV4cG9ydHMuTGlnaHRUeXBlcyB8fCAoZXhwb3J0cy5MaWdodFR5cGVzID0ge30pKTtcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KExpZ2h0LCB7IGNvbG9yOiB7IGRpZmZ1c2U6IFwiI0FBRkZBQVwiIH0gfSk7XHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTGlnaHQsIHsgdHlwZTogTGlnaHRUeXBlcy5Qb2ludCwgaW50ZW5zaXR5OiAyIH0pO1xyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KExpZ2h0LCB7IHR5cGU6IExpZ2h0VHlwZXMuRGlyZWN0aW9uYWwsIGRpcmVjdGlvbjogeyB4OiAwLCB5OiAwLCB6OiAxIH0gfSk7XHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTGlnaHQsIHsgdHlwZTogTGlnaHRUeXBlcy5TcG90LCBkaXJlY3Rpb246IHsgeDogMCwgeTogMCwgejogMSB9LCBhbmdsZTogMzAsIGV4cG9uZW50OiAyIH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIExpZ2h0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCBcIkhlbWlzcGhlcmljXCIgKi9cclxuICAgICAgICB0aGlzLnR5cGUgPSBMaWdodFR5cGVzLkhlbWlzcGhlcmljO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly9kb2MuYmFieWxvbmpzLmNvbS9hcGkvY2xhc3Nlcy9iYWJ5bG9uLnNoYWRvd2xpZ2h0I2RpcmVjdGlvblxyXG4gICAgICAgICAqIEBkZWZhdWx0IDAsMCwwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBtYXRoVXRpbHNfMS54eXooKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkxpZ2h0ID0gTGlnaHQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTWF0ZXJpYWwgPSB2b2lkIDA7XHJcbmNvbnN0IG1hdGVyaWFsVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRlcmlhbFV0aWxzXCIpO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTWVzaCkuYWRkQ29tcG9uZW50KE1hdGVyaWFsLCB7XHJcbiAqICAgIGFscGhhOiAwLjcsXHJcbiAqICAgIGNvbG9yOiB7IGRpZmZ1c2U6IFwiI0U3NEMzQ1wiIH1cclxuICogfSk7XHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTWVzaCkuYWRkQ29tcG9uZW50KE1hdGVyaWFsLCB7XHJcbiAqICAgIHRleHR1cmU6IHtcclxuICogICAgICBkaWZmdXNlOiB7IHVybDogXCJQQVRIX1RPX1RFWFRVUkVcIiwgdVNjYWxlOiA0LCB2U2NhbGU6IDQgfVxyXG4gKiAgICB9XHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICovXHJcbmNsYXNzIE1hdGVyaWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCB7IGRpZmZ1c2U6IFwiI2ZmZmZmZlwiIH0gKi9cclxuICAgICAgICB0aGlzLmNvbG9yID0gbWF0ZXJpYWxVdGlsc18xLm1hdGVyaWFsQ29sb3JIZXgoKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLk1hdGVyaWFsID0gTWF0ZXJpYWw7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuTWVzaCA9IGV4cG9ydHMuTWVzaFR5cGVzID0gdm9pZCAwO1xyXG52YXIgTWVzaFR5cGVzO1xyXG4oZnVuY3Rpb24gKE1lc2hUeXBlcykge1xyXG4gICAgTWVzaFR5cGVzW1wiQm94XCJdID0gXCJCb3hcIjtcclxuICAgIE1lc2hUeXBlc1tcIlBsYW5lXCJdID0gXCJQbGFuZVwiO1xyXG4gICAgTWVzaFR5cGVzW1wiU3BoZXJlXCJdID0gXCJTcGhlcmVcIjtcclxuICAgIE1lc2hUeXBlc1tcIkdyb3VuZFwiXSA9IFwiR3JvdW5kXCI7XHJcbiAgICBNZXNoVHlwZXNbXCJVcmxcIl0gPSBcIlVybFwiO1xyXG59KShNZXNoVHlwZXMgPSBleHBvcnRzLk1lc2hUeXBlcyB8fCAoZXhwb3J0cy5NZXNoVHlwZXMgPSB7fSkpO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTWVzaCk7XHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoTWVzaCwgeyB0eXBlOiBNZXNoVHlwZXMuR3JvdW5kLCBvcHRpb25zOiB7IHdpZHRoOiAyLCBoZWlnaHQ6IDIgfSB9KTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoLCB7IHR5cGU6IE1lc2hUeXBlcy5TcGhlcmUsIG9wdGlvbnM6IHsgZGlhbWV0ZXI6IDIgfSB9KTtcclxuICogZW50aXR5LmFkZENvbXBvbmVudChNZXNoLCB7IHR5cGU6IE1lc2hUeXBlcy5VcmwsIHVybDogXCJQQVRIX1RPX01FU0hcIiB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBNZXNoIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCBcIkJveFwiICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gTWVzaFR5cGVzLkJveDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLk1lc2ggPSBNZXNoO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlBhcnRpY2xlID0gZXhwb3J0cy5QYXJ0aWNsZVR5cGVzID0gdm9pZCAwO1xyXG5jb25zdCBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRoVXRpbHNcIik7XHJcbnZhciBQYXJ0aWNsZVR5cGVzO1xyXG4oZnVuY3Rpb24gKFBhcnRpY2xlVHlwZXMpIHtcclxuICAgIFBhcnRpY2xlVHlwZXNbXCJQb2ludFwiXSA9IFwiUG9pbnRcIjtcclxuICAgIFBhcnRpY2xlVHlwZXNbXCJCb3hcIl0gPSBcIkJveFwiO1xyXG4gICAgUGFydGljbGVUeXBlc1tcIlNwaGVyZVwiXSA9IFwiU3BoZXJlXCI7XHJcbiAgICBQYXJ0aWNsZVR5cGVzW1wiRGlyZWN0ZWRTcGhlcmVcIl0gPSBcIkRpcmVjdGVkU3BoZXJlXCI7XHJcbiAgICBQYXJ0aWNsZVR5cGVzW1wiSGVtaXNwaGVyZVwiXSA9IFwiSGVtaXNwaGVyZVwiO1xyXG4gICAgUGFydGljbGVUeXBlc1tcIkN5bGluZGVyXCJdID0gXCJDeWxpbmRlclwiO1xyXG4gICAgUGFydGljbGVUeXBlc1tcIkRpcmVjdGVkQ3lsaW5kZXJcIl0gPSBcIkRpcmVjdGVkQ3lsaW5kZXJcIjtcclxuICAgIFBhcnRpY2xlVHlwZXNbXCJDb25lXCJdID0gXCJDb25lXCI7XHJcbn0pKFBhcnRpY2xlVHlwZXMgPSBleHBvcnRzLlBhcnRpY2xlVHlwZXMgfHwgKGV4cG9ydHMuUGFydGljbGVUeXBlcyA9IHt9KSk7XHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZW50aXR5LmFkZENvbXBvbmVudChQYXJ0aWNsZSwge1xyXG4gKiAgICBlbWl0dGVyOiB7IHg6IDAsIHk6IDAsIHo6IDEgfSxcclxuICogICAgdGV4dHVyZToge1xyXG4gKiAgICAgIGRpZmZ1c2U6IHsgdXJsOiBcIlBBVEhfVE9fUEFSVElDTEVfVEVYVFVSRVwiIH1cclxuICogICAgfVxyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBQYXJ0aWNsZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKiogQGRlZmF1bHQgXCJQb2ludFwiICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUGFydGljbGVUeXBlcy5Qb2ludDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vYXBpL2NsYXNzZXMvYmFieWxvbi5wYXJ0aWNsZXN5c3RlbSNjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqIEBkZWZhdWx0IDEwMFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2FwYWNpdHkgPSAxMDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHNlZSBodHRwczovL2RvYy5iYWJ5bG9uanMuY29tL2FwaS9jbGFzc2VzL2JhYnlsb24ucGFydGljbGVzeXN0ZW0jZW1pdHRlclxyXG4gICAgICAgICAqIEBkZWZhdWx0IDAsMCwwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5lbWl0dGVyID0gbWF0aFV0aWxzXzEueHl6KCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG1lbWJlcm9mIFBvaW50LCBCb3gsIERpcmVjdGVkU3BoZXJlLCBDeWxpbmRlclxyXG4gICAgICAgICAqIEBkZWZhdWx0IDAsMCwwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24xID0gbWF0aFV0aWxzXzEueHl6KCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG1lbWJlcm9mIFBvaW50LCBCb3gsIERpcmVjdGVkU3BoZXJlLCBDeWxpbmRlclxyXG4gICAgICAgICAqIEBkZWZhdWx0IDEwLDEwLDEwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24yID0gbWF0aFV0aWxzXzEueHl6KDEwLCAxMCwgMTApO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCb3hcclxuICAgICAgICAgKiBAZGVmYXVsdCAwLDAsMFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubWluRW1pdEJveCA9IG1hdGhVdGlsc18xLnh5eigpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBtZW1iZXJvZiBCb3hcclxuICAgICAgICAgKiBAZGVmYXVsdCAwLDAsMFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubWF4RW1pdEJveCA9IG1hdGhVdGlsc18xLnh5eigpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUGFydGljbGUgPSBQYXJ0aWNsZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TY2VuZSA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiBlbnRpdHkuYWRkQ29tcG9uZW50KFNjZW5lLCB7IGNvbG9yOiB7IGNsZWFyOiBcIjEyM0FCQ0ZGXCIgfSB9KTtcclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBTY2VuZSB7XHJcbn1cclxuZXhwb3J0cy5TY2VuZSA9IFNjZW5lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlRyYW5zZm9ybSA9IHZvaWQgMDtcclxuY29uc3QgbWF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0aFV0aWxzXCIpO1xyXG4vKipcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIGVudGl0eS5hZGRDb21wb25lbnQoVHJhbnNmb3JtKTtcclxuICogYGBgXHJcbiAqL1xyXG5jbGFzcyBUcmFuc2Zvcm0ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqIEBkZWZhdWx0IDAsMCwwICovXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG1hdGhVdGlsc18xLnh5eigpO1xyXG4gICAgICAgIC8qKiBAZGVmYXVsdCAwLDAsMCAqL1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBtYXRoVXRpbHNfMS54eXooKTtcclxuICAgICAgICAvKiogQGRlZmF1bHQgMSwxLDEgKi9cclxuICAgICAgICB0aGlzLnNjYWxlID0gbWF0aFV0aWxzXzEueHl6KDEsIDEsIDEpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuVHJhbnNmb3JtID0gVHJhbnNmb3JtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9TY2VuZVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9UcmFuc2Zvcm1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vQ2FtZXJhXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL01lc2hcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTGlnaHRcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWF0ZXJpYWxcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vUGFydGljbGVcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vSW5wdXRcIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pKTtcclxudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9TY2VuZUNvbXBvbmVudFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9TY2VuZUNvbG9yUHJvcGVydGllc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9TY2VuZVRleHR1cmVQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL09iamVjdENvbXBvbmVudFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9YWVpQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL01lc2hPcHRpb25zXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0NvbG9yQ29tcG9uZW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1RleHR1cmVDb21wb25lbnRcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vVGV4dHVyZUF0dHJpYnV0ZXNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWF0ZXJpYWxDb2xvclByb3BlcnRpZXNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vTWF0ZXJpYWxUZXh0dXJlUHJvcGVydGllc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9MaWdodENvbG9yUHJvcGVydGllc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9QYXJ0aWNsZVRleHR1cmVQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1BhcnRpY2xlQ29sb3JQcm9wZXJ0aWVzXCIpLCBleHBvcnRzKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KSk7XHJcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vc3lzdGVtcy9pbmRleFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jb21wb25lbnRzL2luZGV4XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvdHlwZXMvaW5kZXhcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHMvaW5kZXhcIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNhbWVyYVN5c3RlbSA9IHZvaWQgMDtcclxuY29uc3QgQkFCWUxPTiA9IHJlcXVpcmUoXCJiYWJ5bG9uanNcIik7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvaW5kZXhcIik7XHJcbmNvbnN0IGdhbWVVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL2dhbWVVdGlsc1wiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuY29uc3QgR2FtZVN5c3RlbV8xID0gcmVxdWlyZShcIi4vR2FtZVN5c3RlbVwiKTtcclxuLyoqIFN5c3RlbSBmb3IgQ2FtZXJhIGNvbXBvbmVudCAqL1xyXG5sZXQgQ2FtZXJhU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgQ2FtZXJhU3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIC8qKiA8QkFCWUxPTi5TY2VuZS51aWQsIENhbWVyYSBjb21wb25lbnQ+ICovXHJcbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgaW5pdCgpIHtcclxuICAgICAgICAgICAgZ2FtZVV0aWxzXzEuZ2V0U3lzdGVtKHRoaXMsIEdhbWVTeXN0ZW1fMS5HYW1lU3lzdGVtKS5vblNjZW5lU3dpdGNoZWQuYWRkKHNjZW5lID0+IHRoaXMuX3VwZGF0ZUNvbnRyb2woc2NlbmUpKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9pbnRlckxvY2sgPSB0aGlzLl9wb2ludGVyTG9jay5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5jYW1lcmEuYWRkZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2FtZXJhID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLkNhbWVyYSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2NlbmUgPSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBjYW1lcmEuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLm9iamVjdCA9IG5ldyBCQUJZTE9OLkZyZWVDYW1lcmEoXCJcIiwgQkFCWUxPTi5WZWN0b3IzLlplcm8oKSwgc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW1lcmFzLnNldChzY2VuZS51aWQsIGNhbWVyYSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDb250cm9sKHNjZW5lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5jYW1lcmEucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjYW1lcmEgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuQ2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIGNhbWVyYS5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVDb250cm9sKHNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbWVyYXMuaGFzKHNjZW5lLnVpZCkgJiYgdGhpcy5fY2FtZXJhcy5kZWxldGUoc2NlbmUudWlkKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEuZGlzcG9zZU9iamVjdChjYW1lcmEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZUNvbnRyb2wodGFyZ2V0U2NlbmUpIHtcclxuICAgICAgICAgICAgaWYgKHRhcmdldFNjZW5lLnVpZCA9PT0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcykudWlkKSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5nZXRTY2VuZXModGhpcykuZm9yRWFjaChzY2VuZSA9PiB0aGlzLl9yZW1vdmVDb250cm9sKHNjZW5lKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2FtZXJhID0gdGhpcy5fY2FtZXJhcy5nZXQodGFyZ2V0U2NlbmUudWlkKTtcclxuICAgICAgICAgICAgICAgIGNhbWVyYS5vYmplY3QuYXR0YWNoQ29udHJvbChnYW1lVXRpbHNfMS5nZXRSZW5kZXJpbmdDYW52YXModGhpcykpO1xyXG4gICAgICAgICAgICAgICAgY2FtZXJhLnBvaW50ZXJMb2NrID8gdGFyZ2V0U2NlbmUub25Qb2ludGVyT2JzZXJ2YWJsZS5hZGQodGhpcy5fcG9pbnRlckxvY2spIDogZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX3JlbW92ZUNvbnRyb2woc2NlbmUpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FtZXJhcy5mb3JFYWNoKChjYW1lcmEsIHNjZW5lVUlEKSA9PiBzY2VuZVVJRCA9PT0gc2NlbmUudWlkICYmIGNhbWVyYS5vYmplY3QuZGV0YWNoQ29udHJvbChnYW1lVXRpbHNfMS5nZXRSZW5kZXJpbmdDYW52YXModGhpcykpKTtcclxuICAgICAgICAgICAgc2NlbmUub25Qb2ludGVyT2JzZXJ2YWJsZS5yZW1vdmVDYWxsYmFjayh0aGlzLl9wb2ludGVyTG9jayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9wb2ludGVyTG9jayhwb2ludGVySW5mbykge1xyXG4gICAgICAgICAgICBwb2ludGVySW5mby5ldmVudC50eXBlID09PSBcInBvaW50ZXJkb3duXCIgJiYgKGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCB8fCBnYW1lVXRpbHNfMS5nZXRSZW5kZXJpbmdDYW52YXModGhpcykucmVxdWVzdFBvaW50ZXJMb2NrKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBDYW1lcmFTeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICBjYW1lcmE6IHsgY29tcG9uZW50czogW2luZGV4XzEuQ2FtZXJhXSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlIH0gfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FtZXJhU3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLkNhbWVyYVN5c3RlbSA9IENhbWVyYVN5c3RlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5HYW1lU3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBCQUJZTE9OID0gcmVxdWlyZShcImJhYnlsb25qc1wiKTtcclxuY29uc3QgQkFCWUxPTkdVSSA9IHJlcXVpcmUoXCJiYWJ5bG9uanMtZ3VpXCIpO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCB3b3JsZFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvd29ybGRVdGlsc1wiKTtcclxuY29uc3Qgb2JqZWN0VXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9vYmplY3RVdGlsc1wiKTtcclxuY29uc3QgbWF0ZXJpYWxVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL21hdGVyaWFsVXRpbHNcIik7XHJcbi8qKiBDb3JlIHN5c3RlbSBvZiBlY3N5LWJhYnlsb24uICovXHJcbmxldCBHYW1lU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgR2FtZVN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAvKiogPFNjZW5lIFVJRCwgQkFCWUxPTi5Bc3NldHNNYW5hZ2VyPiAqL1xyXG4gICAgICAgICAgICB0aGlzLl9hc3NldE1hbmFnZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICAvKiogT2JzZXJ2YWJsZSBldmVudCB3aGVuIGFjdGl2ZSBzY2VuZSBpcyBzd2l0Y2hlZC4gKi9cclxuICAgICAgICAgICAgdGhpcy5vblNjZW5lU3dpdGNoZWQgPSBuZXcgQkFCWUxPTi5PYnNlcnZhYmxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBHZXQgY2FudmFzIHVzZWQgZm9yIHJlbmRlcmluZy4gKi9cclxuICAgICAgICBnZXQgcmVuZGVyaW5nQ2FudmFzKCkgeyByZXR1cm4gdGhpcy5fZW5naW5lLmdldFJlbmRlcmluZ0NhbnZhcygpOyB9XHJcbiAgICAgICAgLyoqIEdldCBhbGwgc2NlbmVzIGluIGVuZ2luZS4gKi9cclxuICAgICAgICBnZXQgc2NlbmVzKCkgeyByZXR1cm4gdGhpcy5fZW5naW5lLnNjZW5lczsgfVxyXG4gICAgICAgIC8qKiBHZXQgYWN0aXZlIHNjZW5lLiAqL1xyXG4gICAgICAgIGdldCBhY3RpdmVTY2VuZSgpIHsgcmV0dXJuIHRoaXMuX2FjdGl2ZVNjZW5lOyB9XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBpbml0KCkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXIgPSB0aGlzLl9yZW5kZXIuYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBleGVjdXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuc2NlbmUuYWRkZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2NlbmUgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuU2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgc2NlbmUub2JqZWN0ID0gbmV3IEJBQllMT04uU2NlbmUodGhpcy5fZW5naW5lLCBzY2VuZS5vcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VuZ2luZS5zY2VuZXMubGVuZ3RoID09PSAxICYmICh0aGlzLl9hY3RpdmVTY2VuZSA9IHNjZW5lLm9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTY2VuZShlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGFzc2V0TWFuYWdlciBmb3IgZWFjaCBzY2VuZXMgXHJcbiAgICAgICAgICAgICAgICBsZXQgYXNzZXRNYW5hZ2VyID0gbmV3IEJBQllMT04uQXNzZXRzTWFuYWdlcihzY2VuZS5vYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXRNYW5hZ2VyLnVzZURlZmF1bHRMb2FkaW5nU2NyZWVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hc3NldE1hbmFnZXJzLnNldChzY2VuZS5vYmplY3QudWlkLCBhc3NldE1hbmFnZXIpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2t5Ym94KHNjZW5lLm9iamVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuc2NlbmUuY2hhbmdlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNjZW5lKGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuc2NlbmUucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5TY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLmRpc3Bvc2VPYmplY3Qoc2NlbmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZVNjZW5lKGVudGl0eSkge1xyXG4gICAgICAgICAgICBsZXQgc2NlbmUgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuU2NlbmUpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIHNjZW5lKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dHVyZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbFV0aWxzXzEudXBkYXRlVGV4dHVyZShzY2VuZSwgc2NlbmUudGV4dHVyZSwgdGhpcy5nZXRBc3NldE1hbmFnZXIoZW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2xvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVDb2xvcihzY2VuZSwgc2NlbmUuY29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdFZhbHVlKHNjZW5lLCBwcm9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZUNvbG9yKHNjZW5lLCBjb2xvcikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2xlYXJcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUub2JqZWN0W2Ake3Byb3B9Q29sb3JgXSA9IG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yNChjb2xvcltwcm9wXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLm9iamVjdFtgJHtwcm9wfUNvbG9yYF0gPSBtYXRlcmlhbFV0aWxzXzEuaGV4VG9Db2xvcjMoY29sb3JbcHJvcF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdGFydCBnYW1lIHN5c3RlbSBpbiB0aGUgd29ybGQgY2FuIGJlIHVzZWQgYnkgb3RoZXIgc3lzdGVtcyAmIGNvbXBvbmVudHMuXHJcbiAgICAgICAgICogQHNlZSBodHRwczovL2RvYy5iYWJ5bG9uanMuY29tL2FwaS9jbGFzc2VzL2JhYnlsb24uZW5naW5lI2NvbnN0cnVjdG9yXHJcbiAgICAgICAgICogQHBhcmFtIGNhbnZhcyBXZWJHTCBjb250ZXh0IHRvIGJlIHVzZWQgZm9yIHJlbmRlcmluZ1xyXG4gICAgICAgICAqIEBwYXJhbSBhbnRpYWxpYXMgZGVmaW5lcyBlbmFibGUgYW50aWFsaWFzaW5nIChkZWZhdWx0OiBmYWxzZSlcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBAc2VlIGh0dHBzOi8vZG9jLmJhYnlsb25qcy5jb20vYXBpL2ludGVyZmFjZXMvYmFieWxvbi5lbmdpbmVvcHRpb25zXHJcbiAgICAgICAgICogQHBhcmFtIGFkYXB0VG9EZXZpY2VSYXRpbyBkZWZpbmVzIHdoZXRoZXIgdG8gYWRhcHQgdG8gdGhlIGRldmljZSdzIHZpZXdwb3J0IGNoYXJhY3RlcmlzdGljcyAoZGVmYXVsdDogZmFsc2UpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhcnQoY2FudmFzLCBhbnRpYWxpYXMsIG9wdGlvbnMsIGFkYXB0VG9EZXZpY2VSYXRpbykge1xyXG4gICAgICAgICAgICB0aGlzLl9lbmdpbmUgPSBuZXcgQkFCWUxPTi5FbmdpbmUoY2FudmFzLCBhbnRpYWxpYXMsIG9wdGlvbnMsIGFkYXB0VG9EZXZpY2VSYXRpbyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2VuZ2luZS5ydW5SZW5kZXJMb29wKHRoaXMuX3JlbmRlcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTd2l0Y2ggdG8gYSBzY2VuZSBieSBnaXZlbiBzY2VuZSBlbnRpdHkuXHJcbiAgICAgICAgICogQHBhcmFtIHNjZW5lIFNjZW5lIGVudGl0eVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN3aXRjaFNjZW5lKHNjZW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2ZVNjZW5lID0gc2NlbmUuZ2V0Q29tcG9uZW50KGluZGV4XzEuU2NlbmUpLm9iamVjdDtcclxuICAgICAgICAgICAgdGhpcy5vblNjZW5lU3dpdGNoZWQubm90aWZ5T2JzZXJ2ZXJzKHRoaXMuX2FjdGl2ZVNjZW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBzY2VuZSBBc3NldE1hbmFnZXIgb3IgcmV0dXJuIEFzc2V0TWFuYWdlciBpbiBhY3RpdmUgc2NlbmUuXHJcbiAgICAgICAgICogQHBhcmFtIHNjZW5lIFNjZW5lIGVudGl0eVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEFzc2V0TWFuYWdlcihzY2VuZSkge1xyXG4gICAgICAgICAgICBpZiAoc2NlbmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hc3NldE1hbmFnZXJzLmdldChzY2VuZS5nZXRDb21wb25lbnQoaW5kZXhfMS5TY2VuZSkub2JqZWN0LnVpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYXNzZXRNYW5hZ2Vycy5nZXQodGhpcy5fYWN0aXZlU2NlbmUudWlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMb2cgYSBtZXNzYWdlIHRvIHRoZSBzY3JlZW5cclxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSB0ZXh0IHRvIGRpc3BsYXkgaW4gYSBzdGFjayBwYW5lbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxvZ01lc3NhZ2UobWVzc2FnZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9nJywgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21lc3NhZ2VzID0gY3JlYXRlVGV4dFBhbmVsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZXMuYWRkQ29udHJvbChjcmVhdGVUZXh0QmxvY2sobWVzc2FnZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfcmVuZGVyKCkge1xyXG4gICAgICAgICAgICB3b3JsZFV0aWxzXzEuZ2V0V29ybGQodGhpcykuZXhlY3V0ZSh0aGlzLl9lbmdpbmUuZ2V0RGVsdGFUaW1lKCksIHBlcmZvcm1hbmNlLm5vdygpKTtcclxuICAgICAgICAgICAgd29ybGRVdGlsc18xLmdldFdvcmxkKHRoaXMpLmVuYWJsZWQgJiYgdGhpcy5fYWN0aXZlU2NlbmUucmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIEdhbWVTeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICBzY2VuZTogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5TY2VuZV0sIGxpc3RlbjogeyBhZGRlZDogdHJ1ZSwgcmVtb3ZlZDogdHJ1ZSwgY2hhbmdlZDogW2luZGV4XzEuU2NlbmVdIH0gfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2FtZVN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5HYW1lU3lzdGVtID0gR2FtZVN5c3RlbTtcclxuZnVuY3Rpb24gY3JlYXRlVGV4dFBhbmVsKCkge1xyXG4gICAgdmFyIGFkdmFuY2VkVGV4dHVyZSA9IEJBQllMT05HVUkuQWR2YW5jZWREeW5hbWljVGV4dHVyZS5DcmVhdGVGdWxsc2NyZWVuVUkoXCJVSVwiKTtcclxuICAgIHZhciBncmlkID0gbmV3IEJBQllMT05HVUkuR3JpZCgpO1xyXG4gICAgZ3JpZC5hZGRDb2x1bW5EZWZpbml0aW9uKDEgLyAzKTtcclxuICAgIGdyaWQuYWRkQ29sdW1uRGVmaW5pdGlvbigxIC8gMyk7XHJcbiAgICBncmlkLmFkZENvbHVtbkRlZmluaXRpb24oMSAvIDMpO1xyXG4gICAgYWR2YW5jZWRUZXh0dXJlLmFkZENvbnRyb2woZ3JpZCk7XHJcbiAgICB2YXIgc3RhY2sgPSBuZXcgQkFCWUxPTkdVSS5TdGFja1BhbmVsKCk7XHJcbiAgICBzdGFjay52ZXJ0aWNhbEFsaWdubWVudCA9IEJBQllMT05HVUkuQ29udHJvbC5WRVJUSUNBTF9BTElHTk1FTlRfQk9UVE9NO1xyXG4gICAgZ3JpZC5hZGRDb250cm9sKHN0YWNrLCAwLCAyKTtcclxuICAgIHJldHVybiBzdGFjaztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVUZXh0QmxvY2sodGV4dCwgY29sb3IgPSBcInJlZFwiKSB7XHJcbiAgICB2YXIgdGV4dEJsb2NrID0gbmV3IEJBQllMT05HVUkuVGV4dEJsb2NrKCk7XHJcbiAgICB0ZXh0QmxvY2sudGV4dCA9IHRleHQ7XHJcbiAgICB0ZXh0QmxvY2suY29sb3IgPSBjb2xvcjtcclxuICAgIHRleHRCbG9jay5mb250U2l6ZSA9IDEyO1xyXG4gICAgdGV4dEJsb2NrLnRleHRIb3Jpem9udGFsQWxpZ25tZW50ID0gQkFCWUxPTkdVSS5Db250cm9sLkhPUklaT05UQUxfQUxJR05NRU5UX0xFRlQ7XHJcbiAgICB0ZXh0QmxvY2suaGVpZ2h0ID0gXCIxNXB4XCI7XHJcbiAgICByZXR1cm4gdGV4dEJsb2NrO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNreWJveChzY2VuZSkge1xyXG4gICAgdmFyIHNreWJveCA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlQm94KFwic2t5Qm94XCIsIHsgc2l6ZTogMTAwMC4wIH0sIHNjZW5lKTtcclxuICAgIHZhciBza3lib3hNYXRlcmlhbCA9IG5ldyBCQUJZTE9OLlN0YW5kYXJkTWF0ZXJpYWwoXCJza3lCb3hcIiwgc2NlbmUpO1xyXG4gICAgc2t5Ym94TWF0ZXJpYWwuYmFja0ZhY2VDdWxsaW5nID0gZmFsc2U7XHJcbiAgICBza3lib3hNYXRlcmlhbC5yZWZsZWN0aW9uVGV4dHVyZSA9IG5ldyBCQUJZTE9OLkN1YmVUZXh0dXJlKFwidGV4dHVyZXMvc2t5Ym94XCIsIHNjZW5lKTtcclxuICAgIHNreWJveE1hdGVyaWFsLnJlZmxlY3Rpb25UZXh0dXJlLmNvb3JkaW5hdGVzTW9kZSA9IEJBQllMT04uVGV4dHVyZS5TS1lCT1hfTU9ERTtcclxuICAgIHNreWJveE1hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IG5ldyBCQUJZTE9OLkNvbG9yMygwLCAwLCAwKTtcclxuICAgIHNreWJveE1hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBuZXcgQkFCWUxPTi5Db2xvcjMoMCwgMCwgMCk7XHJcbiAgICBza3lib3gubWF0ZXJpYWwgPSBza3lib3hNYXRlcmlhbDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLklucHV0U3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nYW1lVXRpbHNcIik7XHJcbmNvbnN0IEdhbWVTeXN0ZW1fMSA9IHJlcXVpcmUoXCIuL0dhbWVTeXN0ZW1cIik7XHJcbi8qKiBTeXN0ZW0gZm9yIElucHV0IGNvbXBvbmVudCAqL1xyXG5sZXQgSW5wdXRTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBJbnB1dFN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGdhbWVVdGlsc18xLmdldFN5c3RlbSh0aGlzLCBHYW1lU3lzdGVtXzEuR2FtZVN5c3RlbSkub25TY2VuZVN3aXRjaGVkLmFkZChzY2VuZSA9PiB0aGlzLl91cGRhdGVPbktleShzY2VuZSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9vbktleSA9IHRoaXMuX29uS2V5LmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmlucHV0LmFkZGVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0ID0gZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLklucHV0KTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIGlucHV0LnNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faW5wdXRzLmhhcyhzY2VuZS51aWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dHMuc2V0KHNjZW5lLnVpZCwgaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlT25LZXkoc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmlucHV0LnJlbW92ZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuSW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNjZW5lID0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgaW5wdXQuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChpbnB1dC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0cy5oYXMoc2NlbmUudWlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5wdXRzLmRlbGV0ZShzY2VuZS51aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlT25LZXkoc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZU9uS2V5KHRhcmdldFNjZW5lKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRTY2VuZS51aWQgPT09IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMpLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEuZ2V0U2NlbmVzKHRoaXMpLmZvckVhY2goc2NlbmUgPT4gdGhpcy5fcmVtb3ZlT25LZXkoc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5faW5wdXRzLmdldCh0YXJnZXRTY2VuZS51aWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXQub25LZXkgJiYgdGFyZ2V0U2NlbmUub25LZXlib2FyZE9ic2VydmFibGUuYWRkKHRoaXMuX29uS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfcmVtb3ZlT25LZXkoc2NlbmUpIHtcclxuICAgICAgICAgICAgc2NlbmUub25LZXlib2FyZE9ic2VydmFibGUucmVtb3ZlQ2FsbGJhY2sodGhpcy5fb25LZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfb25LZXkoa2V5SW5mbykge1xyXG4gICAgICAgICAgICAvLyBCQUJZTE9OLktleWJvYXJkRXZlbnRUeXBlcy5LRVlET1dOID0gMSwgQkFCWUxPTi5LZXlib2FyZEV2ZW50VHlwZXMuS0VZVVAgPSAyXHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0Lm9uS2V5LmNhbGwodGhpcy5faW5wdXQsIGtleUluZm8uZXZlbnQua2V5LCBrZXlJbmZvLnR5cGUgPT09IDEsIGtleUluZm8udHlwZSA9PT0gMik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBoaWRkZW4gKi9cclxuICAgIElucHV0U3lzdGVtLnF1ZXJpZXMgPSB7XHJcbiAgICAgICAgaW5wdXQ6IHsgY29tcG9uZW50czogW2luZGV4XzEuSW5wdXRdLCBsaXN0ZW46IHsgYWRkZWQ6IHRydWUsIHJlbW92ZWQ6IHRydWUgfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBJbnB1dFN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5JbnB1dFN5c3RlbSA9IElucHV0U3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkxpZ2h0U3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBCQUJZTE9OID0gcmVxdWlyZShcImJhYnlsb25qc1wiKTtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9pbmRleFwiKTtcclxuY29uc3QgZ2FtZVV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2FtZVV0aWxzXCIpO1xyXG5jb25zdCBtYXRlcmlhbFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0ZXJpYWxVdGlsc1wiKTtcclxuY29uc3QgbWF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0aFV0aWxzXCIpO1xyXG5jb25zdCBvYmplY3RVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL29iamVjdFV0aWxzXCIpO1xyXG4vKiogU3lzdGVtIGZvciBMaWdodCBjb21wb25lbnQgKi9cclxubGV0IExpZ2h0U3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgTGlnaHRTeXN0ZW0gZXh0ZW5kcyBlY3N5XzEuU3lzdGVtIHtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5saWdodC5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaWdodCA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5MaWdodCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKGxpZ2h0LmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2NlbmUgPSBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBsaWdodC5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0LnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuTGlnaHRUeXBlcy5Qb2ludDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQub2JqZWN0ID0gbmV3IEJBQllMT04uUG9pbnRMaWdodChsaWdodC50eXBlLCBCQUJZTE9OLlZlY3RvcjMuWmVybygpLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5MaWdodFR5cGVzLkRpcmVjdGlvbmFsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5vYmplY3QgPSBuZXcgQkFCWUxPTi5EaXJlY3Rpb25hbExpZ2h0KGxpZ2h0LnR5cGUsIGRpcmVjdGlvbiwgc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuTGlnaHRUeXBlcy5TcG90OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5vYmplY3QgPSBuZXcgQkFCWUxPTi5TcG90TGlnaHQobGlnaHQudHlwZSwgQkFCWUxPTi5WZWN0b3IzLlplcm8oKSwgZGlyZWN0aW9uLCBtYXRoVXRpbHNfMS5kZWdyZWVUb1JhZGlhbnMobGlnaHQuYW5nbGUpLCBsaWdodC5leHBvbmVudCwgc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5vYmplY3QgPSBuZXcgQkFCWUxPTi5IZW1pc3BoZXJpY0xpZ2h0KGluZGV4XzEuTGlnaHRUeXBlcy5IZW1pc3BoZXJpYywgZGlyZWN0aW9uLCBzY2VuZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGlnaHQobGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RzVHJhbnNmb3JtKGVudGl0eSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubGlnaHQuY2hhbmdlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxpZ2h0KGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5MaWdodCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmxpZ2h0LnJlbW92ZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLmRpc3Bvc2VPYmplY3QoZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLkxpZ2h0KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlTGlnaHQobGlnaHQpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBsaWdodCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpcmVjdGlvblwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdFZlY3RvcjMobGlnaHQsIHByb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3JcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29sb3IobGlnaHQsIGxpZ2h0LmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RWYWx1ZShsaWdodCwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVDb2xvcihsaWdodCwgY29sb3IpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgbGlnaHQub2JqZWN0W3Byb3BdID0gbWF0ZXJpYWxVdGlsc18xLmhleFRvQ29sb3IzKGNvbG9yW3Byb3BdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBMaWdodFN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIGxpZ2h0OiB7IGNvbXBvbmVudHM6IFtpbmRleF8xLkxpZ2h0XSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBjaGFuZ2VkOiBbaW5kZXhfMS5MaWdodF0gfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBMaWdodFN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5MaWdodFN5c3RlbSA9IExpZ2h0U3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1hdGVyaWFsU3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBCQUJZTE9OID0gcmVxdWlyZShcImJhYnlsb25qc1wiKTtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9pbmRleFwiKTtcclxuY29uc3QgZ2FtZVV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2FtZVV0aWxzXCIpO1xyXG5jb25zdCBvYmplY3RVdGlsc18xID0gcmVxdWlyZShcIi4uL3V0aWxzL29iamVjdFV0aWxzXCIpO1xyXG5jb25zdCBtYXRlcmlhbFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvbWF0ZXJpYWxVdGlsc1wiKTtcclxuLyoqIFN5c3RlbSBmb3IgTWF0ZXJpYWwgY29tcG9uZW50ICovXHJcbmxldCBNYXRlcmlhbFN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKCgpID0+IHtcclxuICAgIGNsYXNzIE1hdGVyaWFsU3lzdGVtIGV4dGVuZHMgZWNzeV8xLlN5c3RlbSB7XHJcbiAgICAgICAgLyoqIEBoaWRkZW4gKi9cclxuICAgICAgICBleGVjdXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMubWVzaE1hdGVyaWFsLmFkZGVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc1VybE1lc2goZW50aXR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRlcmlhbCA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NYXRlcmlhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwub2JqZWN0ID0gbmV3IEJBQllMT04uU3RhbmRhcmRNYXRlcmlhbChtYXRlcmlhbC5jb2xvci5kaWZmdXNlLCBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBtYXRlcmlhbC5zY2VuZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1hdGVyaWFsKG1hdGVyaWFsKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzaCA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNoLm9iamVjdC5tYXRlcmlhbCA9IG1hdGVyaWFsLm9iamVjdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5tZXNoTWF0ZXJpYWwuY2hhbmdlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzVXJsTWVzaChlbnRpdHkpIHx8IHRoaXMuX3VwZGF0ZU1hdGVyaWFsKGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5NYXRlcmlhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLm1lc2hNYXRlcmlhbC5yZW1vdmVkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc1VybE1lc2goZW50aXR5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEuZGlzcG9zZU9iamVjdChlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWF0ZXJpYWwpKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkub2JqZWN0Lm1hdGVyaWFsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9pc1VybE1lc2goZW50aXR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkudHlwZSA9PT0gaW5kZXhfMS5NZXNoVHlwZXMuVXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlTWF0ZXJpYWwobWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXRlcmlhbCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbG9yKG1hdGVyaWFsLCBtYXRlcmlhbC5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0dXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsVXRpbHNfMS51cGRhdGVUZXh0dXJlKG1hdGVyaWFsLCBtYXRlcmlhbC50ZXh0dXJlLCBnYW1lVXRpbHNfMS5nZXRBc3NldE1hbmFnZXIodGhpcywgbWF0ZXJpYWwuc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS51cGRhdGVPYmplY3RWYWx1ZShtYXRlcmlhbCwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVDb2xvcihtYXRlcmlhbCwgY29sb3IpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgKG1hdGVyaWFsLm9iamVjdFtgJHtwcm9wfUNvbG9yYF0gPSBtYXRlcmlhbFV0aWxzXzEuaGV4VG9Db2xvcjMoY29sb3JbcHJvcF0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBNYXRlcmlhbFN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIG1lc2hNYXRlcmlhbDogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5NZXNoLCBpbmRleF8xLk1hdGVyaWFsXSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlLCBjaGFuZ2VkOiBbaW5kZXhfMS5NYXRlcmlhbF0gfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBNYXRlcmlhbFN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5NYXRlcmlhbFN5c3RlbSA9IE1hdGVyaWFsU3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk1lc2hTeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBlY3N5XzEgPSByZXF1aXJlKFwiZWNzeVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL2luZGV4XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9nYW1lVXRpbHNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzIgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbi8qKiBTeXN0ZW0gZm9yIE1lc2ggY29tcG9uZW50ICovXHJcbmxldCBNZXNoU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgTWVzaFN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLm1lc2guYWRkZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKGVudGl0eSwgZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLk1lc2gpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5tZXNoLmNoYW5nZWQuZm9yRWFjaCgoZW50aXR5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18yLmRpc3Bvc2VPYmplY3QoZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLk1lc2gpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZU1lc2goZW50aXR5LCBlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLm1lc2gucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzIuZGlzcG9zZU9iamVjdChlbnRpdHkuZ2V0Q29tcG9uZW50KGluZGV4XzEuTWVzaCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3VwZGF0ZU1lc2goZW50aXR5LCBtZXNoKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobWVzaC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuTWVzaFR5cGVzLlVybDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNoLnVybCAmJiBCQUJZTE9OLlNjZW5lTG9hZGVyLklzUGx1Z2luRm9yRXh0ZW5zaW9uQXZhaWxhYmxlKHRoaXMuX2ZpbGVFeHQobWVzaC51cmwpKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRVcmxNZXNoKGVudGl0eSwgbWVzaCwgbWVzaC51cmwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdW5zdXBwb3J0ZWRNZXNoKGVudGl0eSwgbWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc2gub2JqZWN0ID0gQkFCWUxPTi5NZXNoQnVpbGRlcltgQ3JlYXRlJHttZXNoLnR5cGV9YF0uY2FsbCh0aGlzLCBtZXNoLnR5cGUsIG1lc2gub3B0aW9ucyA/IG1lc2gub3B0aW9ucyA6IHt9LCBnYW1lVXRpbHNfMS5nZXRTY2VuZSh0aGlzLCBtZXNoLnNjZW5lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVzaFZhbHVlKG1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9maWxlRXh0KHVybCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoXCIuXCIpLCB1cmwubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2xvYWRVcmxNZXNoKGVudGl0eSwgbWVzaCwgdXJsKSB7XHJcbiAgICAgICAgICAgIGxldCBhc3NldE1hbmFnZXIgPSBnYW1lVXRpbHNfMS5nZXRBc3NldE1hbmFnZXIodGhpcywgbWVzaC5zY2VuZSk7XHJcbiAgICAgICAgICAgIGxldCBmaWxlbmFtZUluZGV4ID0gdXJsLmxhc3RJbmRleE9mKFwiL1wiKSArIDE7XHJcbiAgICAgICAgICAgIGxldCB0YXNrID0gYXNzZXRNYW5hZ2VyLmFkZE1lc2hUYXNrKG1lc2gudHlwZSwgXCJcIiwgdXJsLnN1YnN0cmluZygwLCBmaWxlbmFtZUluZGV4KSwgdXJsLnN1YnN0cmluZyhmaWxlbmFtZUluZGV4LCB1cmwubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIHRhc2sub25TdWNjZXNzID0gKHRhc2spID0+IHtcclxuICAgICAgICAgICAgICAgIG1lc2gub2JqZWN0ID0gdGFzay5sb2FkZWRNZXNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoVmFsdWUobWVzaCk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0oZW50aXR5KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGFzay5vbkVycm9yID0gKCkgPT4geyB0aGlzLl91bnN1cHBvcnRlZE1lc2goZW50aXR5LCBtZXNoKTsgfTtcclxuICAgICAgICAgICAgYXNzZXRNYW5hZ2VyLmxvYWQoKTtcclxuICAgICAgICAgICAgYXNzZXRNYW5hZ2VyLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVNZXNoVmFsdWUobWVzaCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIG1lc2gpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0VmFsdWUobWVzaCwgcHJvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX3Vuc3VwcG9ydGVkTWVzaChlbnRpdHksIG1lc2gpIHtcclxuICAgICAgICAgICAgbGV0IHNjZW5lID0gZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgbWVzaC5zY2VuZSk7XHJcbiAgICAgICAgICAgIG1lc2gub2JqZWN0ID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVQbGFuZShcIlwiLCB7fSwgc2NlbmUpO1xyXG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKFwiXCIsIHNjZW5lKTtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFBZ01BQUFEWEI1bE5BQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBQUZ6VWtkQ0FLN09IT2tBQUFBTVVFeFVSU2dvS0Nnb0tDZ29LTzg4T1ZWcG02QUFBQUFDZEZKT1UvTGxnSGxZOEFBQUFQOUpSRUZVT012TjFNRnR3ekFNQlZCM25VN1JjUXNTS0RjSTk2RVB2clBBWjBuWmtSVVpLWEtNYjM2eFByK1V4TXZYOG5COUxEUmR5K2ZqL2ZmN2dFUzRiS1lVQlBZRGRMT1FjRWdEWTFjeDZBcUlqVUFEUUZZdlVOb2hrQUZCRWJGUCtZMU1SQVBib1UxSk9LZFVqOHJncDFCTFdvK2phUXV0UVVkb3REdXFNUytlUnhibHpNOEYza0hEa0lBRDhrTnhjQmJ1a0N1aWRtQURhSUxjSVRPaGVTVC9nMndEVklZRVgrR2NrajJxN05ram15WU1UUmxVNEsvK0hKUU5FV3R0R0R0SXdaWmZmZ2NIOHJrSmd0RkJDMmg0NG9ZQ0hlQ1dvUnp0VUJ1Z1FQMEUxNXBDUDMySnl6VDJBaVpUMHp5TDJndmQ0VDMrWXBlWHdmeTYrQU5aTzlRbEI1c3ZsQUFBQUFCSlJVNUVya0pnZ2c9PVwiO1xyXG4gICAgICAgICAgICAvLyBCQUJZTE9OLlRleHR1cmUuQklMSU5FQVJfU0FNUExJTkdNT0RFID0gMlxyXG4gICAgICAgICAgICBtYXRlcmlhbC5kaWZmdXNlVGV4dHVyZSA9IG5ldyBCQUJZTE9OLlRleHR1cmUoXCJkYXRhOmVycm9yRGF0YVwiLCBzY2VuZSwgZmFsc2UsIGZhbHNlLCAyLCBudWxsLCBudWxsLCBlcnJvckRhdGEsIHRydWUpO1xyXG4gICAgICAgICAgICBtZXNoLm9iamVjdC5tYXRlcmlhbCA9IG1hdGVyaWFsO1xyXG4gICAgICAgICAgICBvYmplY3RVdGlsc18xLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0oZW50aXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgTWVzaFN5c3RlbS5xdWVyaWVzID0ge1xyXG4gICAgICAgIG1lc2g6IHsgY29tcG9uZW50czogW2luZGV4XzEuTWVzaF0sIGxpc3RlbjogeyBhZGRlZDogdHJ1ZSwgcmVtb3ZlZDogdHJ1ZSwgY2hhbmdlZDogW2luZGV4XzEuTWVzaF0gfSB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBNZXNoU3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLk1lc2hTeXN0ZW0gPSBNZXNoU3lzdGVtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlBhcnRpY2xlU3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCBCQUJZTE9OID0gcmVxdWlyZShcImJhYnlsb25qc1wiKTtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9pbmRleFwiKTtcclxuY29uc3QgZ2FtZVV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvZ2FtZVV0aWxzXCIpO1xyXG5jb25zdCBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRoVXRpbHNcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbmNvbnN0IG1hdGVyaWFsVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9tYXRlcmlhbFV0aWxzXCIpO1xyXG4vKiogU3lzdGVtIGZvciBQYXJ0aWNsZSBjb21wb25lbnQgKi9cclxubGV0IFBhcnRpY2xlU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoKCkgPT4ge1xyXG4gICAgY2xhc3MgUGFydGljbGVTeXN0ZW0gZXh0ZW5kcyBlY3N5XzEuU3lzdGVtIHtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5wYXJ0aWNsZS5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0aWNsZSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5QYXJ0aWNsZSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5vYmplY3QgPSBuZXcgQkFCWUxPTi5QYXJ0aWNsZVN5c3RlbShwYXJ0aWNsZS50eXBlLCBwYXJ0aWNsZS5jYXBhY2l0eSwgZ2FtZVV0aWxzXzEuZ2V0U2NlbmUodGhpcywgcGFydGljbGUuc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0aWNsZU9iamVjdCA9IHBhcnRpY2xlLm9iamVjdDtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocGFydGljbGUudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLlBvaW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVQb2ludEVtaXR0ZXIobWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLmRpcmVjdGlvbjEpLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuUGFydGljbGVUeXBlcy5Cb3g6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZUJveEVtaXR0ZXIobWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLmRpcmVjdGlvbjEpLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMiksIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5taW5FbWl0Qm94KSwgbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLm1heEVtaXRCb3gpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLlBhcnRpY2xlVHlwZXMuU3BoZXJlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVTcGhlcmVFbWl0dGVyKHBhcnRpY2xlLnJhZGl1cywgcGFydGljbGUucmFkaXVzUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuUGFydGljbGVUeXBlcy5EaXJlY3RlZFNwaGVyZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVPYmplY3QuY3JlYXRlRGlyZWN0ZWRTcGhlcmVFbWl0dGVyKHBhcnRpY2xlLnJhZGl1cywgbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzKHBhcnRpY2xlLmRpcmVjdGlvbjEpLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIGluZGV4XzEuUGFydGljbGVUeXBlcy5IZW1pc3BoZXJlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVIZW1pc3BoZXJpY0VtaXR0ZXIocGFydGljbGUucmFkaXVzLCBwYXJ0aWNsZS5yYWRpdXNSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLkN5bGluZGVyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZU9iamVjdC5jcmVhdGVDeWxpbmRlckVtaXR0ZXIocGFydGljbGUucmFkaXVzLCBwYXJ0aWNsZS5oZWlnaHQsIHBhcnRpY2xlLnJhZGl1c1JhbmdlLCBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpbmRleF8xLlBhcnRpY2xlVHlwZXMuRGlyZWN0ZWRDeWxpbmRlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVPYmplY3QuY3JlYXRlRGlyZWN0ZWRDeWxpbmRlckVtaXR0ZXIocGFydGljbGUucmFkaXVzLCBwYXJ0aWNsZS5oZWlnaHQsIHBhcnRpY2xlLnJhZGl1c1JhbmdlLCBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjMocGFydGljbGUuZGlyZWN0aW9uMSksIG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhwYXJ0aWNsZS5kaXJlY3Rpb24yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaW5kZXhfMS5QYXJ0aWNsZVR5cGVzLkNvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlT2JqZWN0LmNyZWF0ZUNvbmVFbWl0dGVyKHBhcnRpY2xlLnJhZGl1cywgcGFydGljbGUuYW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVBhcnRpY2xlKHBhcnRpY2xlKTtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpO1xyXG4gICAgICAgICAgICAgICAgcGFydGljbGVPYmplY3Quc3RhcnQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5wYXJ0aWNsZS5jaGFuZ2VkLmZvckVhY2goKGVudGl0eSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlUGFydGljbGUoZW50aXR5LmdldENvbXBvbmVudChpbmRleF8xLlBhcnRpY2xlKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMucGFydGljbGUucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJ0aWNsZSA9IGVudGl0eS5nZXRDb21wb25lbnQoaW5kZXhfMS5QYXJ0aWNsZSk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5vYmplY3Quc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0VXRpbHNfMS5kaXNwb3NlT2JqZWN0KHBhcnRpY2xlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF91cGRhdGVQYXJ0aWNsZShwYXJ0aWNsZSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIHBhcnRpY2xlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW1pdHRlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXJlY3Rpb24xXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRpcmVjdGlvbjJcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWluRW1pdEJveFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtYXhFbWl0Qm94XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0VmVjdG9yMyhwYXJ0aWNsZSwgcHJvcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0dXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsVXRpbHNfMS51cGRhdGVUZXh0dXJlKHBhcnRpY2xlLCBwYXJ0aWNsZS50ZXh0dXJlLCBnYW1lVXRpbHNfMS5nZXRBc3NldE1hbmFnZXIodGhpcywgcGFydGljbGUuc2NlbmUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbG9yKHBhcnRpY2xlLCBwYXJ0aWNsZS5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0VmFsdWUocGFydGljbGUsIHByb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfdXBkYXRlQ29sb3IocGFydGljbGUsIGNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHBhcnRpY2xlLm9iamVjdFtwcm9wXSA9IG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yNChjb2xvcltwcm9wXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgUGFydGljbGVTeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICBwYXJ0aWNsZTogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5QYXJ0aWNsZV0sIGxpc3RlbjogeyBhZGRlZDogdHJ1ZSwgcmVtb3ZlZDogdHJ1ZSwgY2hhbmdlZDogW2luZGV4XzEuUGFydGljbGVdIH0gfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFydGljbGVTeXN0ZW07XHJcbn0pKCk7XHJcbmV4cG9ydHMuUGFydGljbGVTeXN0ZW0gPSBQYXJ0aWNsZVN5c3RlbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5UcmFuc2Zvcm1TeXN0ZW0gPSB2b2lkIDA7XHJcbmNvbnN0IGVjc3lfMSA9IHJlcXVpcmUoXCJlY3N5XCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvaW5kZXhcIik7XHJcbmNvbnN0IG9iamVjdFV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvb2JqZWN0VXRpbHNcIik7XHJcbi8qKiBTeXN0ZW0gZm9yIFRyYW5zZm9ybSBjb21wb25lbnQgKi9cclxubGV0IFRyYW5zZm9ybVN5c3RlbSA9IC8qKiBAY2xhc3MgKi8gKCgpID0+IHtcclxuICAgIGNsYXNzIFRyYW5zZm9ybVN5c3RlbSBleHRlbmRzIGVjc3lfMS5TeXN0ZW0ge1xyXG4gICAgICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICAgICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnRyYW5zZm9ybXMuY2hhbmdlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9iamVjdFV0aWxzXzEudXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgVHJhbnNmb3JtU3lzdGVtLnF1ZXJpZXMgPSB7XHJcbiAgICAgICAgdHJhbnNmb3JtczogeyBjb21wb25lbnRzOiBbaW5kZXhfMS5UcmFuc2Zvcm1dLCBsaXN0ZW46IHsgY2hhbmdlZDogW2luZGV4XzEuVHJhbnNmb3JtXSB9IH0sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zZm9ybVN5c3RlbTtcclxufSkoKTtcclxuZXhwb3J0cy5UcmFuc2Zvcm1TeXN0ZW0gPSBUcmFuc2Zvcm1TeXN0ZW07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0dhbWVTeXN0ZW1cIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vVHJhbnNmb3JtU3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0NhbWVyYVN5c3RlbVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9NZXNoU3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0xpZ2h0U3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL01hdGVyaWFsU3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1BhcnRpY2xlU3lzdGVtXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0lucHV0U3lzdGVtXCIpLCBleHBvcnRzKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5sb2dNZXNzYWdlID0gZXhwb3J0cy5nZXRBc3NldE1hbmFnZXIgPSBleHBvcnRzLmdldFNjZW5lID0gZXhwb3J0cy5nZXRTY2VuZXMgPSBleHBvcnRzLmdldFJlbmRlcmluZ0NhbnZhcyA9IGV4cG9ydHMuZ2V0U3lzdGVtID0gdm9pZCAwO1xyXG5jb25zdCB3b3JsZFV0aWxzXzEgPSByZXF1aXJlKFwiLi93b3JsZFV0aWxzXCIpO1xyXG5jb25zdCBHYW1lU3lzdGVtXzEgPSByZXF1aXJlKFwiLi4vc3lzdGVtcy9HYW1lU3lzdGVtXCIpO1xyXG5jb25zdCBTY2VuZV8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvU2NlbmVcIik7XHJcbi8qKiBAaGlkZGVuICovXHJcbmZ1bmN0aW9uIGdldFN5c3RlbShzZWxmLCB0YXJnZXQpIHtcclxuICAgIHJldHVybiB3b3JsZFV0aWxzXzEuZ2V0V29ybGQoc2VsZikuZ2V0U3lzdGVtKHRhcmdldCk7XHJcbn1cclxuZXhwb3J0cy5nZXRTeXN0ZW0gPSBnZXRTeXN0ZW07XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIEdldCBjYW52YXMgdXNlZCBmb3IgcmVuZGVyaW5nLlxyXG4gKiBAcGFyYW0gc3lzdGVtIEEgcmVnaXN0ZXJlZCBlY3N5IFN5c3RlbSBjbGFzc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0UmVuZGVyaW5nQ2FudmFzKHN5c3RlbSkge1xyXG4gICAgcmV0dXJuIGdldFN5c3RlbShzeXN0ZW0sIEdhbWVTeXN0ZW1fMS5HYW1lU3lzdGVtKS5yZW5kZXJpbmdDYW52YXM7XHJcbn1cclxuZXhwb3J0cy5nZXRSZW5kZXJpbmdDYW52YXMgPSBnZXRSZW5kZXJpbmdDYW52YXM7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIEdldCBhbGwgc2NlbmVzIGluIGVuZ2luZS5cclxuICogQHBhcmFtIHN5c3RlbSBBIHJlZ2lzdGVyZWQgZWNzeSBTeXN0ZW0gY2xhc3NcclxuICovXHJcbmZ1bmN0aW9uIGdldFNjZW5lcyhzeXN0ZW0pIHtcclxuICAgIHJldHVybiBnZXRTeXN0ZW0oc3lzdGVtLCBHYW1lU3lzdGVtXzEuR2FtZVN5c3RlbSkuc2NlbmVzO1xyXG59XHJcbmV4cG9ydHMuZ2V0U2NlbmVzID0gZ2V0U2NlbmVzO1xyXG4vKipcclxuICogR2V0IGEgc2NlbmUgb3IgcmV0dXJuIGFjdGl2ZSBzY2VuZS5cclxuICogQHBhcmFtIHN5c3RlbSBBIHJlZ2lzdGVyZWQgZWNzeSBTeXN0ZW0gY2xhc3NcclxuICogQHBhcmFtIHNjZW5lIFNjZW5lIGVudGl0eVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U2NlbmUoc3lzdGVtLCBzY2VuZSkge1xyXG4gICAgaWYgKHNjZW5lKSB7XHJcbiAgICAgICAgcmV0dXJuIHNjZW5lLmdldENvbXBvbmVudChTY2VuZV8xLlNjZW5lKS5vYmplY3Q7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZ2V0U3lzdGVtKHN5c3RlbSwgR2FtZVN5c3RlbV8xLkdhbWVTeXN0ZW0pLmFjdGl2ZVNjZW5lO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuZ2V0U2NlbmUgPSBnZXRTY2VuZTtcclxuLyoqXHJcbiAqIEdldCBzY2VuZSBBc3NldE1hbmFnZXIgb3IgcmV0dXJuIEFzc2V0TWFuYWdlciBpbiBhY3RpdmUgc2NlbmUuXHJcbiAqIEBwYXJhbSBzeXN0ZW0gQSByZWdpc3RlcmVkIGVjc3kgU3lzdGVtIGNsYXNzXHJcbiAqIEBwYXJhbSBzY2VuZSBTY2VuZSBlbnRpdHlcclxuICovXHJcbmZ1bmN0aW9uIGdldEFzc2V0TWFuYWdlcihzeXN0ZW0sIHNjZW5lKSB7XHJcbiAgICByZXR1cm4gZ2V0U3lzdGVtKHN5c3RlbSwgR2FtZVN5c3RlbV8xLkdhbWVTeXN0ZW0pLmdldEFzc2V0TWFuYWdlcihzY2VuZSk7XHJcbn1cclxuZXhwb3J0cy5nZXRBc3NldE1hbmFnZXIgPSBnZXRBc3NldE1hbmFnZXI7XHJcbi8qKlxyXG4gKiBMb2cgYSBtZXNzYWdlIHRvIHRoZSBzY3JlZW5cclxuICogQHBhcmFtIHN5c3RlbSBBIHJlZ2lzdGVyZWQgZWNzeSBTeXN0ZW0gY2xhc3NcclxuICogQHBhcmFtIHNjZW5lIFNjZW5lIGVudGl0eVxyXG4gKi9cclxuZnVuY3Rpb24gbG9nTWVzc2FnZShzeXN0ZW0sIG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBnZXRTeXN0ZW0oc3lzdGVtLCBHYW1lU3lzdGVtXzEuR2FtZVN5c3RlbSkubG9nTWVzc2FnZShtZXNzYWdlKTtcclxufVxyXG5leHBvcnRzLmxvZ01lc3NhZ2UgPSBsb2dNZXNzYWdlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgZ2FtZVV0aWxzXzEgPSByZXF1aXJlKFwiLi9nYW1lVXRpbHNcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImdldFNjZW5lXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnYW1lVXRpbHNfMS5nZXRTY2VuZTsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0QXNzZXRNYW5hZ2VyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnYW1lVXRpbHNfMS5nZXRBc3NldE1hbmFnZXI7IH0gfSk7XHJcbnZhciBtYXRoVXRpbHNfMSA9IHJlcXVpcmUoXCIuL21hdGhVdGlsc1wiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZGVncmVlVG9SYWRpYW5zXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXRoVXRpbHNfMS5kZWdyZWVUb1JhZGlhbnM7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInh5elRvVmVjdG9yM1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzOyB9IH0pO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ4eXpUb1ZlY3RvcjNSYWRpYW5zXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXRoVXRpbHNfMS54eXpUb1ZlY3RvcjNSYWRpYW5zOyB9IH0pO1xyXG52YXIgbWF0ZXJpYWxVdGlsc18xID0gcmVxdWlyZShcIi4vbWF0ZXJpYWxVdGlsc1wiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaGV4VG9Db2xvcjNcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yMzsgfSB9KTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaGV4VG9Db2xvcjRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1hdGVyaWFsVXRpbHNfMS5oZXhUb0NvbG9yNDsgfSB9KTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5oZXhUb0NvbG9yNCA9IGV4cG9ydHMuaGV4VG9Db2xvcjMgPSBleHBvcnRzLm1hdGVyaWFsQ29sb3JIZXggPSBleHBvcnRzLnVwZGF0ZVRleHR1cmUgPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG5jb25zdCBvYmplY3RVdGlsc18xID0gcmVxdWlyZShcIi4vb2JqZWN0VXRpbHNcIik7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIFVwZGF0ZSB0ZXh0dXJlIG9iamVjdCB0byBhIGNvbXBvbmVudCBmb3IgaXRzIHRleHR1cmUgcHJvcGVydGllcy5cclxuICogQHBhcmFtIGNvbXBvbmVudCBUZXh0dXJlQ29tcG9uZW50IGluIHRoZSBlbnRpdHlcclxuICogQHBhcmFtIHRleHR1cmVQcm9wZXJ0aWVzIFRleHR1cmUgcHJvcGVydGllcyB0byBiZSB1cGRhdGVcclxuICogQHBhcmFtIGFzc2V0TWFuYWdlciBBc3NldE1hbmFnZXIgdG8gcHJvY2VzcyB0ZXh0dXJlc1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShjb21wb25lbnQsIHRleHR1cmVQcm9wZXJ0aWVzLCBhc3NldE1hbmFnZXIpIHtcclxuICAgIGZvciAobGV0IHByb3AgaW4gdGV4dHVyZVByb3BlcnRpZXMpIHtcclxuICAgICAgICBsZXQgdGV4dHVyZUF0dHJpYnV0ZXMgPSB0ZXh0dXJlUHJvcGVydGllc1twcm9wXTtcclxuICAgICAgICBsZXQgdGFzayA9IGFzc2V0TWFuYWdlci5hZGRUZXh0dXJlVGFzayhwcm9wLCB0ZXh0dXJlQXR0cmlidXRlcy51cmwpO1xyXG4gICAgICAgIHRhc2sub25TdWNjZXNzID0gKHRhc2spID0+IHtcclxuICAgICAgICAgICAgbGV0IHRleHR1cmVPYmplY3QgPSB0YXNrLnRleHR1cmU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGF0dHIgaW4gdGV4dHVyZUF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGF0dHIgIT09IFwidXJsXCIgJiYgKHRleHR1cmVPYmplY3RbYXR0cl0gPSB0ZXh0dXJlQXR0cmlidXRlc1thdHRyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRleHR1cmVOYW1lID0gYCR7cHJvcH1UZXh0dXJlYDtcclxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudE9iamVjdCA9IGNvbXBvbmVudC5vYmplY3Q7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudE9iamVjdFt0ZXh0dXJlTmFtZV0gJiYgb2JqZWN0VXRpbHNfMS5kaXNwb3NlT2JqZWN0KGNvbXBvbmVudE9iamVjdFt0ZXh0dXJlTmFtZV0pO1xyXG4gICAgICAgICAgICBjb21wb25lbnRPYmplY3RbdGV4dHVyZU5hbWVdID0gdGV4dHVyZU9iamVjdDtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXRNYW5hZ2VyLmxvYWQoKTtcclxuICAgIGFzc2V0TWFuYWdlci5yZXNldCgpO1xyXG59XHJcbmV4cG9ydHMudXBkYXRlVGV4dHVyZSA9IHVwZGF0ZVRleHR1cmU7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIENyZWF0ZSBvYmplY3Qgb2YgbWF0ZXJpYWwgY29sb3IgdmFsdWVzIG9yIGNyZWF0ZSBhIG1hdGVyaWFsIGNvbG9yIG9iamVjdCB3aXRoIHdoaXRlIGRpZmZ1c2UuXHJcbiAqIEBwYXJhbSBkaWZmdXNlIERpZmZ1c2UgY29sb3IgaW4gaGV4IHN0cmluZy4gZS5nLiwgIzEyM0FCQ1xyXG4gKiBAcmV0dXJucyBPYmplY3QgbWF0Y2hlcyBNYXRlcmlhbENvbG9yUHJvcGVydGllc1xyXG4gKi9cclxuZnVuY3Rpb24gbWF0ZXJpYWxDb2xvckhleChkaWZmdXNlKSB7XHJcbiAgICBpZiAoZGlmZnVzZSkge1xyXG4gICAgICAgIHJldHVybiB7IGRpZmZ1c2U6IGRpZmZ1c2UgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IGRpZmZ1c2U6IFwiI2ZmZmZmZlwiIH07XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5tYXRlcmlhbENvbG9ySGV4ID0gbWF0ZXJpYWxDb2xvckhleDtcclxuLyoqXHJcbiAqIENvbnZlcnQgaGV4IGNvbG9yIHZhbHVlIHRvIENvbG9yMy5cclxuICogQHBhcmFtIGhleFN0cmluZyBUZXh0IG9mIGhleCBjb2xvciB2YWx1ZShlLmcuLCAjMTIzQUJDKVxyXG4gKi9cclxuZnVuY3Rpb24gaGV4VG9Db2xvcjMoaGV4U3RyaW5nKSB7XHJcbiAgICByZXR1cm4gQkFCWUxPTi5Db2xvcjMuRnJvbUhleFN0cmluZyhoZXhTdHJpbmcpO1xyXG59XHJcbmV4cG9ydHMuaGV4VG9Db2xvcjMgPSBoZXhUb0NvbG9yMztcclxuLyoqXHJcbiAqIENvbnZlcnQgaGV4IGNvbG9yIHZhbHVlIHRvIENvbG9yNCAoaGFzIGFscGhhKS5cclxuICogQHBhcmFtIGhleFN0cmluZyBUZXh0IG9mIGhleCBjb2xvciB2YWx1ZShlLmcuLCAjMTIzQUJDRkYpXHJcbiAqL1xyXG5mdW5jdGlvbiBoZXhUb0NvbG9yNChoZXhTdHJpbmcpIHtcclxuICAgIHJldHVybiBCQUJZTE9OLkNvbG9yNC5Gcm9tSGV4U3RyaW5nKGhleFN0cmluZyk7XHJcbn1cclxuZXhwb3J0cy5oZXhUb0NvbG9yNCA9IGhleFRvQ29sb3I0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnh5eiA9IGV4cG9ydHMueHl6VG9WZWN0b3IzUmFkaWFucyA9IGV4cG9ydHMueHl6VG9WZWN0b3IzID0gZXhwb3J0cy5kZWdyZWVUb1JhZGlhbnMgPSB2b2lkIDA7XHJcbmNvbnN0IEJBQllMT04gPSByZXF1aXJlKFwiYmFieWxvbmpzXCIpO1xyXG4vKipcclxuICogVHJhbnNsYXRlIGRlZ3JlZSB0byByYWRpYW5zLlxyXG4gKiBAcGFyYW0gZGVncmVlIERlZ3JlZVxyXG4gKi9cclxuZnVuY3Rpb24gZGVncmVlVG9SYWRpYW5zKGRlZ3JlZSkge1xyXG4gICAgcmV0dXJuIEJBQllMT04uQW5nbGUuRnJvbURlZ3JlZXMoZGVncmVlKS5yYWRpYW5zKCk7XHJcbn1cclxuZXhwb3J0cy5kZWdyZWVUb1JhZGlhbnMgPSBkZWdyZWVUb1JhZGlhbnM7XHJcbi8qKlxyXG4gKiBDb252ZXJ0IFhZWlByb3BlcnRpZXMgdmFsdWUgdG8gVmVjdG9yMy5cclxuICogQHBhcmFtIHByb3BlcnRpZXMgWFlaUHJvcGVydGllcyB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24geHl6VG9WZWN0b3IzKHByb3BlcnRpZXMpIHtcclxuICAgIHJldHVybiBuZXcgQkFCWUxPTi5WZWN0b3IzKHByb3BlcnRpZXMueCwgcHJvcGVydGllcy55LCBwcm9wZXJ0aWVzLnopO1xyXG59XHJcbmV4cG9ydHMueHl6VG9WZWN0b3IzID0geHl6VG9WZWN0b3IzO1xyXG4vKipcclxuICogQ29udmVydCBYWVpQcm9wZXJ0aWVzIGRlZ3JlZSB2YWx1ZSB0byBWZWN0b3IzIGluIHJhZGlhbnMuXHJcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIFhZWlByb3BlcnRpZXMgdmFsdWUgaW4gZGVncmVlc1xyXG4gKi9cclxuZnVuY3Rpb24geHl6VG9WZWN0b3IzUmFkaWFucyhwcm9wZXJ0aWVzKSB7XHJcbiAgICByZXR1cm4gbmV3IEJBQllMT04uVmVjdG9yMyhkZWdyZWVUb1JhZGlhbnMocHJvcGVydGllcy54KSwgZGVncmVlVG9SYWRpYW5zKHByb3BlcnRpZXMueSksIGRlZ3JlZVRvUmFkaWFucyhwcm9wZXJ0aWVzLnopKTtcclxufVxyXG5leHBvcnRzLnh5elRvVmVjdG9yM1JhZGlhbnMgPSB4eXpUb1ZlY3RvcjNSYWRpYW5zO1xyXG4vKipcclxuICogQGhpZGRlblxyXG4gKiBDcmVhdGUgb2JqZWN0IGJ5IFhZWiB2YWx1ZXMgb3IgY3JlYXRlIGFsbCB6ZXJvIG9iamVjdC5cclxuICogQHBhcmFtIHggdmFsdWVcclxuICogQHBhcmFtIHkgdmFsdWVcclxuICogQHBhcmFtIHogdmFsdWVcclxuICogQHJldHVybnMgT2JqZWN0IG1hdGNoZXMgWFlaUHJvcGVydGllc1xyXG4gKi9cclxuZnVuY3Rpb24geHl6KHgsIHksIHopIHtcclxuICAgIGlmICh4ICYmIHkgJiYgeikge1xyXG4gICAgICAgIHJldHVybiB7IHg6IHgsIHk6IHksIHo6IHogfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IHg6IDAsIHk6IDAsIHo6IDAgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLnh5eiA9IHh5ejtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5kaXNwb3NlT2JqZWN0ID0gZXhwb3J0cy51cGRhdGVPYmplY3RUcmFuc2Zvcm0gPSBleHBvcnRzLnVwZGF0ZU9iamVjdHNUcmFuc2Zvcm0gPSBleHBvcnRzLmdldE9iamVjdENvbXBvbmVudHMgPSBleHBvcnRzLnVwZGF0ZU9iamVjdFZlY3RvcjMgPSBleHBvcnRzLnVwZGF0ZU9iamVjdFZhbHVlID0gdm9pZCAwO1xyXG5jb25zdCBUcmFuc2Zvcm1fMSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL1RyYW5zZm9ybVwiKTtcclxuY29uc3QgbWF0aFV0aWxzXzEgPSByZXF1aXJlKFwiLi9tYXRoVXRpbHNcIik7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIFVwZGF0ZSB2YWx1ZSBvZiBCYWJ5bG9uLmpzIG9iamVjdCdzIHByb3BlcnR5IGZyb20gYSBwcm9wZXJ0eSBpbiBjb21wb25lbnQgd2l0aCBzYW1lIG5hbWUuXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGNvbnRhaW5zIEJhYnlsb24uanMgb2JqZWN0XHJcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgcHJvcGVydHkgaW4gdGhlIGNvbXBvbmVudFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT2JqZWN0VmFsdWUoY29tcG9uZW50LCBuYW1lKSB7XHJcbiAgICBjb21wb25lbnQub2JqZWN0W25hbWVdID0gY29tcG9uZW50W25hbWVdO1xyXG59XHJcbmV4cG9ydHMudXBkYXRlT2JqZWN0VmFsdWUgPSB1cGRhdGVPYmplY3RWYWx1ZTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogVXBkYXRlIFZlY3RvcjMgb2YgQmFieWxvbi5qcyBvYmplY3QncyBwcm9wZXJ0eSBmcm9tIHByb3BlcnR5IGluIGNvbXBvbmVudCB3aXRoIHNhbWUgbmFtZS5cclxuICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgY29udGFpbnMgQmFieWxvbi5qcyBvYmplY3RcclxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiBwcm9wZXJ0eSBpbiB0aGUgY29tcG9uZW50LCB2YWx1ZSBvZiBwcm9wZXJ0eSBzaG91bGQgbWF0Y2hlcyBYWVpQcm9wZXJ0aWVzXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPYmplY3RWZWN0b3IzKGNvbXBvbmVudCwgbmFtZSkge1xyXG4gICAgY29tcG9uZW50Lm9iamVjdFtuYW1lXSA9IG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyhjb21wb25lbnRbbmFtZV0pO1xyXG59XHJcbmV4cG9ydHMudXBkYXRlT2JqZWN0VmVjdG9yMyA9IHVwZGF0ZU9iamVjdFZlY3RvcjM7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIEdldCBPYmplY3RDb21wb25lbnRzIGluIGFuIEVudGl0eS5cclxuICogQHBhcmFtIGVudGl0eSBFbnRpdHkgdG8gZmlsdGVyIE9iamVjdENvbXBvbmVudHNcclxuICovXHJcbmZ1bmN0aW9uIGdldE9iamVjdENvbXBvbmVudHMoZW50aXR5KSB7XHJcbiAgICBsZXQgY29tcG9uZW50cyA9IGVudGl0eS5nZXRDb21wb25lbnRzKCk7XHJcbiAgICBsZXQgb2JqZWN0Q29tcG9uZW50cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgcHJvcCBpbiBjb21wb25lbnRzKSB7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IGNvbXBvbmVudHNbcHJvcF07XHJcbiAgICAgICAgY29tcG9uZW50Lm9iamVjdCAmJiBvYmplY3RDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvYmplY3RDb21wb25lbnRzO1xyXG59XHJcbmV4cG9ydHMuZ2V0T2JqZWN0Q29tcG9uZW50cyA9IGdldE9iamVjdENvbXBvbmVudHM7XHJcbi8qKlxyXG4gKiBAaGlkZGVuXHJcbiAqIFVwZGF0ZSB0cmFuc2Zvcm1hdGlvbiBvZiBPYmplY3RDb21wb25lbnRzIGluIGVudGl0eS5cclxuICogQHBhcmFtIGVudGl0eSBFbnRpdHkgdG8gYmUgdXBkYXRlZFxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT2JqZWN0c1RyYW5zZm9ybShlbnRpdHkpIHtcclxuICAgIGxldCBjb21wb25lbnRzID0gZW50aXR5LmdldENvbXBvbmVudHMoKTtcclxuICAgIGZvciAobGV0IHByb3AgaW4gY29tcG9uZW50cykge1xyXG4gICAgICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW3Byb3BdO1xyXG4gICAgICAgIChjb21wb25lbnQub2JqZWN0ICYmIGVudGl0eS5oYXNDb21wb25lbnQoVHJhbnNmb3JtXzEuVHJhbnNmb3JtKSkgJiYgdXBkYXRlT2JqZWN0VHJhbnNmb3JtKGVudGl0eS5nZXRNdXRhYmxlQ29tcG9uZW50KFRyYW5zZm9ybV8xLlRyYW5zZm9ybSksIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy51cGRhdGVPYmplY3RzVHJhbnNmb3JtID0gdXBkYXRlT2JqZWN0c1RyYW5zZm9ybTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogVXBkYXRlIHRyYW5zZm9ybWF0aW9uIHRvIGFuIE9iamVjdENvbXBvbmVudC5cclxuICogQHBhcmFtIHRyYW5zZm9ybSBUcmFuc2Zyb20gY29tcG9uZW50IGluIHRoZSBlbnRpdHlcclxuICogQHBhcmFtIGNvbXBvbmVudCBBIGNvbXBvbmVudCBoYXMgQmFieWxvbi5qcyBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZU9iamVjdFRyYW5zZm9ybSh0cmFuc2Zvcm0sIGNvbXBvbmVudCkge1xyXG4gICAgbGV0IG9iamVjdCA9IGNvbXBvbmVudC5vYmplY3Q7XHJcbiAgICBvYmplY3QucG9zaXRpb24gJiYgKG9iamVjdC5wb3NpdGlvbiA9IG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyh0cmFuc2Zvcm0ucG9zaXRpb24pKTtcclxuICAgIG9iamVjdC5yb3RhdGlvbiAmJiAob2JqZWN0LnJvdGF0aW9uID0gbWF0aFV0aWxzXzEueHl6VG9WZWN0b3IzUmFkaWFucyh0cmFuc2Zvcm0ucm90YXRpb24pKTtcclxuICAgIG9iamVjdC5zY2FsaW5nICYmIChvYmplY3Quc2NhbGluZyA9IG1hdGhVdGlsc18xLnh5elRvVmVjdG9yMyh0cmFuc2Zvcm0uc2NhbGUpKTtcclxufVxyXG5leHBvcnRzLnVwZGF0ZU9iamVjdFRyYW5zZm9ybSA9IHVwZGF0ZU9iamVjdFRyYW5zZm9ybTtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogRGlzcG9zZSBCYWJ5bG9uLmpzIG9iamVjdCBpbiB0aGUgY29tcG9uZW50LlxyXG4gKiBAcGFyYW0gb2JqZWN0IENvbXBvbmVudCBjb250YWlucyBCYWJ5bG9uLmpzIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gZGlzcG9zZU9iamVjdChjb21wb25lbnQpIHtcclxuICAgIGNvbXBvbmVudC5vYmplY3QgJiYgY29tcG9uZW50Lm9iamVjdC5kaXNwb3NlKCk7XHJcbn1cclxuZXhwb3J0cy5kaXNwb3NlT2JqZWN0ID0gZGlzcG9zZU9iamVjdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5nZXRXb3JsZCA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIEBoaWRkZW5cclxuICogSGFjayBvbiBlY3N5IHRvIGdldCBXb3JsZCBpbnN0YW5jZSBmcm9tIHN5c3RlbSBpdHNlbGYuXHJcbiAqIEBwYXJhbSBzeXN0ZW0gQSByZWdpc3RlcmVkIGVjc3kgU3lzdGVtIGNsYXNzXHJcbiAqIEByZXR1cm5zIGVjc3kgd29ybGRcclxuICovXHJcbmZ1bmN0aW9uIGdldFdvcmxkKHN5c3RlbSkge1xyXG4gICAgcmV0dXJuIHN5c3RlbVtcIndvcmxkXCJdO1xyXG59XHJcbmV4cG9ydHMuZ2V0V29ybGQgPSBnZXRXb3JsZDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuY29uc3QgR2FtZV8xID0gcmVxdWlyZShcIi4vY29yZS9HYW1lXCIpO1xyXG5jb25zdCBlY3N5X2JhYnlsb25fMSA9IHJlcXVpcmUoXCIuL2Vjc3ktYmFieWxvblwiKTtcclxuY29uc3QgQ29udHJvbGxlcklucHV0XzEgPSByZXF1aXJlKFwiLi93ZWJ1aWxkLXhyL2NvbXBvbmVudHMvQ29udHJvbGxlcklucHV0XCIpO1xyXG5jb25zdCBDb250cm9sbGVySW5wdXRTeXN0ZW1fMSA9IHJlcXVpcmUoXCIuL3dlYnVpbGQteHIvc3lzdGVtcy9Db250cm9sbGVySW5wdXRTeXN0ZW1cIik7XHJcbi8vIHN0YXJ0IGFwcCBieSBjYWxsIGdhbWUgaW5zdGFuY2VcclxuY29uc3QgZ2FtZSA9IEdhbWVfMS5HYW1lLmluc3RhbmNlKCk7XHJcbi8vIGluaXQgZ2FtZSBjYW52YXMsIGFkZCBzeXN0ZW1zLCBhZGQgc2NlbmUgVFxyXG5nYW1lLnN0YXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbkNhbnZhc1wiKSwgW2Vjc3lfYmFieWxvbl8xLk1lc2hTeXN0ZW0sIGVjc3lfYmFieWxvbl8xLkxpZ2h0U3lzdGVtLCBlY3N5X2JhYnlsb25fMS5NYXRlcmlhbFN5c3RlbSwgZWNzeV9iYWJ5bG9uXzEuSW5wdXRTeXN0ZW0sIENvbnRyb2xsZXJJbnB1dFN5c3RlbV8xLkNvbnRyb2xsZXJJbnB1dFN5c3RlbV0pO1xyXG4vLyBhZGQgc2NlbmVaXHJcbmNvbnN0IHNjZW5lWiA9IGdhbWUuY3JlYXRlU2NlbmUoe1xyXG4gICAgYW1iaWVudDogXCIjQ0NDQ0NDXCIsXHJcbiAgICBjbGVhcjogXCIjQ0NDQ0NDRkZcIlxyXG59KTtcclxuLy8gY3JlYXRlIGNhbWVyYSBvZiBzY2VuZSBaXHJcbmNvbnN0IGNhbWVyYVogPSBnYW1lLmNyZWF0ZUVudGl0eSgpLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5DYW1lcmEsIHsgc2NlbmU6IHNjZW5lWiwgcG9pbnRlckxvY2s6IGZhbHNlIH0pO1xyXG5jYW1lcmFaLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi55ID0gMztcclxuY2FtZXJhWi5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucG9zaXRpb24ueiA9IC0zO1xyXG5jYW1lcmFaLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi54ID0gLTM7XHJcbmNhbWVyYVouZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnJvdGF0aW9uLnkgPSA0NTtcclxuY2FtZXJhWi5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucm90YXRpb24ueCA9IDE1O1xyXG4vLyBjcmVhdGUgYSBib3ggaW4gc2NlbmUgWiBjYW4gYmUgbW92ZWQgYnkgV0FTRFxyXG5jb25zdCBib3haID0gZ2FtZS5jcmVhdGVFbnRpdHkoKVxyXG4gICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NZXNoLCB7IHNjZW5lOiBzY2VuZVogfSlcclxuICAgIC5hZGRDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuTWF0ZXJpYWwsIHtcclxuICAgIHNjZW5lOiBzY2VuZVosXHJcbiAgICB0ZXh0dXJlOiB7XHJcbiAgICAgICAgZGlmZnVzZTogeyB1cmw6IFwidGV4dHVyZXMvYmxvY2suanBnXCIgfVxyXG4gICAgfVxyXG59KTtcclxuYm94Wi5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSkucG9zaXRpb24ueSA9IDE7XHJcbmJveFouZ2V0TXV0YWJsZUNvbXBvbmVudChlY3N5X2JhYnlsb25fMS5UcmFuc2Zvcm0pLnBvc2l0aW9uLnogPSAxO1xyXG5ib3haLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuVHJhbnNmb3JtKS5wb3NpdGlvbi54ID0gMTtcclxuLy8gY3JlYXRlIGxpZ2h0IG9mIHNjZW5lIFpcclxuY29uc3QgbGlnaHRCID0gZ2FtZS5jcmVhdGVFbnRpdHkoKS5hZGRDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuTGlnaHQsIHsgc2NlbmU6IHNjZW5lWiB9KTtcclxubGlnaHRCLmdldE11dGFibGVDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuTGlnaHQpLmRpcmVjdGlvbi55ID0gMTtcclxuLy8gY3JlYXRlIHplYnJhIHNraW4gdGV4dHVyZSBncm91bmQgZm9yIHNjZW5lIFRcclxuY29uc3QgZ3JvdW5kID0gZ2FtZS5jcmVhdGVFbnRpdHkoKVxyXG4gICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NZXNoLCB7IHNjZW5lOiBzY2VuZVosIHR5cGU6IGVjc3lfYmFieWxvbl8xLk1lc2hUeXBlcy5Hcm91bmQsIG9wdGlvbnM6IHsgd2lkdGg6IDUwLCBoZWlnaHQ6IDUwIH0gfSlcclxuICAgIC5hZGRDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuTWF0ZXJpYWwsIHtcclxuICAgIHNjZW5lOiBzY2VuZVosXHJcbiAgICB0ZXh0dXJlOiB7XHJcbiAgICAgICAgZGlmZnVzZTogeyB1cmw6IFwidGV4dHVyZXMvZmxvb3IuanBnXCIsIHVTY2FsZTogNSwgdlNjYWxlOiA1IH1cclxuICAgIH1cclxufSk7XHJcbmNvbnN0IGdyb3VuZE1lc2ggPSBncm91bmQuZ2V0Q29tcG9uZW50KGVjc3lfYmFieWxvbl8xLk1lc2gpLm9iamVjdDtcclxuZ2FtZS5jcmVhdGVFbnRpdHkoKVxyXG4gICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5JbnB1dCwge1xyXG4gICAgb25LZXk6IChrZXksIGRvd24sIHVwKSA9PiB7XHJcbiAgICAgICAgaWYgKGtleSA9PSBcImRcIikge1xyXG4gICAgICAgICAgICBnYW1lLnNob3dEZWJ1Z2dlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT0gXCJiXCIpIHtcclxuICAgICAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuZ2FtZS5jcmVhdGVFbnRpdHkoKVxyXG4gICAgLmFkZENvbXBvbmVudChDb250cm9sbGVySW5wdXRfMS5Db250cm9sbGVySW5wdXQsIHtcclxuICAgIGZsb29yOiBncm91bmRNZXNoLFxyXG4gICAgb25MZWZ0VGh1bWJzdGlja01vdmU6ICh4LCB5KSA9PiB7XHJcbiAgICB9LFxyXG4gICAgb25SaWdodFRodW1ic3RpY2tNb3ZlOiAoeCwgeSkgPT4ge1xyXG4gICAgfSxcclxuICAgIG9uTGVmdEJ1dHRvblByZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgb25SaWdodEJ1dHRvblByZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgY3JlYXRlUmFuZG9tQm94KCk7XHJcbiAgICB9LFxyXG4gICAgLy9vbkxlZnRUcmlnZ2VyUHJlc3M6IChtZXNoOiBCQUJZTE9OLkFic3RyYWN0TWVzaCkgPT4ge1xyXG4gICAgLy8gIGlmIChtZXNoKSB7XHJcbiAgICAvLyAgICBsZXQgeyB4LCB5LCB6IH0gPSBtZXNoLnBvc2l0aW9uXHJcbiAgICAvLyAgICB3aGlsZSAoZ2V0QmxvY2soeCwgeSwgeikpIHtcclxuICAgIC8vICAgICAgeSArPSAxXHJcbiAgICAvLyAgICB9XHJcbiAgICAvLyAgICBjb25zdCBibG9jayA9IGNyZWF0ZUJsb2NrKHgsIHksIHosIHJhbmRvbUNvbG9yKCkpXHJcbiAgICAvLyAgICBzZXRCbG9jayh4LCB5LCB6LCBibG9jaylcclxuICAgIC8vICB9XHJcbiAgICAvL30sXHJcbiAgICAvL29uTGVmdFNxdWVlemVQcmVzczogKG1lc2g6IEJBQllMT04uQWJzdHJhY3RNZXNoKSA9PiB7XHJcbiAgICAvLyAgaWYgKG1lc2gpIHtcclxuICAgIC8vICAgIGxldCB7IHgsIHksIHogfSA9IG1lc2gucG9zaXRpb25cclxuICAgIC8vICAgIHdoaWxlIChnZXRCbG9jayh4LCB5LCB6KSkge1xyXG4gICAgLy8gICAgICB5IC09IDFcclxuICAgIC8vICAgIH1cclxuICAgIC8vICAgIGNvbnN0IGJsb2NrID0gY3JlYXRlQmxvY2soeCwgeSwgeiwgcmFuZG9tQ29sb3IoKSlcclxuICAgIC8vICAgIHNldEJsb2NrKHgsIHksIHosIGJsb2NrKVxyXG4gICAgLy8gIH1cclxuICAgIC8vfSxcclxuICAgIC8vb25SaWdodFRyaWdnZXJQcmVzczogKG1lc2g6IEJBQllMT04uQWJzdHJhY3RNZXNoKSA9PiB7XHJcbiAgICAvLyAgaWYgKG1lc2gpIHtcclxuICAgIC8vICAgIGxldCB7IHgsIHksIHogfSA9IG1lc2gucG9zaXRpb25cclxuICAgIC8vICAgIHdoaWxlIChnZXRCbG9jayh4LCB5LCB6KSkge1xyXG4gICAgLy8gICAgICB6IC09IDFcclxuICAgIC8vICAgIH1cclxuICAgIC8vICAgIGNvbnN0IGJsb2NrID0gY3JlYXRlQmxvY2soeCwgeSwgeiwgcmFuZG9tQ29sb3IoKSlcclxuICAgIC8vICAgIHNldEJsb2NrKHgsIHksIHosIGJsb2NrKVxyXG4gICAgLy8gIH1cclxuICAgIC8vfSxcclxuICAgIC8vb25SaWdodFNxdWVlemVQcmVzczogKG1lc2g6IEJBQllMT04uQWJzdHJhY3RNZXNoKSA9PiB7XHJcbiAgICAvLyAgaWYgKG1lc2gpIHtcclxuICAgIC8vICAgIGxldCB7IHgsIHksIHogfSA9IG1lc2gucG9zaXRpb25cclxuICAgIC8vICAgIHdoaWxlIChnZXRCbG9jayh4LCB5LCB6KSkge1xyXG4gICAgLy8gICAgICB4IC09IDFcclxuICAgIC8vICAgIH1cclxuICAgIC8vICAgIGNvbnN0IGJsb2NrID0gY3JlYXRlQmxvY2soeCwgeSwgeiwgcmFuZG9tQ29sb3IoKSlcclxuICAgIC8vICAgIHNldEJsb2NrKHgsIHksIHosIGJsb2NrKVxyXG4gICAgLy8gIH1cclxuICAgIC8vfSxcclxuICAgIG9uUG9pbnRlcklucHV0OiAobWVzaCwgZmFjZXQpID0+IHtcclxuICAgICAgICBsZXQgeyB4LCB5LCB6IH0gPSBtZXNoLnBvc2l0aW9uO1xyXG4gICAgICAgIHdoaWxlIChnZXRCbG9jayh4LCB5LCB6KSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGZhY2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgeiArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHogLT0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICB4ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgeCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgIHkgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICAgICAgeSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJsb2NrID0gY3JlYXRlQmxvY2soeCwgeSwgeiwgcmFuZG9tQ29sb3IoKSk7XHJcbiAgICAgICAgc2V0QmxvY2soeCwgeSwgeiwgYmxvY2spO1xyXG4gICAgfVxyXG59KTtcclxuZnVuY3Rpb24gY3JlYXRlUmFuZG9tQm94KCkge1xyXG4gICAgY3JlYXRlQmxvY2soTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApLCBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMCksIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwKSwgcmFuZG9tQ29sb3IoKSk7XHJcbn1cclxubGV0IGJsb2NrcyA9IHsgJzEtMS0xJzogdHJ1ZSB9O1xyXG5mdW5jdGlvbiBnZXRCbG9jayh4LCB5LCB6KSB7XHJcbiAgICBjb25zdCBrZXkgPSBgJHt4fS0ke3l9LSR7en1gO1xyXG4gICAgcmV0dXJuIGJsb2Nrc1trZXldO1xyXG59XHJcbmZ1bmN0aW9uIHNldEJsb2NrKHgsIHksIHosIGIpIHtcclxuICAgIGNvbnN0IGtleSA9IGAke3h9LSR7eX0tJHt6fWA7XHJcbiAgICBibG9ja3Nba2V5XSA9IGI7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQmxvY2soeCwgeSwgeiwgY29sb3IpIHtcclxuICAgIGNvbnN0IGJsb2NrID0gZ2FtZS5jcmVhdGVFbnRpdHkoKVxyXG4gICAgICAgIC5hZGRDb21wb25lbnQoZWNzeV9iYWJ5bG9uXzEuTWVzaCwgeyBzY2VuZTogc2NlbmVaIH0pXHJcbiAgICAgICAgLmFkZENvbXBvbmVudChlY3N5X2JhYnlsb25fMS5NYXRlcmlhbCwge1xyXG4gICAgICAgIHNjZW5lOiBzY2VuZVosXHJcbiAgICAgICAgdGV4dHVyZToge1xyXG4gICAgICAgICAgICBkaWZmdXNlOiB7IHVybDogXCJ0ZXh0dXJlcy9ibG9jay5qcGdcIiB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBibG9jay5nZXRNdXRhYmxlQ29tcG9uZW50KGVjc3lfYmFieWxvbl8xLlRyYW5zZm9ybSk7XHJcbiAgICB0cmFuc2Zvcm0ucG9zaXRpb24ueSA9IHk7XHJcbiAgICB0cmFuc2Zvcm0ucG9zaXRpb24ueiA9IHo7XHJcbiAgICB0cmFuc2Zvcm0ucG9zaXRpb24ueCA9IHg7XHJcbiAgICByZXR1cm4gYmxvY2suZ2V0Q29tcG9uZW50KGVjc3lfYmFieWxvbl8xLk1lc2gpO1xyXG59XHJcbmNvbnN0IHJhbmRvbUNvbG9yID0gKCkgPT4ge1xyXG4gICAgbGV0IGNvbG9yID0gJyMnO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcclxuICAgICAgICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIGNvbnN0IGJpdCA9IChyYW5kb20gKiAxNikgfCAwO1xyXG4gICAgICAgIGNvbG9yICs9IChiaXQpLnRvU3RyaW5nKDE2KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIHJldHVybiBjb2xvcjtcclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Db250cm9sbGVySW5wdXQgPSB2b2lkIDA7XHJcbi8qKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogZW50aXR5LmFkZENvbXBvbmVudChDb250cm9sbGVySW5wdXQsIHsgb25MZWZ0VHJpZ2dlclByZXNzOiBvblRyaWdnZXJQcmVzcyB9KTtcclxuICogZnVuY3Rpb24gb25UcmlnZ2VyUHJlc3MoYW1vdW50OiBudW1iZXIpIHtcclxuICogICBjb25zb2xlLmxvZyhcInRyaWdnZXIgcHJlc3NlZDogXCIgKyBhbW91bnQpO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKi9cclxuY2xhc3MgQ29udHJvbGxlcklucHV0IHtcclxufVxyXG5leHBvcnRzLkNvbnRyb2xsZXJJbnB1dCA9IENvbnRyb2xsZXJJbnB1dDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNvbnRyb2xsZXJJbnB1dFN5c3RlbSA9IHZvaWQgMDtcclxuY29uc3QgZWNzeV8xID0gcmVxdWlyZShcImVjc3lcIik7XHJcbmNvbnN0IENvbnRyb2xsZXJJbnB1dF8xID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvQ29udHJvbGxlcklucHV0XCIpO1xyXG5jb25zdCBnYW1lVXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9lY3N5LWJhYnlsb24vdXRpbHMvZ2FtZVV0aWxzXCIpO1xyXG4vKiogU3lzdGVtIGZvciBDb250cm9sbGVySW5wdXQgY29tcG9uZW50ICovXHJcbmxldCBDb250cm9sbGVySW5wdXRTeXN0ZW0gPSAvKiogQGNsYXNzICovICgoKSA9PiB7XHJcbiAgICBjbGFzcyBDb250cm9sbGVySW5wdXRTeXN0ZW0gZXh0ZW5kcyBlY3N5XzEuU3lzdGVtIHtcclxuICAgICAgICAvKiogQGhpZGRlbiAqL1xyXG4gICAgICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5pbnB1dC5hZGRlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9IGVudGl0eS5nZXRDb21wb25lbnQoQ29udHJvbGxlcklucHV0XzEuQ29udHJvbGxlcklucHV0KTtcclxuICAgICAgICAgICAgICAgIGxldCBzY2VuZSA9IGdhbWVVdGlsc18xLmdldFNjZW5lKHRoaXMsIGlucHV0LnNjZW5lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlWFJIZWxwZXIoaW5wdXQsIHNjZW5lKTtcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBpY2tQb3NpdGlvbjogQkFCWUxPTi5WZWN0b3IzXHJcbiAgICAgICAgICAgICAgICAvL3BpY2sucGlja2VkTWVzaC5nZXRGYWNldFBvc2l0aW9uVG9SZWYoZmFjZXQsIHBpY2tQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQub25Qb2ludGVySW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZS5vblBvaW50ZXJQaWNrID0gKHBvaW50ZXIsIHBpY2spID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpY2suaGl0ICYmIHBpY2sucGlja2VkTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjZXQgPSAoMiAqIE1hdGguZmxvb3IocGljay5mYWNlSWQgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vblBvaW50ZXJJbnB1dChwaWNrLnBpY2tlZE1lc2gsIGZhY2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMuaW5wdXQucmVtb3ZlZC5mb3JFYWNoKChlbnRpdHkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vbGV0IGlucHV0ID0gZW50aXR5LmdldENvbXBvbmVudChDb250cm9sbGVySW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgLy9sZXQgc2NlbmUgPSBnZXRTY2VuZSh0aGlzLCBpbnB1dC5zY2VuZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5feHJIZWxwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjcmVhdGVYUkhlbHBlcihpbnB1dCwgc2NlbmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5feHJIZWxwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlciA9IHlpZWxkIHNjZW5lLmNyZWF0ZURlZmF1bHRYUkV4cGVyaWVuY2VBc3luYyhpbnB1dC54ck9wdGlvbnMgfHwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVGVsZXBvcnRhdGlvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlci50ZWxlcG9ydGF0aW9uLnBhcmFib2xpY1JheUVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC5mbG9vcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl94ckhlbHBlci50ZWxlcG9ydGF0aW9uLmFkZEZsb29yTWVzaChpbnB1dC5mbG9vcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3hySGVscGVyLmlucHV0Lm9uQ29udHJvbGxlckFkZGVkT2JzZXJ2YWJsZS5hZGQoKGlucHV0U291cmNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0U291cmNlLm9uTW90aW9uQ29udHJvbGxlckluaXRPYnNlcnZhYmxlLmFkZCgoY29udHJvbGxlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL2RvYy5iYWJ5bG9uanMuY29tL2RpdmluZ0RlZXBlci93ZWJYUi93ZWJYUklucHV0Q29udHJvbGxlclN1cHBvcnQjc29tZS10ZXJtcy1hbmQtY2xhc3Nlcy10by1jbGVhci10aGluZ3MtdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTW90aW9uQ29udHJvbGxlckNvbXBvbmVudFR5cGUgPSBcInRyaWdnZXJcIiB8IFwic3F1ZWV6ZVwiIHwgXCJ0b3VjaHBhZFwiIHwgXCJ0aHVtYnN0aWNrXCIgfCBcImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci5oYW5kbmVzcyA9PSBcImxlZnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ2xlZnQgY29udHJvbGxlciAnICsgY29udHJvbGxlci5wcm9maWxlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRUaHVtYnN0aWNrID0gaW5wdXQub25MZWZ0VGh1bWJzdGlja01vdmUgJiYgY29udHJvbGxlci5nZXRDb21wb25lbnRPZlR5cGUoXCJ0aHVtYnN0aWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VGh1bWJzdGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0VGh1bWJzdGljay5vbkF4aXNWYWx1ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZCgoeyB4LCB5IH0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ29uTGVmdFRodW1ic3RpY2tNb3ZlICcgKyB4ICsgJywnICsgeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vbkxlZnRUaHVtYnN0aWNrTW92ZSh4LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRCdXR0b25zID0gaW5wdXQub25MZWZ0QnV0dG9uUHJlc3MgJiYgY29udHJvbGxlci5nZXRBbGxDb21wb25lbnRzT2ZUeXBlKFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0QnV0dG9ucyAmJiBsZWZ0QnV0dG9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIGxlZnRCdXR0b25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ub25CdXR0b25TdGF0ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZCgoYnV0dG9uQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uTGVmdEJ1dHRvblByZXNzJywgYnV0dG9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ29tcG9uZW50LnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25MZWZ0QnV0dG9uUHJlc3MgJyArIGJ1dHRvbkNvbXBvbmVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uTGVmdEJ1dHRvblByZXNzKGJ1dHRvbkNvbXBvbmVudC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3F1ZWV6ZUJ1dHRvbiA9IGlucHV0Lm9uTGVmdFNxdWVlemVQcmVzcyAmJiBjb250cm9sbGVyLmdldENvbXBvbmVudE9mVHlwZShcInNxdWVlemVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNxdWVlemVCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3F1ZWV6ZUJ1dHRvbi5vbkJ1dHRvblN0YXRlQ2hhbmdlZE9ic2VydmFibGUuYWRkKChidXR0b25Db21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbkxlZnRTcXVlZXplUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbXBvbmVudC5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25MZWZ0U3F1ZWV6ZVByZXNzICcgKyBidXR0b25Db21wb25lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLl94ckhlbHBlci5wb2ludGVyU2VsZWN0aW9uLmdldE1lc2hVbmRlclBvaW50ZXIoaW5wdXRTb3VyY2UudW5pcXVlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uTGVmdFNxdWVlemVQcmVzcyhtZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJCdXR0b24gPSBpbnB1dC5vbkxlZnRUcmlnZ2VyUHJlc3MgJiYgY29udHJvbGxlci5nZXRDb21wb25lbnRPZlR5cGUoXCJ0cmlnZ2VyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyQnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJCdXR0b24ub25CdXR0b25TdGF0ZUNoYW5nZWRPYnNlcnZhYmxlLmFkZCgoYnV0dG9uQ29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25MZWZ0VHJpZ2dlclByZXNzJywgYnV0dG9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25Db21wb25lbnQucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ29uTGVmdFRyaWdnZXJQcmVzcyAnICsgYnV0dG9uQ29tcG9uZW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5feHJIZWxwZXIucG9pbnRlclNlbGVjdGlvbi5nZXRNZXNoVW5kZXJQb2ludGVyKGlucHV0U291cmNlLnVuaXF1ZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vbkxlZnRUcmlnZ2VyUHJlc3MobWVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRyb2xsZXIuaGFuZG5lc3MgPT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAncmlnaHQgY29udHJvbGxlciAnICsgY29udHJvbGxlci5wcm9maWxlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0VGh1bWJzdGljayA9IGlucHV0Lm9uUmlnaHRUaHVtYnN0aWNrTW92ZSAmJiBjb250cm9sbGVyLmdldENvbXBvbmVudE9mVHlwZShcInRodW1ic3RpY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0VGh1bWJzdGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodFRodW1ic3RpY2sub25BeGlzVmFsdWVDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoKHsgeCwgeSB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lVXRpbHNfMS5sb2dNZXNzYWdlKHRoaXMsICdvblJpZ2h0VGh1bWJzdGlja01vdmUgJyArIHggKyAnLCcgKyB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm9uUmlnaHRUaHVtYnN0aWNrTW92ZSh4LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0QnV0dG9ucyA9IGlucHV0Lm9uUmlnaHRCdXR0b25QcmVzcyAmJiBjb250cm9sbGVyLmdldEFsbENvbXBvbmVudHNPZlR5cGUoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0QnV0dG9ucyAmJiByaWdodEJ1dHRvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiByaWdodEJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5vbkJ1dHRvblN0YXRlQ2hhbmdlZE9ic2VydmFibGUuYWRkKChidXR0b25Db21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25SaWdodEJ1dHRvblByZXNzJywgYnV0dG9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uQ29tcG9uZW50LnByZXNzZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25SaWdodEJ1dHRvblByZXNzICcgKyBidXR0b25Db21wb25lbnQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vblJpZ2h0QnV0dG9uUHJlc3MoYnV0dG9uQ29tcG9uZW50LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcXVlZXplQnV0dG9uID0gaW5wdXQub25SaWdodFNxdWVlemVQcmVzcyAmJiBjb250cm9sbGVyLmdldENvbXBvbmVudE9mVHlwZShcInNxdWVlemVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNxdWVlemVCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3F1ZWV6ZUJ1dHRvbi5vbkJ1dHRvblN0YXRlQ2hhbmdlZE9ic2VydmFibGUuYWRkKChidXR0b25Db21wb25lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvblJpZ2h0U3F1ZWV6ZVByZXNzJywgYnV0dG9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b25Db21wb25lbnQucHJlc3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ29uUmlnaHRTcXVlZXplUHJlc3MgJyArIGJ1dHRvbkNvbXBvbmVudC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IHRoaXMuX3hySGVscGVyLnBvaW50ZXJTZWxlY3Rpb24uZ2V0TWVzaFVuZGVyUG9pbnRlcihpbnB1dFNvdXJjZS51bmlxdWVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQub25SaWdodFNxdWVlemVQcmVzcyhtZXNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJCdXR0b24gPSBpbnB1dC5vblJpZ2h0VHJpZ2dlclByZXNzICYmIGNvbnRyb2xsZXIuZ2V0Q29tcG9uZW50T2ZUeXBlKFwidHJpZ2dlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJpZ2dlckJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQnV0dG9uLm9uQnV0dG9uU3RhdGVDaGFuZ2VkT2JzZXJ2YWJsZS5hZGQoKGJ1dHRvbkNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uUmlnaHRUcmlnZ2VyUHJlc3MnLCBidXR0b25Db21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbkNvbXBvbmVudC5wcmVzc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVV0aWxzXzEubG9nTWVzc2FnZSh0aGlzLCAnb25SaWdodFRyaWdnZXJQcmVzcyAnICsgYnV0dG9uQ29tcG9uZW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5feHJIZWxwZXIucG9pbnRlclNlbGVjdGlvbi5nZXRNZXNoVW5kZXJQb2ludGVyKGlucHV0U291cmNlLnVuaXF1ZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5vblJpZ2h0VHJpZ2dlclByZXNzKG1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25Nb3Rpb25Db250cm9sbGVySW5pdCcsIGNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVVdGlsc18xLmxvZ01lc3NhZ2UodGhpcywgJ29uTW90aW9uQ29udHJvbGxlckluaXQgJyArIGNvbnRyb2xsZXIucHJvZmlsZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaGlkZGVuICovXHJcbiAgICBDb250cm9sbGVySW5wdXRTeXN0ZW0ucXVlcmllcyA9IHtcclxuICAgICAgICBpbnB1dDogeyBjb21wb25lbnRzOiBbQ29udHJvbGxlcklucHV0XzEuQ29udHJvbGxlcklucHV0XSwgbGlzdGVuOiB7IGFkZGVkOiB0cnVlLCByZW1vdmVkOiB0cnVlIH0gfSxcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29udHJvbGxlcklucHV0U3lzdGVtO1xyXG59KSgpO1xyXG5leHBvcnRzLkNvbnRyb2xsZXJJbnB1dFN5c3RlbSA9IENvbnRyb2xsZXJJbnB1dFN5c3RlbTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSBCQUJZTE9OOyJdLCJzb3VyY2VSb290IjoiIn0=